var lu=Object.defineProperty;var cu=(o,i,s)=>i in o?lu(o,i,{enumerable:!0,configurable:!0,writable:!0,value:s}):o[i]=s;var ur=(o,i,s)=>(cu(o,typeof i!="symbol"?i+"":i,s),s),ms=(o,i,s)=>{if(!i.has(o))throw TypeError("Cannot "+s)};var Ct=(o,i,s)=>(ms(o,i,"read from private field"),s?s.call(o):i.get(o)),tn=(o,i,s)=>{if(i.has(o))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(o):i.set(o,s)},pn=(o,i,s,a)=>(ms(o,i,"write to private field"),a?a.call(o,s):i.set(o,s),s);var Dr=(o,i,s,a)=>({set _(et){pn(o,i,et,s)},get _(){return Ct(o,i,a)}}),dn=(o,i,s)=>(ms(o,i,"access private method"),s);function _mergeNamespaces(o,i){for(var s=0;s<i.length;s++){const a=i[s];if(typeof a!="string"&&!Array.isArray(a)){for(const et in a)if(et!=="default"&&!(et in o)){const tt=Object.getOwnPropertyDescriptor(a,et);tt&&Object.defineProperty(o,et,tt.get?tt:{enumerable:!0,get:()=>a[et]})}}}return Object.freeze(Object.defineProperty(o,Symbol.toStringTag,{value:"Module"}))}(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const et of document.querySelectorAll('link[rel="modulepreload"]'))a(et);new MutationObserver(et=>{for(const tt of et)if(tt.type==="childList")for(const ot of tt.addedNodes)ot.tagName==="LINK"&&ot.rel==="modulepreload"&&a(ot)}).observe(document,{childList:!0,subtree:!0});function s(et){const tt={};return et.integrity&&(tt.integrity=et.integrity),et.referrerPolicy&&(tt.referrerPolicy=et.referrerPolicy),et.crossOrigin==="use-credentials"?tt.credentials="include":et.crossOrigin==="anonymous"?tt.credentials="omit":tt.credentials="same-origin",tt}function a(et){if(et.ep)return;et.ep=!0;const tt=s(et);fetch(et.href,tt)}})();function getDefaultExportFromCjs(o){return o&&o.__esModule&&Object.prototype.hasOwnProperty.call(o,"default")?o.default:o}function getAugmentedNamespace(o){if(o.__esModule)return o;var i=o.default;if(typeof i=="function"){var s=function a(){return this instanceof a?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};s.prototype=i.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(o).forEach(function(a){var et=Object.getOwnPropertyDescriptor(o,a);Object.defineProperty(s,a,et.get?et:{enumerable:!0,get:function(){return o[a]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$3=Symbol.for("react.element"),n$2=Symbol.for("react.portal"),p$4=Symbol.for("react.fragment"),q$4=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t$1=Symbol.for("react.provider"),u$1=Symbol.for("react.context"),v$5=Symbol.for("react.forward_ref"),w$4=Symbol.for("react.suspense"),x$2=Symbol.for("react.memo"),y$2=Symbol.for("react.lazy"),z$3=Symbol.iterator;function A$3(o){return o===null||typeof o!="object"?null:(o=z$3&&o[z$3]||o["@@iterator"],typeof o=="function"?o:null)}var B$3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$4=Object.assign,D$4={};function E$2(o,i,s){this.props=o,this.context=i,this.refs=D$4,this.updater=s||B$3}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(o,i){if(typeof o!="object"&&typeof o!="function"&&o!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,o,i,"setState")};E$2.prototype.forceUpdate=function(o){this.updater.enqueueForceUpdate(this,o,"forceUpdate")};function F$3(){}F$3.prototype=E$2.prototype;function G$3(o,i,s){this.props=o,this.context=i,this.refs=D$4,this.updater=s||B$3}var H$3=G$3.prototype=new F$3;H$3.constructor=G$3;C$4(H$3,E$2.prototype);H$3.isPureReactComponent=!0;var I$3=Array.isArray,J$2=Object.prototype.hasOwnProperty,K$3={current:null},L$2={key:!0,ref:!0,__self:!0,__source:!0};function M$3(o,i,s){var a,et={},tt=null,ot=null;if(i!=null)for(a in i.ref!==void 0&&(ot=i.ref),i.key!==void 0&&(tt=""+i.key),i)J$2.call(i,a)&&!L$2.hasOwnProperty(a)&&(et[a]=i[a]);var dt=arguments.length-2;if(dt===1)et.children=s;else if(1<dt){for(var ht=Array(dt),ft=0;ft<dt;ft++)ht[ft]=arguments[ft+2];et.children=ht}if(o&&o.defaultProps)for(a in dt=o.defaultProps,dt)et[a]===void 0&&(et[a]=dt[a]);return{$$typeof:l$3,type:o,key:tt,ref:ot,props:et,_owner:K$3.current}}function N$2(o,i){return{$$typeof:l$3,type:o.type,key:i,ref:o.ref,props:o.props,_owner:o._owner}}function O$3(o){return typeof o=="object"&&o!==null&&o.$$typeof===l$3}function escape$1(o){var i={"=":"=0",":":"=2"};return"$"+o.replace(/[=:]/g,function(s){return i[s]})}var P$3=/\/+/g;function Q$3(o,i){return typeof o=="object"&&o!==null&&o.key!=null?escape$1(""+o.key):i.toString(36)}function R$3(o,i,s,a,et){var tt=typeof o;(tt==="undefined"||tt==="boolean")&&(o=null);var ot=!1;if(o===null)ot=!0;else switch(tt){case"string":case"number":ot=!0;break;case"object":switch(o.$$typeof){case l$3:case n$2:ot=!0}}if(ot)return ot=o,et=et(ot),o=a===""?"."+Q$3(ot,0):a,I$3(et)?(s="",o!=null&&(s=o.replace(P$3,"$&/")+"/"),R$3(et,i,s,"",function(ft){return ft})):et!=null&&(O$3(et)&&(et=N$2(et,s+(!et.key||ot&&ot.key===et.key?"":(""+et.key).replace(P$3,"$&/")+"/")+o)),i.push(et)),1;if(ot=0,a=a===""?".":a+":",I$3(o))for(var dt=0;dt<o.length;dt++){tt=o[dt];var ht=a+Q$3(tt,dt);ot+=R$3(tt,i,s,ht,et)}else if(ht=A$3(o),typeof ht=="function")for(o=ht.call(o),dt=0;!(tt=o.next()).done;)tt=tt.value,ht=a+Q$3(tt,dt++),ot+=R$3(tt,i,s,ht,et);else if(tt==="object")throw i=String(o),Error("Objects are not valid as a React child (found: "+(i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i)+"). If you meant to render a collection of children, use an array instead.");return ot}function S$4(o,i,s){if(o==null)return o;var a=[],et=0;return R$3(o,a,"","",function(tt){return i.call(s,tt,et++)}),a}function T$3(o){if(o._status===-1){var i=o._result;i=i(),i.then(function(s){(o._status===0||o._status===-1)&&(o._status=1,o._result=s)},function(s){(o._status===0||o._status===-1)&&(o._status=2,o._result=s)}),o._status===-1&&(o._status=0,o._result=i)}if(o._status===1)return o._result.default;throw o._result}var U$3={current:null},V$3={transition:null},W$3={ReactCurrentDispatcher:U$3,ReactCurrentBatchConfig:V$3,ReactCurrentOwner:K$3};react_production_min.Children={map:S$4,forEach:function(o,i,s){S$4(o,function(){i.apply(this,arguments)},s)},count:function(o){var i=0;return S$4(o,function(){i++}),i},toArray:function(o){return S$4(o,function(i){return i})||[]},only:function(o){if(!O$3(o))throw Error("React.Children.only expected to receive a single React element child.");return o}};react_production_min.Component=E$2;react_production_min.Fragment=p$4;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$3;react_production_min.StrictMode=q$4;react_production_min.Suspense=w$4;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$3;react_production_min.cloneElement=function(o,i,s){if(o==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+o+".");var a=C$4({},o.props),et=o.key,tt=o.ref,ot=o._owner;if(i!=null){if(i.ref!==void 0&&(tt=i.ref,ot=K$3.current),i.key!==void 0&&(et=""+i.key),o.type&&o.type.defaultProps)var dt=o.type.defaultProps;for(ht in i)J$2.call(i,ht)&&!L$2.hasOwnProperty(ht)&&(a[ht]=i[ht]===void 0&&dt!==void 0?dt[ht]:i[ht])}var ht=arguments.length-2;if(ht===1)a.children=s;else if(1<ht){dt=Array(ht);for(var ft=0;ft<ht;ft++)dt[ft]=arguments[ft+2];a.children=dt}return{$$typeof:l$3,type:o.type,key:et,ref:tt,props:a,_owner:ot}};react_production_min.createContext=function(o){return o={$$typeof:u$1,_currentValue:o,_currentValue2:o,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},o.Provider={$$typeof:t$1,_context:o},o.Consumer=o};react_production_min.createElement=M$3;react_production_min.createFactory=function(o){var i=M$3.bind(null,o);return i.type=o,i};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(o){return{$$typeof:v$5,render:o}};react_production_min.isValidElement=O$3;react_production_min.lazy=function(o){return{$$typeof:y$2,_payload:{_status:-1,_result:o},_init:T$3}};react_production_min.memo=function(o,i){return{$$typeof:x$2,type:o,compare:i===void 0?null:i}};react_production_min.startTransition=function(o){var i=V$3.transition;V$3.transition={};try{o()}finally{V$3.transition=i}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(o,i){return U$3.current.useCallback(o,i)};react_production_min.useContext=function(o){return U$3.current.useContext(o)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(o){return U$3.current.useDeferredValue(o)};react_production_min.useEffect=function(o,i){return U$3.current.useEffect(o,i)};react_production_min.useId=function(){return U$3.current.useId()};react_production_min.useImperativeHandle=function(o,i,s){return U$3.current.useImperativeHandle(o,i,s)};react_production_min.useInsertionEffect=function(o,i){return U$3.current.useInsertionEffect(o,i)};react_production_min.useLayoutEffect=function(o,i){return U$3.current.useLayoutEffect(o,i)};react_production_min.useMemo=function(o,i){return U$3.current.useMemo(o,i)};react_production_min.useReducer=function(o,i,s){return U$3.current.useReducer(o,i,s)};react_production_min.useRef=function(o){return U$3.current.useRef(o)};react_production_min.useState=function(o){return U$3.current.useState(o)};react_production_min.useSyncExternalStore=function(o,i,s){return U$3.current.useSyncExternalStore(o,i,s)};react_production_min.useTransition=function(){return U$3.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f$2=reactExports,k$3=Symbol.for("react.element"),l$2=Symbol.for("react.fragment"),m$3=Object.prototype.hasOwnProperty,n$1=f$2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$3={key:!0,ref:!0,__self:!0,__source:!0};function q$3(o,i,s){var a,et={},tt=null,ot=null;s!==void 0&&(tt=""+s),i.key!==void 0&&(tt=""+i.key),i.ref!==void 0&&(ot=i.ref);for(a in i)m$3.call(i,a)&&!p$3.hasOwnProperty(a)&&(et[a]=i[a]);if(o&&o.defaultProps)for(a in i=o.defaultProps,i)et[a]===void 0&&(et[a]=i[a]);return{$$typeof:k$3,type:o,key:tt,ref:ot,props:et,_owner:n$1.current}}reactJsxRuntime_production_min.Fragment=l$2;reactJsxRuntime_production_min.jsx=q$3;reactJsxRuntime_production_min.jsxs=q$3;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(o){function i(Ft,Gt){var Jt=Ft.length;Ft.push(Gt);e:for(;0<Jt;){var on=Jt-1>>>1,bn=Ft[on];if(0<et(bn,Gt))Ft[on]=Gt,Ft[Jt]=bn,Jt=on;else break e}}function s(Ft){return Ft.length===0?null:Ft[0]}function a(Ft){if(Ft.length===0)return null;var Gt=Ft[0],Jt=Ft.pop();if(Jt!==Gt){Ft[0]=Jt;e:for(var on=0,bn=Ft.length,Ut=bn>>>1;on<Ut;){var It=2*(on+1)-1,Mt=Ft[It],$t=It+1,Lt=Ft[$t];if(0>et(Mt,Jt))$t<bn&&0>et(Lt,Mt)?(Ft[on]=Lt,Ft[$t]=Jt,on=$t):(Ft[on]=Mt,Ft[It]=Jt,on=It);else if($t<bn&&0>et(Lt,Jt))Ft[on]=Lt,Ft[$t]=Jt,on=$t;else break e}}return Gt}function et(Ft,Gt){var Jt=Ft.sortIndex-Gt.sortIndex;return Jt!==0?Jt:Ft.id-Gt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var tt=performance;o.unstable_now=function(){return tt.now()}}else{var ot=Date,dt=ot.now();o.unstable_now=function(){return ot.now()-dt}}var ht=[],ft=[],pt=1,mt=null,gt=3,_t=!1,yt=!1,St=!1,Et=typeof setTimeout=="function"?setTimeout:null,vt=typeof clearTimeout=="function"?clearTimeout:null,bt=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Tt(Ft){for(var Gt=s(ft);Gt!==null;){if(Gt.callback===null)a(ft);else if(Gt.startTime<=Ft)a(ft),Gt.sortIndex=Gt.expirationTime,i(ht,Gt);else break;Gt=s(ft)}}function wt(Ft){if(St=!1,Tt(Ft),!yt)if(s(ht)!==null)yt=!0,Ht(Pt);else{var Gt=s(ft);Gt!==null&&Wt(wt,Gt.startTime-Ft)}}function Pt(Ft,Gt){yt=!1,St&&(St=!1,vt(Ot),Ot=-1),_t=!0;var Jt=gt;try{for(Tt(Gt),mt=s(ht);mt!==null&&(!(mt.expirationTime>Gt)||Ft&&!Nt());){var on=mt.callback;if(typeof on=="function"){mt.callback=null,gt=mt.priorityLevel;var bn=on(mt.expirationTime<=Gt);Gt=o.unstable_now(),typeof bn=="function"?mt.callback=bn:mt===s(ht)&&a(ht),Tt(Gt)}else a(ht);mt=s(ht)}if(mt!==null)var Ut=!0;else{var It=s(ft);It!==null&&Wt(wt,It.startTime-Gt),Ut=!1}return Ut}finally{mt=null,gt=Jt,_t=!1}}var At=!1,xt=null,Ot=-1,Rt=5,Dt=-1;function Nt(){return!(o.unstable_now()-Dt<Rt)}function Kt(){if(xt!==null){var Ft=o.unstable_now();Dt=Ft;var Gt=!0;try{Gt=xt(!0,Ft)}finally{Gt?qt():(At=!1,xt=null)}}else At=!1}var qt;if(typeof bt=="function")qt=function(){bt(Kt)};else if(typeof MessageChannel<"u"){var jt=new MessageChannel,Zt=jt.port2;jt.port1.onmessage=Kt,qt=function(){Zt.postMessage(null)}}else qt=function(){Et(Kt,0)};function Ht(Ft){xt=Ft,At||(At=!0,qt())}function Wt(Ft,Gt){Ot=Et(function(){Ft(o.unstable_now())},Gt)}o.unstable_IdlePriority=5,o.unstable_ImmediatePriority=1,o.unstable_LowPriority=4,o.unstable_NormalPriority=3,o.unstable_Profiling=null,o.unstable_UserBlockingPriority=2,o.unstable_cancelCallback=function(Ft){Ft.callback=null},o.unstable_continueExecution=function(){yt||_t||(yt=!0,Ht(Pt))},o.unstable_forceFrameRate=function(Ft){0>Ft||125<Ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Rt=0<Ft?Math.floor(1e3/Ft):5},o.unstable_getCurrentPriorityLevel=function(){return gt},o.unstable_getFirstCallbackNode=function(){return s(ht)},o.unstable_next=function(Ft){switch(gt){case 1:case 2:case 3:var Gt=3;break;default:Gt=gt}var Jt=gt;gt=Gt;try{return Ft()}finally{gt=Jt}},o.unstable_pauseExecution=function(){},o.unstable_requestPaint=function(){},o.unstable_runWithPriority=function(Ft,Gt){switch(Ft){case 1:case 2:case 3:case 4:case 5:break;default:Ft=3}var Jt=gt;gt=Ft;try{return Gt()}finally{gt=Jt}},o.unstable_scheduleCallback=function(Ft,Gt,Jt){var on=o.unstable_now();switch(typeof Jt=="object"&&Jt!==null?(Jt=Jt.delay,Jt=typeof Jt=="number"&&0<Jt?on+Jt:on):Jt=on,Ft){case 1:var bn=-1;break;case 2:bn=250;break;case 5:bn=1073741823;break;case 4:bn=1e4;break;default:bn=5e3}return bn=Jt+bn,Ft={id:pt++,callback:Gt,priorityLevel:Ft,startTime:Jt,expirationTime:bn,sortIndex:-1},Jt>on?(Ft.sortIndex=Jt,i(ft,Ft),s(ht)===null&&Ft===s(ft)&&(St?(vt(Ot),Ot=-1):St=!0,Wt(wt,Jt-on))):(Ft.sortIndex=bn,i(ht,Ft),yt||_t||(yt=!0,Ht(Pt))),Ft},o.unstable_shouldYield=Nt,o.unstable_wrapCallback=function(Ft){var Gt=gt;return function(){var Jt=gt;gt=Gt;try{return Ft.apply(this,arguments)}finally{gt=Jt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$2(o){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+o,s=1;s<arguments.length;s++)i+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+o+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(o,i){ha$1(o,i),ha$1(o+"Capture",i)}function ha$1(o,i){for(ea$1[o]=i,o=0;o<i.length;o++)da$1.add(i[o])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma$1={};function oa$1(o){return ja.call(ma$1,o)?!0:ja.call(la,o)?!1:ka$1.test(o)?ma$1[o]=!0:(la[o]=!0,!1)}function pa$1(o,i,s,a){if(s!==null&&s.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return a?!1:s!==null?!s.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function qa$1(o,i,s,a){if(i===null||typeof i>"u"||pa$1(o,i,s,a))return!0;if(a)return!1;if(s!==null)switch(s.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function v$4(o,i,s,a,et,tt,ot){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=a,this.attributeNamespace=et,this.mustUseProperty=s,this.propertyName=o,this.type=i,this.sanitizeURL=tt,this.removeEmptyString=ot}var z$2={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){z$2[o]=new v$4(o,0,!1,o,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var i=o[0];z$2[i]=new v$4(i,1,!1,o[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(o){z$2[o]=new v$4(o,2,!1,o.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){z$2[o]=new v$4(o,2,!1,o,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){z$2[o]=new v$4(o,3,!1,o.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(o){z$2[o]=new v$4(o,3,!0,o,null,!1,!1)});["capture","download"].forEach(function(o){z$2[o]=new v$4(o,4,!1,o,null,!1,!1)});["cols","rows","size","span"].forEach(function(o){z$2[o]=new v$4(o,6,!1,o,null,!1,!1)});["rowSpan","start"].forEach(function(o){z$2[o]=new v$4(o,5,!1,o.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var i=o.replace(ra$1,sa$1);z$2[i]=new v$4(i,1,!1,o,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var i=o.replace(ra$1,sa$1);z$2[i]=new v$4(i,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(o){var i=o.replace(ra$1,sa$1);z$2[i]=new v$4(i,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(o){z$2[o]=new v$4(o,1,!1,o.toLowerCase(),null,!1,!1)});z$2.xlinkHref=new v$4("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(o){z$2[o]=new v$4(o,1,!1,o.toLowerCase(),null,!0,!0)});function ta$1(o,i,s,a){var et=z$2.hasOwnProperty(i)?z$2[i]:null;(et!==null?et.type!==0:a||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(qa$1(i,s,et,a)&&(s=null),a||et===null?oa$1(i)&&(s===null?o.removeAttribute(i):o.setAttribute(i,""+s)):et.mustUseProperty?o[et.propertyName]=s===null?et.type===3?!1:"":s:(i=et.attributeName,a=et.attributeNamespace,s===null?o.removeAttribute(i):(et=et.type,s=et===3||et===4&&s===!0?"":""+s,a?o.setAttributeNS(a,i,s):o.setAttribute(i,s))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka(o){return o===null||typeof o!="object"?null:(o=Ja$1&&o[Ja$1]||o["@@iterator"],typeof o=="function"?o:null)}var A$2=Object.assign,La;function Ma$1(o){if(La===void 0)try{throw Error()}catch(s){var i=s.stack.trim().match(/\n( *(at )?)/);La=i&&i[1]||""}return`
`+La+o}var Na$1=!1;function Oa$1(o,i){if(!o||Na$1)return"";Na$1=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(ft){var a=ft}Reflect.construct(o,[],i)}else{try{i.call()}catch(ft){a=ft}o.call(i.prototype)}else{try{throw Error()}catch(ft){a=ft}o()}}catch(ft){if(ft&&a&&typeof ft.stack=="string"){for(var et=ft.stack.split(`
`),tt=a.stack.split(`
`),ot=et.length-1,dt=tt.length-1;1<=ot&&0<=dt&&et[ot]!==tt[dt];)dt--;for(;1<=ot&&0<=dt;ot--,dt--)if(et[ot]!==tt[dt]){if(ot!==1||dt!==1)do if(ot--,dt--,0>dt||et[ot]!==tt[dt]){var ht=`
`+et[ot].replace(" at new "," at ");return o.displayName&&ht.includes("<anonymous>")&&(ht=ht.replace("<anonymous>",o.displayName)),ht}while(1<=ot&&0<=dt);break}}}finally{Na$1=!1,Error.prepareStackTrace=s}return(o=o?o.displayName||o.name:"")?Ma$1(o):""}function Pa$1(o){switch(o.tag){case 5:return Ma$1(o.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return o=Oa$1(o.type,!1),o;case 11:return o=Oa$1(o.type.render,!1),o;case 1:return o=Oa$1(o.type,!0),o;default:return""}}function Qa$1(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case Ca$1:return(o.displayName||"Context")+".Consumer";case Ba$1:return(o._context.displayName||"Context")+".Provider";case Da$1:var i=o.render;return o=o.displayName,o||(o=i.displayName||i.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Ga$1:return i=o.displayName||null,i!==null?i:Qa$1(o.type)||"Memo";case Ha$1:i=o._payload,o=o._init;try{return Qa$1(o(i))}catch{}}return null}function Ra$1(o){var i=o.type;switch(o.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=i.render,o=o.displayName||o.name||"",i.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(i);case 8:return i===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Sa$1(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ta$1(o){var i=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Ua$1(o){var i=Ta$1(o)?"checked":"value",s=Object.getOwnPropertyDescriptor(o.constructor.prototype,i),a=""+o[i];if(!o.hasOwnProperty(i)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var et=s.get,tt=s.set;return Object.defineProperty(o,i,{configurable:!0,get:function(){return et.call(this)},set:function(ot){a=""+ot,tt.call(this,ot)}}),Object.defineProperty(o,i,{enumerable:s.enumerable}),{getValue:function(){return a},setValue:function(ot){a=""+ot},stopTracking:function(){o._valueTracker=null,delete o[i]}}}}function Va$1(o){o._valueTracker||(o._valueTracker=Ua$1(o))}function Wa$1(o){if(!o)return!1;var i=o._valueTracker;if(!i)return!0;var s=i.getValue(),a="";return o&&(a=Ta$1(o)?o.checked?"true":"false":o.value),o=a,o!==s?(i.setValue(o),!0):!1}function Xa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function Ya$1(o,i){var s=i.checked;return A$2({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??o._wrapperState.initialChecked})}function Za$1(o,i){var s=i.defaultValue==null?"":i.defaultValue,a=i.checked!=null?i.checked:i.defaultChecked;s=Sa$1(i.value!=null?i.value:s),o._wrapperState={initialChecked:a,initialValue:s,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function ab$1(o,i){i=i.checked,i!=null&&ta$1(o,"checked",i,!1)}function bb$1(o,i){ab$1(o,i);var s=Sa$1(i.value),a=i.type;if(s!=null)a==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+s):o.value!==""+s&&(o.value=""+s);else if(a==="submit"||a==="reset"){o.removeAttribute("value");return}i.hasOwnProperty("value")?cb$1(o,i.type,s):i.hasOwnProperty("defaultValue")&&cb$1(o,i.type,Sa$1(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(o.defaultChecked=!!i.defaultChecked)}function db$2(o,i,s){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var a=i.type;if(!(a!=="submit"&&a!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+o._wrapperState.initialValue,s||i===o.value||(o.value=i),o.defaultValue=i}s=o.name,s!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,s!==""&&(o.name=s)}function cb$1(o,i,s){(i!=="number"||Xa(o.ownerDocument)!==o)&&(s==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+s&&(o.defaultValue=""+s))}var eb$1=Array.isArray;function fb$1(o,i,s,a){if(o=o.options,i){i={};for(var et=0;et<s.length;et++)i["$"+s[et]]=!0;for(s=0;s<o.length;s++)et=i.hasOwnProperty("$"+o[s].value),o[s].selected!==et&&(o[s].selected=et),et&&a&&(o[s].defaultSelected=!0)}else{for(s=""+Sa$1(s),i=null,et=0;et<o.length;et++){if(o[et].value===s){o[et].selected=!0,a&&(o[et].defaultSelected=!0);return}i!==null||o[et].disabled||(i=o[et])}i!==null&&(i.selected=!0)}}function gb$1(o,i){if(i.dangerouslySetInnerHTML!=null)throw Error(p$2(91));return A$2({},i,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function hb$1(o,i){var s=i.value;if(s==null){if(s=i.children,i=i.defaultValue,s!=null){if(i!=null)throw Error(p$2(92));if(eb$1(s)){if(1<s.length)throw Error(p$2(93));s=s[0]}i=s}i==null&&(i=""),s=i}o._wrapperState={initialValue:Sa$1(s)}}function ib$1(o,i){var s=Sa$1(i.value),a=Sa$1(i.defaultValue);s!=null&&(s=""+s,s!==o.value&&(o.value=s),i.defaultValue==null&&o.defaultValue!==s&&(o.defaultValue=s)),a!=null&&(o.defaultValue=""+a)}function jb$1(o){var i=o.textContent;i===o._wrapperState.initialValue&&i!==""&&i!==null&&(o.value=i)}function kb$1(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(o,i){return o==null||o==="http://www.w3.org/1999/xhtml"?kb$1(i):o==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var mb$1,nb$1=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,s,a,et){MSApp.execUnsafeLocalFunction(function(){return o(i,s,a,et)})}:o}(function(o,i){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=i;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=mb$1.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;i.firstChild;)o.appendChild(i.firstChild)}});function ob$1(o,i){if(i){var s=o.firstChild;if(s&&s===o.lastChild&&s.nodeType===3){s.nodeValue=i;return}}o.textContent=i}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(o){qb$1.forEach(function(i){i=i+o.charAt(0).toUpperCase()+o.substring(1),pb$1[i]=pb$1[o]})});function rb$1(o,i,s){return i==null||typeof i=="boolean"||i===""?"":s||typeof i!="number"||i===0||pb$1.hasOwnProperty(o)&&pb$1[o]?(""+i).trim():i+"px"}function sb$1(o,i){o=o.style;for(var s in i)if(i.hasOwnProperty(s)){var a=s.indexOf("--")===0,et=rb$1(s,i[s],a);s==="float"&&(s="cssFloat"),a?o.setProperty(s,et):o[s]=et}}var tb$1=A$2({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(o,i){if(i){if(tb$1[o]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(p$2(137,o));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(p$2(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(p$2(61))}if(i.style!=null&&typeof i.style!="object")throw Error(p$2(62))}}function vb$1(o,i){if(o.indexOf("-")===-1)return typeof i.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(o){if(o=Cb$1(o)){if(typeof yb$1!="function")throw Error(p$2(280));var i=o.stateNode;i&&(i=Db(i),yb$1(o.stateNode,o.type,i))}}function Eb$1(o){zb$1?Ab$1?Ab$1.push(o):Ab$1=[o]:zb$1=o}function Fb$1(){if(zb$1){var o=zb$1,i=Ab$1;if(Ab$1=zb$1=null,Bb$1(o),i)for(o=0;o<i.length;o++)Bb$1(i[o])}}function Gb$1(o,i){return o(i)}function Hb$1(){}var Ib$1=!1;function Jb$1(o,i,s){if(Ib$1)return o(i,s);Ib$1=!0;try{return Gb$1(o,i,s)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(o,i){var s=o.stateNode;if(s===null)return null;var a=Db(s);if(a===null)return null;s=a[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(a=!a.disabled)||(o=o.type,a=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!a;break e;default:o=!1}if(o)return null;if(s&&typeof s!="function")throw Error(p$2(231,i,typeof s));return s}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(o,i,s,a,et,tt,ot,dt,ht){var ft=Array.prototype.slice.call(arguments,3);try{i.apply(s,ft)}catch(pt){this.onError(pt)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(o){Ob$1=!0,Pb$1=o}};function Tb$1(o,i,s,a,et,tt,ot,dt,ht){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(o,i,s,a,et,tt,ot,dt,ht){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var ft=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$2(198));Qb$1||(Qb$1=!0,Rb$1=ft)}}function Vb$1(o){var i=o,s=o;if(o.alternate)for(;i.return;)i=i.return;else{o=i;do i=o,i.flags&4098&&(s=i.return),o=i.return;while(o)}return i.tag===3?s:null}function Wb$1(o){if(o.tag===13){var i=o.memoizedState;if(i===null&&(o=o.alternate,o!==null&&(i=o.memoizedState)),i!==null)return i.dehydrated}return null}function Xb$1(o){if(Vb$1(o)!==o)throw Error(p$2(188))}function Yb$1(o){var i=o.alternate;if(!i){if(i=Vb$1(o),i===null)throw Error(p$2(188));return i!==o?null:o}for(var s=o,a=i;;){var et=s.return;if(et===null)break;var tt=et.alternate;if(tt===null){if(a=et.return,a!==null){s=a;continue}break}if(et.child===tt.child){for(tt=et.child;tt;){if(tt===s)return Xb$1(et),o;if(tt===a)return Xb$1(et),i;tt=tt.sibling}throw Error(p$2(188))}if(s.return!==a.return)s=et,a=tt;else{for(var ot=!1,dt=et.child;dt;){if(dt===s){ot=!0,s=et,a=tt;break}if(dt===a){ot=!0,a=et,s=tt;break}dt=dt.sibling}if(!ot){for(dt=tt.child;dt;){if(dt===s){ot=!0,s=tt,a=et;break}if(dt===a){ot=!0,a=tt,s=et;break}dt=dt.sibling}if(!ot)throw Error(p$2(189))}}if(s.alternate!==a)throw Error(p$2(190))}if(s.tag!==3)throw Error(p$2(188));return s.stateNode.current===s?o:i}function Zb$1(o){return o=Yb$1(o),o!==null?$b$1(o):null}function $b$1(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var i=$b$1(o);if(i!==null)return i;o=o.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$2=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(o){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,o,void 0,(o.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(o){return o>>>=0,o===0?32:31-(pc$1(o)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function uc$1(o,i){var s=o.pendingLanes;if(s===0)return 0;var a=0,et=o.suspendedLanes,tt=o.pingedLanes,ot=s&268435455;if(ot!==0){var dt=ot&~et;dt!==0?a=tc$1(dt):(tt&=ot,tt!==0&&(a=tc$1(tt)))}else ot=s&~et,ot!==0?a=tc$1(ot):tt!==0&&(a=tc$1(tt));if(a===0)return 0;if(i!==0&&i!==a&&!(i&et)&&(et=a&-a,tt=i&-i,et>=tt||et===16&&(tt&4194240)!==0))return i;if(a&4&&(a|=s&16),i=o.entangledLanes,i!==0)for(o=o.entanglements,i&=a;0<i;)s=31-oc$1(i),et=1<<s,a|=o[s],i&=~et;return a}function vc$1(o,i){switch(o){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(o,i){for(var s=o.suspendedLanes,a=o.pingedLanes,et=o.expirationTimes,tt=o.pendingLanes;0<tt;){var ot=31-oc$1(tt),dt=1<<ot,ht=et[ot];ht===-1?(!(dt&s)||dt&a)&&(et[ot]=vc$1(dt,i)):ht<=i&&(o.expiredLanes|=dt),tt&=~dt}}function xc$1(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function yc$1(){var o=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),o}function zc$1(o){for(var i=[],s=0;31>s;s++)i.push(o);return i}function Ac$1(o,i,s){o.pendingLanes|=i,i!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,i=31-oc$1(i),o[i]=s}function Bc$1(o,i){var s=o.pendingLanes&~i;o.pendingLanes=i,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=i,o.mutableReadLanes&=i,o.entangledLanes&=i,i=o.entanglements;var a=o.eventTimes;for(o=o.expirationTimes;0<s;){var et=31-oc$1(s),tt=1<<et;i[et]=0,a[et]=-1,o[et]=-1,s&=~tt}}function Cc$1(o,i){var s=o.entangledLanes|=i;for(o=o.entanglements;s;){var a=31-oc$1(s),et=1<<a;et&i|o[a]&i&&(o[a]|=i),s&=~et}}var C$3=0;function Dc$1(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(o,i){switch(o){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(i.pointerId)}}function Tc$1(o,i,s,a,et,tt){return o===null||o.nativeEvent!==tt?(o={blockedOn:i,domEventName:s,eventSystemFlags:a,nativeEvent:tt,targetContainers:[et]},i!==null&&(i=Cb$1(i),i!==null&&Fc$1(i)),o):(o.eventSystemFlags|=a,i=o.targetContainers,et!==null&&i.indexOf(et)===-1&&i.push(et),o)}function Uc$1(o,i,s,a,et){switch(i){case"focusin":return Lc$1=Tc$1(Lc$1,o,i,s,a,et),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,o,i,s,a,et),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,o,i,s,a,et),!0;case"pointerover":var tt=et.pointerId;return Oc$1.set(tt,Tc$1(Oc$1.get(tt)||null,o,i,s,a,et)),!0;case"gotpointercapture":return tt=et.pointerId,Pc$1.set(tt,Tc$1(Pc$1.get(tt)||null,o,i,s,a,et)),!0}return!1}function Vc$1(o){var i=Wc$1(o.target);if(i!==null){var s=Vb$1(i);if(s!==null){if(i=s.tag,i===13){if(i=Wb$1(s),i!==null){o.blockedOn=i,Ic$1(o.priority,function(){Gc$1(s)});return}}else if(i===3&&s.stateNode.current.memoizedState.isDehydrated){o.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Xc$1(o){if(o.blockedOn!==null)return!1;for(var i=o.targetContainers;0<i.length;){var s=Yc$1(o.domEventName,o.eventSystemFlags,i[0],o.nativeEvent);if(s===null){s=o.nativeEvent;var a=new s.constructor(s.type,s);wb$1=a,s.target.dispatchEvent(a),wb$1=null}else return i=Cb$1(s),i!==null&&Fc$1(i),o.blockedOn=s,!1;i.shift()}return!0}function Zc$1(o,i,s){Xc$1(o)&&s.delete(i)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(o,i){o.blockedOn===i&&(o.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(o){function i(et){return ad$1(et,o)}if(0<Kc$1.length){ad$1(Kc$1[0],o);for(var s=1;s<Kc$1.length;s++){var a=Kc$1[s];a.blockedOn===o&&(a.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,o),Mc$1!==null&&ad$1(Mc$1,o),Nc$1!==null&&ad$1(Nc$1,o),Oc$1.forEach(i),Pc$1.forEach(i),s=0;s<Qc$1.length;s++)a=Qc$1[s],a.blockedOn===o&&(a.blockedOn=null);for(;0<Qc$1.length&&(s=Qc$1[0],s.blockedOn===null);)Vc$1(s),s.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(o,i,s,a){var et=C$3,tt=cd$1.transition;cd$1.transition=null;try{C$3=1,fd$1(o,i,s,a)}finally{C$3=et,cd$1.transition=tt}}function gd$1(o,i,s,a){var et=C$3,tt=cd$1.transition;cd$1.transition=null;try{C$3=4,fd$1(o,i,s,a)}finally{C$3=et,cd$1.transition=tt}}function fd$1(o,i,s,a){if(dd$1){var et=Yc$1(o,i,s,a);if(et===null)hd$1(o,i,a,id$1,s),Sc$1(o,a);else if(Uc$1(et,o,i,s,a))a.stopPropagation();else if(Sc$1(o,a),i&4&&-1<Rc$1.indexOf(o)){for(;et!==null;){var tt=Cb$1(et);if(tt!==null&&Ec$1(tt),tt=Yc$1(o,i,s,a),tt===null&&hd$1(o,i,a,id$1,s),tt===et)break;et=tt}et!==null&&a.stopPropagation()}else hd$1(o,i,a,null,s)}}var id$1=null;function Yc$1(o,i,s,a){if(id$1=null,o=xb$1(a),o=Wc$1(o),o!==null)if(i=Vb$1(o),i===null)o=null;else if(s=i.tag,s===13){if(o=Wb$1(i),o!==null)return o;o=null}else if(s===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;o=null}else i!==o&&(o=null);return id$1=o,null}function jd$1(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var o,i=ld$1,s=i.length,a,et="value"in kd$1?kd$1.value:kd$1.textContent,tt=et.length;for(o=0;o<s&&i[o]===et[o];o++);var ot=s-o;for(a=1;a<=ot&&i[s-a]===et[tt-a];a++);return md$1=et.slice(o,1<a?1-a:void 0)}function od$1(o){var i=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&i===13&&(o=13)):o=i,o===10&&(o=13),32<=o||o===13?o:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(o){function i(s,a,et,tt,ot){this._reactName=s,this._targetInst=et,this.type=a,this.nativeEvent=tt,this.target=ot,this.currentTarget=null;for(var dt in o)o.hasOwnProperty(dt)&&(s=o[dt],this[dt]=s?s(tt):tt[dt]);return this.isDefaultPrevented=(tt.defaultPrevented!=null?tt.defaultPrevented:tt.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$2(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),i}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$2({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$2({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==yd$1&&(yd$1&&o.type==="mousemove"?(wd$1=o.screenX-yd$1.screenX,xd$1=o.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=o),wd$1)},movementY:function(o){return"movementY"in o?o.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$2({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$2({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$2({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$2({},sd$1,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$2({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(o){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(o):(o=Od$1[o])?!!i[o]:!1}function zd$1(){return Pd$1}var Qd$1=A$2({},ud$1,{key:function(o){if(o.key){var i=Md$1[o.key]||o.key;if(i!=="Unidentified")return i}return o.type==="keypress"?(o=od$1(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Nd$1[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(o){return o.type==="keypress"?od$1(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?od$1(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$2({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$2({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$2({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$2({},Ad$1,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae$3=ia$1&&"CompositionEvent"in window,be$2=null;ia$1&&"documentMode"in document&&(be$2=document.documentMode);var ce$1=ia$1&&"TextEvent"in window&&!be$2,de=ia$1&&(!ae$3||be$2&&8<be$2&&11>=be$2),ee$2=" ",fe$1=!1;function ge$2(o,i){switch(o){case"keyup":return $d$1.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$2(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var ie$2=!1;function je$1(o,i){switch(o){case"compositionend":return he$2(i);case"keypress":return i.which!==32?null:(fe$1=!0,ee$2);case"textInput":return o=i.data,o===ee$2&&fe$1?null:o;default:return null}}function ke$1(o,i){if(ie$2)return o==="compositionend"||!ae$3&&ge$2(o,i)?(o=nd$1(),md$1=ld$1=kd$1=null,ie$2=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return de&&i.locale!=="ko"?null:i.data;default:return null}}var le$2={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$2(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i==="input"?!!le$2[o.type]:i==="textarea"}function ne$1(o,i,s,a){Eb$1(a),i=oe$2(i,"onChange"),0<i.length&&(s=new td$1("onChange","change",null,s,a),o.push({event:s,listeners:i}))}var pe$1=null,qe$1=null;function re$2(o){se$2(o,0)}function te$2(o){var i=ue$2(o);if(Wa$1(i))return o}function ve$1(o,i){if(o==="change")return i}var we$1=!1;if(ia$1){var xe$1;if(ia$1){var ye$1="oninput"in document;if(!ye$1){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye$1=typeof ze.oninput=="function"}xe$1=ye$1}else xe$1=!1;we$1=xe$1&&(!document.documentMode||9<document.documentMode)}function Ae$2(){pe$1&&(pe$1.detachEvent("onpropertychange",Be$1),qe$1=pe$1=null)}function Be$1(o){if(o.propertyName==="value"&&te$2(qe$1)){var i=[];ne$1(i,qe$1,o,xb$1(o)),Jb$1(re$2,i)}}function Ce$1(o,i,s){o==="focusin"?(Ae$2(),pe$1=i,qe$1=s,pe$1.attachEvent("onpropertychange",Be$1)):o==="focusout"&&Ae$2()}function De$1(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return te$2(qe$1)}function Ee$1(o,i){if(o==="click")return te$2(i)}function Fe$1(o,i){if(o==="input"||o==="change")return te$2(i)}function Ge$1(o,i){return o===i&&(o!==0||1/o===1/i)||o!==o&&i!==i}var He$1=typeof Object.is=="function"?Object.is:Ge$1;function Ie$2(o,i){if(He$1(o,i))return!0;if(typeof o!="object"||o===null||typeof i!="object"||i===null)return!1;var s=Object.keys(o),a=Object.keys(i);if(s.length!==a.length)return!1;for(a=0;a<s.length;a++){var et=s[a];if(!ja.call(i,et)||!He$1(o[et],i[et]))return!1}return!0}function Je$1(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ke$1(o,i){var s=Je$1(o);o=0;for(var a;s;){if(s.nodeType===3){if(a=o+s.textContent.length,o<=i&&a>=i)return{node:s,offset:i-o};o=a}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je$1(s)}}function Le(o,i){return o&&i?o===i?!0:o&&o.nodeType===3?!1:i&&i.nodeType===3?Le(o,i.parentNode):"contains"in o?o.contains(i):o.compareDocumentPosition?!!(o.compareDocumentPosition(i)&16):!1:!1}function Me$1(){for(var o=window,i=Xa();i instanceof o.HTMLIFrameElement;){try{var s=typeof i.contentWindow.location.href=="string"}catch{s=!1}if(s)o=i.contentWindow;else break;i=Xa(o.document)}return i}function Ne$1(o){var i=o&&o.nodeName&&o.nodeName.toLowerCase();return i&&(i==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||i==="textarea"||o.contentEditable==="true")}function Oe$1(o){var i=Me$1(),s=o.focusedElem,a=o.selectionRange;if(i!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(a!==null&&Ne$1(s)){if(i=a.start,o=a.end,o===void 0&&(o=i),"selectionStart"in s)s.selectionStart=i,s.selectionEnd=Math.min(o,s.value.length);else if(o=(i=s.ownerDocument||document)&&i.defaultView||window,o.getSelection){o=o.getSelection();var et=s.textContent.length,tt=Math.min(a.start,et);a=a.end===void 0?tt:Math.min(a.end,et),!o.extend&&tt>a&&(et=a,a=tt,tt=et),et=Ke$1(s,tt);var ot=Ke$1(s,a);et&&ot&&(o.rangeCount!==1||o.anchorNode!==et.node||o.anchorOffset!==et.offset||o.focusNode!==ot.node||o.focusOffset!==ot.offset)&&(i=i.createRange(),i.setStart(et.node,et.offset),o.removeAllRanges(),tt>a?(o.addRange(i),o.extend(ot.node,ot.offset)):(i.setEnd(ot.node,ot.offset),o.addRange(i)))}}for(i=[],o=s;o=o.parentNode;)o.nodeType===1&&i.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<i.length;s++)o=i[s],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Pe$2=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$2=null,Se$1=null,Te$1=!1;function Ue$1(o,i,s){var a=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te$1||Qe==null||Qe!==Xa(a)||(a=Qe,"selectionStart"in a&&Ne$1(a)?a={start:a.selectionStart,end:a.selectionEnd}:(a=(a.ownerDocument&&a.ownerDocument.defaultView||window).getSelection(),a={anchorNode:a.anchorNode,anchorOffset:a.anchorOffset,focusNode:a.focusNode,focusOffset:a.focusOffset}),Se$1&&Ie$2(Se$1,a)||(Se$1=a,a=oe$2(Re$2,"onSelect"),0<a.length&&(i=new td$1("onSelect","select",null,i,s),o.push({event:i,listeners:a}),i.target=Qe)))}function Ve$2(o,i){var s={};return s[o.toLowerCase()]=i.toLowerCase(),s["Webkit"+o]="webkit"+i,s["Moz"+o]="moz"+i,s}var We$1={animationend:Ve$2("Animation","AnimationEnd"),animationiteration:Ve$2("Animation","AnimationIteration"),animationstart:Ve$2("Animation","AnimationStart"),transitionend:Ve$2("Transition","TransitionEnd")},Xe$1={},Ye$1={};ia$1&&(Ye$1=document.createElement("div").style,"AnimationEvent"in window||(delete We$1.animationend.animation,delete We$1.animationiteration.animation,delete We$1.animationstart.animation),"TransitionEvent"in window||delete We$1.transitionend.transition);function Ze$1(o){if(Xe$1[o])return Xe$1[o];if(!We$1[o])return o;var i=We$1[o],s;for(s in i)if(i.hasOwnProperty(s)&&s in Ye$1)return Xe$1[o]=i[s];return o}var $e=Ze$1("animationend"),af=Ze$1("animationiteration"),bf=Ze$1("animationstart"),cf=Ze$1("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(o,i){df.set(o,i),fa$1(i,[o])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(o,i,s){var a=o.type||"unknown-event";o.currentTarget=s,Ub$1(a,i,void 0,o),o.currentTarget=null}function se$2(o,i){i=(i&4)!==0;for(var s=0;s<o.length;s++){var a=o[s],et=a.event;a=a.listeners;e:{var tt=void 0;if(i)for(var ot=a.length-1;0<=ot;ot--){var dt=a[ot],ht=dt.instance,ft=dt.currentTarget;if(dt=dt.listener,ht!==tt&&et.isPropagationStopped())break e;nf(et,dt,ft),tt=ht}else for(ot=0;ot<a.length;ot++){if(dt=a[ot],ht=dt.instance,ft=dt.currentTarget,dt=dt.listener,ht!==tt&&et.isPropagationStopped())break e;nf(et,dt,ft),tt=ht}}}if(Qb$1)throw o=Rb$1,Qb$1=!1,Rb$1=null,o}function D$3(o,i){var s=i[of];s===void 0&&(s=i[of]=new Set);var a=o+"__bubble";s.has(a)||(pf(i,o,2,!1),s.add(a))}function qf(o,i,s){var a=0;i&&(a|=4),pf(s,o,a,i)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(o){if(!o[rf]){o[rf]=!0,da$1.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,o),qf(s,!0,o))});var i=o.nodeType===9?o:o.ownerDocument;i===null||i[rf]||(i[rf]=!0,qf("selectionchange",!1,i))}}function pf(o,i,s,a){switch(jd$1(i)){case 1:var et=ed$1;break;case 4:et=gd$1;break;default:et=fd$1}s=et.bind(null,i,s,o),et=void 0,!Lb$1||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(et=!0),a?et!==void 0?o.addEventListener(i,s,{capture:!0,passive:et}):o.addEventListener(i,s,!0):et!==void 0?o.addEventListener(i,s,{passive:et}):o.addEventListener(i,s,!1)}function hd$1(o,i,s,a,et){var tt=a;if(!(i&1)&&!(i&2)&&a!==null)e:for(;;){if(a===null)return;var ot=a.tag;if(ot===3||ot===4){var dt=a.stateNode.containerInfo;if(dt===et||dt.nodeType===8&&dt.parentNode===et)break;if(ot===4)for(ot=a.return;ot!==null;){var ht=ot.tag;if((ht===3||ht===4)&&(ht=ot.stateNode.containerInfo,ht===et||ht.nodeType===8&&ht.parentNode===et))return;ot=ot.return}for(;dt!==null;){if(ot=Wc$1(dt),ot===null)return;if(ht=ot.tag,ht===5||ht===6){a=tt=ot;continue e}dt=dt.parentNode}}a=a.return}Jb$1(function(){var ft=tt,pt=xb$1(s),mt=[];e:{var gt=df.get(o);if(gt!==void 0){var _t=td$1,yt=o;switch(o){case"keypress":if(od$1(s)===0)break e;case"keydown":case"keyup":_t=Rd$1;break;case"focusin":yt="focus",_t=Fd$1;break;case"focusout":yt="blur",_t=Fd$1;break;case"beforeblur":case"afterblur":_t=Fd$1;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_t=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_t=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_t=Vd$1;break;case $e:case af:case bf:_t=Hd$1;break;case cf:_t=Xd$1;break;case"scroll":_t=vd$1;break;case"wheel":_t=Zd$1;break;case"copy":case"cut":case"paste":_t=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_t=Td$1}var St=(i&4)!==0,Et=!St&&o==="scroll",vt=St?gt!==null?gt+"Capture":null:gt;St=[];for(var bt=ft,Tt;bt!==null;){Tt=bt;var wt=Tt.stateNode;if(Tt.tag===5&&wt!==null&&(Tt=wt,vt!==null&&(wt=Kb$1(bt,vt),wt!=null&&St.push(tf(bt,wt,Tt)))),Et)break;bt=bt.return}0<St.length&&(gt=new _t(gt,yt,null,s,pt),mt.push({event:gt,listeners:St}))}}if(!(i&7)){e:{if(gt=o==="mouseover"||o==="pointerover",_t=o==="mouseout"||o==="pointerout",gt&&s!==wb$1&&(yt=s.relatedTarget||s.fromElement)&&(Wc$1(yt)||yt[uf]))break e;if((_t||gt)&&(gt=pt.window===pt?pt:(gt=pt.ownerDocument)?gt.defaultView||gt.parentWindow:window,_t?(yt=s.relatedTarget||s.toElement,_t=ft,yt=yt?Wc$1(yt):null,yt!==null&&(Et=Vb$1(yt),yt!==Et||yt.tag!==5&&yt.tag!==6)&&(yt=null)):(_t=null,yt=ft),_t!==yt)){if(St=Bd$1,wt="onMouseLeave",vt="onMouseEnter",bt="mouse",(o==="pointerout"||o==="pointerover")&&(St=Td$1,wt="onPointerLeave",vt="onPointerEnter",bt="pointer"),Et=_t==null?gt:ue$2(_t),Tt=yt==null?gt:ue$2(yt),gt=new St(wt,bt+"leave",_t,s,pt),gt.target=Et,gt.relatedTarget=Tt,wt=null,Wc$1(pt)===ft&&(St=new St(vt,bt+"enter",yt,s,pt),St.target=Tt,St.relatedTarget=Et,wt=St),Et=wt,_t&&yt)t:{for(St=_t,vt=yt,bt=0,Tt=St;Tt;Tt=vf(Tt))bt++;for(Tt=0,wt=vt;wt;wt=vf(wt))Tt++;for(;0<bt-Tt;)St=vf(St),bt--;for(;0<Tt-bt;)vt=vf(vt),Tt--;for(;bt--;){if(St===vt||vt!==null&&St===vt.alternate)break t;St=vf(St),vt=vf(vt)}St=null}else St=null;_t!==null&&wf(mt,gt,_t,St,!1),yt!==null&&Et!==null&&wf(mt,Et,yt,St,!0)}}e:{if(gt=ft?ue$2(ft):window,_t=gt.nodeName&&gt.nodeName.toLowerCase(),_t==="select"||_t==="input"&&gt.type==="file")var Pt=ve$1;else if(me$2(gt))if(we$1)Pt=Fe$1;else{Pt=De$1;var At=Ce$1}else(_t=gt.nodeName)&&_t.toLowerCase()==="input"&&(gt.type==="checkbox"||gt.type==="radio")&&(Pt=Ee$1);if(Pt&&(Pt=Pt(o,ft))){ne$1(mt,Pt,s,pt);break e}At&&At(o,gt,ft),o==="focusout"&&(At=gt._wrapperState)&&At.controlled&&gt.type==="number"&&cb$1(gt,"number",gt.value)}switch(At=ft?ue$2(ft):window,o){case"focusin":(me$2(At)||At.contentEditable==="true")&&(Qe=At,Re$2=ft,Se$1=null);break;case"focusout":Se$1=Re$2=Qe=null;break;case"mousedown":Te$1=!0;break;case"contextmenu":case"mouseup":case"dragend":Te$1=!1,Ue$1(mt,s,pt);break;case"selectionchange":if(Pe$2)break;case"keydown":case"keyup":Ue$1(mt,s,pt)}var xt;if(ae$3)e:{switch(o){case"compositionstart":var Ot="onCompositionStart";break e;case"compositionend":Ot="onCompositionEnd";break e;case"compositionupdate":Ot="onCompositionUpdate";break e}Ot=void 0}else ie$2?ge$2(o,s)&&(Ot="onCompositionEnd"):o==="keydown"&&s.keyCode===229&&(Ot="onCompositionStart");Ot&&(de&&s.locale!=="ko"&&(ie$2||Ot!=="onCompositionStart"?Ot==="onCompositionEnd"&&ie$2&&(xt=nd$1()):(kd$1=pt,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie$2=!0)),At=oe$2(ft,Ot),0<At.length&&(Ot=new Ld$1(Ot,o,null,s,pt),mt.push({event:Ot,listeners:At}),xt?Ot.data=xt:(xt=he$2(s),xt!==null&&(Ot.data=xt)))),(xt=ce$1?je$1(o,s):ke$1(o,s))&&(ft=oe$2(ft,"onBeforeInput"),0<ft.length&&(pt=new Ld$1("onBeforeInput","beforeinput",null,s,pt),mt.push({event:pt,listeners:ft}),pt.data=xt))}se$2(mt,i)})}function tf(o,i,s){return{instance:o,listener:i,currentTarget:s}}function oe$2(o,i){for(var s=i+"Capture",a=[];o!==null;){var et=o,tt=et.stateNode;et.tag===5&&tt!==null&&(et=tt,tt=Kb$1(o,s),tt!=null&&a.unshift(tf(o,tt,et)),tt=Kb$1(o,i),tt!=null&&a.push(tf(o,tt,et))),o=o.return}return a}function vf(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function wf(o,i,s,a,et){for(var tt=i._reactName,ot=[];s!==null&&s!==a;){var dt=s,ht=dt.alternate,ft=dt.stateNode;if(ht!==null&&ht===a)break;dt.tag===5&&ft!==null&&(dt=ft,et?(ht=Kb$1(s,tt),ht!=null&&ot.unshift(tf(s,ht,dt))):et||(ht=Kb$1(s,tt),ht!=null&&ot.push(tf(s,ht,dt)))),s=s.return}ot.length!==0&&o.push({event:i,listeners:ot})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(o){return(typeof o=="string"?o:""+o).replace(xf,`
`).replace(yf,"")}function Af(o,i,s){if(i=zf(i),zf(o)!==i&&s)throw Error(p$2(425))}function Bf(){}var Cf=null,Df=null;function Ef(o,i){return o==="textarea"||o==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(o){return Hf.resolve(null).then(o).catch(If)}:Ff;function If(o){setTimeout(function(){throw o})}function Kf(o,i){var s=i,a=0;do{var et=s.nextSibling;if(o.removeChild(s),et&&et.nodeType===8)if(s=et.data,s==="/$"){if(a===0){o.removeChild(et),bd$1(i);return}a--}else s!=="$"&&s!=="$?"&&s!=="$!"||a++;s=et}while(s);bd$1(i)}function Lf(o){for(;o!=null;o=o.nextSibling){var i=o.nodeType;if(i===1||i===3)break;if(i===8){if(i=o.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return o}function Mf(o){o=o.previousSibling;for(var i=0;o;){if(o.nodeType===8){var s=o.data;if(s==="$"||s==="$!"||s==="$?"){if(i===0)return o;i--}else s==="/$"&&i++}o=o.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc$1(o){var i=o[Of];if(i)return i;for(var s=o.parentNode;s;){if(i=s[uf]||s[Of]){if(s=i.alternate,i.child!==null||s!==null&&s.child!==null)for(o=Mf(o);o!==null;){if(s=o[Of])return s;o=Mf(o)}return i}o=s,s=o.parentNode}return null}function Cb$1(o){return o=o[Of]||o[uf],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ue$2(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(p$2(33))}function Db(o){return o[Pf]||null}var Sf=[],Tf=-1;function Uf(o){return{current:o}}function E$1(o){0>Tf||(o.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$2(o,i){Tf++,Sf[Tf]=o.current,o.current=i}var Vf={},H$2=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(o,i){var s=o.type.contextTypes;if(!s)return Vf;var a=o.stateNode;if(a&&a.__reactInternalMemoizedUnmaskedChildContext===i)return a.__reactInternalMemoizedMaskedChildContext;var et={},tt;for(tt in s)et[tt]=i[tt];return a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=i,o.__reactInternalMemoizedMaskedChildContext=et),et}function Zf(o){return o=o.childContextTypes,o!=null}function $f(){E$1(Wf),E$1(H$2)}function ag(o,i,s){if(H$2.current!==Vf)throw Error(p$2(168));G$2(H$2,i),G$2(Wf,s)}function bg(o,i,s){var a=o.stateNode;if(i=i.childContextTypes,typeof a.getChildContext!="function")return s;a=a.getChildContext();for(var et in a)if(!(et in i))throw Error(p$2(108,Ra$1(o)||"Unknown",et));return A$2({},s,a)}function cg(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$2.current,G$2(H$2,o),G$2(Wf,Wf.current),!0}function dg(o,i,s){var a=o.stateNode;if(!a)throw Error(p$2(169));s?(o=bg(o,i,Xf),a.__reactInternalMemoizedMergedChildContext=o,E$1(Wf),E$1(H$2),G$2(H$2,o)):E$1(Wf),G$2(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(o){eg===null?eg=[o]:eg.push(o)}function ig(o){fg=!0,hg(o)}function jg(){if(!gg&&eg!==null){gg=!0;var o=0,i=C$3;try{var s=eg;for(C$3=1;o<s.length;o++){var a=s[o];do a=a(!0);while(a!==null)}eg=null,fg=!1}catch(et){throw eg!==null&&(eg=eg.slice(o+1)),ac$1(fc$1,jg),et}finally{C$3=i,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(o,i){kg[lg++]=ng,kg[lg++]=mg,mg=o,ng=i}function ug(o,i,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=o;var a=rg;o=sg;var et=32-oc$1(a)-1;a&=~(1<<et),s+=1;var tt=32-oc$1(i)+et;if(30<tt){var ot=et-et%5;tt=(a&(1<<ot)-1).toString(32),a>>=ot,et-=ot,rg=1<<32-oc$1(i)+et|s<<et|a,sg=tt+o}else rg=1<<tt|s<<et|a,sg=o}function vg(o){o.return!==null&&(tg(o,1),ug(o,1,0))}function wg(o){for(;o===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;o===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$2=!1,zg=null;function Ag(o,i){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=i,s.return=o,i=o.deletions,i===null?(o.deletions=[s],o.flags|=16):i.push(s)}function Cg(o,i){switch(o.tag){case 5:var s=o.type;return i=i.nodeType!==1||s.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(o.stateNode=i,xg=o,yg=Lf(i.firstChild),!0):!1;case 6:return i=o.pendingProps===""||i.nodeType!==3?null:i,i!==null?(o.stateNode=i,xg=o,yg=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(s=qg!==null?{id:rg,overflow:sg}:null,o.memoizedState={dehydrated:i,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=i,s.return=o,o.child=s,xg=o,yg=null,!0):!1;default:return!1}}function Dg(o){return(o.mode&1)!==0&&(o.flags&128)===0}function Eg(o){if(I$2){var i=yg;if(i){var s=i;if(!Cg(o,i)){if(Dg(o))throw Error(p$2(418));i=Lf(s.nextSibling);var a=xg;i&&Cg(o,i)?Ag(a,s):(o.flags=o.flags&-4097|2,I$2=!1,xg=o)}}else{if(Dg(o))throw Error(p$2(418));o.flags=o.flags&-4097|2,I$2=!1,xg=o}}}function Fg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;xg=o}function Gg(o){if(o!==xg)return!1;if(!I$2)return Fg(o),I$2=!0,!1;var i;if((i=o.tag!==3)&&!(i=o.tag!==5)&&(i=o.type,i=i!=="head"&&i!=="body"&&!Ef(o.type,o.memoizedProps)),i&&(i=yg)){if(Dg(o))throw Hg(),Error(p$2(418));for(;i;)Ag(o,i),i=Lf(i.nextSibling)}if(Fg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(p$2(317));e:{for(o=o.nextSibling,i=0;o;){if(o.nodeType===8){var s=o.data;if(s==="/$"){if(i===0){yg=Lf(o.nextSibling);break e}i--}else s!=="$"&&s!=="$!"&&s!=="$?"||i++}o=o.nextSibling}yg=null}}else yg=xg?Lf(o.stateNode.nextSibling):null;return!0}function Hg(){for(var o=yg;o;)o=Lf(o.nextSibling)}function Ig(){yg=xg=null,I$2=!1}function Jg(o){zg===null?zg=[o]:zg.push(o)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(o,i){if(o&&o.defaultProps){i=A$2({},i),o=o.defaultProps;for(var s in o)i[s]===void 0&&(i[s]=o[s]);return i}return i}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(o){var i=Mg.current;E$1(Mg),o._currentValue=i}function Sg(o,i,s){for(;o!==null;){var a=o.alternate;if((o.childLanes&i)!==i?(o.childLanes|=i,a!==null&&(a.childLanes|=i)):a!==null&&(a.childLanes&i)!==i&&(a.childLanes|=i),o===s)break;o=o.return}}function Tg(o,i){Ng=o,Pg=Og=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&i&&(Ug=!0),o.firstContext=null)}function Vg(o){var i=o._currentValue;if(Pg!==o)if(o={context:o,memoizedValue:i,next:null},Og===null){if(Ng===null)throw Error(p$2(308));Og=o,Ng.dependencies={lanes:0,firstContext:o}}else Og=Og.next=o;return i}var Wg=null;function Xg(o){Wg===null?Wg=[o]:Wg.push(o)}function Yg(o,i,s,a){var et=i.interleaved;return et===null?(s.next=s,Xg(i)):(s.next=et.next,et.next=s),i.interleaved=s,Zg(o,a)}function Zg(o,i){o.lanes|=i;var s=o.alternate;for(s!==null&&(s.lanes|=i),s=o,o=o.return;o!==null;)o.childLanes|=i,s=o.alternate,s!==null&&(s.childLanes|=i),s=o,o=o.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(o,i){o=o.updateQueue,i.updateQueue===o&&(i.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function ch(o,i){return{eventTime:o,lane:i,tag:0,payload:null,callback:null,next:null}}function dh(o,i,s){var a=o.updateQueue;if(a===null)return null;if(a=a.shared,K$2&2){var et=a.pending;return et===null?i.next=i:(i.next=et.next,et.next=i),a.pending=i,Zg(o,s)}return et=a.interleaved,et===null?(i.next=i,Xg(a)):(i.next=et.next,et.next=i),a.interleaved=i,Zg(o,s)}function eh(o,i,s){if(i=i.updateQueue,i!==null&&(i=i.shared,(s&4194240)!==0)){var a=i.lanes;a&=o.pendingLanes,s|=a,i.lanes=s,Cc$1(o,s)}}function fh(o,i){var s=o.updateQueue,a=o.alternate;if(a!==null&&(a=a.updateQueue,s===a)){var et=null,tt=null;if(s=s.firstBaseUpdate,s!==null){do{var ot={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};tt===null?et=tt=ot:tt=tt.next=ot,s=s.next}while(s!==null);tt===null?et=tt=i:tt=tt.next=i}else et=tt=i;s={baseState:a.baseState,firstBaseUpdate:et,lastBaseUpdate:tt,shared:a.shared,effects:a.effects},o.updateQueue=s;return}o=s.lastBaseUpdate,o===null?s.firstBaseUpdate=i:o.next=i,s.lastBaseUpdate=i}function gh(o,i,s,a){var et=o.updateQueue;$g=!1;var tt=et.firstBaseUpdate,ot=et.lastBaseUpdate,dt=et.shared.pending;if(dt!==null){et.shared.pending=null;var ht=dt,ft=ht.next;ht.next=null,ot===null?tt=ft:ot.next=ft,ot=ht;var pt=o.alternate;pt!==null&&(pt=pt.updateQueue,dt=pt.lastBaseUpdate,dt!==ot&&(dt===null?pt.firstBaseUpdate=ft:dt.next=ft,pt.lastBaseUpdate=ht))}if(tt!==null){var mt=et.baseState;ot=0,pt=ft=ht=null,dt=tt;do{var gt=dt.lane,_t=dt.eventTime;if((a&gt)===gt){pt!==null&&(pt=pt.next={eventTime:_t,lane:0,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null});e:{var yt=o,St=dt;switch(gt=i,_t=s,St.tag){case 1:if(yt=St.payload,typeof yt=="function"){mt=yt.call(_t,mt,gt);break e}mt=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=St.payload,gt=typeof yt=="function"?yt.call(_t,mt,gt):yt,gt==null)break e;mt=A$2({},mt,gt);break e;case 2:$g=!0}}dt.callback!==null&&dt.lane!==0&&(o.flags|=64,gt=et.effects,gt===null?et.effects=[dt]:gt.push(dt))}else _t={eventTime:_t,lane:gt,tag:dt.tag,payload:dt.payload,callback:dt.callback,next:null},pt===null?(ft=pt=_t,ht=mt):pt=pt.next=_t,ot|=gt;if(dt=dt.next,dt===null){if(dt=et.shared.pending,dt===null)break;gt=dt,dt=gt.next,gt.next=null,et.lastBaseUpdate=gt,et.shared.pending=null}}while(!0);if(pt===null&&(ht=mt),et.baseState=ht,et.firstBaseUpdate=ft,et.lastBaseUpdate=pt,i=et.shared.interleaved,i!==null){et=i;do ot|=et.lane,et=et.next;while(et!==i)}else tt===null&&(et.shared.lanes=0);hh|=ot,o.lanes=ot,o.memoizedState=mt}}function ih(o,i,s){if(o=i.effects,i.effects=null,o!==null)for(i=0;i<o.length;i++){var a=o[i],et=a.callback;if(et!==null){if(a.callback=null,a=s,typeof et!="function")throw Error(p$2(191,et));et.call(a)}}}var jh=new aa$1.Component().refs;function kh(o,i,s,a){i=o.memoizedState,s=s(a,i),s=s==null?i:A$2({},i,s),o.memoizedState=s,o.lanes===0&&(o.updateQueue.baseState=s)}var nh={isMounted:function(o){return(o=o._reactInternals)?Vb$1(o)===o:!1},enqueueSetState:function(o,i,s){o=o._reactInternals;var a=L$1(),et=lh(o),tt=ch(a,et);tt.payload=i,s!=null&&(tt.callback=s),i=dh(o,tt,et),i!==null&&(mh(i,o,et,a),eh(i,o,et))},enqueueReplaceState:function(o,i,s){o=o._reactInternals;var a=L$1(),et=lh(o),tt=ch(a,et);tt.tag=1,tt.payload=i,s!=null&&(tt.callback=s),i=dh(o,tt,et),i!==null&&(mh(i,o,et,a),eh(i,o,et))},enqueueForceUpdate:function(o,i){o=o._reactInternals;var s=L$1(),a=lh(o),et=ch(s,a);et.tag=2,i!=null&&(et.callback=i),i=dh(o,et,a),i!==null&&(mh(i,o,a,s),eh(i,o,a))}};function oh(o,i,s,a,et,tt,ot){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(a,tt,ot):i.prototype&&i.prototype.isPureReactComponent?!Ie$2(s,a)||!Ie$2(et,tt):!0}function ph(o,i,s){var a=!1,et=Vf,tt=i.contextType;return typeof tt=="object"&&tt!==null?tt=Vg(tt):(et=Zf(i)?Xf:H$2.current,a=i.contextTypes,tt=(a=a!=null)?Yf(o,et):Vf),i=new i(s,tt),o.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=nh,o.stateNode=i,i._reactInternals=o,a&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=et,o.__reactInternalMemoizedMaskedChildContext=tt),i}function qh(o,i,s,a){o=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(s,a),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(s,a),i.state!==o&&nh.enqueueReplaceState(i,i.state,null)}function rh(o,i,s,a){var et=o.stateNode;et.props=s,et.state=o.memoizedState,et.refs=jh,ah(o);var tt=i.contextType;typeof tt=="object"&&tt!==null?et.context=Vg(tt):(tt=Zf(i)?Xf:H$2.current,et.context=Yf(o,tt)),et.state=o.memoizedState,tt=i.getDerivedStateFromProps,typeof tt=="function"&&(kh(o,i,tt,s),et.state=o.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof et.getSnapshotBeforeUpdate=="function"||typeof et.UNSAFE_componentWillMount!="function"&&typeof et.componentWillMount!="function"||(i=et.state,typeof et.componentWillMount=="function"&&et.componentWillMount(),typeof et.UNSAFE_componentWillMount=="function"&&et.UNSAFE_componentWillMount(),i!==et.state&&nh.enqueueReplaceState(et,et.state,null),gh(o,s,et,a),et.state=o.memoizedState),typeof et.componentDidMount=="function"&&(o.flags|=4194308)}function sh(o,i,s){if(o=s.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$2(309));var a=s.stateNode}if(!a)throw Error(p$2(147,o));var et=a,tt=""+o;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===tt?i.ref:(i=function(ot){var dt=et.refs;dt===jh&&(dt=et.refs={}),ot===null?delete dt[tt]:dt[tt]=ot},i._stringRef=tt,i)}if(typeof o!="string")throw Error(p$2(284));if(!s._owner)throw Error(p$2(290,o))}return o}function th(o,i){throw o=Object.prototype.toString.call(i),Error(p$2(31,o==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":o))}function uh(o){var i=o._init;return i(o._payload)}function vh(o){function i(vt,bt){if(o){var Tt=vt.deletions;Tt===null?(vt.deletions=[bt],vt.flags|=16):Tt.push(bt)}}function s(vt,bt){if(!o)return null;for(;bt!==null;)i(vt,bt),bt=bt.sibling;return null}function a(vt,bt){for(vt=new Map;bt!==null;)bt.key!==null?vt.set(bt.key,bt):vt.set(bt.index,bt),bt=bt.sibling;return vt}function et(vt,bt){return vt=wh(vt,bt),vt.index=0,vt.sibling=null,vt}function tt(vt,bt,Tt){return vt.index=Tt,o?(Tt=vt.alternate,Tt!==null?(Tt=Tt.index,Tt<bt?(vt.flags|=2,bt):Tt):(vt.flags|=2,bt)):(vt.flags|=1048576,bt)}function ot(vt){return o&&vt.alternate===null&&(vt.flags|=2),vt}function dt(vt,bt,Tt,wt){return bt===null||bt.tag!==6?(bt=xh(Tt,vt.mode,wt),bt.return=vt,bt):(bt=et(bt,Tt),bt.return=vt,bt)}function ht(vt,bt,Tt,wt){var Pt=Tt.type;return Pt===ya$1?pt(vt,bt,Tt.props.children,wt,Tt.key):bt!==null&&(bt.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===Ha$1&&uh(Pt)===bt.type)?(wt=et(bt,Tt.props),wt.ref=sh(vt,bt,Tt),wt.return=vt,wt):(wt=yh(Tt.type,Tt.key,Tt.props,null,vt.mode,wt),wt.ref=sh(vt,bt,Tt),wt.return=vt,wt)}function ft(vt,bt,Tt,wt){return bt===null||bt.tag!==4||bt.stateNode.containerInfo!==Tt.containerInfo||bt.stateNode.implementation!==Tt.implementation?(bt=zh(Tt,vt.mode,wt),bt.return=vt,bt):(bt=et(bt,Tt.children||[]),bt.return=vt,bt)}function pt(vt,bt,Tt,wt,Pt){return bt===null||bt.tag!==7?(bt=Ah(Tt,vt.mode,wt,Pt),bt.return=vt,bt):(bt=et(bt,Tt),bt.return=vt,bt)}function mt(vt,bt,Tt){if(typeof bt=="string"&&bt!==""||typeof bt=="number")return bt=xh(""+bt,vt.mode,Tt),bt.return=vt,bt;if(typeof bt=="object"&&bt!==null){switch(bt.$$typeof){case va$1:return Tt=yh(bt.type,bt.key,bt.props,null,vt.mode,Tt),Tt.ref=sh(vt,null,bt),Tt.return=vt,Tt;case wa$1:return bt=zh(bt,vt.mode,Tt),bt.return=vt,bt;case Ha$1:var wt=bt._init;return mt(vt,wt(bt._payload),Tt)}if(eb$1(bt)||Ka(bt))return bt=Ah(bt,vt.mode,Tt,null),bt.return=vt,bt;th(vt,bt)}return null}function gt(vt,bt,Tt,wt){var Pt=bt!==null?bt.key:null;if(typeof Tt=="string"&&Tt!==""||typeof Tt=="number")return Pt!==null?null:dt(vt,bt,""+Tt,wt);if(typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va$1:return Tt.key===Pt?ht(vt,bt,Tt,wt):null;case wa$1:return Tt.key===Pt?ft(vt,bt,Tt,wt):null;case Ha$1:return Pt=Tt._init,gt(vt,bt,Pt(Tt._payload),wt)}if(eb$1(Tt)||Ka(Tt))return Pt!==null?null:pt(vt,bt,Tt,wt,null);th(vt,Tt)}return null}function _t(vt,bt,Tt,wt,Pt){if(typeof wt=="string"&&wt!==""||typeof wt=="number")return vt=vt.get(Tt)||null,dt(bt,vt,""+wt,Pt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case va$1:return vt=vt.get(wt.key===null?Tt:wt.key)||null,ht(bt,vt,wt,Pt);case wa$1:return vt=vt.get(wt.key===null?Tt:wt.key)||null,ft(bt,vt,wt,Pt);case Ha$1:var At=wt._init;return _t(vt,bt,Tt,At(wt._payload),Pt)}if(eb$1(wt)||Ka(wt))return vt=vt.get(Tt)||null,pt(bt,vt,wt,Pt,null);th(bt,wt)}return null}function yt(vt,bt,Tt,wt){for(var Pt=null,At=null,xt=bt,Ot=bt=0,Rt=null;xt!==null&&Ot<Tt.length;Ot++){xt.index>Ot?(Rt=xt,xt=null):Rt=xt.sibling;var Dt=gt(vt,xt,Tt[Ot],wt);if(Dt===null){xt===null&&(xt=Rt);break}o&&xt&&Dt.alternate===null&&i(vt,xt),bt=tt(Dt,bt,Ot),At===null?Pt=Dt:At.sibling=Dt,At=Dt,xt=Rt}if(Ot===Tt.length)return s(vt,xt),I$2&&tg(vt,Ot),Pt;if(xt===null){for(;Ot<Tt.length;Ot++)xt=mt(vt,Tt[Ot],wt),xt!==null&&(bt=tt(xt,bt,Ot),At===null?Pt=xt:At.sibling=xt,At=xt);return I$2&&tg(vt,Ot),Pt}for(xt=a(vt,xt);Ot<Tt.length;Ot++)Rt=_t(xt,vt,Ot,Tt[Ot],wt),Rt!==null&&(o&&Rt.alternate!==null&&xt.delete(Rt.key===null?Ot:Rt.key),bt=tt(Rt,bt,Ot),At===null?Pt=Rt:At.sibling=Rt,At=Rt);return o&&xt.forEach(function(Nt){return i(vt,Nt)}),I$2&&tg(vt,Ot),Pt}function St(vt,bt,Tt,wt){var Pt=Ka(Tt);if(typeof Pt!="function")throw Error(p$2(150));if(Tt=Pt.call(Tt),Tt==null)throw Error(p$2(151));for(var At=Pt=null,xt=bt,Ot=bt=0,Rt=null,Dt=Tt.next();xt!==null&&!Dt.done;Ot++,Dt=Tt.next()){xt.index>Ot?(Rt=xt,xt=null):Rt=xt.sibling;var Nt=gt(vt,xt,Dt.value,wt);if(Nt===null){xt===null&&(xt=Rt);break}o&&xt&&Nt.alternate===null&&i(vt,xt),bt=tt(Nt,bt,Ot),At===null?Pt=Nt:At.sibling=Nt,At=Nt,xt=Rt}if(Dt.done)return s(vt,xt),I$2&&tg(vt,Ot),Pt;if(xt===null){for(;!Dt.done;Ot++,Dt=Tt.next())Dt=mt(vt,Dt.value,wt),Dt!==null&&(bt=tt(Dt,bt,Ot),At===null?Pt=Dt:At.sibling=Dt,At=Dt);return I$2&&tg(vt,Ot),Pt}for(xt=a(vt,xt);!Dt.done;Ot++,Dt=Tt.next())Dt=_t(xt,vt,Ot,Dt.value,wt),Dt!==null&&(o&&Dt.alternate!==null&&xt.delete(Dt.key===null?Ot:Dt.key),bt=tt(Dt,bt,Ot),At===null?Pt=Dt:At.sibling=Dt,At=Dt);return o&&xt.forEach(function(Kt){return i(vt,Kt)}),I$2&&tg(vt,Ot),Pt}function Et(vt,bt,Tt,wt){if(typeof Tt=="object"&&Tt!==null&&Tt.type===ya$1&&Tt.key===null&&(Tt=Tt.props.children),typeof Tt=="object"&&Tt!==null){switch(Tt.$$typeof){case va$1:e:{for(var Pt=Tt.key,At=bt;At!==null;){if(At.key===Pt){if(Pt=Tt.type,Pt===ya$1){if(At.tag===7){s(vt,At.sibling),bt=et(At,Tt.props.children),bt.return=vt,vt=bt;break e}}else if(At.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===Ha$1&&uh(Pt)===At.type){s(vt,At.sibling),bt=et(At,Tt.props),bt.ref=sh(vt,At,Tt),bt.return=vt,vt=bt;break e}s(vt,At);break}else i(vt,At);At=At.sibling}Tt.type===ya$1?(bt=Ah(Tt.props.children,vt.mode,wt,Tt.key),bt.return=vt,vt=bt):(wt=yh(Tt.type,Tt.key,Tt.props,null,vt.mode,wt),wt.ref=sh(vt,bt,Tt),wt.return=vt,vt=wt)}return ot(vt);case wa$1:e:{for(At=Tt.key;bt!==null;){if(bt.key===At)if(bt.tag===4&&bt.stateNode.containerInfo===Tt.containerInfo&&bt.stateNode.implementation===Tt.implementation){s(vt,bt.sibling),bt=et(bt,Tt.children||[]),bt.return=vt,vt=bt;break e}else{s(vt,bt);break}else i(vt,bt);bt=bt.sibling}bt=zh(Tt,vt.mode,wt),bt.return=vt,vt=bt}return ot(vt);case Ha$1:return At=Tt._init,Et(vt,bt,At(Tt._payload),wt)}if(eb$1(Tt))return yt(vt,bt,Tt,wt);if(Ka(Tt))return St(vt,bt,Tt,wt);th(vt,Tt)}return typeof Tt=="string"&&Tt!==""||typeof Tt=="number"?(Tt=""+Tt,bt!==null&&bt.tag===6?(s(vt,bt.sibling),bt=et(bt,Tt),bt.return=vt,vt=bt):(s(vt,bt),bt=xh(Tt,vt.mode,wt),bt.return=vt,vt=bt),ot(vt)):s(vt,bt)}return Et}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(o){if(o===Dh)throw Error(p$2(174));return o}function Ih(o,i){switch(G$2(Gh,i),G$2(Fh,o),G$2(Eh,Dh),o=i.nodeType,o){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:lb$1(null,"");break;default:o=o===8?i.parentNode:i,i=o.namespaceURI||null,o=o.tagName,i=lb$1(i,o)}E$1(Eh),G$2(Eh,i)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(o){Hh(Gh.current);var i=Hh(Eh.current),s=lb$1(i,o.type);i!==s&&(G$2(Fh,o),G$2(Eh,s))}function Lh(o){Fh.current===o&&(E$1(Eh),E$1(Fh))}var M$2=Uf(0);function Mh(o){for(var i=o;i!==null;){if(i.tag===13){var s=i.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if(i.flags&128)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var Nh=[];function Oh(){for(var o=0;o<Nh.length;o++)Nh[o]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$1=null,O$2=null,P$2=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$2(){throw Error(p$2(321))}function Wh(o,i){if(i===null)return!1;for(var s=0;s<i.length&&s<o.length;s++)if(!He$1(o[s],i[s]))return!1;return!0}function Xh(o,i,s,a,et,tt){if(Rh=tt,N$1=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ph.current=o===null||o.memoizedState===null?Yh:Zh,o=s(a,et),Th){tt=0;do{if(Th=!1,Uh=0,25<=tt)throw Error(p$2(301));tt+=1,P$2=O$2=null,i.updateQueue=null,Ph.current=$h,o=s(a,et)}while(Th)}if(Ph.current=ai,i=O$2!==null&&O$2.next!==null,Rh=0,P$2=O$2=N$1=null,Sh=!1,i)throw Error(p$2(300));return o}function bi(){var o=Uh!==0;return Uh=0,o}function ci(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$2===null?N$1.memoizedState=P$2=o:P$2=P$2.next=o,P$2}function di(){if(O$2===null){var o=N$1.alternate;o=o!==null?o.memoizedState:null}else o=O$2.next;var i=P$2===null?N$1.memoizedState:P$2.next;if(i!==null)P$2=i,O$2=o;else{if(o===null)throw Error(p$2(310));O$2=o,o={memoizedState:O$2.memoizedState,baseState:O$2.baseState,baseQueue:O$2.baseQueue,queue:O$2.queue,next:null},P$2===null?N$1.memoizedState=P$2=o:P$2=P$2.next=o}return P$2}function ei(o,i){return typeof i=="function"?i(o):i}function fi(o){var i=di(),s=i.queue;if(s===null)throw Error(p$2(311));s.lastRenderedReducer=o;var a=O$2,et=a.baseQueue,tt=s.pending;if(tt!==null){if(et!==null){var ot=et.next;et.next=tt.next,tt.next=ot}a.baseQueue=et=tt,s.pending=null}if(et!==null){tt=et.next,a=a.baseState;var dt=ot=null,ht=null,ft=tt;do{var pt=ft.lane;if((Rh&pt)===pt)ht!==null&&(ht=ht.next={lane:0,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null}),a=ft.hasEagerState?ft.eagerState:o(a,ft.action);else{var mt={lane:pt,action:ft.action,hasEagerState:ft.hasEagerState,eagerState:ft.eagerState,next:null};ht===null?(dt=ht=mt,ot=a):ht=ht.next=mt,N$1.lanes|=pt,hh|=pt}ft=ft.next}while(ft!==null&&ft!==tt);ht===null?ot=a:ht.next=dt,He$1(a,i.memoizedState)||(Ug=!0),i.memoizedState=a,i.baseState=ot,i.baseQueue=ht,s.lastRenderedState=a}if(o=s.interleaved,o!==null){et=o;do tt=et.lane,N$1.lanes|=tt,hh|=tt,et=et.next;while(et!==o)}else et===null&&(s.lanes=0);return[i.memoizedState,s.dispatch]}function gi(o){var i=di(),s=i.queue;if(s===null)throw Error(p$2(311));s.lastRenderedReducer=o;var a=s.dispatch,et=s.pending,tt=i.memoizedState;if(et!==null){s.pending=null;var ot=et=et.next;do tt=o(tt,ot.action),ot=ot.next;while(ot!==et);He$1(tt,i.memoizedState)||(Ug=!0),i.memoizedState=tt,i.baseQueue===null&&(i.baseState=tt),s.lastRenderedState=tt}return[tt,a]}function hi(){}function ii(o,i){var s=N$1,a=di(),et=i(),tt=!He$1(a.memoizedState,et);if(tt&&(a.memoizedState=et,Ug=!0),a=a.queue,ji(ki.bind(null,s,a,o),[o]),a.getSnapshot!==i||tt||P$2!==null&&P$2.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,a,et,i),void 0,null),R$2===null)throw Error(p$2(349));Rh&30||ni(s,i,et)}return et}function ni(o,i,s){o.flags|=16384,o={getSnapshot:i,value:s},i=N$1.updateQueue,i===null?(i={lastEffect:null,stores:null},N$1.updateQueue=i,i.stores=[o]):(s=i.stores,s===null?i.stores=[o]:s.push(o))}function mi(o,i,s,a){i.value=s,i.getSnapshot=a,oi(i)&&pi(o)}function ki(o,i,s){return s(function(){oi(i)&&pi(o)})}function oi(o){var i=o.getSnapshot;o=o.value;try{var s=i();return!He$1(o,s)}catch{return!0}}function pi(o){var i=Zg(o,1);i!==null&&mh(i,o,1,-1)}function qi(o){var i=ci();return typeof o=="function"&&(o=o()),i.memoizedState=i.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:o},i.queue=o,o=o.dispatch=ri.bind(null,N$1,o),[i.memoizedState,o]}function li(o,i,s,a){return o={tag:o,create:i,destroy:s,deps:a,next:null},i=N$1.updateQueue,i===null?(i={lastEffect:null,stores:null},N$1.updateQueue=i,i.lastEffect=o.next=o):(s=i.lastEffect,s===null?i.lastEffect=o.next=o:(a=s.next,s.next=o,o.next=a,i.lastEffect=o)),o}function si(){return di().memoizedState}function ti(o,i,s,a){var et=ci();N$1.flags|=o,et.memoizedState=li(1|i,s,void 0,a===void 0?null:a)}function ui(o,i,s,a){var et=di();a=a===void 0?null:a;var tt=void 0;if(O$2!==null){var ot=O$2.memoizedState;if(tt=ot.destroy,a!==null&&Wh(a,ot.deps)){et.memoizedState=li(i,s,tt,a);return}}N$1.flags|=o,et.memoizedState=li(1|i,s,tt,a)}function vi(o,i){return ti(8390656,8,o,i)}function ji(o,i){return ui(2048,8,o,i)}function wi(o,i){return ui(4,2,o,i)}function xi(o,i){return ui(4,4,o,i)}function yi(o,i){if(typeof i=="function")return o=o(),i(o),function(){i(null)};if(i!=null)return o=o(),i.current=o,function(){i.current=null}}function zi(o,i,s){return s=s!=null?s.concat([o]):null,ui(4,4,yi.bind(null,i,o),s)}function Ai(){}function Bi(o,i){var s=di();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Wh(i,a[1])?a[0]:(s.memoizedState=[o,i],o)}function Ci(o,i){var s=di();i=i===void 0?null:i;var a=s.memoizedState;return a!==null&&i!==null&&Wh(i,a[1])?a[0]:(o=o(),s.memoizedState=[o,i],o)}function Di(o,i,s){return Rh&21?(He$1(s,i)||(s=yc$1(),N$1.lanes|=s,hh|=s,o.baseState=!0),i):(o.baseState&&(o.baseState=!1,Ug=!0),o.memoizedState=s)}function Ei(o,i){var s=C$3;C$3=s!==0&&4>s?s:4,o(!0);var a=Qh.transition;Qh.transition={};try{o(!1),i()}finally{C$3=s,Qh.transition=a}}function Fi(){return di().memoizedState}function Gi(o,i,s){var a=lh(o);if(s={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(o))Ii(i,s);else if(s=Yg(o,i,s,a),s!==null){var et=L$1();mh(s,o,a,et),Ji(s,i,a)}}function ri(o,i,s){var a=lh(o),et={lane:a,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(o))Ii(i,et);else{var tt=o.alternate;if(o.lanes===0&&(tt===null||tt.lanes===0)&&(tt=i.lastRenderedReducer,tt!==null))try{var ot=i.lastRenderedState,dt=tt(ot,s);if(et.hasEagerState=!0,et.eagerState=dt,He$1(dt,ot)){var ht=i.interleaved;ht===null?(et.next=et,Xg(i)):(et.next=ht.next,ht.next=et),i.interleaved=et;return}}catch{}finally{}s=Yg(o,i,et,a),s!==null&&(et=L$1(),mh(s,o,a,et),Ji(s,i,a))}}function Hi(o){var i=o.alternate;return o===N$1||i!==null&&i===N$1}function Ii(o,i){Th=Sh=!0;var s=o.pending;s===null?i.next=i:(i.next=s.next,s.next=i),o.pending=i}function Ji(o,i,s){if(s&4194240){var a=i.lanes;a&=o.pendingLanes,s|=a,i.lanes=s,Cc$1(o,s)}}var ai={readContext:Vg,useCallback:Q$2,useContext:Q$2,useEffect:Q$2,useImperativeHandle:Q$2,useInsertionEffect:Q$2,useLayoutEffect:Q$2,useMemo:Q$2,useReducer:Q$2,useRef:Q$2,useState:Q$2,useDebugValue:Q$2,useDeferredValue:Q$2,useTransition:Q$2,useMutableSource:Q$2,useSyncExternalStore:Q$2,useId:Q$2,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(o,i){return ci().memoizedState=[o,i===void 0?null:i],o},useContext:Vg,useEffect:vi,useImperativeHandle:function(o,i,s){return s=s!=null?s.concat([o]):null,ti(4194308,4,yi.bind(null,i,o),s)},useLayoutEffect:function(o,i){return ti(4194308,4,o,i)},useInsertionEffect:function(o,i){return ti(4,2,o,i)},useMemo:function(o,i){var s=ci();return i=i===void 0?null:i,o=o(),s.memoizedState=[o,i],o},useReducer:function(o,i,s){var a=ci();return i=s!==void 0?s(i):i,a.memoizedState=a.baseState=i,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:i},a.queue=o,o=o.dispatch=Gi.bind(null,N$1,o),[a.memoizedState,o]},useRef:function(o){var i=ci();return o={current:o},i.memoizedState=o},useState:qi,useDebugValue:Ai,useDeferredValue:function(o){return ci().memoizedState=o},useTransition:function(){var o=qi(!1),i=o[0];return o=Ei.bind(null,o[1]),ci().memoizedState=o,[i,o]},useMutableSource:function(){},useSyncExternalStore:function(o,i,s){var a=N$1,et=ci();if(I$2){if(s===void 0)throw Error(p$2(407));s=s()}else{if(s=i(),R$2===null)throw Error(p$2(349));Rh&30||ni(a,i,s)}et.memoizedState=s;var tt={value:s,getSnapshot:i};return et.queue=tt,vi(ki.bind(null,a,tt,o),[o]),a.flags|=2048,li(9,mi.bind(null,a,tt,s,i),void 0,null),s},useId:function(){var o=ci(),i=R$2.identifierPrefix;if(I$2){var s=sg,a=rg;s=(a&~(1<<32-oc$1(a)-1)).toString(32)+s,i=":"+i+"R"+s,s=Uh++,0<s&&(i+="H"+s.toString(32)),i+=":"}else s=Vh++,i=":"+i+"r"+s.toString(32)+":";return o.memoizedState=i},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(o){var i=di();return Di(i,O$2.memoizedState,o)},useTransition:function(){var o=fi(ei)[0],i=di().memoizedState;return[o,i]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(o){var i=di();return O$2===null?i.memoizedState=o:Di(i,O$2.memoizedState,o)},useTransition:function(){var o=gi(ei)[0],i=di().memoizedState;return[o,i]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(o,i){try{var s="",a=i;do s+=Pa$1(a),a=a.return;while(a);var et=s}catch(tt){et=`
Error generating stack: `+tt.message+`
`+tt.stack}return{value:o,source:i,stack:et,digest:null}}function Li(o,i,s){return{value:o,source:null,stack:s??null,digest:i??null}}function Mi(o,i){try{console.error(i.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(o,i,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var a=i.value;return s.callback=function(){Pi||(Pi=!0,Qi=a),Mi(o,i)},s}function Ri(o,i,s){s=ch(-1,s),s.tag=3;var a=o.type.getDerivedStateFromError;if(typeof a=="function"){var et=i.value;s.payload=function(){return a(et)},s.callback=function(){Mi(o,i)}}var tt=o.stateNode;return tt!==null&&typeof tt.componentDidCatch=="function"&&(s.callback=function(){Mi(o,i),typeof a!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var ot=i.stack;this.componentDidCatch(i.value,{componentStack:ot!==null?ot:""})}),s}function Ti(o,i,s){var a=o.pingCache;if(a===null){a=o.pingCache=new Ni;var et=new Set;a.set(i,et)}else et=a.get(i),et===void 0&&(et=new Set,a.set(i,et));et.has(s)||(et.add(s),o=Ui.bind(null,o,i,s),i.then(o,o))}function Vi(o){do{var i;if((i=o.tag===13)&&(i=o.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return o;o=o.return}while(o!==null);return null}function Wi(o,i,s,a,et){return o.mode&1?(o.flags|=65536,o.lanes=et,o):(o===i?o.flags|=65536:(o.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(i=ch(-1,1),i.tag=2,dh(s,i,1))),s.lanes|=1),o)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(o,i,s,a){i.child=o===null?Ch(i,null,s,a):Bh(i,o.child,s,a)}function Zi(o,i,s,a,et){s=s.render;var tt=i.ref;return Tg(i,et),a=Xh(o,i,s,a,tt,et),s=bi(),o!==null&&!Ug?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~et,$i(o,i,et)):(I$2&&s&&vg(i),i.flags|=1,Yi(o,i,a,et),i.child)}function aj(o,i,s,a,et){if(o===null){var tt=s.type;return typeof tt=="function"&&!bj(tt)&&tt.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(i.tag=15,i.type=tt,cj(o,i,tt,a,et)):(o=yh(s.type,null,a,i,i.mode,et),o.ref=i.ref,o.return=i,i.child=o)}if(tt=o.child,!(o.lanes&et)){var ot=tt.memoizedProps;if(s=s.compare,s=s!==null?s:Ie$2,s(ot,a)&&o.ref===i.ref)return $i(o,i,et)}return i.flags|=1,o=wh(tt,a),o.ref=i.ref,o.return=i,i.child=o}function cj(o,i,s,a,et){if(o!==null){var tt=o.memoizedProps;if(Ie$2(tt,a)&&o.ref===i.ref)if(Ug=!1,i.pendingProps=a=tt,(o.lanes&et)!==0)o.flags&131072&&(Ug=!0);else return i.lanes=o.lanes,$i(o,i,et)}return dj(o,i,s,a,et)}function ej(o,i,s){var a=i.pendingProps,et=a.children,tt=o!==null?o.memoizedState:null;if(a.mode==="hidden")if(!(i.mode&1))i.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$2(fj,gj),gj|=s;else{if(!(s&1073741824))return o=tt!==null?tt.baseLanes|s:s,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:o,cachePool:null,transitions:null},i.updateQueue=null,G$2(fj,gj),gj|=o,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},a=tt!==null?tt.baseLanes:s,G$2(fj,gj),gj|=a}else tt!==null?(a=tt.baseLanes|s,i.memoizedState=null):a=s,G$2(fj,gj),gj|=a;return Yi(o,i,et,s),i.child}function hj(o,i){var s=i.ref;(o===null&&s!==null||o!==null&&o.ref!==s)&&(i.flags|=512,i.flags|=2097152)}function dj(o,i,s,a,et){var tt=Zf(s)?Xf:H$2.current;return tt=Yf(i,tt),Tg(i,et),s=Xh(o,i,s,a,tt,et),a=bi(),o!==null&&!Ug?(i.updateQueue=o.updateQueue,i.flags&=-2053,o.lanes&=~et,$i(o,i,et)):(I$2&&a&&vg(i),i.flags|=1,Yi(o,i,s,et),i.child)}function ij(o,i,s,a,et){if(Zf(s)){var tt=!0;cg(i)}else tt=!1;if(Tg(i,et),i.stateNode===null)jj(o,i),ph(i,s,a),rh(i,s,a,et),a=!0;else if(o===null){var ot=i.stateNode,dt=i.memoizedProps;ot.props=dt;var ht=ot.context,ft=s.contextType;typeof ft=="object"&&ft!==null?ft=Vg(ft):(ft=Zf(s)?Xf:H$2.current,ft=Yf(i,ft));var pt=s.getDerivedStateFromProps,mt=typeof pt=="function"||typeof ot.getSnapshotBeforeUpdate=="function";mt||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(dt!==a||ht!==ft)&&qh(i,ot,a,ft),$g=!1;var gt=i.memoizedState;ot.state=gt,gh(i,a,ot,et),ht=i.memoizedState,dt!==a||gt!==ht||Wf.current||$g?(typeof pt=="function"&&(kh(i,s,pt,a),ht=i.memoizedState),(dt=$g||oh(i,s,dt,a,gt,ht,ft))?(mt||typeof ot.UNSAFE_componentWillMount!="function"&&typeof ot.componentWillMount!="function"||(typeof ot.componentWillMount=="function"&&ot.componentWillMount(),typeof ot.UNSAFE_componentWillMount=="function"&&ot.UNSAFE_componentWillMount()),typeof ot.componentDidMount=="function"&&(i.flags|=4194308)):(typeof ot.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=a,i.memoizedState=ht),ot.props=a,ot.state=ht,ot.context=ft,a=dt):(typeof ot.componentDidMount=="function"&&(i.flags|=4194308),a=!1)}else{ot=i.stateNode,bh(o,i),dt=i.memoizedProps,ft=i.type===i.elementType?dt:Lg(i.type,dt),ot.props=ft,mt=i.pendingProps,gt=ot.context,ht=s.contextType,typeof ht=="object"&&ht!==null?ht=Vg(ht):(ht=Zf(s)?Xf:H$2.current,ht=Yf(i,ht));var _t=s.getDerivedStateFromProps;(pt=typeof _t=="function"||typeof ot.getSnapshotBeforeUpdate=="function")||typeof ot.UNSAFE_componentWillReceiveProps!="function"&&typeof ot.componentWillReceiveProps!="function"||(dt!==mt||gt!==ht)&&qh(i,ot,a,ht),$g=!1,gt=i.memoizedState,ot.state=gt,gh(i,a,ot,et);var yt=i.memoizedState;dt!==mt||gt!==yt||Wf.current||$g?(typeof _t=="function"&&(kh(i,s,_t,a),yt=i.memoizedState),(ft=$g||oh(i,s,ft,a,gt,yt,ht)||!1)?(pt||typeof ot.UNSAFE_componentWillUpdate!="function"&&typeof ot.componentWillUpdate!="function"||(typeof ot.componentWillUpdate=="function"&&ot.componentWillUpdate(a,yt,ht),typeof ot.UNSAFE_componentWillUpdate=="function"&&ot.UNSAFE_componentWillUpdate(a,yt,ht)),typeof ot.componentDidUpdate=="function"&&(i.flags|=4),typeof ot.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof ot.componentDidUpdate!="function"||dt===o.memoizedProps&&gt===o.memoizedState||(i.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||dt===o.memoizedProps&&gt===o.memoizedState||(i.flags|=1024),i.memoizedProps=a,i.memoizedState=yt),ot.props=a,ot.state=yt,ot.context=ht,a=ft):(typeof ot.componentDidUpdate!="function"||dt===o.memoizedProps&&gt===o.memoizedState||(i.flags|=4),typeof ot.getSnapshotBeforeUpdate!="function"||dt===o.memoizedProps&&gt===o.memoizedState||(i.flags|=1024),a=!1)}return kj(o,i,s,a,tt,et)}function kj(o,i,s,a,et,tt){hj(o,i);var ot=(i.flags&128)!==0;if(!a&&!ot)return et&&dg(i,s,!1),$i(o,i,tt);a=i.stateNode,Xi.current=i;var dt=ot&&typeof s.getDerivedStateFromError!="function"?null:a.render();return i.flags|=1,o!==null&&ot?(i.child=Bh(i,o.child,null,tt),i.child=Bh(i,null,dt,tt)):Yi(o,i,dt,tt),i.memoizedState=a.state,et&&dg(i,s,!0),i.child}function lj(o){var i=o.stateNode;i.pendingContext?ag(o,i.pendingContext,i.pendingContext!==i.context):i.context&&ag(o,i.context,!1),Ih(o,i.containerInfo)}function mj(o,i,s,a,et){return Ig(),Jg(et),i.flags|=256,Yi(o,i,s,a),i.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(o){return{baseLanes:o,cachePool:null,transitions:null}}function pj(o,i,s){var a=i.pendingProps,et=M$2.current,tt=!1,ot=(i.flags&128)!==0,dt;if((dt=ot)||(dt=o!==null&&o.memoizedState===null?!1:(et&2)!==0),dt?(tt=!0,i.flags&=-129):(o===null||o.memoizedState!==null)&&(et|=1),G$2(M$2,et&1),o===null)return Eg(i),o=i.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(i.mode&1?o.data==="$!"?i.lanes=8:i.lanes=1073741824:i.lanes=1,null):(ot=a.children,o=a.fallback,tt?(a=i.mode,tt=i.child,ot={mode:"hidden",children:ot},!(a&1)&&tt!==null?(tt.childLanes=0,tt.pendingProps=ot):tt=qj(ot,a,0,null),o=Ah(o,a,s,null),tt.return=i,o.return=i,tt.sibling=o,i.child=tt,i.child.memoizedState=oj(s),i.memoizedState=nj,o):rj(i,ot));if(et=o.memoizedState,et!==null&&(dt=et.dehydrated,dt!==null))return sj(o,i,ot,a,dt,et,s);if(tt){tt=a.fallback,ot=i.mode,et=o.child,dt=et.sibling;var ht={mode:"hidden",children:a.children};return!(ot&1)&&i.child!==et?(a=i.child,a.childLanes=0,a.pendingProps=ht,i.deletions=null):(a=wh(et,ht),a.subtreeFlags=et.subtreeFlags&14680064),dt!==null?tt=wh(dt,tt):(tt=Ah(tt,ot,s,null),tt.flags|=2),tt.return=i,a.return=i,a.sibling=tt,i.child=a,a=tt,tt=i.child,ot=o.child.memoizedState,ot=ot===null?oj(s):{baseLanes:ot.baseLanes|s,cachePool:null,transitions:ot.transitions},tt.memoizedState=ot,tt.childLanes=o.childLanes&~s,i.memoizedState=nj,a}return tt=o.child,o=tt.sibling,a=wh(tt,{mode:"visible",children:a.children}),!(i.mode&1)&&(a.lanes=s),a.return=i,a.sibling=null,o!==null&&(s=i.deletions,s===null?(i.deletions=[o],i.flags|=16):s.push(o)),i.child=a,i.memoizedState=null,a}function rj(o,i){return i=qj({mode:"visible",children:i},o.mode,0,null),i.return=o,o.child=i}function tj(o,i,s,a){return a!==null&&Jg(a),Bh(i,o.child,null,s),o=rj(i,i.pendingProps.children),o.flags|=2,i.memoizedState=null,o}function sj(o,i,s,a,et,tt,ot){if(s)return i.flags&256?(i.flags&=-257,a=Li(Error(p$2(422))),tj(o,i,ot,a)):i.memoizedState!==null?(i.child=o.child,i.flags|=128,null):(tt=a.fallback,et=i.mode,a=qj({mode:"visible",children:a.children},et,0,null),tt=Ah(tt,et,ot,null),tt.flags|=2,a.return=i,tt.return=i,a.sibling=tt,i.child=a,i.mode&1&&Bh(i,o.child,null,ot),i.child.memoizedState=oj(ot),i.memoizedState=nj,tt);if(!(i.mode&1))return tj(o,i,ot,null);if(et.data==="$!"){if(a=et.nextSibling&&et.nextSibling.dataset,a)var dt=a.dgst;return a=dt,tt=Error(p$2(419)),a=Li(tt,a,void 0),tj(o,i,ot,a)}if(dt=(ot&o.childLanes)!==0,Ug||dt){if(a=R$2,a!==null){switch(ot&-ot){case 4:et=2;break;case 16:et=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:et=32;break;case 536870912:et=268435456;break;default:et=0}et=et&(a.suspendedLanes|ot)?0:et,et!==0&&et!==tt.retryLane&&(tt.retryLane=et,Zg(o,et),mh(a,o,et,-1))}return uj(),a=Li(Error(p$2(421))),tj(o,i,ot,a)}return et.data==="$?"?(i.flags|=128,i.child=o.child,i=vj.bind(null,o),et._reactRetry=i,null):(o=tt.treeContext,yg=Lf(et.nextSibling),xg=i,I$2=!0,zg=null,o!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=o.id,sg=o.overflow,qg=i),i=rj(i,a.children),i.flags|=4096,i)}function wj(o,i,s){o.lanes|=i;var a=o.alternate;a!==null&&(a.lanes|=i),Sg(o.return,i,s)}function xj(o,i,s,a,et){var tt=o.memoizedState;tt===null?o.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:a,tail:s,tailMode:et}:(tt.isBackwards=i,tt.rendering=null,tt.renderingStartTime=0,tt.last=a,tt.tail=s,tt.tailMode=et)}function yj(o,i,s){var a=i.pendingProps,et=a.revealOrder,tt=a.tail;if(Yi(o,i,a.children,s),a=M$2.current,a&2)a=a&1|2,i.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=i.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&wj(o,s,i);else if(o.tag===19)wj(o,s,i);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break e;for(;o.sibling===null;){if(o.return===null||o.return===i)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}a&=1}if(G$2(M$2,a),!(i.mode&1))i.memoizedState=null;else switch(et){case"forwards":for(s=i.child,et=null;s!==null;)o=s.alternate,o!==null&&Mh(o)===null&&(et=s),s=s.sibling;s=et,s===null?(et=i.child,i.child=null):(et=s.sibling,s.sibling=null),xj(i,!1,et,s,tt);break;case"backwards":for(s=null,et=i.child,i.child=null;et!==null;){if(o=et.alternate,o!==null&&Mh(o)===null){i.child=et;break}o=et.sibling,et.sibling=s,s=et,et=o}xj(i,!0,s,null,tt);break;case"together":xj(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function jj(o,i){!(i.mode&1)&&o!==null&&(o.alternate=null,i.alternate=null,i.flags|=2)}function $i(o,i,s){if(o!==null&&(i.dependencies=o.dependencies),hh|=i.lanes,!(s&i.childLanes))return null;if(o!==null&&i.child!==o.child)throw Error(p$2(153));if(i.child!==null){for(o=i.child,s=wh(o,o.pendingProps),i.child=s,s.return=i;o.sibling!==null;)o=o.sibling,s=s.sibling=wh(o,o.pendingProps),s.return=i;s.sibling=null}return i.child}function zj(o,i,s){switch(i.tag){case 3:lj(i),Ig();break;case 5:Kh(i);break;case 1:Zf(i.type)&&cg(i);break;case 4:Ih(i,i.stateNode.containerInfo);break;case 10:var a=i.type._context,et=i.memoizedProps.value;G$2(Mg,a._currentValue),a._currentValue=et;break;case 13:if(a=i.memoizedState,a!==null)return a.dehydrated!==null?(G$2(M$2,M$2.current&1),i.flags|=128,null):s&i.child.childLanes?pj(o,i,s):(G$2(M$2,M$2.current&1),o=$i(o,i,s),o!==null?o.sibling:null);G$2(M$2,M$2.current&1);break;case 19:if(a=(s&i.childLanes)!==0,o.flags&128){if(a)return yj(o,i,s);i.flags|=128}if(et=i.memoizedState,et!==null&&(et.rendering=null,et.tail=null,et.lastEffect=null),G$2(M$2,M$2.current),a)break;return null;case 22:case 23:return i.lanes=0,ej(o,i,s)}return $i(o,i,s)}var Aj,Bj,Cj,Dj;Aj=function(o,i){for(var s=i.child;s!==null;){if(s.tag===5||s.tag===6)o.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break;for(;s.sibling===null;){if(s.return===null||s.return===i)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(o,i,s,a){var et=o.memoizedProps;if(et!==a){o=i.stateNode,Hh(Eh.current);var tt=null;switch(s){case"input":et=Ya$1(o,et),a=Ya$1(o,a),tt=[];break;case"select":et=A$2({},et,{value:void 0}),a=A$2({},a,{value:void 0}),tt=[];break;case"textarea":et=gb$1(o,et),a=gb$1(o,a),tt=[];break;default:typeof et.onClick!="function"&&typeof a.onClick=="function"&&(o.onclick=Bf)}ub$1(s,a);var ot;s=null;for(ft in et)if(!a.hasOwnProperty(ft)&&et.hasOwnProperty(ft)&&et[ft]!=null)if(ft==="style"){var dt=et[ft];for(ot in dt)dt.hasOwnProperty(ot)&&(s||(s={}),s[ot]="")}else ft!=="dangerouslySetInnerHTML"&&ft!=="children"&&ft!=="suppressContentEditableWarning"&&ft!=="suppressHydrationWarning"&&ft!=="autoFocus"&&(ea$1.hasOwnProperty(ft)?tt||(tt=[]):(tt=tt||[]).push(ft,null));for(ft in a){var ht=a[ft];if(dt=et!=null?et[ft]:void 0,a.hasOwnProperty(ft)&&ht!==dt&&(ht!=null||dt!=null))if(ft==="style")if(dt){for(ot in dt)!dt.hasOwnProperty(ot)||ht&&ht.hasOwnProperty(ot)||(s||(s={}),s[ot]="");for(ot in ht)ht.hasOwnProperty(ot)&&dt[ot]!==ht[ot]&&(s||(s={}),s[ot]=ht[ot])}else s||(tt||(tt=[]),tt.push(ft,s)),s=ht;else ft==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,dt=dt?dt.__html:void 0,ht!=null&&dt!==ht&&(tt=tt||[]).push(ft,ht)):ft==="children"?typeof ht!="string"&&typeof ht!="number"||(tt=tt||[]).push(ft,""+ht):ft!=="suppressContentEditableWarning"&&ft!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(ft)?(ht!=null&&ft==="onScroll"&&D$3("scroll",o),tt||dt===ht||(tt=[])):(tt=tt||[]).push(ft,ht))}s&&(tt=tt||[]).push("style",s);var ft=tt;(i.updateQueue=ft)&&(i.flags|=4)}};Dj=function(o,i,s,a){s!==a&&(i.flags|=4)};function Ej(o,i){if(!I$2)switch(o.tailMode){case"hidden":i=o.tail;for(var s=null;i!==null;)i.alternate!==null&&(s=i),i=i.sibling;s===null?o.tail=null:s.sibling=null;break;case"collapsed":s=o.tail;for(var a=null;s!==null;)s.alternate!==null&&(a=s),s=s.sibling;a===null?i||o.tail===null?o.tail=null:o.tail.sibling=null:a.sibling=null}}function S$3(o){var i=o.alternate!==null&&o.alternate.child===o.child,s=0,a=0;if(i)for(var et=o.child;et!==null;)s|=et.lanes|et.childLanes,a|=et.subtreeFlags&14680064,a|=et.flags&14680064,et.return=o,et=et.sibling;else for(et=o.child;et!==null;)s|=et.lanes|et.childLanes,a|=et.subtreeFlags,a|=et.flags,et.return=o,et=et.sibling;return o.subtreeFlags|=a,o.childLanes=s,i}function Fj(o,i,s){var a=i.pendingProps;switch(wg(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$3(i),null;case 1:return Zf(i.type)&&$f(),S$3(i),null;case 3:return a=i.stateNode,Jh(),E$1(Wf),E$1(H$2),Oh(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(o===null||o.child===null)&&(Gg(i)?i.flags|=4:o===null||o.memoizedState.isDehydrated&&!(i.flags&256)||(i.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(o,i),S$3(i),null;case 5:Lh(i);var et=Hh(Gh.current);if(s=i.type,o!==null&&i.stateNode!=null)Cj(o,i,s,a,et),o.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!a){if(i.stateNode===null)throw Error(p$2(166));return S$3(i),null}if(o=Hh(Eh.current),Gg(i)){a=i.stateNode,s=i.type;var tt=i.memoizedProps;switch(a[Of]=i,a[Pf]=tt,o=(i.mode&1)!==0,s){case"dialog":D$3("cancel",a),D$3("close",a);break;case"iframe":case"object":case"embed":D$3("load",a);break;case"video":case"audio":for(et=0;et<lf.length;et++)D$3(lf[et],a);break;case"source":D$3("error",a);break;case"img":case"image":case"link":D$3("error",a),D$3("load",a);break;case"details":D$3("toggle",a);break;case"input":Za$1(a,tt),D$3("invalid",a);break;case"select":a._wrapperState={wasMultiple:!!tt.multiple},D$3("invalid",a);break;case"textarea":hb$1(a,tt),D$3("invalid",a)}ub$1(s,tt),et=null;for(var ot in tt)if(tt.hasOwnProperty(ot)){var dt=tt[ot];ot==="children"?typeof dt=="string"?a.textContent!==dt&&(tt.suppressHydrationWarning!==!0&&Af(a.textContent,dt,o),et=["children",dt]):typeof dt=="number"&&a.textContent!==""+dt&&(tt.suppressHydrationWarning!==!0&&Af(a.textContent,dt,o),et=["children",""+dt]):ea$1.hasOwnProperty(ot)&&dt!=null&&ot==="onScroll"&&D$3("scroll",a)}switch(s){case"input":Va$1(a),db$2(a,tt,!0);break;case"textarea":Va$1(a),jb$1(a);break;case"select":case"option":break;default:typeof tt.onClick=="function"&&(a.onclick=Bf)}a=et,i.updateQueue=a,a!==null&&(i.flags|=4)}else{ot=et.nodeType===9?et:et.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=kb$1(s)),o==="http://www.w3.org/1999/xhtml"?s==="script"?(o=ot.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof a.is=="string"?o=ot.createElement(s,{is:a.is}):(o=ot.createElement(s),s==="select"&&(ot=o,a.multiple?ot.multiple=!0:a.size&&(ot.size=a.size))):o=ot.createElementNS(o,s),o[Of]=i,o[Pf]=a,Aj(o,i,!1,!1),i.stateNode=o;e:{switch(ot=vb$1(s,a),s){case"dialog":D$3("cancel",o),D$3("close",o),et=a;break;case"iframe":case"object":case"embed":D$3("load",o),et=a;break;case"video":case"audio":for(et=0;et<lf.length;et++)D$3(lf[et],o);et=a;break;case"source":D$3("error",o),et=a;break;case"img":case"image":case"link":D$3("error",o),D$3("load",o),et=a;break;case"details":D$3("toggle",o),et=a;break;case"input":Za$1(o,a),et=Ya$1(o,a),D$3("invalid",o);break;case"option":et=a;break;case"select":o._wrapperState={wasMultiple:!!a.multiple},et=A$2({},a,{value:void 0}),D$3("invalid",o);break;case"textarea":hb$1(o,a),et=gb$1(o,a),D$3("invalid",o);break;default:et=a}ub$1(s,et),dt=et;for(tt in dt)if(dt.hasOwnProperty(tt)){var ht=dt[tt];tt==="style"?sb$1(o,ht):tt==="dangerouslySetInnerHTML"?(ht=ht?ht.__html:void 0,ht!=null&&nb$1(o,ht)):tt==="children"?typeof ht=="string"?(s!=="textarea"||ht!=="")&&ob$1(o,ht):typeof ht=="number"&&ob$1(o,""+ht):tt!=="suppressContentEditableWarning"&&tt!=="suppressHydrationWarning"&&tt!=="autoFocus"&&(ea$1.hasOwnProperty(tt)?ht!=null&&tt==="onScroll"&&D$3("scroll",o):ht!=null&&ta$1(o,tt,ht,ot))}switch(s){case"input":Va$1(o),db$2(o,a,!1);break;case"textarea":Va$1(o),jb$1(o);break;case"option":a.value!=null&&o.setAttribute("value",""+Sa$1(a.value));break;case"select":o.multiple=!!a.multiple,tt=a.value,tt!=null?fb$1(o,!!a.multiple,tt,!1):a.defaultValue!=null&&fb$1(o,!!a.multiple,a.defaultValue,!0);break;default:typeof et.onClick=="function"&&(o.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":a=!!a.autoFocus;break e;case"img":a=!0;break e;default:a=!1}}a&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return S$3(i),null;case 6:if(o&&i.stateNode!=null)Dj(o,i,o.memoizedProps,a);else{if(typeof a!="string"&&i.stateNode===null)throw Error(p$2(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(i)){if(a=i.stateNode,s=i.memoizedProps,a[Of]=i,(tt=a.nodeValue!==s)&&(o=xg,o!==null))switch(o.tag){case 3:Af(a.nodeValue,s,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&Af(a.nodeValue,s,(o.mode&1)!==0)}tt&&(i.flags|=4)}else a=(s.nodeType===9?s:s.ownerDocument).createTextNode(a),a[Of]=i,i.stateNode=a}return S$3(i),null;case 13:if(E$1(M$2),a=i.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(I$2&&yg!==null&&i.mode&1&&!(i.flags&128))Hg(),Ig(),i.flags|=98560,tt=!1;else if(tt=Gg(i),a!==null&&a.dehydrated!==null){if(o===null){if(!tt)throw Error(p$2(318));if(tt=i.memoizedState,tt=tt!==null?tt.dehydrated:null,!tt)throw Error(p$2(317));tt[Of]=i}else Ig(),!(i.flags&128)&&(i.memoizedState=null),i.flags|=4;S$3(i),tt=!1}else zg!==null&&(Gj(zg),zg=null),tt=!0;if(!tt)return i.flags&65536?i:null}return i.flags&128?(i.lanes=s,i):(a=a!==null,a!==(o!==null&&o.memoizedState!==null)&&a&&(i.child.flags|=8192,i.mode&1&&(o===null||M$2.current&1?T$2===0&&(T$2=3):uj())),i.updateQueue!==null&&(i.flags|=4),S$3(i),null);case 4:return Jh(),Bj(o,i),o===null&&sf(i.stateNode.containerInfo),S$3(i),null;case 10:return Rg(i.type._context),S$3(i),null;case 17:return Zf(i.type)&&$f(),S$3(i),null;case 19:if(E$1(M$2),tt=i.memoizedState,tt===null)return S$3(i),null;if(a=(i.flags&128)!==0,ot=tt.rendering,ot===null)if(a)Ej(tt,!1);else{if(T$2!==0||o!==null&&o.flags&128)for(o=i.child;o!==null;){if(ot=Mh(o),ot!==null){for(i.flags|=128,Ej(tt,!1),a=ot.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),i.subtreeFlags=0,a=s,s=i.child;s!==null;)tt=s,o=a,tt.flags&=14680066,ot=tt.alternate,ot===null?(tt.childLanes=0,tt.lanes=o,tt.child=null,tt.subtreeFlags=0,tt.memoizedProps=null,tt.memoizedState=null,tt.updateQueue=null,tt.dependencies=null,tt.stateNode=null):(tt.childLanes=ot.childLanes,tt.lanes=ot.lanes,tt.child=ot.child,tt.subtreeFlags=0,tt.deletions=null,tt.memoizedProps=ot.memoizedProps,tt.memoizedState=ot.memoizedState,tt.updateQueue=ot.updateQueue,tt.type=ot.type,o=ot.dependencies,tt.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),s=s.sibling;return G$2(M$2,M$2.current&1|2),i.child}o=o.sibling}tt.tail!==null&&B$2()>Hj&&(i.flags|=128,a=!0,Ej(tt,!1),i.lanes=4194304)}else{if(!a)if(o=Mh(ot),o!==null){if(i.flags|=128,a=!0,s=o.updateQueue,s!==null&&(i.updateQueue=s,i.flags|=4),Ej(tt,!0),tt.tail===null&&tt.tailMode==="hidden"&&!ot.alternate&&!I$2)return S$3(i),null}else 2*B$2()-tt.renderingStartTime>Hj&&s!==1073741824&&(i.flags|=128,a=!0,Ej(tt,!1),i.lanes=4194304);tt.isBackwards?(ot.sibling=i.child,i.child=ot):(s=tt.last,s!==null?s.sibling=ot:i.child=ot,tt.last=ot)}return tt.tail!==null?(i=tt.tail,tt.rendering=i,tt.tail=i.sibling,tt.renderingStartTime=B$2(),i.sibling=null,s=M$2.current,G$2(M$2,a?s&1|2:s&1),i):(S$3(i),null);case 22:case 23:return Ij(),a=i.memoizedState!==null,o!==null&&o.memoizedState!==null!==a&&(i.flags|=8192),a&&i.mode&1?gj&1073741824&&(S$3(i),i.subtreeFlags&6&&(i.flags|=8192)):S$3(i),null;case 24:return null;case 25:return null}throw Error(p$2(156,i.tag))}function Jj(o,i){switch(wg(i),i.tag){case 1:return Zf(i.type)&&$f(),o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 3:return Jh(),E$1(Wf),E$1(H$2),Oh(),o=i.flags,o&65536&&!(o&128)?(i.flags=o&-65537|128,i):null;case 5:return Lh(i),null;case 13:if(E$1(M$2),o=i.memoizedState,o!==null&&o.dehydrated!==null){if(i.alternate===null)throw Error(p$2(340));Ig()}return o=i.flags,o&65536?(i.flags=o&-65537|128,i):null;case 19:return E$1(M$2),null;case 4:return Jh(),null;case 10:return Rg(i.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$2=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$2=null;function Mj(o,i){var s=o.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(a){W$2(o,i,a)}else s.current=null}function Nj(o,i,s){try{s()}catch(a){W$2(o,i,a)}}var Oj=!1;function Pj(o,i){if(Cf=dd$1,o=Me$1(),Ne$1(o)){if("selectionStart"in o)var s={start:o.selectionStart,end:o.selectionEnd};else e:{s=(s=o.ownerDocument)&&s.defaultView||window;var a=s.getSelection&&s.getSelection();if(a&&a.rangeCount!==0){s=a.anchorNode;var et=a.anchorOffset,tt=a.focusNode;a=a.focusOffset;try{s.nodeType,tt.nodeType}catch{s=null;break e}var ot=0,dt=-1,ht=-1,ft=0,pt=0,mt=o,gt=null;t:for(;;){for(var _t;mt!==s||et!==0&&mt.nodeType!==3||(dt=ot+et),mt!==tt||a!==0&&mt.nodeType!==3||(ht=ot+a),mt.nodeType===3&&(ot+=mt.nodeValue.length),(_t=mt.firstChild)!==null;)gt=mt,mt=_t;for(;;){if(mt===o)break t;if(gt===s&&++ft===et&&(dt=ot),gt===tt&&++pt===a&&(ht=ot),(_t=mt.nextSibling)!==null)break;mt=gt,gt=mt.parentNode}mt=_t}s=dt===-1||ht===-1?null:{start:dt,end:ht}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:o,selectionRange:s},dd$1=!1,V$2=i;V$2!==null;)if(i=V$2,o=i.child,(i.subtreeFlags&1028)!==0&&o!==null)o.return=i,V$2=o;else for(;V$2!==null;){i=V$2;try{var yt=i.alternate;if(i.flags&1024)switch(i.tag){case 0:case 11:case 15:break;case 1:if(yt!==null){var St=yt.memoizedProps,Et=yt.memoizedState,vt=i.stateNode,bt=vt.getSnapshotBeforeUpdate(i.elementType===i.type?St:Lg(i.type,St),Et);vt.__reactInternalSnapshotBeforeUpdate=bt}break;case 3:var Tt=i.stateNode.containerInfo;Tt.nodeType===1?Tt.textContent="":Tt.nodeType===9&&Tt.documentElement&&Tt.removeChild(Tt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$2(163))}}catch(wt){W$2(i,i.return,wt)}if(o=i.sibling,o!==null){o.return=i.return,V$2=o;break}V$2=i.return}return yt=Oj,Oj=!1,yt}function Qj(o,i,s){var a=i.updateQueue;if(a=a!==null?a.lastEffect:null,a!==null){var et=a=a.next;do{if((et.tag&o)===o){var tt=et.destroy;et.destroy=void 0,tt!==void 0&&Nj(i,s,tt)}et=et.next}while(et!==a)}}function Rj(o,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var s=i=i.next;do{if((s.tag&o)===o){var a=s.create;s.destroy=a()}s=s.next}while(s!==i)}}function Sj(o){var i=o.ref;if(i!==null){var s=o.stateNode;switch(o.tag){case 5:o=s;break;default:o=s}typeof i=="function"?i(o):i.current=o}}function Tj(o){var i=o.alternate;i!==null&&(o.alternate=null,Tj(i)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(i=o.stateNode,i!==null&&(delete i[Of],delete i[Pf],delete i[of],delete i[Qf],delete i[Rf])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Uj(o){return o.tag===5||o.tag===3||o.tag===4}function Vj(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Uj(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Wj(o,i,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,i?s.nodeType===8?s.parentNode.insertBefore(o,i):s.insertBefore(o,i):(s.nodeType===8?(i=s.parentNode,i.insertBefore(o,s)):(i=s,i.appendChild(o)),s=s._reactRootContainer,s!=null||i.onclick!==null||(i.onclick=Bf));else if(a!==4&&(o=o.child,o!==null))for(Wj(o,i,s),o=o.sibling;o!==null;)Wj(o,i,s),o=o.sibling}function Xj(o,i,s){var a=o.tag;if(a===5||a===6)o=o.stateNode,i?s.insertBefore(o,i):s.appendChild(o);else if(a!==4&&(o=o.child,o!==null))for(Xj(o,i,s),o=o.sibling;o!==null;)Xj(o,i,s),o=o.sibling}var X$2=null,Yj=!1;function Zj(o,i,s){for(s=s.child;s!==null;)ak(o,i,s),s=s.sibling}function ak(o,i,s){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,s)}catch{}switch(s.tag){case 5:U$2||Mj(s,i);case 6:var a=X$2,et=Yj;X$2=null,Zj(o,i,s),X$2=a,Yj=et,X$2!==null&&(Yj?(o=X$2,s=s.stateNode,o.nodeType===8?o.parentNode.removeChild(s):o.removeChild(s)):X$2.removeChild(s.stateNode));break;case 18:X$2!==null&&(Yj?(o=X$2,s=s.stateNode,o.nodeType===8?Kf(o.parentNode,s):o.nodeType===1&&Kf(o,s),bd$1(o)):Kf(X$2,s.stateNode));break;case 4:a=X$2,et=Yj,X$2=s.stateNode.containerInfo,Yj=!0,Zj(o,i,s),X$2=a,Yj=et;break;case 0:case 11:case 14:case 15:if(!U$2&&(a=s.updateQueue,a!==null&&(a=a.lastEffect,a!==null))){et=a=a.next;do{var tt=et,ot=tt.destroy;tt=tt.tag,ot!==void 0&&(tt&2||tt&4)&&Nj(s,i,ot),et=et.next}while(et!==a)}Zj(o,i,s);break;case 1:if(!U$2&&(Mj(s,i),a=s.stateNode,typeof a.componentWillUnmount=="function"))try{a.props=s.memoizedProps,a.state=s.memoizedState,a.componentWillUnmount()}catch(dt){W$2(s,i,dt)}Zj(o,i,s);break;case 21:Zj(o,i,s);break;case 22:s.mode&1?(U$2=(a=U$2)||s.memoizedState!==null,Zj(o,i,s),U$2=a):Zj(o,i,s);break;default:Zj(o,i,s)}}function bk(o){var i=o.updateQueue;if(i!==null){o.updateQueue=null;var s=o.stateNode;s===null&&(s=o.stateNode=new Lj),i.forEach(function(a){var et=ck.bind(null,o,a);s.has(a)||(s.add(a),a.then(et,et))})}}function dk(o,i){var s=i.deletions;if(s!==null)for(var a=0;a<s.length;a++){var et=s[a];try{var tt=o,ot=i,dt=ot;e:for(;dt!==null;){switch(dt.tag){case 5:X$2=dt.stateNode,Yj=!1;break e;case 3:X$2=dt.stateNode.containerInfo,Yj=!0;break e;case 4:X$2=dt.stateNode.containerInfo,Yj=!0;break e}dt=dt.return}if(X$2===null)throw Error(p$2(160));ak(tt,ot,et),X$2=null,Yj=!1;var ht=et.alternate;ht!==null&&(ht.return=null),et.return=null}catch(ft){W$2(et,i,ft)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ek(i,o),i=i.sibling}function ek(o,i){var s=o.alternate,a=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(dk(i,o),fk(o),a&4){try{Qj(3,o,o.return),Rj(3,o)}catch(St){W$2(o,o.return,St)}try{Qj(5,o,o.return)}catch(St){W$2(o,o.return,St)}}break;case 1:dk(i,o),fk(o),a&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(i,o),fk(o),a&512&&s!==null&&Mj(s,s.return),o.flags&32){var et=o.stateNode;try{ob$1(et,"")}catch(St){W$2(o,o.return,St)}}if(a&4&&(et=o.stateNode,et!=null)){var tt=o.memoizedProps,ot=s!==null?s.memoizedProps:tt,dt=o.type,ht=o.updateQueue;if(o.updateQueue=null,ht!==null)try{dt==="input"&&tt.type==="radio"&&tt.name!=null&&ab$1(et,tt),vb$1(dt,ot);var ft=vb$1(dt,tt);for(ot=0;ot<ht.length;ot+=2){var pt=ht[ot],mt=ht[ot+1];pt==="style"?sb$1(et,mt):pt==="dangerouslySetInnerHTML"?nb$1(et,mt):pt==="children"?ob$1(et,mt):ta$1(et,pt,mt,ft)}switch(dt){case"input":bb$1(et,tt);break;case"textarea":ib$1(et,tt);break;case"select":var gt=et._wrapperState.wasMultiple;et._wrapperState.wasMultiple=!!tt.multiple;var _t=tt.value;_t!=null?fb$1(et,!!tt.multiple,_t,!1):gt!==!!tt.multiple&&(tt.defaultValue!=null?fb$1(et,!!tt.multiple,tt.defaultValue,!0):fb$1(et,!!tt.multiple,tt.multiple?[]:"",!1))}et[Pf]=tt}catch(St){W$2(o,o.return,St)}}break;case 6:if(dk(i,o),fk(o),a&4){if(o.stateNode===null)throw Error(p$2(162));et=o.stateNode,tt=o.memoizedProps;try{et.nodeValue=tt}catch(St){W$2(o,o.return,St)}}break;case 3:if(dk(i,o),fk(o),a&4&&s!==null&&s.memoizedState.isDehydrated)try{bd$1(i.containerInfo)}catch(St){W$2(o,o.return,St)}break;case 4:dk(i,o),fk(o);break;case 13:dk(i,o),fk(o),et=o.child,et.flags&8192&&(tt=et.memoizedState!==null,et.stateNode.isHidden=tt,!tt||et.alternate!==null&&et.alternate.memoizedState!==null||(gk=B$2())),a&4&&bk(o);break;case 22:if(pt=s!==null&&s.memoizedState!==null,o.mode&1?(U$2=(ft=U$2)||pt,dk(i,o),U$2=ft):dk(i,o),fk(o),a&8192){if(ft=o.memoizedState!==null,(o.stateNode.isHidden=ft)&&!pt&&o.mode&1)for(V$2=o,pt=o.child;pt!==null;){for(mt=V$2=pt;V$2!==null;){switch(gt=V$2,_t=gt.child,gt.tag){case 0:case 11:case 14:case 15:Qj(4,gt,gt.return);break;case 1:Mj(gt,gt.return);var yt=gt.stateNode;if(typeof yt.componentWillUnmount=="function"){a=gt,s=gt.return;try{i=a,yt.props=i.memoizedProps,yt.state=i.memoizedState,yt.componentWillUnmount()}catch(St){W$2(a,s,St)}}break;case 5:Mj(gt,gt.return);break;case 22:if(gt.memoizedState!==null){hk(mt);continue}}_t!==null?(_t.return=gt,V$2=_t):hk(mt)}pt=pt.sibling}e:for(pt=null,mt=o;;){if(mt.tag===5){if(pt===null){pt=mt;try{et=mt.stateNode,ft?(tt=et.style,typeof tt.setProperty=="function"?tt.setProperty("display","none","important"):tt.display="none"):(dt=mt.stateNode,ht=mt.memoizedProps.style,ot=ht!=null&&ht.hasOwnProperty("display")?ht.display:null,dt.style.display=rb$1("display",ot))}catch(St){W$2(o,o.return,St)}}}else if(mt.tag===6){if(pt===null)try{mt.stateNode.nodeValue=ft?"":mt.memoizedProps}catch(St){W$2(o,o.return,St)}}else if((mt.tag!==22&&mt.tag!==23||mt.memoizedState===null||mt===o)&&mt.child!==null){mt.child.return=mt,mt=mt.child;continue}if(mt===o)break e;for(;mt.sibling===null;){if(mt.return===null||mt.return===o)break e;pt===mt&&(pt=null),mt=mt.return}pt===mt&&(pt=null),mt.sibling.return=mt.return,mt=mt.sibling}}break;case 19:dk(i,o),fk(o),a&4&&bk(o);break;case 21:break;default:dk(i,o),fk(o)}}function fk(o){var i=o.flags;if(i&2){try{e:{for(var s=o.return;s!==null;){if(Uj(s)){var a=s;break e}s=s.return}throw Error(p$2(160))}switch(a.tag){case 5:var et=a.stateNode;a.flags&32&&(ob$1(et,""),a.flags&=-33);var tt=Vj(o);Xj(o,tt,et);break;case 3:case 4:var ot=a.stateNode.containerInfo,dt=Vj(o);Wj(o,dt,ot);break;default:throw Error(p$2(161))}}catch(ht){W$2(o,o.return,ht)}o.flags&=-3}i&4096&&(o.flags&=-4097)}function ik(o,i,s){V$2=o,jk(o)}function jk(o,i,s){for(var a=(o.mode&1)!==0;V$2!==null;){var et=V$2,tt=et.child;if(et.tag===22&&a){var ot=et.memoizedState!==null||Kj;if(!ot){var dt=et.alternate,ht=dt!==null&&dt.memoizedState!==null||U$2;dt=Kj;var ft=U$2;if(Kj=ot,(U$2=ht)&&!ft)for(V$2=et;V$2!==null;)ot=V$2,ht=ot.child,ot.tag===22&&ot.memoizedState!==null?kk(et):ht!==null?(ht.return=ot,V$2=ht):kk(et);for(;tt!==null;)V$2=tt,jk(tt),tt=tt.sibling;V$2=et,Kj=dt,U$2=ft}lk(o)}else et.subtreeFlags&8772&&tt!==null?(tt.return=et,V$2=tt):lk(o)}}function lk(o){for(;V$2!==null;){var i=V$2;if(i.flags&8772){var s=i.alternate;try{if(i.flags&8772)switch(i.tag){case 0:case 11:case 15:U$2||Rj(5,i);break;case 1:var a=i.stateNode;if(i.flags&4&&!U$2)if(s===null)a.componentDidMount();else{var et=i.elementType===i.type?s.memoizedProps:Lg(i.type,s.memoizedProps);a.componentDidUpdate(et,s.memoizedState,a.__reactInternalSnapshotBeforeUpdate)}var tt=i.updateQueue;tt!==null&&ih(i,tt,a);break;case 3:var ot=i.updateQueue;if(ot!==null){if(s=null,i.child!==null)switch(i.child.tag){case 5:s=i.child.stateNode;break;case 1:s=i.child.stateNode}ih(i,ot,s)}break;case 5:var dt=i.stateNode;if(s===null&&i.flags&4){s=dt;var ht=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":ht.autoFocus&&s.focus();break;case"img":ht.src&&(s.src=ht.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var ft=i.alternate;if(ft!==null){var pt=ft.memoizedState;if(pt!==null){var mt=pt.dehydrated;mt!==null&&bd$1(mt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$2(163))}U$2||i.flags&512&&Sj(i)}catch(gt){W$2(i,i.return,gt)}}if(i===o){V$2=null;break}if(s=i.sibling,s!==null){s.return=i.return,V$2=s;break}V$2=i.return}}function hk(o){for(;V$2!==null;){var i=V$2;if(i===o){V$2=null;break}var s=i.sibling;if(s!==null){s.return=i.return,V$2=s;break}V$2=i.return}}function kk(o){for(;V$2!==null;){var i=V$2;try{switch(i.tag){case 0:case 11:case 15:var s=i.return;try{Rj(4,i)}catch(ht){W$2(i,s,ht)}break;case 1:var a=i.stateNode;if(typeof a.componentDidMount=="function"){var et=i.return;try{a.componentDidMount()}catch(ht){W$2(i,et,ht)}}var tt=i.return;try{Sj(i)}catch(ht){W$2(i,tt,ht)}break;case 5:var ot=i.return;try{Sj(i)}catch(ht){W$2(i,ot,ht)}}}catch(ht){W$2(i,i.return,ht)}if(i===o){V$2=null;break}var dt=i.sibling;if(dt!==null){dt.return=i.return,V$2=dt;break}V$2=i.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$2=0,R$2=null,Y$2=null,Z$2=0,gj=0,fj=Uf(0),T$2=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L$1(){return K$2&6?B$2():Bk!==-1?Bk:Bk=B$2()}function lh(o){return o.mode&1?K$2&2&&Z$2!==0?Z$2&-Z$2:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(o=C$3,o!==0||(o=window.event,o=o===void 0?16:jd$1(o.type)),o):1}function mh(o,i,s,a){if(50<zk)throw zk=0,Ak=null,Error(p$2(185));Ac$1(o,s,a),(!(K$2&2)||o!==R$2)&&(o===R$2&&(!(K$2&2)&&(rk|=s),T$2===4&&Dk(o,Z$2)),Ek(o,a),s===1&&K$2===0&&!(i.mode&1)&&(Hj=B$2()+500,fg&&jg()))}function Ek(o,i){var s=o.callbackNode;wc$1(o,i);var a=uc$1(o,o===R$2?Z$2:0);if(a===0)s!==null&&bc$1(s),o.callbackNode=null,o.callbackPriority=0;else if(i=a&-a,o.callbackPriority!==i){if(s!=null&&bc$1(s),i===1)o.tag===0?ig(Fk.bind(null,o)):hg(Fk.bind(null,o)),Jf(function(){!(K$2&6)&&jg()}),s=null;else{switch(Dc$1(a)){case 1:s=fc$1;break;case 4:s=gc$1;break;case 16:s=hc$1;break;case 536870912:s=jc$1;break;default:s=hc$1}s=Gk(s,Hk.bind(null,o))}o.callbackPriority=i,o.callbackNode=s}}function Hk(o,i){if(Bk=-1,Ck=0,K$2&6)throw Error(p$2(327));var s=o.callbackNode;if(Ik()&&o.callbackNode!==s)return null;var a=uc$1(o,o===R$2?Z$2:0);if(a===0)return null;if(a&30||a&o.expiredLanes||i)i=Jk(o,a);else{i=a;var et=K$2;K$2|=2;var tt=Kk();(R$2!==o||Z$2!==i)&&(vk=null,Hj=B$2()+500,Lk(o,i));do try{Mk();break}catch(dt){Nk(o,dt)}while(!0);Qg(),nk.current=tt,K$2=et,Y$2!==null?i=0:(R$2=null,Z$2=0,i=T$2)}if(i!==0){if(i===2&&(et=xc$1(o),et!==0&&(a=et,i=Ok(o,et))),i===1)throw s=qk,Lk(o,0),Dk(o,a),Ek(o,B$2()),s;if(i===6)Dk(o,a);else{if(et=o.current.alternate,!(a&30)&&!Pk(et)&&(i=Jk(o,a),i===2&&(tt=xc$1(o),tt!==0&&(a=tt,i=Ok(o,tt))),i===1))throw s=qk,Lk(o,0),Dk(o,a),Ek(o,B$2()),s;switch(o.finishedWork=et,o.finishedLanes=a,i){case 0:case 1:throw Error(p$2(345));case 2:Qk(o,uk,vk);break;case 3:if(Dk(o,a),(a&130023424)===a&&(i=gk+500-B$2(),10<i)){if(uc$1(o,0)!==0)break;if(et=o.suspendedLanes,(et&a)!==a){L$1(),o.pingedLanes|=o.suspendedLanes&et;break}o.timeoutHandle=Ff(Qk.bind(null,o,uk,vk),i);break}Qk(o,uk,vk);break;case 4:if(Dk(o,a),(a&4194240)===a)break;for(i=o.eventTimes,et=-1;0<a;){var ot=31-oc$1(a);tt=1<<ot,ot=i[ot],ot>et&&(et=ot),a&=~tt}if(a=et,a=B$2()-a,a=(120>a?120:480>a?480:1080>a?1080:1920>a?1920:3e3>a?3e3:4320>a?4320:1960*mk(a/1960))-a,10<a){o.timeoutHandle=Ff(Qk.bind(null,o,uk,vk),a);break}Qk(o,uk,vk);break;case 5:Qk(o,uk,vk);break;default:throw Error(p$2(329))}}}return Ek(o,B$2()),o.callbackNode===s?Hk.bind(null,o):null}function Ok(o,i){var s=tk;return o.current.memoizedState.isDehydrated&&(Lk(o,i).flags|=256),o=Jk(o,i),o!==2&&(i=uk,uk=s,i!==null&&Gj(i)),o}function Gj(o){uk===null?uk=o:uk.push.apply(uk,o)}function Pk(o){for(var i=o;;){if(i.flags&16384){var s=i.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var a=0;a<s.length;a++){var et=s[a],tt=et.getSnapshot;et=et.value;try{if(!He$1(tt(),et))return!1}catch{return!1}}}if(s=i.child,i.subtreeFlags&16384&&s!==null)s.return=i,i=s;else{if(i===o)break;for(;i.sibling===null;){if(i.return===null||i.return===o)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Dk(o,i){for(i&=~sk,i&=~rk,o.suspendedLanes|=i,o.pingedLanes&=~i,o=o.expirationTimes;0<i;){var s=31-oc$1(i),a=1<<s;o[s]=-1,i&=~a}}function Fk(o){if(K$2&6)throw Error(p$2(327));Ik();var i=uc$1(o,0);if(!(i&1))return Ek(o,B$2()),null;var s=Jk(o,i);if(o.tag!==0&&s===2){var a=xc$1(o);a!==0&&(i=a,s=Ok(o,a))}if(s===1)throw s=qk,Lk(o,0),Dk(o,i),Ek(o,B$2()),s;if(s===6)throw Error(p$2(345));return o.finishedWork=o.current.alternate,o.finishedLanes=i,Qk(o,uk,vk),Ek(o,B$2()),null}function Rk(o,i){var s=K$2;K$2|=1;try{return o(i)}finally{K$2=s,K$2===0&&(Hj=B$2()+500,fg&&jg())}}function Sk(o){xk!==null&&xk.tag===0&&!(K$2&6)&&Ik();var i=K$2;K$2|=1;var s=pk.transition,a=C$3;try{if(pk.transition=null,C$3=1,o)return o()}finally{C$3=a,pk.transition=s,K$2=i,!(K$2&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(o,i){o.finishedWork=null,o.finishedLanes=0;var s=o.timeoutHandle;if(s!==-1&&(o.timeoutHandle=-1,Gf(s)),Y$2!==null)for(s=Y$2.return;s!==null;){var a=s;switch(wg(a),a.tag){case 1:a=a.type.childContextTypes,a!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$2),Oh();break;case 5:Lh(a);break;case 4:Jh();break;case 13:E$1(M$2);break;case 19:E$1(M$2);break;case 10:Rg(a.type._context);break;case 22:case 23:Ij()}s=s.return}if(R$2=o,Y$2=o=wh(o.current,null),Z$2=gj=i,T$2=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(i=0;i<Wg.length;i++)if(s=Wg[i],a=s.interleaved,a!==null){s.interleaved=null;var et=a.next,tt=s.pending;if(tt!==null){var ot=tt.next;tt.next=et,a.next=ot}s.pending=a}Wg=null}return o}function Nk(o,i){do{var s=Y$2;try{if(Qg(),Ph.current=ai,Sh){for(var a=N$1.memoizedState;a!==null;){var et=a.queue;et!==null&&(et.pending=null),a=a.next}Sh=!1}if(Rh=0,P$2=O$2=N$1=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T$2=1,qk=i,Y$2=null;break}e:{var tt=o,ot=s.return,dt=s,ht=i;if(i=Z$2,dt.flags|=32768,ht!==null&&typeof ht=="object"&&typeof ht.then=="function"){var ft=ht,pt=dt,mt=pt.tag;if(!(pt.mode&1)&&(mt===0||mt===11||mt===15)){var gt=pt.alternate;gt?(pt.updateQueue=gt.updateQueue,pt.memoizedState=gt.memoizedState,pt.lanes=gt.lanes):(pt.updateQueue=null,pt.memoizedState=null)}var _t=Vi(ot);if(_t!==null){_t.flags&=-257,Wi(_t,ot,dt,tt,i),_t.mode&1&&Ti(tt,ft,i),i=_t,ht=ft;var yt=i.updateQueue;if(yt===null){var St=new Set;St.add(ht),i.updateQueue=St}else yt.add(ht);break e}else{if(!(i&1)){Ti(tt,ft,i),uj();break e}ht=Error(p$2(426))}}else if(I$2&&dt.mode&1){var Et=Vi(ot);if(Et!==null){!(Et.flags&65536)&&(Et.flags|=256),Wi(Et,ot,dt,tt,i),Jg(Ki(ht,dt));break e}}tt=ht=Ki(ht,dt),T$2!==4&&(T$2=2),tk===null?tk=[tt]:tk.push(tt),tt=ot;do{switch(tt.tag){case 3:tt.flags|=65536,i&=-i,tt.lanes|=i;var vt=Oi(tt,ht,i);fh(tt,vt);break e;case 1:dt=ht;var bt=tt.type,Tt=tt.stateNode;if(!(tt.flags&128)&&(typeof bt.getDerivedStateFromError=="function"||Tt!==null&&typeof Tt.componentDidCatch=="function"&&(Si===null||!Si.has(Tt)))){tt.flags|=65536,i&=-i,tt.lanes|=i;var wt=Ri(tt,dt,i);fh(tt,wt);break e}}tt=tt.return}while(tt!==null)}Tk(s)}catch(Pt){i=Pt,Y$2===s&&s!==null&&(Y$2=s=s.return);continue}break}while(!0)}function Kk(){var o=nk.current;return nk.current=ai,o===null?ai:o}function uj(){(T$2===0||T$2===3||T$2===2)&&(T$2=4),R$2===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$2,Z$2)}function Jk(o,i){var s=K$2;K$2|=2;var a=Kk();(R$2!==o||Z$2!==i)&&(vk=null,Lk(o,i));do try{Uk();break}catch(et){Nk(o,et)}while(!0);if(Qg(),K$2=s,nk.current=a,Y$2!==null)throw Error(p$2(261));return R$2=null,Z$2=0,T$2}function Uk(){for(;Y$2!==null;)Vk(Y$2)}function Mk(){for(;Y$2!==null&&!cc$1();)Vk(Y$2)}function Vk(o){var i=Wk(o.alternate,o,gj);o.memoizedProps=o.pendingProps,i===null?Tk(o):Y$2=i,ok.current=null}function Tk(o){var i=o;do{var s=i.alternate;if(o=i.return,i.flags&32768){if(s=Jj(s,i),s!==null){s.flags&=32767,Y$2=s;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{T$2=6,Y$2=null;return}}else if(s=Fj(s,i,gj),s!==null){Y$2=s;return}if(i=i.sibling,i!==null){Y$2=i;return}Y$2=i=o}while(i!==null);T$2===0&&(T$2=5)}function Qk(o,i,s){var a=C$3,et=pk.transition;try{pk.transition=null,C$3=1,Xk(o,i,s,a)}finally{pk.transition=et,C$3=a}return null}function Xk(o,i,s,a){do Ik();while(xk!==null);if(K$2&6)throw Error(p$2(327));s=o.finishedWork;var et=o.finishedLanes;if(s===null)return null;if(o.finishedWork=null,o.finishedLanes=0,s===o.current)throw Error(p$2(177));o.callbackNode=null,o.callbackPriority=0;var tt=s.lanes|s.childLanes;if(Bc$1(o,tt),o===R$2&&(Y$2=R$2=null,Z$2=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),tt=(s.flags&15990)!==0,s.subtreeFlags&15990||tt){tt=pk.transition,pk.transition=null;var ot=C$3;C$3=1;var dt=K$2;K$2|=4,ok.current=null,Pj(o,s),ek(s,o),Oe$1(Df),dd$1=!!Cf,Df=Cf=null,o.current=s,ik(s),dc$1(),K$2=dt,C$3=ot,pk.transition=tt}else o.current=s;if(wk&&(wk=!1,xk=o,yk=et),tt=o.pendingLanes,tt===0&&(Si=null),mc$1(s.stateNode),Ek(o,B$2()),i!==null)for(a=o.onRecoverableError,s=0;s<i.length;s++)et=i[s],a(et.value,{componentStack:et.stack,digest:et.digest});if(Pi)throw Pi=!1,o=Qi,Qi=null,o;return yk&1&&o.tag!==0&&Ik(),tt=o.pendingLanes,tt&1?o===Ak?zk++:(zk=0,Ak=o):zk=0,jg(),null}function Ik(){if(xk!==null){var o=Dc$1(yk),i=pk.transition,s=C$3;try{if(pk.transition=null,C$3=16>o?16:o,xk===null)var a=!1;else{if(o=xk,xk=null,yk=0,K$2&6)throw Error(p$2(331));var et=K$2;for(K$2|=4,V$2=o.current;V$2!==null;){var tt=V$2,ot=tt.child;if(V$2.flags&16){var dt=tt.deletions;if(dt!==null){for(var ht=0;ht<dt.length;ht++){var ft=dt[ht];for(V$2=ft;V$2!==null;){var pt=V$2;switch(pt.tag){case 0:case 11:case 15:Qj(8,pt,tt)}var mt=pt.child;if(mt!==null)mt.return=pt,V$2=mt;else for(;V$2!==null;){pt=V$2;var gt=pt.sibling,_t=pt.return;if(Tj(pt),pt===ft){V$2=null;break}if(gt!==null){gt.return=_t,V$2=gt;break}V$2=_t}}}var yt=tt.alternate;if(yt!==null){var St=yt.child;if(St!==null){yt.child=null;do{var Et=St.sibling;St.sibling=null,St=Et}while(St!==null)}}V$2=tt}}if(tt.subtreeFlags&2064&&ot!==null)ot.return=tt,V$2=ot;else e:for(;V$2!==null;){if(tt=V$2,tt.flags&2048)switch(tt.tag){case 0:case 11:case 15:Qj(9,tt,tt.return)}var vt=tt.sibling;if(vt!==null){vt.return=tt.return,V$2=vt;break e}V$2=tt.return}}var bt=o.current;for(V$2=bt;V$2!==null;){ot=V$2;var Tt=ot.child;if(ot.subtreeFlags&2064&&Tt!==null)Tt.return=ot,V$2=Tt;else e:for(ot=bt;V$2!==null;){if(dt=V$2,dt.flags&2048)try{switch(dt.tag){case 0:case 11:case 15:Rj(9,dt)}}catch(Pt){W$2(dt,dt.return,Pt)}if(dt===ot){V$2=null;break e}var wt=dt.sibling;if(wt!==null){wt.return=dt.return,V$2=wt;break e}V$2=dt.return}}if(K$2=et,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,o)}catch{}a=!0}return a}finally{C$3=s,pk.transition=i}}return!1}function Yk(o,i,s){i=Ki(s,i),i=Oi(o,i,1),o=dh(o,i,1),i=L$1(),o!==null&&(Ac$1(o,1,i),Ek(o,i))}function W$2(o,i,s){if(o.tag===3)Yk(o,o,s);else for(;i!==null;){if(i.tag===3){Yk(i,o,s);break}else if(i.tag===1){var a=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof a.componentDidCatch=="function"&&(Si===null||!Si.has(a))){o=Ki(s,o),o=Ri(i,o,1),i=dh(i,o,1),o=L$1(),i!==null&&(Ac$1(i,1,o),Ek(i,o));break}}i=i.return}}function Ui(o,i,s){var a=o.pingCache;a!==null&&a.delete(i),i=L$1(),o.pingedLanes|=o.suspendedLanes&s,R$2===o&&(Z$2&s)===s&&(T$2===4||T$2===3&&(Z$2&130023424)===Z$2&&500>B$2()-gk?Lk(o,0):sk|=s),Ek(o,i)}function Zk(o,i){i===0&&(o.mode&1?(i=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):i=1);var s=L$1();o=Zg(o,i),o!==null&&(Ac$1(o,i,s),Ek(o,s))}function vj(o){var i=o.memoizedState,s=0;i!==null&&(s=i.retryLane),Zk(o,s)}function ck(o,i){var s=0;switch(o.tag){case 13:var a=o.stateNode,et=o.memoizedState;et!==null&&(s=et.retryLane);break;case 19:a=o.stateNode;break;default:throw Error(p$2(314))}a!==null&&a.delete(i),Zk(o,s)}var Wk;Wk=function(o,i,s){if(o!==null)if(o.memoizedProps!==i.pendingProps||Wf.current)Ug=!0;else{if(!(o.lanes&s)&&!(i.flags&128))return Ug=!1,zj(o,i,s);Ug=!!(o.flags&131072)}else Ug=!1,I$2&&i.flags&1048576&&ug(i,ng,i.index);switch(i.lanes=0,i.tag){case 2:var a=i.type;jj(o,i),o=i.pendingProps;var et=Yf(i,H$2.current);Tg(i,s),et=Xh(null,i,a,o,et,s);var tt=bi();return i.flags|=1,typeof et=="object"&&et!==null&&typeof et.render=="function"&&et.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,Zf(a)?(tt=!0,cg(i)):tt=!1,i.memoizedState=et.state!==null&&et.state!==void 0?et.state:null,ah(i),et.updater=nh,i.stateNode=et,et._reactInternals=i,rh(i,a,o,s),i=kj(null,i,a,!0,tt,s)):(i.tag=0,I$2&&tt&&vg(i),Yi(null,i,et,s),i=i.child),i;case 16:a=i.elementType;e:{switch(jj(o,i),o=i.pendingProps,et=a._init,a=et(a._payload),i.type=a,et=i.tag=$k(a),o=Lg(a,o),et){case 0:i=dj(null,i,a,o,s);break e;case 1:i=ij(null,i,a,o,s);break e;case 11:i=Zi(null,i,a,o,s);break e;case 14:i=aj(null,i,a,Lg(a.type,o),s);break e}throw Error(p$2(306,a,""))}return i;case 0:return a=i.type,et=i.pendingProps,et=i.elementType===a?et:Lg(a,et),dj(o,i,a,et,s);case 1:return a=i.type,et=i.pendingProps,et=i.elementType===a?et:Lg(a,et),ij(o,i,a,et,s);case 3:e:{if(lj(i),o===null)throw Error(p$2(387));a=i.pendingProps,tt=i.memoizedState,et=tt.element,bh(o,i),gh(i,a,null,s);var ot=i.memoizedState;if(a=ot.element,tt.isDehydrated)if(tt={element:a,isDehydrated:!1,cache:ot.cache,pendingSuspenseBoundaries:ot.pendingSuspenseBoundaries,transitions:ot.transitions},i.updateQueue.baseState=tt,i.memoizedState=tt,i.flags&256){et=Ki(Error(p$2(423)),i),i=mj(o,i,a,s,et);break e}else if(a!==et){et=Ki(Error(p$2(424)),i),i=mj(o,i,a,s,et);break e}else for(yg=Lf(i.stateNode.containerInfo.firstChild),xg=i,I$2=!0,zg=null,s=Ch(i,null,a,s),i.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),a===et){i=$i(o,i,s);break e}Yi(o,i,a,s)}i=i.child}return i;case 5:return Kh(i),o===null&&Eg(i),a=i.type,et=i.pendingProps,tt=o!==null?o.memoizedProps:null,ot=et.children,Ef(a,et)?ot=null:tt!==null&&Ef(a,tt)&&(i.flags|=32),hj(o,i),Yi(o,i,ot,s),i.child;case 6:return o===null&&Eg(i),null;case 13:return pj(o,i,s);case 4:return Ih(i,i.stateNode.containerInfo),a=i.pendingProps,o===null?i.child=Bh(i,null,a,s):Yi(o,i,a,s),i.child;case 11:return a=i.type,et=i.pendingProps,et=i.elementType===a?et:Lg(a,et),Zi(o,i,a,et,s);case 7:return Yi(o,i,i.pendingProps,s),i.child;case 8:return Yi(o,i,i.pendingProps.children,s),i.child;case 12:return Yi(o,i,i.pendingProps.children,s),i.child;case 10:e:{if(a=i.type._context,et=i.pendingProps,tt=i.memoizedProps,ot=et.value,G$2(Mg,a._currentValue),a._currentValue=ot,tt!==null)if(He$1(tt.value,ot)){if(tt.children===et.children&&!Wf.current){i=$i(o,i,s);break e}}else for(tt=i.child,tt!==null&&(tt.return=i);tt!==null;){var dt=tt.dependencies;if(dt!==null){ot=tt.child;for(var ht=dt.firstContext;ht!==null;){if(ht.context===a){if(tt.tag===1){ht=ch(-1,s&-s),ht.tag=2;var ft=tt.updateQueue;if(ft!==null){ft=ft.shared;var pt=ft.pending;pt===null?ht.next=ht:(ht.next=pt.next,pt.next=ht),ft.pending=ht}}tt.lanes|=s,ht=tt.alternate,ht!==null&&(ht.lanes|=s),Sg(tt.return,s,i),dt.lanes|=s;break}ht=ht.next}}else if(tt.tag===10)ot=tt.type===i.type?null:tt.child;else if(tt.tag===18){if(ot=tt.return,ot===null)throw Error(p$2(341));ot.lanes|=s,dt=ot.alternate,dt!==null&&(dt.lanes|=s),Sg(ot,s,i),ot=tt.sibling}else ot=tt.child;if(ot!==null)ot.return=tt;else for(ot=tt;ot!==null;){if(ot===i){ot=null;break}if(tt=ot.sibling,tt!==null){tt.return=ot.return,ot=tt;break}ot=ot.return}tt=ot}Yi(o,i,et.children,s),i=i.child}return i;case 9:return et=i.type,a=i.pendingProps.children,Tg(i,s),et=Vg(et),a=a(et),i.flags|=1,Yi(o,i,a,s),i.child;case 14:return a=i.type,et=Lg(a,i.pendingProps),et=Lg(a.type,et),aj(o,i,a,et,s);case 15:return cj(o,i,i.type,i.pendingProps,s);case 17:return a=i.type,et=i.pendingProps,et=i.elementType===a?et:Lg(a,et),jj(o,i),i.tag=1,Zf(a)?(o=!0,cg(i)):o=!1,Tg(i,s),ph(i,a,et),rh(i,a,et,s),kj(null,i,a,!0,o,s);case 19:return yj(o,i,s);case 22:return ej(o,i,s)}throw Error(p$2(156,i.tag))};function Gk(o,i){return ac$1(o,i)}function al(o,i,s,a){this.tag=o,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=a,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(o,i,s,a){return new al(o,i,s,a)}function bj(o){return o=o.prototype,!(!o||!o.isReactComponent)}function $k(o){if(typeof o=="function")return bj(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Da$1)return 11;if(o===Ga$1)return 14}return 2}function wh(o,i){var s=o.alternate;return s===null?(s=Bg(o.tag,i,o.key,o.mode),s.elementType=o.elementType,s.type=o.type,s.stateNode=o.stateNode,s.alternate=o,o.alternate=s):(s.pendingProps=i,s.type=o.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=o.flags&14680064,s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,i=o.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},s.sibling=o.sibling,s.index=o.index,s.ref=o.ref,s}function yh(o,i,s,a,et,tt){var ot=2;if(a=o,typeof o=="function")bj(o)&&(ot=1);else if(typeof o=="string")ot=5;else e:switch(o){case ya$1:return Ah(s.children,et,tt,i);case za$1:ot=8,et|=8;break;case Aa$1:return o=Bg(12,s,i,et|2),o.elementType=Aa$1,o.lanes=tt,o;case Ea$1:return o=Bg(13,s,i,et),o.elementType=Ea$1,o.lanes=tt,o;case Fa$1:return o=Bg(19,s,i,et),o.elementType=Fa$1,o.lanes=tt,o;case Ia$1:return qj(s,et,tt,i);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case Ba$1:ot=10;break e;case Ca$1:ot=9;break e;case Da$1:ot=11;break e;case Ga$1:ot=14;break e;case Ha$1:ot=16,a=null;break e}throw Error(p$2(130,o==null?o:typeof o,""))}return i=Bg(ot,s,i,et),i.elementType=o,i.type=a,i.lanes=tt,i}function Ah(o,i,s,a){return o=Bg(7,o,a,i),o.lanes=s,o}function qj(o,i,s,a){return o=Bg(22,o,a,i),o.elementType=Ia$1,o.lanes=s,o.stateNode={isHidden:!1},o}function xh(o,i,s){return o=Bg(6,o,null,i),o.lanes=s,o}function zh(o,i,s){return i=Bg(4,o.children!==null?o.children:[],o.key,i),i.lanes=s,i.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},i}function bl(o,i,s,a,et){this.tag=i,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=a,this.onRecoverableError=et,this.mutableSourceEagerHydrationData=null}function cl(o,i,s,a,et,tt,ot,dt,ht){return o=new bl(o,i,s,dt,ht),i===1?(i=1,tt===!0&&(i|=8)):i=0,tt=Bg(3,null,null,i),o.current=tt,tt.stateNode=o,tt.memoizedState={element:a,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(tt),o}function dl(o,i,s){var a=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:a==null?null:""+a,children:o,containerInfo:i,implementation:s}}function el(o){if(!o)return Vf;o=o._reactInternals;e:{if(Vb$1(o)!==o||o.tag!==1)throw Error(p$2(170));var i=o;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(Zf(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(p$2(171))}if(o.tag===1){var s=o.type;if(Zf(s))return bg(o,s,i)}return i}function fl(o,i,s,a,et,tt,ot,dt,ht){return o=cl(s,a,!0,o,et,tt,ot,dt,ht),o.context=el(null),s=o.current,a=L$1(),et=lh(s),tt=ch(a,et),tt.callback=i??null,dh(s,tt,et),o.current.lanes=et,Ac$1(o,et,a),Ek(o,a),o}function gl(o,i,s,a){var et=i.current,tt=L$1(),ot=lh(et);return s=el(s),i.context===null?i.context=s:i.pendingContext=s,i=ch(tt,ot),i.payload={element:o},a=a===void 0?null:a,a!==null&&(i.callback=a),o=dh(et,i,ot),o!==null&&(mh(o,et,ot,tt),eh(o,et,ot)),ot}function hl(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function il(o,i){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var s=o.retryLane;o.retryLane=s!==0&&s<i?s:i}}function jl(o,i){il(o,i),(o=o.alternate)&&il(o,i)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(o){console.error(o)};function ml(o){this._internalRoot=o}nl.prototype.render=ml.prototype.render=function(o){var i=this._internalRoot;if(i===null)throw Error(p$2(409));gl(o,i,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var i=o.containerInfo;Sk(function(){gl(null,o,null,null)}),i[uf]=null}};function nl(o){this._internalRoot=o}nl.prototype.unstable_scheduleHydration=function(o){if(o){var i=Hc$1();o={blockedOn:null,target:o,priority:i};for(var s=0;s<Qc$1.length&&i!==0&&i<Qc$1[s].priority;s++);Qc$1.splice(s,0,o),s===0&&Vc$1(o)}};function ol(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function pl(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(o,i,s,a,et){if(et){if(typeof a=="function"){var tt=a;a=function(){var ft=hl(ot);tt.call(ft)}}var ot=fl(i,a,o,0,null,!1,!1,"",ql);return o._reactRootContainer=ot,o[uf]=ot.current,sf(o.nodeType===8?o.parentNode:o),Sk(),ot}for(;et=o.lastChild;)o.removeChild(et);if(typeof a=="function"){var dt=a;a=function(){var ft=hl(ht);dt.call(ft)}}var ht=cl(o,0,!1,null,null,!1,!1,"",ql);return o._reactRootContainer=ht,o[uf]=ht.current,sf(o.nodeType===8?o.parentNode:o),Sk(function(){gl(i,ht,s,a)}),ht}function sl(o,i,s,a,et){var tt=s._reactRootContainer;if(tt){var ot=tt;if(typeof et=="function"){var dt=et;et=function(){var ht=hl(ot);dt.call(ht)}}gl(i,ot,o,et)}else ot=rl(s,i,o,et,a);return hl(ot)}Ec$1=function(o){switch(o.tag){case 3:var i=o.stateNode;if(i.current.memoizedState.isDehydrated){var s=tc$1(i.pendingLanes);s!==0&&(Cc$1(i,s|1),Ek(i,B$2()),!(K$2&6)&&(Hj=B$2()+500,jg()))}break;case 13:Sk(function(){var a=Zg(o,1);if(a!==null){var et=L$1();mh(a,o,1,et)}}),jl(o,1)}};Fc$1=function(o){if(o.tag===13){var i=Zg(o,134217728);if(i!==null){var s=L$1();mh(i,o,134217728,s)}jl(o,134217728)}};Gc$1=function(o){if(o.tag===13){var i=lh(o),s=Zg(o,i);if(s!==null){var a=L$1();mh(s,o,i,a)}jl(o,i)}};Hc$1=function(){return C$3};Ic$1=function(o,i){var s=C$3;try{return C$3=o,i()}finally{C$3=s}};yb$1=function(o,i,s){switch(i){case"input":if(bb$1(o,s),i=s.name,s.type==="radio"&&i!=null){for(s=o;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<s.length;i++){var a=s[i];if(a!==o&&a.form===o.form){var et=Db(a);if(!et)throw Error(p$2(90));Wa$1(a),bb$1(a,et)}}}break;case"textarea":ib$1(o,s);break;case"select":i=s.value,i!=null&&fb$1(o,!!s.multiple,i,!1)}};Gb$1=Rk;Hb$1=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb$1,ue$2,Db,Eb$1,Fb$1,Rk]},ul={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Zb$1(o),o===null?null:o.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc$1=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(o,i){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(i))throw Error(p$2(200));return dl(o,i,null,s)};reactDom_production_min.createRoot=function(o,i){if(!ol(o))throw Error(p$2(299));var s=!1,a="",et=ll;return i!=null&&(i.unstable_strictMode===!0&&(s=!0),i.identifierPrefix!==void 0&&(a=i.identifierPrefix),i.onRecoverableError!==void 0&&(et=i.onRecoverableError)),i=cl(o,1,!1,null,null,s,!1,a,et),o[uf]=i.current,sf(o.nodeType===8?o.parentNode:o),new ml(i)};reactDom_production_min.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var i=o._reactInternals;if(i===void 0)throw typeof o.render=="function"?Error(p$2(188)):(o=Object.keys(o).join(","),Error(p$2(268,o)));return o=Zb$1(i),o=o===null?null:o.stateNode,o};reactDom_production_min.flushSync=function(o){return Sk(o)};reactDom_production_min.hydrate=function(o,i,s){if(!pl(i))throw Error(p$2(200));return sl(null,o,i,!0,s)};reactDom_production_min.hydrateRoot=function(o,i,s){if(!ol(o))throw Error(p$2(405));var a=s!=null&&s.hydratedSources||null,et=!1,tt="",ot=ll;if(s!=null&&(s.unstable_strictMode===!0&&(et=!0),s.identifierPrefix!==void 0&&(tt=s.identifierPrefix),s.onRecoverableError!==void 0&&(ot=s.onRecoverableError)),i=fl(i,null,o,1,s??null,et,!1,tt,ot),o[uf]=i.current,sf(o),a)for(o=0;o<a.length;o++)s=a[o],et=s._getVersion,et=et(s._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[s,et]:i.mutableSourceEagerHydrationData.push(s,et);return new nl(i)};reactDom_production_min.render=function(o,i,s){if(!pl(i))throw Error(p$2(200));return sl(null,o,i,!1,s)};reactDom_production_min.unmountComponentAtNode=function(o){if(!pl(o))throw Error(p$2(40));return o._reactRootContainer?(Sk(function(){sl(null,null,o,!1,function(){o._reactRootContainer=null,o[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(o,i,s,a){if(!pl(s))throw Error(p$2(200));if(o==null||o._reactInternals===void 0)throw Error(p$2(38));return sl(o,i,s,!1,a)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(o){console.error(o)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const ReactDOM=getDefaultExportFromCjs(reactDomExports),ReactDOM$1=_mergeNamespaces({__proto__:null,default:ReactDOM},[reactDomExports]);var m$2=reactDomExports;client.createRoot=m$2.createRoot,client.hydrateRoot=m$2.hydrateRoot;/**
 * @remix-run/router v1.14.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$A(){return _extends$A=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$A.apply(this,arguments)}var Action;(function(o){o.Pop="POP",o.Push="PUSH",o.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createBrowserHistory(o){o===void 0&&(o={});function i(a,et){let{pathname:tt,search:ot,hash:dt}=a.location;return createLocation("",{pathname:tt,search:ot,hash:dt},et.state&&et.state.usr||null,et.state&&et.state.key||"default")}function s(a,et){return typeof et=="string"?et:createPath(et)}return getUrlBasedHistory(i,s,null,o)}function invariant$1(o,i){if(o===!1||o===null||typeof o>"u")throw new Error(i)}function warning$4(o,i){if(!o){typeof console<"u"&&console.warn(i);try{throw new Error(i)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(o,i){return{usr:o.state,key:o.key,idx:i}}function createLocation(o,i,s,a){return s===void 0&&(s=null),_extends$A({pathname:typeof o=="string"?o:o.pathname,search:"",hash:""},typeof i=="string"?parsePath(i):i,{state:s,key:i&&i.key||a||createKey()})}function createPath(o){let{pathname:i="/",search:s="",hash:a=""}=o;return s&&s!=="?"&&(i+=s.charAt(0)==="?"?s:"?"+s),a&&a!=="#"&&(i+=a.charAt(0)==="#"?a:"#"+a),i}function parsePath(o){let i={};if(o){let s=o.indexOf("#");s>=0&&(i.hash=o.substr(s),o=o.substr(0,s));let a=o.indexOf("?");a>=0&&(i.search=o.substr(a),o=o.substr(0,a)),o&&(i.pathname=o)}return i}function getUrlBasedHistory(o,i,s,a){a===void 0&&(a={});let{window:et=document.defaultView,v5Compat:tt=!1}=a,ot=et.history,dt=Action.Pop,ht=null,ft=pt();ft==null&&(ft=0,ot.replaceState(_extends$A({},ot.state,{idx:ft}),""));function pt(){return(ot.state||{idx:null}).idx}function mt(){dt=Action.Pop;let Et=pt(),vt=Et==null?null:Et-ft;ft=Et,ht&&ht({action:dt,location:St.location,delta:vt})}function gt(Et,vt){dt=Action.Push;let bt=createLocation(St.location,Et,vt);s&&s(bt,Et),ft=pt()+1;let Tt=getHistoryState(bt,ft),wt=St.createHref(bt);try{ot.pushState(Tt,"",wt)}catch(Pt){if(Pt instanceof DOMException&&Pt.name==="DataCloneError")throw Pt;et.location.assign(wt)}tt&&ht&&ht({action:dt,location:St.location,delta:1})}function _t(Et,vt){dt=Action.Replace;let bt=createLocation(St.location,Et,vt);s&&s(bt,Et),ft=pt();let Tt=getHistoryState(bt,ft),wt=St.createHref(bt);ot.replaceState(Tt,"",wt),tt&&ht&&ht({action:dt,location:St.location,delta:0})}function yt(Et){let vt=et.location.origin!=="null"?et.location.origin:et.location.href,bt=typeof Et=="string"?Et:createPath(Et);return invariant$1(vt,"No window.location.(origin|href) available to create URL for href: "+bt),new URL(bt,vt)}let St={get action(){return dt},get location(){return o(et,ot)},listen(Et){if(ht)throw new Error("A history only accepts one active listener");return et.addEventListener(PopStateEventType,mt),ht=Et,()=>{et.removeEventListener(PopStateEventType,mt),ht=null}},createHref(Et){return i(et,Et)},createURL:yt,encodeLocation(Et){let vt=yt(Et);return{pathname:vt.pathname,search:vt.search,hash:vt.hash}},push:gt,replace:_t,go(Et){return ot.go(Et)}};return St}var ResultType;(function(o){o.data="data",o.deferred="deferred",o.redirect="redirect",o.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(o){return o.index===!0}function convertRoutesToDataRoutes(o,i,s,a){return s===void 0&&(s=[]),a===void 0&&(a={}),o.map((et,tt)=>{let ot=[...s,tt],dt=typeof et.id=="string"?et.id:ot.join("-");if(invariant$1(et.index!==!0||!et.children,"Cannot specify children on an index route"),invariant$1(!a[dt],'Found a route id collision on id "'+dt+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(et)){let ht=_extends$A({},et,i(et),{id:dt});return a[dt]=ht,ht}else{let ht=_extends$A({},et,i(et),{id:dt,children:void 0});return a[dt]=ht,et.children&&(ht.children=convertRoutesToDataRoutes(et.children,i,ot,a)),ht}})}function matchRoutes(o,i,s){s===void 0&&(s="/");let a=typeof i=="string"?parsePath(i):i,et=stripBasename(a.pathname||"/",s);if(et==null)return null;let tt=flattenRoutes(o);rankRouteBranches(tt);let ot=null;for(let dt=0;ot==null&&dt<tt.length;++dt)ot=matchRouteBranch(tt[dt],safelyDecodeURI(et));return ot}function convertRouteMatchToUiMatch(o,i){let{route:s,pathname:a,params:et}=o;return{id:s.id,pathname:a,params:et,data:i[s.id],handle:s.handle}}function flattenRoutes(o,i,s,a){i===void 0&&(i=[]),s===void 0&&(s=[]),a===void 0&&(a="");let et=(tt,ot,dt)=>{let ht={relativePath:dt===void 0?tt.path||"":dt,caseSensitive:tt.caseSensitive===!0,childrenIndex:ot,route:tt};ht.relativePath.startsWith("/")&&(invariant$1(ht.relativePath.startsWith(a),'Absolute route path "'+ht.relativePath+'" nested under path '+('"'+a+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),ht.relativePath=ht.relativePath.slice(a.length));let ft=joinPaths([a,ht.relativePath]),pt=s.concat(ht);tt.children&&tt.children.length>0&&(invariant$1(tt.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+ft+'".')),flattenRoutes(tt.children,i,pt,ft)),!(tt.path==null&&!tt.index)&&i.push({path:ft,score:computeScore(ft,tt.index),routesMeta:pt})};return o.forEach((tt,ot)=>{var dt;if(tt.path===""||!((dt=tt.path)!=null&&dt.includes("?")))et(tt,ot);else for(let ht of explodeOptionalSegments(tt.path))et(tt,ot,ht)}),i}function explodeOptionalSegments(o){let i=o.split("/");if(i.length===0)return[];let[s,...a]=i,et=s.endsWith("?"),tt=s.replace(/\?$/,"");if(a.length===0)return et?[tt,""]:[tt];let ot=explodeOptionalSegments(a.join("/")),dt=[];return dt.push(...ot.map(ht=>ht===""?tt:[tt,ht].join("/"))),et&&dt.push(...ot),dt.map(ht=>o.startsWith("/")&&ht===""?"/":ht)}function rankRouteBranches(o){o.sort((i,s)=>i.score!==s.score?s.score-i.score:compareIndexes(i.routesMeta.map(a=>a.childrenIndex),s.routesMeta.map(a=>a.childrenIndex)))}const paramRe=/^:\w+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=o=>o==="*";function computeScore(o,i){let s=o.split("/"),a=s.length;return s.some(isSplat)&&(a+=splatPenalty),i&&(a+=indexRouteValue),s.filter(et=>!isSplat(et)).reduce((et,tt)=>et+(paramRe.test(tt)?dynamicSegmentValue:tt===""?emptySegmentValue:staticSegmentValue),a)}function compareIndexes(o,i){return o.length===i.length&&o.slice(0,-1).every((a,et)=>a===i[et])?o[o.length-1]-i[i.length-1]:0}function matchRouteBranch(o,i){let{routesMeta:s}=o,a={},et="/",tt=[];for(let ot=0;ot<s.length;++ot){let dt=s[ot],ht=ot===s.length-1,ft=et==="/"?i:i.slice(et.length)||"/",pt=matchPath({path:dt.relativePath,caseSensitive:dt.caseSensitive,end:ht},ft);if(!pt)return null;Object.assign(a,pt.params);let mt=dt.route;tt.push({params:a,pathname:joinPaths([et,pt.pathname]),pathnameBase:normalizePathname(joinPaths([et,pt.pathnameBase])),route:mt}),pt.pathnameBase!=="/"&&(et=joinPaths([et,pt.pathnameBase]))}return tt}function matchPath(o,i){typeof o=="string"&&(o={path:o,caseSensitive:!1,end:!0});let[s,a]=compilePath(o.path,o.caseSensitive,o.end),et=i.match(s);if(!et)return null;let tt=et[0],ot=tt.replace(/(.)\/+$/,"$1"),dt=et.slice(1);return{params:a.reduce((ft,pt,mt)=>{let{paramName:gt,isOptional:_t}=pt;if(gt==="*"){let St=dt[mt]||"";ot=tt.slice(0,tt.length-St.length).replace(/(.)\/+$/,"$1")}const yt=dt[mt];return _t&&!yt?ft[gt]=void 0:ft[gt]=safelyDecodeURIComponent(yt||"",gt),ft},{}),pathname:tt,pathnameBase:ot,pattern:o}}function compilePath(o,i,s){i===void 0&&(i=!1),s===void 0&&(s=!0),warning$4(o==="*"||!o.endsWith("*")||o.endsWith("/*"),'Route path "'+o+'" will be treated as if it were '+('"'+o.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+o.replace(/\*$/,"/*")+'".'));let a=[],et="^"+o.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:(\w+)(\?)?/g,(ot,dt,ht)=>(a.push({paramName:dt,isOptional:ht!=null}),ht?"/?([^\\/]+)?":"/([^\\/]+)"));return o.endsWith("*")?(a.push({paramName:"*"}),et+=o==="*"||o==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?et+="\\/*$":o!==""&&o!=="/"&&(et+="(?:(?=\\/|$))"),[new RegExp(et,i?void 0:"i"),a]}function safelyDecodeURI(o){try{return decodeURI(o)}catch(i){return warning$4(!1,'The URL path "'+o+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+i+").")),o}}function safelyDecodeURIComponent(o,i){try{return decodeURIComponent(o)}catch(s){return warning$4(!1,'The value for the URL param "'+i+'" will not be decoded because'+(' the string "'+o+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),o}}function stripBasename(o,i){if(i==="/")return o;if(!o.toLowerCase().startsWith(i.toLowerCase()))return null;let s=i.endsWith("/")?i.length-1:i.length,a=o.charAt(s);return a&&a!=="/"?null:o.slice(s)||"/"}function resolvePath(o,i){i===void 0&&(i="/");let{pathname:s,search:a="",hash:et=""}=typeof o=="string"?parsePath(o):o;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,i):i,search:normalizeSearch(a),hash:normalizeHash(et)}}function resolvePathname(o,i){let s=i.replace(/\/+$/,"").split("/");return o.split("/").forEach(et=>{et===".."?s.length>1&&s.pop():et!=="."&&s.push(et)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(o,i,s,a){return"Cannot include a '"+o+"' character in a manually specified "+("`to."+i+"` field ["+JSON.stringify(a)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(o){return o.filter((i,s)=>s===0||i.route.path&&i.route.path.length>0)}function getResolveToMatches(o,i){let s=getPathContributingMatches(o);return i?s.map((a,et)=>et===o.length-1?a.pathname:a.pathnameBase):s.map(a=>a.pathnameBase)}function resolveTo(o,i,s,a){a===void 0&&(a=!1);let et;typeof o=="string"?et=parsePath(o):(et=_extends$A({},o),invariant$1(!et.pathname||!et.pathname.includes("?"),getInvalidPathError("?","pathname","search",et)),invariant$1(!et.pathname||!et.pathname.includes("#"),getInvalidPathError("#","pathname","hash",et)),invariant$1(!et.search||!et.search.includes("#"),getInvalidPathError("#","search","hash",et)));let tt=o===""||et.pathname==="",ot=tt?"/":et.pathname,dt;if(ot==null)dt=s;else if(a){let mt=i.length===0?[]:i[i.length-1].replace(/^\//,"").split("/");if(ot.startsWith("..")){let gt=ot.split("/");for(;gt[0]==="..";)gt.shift(),mt.pop();et.pathname=gt.join("/")}dt="/"+mt.join("/")}else{let mt=i.length-1;if(ot.startsWith("..")){let gt=ot.split("/");for(;gt[0]==="..";)gt.shift(),mt-=1;et.pathname=gt.join("/")}dt=mt>=0?i[mt]:"/"}let ht=resolvePath(et,dt),ft=ot&&ot!=="/"&&ot.endsWith("/"),pt=(tt||ot===".")&&s.endsWith("/");return!ht.pathname.endsWith("/")&&(ft||pt)&&(ht.pathname+="/"),ht}const joinPaths=o=>o.join("/").replace(/\/\/+/g,"/"),normalizePathname=o=>o.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=o=>!o||o==="?"?"":o.startsWith("?")?o:"?"+o,normalizeHash=o=>!o||o==="#"?"":o.startsWith("#")?o:"#"+o;class ErrorResponseImpl{constructor(i,s,a,et){et===void 0&&(et=!1),this.status=i,this.statusText=s||"",this.internal=et,a instanceof Error?(this.data=a.toString(),this.error=a):this.data=a}}function isRouteErrorResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.internal=="boolean"&&"data"in o}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX$1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=o=>({hasErrorBoundary:!!o.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(o){const i=o.window?o.window:typeof window<"u"?window:void 0,s=typeof i<"u"&&typeof i.document<"u"&&typeof i.document.createElement<"u",a=!s;invariant$1(o.routes.length>0,"You must provide a non-empty routes array to createRouter");let et;if(o.mapRouteProperties)et=o.mapRouteProperties;else if(o.detectErrorBoundary){let nn=o.detectErrorBoundary;et=an=>({hasErrorBoundary:nn(an)})}else et=defaultMapRouteProperties;let tt={},ot=convertRoutesToDataRoutes(o.routes,et,void 0,tt),dt,ht=o.basename||"/",ft=_extends$A({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},o.future),pt=null,mt=new Set,gt=null,_t=null,yt=null,St=o.hydrationData!=null,Et=matchRoutes(ot,o.history.location,ht),vt=null;if(Et==null){let nn=getInternalRouterError(404,{pathname:o.history.location.pathname}),{matches:an,route:rn}=getShortCircuitMatches(ot);Et=an,vt={[rn.id]:nn}}let bt,Tt=Et.some(nn=>nn.route.lazy),wt=Et.some(nn=>nn.route.loader);if(Tt)bt=!1;else if(!wt)bt=!0;else if(ft.v7_partialHydration){let nn=o.hydrationData?o.hydrationData.loaderData:null,an=o.hydrationData?o.hydrationData.errors:null;bt=Et.every(rn=>rn.route.loader&&rn.route.loader.hydrate!==!0&&(nn&&nn[rn.route.id]!==void 0||an&&an[rn.route.id]!==void 0))}else bt=o.hydrationData!=null;let Pt,At={historyAction:o.history.action,location:o.history.location,matches:Et,initialized:bt,navigation:IDLE_NAVIGATION,restoreScrollPosition:o.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:o.hydrationData&&o.hydrationData.loaderData||{},actionData:o.hydrationData&&o.hydrationData.actionData||null,errors:o.hydrationData&&o.hydrationData.errors||vt,fetchers:new Map,blockers:new Map},xt=Action.Pop,Ot=!1,Rt,Dt=!1,Nt=new Map,Kt=null,qt=!1,jt=!1,Zt=[],Ht=[],Wt=new Map,Ft=0,Gt=-1,Jt=new Map,on=new Set,bn=new Map,Ut=new Map,It=new Set,Mt=new Map,$t=new Map,Lt=!1;function Vt(){if(pt=o.history.listen(nn=>{let{action:an,location:rn,delta:An}=nn;if(Lt){Lt=!1;return}warning$4($t.size===0||An!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let In=cn({currentLocation:At.location,nextLocation:rn,historyAction:an});if(In&&An!=null){Lt=!0,o.history.go(An*-1),vn(In,{state:"blocked",location:rn,proceed(){vn(In,{state:"proceeding",proceed:void 0,reset:void 0,location:rn}),o.history.go(An)},reset(){let Hn=new Map(At.blockers);Hn.set(In,IDLE_BLOCKER),Yt({blockers:Hn})}});return}return Tn(an,rn)}),s){restoreAppliedTransitions(i,Nt);let nn=()=>persistAppliedTransitions(i,Nt);i.addEventListener("pagehide",nn),Kt=()=>i.removeEventListener("pagehide",nn)}return At.initialized||Tn(Action.Pop,At.location,{initialHydration:!0}),Pt}function zt(){pt&&pt(),Kt&&Kt(),mt.clear(),Rt&&Rt.abort(),At.fetchers.forEach((nn,an)=>Vn(an)),At.blockers.forEach((nn,an)=>qn(an))}function Xt(nn){return mt.add(nn),()=>mt.delete(nn)}function Yt(nn,an){an===void 0&&(an={}),At=_extends$A({},At,nn);let rn=[],An=[];ft.v7_fetcherPersist&&At.fetchers.forEach((In,Hn)=>{In.state==="idle"&&(It.has(Hn)?An.push(Hn):rn.push(Hn))}),[...mt].forEach(In=>In(At,{deletedFetchers:An,unstable_viewTransitionOpts:an.viewTransitionOpts,unstable_flushSync:an.flushSync===!0})),ft.v7_fetcherPersist&&(rn.forEach(In=>At.fetchers.delete(In)),An.forEach(In=>Vn(In)))}function un(nn,an,rn){var An,In;let{flushSync:Hn}=rn===void 0?{}:rn,Pn=At.actionData!=null&&At.navigation.formMethod!=null&&isMutationMethod(At.navigation.formMethod)&&At.navigation.state==="loading"&&((An=nn.state)==null?void 0:An._isRedirect)!==!0,Wn;an.actionData?Object.keys(an.actionData).length>0?Wn=an.actionData:Wn=null:Pn?Wn=At.actionData:Wn=null;let kn=an.loaderData?mergeLoaderData(At.loaderData,an.loaderData,an.matches||[],an.errors):At.loaderData,Qt=At.blockers;Qt.size>0&&(Qt=new Map(Qt),Qt.forEach((en,sn)=>Qt.set(sn,IDLE_BLOCKER)));let kt=Ot===!0||At.navigation.formMethod!=null&&isMutationMethod(At.navigation.formMethod)&&((In=nn.state)==null?void 0:In._isRedirect)!==!0;dt&&(ot=dt,dt=void 0),qt||xt===Action.Pop||(xt===Action.Push?o.history.push(nn,nn.state):xt===Action.Replace&&o.history.replace(nn,nn.state));let Bt;if(xt===Action.Pop){let en=Nt.get(At.location.pathname);en&&en.has(nn.pathname)?Bt={currentLocation:At.location,nextLocation:nn}:Nt.has(nn.pathname)&&(Bt={currentLocation:nn,nextLocation:At.location})}else if(Dt){let en=Nt.get(At.location.pathname);en?en.add(nn.pathname):(en=new Set([nn.pathname]),Nt.set(At.location.pathname,en)),Bt={currentLocation:At.location,nextLocation:nn}}Yt(_extends$A({},an,{actionData:Wn,loaderData:kn,historyAction:xt,location:nn,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:cr(nn,an.matches||At.matches),preventScrollReset:kt,blockers:Qt}),{viewTransitionOpts:Bt,flushSync:Hn===!0}),xt=Action.Pop,Ot=!1,Dt=!1,qt=!1,jt=!1,Zt=[],Ht=[]}async function gn(nn,an){if(typeof nn=="number"){o.history.go(nn);return}let rn=normalizeTo(At.location,At.matches,ht,ft.v7_prependBasename,nn,ft.v7_relativeSplatPath,an==null?void 0:an.fromRouteId,an==null?void 0:an.relative),{path:An,submission:In,error:Hn}=normalizeNavigateOptions(ft.v7_normalizeFormMethod,!1,rn,an),Pn=At.location,Wn=createLocation(At.location,An,an&&an.state);Wn=_extends$A({},Wn,o.history.encodeLocation(Wn));let kn=an&&an.replace!=null?an.replace:void 0,Qt=Action.Push;kn===!0?Qt=Action.Replace:kn===!1||In!=null&&isMutationMethod(In.formMethod)&&In.formAction===At.location.pathname+At.location.search&&(Qt=Action.Replace);let kt=an&&"preventScrollReset"in an?an.preventScrollReset===!0:void 0,Bt=(an&&an.unstable_flushSync)===!0,en=cn({currentLocation:Pn,nextLocation:Wn,historyAction:Qt});if(en){vn(en,{state:"blocked",location:Wn,proceed(){vn(en,{state:"proceeding",proceed:void 0,reset:void 0,location:Wn}),gn(nn,an)},reset(){let sn=new Map(At.blockers);sn.set(en,IDLE_BLOCKER),Yt({blockers:sn})}});return}return await Tn(Qt,Wn,{submission:In,pendingError:Hn,preventScrollReset:kt,replace:an&&an.replace,enableViewTransition:an&&an.unstable_viewTransition,flushSync:Bt})}function yn(){if(fn(),Yt({revalidation:"loading"}),At.navigation.state!=="submitting"){if(At.navigation.state==="idle"){Tn(At.historyAction,At.location,{startUninterruptedRevalidation:!0});return}Tn(xt||At.historyAction,At.navigation.location,{overrideNavigation:At.navigation})}}async function Tn(nn,an,rn){Rt&&Rt.abort(),Rt=null,xt=nn,qt=(rn&&rn.startUninterruptedRevalidation)===!0,rr(At.location,At.matches),Ot=(rn&&rn.preventScrollReset)===!0,Dt=(rn&&rn.enableViewTransition)===!0;let An=dt||ot,In=rn&&rn.overrideNavigation,Hn=matchRoutes(An,an,ht),Pn=(rn&&rn.flushSync)===!0;if(!Hn){let sn=getInternalRouterError(404,{pathname:an.pathname}),{matches:hn,route:En}=getShortCircuitMatches(An);ln(),un(an,{matches:hn,loaderData:{},errors:{[En.id]:sn}},{flushSync:Pn});return}if(At.initialized&&!jt&&isHashChangeOnly(At.location,an)&&!(rn&&rn.submission&&isMutationMethod(rn.submission.formMethod))){un(an,{matches:Hn},{flushSync:Pn});return}Rt=new AbortController;let Wn=createClientSideRequest(o.history,an,Rt.signal,rn&&rn.submission),kn,Qt;if(rn&&rn.pendingError)Qt={[findNearestBoundary(Hn).route.id]:rn.pendingError};else if(rn&&rn.submission&&isMutationMethod(rn.submission.formMethod)){let sn=await Rn(Wn,an,rn.submission,Hn,{replace:rn.replace,flushSync:Pn});if(sn.shortCircuited)return;kn=sn.pendingActionData,Qt=sn.pendingActionError,In=getLoadingNavigation(an,rn.submission),Pn=!1,Wn=new Request(Wn.url,{signal:Wn.signal})}let{shortCircuited:kt,loaderData:Bt,errors:en}=await Sn(Wn,an,Hn,In,rn&&rn.submission,rn&&rn.fetcherSubmission,rn&&rn.replace,rn&&rn.initialHydration===!0,Pn,kn,Qt);kt||(Rt=null,un(an,_extends$A({matches:Hn},kn?{actionData:kn}:{},{loaderData:Bt,errors:en})))}async function Rn(nn,an,rn,An,In){In===void 0&&(In={}),fn();let Hn=getSubmittingNavigation(an,rn);Yt({navigation:Hn},{flushSync:In.flushSync===!0});let Pn,Wn=getTargetMatch(An,an);if(!Wn.route.action&&!Wn.route.lazy)Pn={type:ResultType.error,error:getInternalRouterError(405,{method:nn.method,pathname:an.pathname,routeId:Wn.route.id})};else if(Pn=await callLoaderOrAction("action",nn,Wn,An,tt,et,ht,ft.v7_relativeSplatPath),nn.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(Pn)){let kn;return In&&In.replace!=null?kn=In.replace:kn=Pn.location===At.location.pathname+At.location.search,await On(At,Pn,{submission:rn,replace:kn}),{shortCircuited:!0}}if(isErrorResult(Pn)){let kn=findNearestBoundary(An,Wn.route.id);return(In&&In.replace)!==!0&&(xt=Action.Push),{pendingActionData:{},pendingActionError:{[kn.route.id]:Pn.error}}}if(isDeferredResult(Pn))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[Wn.route.id]:Pn.data}}}async function Sn(nn,an,rn,An,In,Hn,Pn,Wn,kn,Qt,kt){let Bt=An||getLoadingNavigation(an,In),en=In||Hn||getSubmissionFromNavigation(Bt),sn=dt||ot,[hn,En]=getMatchesToLoad(o.history,At,rn,en,an,ft.v7_partialHydration&&Wn===!0,jt,Zt,Ht,It,bn,on,sn,ht,Qt,kt);if(ln(sr=>!(rn&&rn.some(or=>or.route.id===sr))||hn&&hn.some(or=>or.route.id===sr)),Gt=++Ft,hn.length===0&&En.length===0){let sr=Qn();return un(an,_extends$A({matches:rn,loaderData:{},errors:kt||null},Qt?{actionData:Qt}:{},sr?{fetchers:new Map(At.fetchers)}:{}),{flushSync:kn}),{shortCircuited:!0}}if(!qt&&(!ft.v7_partialHydration||!Wn)){En.forEach(or=>{let dr=At.fetchers.get(or.key),pr=getLoadingFetcher(void 0,dr?dr.data:void 0);At.fetchers.set(or.key,pr)});let sr=Qt||At.actionData;Yt(_extends$A({navigation:Bt},sr?Object.keys(sr).length===0?{actionData:null}:{actionData:sr}:{},En.length>0?{fetchers:new Map(At.fetchers)}:{}),{flushSync:kn})}En.forEach(sr=>{Wt.has(sr.key)&&Xn(sr.key),sr.controller&&Wt.set(sr.key,sr.controller)});let Nn=()=>En.forEach(sr=>Xn(sr.key));Rt&&Rt.signal.addEventListener("abort",Nn);let{results:Bn,loaderResults:Un,fetcherResults:er}=await wn(At.matches,rn,hn,En,nn);if(nn.signal.aborted)return{shortCircuited:!0};Rt&&Rt.signal.removeEventListener("abort",Nn),En.forEach(sr=>Wt.delete(sr.key));let Gn=findRedirect(Bn);if(Gn){if(Gn.idx>=hn.length){let sr=En[Gn.idx-hn.length].key;on.add(sr)}return await On(At,Gn.result,{replace:Pn}),{shortCircuited:!0}}let{loaderData:Kn,errors:Zn}=processLoaderData(At,rn,hn,Un,kt,En,er,Mt);Mt.forEach((sr,or)=>{sr.subscribe(dr=>{(dr||sr.done)&&Mt.delete(or)})});let ir=Qn(),tr=jn(Gt),ar=ir||tr||En.length>0;return _extends$A({loaderData:Kn,errors:Zn},ar?{fetchers:new Map(At.fetchers)}:{})}function Fn(nn,an,rn,An){if(a)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Wt.has(nn)&&Xn(nn);let In=(An&&An.unstable_flushSync)===!0,Hn=dt||ot,Pn=normalizeTo(At.location,At.matches,ht,ft.v7_prependBasename,rn,ft.v7_relativeSplatPath,an,An==null?void 0:An.relative),Wn=matchRoutes(Hn,Pn,ht);if(!Wn){Cn(nn,an,getInternalRouterError(404,{pathname:Pn}),{flushSync:In});return}let{path:kn,submission:Qt,error:kt}=normalizeNavigateOptions(ft.v7_normalizeFormMethod,!0,Pn,An);if(kt){Cn(nn,an,kt,{flushSync:In});return}let Bt=getTargetMatch(Wn,kn);if(Ot=(An&&An.preventScrollReset)===!0,Qt&&isMutationMethod(Qt.formMethod)){Dn(nn,an,kn,Bt,Wn,In,Qt);return}bn.set(nn,{routeId:an,path:kn}),xn(nn,an,kn,Bt,Wn,In,Qt)}async function Dn(nn,an,rn,An,In,Hn,Pn){if(fn(),bn.delete(nn),!An.route.action&&!An.route.lazy){let or=getInternalRouterError(405,{method:Pn.formMethod,pathname:rn,routeId:an});Cn(nn,an,or,{flushSync:Hn});return}let Wn=At.fetchers.get(nn);_n(nn,getSubmittingFetcher(Pn,Wn),{flushSync:Hn});let kn=new AbortController,Qt=createClientSideRequest(o.history,rn,kn.signal,Pn);Wt.set(nn,kn);let kt=Ft,Bt=await callLoaderOrAction("action",Qt,An,In,tt,et,ht,ft.v7_relativeSplatPath);if(Qt.signal.aborted){Wt.get(nn)===kn&&Wt.delete(nn);return}if(It.has(nn)){_n(nn,getDoneFetcher(void 0));return}if(isRedirectResult(Bt))if(Wt.delete(nn),Gt>kt){_n(nn,getDoneFetcher(void 0));return}else return on.add(nn),_n(nn,getLoadingFetcher(Pn)),On(At,Bt,{fetcherSubmission:Pn});if(isErrorResult(Bt)){Cn(nn,an,Bt.error);return}if(isDeferredResult(Bt))throw getInternalRouterError(400,{type:"defer-action"});let en=At.navigation.location||At.location,sn=createClientSideRequest(o.history,en,kn.signal),hn=dt||ot,En=At.navigation.state!=="idle"?matchRoutes(hn,At.navigation.location,ht):At.matches;invariant$1(En,"Didn't find any matches after fetcher action");let Nn=++Ft;Jt.set(nn,Nn);let Bn=getLoadingFetcher(Pn,Bt.data);At.fetchers.set(nn,Bn);let[Un,er]=getMatchesToLoad(o.history,At,En,Pn,en,!1,jt,Zt,Ht,It,bn,on,hn,ht,{[An.route.id]:Bt.data},void 0);er.filter(or=>or.key!==nn).forEach(or=>{let dr=or.key,pr=At.fetchers.get(dr),vr=getLoadingFetcher(void 0,pr?pr.data:void 0);At.fetchers.set(dr,vr),Wt.has(dr)&&Xn(dr),or.controller&&Wt.set(dr,or.controller)}),Yt({fetchers:new Map(At.fetchers)});let Gn=()=>er.forEach(or=>Xn(or.key));kn.signal.addEventListener("abort",Gn);let{results:Kn,loaderResults:Zn,fetcherResults:ir}=await wn(At.matches,En,Un,er,sn);if(kn.signal.aborted)return;kn.signal.removeEventListener("abort",Gn),Jt.delete(nn),Wt.delete(nn),er.forEach(or=>Wt.delete(or.key));let tr=findRedirect(Kn);if(tr){if(tr.idx>=Un.length){let or=er[tr.idx-Un.length].key;on.add(or)}return On(At,tr.result)}let{loaderData:ar,errors:sr}=processLoaderData(At,At.matches,Un,Zn,void 0,er,ir,Mt);if(At.fetchers.has(nn)){let or=getDoneFetcher(Bt.data);At.fetchers.set(nn,or)}jn(Nn),At.navigation.state==="loading"&&Nn>Gt?(invariant$1(xt,"Expected pending action"),Rt&&Rt.abort(),un(At.navigation.location,{matches:En,loaderData:ar,errors:sr,fetchers:new Map(At.fetchers)})):(Yt({errors:sr,loaderData:mergeLoaderData(At.loaderData,ar,En,sr),fetchers:new Map(At.fetchers)}),jt=!1)}async function xn(nn,an,rn,An,In,Hn,Pn){let Wn=At.fetchers.get(nn);_n(nn,getLoadingFetcher(Pn,Wn?Wn.data:void 0),{flushSync:Hn});let kn=new AbortController,Qt=createClientSideRequest(o.history,rn,kn.signal);Wt.set(nn,kn);let kt=Ft,Bt=await callLoaderOrAction("loader",Qt,An,In,tt,et,ht,ft.v7_relativeSplatPath);if(isDeferredResult(Bt)&&(Bt=await resolveDeferredData(Bt,Qt.signal,!0)||Bt),Wt.get(nn)===kn&&Wt.delete(nn),!Qt.signal.aborted){if(It.has(nn)){_n(nn,getDoneFetcher(void 0));return}if(isRedirectResult(Bt))if(Gt>kt){_n(nn,getDoneFetcher(void 0));return}else{on.add(nn),await On(At,Bt);return}if(isErrorResult(Bt)){Cn(nn,an,Bt.error);return}invariant$1(!isDeferredResult(Bt),"Unhandled fetcher deferred data"),_n(nn,getDoneFetcher(Bt.data))}}async function On(nn,an,rn){let{submission:An,fetcherSubmission:In,replace:Hn}=rn===void 0?{}:rn;an.revalidate&&(jt=!0);let Pn=createLocation(nn.location,an.location,{_isRedirect:!0});if(invariant$1(Pn,"Expected a location on the redirect navigation"),s){let en=!1;if(an.reloadDocument)en=!0;else if(ABSOLUTE_URL_REGEX$1.test(an.location)){const sn=o.history.createURL(an.location);en=sn.origin!==i.location.origin||stripBasename(sn.pathname,ht)==null}if(en){Hn?i.location.replace(an.location):i.location.assign(an.location);return}}Rt=null;let Wn=Hn===!0?Action.Replace:Action.Push,{formMethod:kn,formAction:Qt,formEncType:kt}=nn.navigation;!An&&!In&&kn&&Qt&&kt&&(An=getSubmissionFromNavigation(nn.navigation));let Bt=An||In;if(redirectPreserveMethodStatusCodes.has(an.status)&&Bt&&isMutationMethod(Bt.formMethod))await Tn(Wn,Pn,{submission:_extends$A({},Bt,{formAction:an.location}),preventScrollReset:Ot});else{let en=getLoadingNavigation(Pn,An);await Tn(Wn,Pn,{overrideNavigation:en,fetcherSubmission:In,preventScrollReset:Ot})}}async function wn(nn,an,rn,An,In){let Hn=await Promise.all([...rn.map(kn=>callLoaderOrAction("loader",In,kn,an,tt,et,ht,ft.v7_relativeSplatPath)),...An.map(kn=>kn.matches&&kn.match&&kn.controller?callLoaderOrAction("loader",createClientSideRequest(o.history,kn.path,kn.controller.signal),kn.match,kn.matches,tt,et,ht,ft.v7_relativeSplatPath):{type:ResultType.error,error:getInternalRouterError(404,{pathname:kn.path})})]),Pn=Hn.slice(0,rn.length),Wn=Hn.slice(rn.length);return await Promise.all([resolveDeferredResults(nn,rn,Pn,Pn.map(()=>In.signal),!1,At.loaderData),resolveDeferredResults(nn,An.map(kn=>kn.match),Wn,An.map(kn=>kn.controller?kn.controller.signal:null),!0)]),{results:Hn,loaderResults:Pn,fetcherResults:Wn}}function fn(){jt=!0,Zt.push(...ln()),bn.forEach((nn,an)=>{Wt.has(an)&&(Ht.push(an),Xn(an))})}function _n(nn,an,rn){rn===void 0&&(rn={}),At.fetchers.set(nn,an),Yt({fetchers:new Map(At.fetchers)},{flushSync:(rn&&rn.flushSync)===!0})}function Cn(nn,an,rn,An){An===void 0&&(An={});let In=findNearestBoundary(At.matches,an);Vn(nn),Yt({errors:{[In.route.id]:rn},fetchers:new Map(At.fetchers)},{flushSync:(An&&An.flushSync)===!0})}function Ln(nn){return ft.v7_fetcherPersist&&(Ut.set(nn,(Ut.get(nn)||0)+1),It.has(nn)&&It.delete(nn)),At.fetchers.get(nn)||IDLE_FETCHER}function Vn(nn){let an=At.fetchers.get(nn);Wt.has(nn)&&!(an&&an.state==="loading"&&Jt.has(nn))&&Xn(nn),bn.delete(nn),Jt.delete(nn),on.delete(nn),It.delete(nn),At.fetchers.delete(nn)}function Jn(nn){if(ft.v7_fetcherPersist){let an=(Ut.get(nn)||0)-1;an<=0?(Ut.delete(nn),It.add(nn)):Ut.set(nn,an)}else Vn(nn);Yt({fetchers:new Map(At.fetchers)})}function Xn(nn){let an=Wt.get(nn);invariant$1(an,"Expected fetch controller: "+nn),an.abort(),Wt.delete(nn)}function Yn(nn){for(let an of nn){let rn=Ln(an),An=getDoneFetcher(rn.data);At.fetchers.set(an,An)}}function Qn(){let nn=[],an=!1;for(let rn of on){let An=At.fetchers.get(rn);invariant$1(An,"Expected fetcher: "+rn),An.state==="loading"&&(on.delete(rn),nn.push(rn),an=!0)}return Yn(nn),an}function jn(nn){let an=[];for(let[rn,An]of Jt)if(An<nn){let In=At.fetchers.get(rn);invariant$1(In,"Expected fetcher: "+rn),In.state==="loading"&&(Xn(rn),Jt.delete(rn),an.push(rn))}return Yn(an),an.length>0}function zn(nn,an){let rn=At.blockers.get(nn)||IDLE_BLOCKER;return $t.get(nn)!==an&&$t.set(nn,an),rn}function qn(nn){At.blockers.delete(nn),$t.delete(nn)}function vn(nn,an){let rn=At.blockers.get(nn)||IDLE_BLOCKER;invariant$1(rn.state==="unblocked"&&an.state==="blocked"||rn.state==="blocked"&&an.state==="blocked"||rn.state==="blocked"&&an.state==="proceeding"||rn.state==="blocked"&&an.state==="unblocked"||rn.state==="proceeding"&&an.state==="unblocked","Invalid blocker state transition: "+rn.state+" -> "+an.state);let An=new Map(At.blockers);An.set(nn,an),Yt({blockers:An})}function cn(nn){let{currentLocation:an,nextLocation:rn,historyAction:An}=nn;if($t.size===0)return;$t.size>1&&warning$4(!1,"A router only supports one blocker at a time");let In=Array.from($t.entries()),[Hn,Pn]=In[In.length-1],Wn=At.blockers.get(Hn);if(!(Wn&&Wn.state==="proceeding")&&Pn({currentLocation:an,nextLocation:rn,historyAction:An}))return Hn}function ln(nn){let an=[];return Mt.forEach((rn,An)=>{(!nn||nn(An))&&(rn.cancel(),an.push(An),Mt.delete(An))}),an}function Mn(nn,an,rn){if(gt=nn,yt=an,_t=rn||null,!St&&At.navigation===IDLE_NAVIGATION){St=!0;let An=cr(At.location,At.matches);An!=null&&Yt({restoreScrollPosition:An})}return()=>{gt=null,yt=null,_t=null}}function $n(nn,an){return _t&&_t(nn,an.map(An=>convertRouteMatchToUiMatch(An,At.loaderData)))||nn.key}function rr(nn,an){if(gt&&yt){let rn=$n(nn,an);gt[rn]=yt()}}function cr(nn,an){if(gt){let rn=$n(nn,an),An=gt[rn];if(typeof An=="number")return An}return null}function mn(nn){tt={},dt=convertRoutesToDataRoutes(nn,et,void 0,tt)}return Pt={get basename(){return ht},get future(){return ft},get state(){return At},get routes(){return ot},get window(){return i},initialize:Vt,subscribe:Xt,enableScrollRestoration:Mn,navigate:gn,fetch:Fn,revalidate:yn,createHref:nn=>o.history.createHref(nn),encodeLocation:nn=>o.history.encodeLocation(nn),getFetcher:Ln,deleteFetcher:Jn,dispose:zt,getBlocker:zn,deleteBlocker:qn,_internalFetchControllers:Wt,_internalActiveDeferreds:Mt,_internalSetRoutes:mn},Pt}function isSubmissionNavigation(o){return o!=null&&("formData"in o&&o.formData!=null||"body"in o&&o.body!==void 0)}function normalizeTo(o,i,s,a,et,tt,ot,dt){let ht,ft;if(ot){ht=[];for(let mt of i)if(ht.push(mt),mt.route.id===ot){ft=mt;break}}else ht=i,ft=i[i.length-1];let pt=resolveTo(et||".",getResolveToMatches(ht,tt),stripBasename(o.pathname,s)||o.pathname,dt==="path");return et==null&&(pt.search=o.search,pt.hash=o.hash),(et==null||et===""||et===".")&&ft&&ft.route.index&&!hasNakedIndexQuery(pt.search)&&(pt.search=pt.search?pt.search.replace(/^\?/,"?index&"):"?index"),a&&s!=="/"&&(pt.pathname=pt.pathname==="/"?s:joinPaths([s,pt.pathname])),createPath(pt)}function normalizeNavigateOptions(o,i,s,a){if(!a||!isSubmissionNavigation(a))return{path:s};if(a.formMethod&&!isValidMethod(a.formMethod))return{path:s,error:getInternalRouterError(405,{method:a.formMethod})};let et=()=>({path:s,error:getInternalRouterError(400,{type:"invalid-body"})}),tt=a.formMethod||"get",ot=o?tt.toUpperCase():tt.toLowerCase(),dt=stripHashFromPath(s);if(a.body!==void 0){if(a.formEncType==="text/plain"){if(!isMutationMethod(ot))return et();let gt=typeof a.body=="string"?a.body:a.body instanceof FormData||a.body instanceof URLSearchParams?Array.from(a.body.entries()).reduce((_t,yt)=>{let[St,Et]=yt;return""+_t+St+"="+Et+`
`},""):String(a.body);return{path:s,submission:{formMethod:ot,formAction:dt,formEncType:a.formEncType,formData:void 0,json:void 0,text:gt}}}else if(a.formEncType==="application/json"){if(!isMutationMethod(ot))return et();try{let gt=typeof a.body=="string"?JSON.parse(a.body):a.body;return{path:s,submission:{formMethod:ot,formAction:dt,formEncType:a.formEncType,formData:void 0,json:gt,text:void 0}}}catch{return et()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let ht,ft;if(a.formData)ht=convertFormDataToSearchParams(a.formData),ft=a.formData;else if(a.body instanceof FormData)ht=convertFormDataToSearchParams(a.body),ft=a.body;else if(a.body instanceof URLSearchParams)ht=a.body,ft=convertSearchParamsToFormData(ht);else if(a.body==null)ht=new URLSearchParams,ft=new FormData;else try{ht=new URLSearchParams(a.body),ft=convertSearchParamsToFormData(ht)}catch{return et()}let pt={formMethod:ot,formAction:dt,formEncType:a&&a.formEncType||"application/x-www-form-urlencoded",formData:ft,json:void 0,text:void 0};if(isMutationMethod(pt.formMethod))return{path:s,submission:pt};let mt=parsePath(s);return i&&mt.search&&hasNakedIndexQuery(mt.search)&&ht.append("index",""),mt.search="?"+ht,{path:createPath(mt),submission:pt}}function getLoaderMatchesUntilBoundary(o,i){let s=o;if(i){let a=o.findIndex(et=>et.route.id===i);a>=0&&(s=o.slice(0,a))}return s}function getMatchesToLoad(o,i,s,a,et,tt,ot,dt,ht,ft,pt,mt,gt,_t,yt,St){let Et=St?Object.values(St)[0]:yt?Object.values(yt)[0]:void 0,vt=o.createURL(i.location),bt=o.createURL(et),Tt=St?Object.keys(St)[0]:void 0,Pt=getLoaderMatchesUntilBoundary(s,Tt).filter((xt,Ot)=>{if(tt)return isUnhydratedRoute(i,xt.route);if(xt.route.lazy)return!0;if(xt.route.loader==null)return!1;if(isNewLoader(i.loaderData,i.matches[Ot],xt)||dt.some(Nt=>Nt===xt.route.id))return!0;let Rt=i.matches[Ot],Dt=xt;return shouldRevalidateLoader(xt,_extends$A({currentUrl:vt,currentParams:Rt.params,nextUrl:bt,nextParams:Dt.params},a,{actionResult:Et,defaultShouldRevalidate:ot||vt.pathname+vt.search===bt.pathname+bt.search||vt.search!==bt.search||isNewRouteInstance(Rt,Dt)}))}),At=[];return pt.forEach((xt,Ot)=>{if(tt||!s.some(qt=>qt.route.id===xt.routeId)||ft.has(Ot))return;let Rt=matchRoutes(gt,xt.path,_t);if(!Rt){At.push({key:Ot,routeId:xt.routeId,path:xt.path,matches:null,match:null,controller:null});return}let Dt=i.fetchers.get(Ot),Nt=getTargetMatch(Rt,xt.path),Kt=!1;mt.has(Ot)?Kt=!1:ht.includes(Ot)?Kt=!0:Dt&&Dt.state!=="idle"&&Dt.data===void 0?Kt=ot:Kt=shouldRevalidateLoader(Nt,_extends$A({currentUrl:vt,currentParams:i.matches[i.matches.length-1].params,nextUrl:bt,nextParams:s[s.length-1].params},a,{actionResult:Et,defaultShouldRevalidate:ot})),Kt&&At.push({key:Ot,routeId:xt.routeId,path:xt.path,matches:Rt,match:Nt,controller:new AbortController})}),[Pt,At]}function isUnhydratedRoute(o,i){return i.loader?i.loader.hydrate?!0:o.loaderData[i.id]===void 0&&(!o.errors||o.errors[i.id]===void 0):!1}function isNewLoader(o,i,s){let a=!i||s.route.id!==i.route.id,et=o[s.route.id]===void 0;return a||et}function isNewRouteInstance(o,i){let s=o.route.path;return o.pathname!==i.pathname||s!=null&&s.endsWith("*")&&o.params["*"]!==i.params["*"]}function shouldRevalidateLoader(o,i){if(o.route.shouldRevalidate){let s=o.route.shouldRevalidate(i);if(typeof s=="boolean")return s}return i.defaultShouldRevalidate}async function loadLazyRouteModule(o,i,s){if(!o.lazy)return;let a=await o.lazy();if(!o.lazy)return;let et=s[o.id];invariant$1(et,"No route found in manifest");let tt={};for(let ot in a){let ht=et[ot]!==void 0&&ot!=="hasErrorBoundary";warning$4(!ht,'Route "'+et.id+'" has a static property "'+ot+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+ot+'" will be ignored.')),!ht&&!immutableRouteKeys.has(ot)&&(tt[ot]=a[ot])}Object.assign(et,tt),Object.assign(et,_extends$A({},i(et),{lazy:void 0}))}async function callLoaderOrAction(o,i,s,a,et,tt,ot,dt,ht){ht===void 0&&(ht={});let ft,pt,mt,gt=St=>{let Et,vt=new Promise((bt,Tt)=>Et=Tt);return mt=()=>Et(),i.signal.addEventListener("abort",mt),Promise.race([St({request:i,params:s.params,context:ht.requestContext}),vt])};try{let St=s.route[o];if(s.route.lazy)if(St){let Et,vt=await Promise.all([gt(St).catch(bt=>{Et=bt}),loadLazyRouteModule(s.route,tt,et)]);if(Et)throw Et;pt=vt[0]}else if(await loadLazyRouteModule(s.route,tt,et),St=s.route[o],St)pt=await gt(St);else if(o==="action"){let Et=new URL(i.url),vt=Et.pathname+Et.search;throw getInternalRouterError(405,{method:i.method,pathname:vt,routeId:s.route.id})}else return{type:ResultType.data,data:void 0};else if(St)pt=await gt(St);else{let Et=new URL(i.url),vt=Et.pathname+Et.search;throw getInternalRouterError(404,{pathname:vt})}invariant$1(pt!==void 0,"You defined "+(o==="action"?"an action":"a loader")+" for route "+('"'+s.route.id+"\" but didn't return anything from your `"+o+"` ")+"function. Please return a value or `null`.")}catch(St){ft=ResultType.error,pt=St}finally{mt&&i.signal.removeEventListener("abort",mt)}if(isResponse(pt)){let St=pt.status;if(redirectStatusCodes.has(St)){let vt=pt.headers.get("Location");if(invariant$1(vt,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX$1.test(vt))vt=normalizeTo(new URL(i.url),a.slice(0,a.indexOf(s)+1),ot,!0,vt,dt);else if(!ht.isStaticRequest){let bt=new URL(i.url),Tt=vt.startsWith("//")?new URL(bt.protocol+vt):new URL(vt),wt=stripBasename(Tt.pathname,ot)!=null;Tt.origin===bt.origin&&wt&&(vt=Tt.pathname+Tt.search+Tt.hash)}if(ht.isStaticRequest)throw pt.headers.set("Location",vt),pt;return{type:ResultType.redirect,status:St,location:vt,revalidate:pt.headers.get("X-Remix-Revalidate")!==null,reloadDocument:pt.headers.get("X-Remix-Reload-Document")!==null}}if(ht.isRouteRequest)throw{type:ft===ResultType.error?ResultType.error:ResultType.data,response:pt};let Et;try{let vt=pt.headers.get("Content-Type");vt&&/\bapplication\/json\b/.test(vt)?Et=await pt.json():Et=await pt.text()}catch(vt){return{type:ResultType.error,error:vt}}return ft===ResultType.error?{type:ft,error:new ErrorResponseImpl(St,pt.statusText,Et),headers:pt.headers}:{type:ResultType.data,data:Et,statusCode:pt.status,headers:pt.headers}}if(ft===ResultType.error)return{type:ft,error:pt};if(isDeferredData(pt)){var _t,yt;return{type:ResultType.deferred,deferredData:pt,statusCode:(_t=pt.init)==null?void 0:_t.status,headers:((yt=pt.init)==null?void 0:yt.headers)&&new Headers(pt.init.headers)}}return{type:ResultType.data,data:pt}}function createClientSideRequest(o,i,s,a){let et=o.createURL(stripHashFromPath(i)).toString(),tt={signal:s};if(a&&isMutationMethod(a.formMethod)){let{formMethod:ot,formEncType:dt}=a;tt.method=ot.toUpperCase(),dt==="application/json"?(tt.headers=new Headers({"Content-Type":dt}),tt.body=JSON.stringify(a.json)):dt==="text/plain"?tt.body=a.text:dt==="application/x-www-form-urlencoded"&&a.formData?tt.body=convertFormDataToSearchParams(a.formData):tt.body=a.formData}return new Request(et,tt)}function convertFormDataToSearchParams(o){let i=new URLSearchParams;for(let[s,a]of o.entries())i.append(s,typeof a=="string"?a:a.name);return i}function convertSearchParamsToFormData(o){let i=new FormData;for(let[s,a]of o.entries())i.append(s,a);return i}function processRouteLoaderData(o,i,s,a,et){let tt={},ot=null,dt,ht=!1,ft={};return s.forEach((pt,mt)=>{let gt=i[mt].route.id;if(invariant$1(!isRedirectResult(pt),"Cannot handle redirect results in processLoaderData"),isErrorResult(pt)){let _t=findNearestBoundary(o,gt),yt=pt.error;a&&(yt=Object.values(a)[0],a=void 0),ot=ot||{},ot[_t.route.id]==null&&(ot[_t.route.id]=yt),tt[gt]=void 0,ht||(ht=!0,dt=isRouteErrorResponse(pt.error)?pt.error.status:500),pt.headers&&(ft[gt]=pt.headers)}else isDeferredResult(pt)?(et.set(gt,pt.deferredData),tt[gt]=pt.deferredData.data):tt[gt]=pt.data,pt.statusCode!=null&&pt.statusCode!==200&&!ht&&(dt=pt.statusCode),pt.headers&&(ft[gt]=pt.headers)}),a&&(ot=a,tt[Object.keys(a)[0]]=void 0),{loaderData:tt,errors:ot,statusCode:dt||200,loaderHeaders:ft}}function processLoaderData(o,i,s,a,et,tt,ot,dt){let{loaderData:ht,errors:ft}=processRouteLoaderData(i,s,a,et,dt);for(let pt=0;pt<tt.length;pt++){let{key:mt,match:gt,controller:_t}=tt[pt];invariant$1(ot!==void 0&&ot[pt]!==void 0,"Did not find corresponding fetcher result");let yt=ot[pt];if(!(_t&&_t.signal.aborted))if(isErrorResult(yt)){let St=findNearestBoundary(o.matches,gt==null?void 0:gt.route.id);ft&&ft[St.route.id]||(ft=_extends$A({},ft,{[St.route.id]:yt.error})),o.fetchers.delete(mt)}else if(isRedirectResult(yt))invariant$1(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(yt))invariant$1(!1,"Unhandled fetcher deferred data");else{let St=getDoneFetcher(yt.data);o.fetchers.set(mt,St)}}return{loaderData:ht,errors:ft}}function mergeLoaderData(o,i,s,a){let et=_extends$A({},i);for(let tt of s){let ot=tt.route.id;if(i.hasOwnProperty(ot)?i[ot]!==void 0&&(et[ot]=i[ot]):o[ot]!==void 0&&tt.route.loader&&(et[ot]=o[ot]),a&&a.hasOwnProperty(ot))break}return et}function findNearestBoundary(o,i){return(i?o.slice(0,o.findIndex(a=>a.route.id===i)+1):[...o]).reverse().find(a=>a.route.hasErrorBoundary===!0)||o[0]}function getShortCircuitMatches(o){let i=o.length===1?o[0]:o.find(s=>s.index||!s.path||s.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:i}],route:i}}function getInternalRouterError(o,i){let{pathname:s,routeId:a,method:et,type:tt}=i===void 0?{}:i,ot="Unknown Server Error",dt="Unknown @remix-run/router error";return o===400?(ot="Bad Request",et&&s&&a?dt="You made a "+et+' request to "'+s+'" but '+('did not provide a `loader` for route "'+a+'", ')+"so there is no way to handle the request.":tt==="defer-action"?dt="defer() is not supported in actions":tt==="invalid-body"&&(dt="Unable to encode submission body")):o===403?(ot="Forbidden",dt='Route "'+a+'" does not match URL "'+s+'"'):o===404?(ot="Not Found",dt='No route matches URL "'+s+'"'):o===405&&(ot="Method Not Allowed",et&&s&&a?dt="You made a "+et.toUpperCase()+' request to "'+s+'" but '+('did not provide an `action` for route "'+a+'", ')+"so there is no way to handle the request.":et&&(dt='Invalid request method "'+et.toUpperCase()+'"')),new ErrorResponseImpl(o||500,ot,new Error(dt),!0)}function findRedirect(o){for(let i=o.length-1;i>=0;i--){let s=o[i];if(isRedirectResult(s))return{result:s,idx:i}}}function stripHashFromPath(o){let i=typeof o=="string"?parsePath(o):o;return createPath(_extends$A({},i,{hash:""}))}function isHashChangeOnly(o,i){return o.pathname!==i.pathname||o.search!==i.search?!1:o.hash===""?i.hash!=="":o.hash===i.hash?!0:i.hash!==""}function isDeferredResult(o){return o.type===ResultType.deferred}function isErrorResult(o){return o.type===ResultType.error}function isRedirectResult(o){return(o&&o.type)===ResultType.redirect}function isDeferredData(o){let i=o;return i&&typeof i=="object"&&typeof i.data=="object"&&typeof i.subscribe=="function"&&typeof i.cancel=="function"&&typeof i.resolveData=="function"}function isResponse(o){return o!=null&&typeof o.status=="number"&&typeof o.statusText=="string"&&typeof o.headers=="object"&&typeof o.body<"u"}function isValidMethod(o){return validRequestMethods.has(o.toLowerCase())}function isMutationMethod(o){return validMutationMethods.has(o.toLowerCase())}async function resolveDeferredResults(o,i,s,a,et,tt){for(let ot=0;ot<s.length;ot++){let dt=s[ot],ht=i[ot];if(!ht)continue;let ft=o.find(mt=>mt.route.id===ht.route.id),pt=ft!=null&&!isNewRouteInstance(ft,ht)&&(tt&&tt[ht.route.id])!==void 0;if(isDeferredResult(dt)&&(et||pt)){let mt=a[ot];invariant$1(mt,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(dt,mt,et).then(gt=>{gt&&(s[ot]=gt||s[ot])})}}}async function resolveDeferredData(o,i,s){if(s===void 0&&(s=!1),!await o.deferredData.resolveData(i)){if(s)try{return{type:ResultType.data,data:o.deferredData.unwrappedData}}catch(et){return{type:ResultType.error,error:et}}return{type:ResultType.data,data:o.deferredData.data}}}function hasNakedIndexQuery(o){return new URLSearchParams(o).getAll("index").some(i=>i==="")}function getTargetMatch(o,i){let s=typeof i=="string"?parsePath(i).search:i.search;if(o[o.length-1].route.index&&hasNakedIndexQuery(s||""))return o[o.length-1];let a=getPathContributingMatches(o);return a[a.length-1]}function getSubmissionFromNavigation(o){let{formMethod:i,formAction:s,formEncType:a,text:et,formData:tt,json:ot}=o;if(!(!i||!s||!a)){if(et!=null)return{formMethod:i,formAction:s,formEncType:a,formData:void 0,json:void 0,text:et};if(tt!=null)return{formMethod:i,formAction:s,formEncType:a,formData:tt,json:void 0,text:void 0};if(ot!==void 0)return{formMethod:i,formAction:s,formEncType:a,formData:void 0,json:ot,text:void 0}}}function getLoadingNavigation(o,i){return i?{state:"loading",location:o,formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text}:{state:"loading",location:o,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(o,i){return{state:"submitting",location:o,formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text}}function getLoadingFetcher(o,i){return o?{state:"loading",formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text,data:i}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function getSubmittingFetcher(o,i){return{state:"submitting",formMethod:o.formMethod,formAction:o.formAction,formEncType:o.formEncType,formData:o.formData,json:o.json,text:o.text,data:i?i.data:void 0}}function getDoneFetcher(o){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:o}}function restoreAppliedTransitions(o,i){try{let s=o.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(s){let a=JSON.parse(s);for(let[et,tt]of Object.entries(a||{}))tt&&Array.isArray(tt)&&i.set(et,new Set(tt||[]))}}catch{}}function persistAppliedTransitions(o,i){if(i.size>0){let s={};for(let[a,et]of i)s[a]=[...et];try{o.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(s))}catch(a){warning$4(!1,"Failed to save applied view transitions in sessionStorage ("+a+").")}}}/**
 * React Router v6.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$z(){return _extends$z=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$z.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useHref(o,i){let{relative:s}=i===void 0?{}:i;useInRouterContext()||invariant$1(!1);let{basename:a,navigator:et}=reactExports.useContext(NavigationContext),{hash:tt,pathname:ot,search:dt}=useResolvedPath(o,{relative:s}),ht=ot;return a!=="/"&&(ht=ot==="/"?a:joinPaths([a,ot])),et.createHref({pathname:ht,search:dt,hash:tt})}function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useIsomorphicLayoutEffect$1(o){reactExports.useContext(NavigationContext).static||reactExports.useLayoutEffect(o)}function useNavigate(){let{isDataRoute:o}=reactExports.useContext(RouteContext);return o?useNavigateStable():useNavigateUnstable()}function useNavigateUnstable(){useInRouterContext()||invariant$1(!1);let o=reactExports.useContext(DataRouterContext),{basename:i,future:s,navigator:a}=reactExports.useContext(NavigationContext),{matches:et}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),ot=JSON.stringify(getResolveToMatches(et,s.v7_relativeSplatPath)),dt=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{dt.current=!0}),reactExports.useCallback(function(ft,pt){if(pt===void 0&&(pt={}),!dt.current)return;if(typeof ft=="number"){a.go(ft);return}let mt=resolveTo(ft,JSON.parse(ot),tt,pt.relative==="path");o==null&&i!=="/"&&(mt.pathname=mt.pathname==="/"?i:joinPaths([i,mt.pathname])),(pt.replace?a.replace:a.push)(mt,pt.state,pt)},[i,a,ot,tt,o])}function useResolvedPath(o,i){let{relative:s}=i===void 0?{}:i,{future:a}=reactExports.useContext(NavigationContext),{matches:et}=reactExports.useContext(RouteContext),{pathname:tt}=useLocation(),ot=JSON.stringify(getResolveToMatches(et,a.v7_relativeSplatPath));return reactExports.useMemo(()=>resolveTo(o,JSON.parse(ot),tt,s==="path"),[o,ot,tt,s])}function useRoutesImpl(o,i,s,a){useInRouterContext()||invariant$1(!1);let{navigator:et}=reactExports.useContext(NavigationContext),{matches:tt}=reactExports.useContext(RouteContext),ot=tt[tt.length-1],dt=ot?ot.params:{};ot&&ot.pathname;let ht=ot?ot.pathnameBase:"/";ot&&ot.route;let ft=useLocation(),pt;if(i){var mt;let Et=typeof i=="string"?parsePath(i):i;ht==="/"||(mt=Et.pathname)!=null&&mt.startsWith(ht)||invariant$1(!1),pt=Et}else pt=ft;let gt=pt.pathname||"/",_t=ht==="/"?gt:gt.slice(ht.length)||"/",yt=matchRoutes(o,{pathname:_t}),St=_renderMatches(yt&&yt.map(Et=>Object.assign({},Et,{params:Object.assign({},dt,Et.params),pathname:joinPaths([ht,et.encodeLocation?et.encodeLocation(Et.pathname).pathname:Et.pathname]),pathnameBase:Et.pathnameBase==="/"?ht:joinPaths([ht,et.encodeLocation?et.encodeLocation(Et.pathnameBase).pathname:Et.pathnameBase])})),tt,s,a);return i&&St?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$z({pathname:"/",search:"",hash:"",state:null,key:"default"},pt),navigationType:Action.Pop}},St):St}function DefaultErrorComponent(){let o=useRouteError(),i=isRouteErrorResponse(o)?o.status+" "+o.statusText:o instanceof Error?o.message:JSON.stringify(o),s=o instanceof Error?o.stack:null,et={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},tt=null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},i),s?reactExports.createElement("pre",{style:et},s):null,tt)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(i){super(i),this.state={location:i.location,revalidation:i.revalidation,error:i.error}}static getDerivedStateFromError(i){return{error:i}}static getDerivedStateFromProps(i,s){return s.location!==i.location||s.revalidation!=="idle"&&i.revalidation==="idle"?{error:i.error,location:i.location,revalidation:i.revalidation}:{error:i.error!==void 0?i.error:s.error,location:s.location,revalidation:i.revalidation||s.revalidation}}componentDidCatch(i,s){console.error("React Router caught the following error during render",i,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(o){let{routeContext:i,match:s,children:a}=o,et=reactExports.useContext(DataRouterContext);return et&&et.static&&et.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(et.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:i},a)}function _renderMatches(o,i,s,a){var et;if(i===void 0&&(i=[]),s===void 0&&(s=null),a===void 0&&(a=null),o==null){var tt;if((tt=s)!=null&&tt.errors)o=s.matches;else return null}let ot=o,dt=(et=s)==null?void 0:et.errors;if(dt!=null){let pt=ot.findIndex(mt=>mt.route.id&&(dt==null?void 0:dt[mt.route.id]));pt>=0||invariant$1(!1),ot=ot.slice(0,Math.min(ot.length,pt+1))}let ht=!1,ft=-1;if(s&&a&&a.v7_partialHydration)for(let pt=0;pt<ot.length;pt++){let mt=ot[pt];if((mt.route.HydrateFallback||mt.route.hydrateFallbackElement)&&(ft=pt),mt.route.loader&&mt.route.id&&s.loaderData[mt.route.id]===void 0&&(!s.errors||s.errors[mt.route.id]===void 0)){ht=!0,ft>=0?ot=ot.slice(0,ft+1):ot=[ot[0]];break}}return ot.reduceRight((pt,mt,gt)=>{let _t,yt=!1,St=null,Et=null;s&&(_t=dt&&mt.route.id?dt[mt.route.id]:void 0,St=mt.route.errorElement||defaultErrorElement,ht&&(ft<0&&gt===0?(warningOnce$1("route-fallback",!1),yt=!0,Et=null):ft===gt&&(yt=!0,Et=mt.route.hydrateFallbackElement||null)));let vt=i.concat(ot.slice(0,gt+1)),bt=()=>{let Tt;return _t?Tt=St:yt?Tt=Et:mt.route.Component?Tt=reactExports.createElement(mt.route.Component,null):mt.route.element?Tt=mt.route.element:Tt=pt,reactExports.createElement(RenderedRoute,{match:mt,routeContext:{outlet:pt,matches:vt,isDataRoute:s!=null},children:Tt})};return s&&(mt.route.ErrorBoundary||mt.route.errorElement||gt===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:St,error:_t,children:bt(),routeContext:{outlet:null,matches:vt,isDataRoute:!0}}):bt()},null)}var DataRouterHook$1=function(o){return o.UseBlocker="useBlocker",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o}(DataRouterHook$1||{}),DataRouterStateHook$1=function(o){return o.UseBlocker="useBlocker",o.UseLoaderData="useLoaderData",o.UseActionData="useActionData",o.UseRouteError="useRouteError",o.UseNavigation="useNavigation",o.UseRouteLoaderData="useRouteLoaderData",o.UseMatches="useMatches",o.UseRevalidator="useRevalidator",o.UseNavigateStable="useNavigate",o.UseRouteId="useRouteId",o}(DataRouterStateHook$1||{});function useDataRouterContext(o){let i=reactExports.useContext(DataRouterContext);return i||invariant$1(!1),i}function useDataRouterState(o){let i=reactExports.useContext(DataRouterStateContext);return i||invariant$1(!1),i}function useRouteContext(o){let i=reactExports.useContext(RouteContext);return i||invariant$1(!1),i}function useCurrentRouteId(o){let i=useRouteContext(),s=i.matches[i.matches.length-1];return s.route.id||invariant$1(!1),s.route.id}function useRouteError(){var o;let i=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),a=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return i!==void 0?i:(o=s.errors)==null?void 0:o[a]}function useNavigateStable(){let{router:o}=useDataRouterContext(DataRouterHook$1.UseNavigateStable),i=useCurrentRouteId(DataRouterStateHook$1.UseNavigateStable),s=reactExports.useRef(!1);return useIsomorphicLayoutEffect$1(()=>{s.current=!0}),reactExports.useCallback(function(et,tt){tt===void 0&&(tt={}),s.current&&(typeof et=="number"?o.navigate(et):o.navigate(et,_extends$z({fromRouteId:i},tt)))},[o,i])}const alreadyWarned={};function warningOnce$1(o,i,s){!i&&!alreadyWarned[o]&&(alreadyWarned[o]=!0)}function Router(o){let{basename:i="/",children:s=null,location:a,navigationType:et=Action.Pop,navigator:tt,static:ot=!1,future:dt}=o;useInRouterContext()&&invariant$1(!1);let ht=i.replace(/^\/*/,"/"),ft=reactExports.useMemo(()=>({basename:ht,navigator:tt,static:ot,future:_extends$z({v7_relativeSplatPath:!1},dt)}),[ht,dt,tt,ot]);typeof a=="string"&&(a=parsePath(a));let{pathname:pt="/",search:mt="",hash:gt="",state:_t=null,key:yt="default"}=a,St=reactExports.useMemo(()=>{let Et=stripBasename(pt,ht);return Et==null?null:{location:{pathname:Et,search:mt,hash:gt,state:_t,key:yt},navigationType:et}},[ht,pt,mt,gt,_t,yt,et]);return St==null?null:reactExports.createElement(NavigationContext.Provider,{value:ft},reactExports.createElement(LocationContext.Provider,{children:s,value:St}))}new Promise(()=>{});function mapRouteProperties(o){let i={hasErrorBoundary:o.ErrorBoundary!=null||o.errorElement!=null};return o.Component&&Object.assign(i,{element:reactExports.createElement(o.Component),Component:void 0}),o.HydrateFallback&&Object.assign(i,{hydrateFallbackElement:reactExports.createElement(o.HydrateFallback),HydrateFallback:void 0}),o.ErrorBoundary&&Object.assign(i,{errorElement:reactExports.createElement(o.ErrorBoundary),ErrorBoundary:void 0}),i}/**
 * React Router DOM v6.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$y(){return _extends$y=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$y.apply(this,arguments)}function _objectWithoutPropertiesLoose$z(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function isModifiedEvent(o){return!!(o.metaKey||o.altKey||o.ctrlKey||o.shiftKey)}function shouldProcessLinkClick(o,i){return o.button===0&&(!i||i==="_self")&&!isModifiedEvent(o)}const _excluded$I=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","unstable_viewTransition"];function createBrowserRouter(o,i){return createRouter({basename:i==null?void 0:i.basename,future:_extends$y({},i==null?void 0:i.future,{v7_prependBasename:!0}),history:createBrowserHistory({window:i==null?void 0:i.window}),hydrationData:(i==null?void 0:i.hydrationData)||parseHydrationData(),routes:o,mapRouteProperties,window:i==null?void 0:i.window}).initialize()}function parseHydrationData(){var o;let i=(o=window)==null?void 0:o.__staticRouterHydrationData;return i&&i.errors&&(i=_extends$y({},i,{errors:deserializeErrors(i.errors)})),i}function deserializeErrors(o){if(!o)return null;let i=Object.entries(o),s={};for(let[a,et]of i)if(et&&et.__type==="RouteErrorResponse")s[a]=new ErrorResponseImpl(et.status,et.statusText,et.data,et.internal===!0);else if(et&&et.__type==="Error"){if(et.__subType){let tt=window[et.__subType];if(typeof tt=="function")try{let ot=new tt(et.message);ot.stack="",s[a]=ot}catch{}}if(s[a]==null){let tt=new Error(et.message);tt.stack="",s[a]=tt}}else s[a]=et;return s}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM$1[FLUSH_SYNC];function startTransitionSafe(o){startTransitionImpl?startTransitionImpl(o):o()}function flushSyncSafe(o){flushSyncImpl?flushSyncImpl(o):o()}let Deferred$1=class{constructor(){this.status="pending",this.promise=new Promise((i,s)=>{this.resolve=a=>{this.status==="pending"&&(this.status="resolved",i(a))},this.reject=a=>{this.status==="pending"&&(this.status="rejected",s(a))}})}};function RouterProvider(o){let{fallbackElement:i,router:s,future:a}=o,[et,tt]=reactExports.useState(s.state),[ot,dt]=reactExports.useState(),[ht,ft]=reactExports.useState({isTransitioning:!1}),[pt,mt]=reactExports.useState(),[gt,_t]=reactExports.useState(),[yt,St]=reactExports.useState(),Et=reactExports.useRef(new Map),{v7_startTransition:vt}=a||{},bt=reactExports.useCallback(xt=>{vt?startTransitionSafe(xt):xt()},[vt]),Tt=reactExports.useCallback((xt,Ot)=>{let{deletedFetchers:Rt,unstable_flushSync:Dt,unstable_viewTransitionOpts:Nt}=Ot;Rt.forEach(qt=>Et.current.delete(qt)),xt.fetchers.forEach((qt,jt)=>{qt.data!==void 0&&Et.current.set(jt,qt.data)});let Kt=s.window==null||typeof s.window.document.startViewTransition!="function";if(!Nt||Kt){Dt?flushSyncSafe(()=>tt(xt)):bt(()=>tt(xt));return}if(Dt){flushSyncSafe(()=>{gt&&(pt&&pt.resolve(),gt.skipTransition()),ft({isTransitioning:!0,flushSync:!0,currentLocation:Nt.currentLocation,nextLocation:Nt.nextLocation})});let qt=s.window.document.startViewTransition(()=>{flushSyncSafe(()=>tt(xt))});qt.finished.finally(()=>{flushSyncSafe(()=>{mt(void 0),_t(void 0),dt(void 0),ft({isTransitioning:!1})})}),flushSyncSafe(()=>_t(qt));return}gt?(pt&&pt.resolve(),gt.skipTransition(),St({state:xt,currentLocation:Nt.currentLocation,nextLocation:Nt.nextLocation})):(dt(xt),ft({isTransitioning:!0,flushSync:!1,currentLocation:Nt.currentLocation,nextLocation:Nt.nextLocation}))},[s.window,gt,pt,Et,bt]);reactExports.useLayoutEffect(()=>s.subscribe(Tt),[s,Tt]),reactExports.useEffect(()=>{ht.isTransitioning&&!ht.flushSync&&mt(new Deferred$1)},[ht]),reactExports.useEffect(()=>{if(pt&&ot&&s.window){let xt=ot,Ot=pt.promise,Rt=s.window.document.startViewTransition(async()=>{bt(()=>tt(xt)),await Ot});Rt.finished.finally(()=>{mt(void 0),_t(void 0),dt(void 0),ft({isTransitioning:!1})}),_t(Rt)}},[bt,ot,pt,s.window]),reactExports.useEffect(()=>{pt&&ot&&et.location.key===ot.location.key&&pt.resolve()},[pt,gt,et.location,ot]),reactExports.useEffect(()=>{!ht.isTransitioning&&yt&&(dt(yt.state),ft({isTransitioning:!0,flushSync:!1,currentLocation:yt.currentLocation,nextLocation:yt.nextLocation}),St(void 0))},[ht.isTransitioning,yt]),reactExports.useEffect(()=>{},[]);let wt=reactExports.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:xt=>s.navigate(xt),push:(xt,Ot,Rt)=>s.navigate(xt,{state:Ot,preventScrollReset:Rt==null?void 0:Rt.preventScrollReset}),replace:(xt,Ot,Rt)=>s.navigate(xt,{replace:!0,state:Ot,preventScrollReset:Rt==null?void 0:Rt.preventScrollReset})}),[s]),Pt=s.basename||"/",At=reactExports.useMemo(()=>({router:s,navigator:wt,static:!1,basename:Pt}),[s,wt,Pt]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:At},reactExports.createElement(DataRouterStateContext.Provider,{value:et},reactExports.createElement(FetchersContext.Provider,{value:Et.current},reactExports.createElement(ViewTransitionContext.Provider,{value:ht},reactExports.createElement(Router,{basename:Pt,location:et.location,navigationType:et.historyAction,navigator:wt,future:{v7_relativeSplatPath:s.future.v7_relativeSplatPath}},et.initialized||s.future.v7_partialHydration?reactExports.createElement(DataRoutes,{routes:s.routes,future:s.future,state:et}):i))))),null)}function DataRoutes(o){let{routes:i,future:s,state:a}=o;return useRoutesImpl(i,void 0,a,s)}const isBrowser$2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Link=reactExports.forwardRef(function(i,s){let{onClick:a,relative:et,reloadDocument:tt,replace:ot,state:dt,target:ht,to:ft,preventScrollReset:pt,unstable_viewTransition:mt}=i,gt=_objectWithoutPropertiesLoose$z(i,_excluded$I),{basename:_t}=reactExports.useContext(NavigationContext),yt,St=!1;if(typeof ft=="string"&&ABSOLUTE_URL_REGEX.test(ft)&&(yt=ft,isBrowser$2))try{let Tt=new URL(window.location.href),wt=ft.startsWith("//")?new URL(Tt.protocol+ft):new URL(ft),Pt=stripBasename(wt.pathname,_t);wt.origin===Tt.origin&&Pt!=null?ft=Pt+wt.search+wt.hash:St=!0}catch{}let Et=useHref(ft,{relative:et}),vt=useLinkClickHandler(ft,{replace:ot,state:dt,target:ht,preventScrollReset:pt,relative:et,unstable_viewTransition:mt});function bt(Tt){a&&a(Tt),Tt.defaultPrevented||vt(Tt)}return reactExports.createElement("a",_extends$y({},gt,{href:yt||Et,onClick:St||tt?a:bt,ref:s,target:ht}))});var DataRouterHook;(function(o){o.UseScrollRestoration="useScrollRestoration",o.UseSubmit="useSubmit",o.UseSubmitFetcher="useSubmitFetcher",o.UseFetcher="useFetcher",o.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(o){o.UseFetcher="useFetcher",o.UseFetchers="useFetchers",o.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));function useLinkClickHandler(o,i){let{target:s,replace:a,state:et,preventScrollReset:tt,relative:ot,unstable_viewTransition:dt}=i===void 0?{}:i,ht=useNavigate(),ft=useLocation(),pt=useResolvedPath(o,{relative:ot});return reactExports.useCallback(mt=>{if(shouldProcessLinkClick(mt,s)){mt.preventDefault();let gt=a!==void 0?a:createPath(ft)===createPath(pt);ht(o,{replace:gt,state:et,preventScrollReset:tt,relative:ot,unstable_viewTransition:dt})}},[ft,ht,pt,a,et,s,o,tt,ot,dt])}function ErrorPage(){const o=useRouteError();return console.error(o),jsxRuntimeExports.jsxs("div",{id:"error-page",children:[jsxRuntimeExports.jsx("h1",{children:"Oops!"}),jsxRuntimeExports.jsx("p",{children:"Sorry, an unexpected error has occurred."}),jsxRuntimeExports.jsx("p",{children:jsxRuntimeExports.jsx("i",{children:o.statusText||o.message})})]})}var Subscribable=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(o){return this.listeners.add(o),this.onSubscribe(),()=>{this.listeners.delete(o),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},isServer=typeof window>"u"||"Deno"in window;function noop$6(){}function functionalUpdate(o,i){return typeof o=="function"?o(i):o}function isValidTimeout(o){return typeof o=="number"&&o>=0&&o!==1/0}function timeUntilStale(o,i){return Math.max(o+(i||0)-Date.now(),0)}function matchQuery(o,i){const{type:s="all",exact:a,fetchStatus:et,predicate:tt,queryKey:ot,stale:dt}=o;if(ot){if(a){if(i.queryHash!==hashQueryKeyByOptions(ot,i.options))return!1}else if(!partialMatchKey(i.queryKey,ot))return!1}if(s!=="all"){const ht=i.isActive();if(s==="active"&&!ht||s==="inactive"&&ht)return!1}return!(typeof dt=="boolean"&&i.isStale()!==dt||typeof et<"u"&&et!==i.state.fetchStatus||tt&&!tt(i))}function matchMutation(o,i){const{exact:s,status:a,predicate:et,mutationKey:tt}=o;if(tt){if(!i.options.mutationKey)return!1;if(s){if(hashKey(i.options.mutationKey)!==hashKey(tt))return!1}else if(!partialMatchKey(i.options.mutationKey,tt))return!1}return!(a&&i.state.status!==a||et&&!et(i))}function hashQueryKeyByOptions(o,i){return((i==null?void 0:i.queryKeyHashFn)||hashKey)(o)}function hashKey(o){return JSON.stringify(o,(i,s)=>isPlainObject(s)?Object.keys(s).sort().reduce((a,et)=>(a[et]=s[et],a),{}):s)}function partialMatchKey(o,i){return o===i?!0:typeof o!=typeof i?!1:o&&i&&typeof o=="object"&&typeof i=="object"?!Object.keys(i).some(s=>!partialMatchKey(o[s],i[s])):!1}function replaceEqualDeep(o,i){if(o===i)return o;const s=isPlainArray(o)&&isPlainArray(i);if(s||isPlainObject(o)&&isPlainObject(i)){const a=s?o.length:Object.keys(o).length,et=s?i:Object.keys(i),tt=et.length,ot=s?[]:{};let dt=0;for(let ht=0;ht<tt;ht++){const ft=s?ht:et[ht];ot[ft]=replaceEqualDeep(o[ft],i[ft]),ot[ft]===o[ft]&&dt++}return a===tt&&dt===a?o:ot}return i}function isPlainArray(o){return Array.isArray(o)&&o.length===Object.keys(o).length}function isPlainObject(o){if(!hasObjectPrototype(o))return!1;const i=o.constructor;if(typeof i>"u")return!0;const s=i.prototype;return!(!hasObjectPrototype(s)||!s.hasOwnProperty("isPrototypeOf"))}function hasObjectPrototype(o){return Object.prototype.toString.call(o)==="[object Object]"}function sleep(o){return new Promise(i=>{setTimeout(i,o)})}function scheduleMicrotask(o){sleep(0).then(o)}function replaceData(o,i,s){return typeof s.structuralSharing=="function"?s.structuralSharing(o,i):s.structuralSharing!==!1?replaceEqualDeep(o,i):i}function addToEnd(o,i,s=0){const a=[...o,i];return s&&a.length>s?a.slice(1):a}function addToStart(o,i,s=0){const a=[i,...o];return s&&a.length>s?a.slice(0,-1):a}var Xr,Fr,lo,ga,FocusManager=(ga=class extends Subscribable{constructor(){super();tn(this,Xr,void 0);tn(this,Fr,void 0);tn(this,lo,void 0);pn(this,lo,i=>{if(!isServer&&window.addEventListener){const s=()=>i();return window.addEventListener("visibilitychange",s,!1),()=>{window.removeEventListener("visibilitychange",s)}}})}onSubscribe(){Ct(this,Fr)||this.setEventListener(Ct(this,lo))}onUnsubscribe(){var i;this.hasListeners()||((i=Ct(this,Fr))==null||i.call(this),pn(this,Fr,void 0))}setEventListener(i){var s;pn(this,lo,i),(s=Ct(this,Fr))==null||s.call(this),pn(this,Fr,i(a=>{typeof a=="boolean"?this.setFocused(a):this.onFocus()}))}setFocused(i){Ct(this,Xr)!==i&&(pn(this,Xr,i),this.onFocus())}onFocus(){this.listeners.forEach(i=>{i()})}isFocused(){var i;return typeof Ct(this,Xr)=="boolean"?Ct(this,Xr):((i=globalThis.document)==null?void 0:i.visibilityState)!=="hidden"}},Xr=new WeakMap,Fr=new WeakMap,lo=new WeakMap,ga),focusManager=new FocusManager,co,Vr,uo,_a,OnlineManager=(_a=class extends Subscribable{constructor(){super();tn(this,co,!0);tn(this,Vr,void 0);tn(this,uo,void 0);pn(this,uo,i=>{if(!isServer&&window.addEventListener){const s=()=>i(!0),a=()=>i(!1);return window.addEventListener("online",s,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",a)}}})}onSubscribe(){Ct(this,Vr)||this.setEventListener(Ct(this,uo))}onUnsubscribe(){var i;this.hasListeners()||((i=Ct(this,Vr))==null||i.call(this),pn(this,Vr,void 0))}setEventListener(i){var s;pn(this,uo,i),(s=Ct(this,Vr))==null||s.call(this),pn(this,Vr,i(this.setOnline.bind(this)))}setOnline(i){Ct(this,co)!==i&&(pn(this,co,i),this.listeners.forEach(a=>{a(i)}))}isOnline(){return Ct(this,co)}},co=new WeakMap,Vr=new WeakMap,uo=new WeakMap,_a),onlineManager=new OnlineManager;function defaultRetryDelay(o){return Math.min(1e3*2**o,3e4)}function canFetch(o){return(o??"online")==="online"?onlineManager.isOnline():!0}var CancelledError=class{constructor(o){this.revert=o==null?void 0:o.revert,this.silent=o==null?void 0:o.silent}};function isCancelledError(o){return o instanceof CancelledError}function createRetryer(o){let i=!1,s=0,a=!1,et,tt,ot;const dt=new Promise((Et,vt)=>{tt=Et,ot=vt}),ht=Et=>{var vt;a||(_t(new CancelledError(Et)),(vt=o.abort)==null||vt.call(o))},ft=()=>{i=!0},pt=()=>{i=!1},mt=()=>!focusManager.isFocused()||o.networkMode!=="always"&&!onlineManager.isOnline(),gt=Et=>{var vt;a||(a=!0,(vt=o.onSuccess)==null||vt.call(o,Et),et==null||et(),tt(Et))},_t=Et=>{var vt;a||(a=!0,(vt=o.onError)==null||vt.call(o,Et),et==null||et(),ot(Et))},yt=()=>new Promise(Et=>{var vt;et=bt=>{const Tt=a||!mt();return Tt&&Et(bt),Tt},(vt=o.onPause)==null||vt.call(o)}).then(()=>{var Et;et=void 0,a||(Et=o.onContinue)==null||Et.call(o)}),St=()=>{if(a)return;let Et;try{Et=o.fn()}catch(vt){Et=Promise.reject(vt)}Promise.resolve(Et).then(gt).catch(vt=>{var At;if(a)return;const bt=o.retry??(isServer?0:3),Tt=o.retryDelay??defaultRetryDelay,wt=typeof Tt=="function"?Tt(s,vt):Tt,Pt=bt===!0||typeof bt=="number"&&s<bt||typeof bt=="function"&&bt(s,vt);if(i||!Pt){_t(vt);return}s++,(At=o.onFail)==null||At.call(o,s,vt),sleep(wt).then(()=>{if(mt())return yt()}).then(()=>{i?_t(vt):St()})})};return canFetch(o.networkMode)?St():yt().then(St),{promise:dt,cancel:ht,continue:()=>(et==null?void 0:et())?dt:Promise.resolve(),cancelRetry:ft,continueRetry:pt}}function createNotifyManager(){let o=[],i=0,s=pt=>{pt()},a=pt=>{pt()};const et=pt=>{let mt;i++;try{mt=pt()}finally{i--,i||dt()}return mt},tt=pt=>{i?o.push(pt):scheduleMicrotask(()=>{s(pt)})},ot=pt=>(...mt)=>{tt(()=>{pt(...mt)})},dt=()=>{const pt=o;o=[],pt.length&&scheduleMicrotask(()=>{a(()=>{pt.forEach(mt=>{s(mt)})})})};return{batch:et,batchCalls:ot,schedule:tt,setNotifyFunction:pt=>{s=pt},setBatchNotifyFunction:pt=>{a=pt}}}var notifyManager=createNotifyManager(),Yr,_l,Removable=(_l=class{constructor(){tn(this,Yr,void 0)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),isValidTimeout(this.gcTime)&&pn(this,Yr,setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(o){this.gcTime=Math.max(this.gcTime||0,o??(isServer?1/0:5*60*1e3))}clearGcTimeout(){Ct(this,Yr)&&(clearTimeout(Ct(this,Yr)),pn(this,Yr,void 0))}},Yr=new WeakMap,_l),ho,fo,Sr,jr,Tr,yr,Io,Qr,po,Uo,Pr,Or,yl,Query$1=(yl=class extends Removable{constructor(s){super();tn(this,po);tn(this,Pr);tn(this,ho,void 0);tn(this,fo,void 0);tn(this,Sr,void 0);tn(this,jr,void 0);tn(this,Tr,void 0);tn(this,yr,void 0);tn(this,Io,void 0);tn(this,Qr,void 0);pn(this,Qr,!1),pn(this,Io,s.defaultOptions),dn(this,po,Uo).call(this,s.options),pn(this,yr,[]),pn(this,Sr,s.cache),this.queryKey=s.queryKey,this.queryHash=s.queryHash,pn(this,ho,s.state||getDefaultState$1(this.options)),this.state=Ct(this,ho),this.scheduleGc()}get meta(){return this.options.meta}optionalRemove(){!Ct(this,yr).length&&this.state.fetchStatus==="idle"&&Ct(this,Sr).remove(this)}setData(s,a){const et=replaceData(this.state.data,s,this.options);return dn(this,Pr,Or).call(this,{data:et,type:"success",dataUpdatedAt:a==null?void 0:a.updatedAt,manual:a==null?void 0:a.manual}),et}setState(s,a){dn(this,Pr,Or).call(this,{type:"setState",state:s,setStateOptions:a})}cancel(s){var et;const a=Ct(this,jr);return(et=Ct(this,Tr))==null||et.cancel(s),a?a.then(noop$6).catch(noop$6):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Ct(this,ho))}isActive(){return Ct(this,yr).some(s=>s.options.enabled!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated||!this.state.dataUpdatedAt||Ct(this,yr).some(s=>s.getCurrentResult().isStale)}isStaleByTime(s=0){return this.state.isInvalidated||!this.state.dataUpdatedAt||!timeUntilStale(this.state.dataUpdatedAt,s)}onFocus(){var a;const s=Ct(this,yr).find(et=>et.shouldFetchOnWindowFocus());s==null||s.refetch({cancelRefetch:!1}),(a=Ct(this,Tr))==null||a.continue()}onOnline(){var a;const s=Ct(this,yr).find(et=>et.shouldFetchOnReconnect());s==null||s.refetch({cancelRefetch:!1}),(a=Ct(this,Tr))==null||a.continue()}addObserver(s){Ct(this,yr).includes(s)||(Ct(this,yr).push(s),this.clearGcTimeout(),Ct(this,Sr).notify({type:"observerAdded",query:this,observer:s}))}removeObserver(s){Ct(this,yr).includes(s)&&(pn(this,yr,Ct(this,yr).filter(a=>a!==s)),Ct(this,yr).length||(Ct(this,Tr)&&(Ct(this,Qr)?Ct(this,Tr).cancel({revert:!0}):Ct(this,Tr).cancelRetry()),this.scheduleGc()),Ct(this,Sr).notify({type:"observerRemoved",query:this,observer:s}))}getObserversCount(){return Ct(this,yr).length}invalidate(){this.state.isInvalidated||dn(this,Pr,Or).call(this,{type:"invalidate"})}fetch(s,a){var pt,mt,gt,_t;if(this.state.fetchStatus!=="idle"){if(this.state.dataUpdatedAt&&(a!=null&&a.cancelRefetch))this.cancel({silent:!0});else if(Ct(this,jr))return(pt=Ct(this,Tr))==null||pt.continueRetry(),Ct(this,jr)}if(s&&dn(this,po,Uo).call(this,s),!this.options.queryFn){const yt=Ct(this,yr).find(St=>St.options.queryFn);yt&&dn(this,po,Uo).call(this,yt.options)}const et=new AbortController,tt={queryKey:this.queryKey,meta:this.meta},ot=yt=>{Object.defineProperty(yt,"signal",{enumerable:!0,get:()=>(pn(this,Qr,!0),et.signal)})};ot(tt);const dt=()=>this.options.queryFn?(pn(this,Qr,!1),this.options.persister?this.options.persister(this.options.queryFn,tt,this):this.options.queryFn(tt)):Promise.reject(new Error(`Missing queryFn: '${this.options.queryHash}'`)),ht={fetchOptions:a,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:dt};ot(ht),(mt=this.options.behavior)==null||mt.onFetch(ht,this),pn(this,fo,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((gt=ht.fetchOptions)==null?void 0:gt.meta))&&dn(this,Pr,Or).call(this,{type:"fetch",meta:(_t=ht.fetchOptions)==null?void 0:_t.meta});const ft=yt=>{var St,Et,vt,bt;isCancelledError(yt)&&yt.silent||dn(this,Pr,Or).call(this,{type:"error",error:yt}),isCancelledError(yt)||((Et=(St=Ct(this,Sr).config).onError)==null||Et.call(St,yt,this),(bt=(vt=Ct(this,Sr).config).onSettled)==null||bt.call(vt,this.state.data,yt,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return pn(this,Tr,createRetryer({fn:ht.fetchFn,abort:et.abort.bind(et),onSuccess:yt=>{var St,Et,vt,bt;if(typeof yt>"u"){ft(new Error(`${this.queryHash} data is undefined`));return}this.setData(yt),(Et=(St=Ct(this,Sr).config).onSuccess)==null||Et.call(St,yt,this),(bt=(vt=Ct(this,Sr).config).onSettled)==null||bt.call(vt,yt,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:ft,onFail:(yt,St)=>{dn(this,Pr,Or).call(this,{type:"failed",failureCount:yt,error:St})},onPause:()=>{dn(this,Pr,Or).call(this,{type:"pause"})},onContinue:()=>{dn(this,Pr,Or).call(this,{type:"continue"})},retry:ht.options.retry,retryDelay:ht.options.retryDelay,networkMode:ht.options.networkMode})),pn(this,jr,Ct(this,Tr).promise),Ct(this,jr)}},ho=new WeakMap,fo=new WeakMap,Sr=new WeakMap,jr=new WeakMap,Tr=new WeakMap,yr=new WeakMap,Io=new WeakMap,Qr=new WeakMap,po=new WeakSet,Uo=function(s){this.options={...Ct(this,Io),...s},this.updateGcTime(this.options.gcTime)},Pr=new WeakSet,Or=function(s){const a=et=>{switch(s.type){case"failed":return{...et,fetchFailureCount:s.failureCount,fetchFailureReason:s.error};case"pause":return{...et,fetchStatus:"paused"};case"continue":return{...et,fetchStatus:"fetching"};case"fetch":return{...et,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:s.meta??null,fetchStatus:canFetch(this.options.networkMode)?"fetching":"paused",...!et.dataUpdatedAt&&{error:null,status:"pending"}};case"success":return{...et,data:s.data,dataUpdateCount:et.dataUpdateCount+1,dataUpdatedAt:s.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!s.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const tt=s.error;return isCancelledError(tt)&&tt.revert&&Ct(this,fo)?{...Ct(this,fo),fetchStatus:"idle"}:{...et,error:tt,errorUpdateCount:et.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:et.fetchFailureCount+1,fetchFailureReason:tt,fetchStatus:"idle",status:"error"};case"invalidate":return{...et,isInvalidated:!0};case"setState":return{...et,...s.state}}};this.state=a(this.state),notifyManager.batch(()=>{Ct(this,yr).forEach(et=>{et.onQueryUpdate()}),Ct(this,Sr).notify({query:this,type:"updated",action:s})})},yl);function getDefaultState$1(o){const i=typeof o.initialData=="function"?o.initialData():o.initialData,s=typeof i<"u",a=s?typeof o.initialDataUpdatedAt=="function"?o.initialDataUpdatedAt():o.initialDataUpdatedAt:0;return{data:i,dataUpdateCount:0,dataUpdatedAt:s?a??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:s?"success":"pending",fetchStatus:"idle"}}var Cr,El,QueryCache=(El=class extends Subscribable{constructor(i={}){super();tn(this,Cr,void 0);this.config=i,pn(this,Cr,new Map)}build(i,s,a){const et=s.queryKey,tt=s.queryHash??hashQueryKeyByOptions(et,s);let ot=this.get(tt);return ot||(ot=new Query$1({cache:this,queryKey:et,queryHash:tt,options:i.defaultQueryOptions(s),state:a,defaultOptions:i.getQueryDefaults(et)}),this.add(ot)),ot}add(i){Ct(this,Cr).has(i.queryHash)||(Ct(this,Cr).set(i.queryHash,i),this.notify({type:"added",query:i}))}remove(i){const s=Ct(this,Cr).get(i.queryHash);s&&(i.destroy(),s===i&&Ct(this,Cr).delete(i.queryHash),this.notify({type:"removed",query:i}))}clear(){notifyManager.batch(()=>{this.getAll().forEach(i=>{this.remove(i)})})}get(i){return Ct(this,Cr).get(i)}getAll(){return[...Ct(this,Cr).values()]}find(i){const s={exact:!0,...i};return this.getAll().find(a=>matchQuery(s,a))}findAll(i={}){const s=this.getAll();return Object.keys(i).length>0?s.filter(a=>matchQuery(i,a)):s}notify(i){notifyManager.batch(()=>{this.listeners.forEach(s=>{s(i)})})}onFocus(){notifyManager.batch(()=>{this.getAll().forEach(i=>{i.onFocus()})})}onOnline(){notifyManager.batch(()=>{this.getAll().forEach(i=>{i.onOnline()})})}},Cr=new WeakMap,El),wr,xo,Er,mo,Rr,Lr,Sl,Mutation$1=(Sl=class extends Removable{constructor(s){super();tn(this,Rr);tn(this,wr,void 0);tn(this,xo,void 0);tn(this,Er,void 0);tn(this,mo,void 0);this.mutationId=s.mutationId,pn(this,xo,s.defaultOptions),pn(this,Er,s.mutationCache),pn(this,wr,[]),this.state=s.state||getDefaultState(),this.setOptions(s.options),this.scheduleGc()}setOptions(s){this.options={...Ct(this,xo),...s},this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(s){Ct(this,wr).includes(s)||(Ct(this,wr).push(s),this.clearGcTimeout(),Ct(this,Er).notify({type:"observerAdded",mutation:this,observer:s}))}removeObserver(s){pn(this,wr,Ct(this,wr).filter(a=>a!==s)),this.scheduleGc(),Ct(this,Er).notify({type:"observerRemoved",mutation:this,observer:s})}optionalRemove(){Ct(this,wr).length||(this.state.status==="pending"?this.scheduleGc():Ct(this,Er).remove(this))}continue(){var s;return((s=Ct(this,mo))==null?void 0:s.continue())??this.execute(this.state.variables)}async execute(s){var tt,ot,dt,ht,ft,pt,mt,gt,_t,yt,St,Et,vt,bt,Tt,wt,Pt,At,xt,Ot;const a=()=>(pn(this,mo,createRetryer({fn:()=>this.options.mutationFn?this.options.mutationFn(s):Promise.reject(new Error("No mutationFn found")),onFail:(Rt,Dt)=>{dn(this,Rr,Lr).call(this,{type:"failed",failureCount:Rt,error:Dt})},onPause:()=>{dn(this,Rr,Lr).call(this,{type:"pause"})},onContinue:()=>{dn(this,Rr,Lr).call(this,{type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode})),Ct(this,mo).promise),et=this.state.status==="pending";try{if(!et){dn(this,Rr,Lr).call(this,{type:"pending",variables:s}),await((ot=(tt=Ct(this,Er).config).onMutate)==null?void 0:ot.call(tt,s,this));const Dt=await((ht=(dt=this.options).onMutate)==null?void 0:ht.call(dt,s));Dt!==this.state.context&&dn(this,Rr,Lr).call(this,{type:"pending",context:Dt,variables:s})}const Rt=await a();return await((pt=(ft=Ct(this,Er).config).onSuccess)==null?void 0:pt.call(ft,Rt,s,this.state.context,this)),await((gt=(mt=this.options).onSuccess)==null?void 0:gt.call(mt,Rt,s,this.state.context)),await((yt=(_t=Ct(this,Er).config).onSettled)==null?void 0:yt.call(_t,Rt,null,this.state.variables,this.state.context,this)),await((Et=(St=this.options).onSettled)==null?void 0:Et.call(St,Rt,null,s,this.state.context)),dn(this,Rr,Lr).call(this,{type:"success",data:Rt}),Rt}catch(Rt){try{throw await((bt=(vt=Ct(this,Er).config).onError)==null?void 0:bt.call(vt,Rt,s,this.state.context,this)),await((wt=(Tt=this.options).onError)==null?void 0:wt.call(Tt,Rt,s,this.state.context)),await((At=(Pt=Ct(this,Er).config).onSettled)==null?void 0:At.call(Pt,void 0,Rt,this.state.variables,this.state.context,this)),await((Ot=(xt=this.options).onSettled)==null?void 0:Ot.call(xt,void 0,Rt,s,this.state.context)),Rt}finally{dn(this,Rr,Lr).call(this,{type:"error",error:Rt})}}}},wr=new WeakMap,xo=new WeakMap,Er=new WeakMap,mo=new WeakMap,Rr=new WeakSet,Lr=function(s){const a=et=>{switch(s.type){case"failed":return{...et,failureCount:s.failureCount,failureReason:s.error};case"pause":return{...et,isPaused:!0};case"continue":return{...et,isPaused:!1};case"pending":return{...et,context:s.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:!canFetch(this.options.networkMode),status:"pending",variables:s.variables,submittedAt:Date.now()};case"success":return{...et,data:s.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...et,data:void 0,error:s.error,failureCount:et.failureCount+1,failureReason:s.error,isPaused:!1,status:"error"}}};this.state=a(this.state),notifyManager.batch(()=>{Ct(this,wr).forEach(et=>{et.onMutationUpdate(s)}),Ct(this,Er).notify({mutation:this,type:"updated",action:s})})},Sl);function getDefaultState(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Ar,$o,Jr,Tl,MutationCache=(Tl=class extends Subscribable{constructor(i={}){super();tn(this,Ar,void 0);tn(this,$o,void 0);tn(this,Jr,void 0);this.config=i,pn(this,Ar,[]),pn(this,$o,0)}build(i,s,a){const et=new Mutation$1({mutationCache:this,mutationId:++Dr(this,$o)._,options:i.defaultMutationOptions(s),state:a});return this.add(et),et}add(i){Ct(this,Ar).push(i),this.notify({type:"added",mutation:i})}remove(i){pn(this,Ar,Ct(this,Ar).filter(s=>s!==i)),this.notify({type:"removed",mutation:i})}clear(){notifyManager.batch(()=>{Ct(this,Ar).forEach(i=>{this.remove(i)})})}getAll(){return Ct(this,Ar)}find(i){const s={exact:!0,...i};return Ct(this,Ar).find(a=>matchMutation(s,a))}findAll(i={}){return Ct(this,Ar).filter(s=>matchMutation(i,s))}notify(i){notifyManager.batch(()=>{this.listeners.forEach(s=>{s(i)})})}resumePausedMutations(){return pn(this,Jr,(Ct(this,Jr)??Promise.resolve()).then(()=>{const i=Ct(this,Ar).filter(s=>s.state.isPaused);return notifyManager.batch(()=>i.reduce((s,a)=>s.then(()=>a.continue().catch(noop$6)),Promise.resolve()))}).then(()=>{pn(this,Jr,void 0)})),Ct(this,Jr)}},Ar=new WeakMap,$o=new WeakMap,Jr=new WeakMap,Tl);function infiniteQueryBehavior(o){return{onFetch:(i,s)=>{const a=async()=>{var yt,St,Et,vt,bt;const et=i.options,tt=(Et=(St=(yt=i.fetchOptions)==null?void 0:yt.meta)==null?void 0:St.fetchMore)==null?void 0:Et.direction,ot=((vt=i.state.data)==null?void 0:vt.pages)||[],dt=((bt=i.state.data)==null?void 0:bt.pageParams)||[],ht={pages:[],pageParams:[]};let ft=!1;const pt=Tt=>{Object.defineProperty(Tt,"signal",{enumerable:!0,get:()=>(i.signal.aborted?ft=!0:i.signal.addEventListener("abort",()=>{ft=!0}),i.signal)})},mt=i.options.queryFn||(()=>Promise.reject(new Error(`Missing queryFn: '${i.options.queryHash}'`))),gt=async(Tt,wt,Pt)=>{if(ft)return Promise.reject();if(wt==null&&Tt.pages.length)return Promise.resolve(Tt);const At={queryKey:i.queryKey,pageParam:wt,direction:Pt?"backward":"forward",meta:i.options.meta};pt(At);const xt=await mt(At),{maxPages:Ot}=i.options,Rt=Pt?addToStart:addToEnd;return{pages:Rt(Tt.pages,xt,Ot),pageParams:Rt(Tt.pageParams,wt,Ot)}};let _t;if(tt&&ot.length){const Tt=tt==="backward",wt=Tt?getPreviousPageParam:getNextPageParam,Pt={pages:ot,pageParams:dt},At=wt(et,Pt);_t=await gt(Pt,At,Tt)}else{_t=await gt(ht,dt[0]??et.initialPageParam);const Tt=o??ot.length;for(let wt=1;wt<Tt;wt++){const Pt=getNextPageParam(et,_t);_t=await gt(_t,Pt)}}return _t};i.options.persister?i.fetchFn=()=>{var et,tt;return(tt=(et=i.options).persister)==null?void 0:tt.call(et,a,{queryKey:i.queryKey,meta:i.options.meta,signal:i.signal},s)}:i.fetchFn=a}}}function getNextPageParam(o,{pages:i,pageParams:s}){const a=i.length-1;return o.getNextPageParam(i[a],i,s[a],s)}function getPreviousPageParam(o,{pages:i,pageParams:s}){var a;return(a=o.getPreviousPageParam)==null?void 0:a.call(o,i[0],i,s[0],s)}var gr,Ur,Br,go,_o,Wr,yo,vo,Al,QueryClient=(Al=class{constructor(o={}){tn(this,gr,void 0);tn(this,Ur,void 0);tn(this,Br,void 0);tn(this,go,void 0);tn(this,_o,void 0);tn(this,Wr,void 0);tn(this,yo,void 0);tn(this,vo,void 0);pn(this,gr,o.queryCache||new QueryCache),pn(this,Ur,o.mutationCache||new MutationCache),pn(this,Br,o.defaultOptions||{}),pn(this,go,new Map),pn(this,_o,new Map),pn(this,Wr,0)}mount(){Dr(this,Wr)._++,Ct(this,Wr)===1&&(pn(this,yo,focusManager.subscribe(()=>{focusManager.isFocused()&&(this.resumePausedMutations(),Ct(this,gr).onFocus())})),pn(this,vo,onlineManager.subscribe(()=>{onlineManager.isOnline()&&(this.resumePausedMutations(),Ct(this,gr).onOnline())})))}unmount(){var o,i;Dr(this,Wr)._--,Ct(this,Wr)===0&&((o=Ct(this,yo))==null||o.call(this),pn(this,yo,void 0),(i=Ct(this,vo))==null||i.call(this),pn(this,vo,void 0))}isFetching(o){return Ct(this,gr).findAll({...o,fetchStatus:"fetching"}).length}isMutating(o){return Ct(this,Ur).findAll({...o,status:"pending"}).length}getQueryData(o){var i;return(i=Ct(this,gr).find({queryKey:o}))==null?void 0:i.state.data}ensureQueryData(o){const i=this.getQueryData(o.queryKey);return i!==void 0?Promise.resolve(i):this.fetchQuery(o)}getQueriesData(o){return this.getQueryCache().findAll(o).map(({queryKey:i,state:s})=>{const a=s.data;return[i,a]})}setQueryData(o,i,s){const a=Ct(this,gr).find({queryKey:o}),et=a==null?void 0:a.state.data,tt=functionalUpdate(i,et);if(typeof tt>"u")return;const ot=this.defaultQueryOptions({queryKey:o});return Ct(this,gr).build(this,ot).setData(tt,{...s,manual:!0})}setQueriesData(o,i,s){return notifyManager.batch(()=>this.getQueryCache().findAll(o).map(({queryKey:a})=>[a,this.setQueryData(a,i,s)]))}getQueryState(o){var i;return(i=Ct(this,gr).find({queryKey:o}))==null?void 0:i.state}removeQueries(o){const i=Ct(this,gr);notifyManager.batch(()=>{i.findAll(o).forEach(s=>{i.remove(s)})})}resetQueries(o,i){const s=Ct(this,gr),a={type:"active",...o};return notifyManager.batch(()=>(s.findAll(o).forEach(et=>{et.reset()}),this.refetchQueries(a,i)))}cancelQueries(o={},i={}){const s={revert:!0,...i},a=notifyManager.batch(()=>Ct(this,gr).findAll(o).map(et=>et.cancel(s)));return Promise.all(a).then(noop$6).catch(noop$6)}invalidateQueries(o={},i={}){return notifyManager.batch(()=>{if(Ct(this,gr).findAll(o).forEach(a=>{a.invalidate()}),o.refetchType==="none")return Promise.resolve();const s={...o,type:o.refetchType??o.type??"active"};return this.refetchQueries(s,i)})}refetchQueries(o={},i){const s={...i,cancelRefetch:(i==null?void 0:i.cancelRefetch)??!0},a=notifyManager.batch(()=>Ct(this,gr).findAll(o).filter(et=>!et.isDisabled()).map(et=>{let tt=et.fetch(void 0,s);return s.throwOnError||(tt=tt.catch(noop$6)),et.state.fetchStatus==="paused"?Promise.resolve():tt}));return Promise.all(a).then(noop$6)}fetchQuery(o){const i=this.defaultQueryOptions(o);typeof i.retry>"u"&&(i.retry=!1);const s=Ct(this,gr).build(this,i);return s.isStaleByTime(i.staleTime)?s.fetch(i):Promise.resolve(s.state.data)}prefetchQuery(o){return this.fetchQuery(o).then(noop$6).catch(noop$6)}fetchInfiniteQuery(o){return o.behavior=infiniteQueryBehavior(o.pages),this.fetchQuery(o)}prefetchInfiniteQuery(o){return this.fetchInfiniteQuery(o).then(noop$6).catch(noop$6)}resumePausedMutations(){return Ct(this,Ur).resumePausedMutations()}getQueryCache(){return Ct(this,gr)}getMutationCache(){return Ct(this,Ur)}getDefaultOptions(){return Ct(this,Br)}setDefaultOptions(o){pn(this,Br,o)}setQueryDefaults(o,i){Ct(this,go).set(hashKey(o),{queryKey:o,defaultOptions:i})}getQueryDefaults(o){const i=[...Ct(this,go).values()];let s={};return i.forEach(a=>{partialMatchKey(o,a.queryKey)&&(s={...s,...a.defaultOptions})}),s}setMutationDefaults(o,i){Ct(this,_o).set(hashKey(o),{mutationKey:o,defaultOptions:i})}getMutationDefaults(o){const i=[...Ct(this,_o).values()];let s={};return i.forEach(a=>{partialMatchKey(o,a.mutationKey)&&(s={...s,...a.defaultOptions})}),s}defaultQueryOptions(o){if(o!=null&&o._defaulted)return o;const i={...Ct(this,Br).queries,...(o==null?void 0:o.queryKey)&&this.getQueryDefaults(o.queryKey),...o,_defaulted:!0};return i.queryHash||(i.queryHash=hashQueryKeyByOptions(i.queryKey,i)),typeof i.refetchOnReconnect>"u"&&(i.refetchOnReconnect=i.networkMode!=="always"),typeof i.throwOnError>"u"&&(i.throwOnError=!!i.suspense),typeof i.networkMode>"u"&&i.persister&&(i.networkMode="offlineFirst"),i}defaultMutationOptions(o){return o!=null&&o._defaulted?o:{...Ct(this,Br).mutations,...(o==null?void 0:o.mutationKey)&&this.getMutationDefaults(o.mutationKey),...o,_defaulted:!0}}clear(){Ct(this,gr).clear(),Ct(this,Ur).clear()}},gr=new WeakMap,Ur=new WeakMap,Br=new WeakMap,go=new WeakMap,_o=new WeakMap,Wr=new WeakMap,yo=new WeakMap,vo=new WeakMap,Al),QueryClientContext=reactExports.createContext(void 0),QueryClientProvider=({client:o,children:i})=>(reactExports.useEffect(()=>(o.mount(),()=>{o.unmount()}),[o]),reactExports.createElement(QueryClientContext.Provider,{value:o},i)),__assign=function(){return __assign=Object.assign||function(i){for(var s,a=1,et=arguments.length;a<et;a++){s=arguments[a];for(var tt in s)Object.prototype.hasOwnProperty.call(s,tt)&&(i[tt]=s[tt])}return i},__assign.apply(this,arguments)};function __rest$d(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s}function __spreadArray$1(o,i,s){if(s||arguments.length===2)for(var a=0,et=i.length,tt;a<et;a++)(tt||!(a in i))&&(tt||(tt=Array.prototype.slice.call(i,0,a)),tt[a]=i[a]);return o.concat(tt||Array.prototype.slice.call(i))}var MS="-ms-",MOZ="-moz-",WEBKIT="-webkit-",COMMENT="comm",RULESET="rule",DECLARATION="decl",IMPORT="@import",KEYFRAMES="@keyframes",LAYER="@layer",abs=Math.abs,from=String.fromCharCode,assign=Object.assign;function hash(o,i){return charat(o,0)^45?(((i<<2^charat(o,0))<<2^charat(o,1))<<2^charat(o,2))<<2^charat(o,3):0}function trim(o){return o.trim()}function match$1(o,i){return(o=i.exec(o))?o[0]:o}function replace(o,i,s){return o.replace(i,s)}function indexof(o,i){return o.indexOf(i)}function charat(o,i){return o.charCodeAt(i)|0}function substr(o,i,s){return o.slice(i,s)}function strlen(o){return o.length}function sizeof(o){return o.length}function append(o,i){return i.push(o),o}function combine(o,i){return o.map(i).join("")}function filter(o,i){return o.filter(function(s){return!match$1(s,i)})}var line=1,column=1,length=0,position=0,character=0,characters="";function node(o,i,s,a,et,tt,ot,dt){return{value:o,root:i,parent:s,type:a,props:et,children:tt,line,column,length:ot,return:"",siblings:dt}}function copy(o,i){return assign(node("",null,null,"",null,null,0,o.siblings),o,{length:-o.length},i)}function lift(o){for(;o.root;)o=copy(o.root,{children:[o]});append(o,o.siblings)}function char(){return character}function prev(){return character=position>0?charat(characters,--position):0,column--,character===10&&(column=1,line--),character}function next(){return character=position<length?charat(characters,position++):0,column++,character===10&&(column=1,line++),character}function peek(){return charat(characters,position)}function caret(){return position}function slice(o,i){return substr(characters,o,i)}function token(o){switch(o){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function alloc(o){return line=column=1,length=strlen(characters=o),position=0,[]}function dealloc(o){return characters="",o}function delimit(o){return trim(slice(position-1,delimiter(o===91?o+2:o===40?o+1:o)))}function whitespace(o){for(;(character=peek())&&character<33;)next();return token(o)>2||token(character)>3?"":" "}function escaping(o,i){for(;--i&&next()&&!(character<48||character>102||character>57&&character<65||character>70&&character<97););return slice(o,caret()+(i<6&&peek()==32&&next()==32))}function delimiter(o){for(;next();)switch(character){case o:return position;case 34:case 39:o!==34&&o!==39&&delimiter(character);break;case 40:o===41&&delimiter(o);break;case 92:next();break}return position}function commenter(o,i){for(;next()&&o+character!==57;)if(o+character===84&&peek()===47)break;return"/*"+slice(i,position-1)+"*"+from(o===47?o:next())}function identifier(o){for(;!token(peek());)next();return slice(o,position)}function compile(o){return dealloc(parse$1("",null,null,null,[""],o=alloc(o),0,[0],o))}function parse$1(o,i,s,a,et,tt,ot,dt,ht){for(var ft=0,pt=0,mt=ot,gt=0,_t=0,yt=0,St=1,Et=1,vt=1,bt=0,Tt="",wt=et,Pt=tt,At=a,xt=Tt;Et;)switch(yt=bt,bt=next()){case 40:if(yt!=108&&charat(xt,mt-1)==58){indexof(xt+=replace(delimit(bt),"&","&\f"),"&\f")!=-1&&(vt=-1);break}case 34:case 39:case 91:xt+=delimit(bt);break;case 9:case 10:case 13:case 32:xt+=whitespace(yt);break;case 92:xt+=escaping(caret()-1,7);continue;case 47:switch(peek()){case 42:case 47:append(comment(commenter(next(),caret()),i,s,ht),ht);break;default:xt+="/"}break;case 123*St:dt[ft++]=strlen(xt)*vt;case 125*St:case 59:case 0:switch(bt){case 0:case 125:Et=0;case 59+pt:vt==-1&&(xt=replace(xt,/\f/g,"")),_t>0&&strlen(xt)-mt&&append(_t>32?declaration(xt+";",a,s,mt-1,ht):declaration(replace(xt," ","")+";",a,s,mt-2,ht),ht);break;case 59:xt+=";";default:if(append(At=ruleset(xt,i,s,ft,pt,et,dt,Tt,wt=[],Pt=[],mt,tt),tt),bt===123)if(pt===0)parse$1(xt,i,At,At,wt,tt,mt,dt,Pt);else switch(gt===99&&charat(xt,3)===110?100:gt){case 100:case 108:case 109:case 115:parse$1(o,At,At,a&&append(ruleset(o,At,At,0,0,et,dt,Tt,et,wt=[],mt,Pt),Pt),et,Pt,mt,dt,a?wt:Pt);break;default:parse$1(xt,At,At,At,[""],Pt,0,dt,Pt)}}ft=pt=_t=0,St=vt=1,Tt=xt="",mt=ot;break;case 58:mt=1+strlen(xt),_t=yt;default:if(St<1){if(bt==123)--St;else if(bt==125&&St++==0&&prev()==125)continue}switch(xt+=from(bt),bt*St){case 38:vt=pt>0?1:(xt+="\f",-1);break;case 44:dt[ft++]=(strlen(xt)-1)*vt,vt=1;break;case 64:peek()===45&&(xt+=delimit(next())),gt=peek(),pt=mt=strlen(Tt=xt+=identifier(caret())),bt++;break;case 45:yt===45&&strlen(xt)==2&&(St=0)}}return tt}function ruleset(o,i,s,a,et,tt,ot,dt,ht,ft,pt,mt){for(var gt=et-1,_t=et===0?tt:[""],yt=sizeof(_t),St=0,Et=0,vt=0;St<a;++St)for(var bt=0,Tt=substr(o,gt+1,gt=abs(Et=ot[St])),wt=o;bt<yt;++bt)(wt=trim(Et>0?_t[bt]+" "+Tt:replace(Tt,/&\f/g,_t[bt])))&&(ht[vt++]=wt);return node(o,i,s,et===0?RULESET:dt,ht,ft,pt,mt)}function comment(o,i,s,a){return node(o,i,s,COMMENT,from(char()),substr(o,2,-2),0,a)}function declaration(o,i,s,a,et){return node(o,i,s,DECLARATION,substr(o,0,a),substr(o,a+1,-1),a,et)}function prefix$2(o,i,s){switch(hash(o,i)){case 5103:return WEBKIT+"print-"+o+o;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return WEBKIT+o+o;case 4789:return MOZ+o+o;case 5349:case 4246:case 4810:case 6968:case 2756:return WEBKIT+o+MOZ+o+MS+o+o;case 5936:switch(charat(o,i+11)){case 114:return WEBKIT+o+MS+replace(o,/[svh]\w+-[tblr]{2}/,"tb")+o;case 108:return WEBKIT+o+MS+replace(o,/[svh]\w+-[tblr]{2}/,"tb-rl")+o;case 45:return WEBKIT+o+MS+replace(o,/[svh]\w+-[tblr]{2}/,"lr")+o}case 6828:case 4268:case 2903:return WEBKIT+o+MS+o+o;case 6165:return WEBKIT+o+MS+"flex-"+o+o;case 5187:return WEBKIT+o+replace(o,/(\w+).+(:[^]+)/,WEBKIT+"box-$1$2"+MS+"flex-$1$2")+o;case 5443:return WEBKIT+o+MS+"flex-item-"+replace(o,/flex-|-self/g,"")+(match$1(o,/flex-|baseline/)?"":MS+"grid-row-"+replace(o,/flex-|-self/g,""))+o;case 4675:return WEBKIT+o+MS+"flex-line-pack"+replace(o,/align-content|flex-|-self/g,"")+o;case 5548:return WEBKIT+o+MS+replace(o,"shrink","negative")+o;case 5292:return WEBKIT+o+MS+replace(o,"basis","preferred-size")+o;case 6060:return WEBKIT+"box-"+replace(o,"-grow","")+WEBKIT+o+MS+replace(o,"grow","positive")+o;case 4554:return WEBKIT+replace(o,/([^-])(transform)/g,"$1"+WEBKIT+"$2")+o;case 6187:return replace(replace(replace(o,/(zoom-|grab)/,WEBKIT+"$1"),/(image-set)/,WEBKIT+"$1"),o,"")+o;case 5495:case 3959:return replace(o,/(image-set\([^]*)/,WEBKIT+"$1$`$1");case 4968:return replace(replace(o,/(.+:)(flex-)?(.*)/,WEBKIT+"box-pack:$3"+MS+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+WEBKIT+o+o;case 4200:if(!match$1(o,/flex-|baseline/))return MS+"grid-column-align"+substr(o,i)+o;break;case 2592:case 3360:return MS+replace(o,"template-","")+o;case 4384:case 3616:return s&&s.some(function(a,et){return i=et,match$1(a.props,/grid-\w+-end/)})?~indexof(o+(s=s[i].value),"span")?o:MS+replace(o,"-start","")+o+MS+"grid-row-span:"+(~indexof(s,"span")?match$1(s,/\d+/):+match$1(s,/\d+/)-+match$1(o,/\d+/))+";":MS+replace(o,"-start","")+o;case 4896:case 4128:return s&&s.some(function(a){return match$1(a.props,/grid-\w+-start/)})?o:MS+replace(replace(o,"-end","-span"),"span ","")+o;case 4095:case 3583:case 4068:case 2532:return replace(o,/(.+)-inline(.+)/,WEBKIT+"$1$2")+o;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(strlen(o)-1-i>6)switch(charat(o,i+1)){case 109:if(charat(o,i+4)!==45)break;case 102:return replace(o,/(.+:)(.+)-([^]+)/,"$1"+WEBKIT+"$2-$3$1"+MOZ+(charat(o,i+3)==108?"$3":"$2-$3"))+o;case 115:return~indexof(o,"stretch")?prefix$2(replace(o,"stretch","fill-available"),i,s)+o:o}break;case 5152:case 5920:return replace(o,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(a,et,tt,ot,dt,ht,ft){return MS+et+":"+tt+ft+(ot?MS+et+"-span:"+(dt?ht:+ht-+tt)+ft:"")+o});case 4949:if(charat(o,i+6)===121)return replace(o,":",":"+WEBKIT)+o;break;case 6444:switch(charat(o,charat(o,14)===45?18:11)){case 120:return replace(o,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+WEBKIT+(charat(o,14)===45?"inline-":"")+"box$3$1"+WEBKIT+"$2$3$1"+MS+"$2box$3")+o;case 100:return replace(o,":",":"+MS)+o}break;case 5719:case 2647:case 2135:case 3927:case 2391:return replace(o,"scroll-","scroll-snap-")+o}return o}function serialize(o,i){for(var s="",a=0;a<o.length;a++)s+=i(o[a],a,o,i)||"";return s}function stringify$1(o,i,s,a){switch(o.type){case LAYER:if(o.children.length)break;case IMPORT:case DECLARATION:return o.return=o.return||o.value;case COMMENT:return"";case KEYFRAMES:return o.return=o.value+"{"+serialize(o.children,a)+"}";case RULESET:if(!strlen(o.value=o.props.join(",")))return""}return strlen(s=serialize(o.children,a))?o.return=o.value+"{"+s+"}":""}function middleware(o){var i=sizeof(o);return function(s,a,et,tt){for(var ot="",dt=0;dt<i;dt++)ot+=o[dt](s,a,et,tt)||"";return ot}}function rulesheet(o){return function(i){i.root||(i=i.return)&&o(i)}}function prefixer(o,i,s,a){if(o.length>-1&&!o.return)switch(o.type){case DECLARATION:o.return=prefix$2(o.value,o.length,s);return;case KEYFRAMES:return serialize([copy(o,{value:replace(o.value,"@","@"+WEBKIT)})],a);case RULESET:if(o.length)return combine(s=o.props,function(et){switch(match$1(et,a=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":lift(copy(o,{props:[replace(et,/:(read-\w+)/,":"+MOZ+"$1")]})),lift(copy(o,{props:[et]})),assign(o,{props:filter(s,a)});break;case"::placeholder":lift(copy(o,{props:[replace(et,/:(plac\w+)/,":"+WEBKIT+"input-$1")]})),lift(copy(o,{props:[replace(et,/:(plac\w+)/,":"+MOZ+"$1")]})),lift(copy(o,{props:[replace(et,/:(plac\w+)/,MS+"input-$1")]})),lift(copy(o,{props:[et]})),assign(o,{props:filter(s,a)});break}return""})}}var unitlessKeys$1={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},define_process_env_default$2={},f$1=typeof process<"u"&&define_process_env_default$2!==void 0&&(define_process_env_default$2.REACT_APP_SC_ATTR||define_process_env_default$2.SC_ATTR)||"data-styled",m$1="active",y$1="data-styled-version",v$3="6.1.3",g$1=`/*!sc*/
`,S$2=typeof window<"u"&&"HTMLElement"in window,w$3=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default$2!==void 0&&define_process_env_default$2.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&define_process_env_default$2.REACT_APP_SC_DISABLE_SPEEDY!==""?define_process_env_default$2.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&define_process_env_default$2.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&define_process_env_default$2!==void 0&&define_process_env_default$2.SC_DISABLE_SPEEDY!==void 0&&define_process_env_default$2.SC_DISABLE_SPEEDY!==""&&define_process_env_default$2.SC_DISABLE_SPEEDY!=="false"&&define_process_env_default$2.SC_DISABLE_SPEEDY),_=Object.freeze([]),C$2=Object.freeze({});function I$1(o,i,s){return s===void 0&&(s=C$2),o.theme!==s.theme&&o.theme||i||s.theme}var A$1=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),O$1=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,D$2=/(^-|-$)/g;function R$1(o){return o.replace(O$1,"-").replace(D$2,"")}var T$1=/(a)(d)/gi,k$2=52,j=function(o){return String.fromCharCode(o+(o>25?39:97))};function x$1(o){var i,s="";for(i=Math.abs(o);i>k$2;i=i/k$2|0)s=j(i%k$2)+s;return(j(i%k$2)+s).replace(T$1,"$1-$2")}var V$1,F$2=5381,M$1=function(o,i){for(var s=i.length;s;)o=33*o^i.charCodeAt(--s);return o},$=function(o){return M$1(F$2,o)};function z$1(o){return x$1($(o)>>>0)}function B$1(o){return o.displayName||o.name||"Component"}function L(o){return typeof o=="string"&&!0}var G$1=typeof Symbol=="function"&&Symbol.for,Y$1=G$1?Symbol.for("react.memo"):60115,W$1=G$1?Symbol.for("react.forward_ref"):60112,q$2={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},H$1={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},U$1={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},J$1=((V$1={})[W$1]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},V$1[Y$1]=U$1,V$1);function X$1(o){return("type"in(i=o)&&i.type.$$typeof)===Y$1?U$1:"$$typeof"in o?J$1[o.$$typeof]:q$2;var i}var Z$1=Object.defineProperty,K$1=Object.getOwnPropertyNames,Q$1=Object.getOwnPropertySymbols,ee$1=Object.getOwnPropertyDescriptor,te$1=Object.getPrototypeOf,ne=Object.prototype;function oe$1(o,i,s){if(typeof i!="string"){if(ne){var a=te$1(i);a&&a!==ne&&oe$1(o,a,s)}var et=K$1(i);Q$1&&(et=et.concat(Q$1(i)));for(var tt=X$1(o),ot=X$1(i),dt=0;dt<et.length;++dt){var ht=et[dt];if(!(ht in H$1||s&&s[ht]||ot&&ht in ot||tt&&ht in tt)){var ft=ee$1(i,ht);try{Z$1(o,ht,ft)}catch{}}}}return o}function re$1(o){return typeof o=="function"}function se$1(o){return typeof o=="object"&&"styledComponentId"in o}function ie$1(o,i){return o&&i?"".concat(o," ").concat(i):o||i||""}function ae$2(o,i){if(o.length===0)return"";for(var s=o[0],a=1;a<o.length;a++)s+=i?i+o[a]:o[a];return s}function ce(o){return o!==null&&typeof o=="object"&&o.constructor.name===Object.name&&!("props"in o&&o.$$typeof)}function le$1(o,i,s){if(s===void 0&&(s=!1),!s&&!ce(o)&&!Array.isArray(o))return i;if(Array.isArray(i))for(var a=0;a<i.length;a++)o[a]=le$1(o[a],i[a]);else if(ce(i))for(var a in i)o[a]=le$1(o[a],i[a]);return o}function ue$1(o,i){Object.defineProperty(o,"toString",{value:i})}function he$1(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(o," for more information.").concat(i.length>0?" Args: ".concat(i.join(", ")):""))}var fe=function(){function o(i){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=i}return o.prototype.indexOfGroup=function(i){for(var s=0,a=0;a<i;a++)s+=this.groupSizes[a];return s},o.prototype.insertRules=function(i,s){if(i>=this.groupSizes.length){for(var a=this.groupSizes,et=a.length,tt=et;i>=tt;)if((tt<<=1)<0)throw he$1(16,"".concat(i));this.groupSizes=new Uint32Array(tt),this.groupSizes.set(a),this.length=tt;for(var ot=et;ot<tt;ot++)this.groupSizes[ot]=0}for(var dt=this.indexOfGroup(i+1),ht=(ot=0,s.length);ot<ht;ot++)this.tag.insertRule(dt,s[ot])&&(this.groupSizes[i]++,dt++)},o.prototype.clearGroup=function(i){if(i<this.length){var s=this.groupSizes[i],a=this.indexOfGroup(i),et=a+s;this.groupSizes[i]=0;for(var tt=a;tt<et;tt++)this.tag.deleteRule(a)}},o.prototype.getGroup=function(i){var s="";if(i>=this.length||this.groupSizes[i]===0)return s;for(var a=this.groupSizes[i],et=this.indexOfGroup(i),tt=et+a,ot=et;ot<tt;ot++)s+="".concat(this.tag.getRule(ot)).concat(g$1);return s},o}(),me$1=new Map,ye=new Map,ve=1,ge$1=function(o){if(me$1.has(o))return me$1.get(o);for(;ye.has(ve);)ve++;var i=ve++;return me$1.set(o,i),ye.set(i,o),i},Se=function(o,i){ve=i+1,me$1.set(o,i),ye.set(i,o)},we="style[".concat(f$1,"][").concat(y$1,'="').concat(v$3,'"]'),be$1=new RegExp("^".concat(f$1,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),Ee=function(o,i,s){for(var a,et=s.split(","),tt=0,ot=et.length;tt<ot;tt++)(a=et[tt])&&o.registerName(i,a)},Ne=function(o,i){for(var s,a=((s=i.textContent)!==null&&s!==void 0?s:"").split(g$1),et=[],tt=0,ot=a.length;tt<ot;tt++){var dt=a[tt].trim();if(dt){var ht=dt.match(be$1);if(ht){var ft=0|parseInt(ht[1],10),pt=ht[2];ft!==0&&(Se(pt,ft),Ee(o,pt,ht[3]),o.getTag().insertRules(ft,et)),et.length=0}else et.push(dt)}}};function Pe$1(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var _e$1=function(o){var i=document.head,s=o||i,a=document.createElement("style"),et=function(dt){var ht=Array.from(dt.querySelectorAll("style[".concat(f$1,"]")));return ht[ht.length-1]}(s),tt=et!==void 0?et.nextSibling:null;a.setAttribute(f$1,m$1),a.setAttribute(y$1,v$3);var ot=Pe$1();return ot&&a.setAttribute("nonce",ot),s.insertBefore(a,tt),a},Ce=function(){function o(i){this.element=_e$1(i),this.element.appendChild(document.createTextNode("")),this.sheet=function(s){if(s.sheet)return s.sheet;for(var a=document.styleSheets,et=0,tt=a.length;et<tt;et++){var ot=a[et];if(ot.ownerNode===s)return ot}throw he$1(17)}(this.element),this.length=0}return o.prototype.insertRule=function(i,s){try{return this.sheet.insertRule(s,i),this.length++,!0}catch{return!1}},o.prototype.deleteRule=function(i){this.sheet.deleteRule(i),this.length--},o.prototype.getRule=function(i){var s=this.sheet.cssRules[i];return s&&s.cssText?s.cssText:""},o}(),Ie$1=function(){function o(i){this.element=_e$1(i),this.nodes=this.element.childNodes,this.length=0}return o.prototype.insertRule=function(i,s){if(i<=this.length&&i>=0){var a=document.createTextNode(s);return this.element.insertBefore(a,this.nodes[i]||null),this.length++,!0}return!1},o.prototype.deleteRule=function(i){this.element.removeChild(this.nodes[i]),this.length--},o.prototype.getRule=function(i){return i<this.length?this.nodes[i].textContent:""},o}(),Ae$1=function(){function o(i){this.rules=[],this.length=0}return o.prototype.insertRule=function(i,s){return i<=this.length&&(this.rules.splice(i,0,s),this.length++,!0)},o.prototype.deleteRule=function(i){this.rules.splice(i,1),this.length--},o.prototype.getRule=function(i){return i<this.length?this.rules[i]:""},o}(),Oe=S$2,De={isServer:!S$2,useCSSOMInjection:!w$3},Re$1=function(){function o(i,s,a){i===void 0&&(i=C$2),s===void 0&&(s={});var et=this;this.options=__assign(__assign({},De),i),this.gs=s,this.names=new Map(a),this.server=!!i.isServer,!this.server&&S$2&&Oe&&(Oe=!1,function(tt){for(var ot=document.querySelectorAll(we),dt=0,ht=ot.length;dt<ht;dt++){var ft=ot[dt];ft&&ft.getAttribute(f$1)!==m$1&&(Ne(tt,ft),ft.parentNode&&ft.parentNode.removeChild(ft))}}(this)),ue$1(this,function(){return function(tt){for(var ot=tt.getTag(),dt=ot.length,ht="",ft=function(mt){var gt=function(vt){return ye.get(vt)}(mt);if(gt===void 0)return"continue";var _t=tt.names.get(gt),yt=ot.getGroup(mt);if(_t===void 0||yt.length===0)return"continue";var St="".concat(f$1,".g").concat(mt,'[id="').concat(gt,'"]'),Et="";_t!==void 0&&_t.forEach(function(vt){vt.length>0&&(Et+="".concat(vt,","))}),ht+="".concat(yt).concat(St,'{content:"').concat(Et,'"}').concat(g$1)},pt=0;pt<dt;pt++)ft(pt);return ht}(et)})}return o.registerId=function(i){return ge$1(i)},o.prototype.reconstructWithOptions=function(i,s){return s===void 0&&(s=!0),new o(__assign(__assign({},this.options),i),this.gs,s&&this.names||void 0)},o.prototype.allocateGSInstance=function(i){return this.gs[i]=(this.gs[i]||0)+1},o.prototype.getTag=function(){return this.tag||(this.tag=(i=function(s){var a=s.useCSSOMInjection,et=s.target;return s.isServer?new Ae$1(et):a?new Ce(et):new Ie$1(et)}(this.options),new fe(i)));var i},o.prototype.hasNameForId=function(i,s){return this.names.has(i)&&this.names.get(i).has(s)},o.prototype.registerName=function(i,s){if(ge$1(i),this.names.has(i))this.names.get(i).add(s);else{var a=new Set;a.add(s),this.names.set(i,a)}},o.prototype.insertRules=function(i,s,a){this.registerName(i,s),this.getTag().insertRules(ge$1(i),a)},o.prototype.clearNames=function(i){this.names.has(i)&&this.names.get(i).clear()},o.prototype.clearRules=function(i){this.getTag().clearGroup(ge$1(i)),this.clearNames(i)},o.prototype.clearTag=function(){this.tag=void 0},o}(),Te=/&/g,ke=/^\s*\/\/.*$/gm;function je(o,i){return o.map(function(s){return s.type==="rule"&&(s.value="".concat(i," ").concat(s.value),s.value=s.value.replaceAll(",",",".concat(i," ")),s.props=s.props.map(function(a){return"".concat(i," ").concat(a)})),Array.isArray(s.children)&&s.type!=="@keyframes"&&(s.children=je(s.children,i)),s})}function xe(o){var i,s,a,et=o===void 0?C$2:o,tt=et.options,ot=tt===void 0?C$2:tt,dt=et.plugins,ht=dt===void 0?_:dt,ft=function(gt,_t,yt){return yt===s||yt.startsWith(s)&&yt.endsWith(s)&&yt.replaceAll(s,"").length>0?".".concat(i):gt},pt=ht.slice();pt.push(function(gt){gt.type===RULESET&&gt.value.includes("&")&&(gt.props[0]=gt.props[0].replace(Te,s).replace(a,ft))}),ot.prefix&&pt.push(prefixer),pt.push(stringify$1);var mt=function(gt,_t,yt,St){_t===void 0&&(_t=""),yt===void 0&&(yt=""),St===void 0&&(St="&"),i=St,s=_t,a=new RegExp("\\".concat(s,"\\b"),"g");var Et=gt.replace(ke,""),vt=compile(yt||_t?"".concat(yt," ").concat(_t," { ").concat(Et," }"):Et);ot.namespace&&(vt=je(vt,ot.namespace));var bt=[];return serialize(vt,middleware(pt.concat(rulesheet(function(Tt){return bt.push(Tt)})))),bt};return mt.hash=ht.length?ht.reduce(function(gt,_t){return _t.name||he$1(15),M$1(gt,_t.name)},F$2).toString():"",mt}var Ve$1=new Re$1,Fe=xe(),Me=React.createContext({shouldForwardProp:void 0,styleSheet:Ve$1,stylis:Fe});Me.Consumer;React.createContext(void 0);function Be(){return reactExports.useContext(Me)}var Ge=function(){function o(i,s){var a=this;this.inject=function(et,tt){tt===void 0&&(tt=Fe);var ot=a.name+tt.hash;et.hasNameForId(a.id,ot)||et.insertRules(a.id,ot,tt(a.rules,ot,"@keyframes"))},this.name=i,this.id="sc-keyframes-".concat(i),this.rules=s,ue$1(this,function(){throw he$1(12,String(a.name))})}return o.prototype.getName=function(i){return i===void 0&&(i=Fe),this.name+i.hash},o}(),Ye=function(o){return o>="A"&&o<="Z"};function We(o){for(var i="",s=0;s<o.length;s++){var a=o[s];if(s===1&&a==="-"&&o[0]==="-")return o;Ye(a)?i+="-"+a.toLowerCase():i+=a}return i.startsWith("ms-")?"-"+i:i}var qe=function(o){return o==null||o===!1||o===""},He=function(o){var i,s,a=[];for(var et in o){var tt=o[et];o.hasOwnProperty(et)&&!qe(tt)&&(Array.isArray(tt)&&tt.isCss||re$1(tt)?a.push("".concat(We(et),":"),tt,";"):ce(tt)?a.push.apply(a,__spreadArray$1(__spreadArray$1(["".concat(et," {")],He(tt),!1),["}"],!1)):a.push("".concat(We(et),": ").concat((i=et,(s=tt)==null||typeof s=="boolean"||s===""?"":typeof s!="number"||s===0||i in unitlessKeys$1||i.startsWith("--")?String(s).trim():"".concat(s,"px")),";")))}return a};function Ue(o,i,s,a){if(qe(o))return[];if(se$1(o))return[".".concat(o.styledComponentId)];if(re$1(o)){if(!re$1(tt=o)||tt.prototype&&tt.prototype.isReactComponent||!i)return[o];var et=o(i);return Ue(et,i,s,a)}var tt;return o instanceof Ge?s?(o.inject(s,a),[o.getName(a)]):[o]:ce(o)?He(o):Array.isArray(o)?Array.prototype.concat.apply(_,o.map(function(ot){return Ue(ot,i,s,a)})):[o.toString()]}function Je(o){for(var i=0;i<o.length;i+=1){var s=o[i];if(re$1(s)&&!se$1(s))return!1}return!0}var Xe=$(v$3),Ze=function(){function o(i,s,a){this.rules=i,this.staticRulesId="",this.isStatic=(a===void 0||a.isStatic)&&Je(i),this.componentId=s,this.baseHash=M$1(Xe,s),this.baseStyle=a,Re$1.registerId(s)}return o.prototype.generateAndInjectStyles=function(i,s,a){var et=this.baseStyle?this.baseStyle.generateAndInjectStyles(i,s,a):"";if(this.isStatic&&!a.hash)if(this.staticRulesId&&s.hasNameForId(this.componentId,this.staticRulesId))et=ie$1(et,this.staticRulesId);else{var tt=ae$2(Ue(this.rules,i,s,a)),ot=x$1(M$1(this.baseHash,tt)>>>0);if(!s.hasNameForId(this.componentId,ot)){var dt=a(tt,".".concat(ot),void 0,this.componentId);s.insertRules(this.componentId,ot,dt)}et=ie$1(et,ot),this.staticRulesId=ot}else{for(var ht=M$1(this.baseHash,a.hash),ft="",pt=0;pt<this.rules.length;pt++){var mt=this.rules[pt];if(typeof mt=="string")ft+=mt;else if(mt){var gt=ae$2(Ue(mt,i,s,a));ht=M$1(ht,gt+pt),ft+=gt}}if(ft){var _t=x$1(ht>>>0);s.hasNameForId(this.componentId,_t)||s.insertRules(this.componentId,_t,a(ft,".".concat(_t),void 0,this.componentId)),et=ie$1(et,_t)}}return et},o}(),Ke=React.createContext(void 0);Ke.Consumer;var nt={};function rt(o,i,s){var a=se$1(o),et=o,tt=!L(o),ot=i.attrs,dt=ot===void 0?_:ot,ht=i.componentId,ft=ht===void 0?function(wt,Pt){var At=typeof wt!="string"?"sc":R$1(wt);nt[At]=(nt[At]||0)+1;var xt="".concat(At,"-").concat(z$1(v$3+At+nt[At]));return Pt?"".concat(Pt,"-").concat(xt):xt}(i.displayName,i.parentComponentId):ht,pt=i.displayName,mt=pt===void 0?function(wt){return L(wt)?"styled.".concat(wt):"Styled(".concat(B$1(wt),")")}(o):pt,gt=i.displayName&&i.componentId?"".concat(R$1(i.displayName),"-").concat(i.componentId):i.componentId||ft,_t=a&&et.attrs?et.attrs.concat(dt).filter(Boolean):dt,yt=i.shouldForwardProp;if(a&&et.shouldForwardProp){var St=et.shouldForwardProp;if(i.shouldForwardProp){var Et=i.shouldForwardProp;yt=function(wt,Pt){return St(wt,Pt)&&Et(wt,Pt)}}else yt=St}var vt=new Ze(s,gt,a?et.componentStyle:void 0);function bt(wt,Pt){return function(At,xt,Ot){var Rt=At.attrs,Dt=At.componentStyle,Nt=At.defaultProps,Kt=At.foldedComponentIds,qt=At.styledComponentId,jt=At.target,Zt=React.useContext(Ke),Ht=Be(),Wt=At.shouldForwardProp||Ht.shouldForwardProp,Ft=function(It,Mt,$t){for(var Lt,Vt=__assign(__assign({},Mt),{className:void 0,theme:$t}),zt=0;zt<It.length;zt+=1){var Xt=re$1(Lt=It[zt])?Lt(Vt):Lt;for(var Yt in Xt)Vt[Yt]=Yt==="className"?ie$1(Vt[Yt],Xt[Yt]):Yt==="style"?__assign(__assign({},Vt[Yt]),Xt[Yt]):Xt[Yt]}return Mt.className&&(Vt.className=ie$1(Vt.className,Mt.className)),Vt}(Rt,xt,I$1(xt,Zt,Nt)||C$2),Gt=Ft.as||jt,Jt={};for(var on in Ft)Ft[on]===void 0||on[0]==="$"||on==="as"||on==="theme"||(on==="forwardedAs"?Jt.as=Ft.forwardedAs:Wt&&!Wt(on,Gt)||(Jt[on]=Ft[on]));var bn=function(It,Mt){var $t=Be(),Lt=It.generateAndInjectStyles(Mt,$t.styleSheet,$t.stylis);return Lt}(Dt,Ft),Ut=ie$1(Kt,qt);return bn&&(Ut+=" "+bn),Ft.className&&(Ut+=" "+Ft.className),Jt[L(Gt)&&!A$1.has(Gt)?"class":"className"]=Ut,Jt.ref=Ot,reactExports.createElement(Gt,Jt)}(Tt,wt,Pt)}bt.displayName=mt;var Tt=React.forwardRef(bt);return Tt.attrs=_t,Tt.componentStyle=vt,Tt.displayName=mt,Tt.shouldForwardProp=yt,Tt.foldedComponentIds=a?ie$1(et.foldedComponentIds,et.styledComponentId):"",Tt.styledComponentId=gt,Tt.target=a?et.target:o,Object.defineProperty(Tt,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(wt){this._foldedDefaultProps=a?function(Pt){for(var At=[],xt=1;xt<arguments.length;xt++)At[xt-1]=arguments[xt];for(var Ot=0,Rt=At;Ot<Rt.length;Ot++)le$1(Pt,Rt[Ot],!0);return Pt}({},et.defaultProps,wt):wt}}),ue$1(Tt,function(){return".".concat(Tt.styledComponentId)}),tt&&oe$1(Tt,o,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),Tt}function st(o,i){for(var s=[o[0]],a=0,et=i.length;a<et;a+=1)s.push(i[a],o[a+1]);return s}var it=function(o){return Object.assign(o,{isCss:!0})};function at(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];if(re$1(o)||ce(o))return it(Ue(st(_,__spreadArray$1([o],i,!0))));var a=o;return i.length===0&&a.length===1&&typeof a[0]=="string"?Ue(a):it(Ue(st(a,i)))}function ct(o,i,s){if(s===void 0&&(s=C$2),!i)throw he$1(1,i);var a=function(et){for(var tt=[],ot=1;ot<arguments.length;ot++)tt[ot-1]=arguments[ot];return o(i,s,at.apply(void 0,__spreadArray$1([et],tt,!1)))};return a.attrs=function(et){return ct(o,i,__assign(__assign({},s),{attrs:Array.prototype.concat(s.attrs,et).filter(Boolean)}))},a.withConfig=function(et){return ct(o,i,__assign(__assign({},s),et))},a}var lt=function(o){return ct(rt,o)},ut=lt;A$1.forEach(function(o){ut[o]=lt(o)});const Info1Svg="/assets/info1-VRiS9laC.svg",Info2Svg="/assets/info2-SorYDMwf.svg";var define_process_env_default$1={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CONSTANTS={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const assert=function(o,i){if(!o)throw assertionError(i)},assertionError=function(o){return new Error("Firebase Database ("+CONSTANTS.SDK_VERSION+") INTERNAL ASSERT FAILED: "+o)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(o){const i=[];let s=0;for(let a=0;a<o.length;a++){let et=o.charCodeAt(a);et<128?i[s++]=et:et<2048?(i[s++]=et>>6|192,i[s++]=et&63|128):(et&64512)===55296&&a+1<o.length&&(o.charCodeAt(a+1)&64512)===56320?(et=65536+((et&1023)<<10)+(o.charCodeAt(++a)&1023),i[s++]=et>>18|240,i[s++]=et>>12&63|128,i[s++]=et>>6&63|128,i[s++]=et&63|128):(i[s++]=et>>12|224,i[s++]=et>>6&63|128,i[s++]=et&63|128)}return i},byteArrayToString=function(o){const i=[];let s=0,a=0;for(;s<o.length;){const et=o[s++];if(et<128)i[a++]=String.fromCharCode(et);else if(et>191&&et<224){const tt=o[s++];i[a++]=String.fromCharCode((et&31)<<6|tt&63)}else if(et>239&&et<365){const tt=o[s++],ot=o[s++],dt=o[s++],ht=((et&7)<<18|(tt&63)<<12|(ot&63)<<6|dt&63)-65536;i[a++]=String.fromCharCode(55296+(ht>>10)),i[a++]=String.fromCharCode(56320+(ht&1023))}else{const tt=o[s++],ot=o[s++];i[a++]=String.fromCharCode((et&15)<<12|(tt&63)<<6|ot&63)}}return i.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(o,i){if(!Array.isArray(o))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=i?this.byteToCharMapWebSafe_:this.byteToCharMap_,a=[];for(let et=0;et<o.length;et+=3){const tt=o[et],ot=et+1<o.length,dt=ot?o[et+1]:0,ht=et+2<o.length,ft=ht?o[et+2]:0,pt=tt>>2,mt=(tt&3)<<4|dt>>4;let gt=(dt&15)<<2|ft>>6,_t=ft&63;ht||(_t=64,ot||(gt=64)),a.push(s[pt],s[mt],s[gt],s[_t])}return a.join("")},encodeString(o,i){return this.HAS_NATIVE_SUPPORT&&!i?btoa(o):this.encodeByteArray(stringToByteArray$1(o),i)},decodeString(o,i){return this.HAS_NATIVE_SUPPORT&&!i?atob(o):byteArrayToString(this.decodeStringToByteArray(o,i))},decodeStringToByteArray(o,i){this.init_();const s=i?this.charToByteMapWebSafe_:this.charToByteMap_,a=[];for(let et=0;et<o.length;){const tt=s[o.charAt(et++)],dt=et<o.length?s[o.charAt(et)]:0;++et;const ft=et<o.length?s[o.charAt(et)]:64;++et;const mt=et<o.length?s[o.charAt(et)]:64;if(++et,tt==null||dt==null||ft==null||mt==null)throw new DecodeBase64StringError;const gt=tt<<2|dt>>4;if(a.push(gt),ft!==64){const _t=dt<<4&240|ft>>2;if(a.push(_t),mt!==64){const yt=ft<<6&192|mt;a.push(yt)}}}return a},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let o=0;o<this.ENCODED_VALS.length;o++)this.byteToCharMap_[o]=this.ENCODED_VALS.charAt(o),this.charToByteMap_[this.byteToCharMap_[o]]=o,this.byteToCharMapWebSafe_[o]=this.ENCODED_VALS_WEBSAFE.charAt(o),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[o]]=o,o>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(o)]=o,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(o)]=o)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(o){const i=stringToByteArray$1(o);return base64.encodeByteArray(i,!0)},base64urlEncodeWithoutPadding=function(o){return base64Encode(o).replace(/\./g,"")},base64Decode=function(o){try{return base64.decodeString(o,!0)}catch(i){console.error("base64Decode failed: ",i)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function deepCopy(o){return deepExtend(void 0,o)}function deepExtend(o,i){if(!(i instanceof Object))return i;switch(i.constructor){case Date:const s=i;return new Date(s.getTime());case Object:o===void 0&&(o={});break;case Array:o=[];break;default:return i}for(const s in i)!i.hasOwnProperty(s)||!isValidKey$1(s)||(o[s]=deepExtend(o[s],i[s]));return o}function isValidKey$1(o){return o!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default$1>"u")return;const o=define_process_env_default$1.__FIREBASE_DEFAULTS__;if(o)return JSON.parse(o)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let o;try{o=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const i=o&&base64Decode(o[1]);return i&&JSON.parse(i)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(o){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${o}`);return}},getDefaultEmulatorHost=o=>{var i,s;return(s=(i=getDefaults())===null||i===void 0?void 0:i.emulatorHosts)===null||s===void 0?void 0:s[o]},getDefaultEmulatorHostnameAndPort=o=>{const i=getDefaultEmulatorHost(o);if(!i)return;const s=i.lastIndexOf(":");if(s<=0||s+1===i.length)throw new Error(`Invalid host ${i} with no separate hostname and port!`);const a=parseInt(i.substring(s+1),10);return i[0]==="["?[i.substring(1,s-1),a]:[i.substring(0,s),a]},getDefaultAppConfig=()=>{var o;return(o=getDefaults())===null||o===void 0?void 0:o.config},getExperimentalSetting=o=>{var i;return(i=getDefaults())===null||i===void 0?void 0:i[`_${o}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}wrapCallback(i){return(s,a)=>{s?this.reject(s):this.resolve(a),typeof i=="function"&&(this.promise.catch(()=>{}),i.length===1?i(s):i(s,a))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(o,i){if(o.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},a=i||"demo-project",et=o.iat||0,tt=o.sub||o.user_id;if(!tt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ot=Object.assign({iss:`https://securetoken.google.com/${a}`,aud:a,iat:et,exp:et+3600,auth_time:et,sub:tt,user_id:tt,firebase:{sign_in_provider:"custom",identities:{}}},o),dt="";return[base64urlEncodeWithoutPadding(JSON.stringify(s)),base64urlEncodeWithoutPadding(JSON.stringify(ot)),dt].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isMobileCordova(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(getUA())}function isNode$1(){var o;const i=(o=getDefaults())===null||o===void 0?void 0:o.forceEnvironment;if(i==="node")return!0;if(i==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isBrowserExtension(){const o=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof o=="object"&&o.id!==void 0}function isReactNative(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function isIE(){const o=getUA();return o.indexOf("MSIE ")>=0||o.indexOf("Trident/")>=0}function isNodeSdk(){return CONSTANTS.NODE_ADMIN===!0}function isSafari(){return!isNode$1()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((o,i)=>{try{let s=!0;const a="validate-browser-context-for-indexeddb-analytics-module",et=self.indexedDB.open(a);et.onsuccess=()=>{et.result.close(),s||self.indexedDB.deleteDatabase(a),o(!0)},et.onupgradeneeded=()=>{s=!1},et.onerror=()=>{var tt;i(((tt=et.error)===null||tt===void 0?void 0:tt.message)||"")}}catch(s){i(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(i,s,a){super(s),this.code=i,this.customData=a,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(i,s,a){this.service=i,this.serviceName=s,this.errors=a}create(i,...s){const a=s[0]||{},et=`${this.service}/${i}`,tt=this.errors[i],ot=tt?replaceTemplate(tt,a):"Error",dt=`${this.serviceName}: ${ot} (${et}).`;return new FirebaseError(et,dt,a)}}function replaceTemplate(o,i){return o.replace(PATTERN,(s,a)=>{const et=i[a];return et!=null?String(et):`<${a}?>`})}const PATTERN=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonEval(o){return JSON.parse(o)}function stringify(o){return JSON.stringify(o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const decode=function(o){let i={},s={},a={},et="";try{const tt=o.split(".");i=jsonEval(base64Decode(tt[0])||""),s=jsonEval(base64Decode(tt[1])||""),et=tt[2],a=s.d||{},delete s.d}catch{}return{header:i,claims:s,data:a,signature:et}},isValidFormat=function(o){const i=decode(o),s=i.claims;return!!s&&typeof s=="object"&&s.hasOwnProperty("iat")},isAdmin=function(o){const i=decode(o).claims;return typeof i=="object"&&i.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function contains$1(o,i){return Object.prototype.hasOwnProperty.call(o,i)}function safeGet(o,i){if(Object.prototype.hasOwnProperty.call(o,i))return o[i]}function isEmpty$1(o){for(const i in o)if(Object.prototype.hasOwnProperty.call(o,i))return!1;return!0}function map(o,i,s){const a={};for(const et in o)Object.prototype.hasOwnProperty.call(o,et)&&(a[et]=i.call(s,o[et],et,o));return a}function deepEqual(o,i){if(o===i)return!0;const s=Object.keys(o),a=Object.keys(i);for(const et of s){if(!a.includes(et))return!1;const tt=o[et],ot=i[et];if(isObject$1(tt)&&isObject$1(ot)){if(!deepEqual(tt,ot))return!1}else if(tt!==ot)return!1}for(const et of a)if(!s.includes(et))return!1;return!0}function isObject$1(o){return o!==null&&typeof o=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function querystring(o){const i=[];for(const[s,a]of Object.entries(o))Array.isArray(a)?a.forEach(et=>{i.push(encodeURIComponent(s)+"="+encodeURIComponent(et))}):i.push(encodeURIComponent(s)+"="+encodeURIComponent(a));return i.length?"&"+i.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sha1{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let i=1;i<this.blockSize;++i)this.pad_[i]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(i,s){s||(s=0);const a=this.W_;if(typeof i=="string")for(let mt=0;mt<16;mt++)a[mt]=i.charCodeAt(s)<<24|i.charCodeAt(s+1)<<16|i.charCodeAt(s+2)<<8|i.charCodeAt(s+3),s+=4;else for(let mt=0;mt<16;mt++)a[mt]=i[s]<<24|i[s+1]<<16|i[s+2]<<8|i[s+3],s+=4;for(let mt=16;mt<80;mt++){const gt=a[mt-3]^a[mt-8]^a[mt-14]^a[mt-16];a[mt]=(gt<<1|gt>>>31)&4294967295}let et=this.chain_[0],tt=this.chain_[1],ot=this.chain_[2],dt=this.chain_[3],ht=this.chain_[4],ft,pt;for(let mt=0;mt<80;mt++){mt<40?mt<20?(ft=dt^tt&(ot^dt),pt=1518500249):(ft=tt^ot^dt,pt=1859775393):mt<60?(ft=tt&ot|dt&(tt|ot),pt=2400959708):(ft=tt^ot^dt,pt=3395469782);const gt=(et<<5|et>>>27)+ft+ht+pt+a[mt]&4294967295;ht=dt,dt=ot,ot=(tt<<30|tt>>>2)&4294967295,tt=et,et=gt}this.chain_[0]=this.chain_[0]+et&4294967295,this.chain_[1]=this.chain_[1]+tt&4294967295,this.chain_[2]=this.chain_[2]+ot&4294967295,this.chain_[3]=this.chain_[3]+dt&4294967295,this.chain_[4]=this.chain_[4]+ht&4294967295}update(i,s){if(i==null)return;s===void 0&&(s=i.length);const a=s-this.blockSize;let et=0;const tt=this.buf_;let ot=this.inbuf_;for(;et<s;){if(ot===0)for(;et<=a;)this.compress_(i,et),et+=this.blockSize;if(typeof i=="string"){for(;et<s;)if(tt[ot]=i.charCodeAt(et),++ot,++et,ot===this.blockSize){this.compress_(tt),ot=0;break}}else for(;et<s;)if(tt[ot]=i[et],++ot,++et,ot===this.blockSize){this.compress_(tt),ot=0;break}}this.inbuf_=ot,this.total_+=s}digest(){const i=[];let s=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let et=this.blockSize-1;et>=56;et--)this.buf_[et]=s&255,s/=256;this.compress_(this.buf_);let a=0;for(let et=0;et<5;et++)for(let tt=24;tt>=0;tt-=8)i[a]=this.chain_[et]>>tt&255,++a;return i}}function createSubscribe(o,i){const s=new ObserverProxy(o,i);return s.subscribe.bind(s)}class ObserverProxy{constructor(i,s){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=s,this.task.then(()=>{i(this)}).catch(a=>{this.error(a)})}next(i){this.forEachObserver(s=>{s.next(i)})}error(i){this.forEachObserver(s=>{s.error(i)}),this.close(i)}complete(){this.forEachObserver(i=>{i.complete()}),this.close()}subscribe(i,s,a){let et;if(i===void 0&&s===void 0&&a===void 0)throw new Error("Missing Observer.");implementsAnyMethods(i,["next","error","complete"])?et=i:et={next:i,error:s,complete:a},et.next===void 0&&(et.next=noop$5),et.error===void 0&&(et.error=noop$5),et.complete===void 0&&(et.complete=noop$5);const tt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?et.error(this.finalError):et.complete()}catch{}}),this.observers.push(et),tt}unsubscribeOne(i){this.observers===void 0||this.observers[i]===void 0||(delete this.observers[i],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(i){if(!this.finalized)for(let s=0;s<this.observers.length;s++)this.sendOne(s,i)}sendOne(i,s){this.task.then(()=>{if(this.observers!==void 0&&this.observers[i]!==void 0)try{s(this.observers[i])}catch(a){typeof console<"u"&&console.error&&console.error(a)}})}close(i){this.finalized||(this.finalized=!0,i!==void 0&&(this.finalError=i),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function implementsAnyMethods(o,i){if(typeof o!="object"||o===null)return!1;for(const s of i)if(s in o&&typeof o[s]=="function")return!0;return!1}function noop$5(){}function errorPrefix(o,i){return`${o} failed: ${i} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray=function(o){const i=[];let s=0;for(let a=0;a<o.length;a++){let et=o.charCodeAt(a);if(et>=55296&&et<=56319){const tt=et-55296;a++,assert(a<o.length,"Surrogate pair missing trail surrogate.");const ot=o.charCodeAt(a)-56320;et=65536+(tt<<10)+ot}et<128?i[s++]=et:et<2048?(i[s++]=et>>6|192,i[s++]=et&63|128):et<65536?(i[s++]=et>>12|224,i[s++]=et>>6&63|128,i[s++]=et&63|128):(i[s++]=et>>18|240,i[s++]=et>>12&63|128,i[s++]=et>>6&63|128,i[s++]=et&63|128)}return i},stringLength=function(o){let i=0;for(let s=0;s<o.length;s++){const a=o.charCodeAt(s);a<128?i++:a<2048?i+=2:a>=55296&&a<=56319?(i+=4,s++):i+=3}return i};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(o){return o&&o._delegate?o._delegate:o}class Component{constructor(i,s,a){this.name=i,this.instanceFactory=s,this.type=a,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(i){return this.instantiationMode=i,this}setMultipleInstances(i){return this.multipleInstances=i,this}setServiceProps(i){return this.serviceProps=i,this}setInstanceCreatedCallback(i){return this.onInstanceCreated=i,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(i,s){this.name=i,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(i){const s=this.normalizeInstanceIdentifier(i);if(!this.instancesDeferred.has(s)){const a=new Deferred;if(this.instancesDeferred.set(s,a),this.isInitialized(s)||this.shouldAutoInitialize())try{const et=this.getOrInitializeService({instanceIdentifier:s});et&&a.resolve(et)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(i){var s;const a=this.normalizeInstanceIdentifier(i==null?void 0:i.identifier),et=(s=i==null?void 0:i.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(a)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:a})}catch(tt){if(et)return null;throw tt}else{if(et)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(i){if(i.name!==this.name)throw Error(`Mismatching Component ${i.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=i,!!this.shouldAutoInitialize()){if(isComponentEager(i))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[s,a]of this.instancesDeferred.entries()){const et=this.normalizeInstanceIdentifier(s);try{const tt=this.getOrInitializeService({instanceIdentifier:et});a.resolve(tt)}catch{}}}}clearInstance(i=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(i),this.instancesOptions.delete(i),this.instances.delete(i)}async delete(){const i=Array.from(this.instances.values());await Promise.all([...i.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...i.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(i=DEFAULT_ENTRY_NAME$1){return this.instances.has(i)}getOptions(i=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(i)||{}}initialize(i={}){const{options:s={}}=i,a=this.normalizeInstanceIdentifier(i.instanceIdentifier);if(this.isInitialized(a))throw Error(`${this.name}(${a}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const et=this.getOrInitializeService({instanceIdentifier:a,options:s});for(const[tt,ot]of this.instancesDeferred.entries()){const dt=this.normalizeInstanceIdentifier(tt);a===dt&&ot.resolve(et)}return et}onInit(i,s){var a;const et=this.normalizeInstanceIdentifier(s),tt=(a=this.onInitCallbacks.get(et))!==null&&a!==void 0?a:new Set;tt.add(i),this.onInitCallbacks.set(et,tt);const ot=this.instances.get(et);return ot&&i(ot,et),()=>{tt.delete(i)}}invokeOnInitCallbacks(i,s){const a=this.onInitCallbacks.get(s);if(a)for(const et of a)try{et(i,s)}catch{}}getOrInitializeService({instanceIdentifier:i,options:s={}}){let a=this.instances.get(i);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(i),options:s}),this.instances.set(i,a),this.instancesOptions.set(i,s),this.invokeOnInitCallbacks(a,i),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,i,a)}catch{}return a||null}normalizeInstanceIdentifier(i=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?i:DEFAULT_ENTRY_NAME$1:i}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(o){return o===DEFAULT_ENTRY_NAME$1?void 0:o}function isComponentEager(o){return o.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(i){this.name=i,this.providers=new Map}addComponent(i){const s=this.getProvider(i.name);if(s.isComponentSet())throw new Error(`Component ${i.name} has already been registered with ${this.name}`);s.setComponent(i)}addOrOverwriteComponent(i){this.getProvider(i.name).isComponentSet()&&this.providers.delete(i.name),this.addComponent(i)}getProvider(i){if(this.providers.has(i))return this.providers.get(i);const s=new Provider(i,this);return this.providers.set(i,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(o){o[o.DEBUG=0]="DEBUG",o[o.VERBOSE=1]="VERBOSE",o[o.INFO=2]="INFO",o[o.WARN=3]="WARN",o[o.ERROR=4]="ERROR",o[o.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(o,i,...s)=>{if(i<o.logLevel)return;const a=new Date().toISOString(),et=ConsoleMethod[i];if(et)console[et](`[${a}]  ${o.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${i})`)};class Logger{constructor(i){this.name=i,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(i){if(!(i in LogLevel))throw new TypeError(`Invalid value "${i}" assigned to \`logLevel\``);this._logLevel=i}setLogLevel(i){this._logLevel=typeof i=="string"?levelStringToEnum[i]:i}get logHandler(){return this._logHandler}set logHandler(i){if(typeof i!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=i}get userLogHandler(){return this._userLogHandler}set userLogHandler(i){this._userLogHandler=i}debug(...i){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...i),this._logHandler(this,LogLevel.DEBUG,...i)}log(...i){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...i),this._logHandler(this,LogLevel.VERBOSE,...i)}info(...i){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...i),this._logHandler(this,LogLevel.INFO,...i)}warn(...i){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...i),this._logHandler(this,LogLevel.WARN,...i)}error(...i){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...i),this._logHandler(this,LogLevel.ERROR,...i)}}const instanceOfAny=(o,i)=>i.some(s=>o instanceof s);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(o){const i=new Promise((s,a)=>{const et=()=>{o.removeEventListener("success",tt),o.removeEventListener("error",ot)},tt=()=>{s(wrap(o.result)),et()},ot=()=>{a(o.error),et()};o.addEventListener("success",tt),o.addEventListener("error",ot)});return i.then(s=>{s instanceof IDBCursor&&cursorRequestMap.set(s,o)}).catch(()=>{}),reverseTransformCache.set(i,o),i}function cacheDonePromiseForTransaction(o){if(transactionDoneMap.has(o))return;const i=new Promise((s,a)=>{const et=()=>{o.removeEventListener("complete",tt),o.removeEventListener("error",ot),o.removeEventListener("abort",ot)},tt=()=>{s(),et()},ot=()=>{a(o.error||new DOMException("AbortError","AbortError")),et()};o.addEventListener("complete",tt),o.addEventListener("error",ot),o.addEventListener("abort",ot)});transactionDoneMap.set(o,i)}let idbProxyTraps={get(o,i,s){if(o instanceof IDBTransaction){if(i==="done")return transactionDoneMap.get(o);if(i==="objectStoreNames")return o.objectStoreNames||transactionStoreNamesMap.get(o);if(i==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap(o[i])},set(o,i,s){return o[i]=s,!0},has(o,i){return o instanceof IDBTransaction&&(i==="done"||i==="store")?!0:i in o}};function replaceTraps(o){idbProxyTraps=o(idbProxyTraps)}function wrapFunction(o){return o===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(i,...s){const a=o.call(unwrap(this),i,...s);return transactionStoreNamesMap.set(a,i.sort?i.sort():[i]),wrap(a)}:getCursorAdvanceMethods().includes(o)?function(...i){return o.apply(unwrap(this),i),wrap(cursorRequestMap.get(this))}:function(...i){return wrap(o.apply(unwrap(this),i))}}function transformCachableValue(o){return typeof o=="function"?wrapFunction(o):(o instanceof IDBTransaction&&cacheDonePromiseForTransaction(o),instanceOfAny(o,getIdbProxyableTypes())?new Proxy(o,idbProxyTraps):o)}function wrap(o){if(o instanceof IDBRequest)return promisifyRequest(o);if(transformCache.has(o))return transformCache.get(o);const i=transformCachableValue(o);return i!==o&&(transformCache.set(o,i),reverseTransformCache.set(i,o)),i}const unwrap=o=>reverseTransformCache.get(o);function openDB(o,i,{blocked:s,upgrade:a,blocking:et,terminated:tt}={}){const ot=indexedDB.open(o,i),dt=wrap(ot);return a&&ot.addEventListener("upgradeneeded",ht=>{a(wrap(ot.result),ht.oldVersion,ht.newVersion,wrap(ot.transaction),ht)}),s&&ot.addEventListener("blocked",ht=>s(ht.oldVersion,ht.newVersion,ht)),dt.then(ht=>{tt&&ht.addEventListener("close",()=>tt()),et&&ht.addEventListener("versionchange",ft=>et(ft.oldVersion,ft.newVersion,ft))}).catch(()=>{}),dt}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(o,i){if(!(o instanceof IDBDatabase&&!(i in o)&&typeof i=="string"))return;if(cachedMethods.get(i))return cachedMethods.get(i);const s=i.replace(/FromIndex$/,""),a=i!==s,et=writeMethods.includes(s);if(!(s in(a?IDBIndex:IDBObjectStore).prototype)||!(et||readMethods.includes(s)))return;const tt=async function(ot,...dt){const ht=this.transaction(ot,et?"readwrite":"readonly");let ft=ht.store;return a&&(ft=ft.index(dt.shift())),(await Promise.all([ft[s](...dt),et&&ht.done]))[0]};return cachedMethods.set(i,tt),tt}replaceTraps(o=>({...o,get:(i,s,a)=>getMethod(i,s)||o.get(i,s,a),has:(i,s)=>!!getMethod(i,s)||o.has(i,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(i){this.container=i}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(isVersionServiceProvider(s)){const a=s.getImmediate();return`${a.library}/${a.version}`}else return null}).filter(s=>s).join(" ")}}function isVersionServiceProvider(o){const i=o.getComponent();return(i==null?void 0:i.type)==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.26";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger$1=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2$1="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$5="10.7.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2$1]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(o,i){try{o.container.addComponent(i)}catch(s){logger$1.debug(`Component ${i.name} failed to register with FirebaseApp ${o.name}`,s)}}function _registerComponent(o){const i=o.name;if(_components.has(i))return logger$1.debug(`There were multiple attempts to register component ${i}.`),!1;_components.set(i,o);for(const s of _apps.values())_addComponent(s,o);return!0}function _getProvider(o,i){const s=o.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),o.container.getProvider(i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(i,s,a){this._isDeleted=!1,this._options=Object.assign({},i),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=a,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(i){this.checkDestroyed(),this._automaticDataCollectionEnabled=i}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(i){this._isDeleted=i}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION$1=version$5;function initializeApp(o,i={}){let s=o;typeof i!="object"&&(i={name:i});const a=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},i),et=a.name;if(typeof et!="string"||!et)throw ERROR_FACTORY.create("bad-app-name",{appName:String(et)});if(s||(s=getDefaultAppConfig()),!s)throw ERROR_FACTORY.create("no-options");const tt=_apps.get(et);if(tt){if(deepEqual(s,tt.options)&&deepEqual(a,tt.config))return tt;throw ERROR_FACTORY.create("duplicate-app",{appName:et})}const ot=new ComponentContainer(et);for(const ht of _components.values())ot.addComponent(ht);const dt=new FirebaseAppImpl(s,a,ot);return _apps.set(et,dt),dt}function getApp(o=DEFAULT_ENTRY_NAME){const i=_apps.get(o);if(!i&&o===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!i)throw ERROR_FACTORY.create("no-app",{appName:o});return i}function registerVersion(o,i,s){var a;let et=(a=PLATFORM_LOG_STRING[o])!==null&&a!==void 0?a:o;s&&(et+=`-${s}`);const tt=et.match(/\s|\//),ot=i.match(/\s|\//);if(tt||ot){const dt=[`Unable to register library "${et}" with version "${i}":`];tt&&dt.push(`library name "${et}" contains illegal characters (whitespace or "/")`),tt&&ot&&dt.push("and"),ot&&dt.push(`version name "${i}" contains illegal characters (whitespace or "/")`),logger$1.warn(dt.join(" "));return}_registerComponent(new Component(`${et}-version`,()=>({library:et,version:i}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME$1="firebase-heartbeat-database",DB_VERSION$1=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME$1,DB_VERSION$1,{upgrade:(o,i)=>{switch(i){case 0:try{o.createObjectStore(STORE_NAME)}catch(s){console.warn(s)}}}}).catch(o=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:o.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(o){try{return await(await getDbPromise()).transaction(STORE_NAME).objectStore(STORE_NAME).get(computeKey(o))}catch(i){if(i instanceof FirebaseError)logger$1.warn(i.message);else{const s=ERROR_FACTORY.create("idb-get",{originalErrorMessage:i==null?void 0:i.message});logger$1.warn(s.message)}}}async function writeHeartbeatsToIndexedDB(o,i){try{const a=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await a.objectStore(STORE_NAME).put(i,computeKey(o)),await a.done}catch(s){if(s instanceof FirebaseError)logger$1.warn(s.message);else{const a=ERROR_FACTORY.create("idb-set",{originalErrorMessage:s==null?void 0:s.message});logger$1.warn(a.message)}}}function computeKey(o){return`${o.name}!${o.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(i){this.container=i,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(s),this._heartbeatsCachePromise=this._storage.read().then(a=>(this._heartbeatsCache=a,a))}async triggerHeartbeat(){var i,s;const et=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),tt=getUTCDateString();if(!(((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===tt||this._heartbeatsCache.heartbeats.some(ot=>ot.date===tt)))return this._heartbeatsCache.heartbeats.push({date:tt,agent:et}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(ot=>{const dt=new Date(ot.date).valueOf();return Date.now()-dt<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var i;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((i=this._heartbeatsCache)===null||i===void 0?void 0:i.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=getUTCDateString(),{heartbeatsToSend:a,unsentEntries:et}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),tt=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:a}));return this._heartbeatsCache.lastSentHeartbeatDate=s,et.length>0?(this._heartbeatsCache.heartbeats=et,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),tt}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(o,i=MAX_HEADER_BYTES){const s=[];let a=o.slice();for(const et of o){const tt=s.find(ot=>ot.agent===et.agent);if(tt){if(tt.dates.push(et.date),countBytes(s)>i){tt.dates.pop();break}}else if(s.push({agent:et.agent,dates:[et.date]}),countBytes(s)>i){s.pop();break}a=a.slice(1)}return{heartbeatsToSend:s,unsentEntries:a}}class HeartbeatStorageImpl{constructor(i){this.app=i,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await readHeartbeatsFromIndexedDB(this.app);return s!=null&&s.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(i){var s;if(await this._canUseIndexedDBPromise){const et=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(s=i.lastSentHeartbeatDate)!==null&&s!==void 0?s:et.lastSentHeartbeatDate,heartbeats:i.heartbeats})}else return}async add(i){var s;if(await this._canUseIndexedDBPromise){const et=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(s=i.lastSentHeartbeatDate)!==null&&s!==void 0?s:et.lastSentHeartbeatDate,heartbeats:[...et.heartbeats,...i.heartbeats]})}else return}}function countBytes(o){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:o})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(o){_registerComponent(new Component("platform-logger",i=>new PlatformLoggerServiceImpl(i),"PRIVATE")),_registerComponent(new Component("heartbeat",i=>new HeartbeatServiceImpl(i),"PRIVATE")),registerVersion(name$o,version$1$1,o),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var name$2="firebase",version$4="10.7.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$2,version$4,"app");function _prodErrorMap(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const prodErrorMap=_prodErrorMap,_DEFAULT_AUTH_ERROR_FACTORY=new ErrorFactory("auth","Firebase",_prodErrorMap());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient$1=new Logger("@firebase/auth");function _logWarn(o,...i){logClient$1.logLevel<=LogLevel.WARN&&logClient$1.warn(`Auth (${SDK_VERSION$1}): ${o}`,...i)}function _logError(o,...i){logClient$1.logLevel<=LogLevel.ERROR&&logClient$1.error(`Auth (${SDK_VERSION$1}): ${o}`,...i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _fail(o,...i){throw createErrorInternal(o,...i)}function _createError(o,...i){return createErrorInternal(o,...i)}function _errorWithCustomMessage(o,i,s){const a=Object.assign(Object.assign({},prodErrorMap()),{[i]:s});return new ErrorFactory("auth","Firebase",a).create(i,{appName:o.name})}function _assertInstanceOf(o,i,s){const a=s;if(!(i instanceof a))throw a.name!==i.constructor.name&&_fail(o,"argument-error"),_errorWithCustomMessage(o,"argument-error",`Type of ${i.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function createErrorInternal(o,...i){if(typeof o!="string"){const s=i[0],a=[...i.slice(1)];return a[0]&&(a[0].appName=o.name),o._errorFactory.create(s,...a)}return _DEFAULT_AUTH_ERROR_FACTORY.create(o,...i)}function _assert(o,i,...s){if(!o)throw createErrorInternal(i,...s)}function debugFail(o){const i="INTERNAL ASSERTION FAILED: "+o;throw _logError(i),new Error(i)}function debugAssert(o,i){o||debugFail(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getCurrentUrl(){var o;return typeof self<"u"&&((o=self.location)===null||o===void 0?void 0:o.href)||""}function _isHttpOrHttps(){return _getCurrentScheme()==="http:"||_getCurrentScheme()==="https:"}function _getCurrentScheme(){var o;return typeof self<"u"&&((o=self.location)===null||o===void 0?void 0:o.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isOnline(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(_isHttpOrHttps()||isBrowserExtension()||"connection"in navigator)?navigator.onLine:!0}function _getUserLanguage(){if(typeof navigator>"u")return null;const o=navigator;return o.languages&&o.languages[0]||o.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Delay{constructor(i,s){this.shortDelay=i,this.longDelay=s,debugAssert(s>i,"Short delay should be less than long delay!"),this.isMobile=isMobileCordova()||isReactNative()}get(){return _isOnline()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _emulatorUrl(o,i){debugAssert(o.emulator,"Emulator should always be set here");const{url:s}=o.emulator;return i?`${s}${i.startsWith("/")?i.slice(1):i}`:s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FetchProvider{static initialize(i,s,a){this.fetchImpl=i,s&&(this.headersImpl=s),a&&(this.responseImpl=a)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;debugFail("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;debugFail("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;debugFail("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SERVER_ERROR_MAP={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_API_TIMEOUT_MS=new Delay(3e4,6e4);function _addTidIfNecessary(o,i){return o.tenantId&&!i.tenantId?Object.assign(Object.assign({},i),{tenantId:o.tenantId}):i}async function _performApiRequest(o,i,s,a,et={}){return _performFetchWithErrorHandling(o,et,async()=>{let tt={},ot={};a&&(i==="GET"?ot=a:tt={body:JSON.stringify(a)});const dt=querystring(Object.assign({key:o.config.apiKey},ot)).slice(1),ht=await o._getAdditionalHeaders();return ht["Content-Type"]="application/json",o.languageCode&&(ht["X-Firebase-Locale"]=o.languageCode),FetchProvider.fetch()(_getFinalTarget(o,o.config.apiHost,s,dt),Object.assign({method:i,headers:ht,referrerPolicy:"no-referrer"},tt))})}async function _performFetchWithErrorHandling(o,i,s){o._canInitEmulator=!1;const a=Object.assign(Object.assign({},SERVER_ERROR_MAP),i);try{const et=new NetworkTimeout(o),tt=await Promise.race([s(),et.promise]);et.clearNetworkTimeout();const ot=await tt.json();if("needConfirmation"in ot)throw _makeTaggedError(o,"account-exists-with-different-credential",ot);if(tt.ok&&!("errorMessage"in ot))return ot;{const dt=tt.ok?ot.errorMessage:ot.error.message,[ht,ft]=dt.split(" : ");if(ht==="FEDERATED_USER_ID_ALREADY_LINKED")throw _makeTaggedError(o,"credential-already-in-use",ot);if(ht==="EMAIL_EXISTS")throw _makeTaggedError(o,"email-already-in-use",ot);if(ht==="USER_DISABLED")throw _makeTaggedError(o,"user-disabled",ot);const pt=a[ht]||ht.toLowerCase().replace(/[_\s]+/g,"-");if(ft)throw _errorWithCustomMessage(o,pt,ft);_fail(o,pt)}}catch(et){if(et instanceof FirebaseError)throw et;_fail(o,"network-request-failed",{message:String(et)})}}async function _performSignInRequest(o,i,s,a,et={}){const tt=await _performApiRequest(o,i,s,a,et);return"mfaPendingCredential"in tt&&_fail(o,"multi-factor-auth-required",{_serverResponse:tt}),tt}function _getFinalTarget(o,i,s,a){const et=`${i}${s}?${a}`;return o.config.emulator?_emulatorUrl(o.config,et):`${o.config.apiScheme}://${et}`}function _parseEnforcementState(o){switch(o){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NetworkTimeout{constructor(i){this.auth=i,this.timer=null,this.promise=new Promise((s,a)=>{this.timer=setTimeout(()=>a(_createError(this.auth,"network-request-failed")),DEFAULT_API_TIMEOUT_MS.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _makeTaggedError(o,i,s){const a={appName:o.name};s.email&&(a.email=s.email),s.phoneNumber&&(a.phoneNumber=s.phoneNumber);const et=_createError(o,i,a);return et.customData._tokenResponse=s,et}function isEnterprise(o){return o!==void 0&&o.enterprise!==void 0}class RecaptchaConfig{constructor(i){if(this.siteKey="",this.recaptchaEnforcementState=[],i.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=i.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=i.recaptchaEnforcementState}getProviderEnforcementState(i){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const s of this.recaptchaEnforcementState)if(s.provider&&s.provider===i)return _parseEnforcementState(s.enforcementState);return null}isProviderEnabled(i){return this.getProviderEnforcementState(i)==="ENFORCE"||this.getProviderEnforcementState(i)==="AUDIT"}}async function getRecaptchaConfig(o,i){return _performApiRequest(o,"GET","/v2/recaptchaConfig",_addTidIfNecessary(o,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function deleteAccount(o,i){return _performApiRequest(o,"POST","/v1/accounts:delete",i)}async function getAccountInfo(o,i){return _performApiRequest(o,"POST","/v1/accounts:lookup",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function utcTimestampToDateString(o){if(o)try{const i=new Date(Number(o));if(!isNaN(i.getTime()))return i.toUTCString()}catch{}}async function getIdTokenResult(o,i=!1){const s=getModularInstance(o),a=await s.getIdToken(i),et=_parseToken(a);_assert(et&&et.exp&&et.auth_time&&et.iat,s.auth,"internal-error");const tt=typeof et.firebase=="object"?et.firebase:void 0,ot=tt==null?void 0:tt.sign_in_provider;return{claims:et,token:a,authTime:utcTimestampToDateString(secondsStringToMilliseconds(et.auth_time)),issuedAtTime:utcTimestampToDateString(secondsStringToMilliseconds(et.iat)),expirationTime:utcTimestampToDateString(secondsStringToMilliseconds(et.exp)),signInProvider:ot||null,signInSecondFactor:(tt==null?void 0:tt.sign_in_second_factor)||null}}function secondsStringToMilliseconds(o){return Number(o)*1e3}function _parseToken(o){const[i,s,a]=o.split(".");if(i===void 0||s===void 0||a===void 0)return _logError("JWT malformed, contained fewer than 3 sections"),null;try{const et=base64Decode(s);return et?JSON.parse(et):(_logError("Failed to decode base64 JWT payload"),null)}catch(et){return _logError("Caught error parsing JWT payload as JSON",et==null?void 0:et.toString()),null}}function _tokenExpiresIn(o){const i=_parseToken(o);return _assert(i,"internal-error"),_assert(typeof i.exp<"u","internal-error"),_assert(typeof i.iat<"u","internal-error"),Number(i.exp)-Number(i.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _logoutIfInvalidated(o,i,s=!1){if(s)return i;try{return await i}catch(a){throw a instanceof FirebaseError&&isUserInvalidated(a)&&o.auth.currentUser===o&&await o.auth.signOut(),a}}function isUserInvalidated({code:o}){return o==="auth/user-disabled"||o==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ProactiveRefresh{constructor(i){this.user=i,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(i){var s;if(i){const a=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),a}else{this.errorBackoff=3e4;const et=((s=this.user.stsTokenManager.expirationTime)!==null&&s!==void 0?s:0)-Date.now()-3e5;return Math.max(0,et)}}schedule(i=!1){if(!this.isRunning)return;const s=this.getInterval(i);this.timerId=setTimeout(async()=>{await this.iteration()},s)}async iteration(){try{await this.user.getIdToken(!0)}catch(i){(i==null?void 0:i.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserMetadata{constructor(i,s){this.createdAt=i,this.lastLoginAt=s,this._initializeTime()}_initializeTime(){this.lastSignInTime=utcTimestampToDateString(this.lastLoginAt),this.creationTime=utcTimestampToDateString(this.createdAt)}_copy(i){this.createdAt=i.createdAt,this.lastLoginAt=i.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reloadWithoutSaving(o){var i;const s=o.auth,a=await o.getIdToken(),et=await _logoutIfInvalidated(o,getAccountInfo(s,{idToken:a}));_assert(et==null?void 0:et.users.length,s,"internal-error");const tt=et.users[0];o._notifyReloadListener(tt);const ot=!((i=tt.providerUserInfo)===null||i===void 0)&&i.length?extractProviderData(tt.providerUserInfo):[],dt=mergeProviderData(o.providerData,ot),ht=o.isAnonymous,ft=!(o.email&&tt.passwordHash)&&!(dt!=null&&dt.length),pt=ht?ft:!1,mt={uid:tt.localId,displayName:tt.displayName||null,photoURL:tt.photoUrl||null,email:tt.email||null,emailVerified:tt.emailVerified||!1,phoneNumber:tt.phoneNumber||null,tenantId:tt.tenantId||null,providerData:dt,metadata:new UserMetadata(tt.createdAt,tt.lastLoginAt),isAnonymous:pt};Object.assign(o,mt)}async function reload(o){const i=getModularInstance(o);await _reloadWithoutSaving(i),await i.auth._persistUserIfCurrent(i),i.auth._notifyListenersIfCurrent(i)}function mergeProviderData(o,i){return[...o.filter(a=>!i.some(et=>et.providerId===a.providerId)),...i]}function extractProviderData(o){return o.map(i=>{var{providerId:s}=i,a=__rest$d(i,["providerId"]);return{providerId:s,uid:a.rawId||"",displayName:a.displayName||null,email:a.email||null,phoneNumber:a.phoneNumber||null,photoURL:a.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function requestStsToken(o,i){const s=await _performFetchWithErrorHandling(o,{},async()=>{const a=querystring({grant_type:"refresh_token",refresh_token:i}).slice(1),{tokenApiHost:et,apiKey:tt}=o.config,ot=_getFinalTarget(o,et,"/v1/token",`key=${tt}`),dt=await o._getAdditionalHeaders();return dt["Content-Type"]="application/x-www-form-urlencoded",FetchProvider.fetch()(ot,{method:"POST",headers:dt,body:a})});return{accessToken:s.access_token,expiresIn:s.expires_in,refreshToken:s.refresh_token}}async function revokeToken(o,i){return _performApiRequest(o,"POST","/v2/accounts:revokeToken",_addTidIfNecessary(o,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StsTokenManager{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(i){_assert(i.idToken,"internal-error"),_assert(typeof i.idToken<"u","internal-error"),_assert(typeof i.refreshToken<"u","internal-error");const s="expiresIn"in i&&typeof i.expiresIn<"u"?Number(i.expiresIn):_tokenExpiresIn(i.idToken);this.updateTokensAndExpiration(i.idToken,i.refreshToken,s)}async getToken(i,s=!1){return _assert(!this.accessToken||this.refreshToken,i,"user-token-expired"),!s&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(i,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(i,s){const{accessToken:a,refreshToken:et,expiresIn:tt}=await requestStsToken(i,s);this.updateTokensAndExpiration(a,et,Number(tt))}updateTokensAndExpiration(i,s,a){this.refreshToken=s||null,this.accessToken=i||null,this.expirationTime=Date.now()+a*1e3}static fromJSON(i,s){const{refreshToken:a,accessToken:et,expirationTime:tt}=s,ot=new StsTokenManager;return a&&(_assert(typeof a=="string","internal-error",{appName:i}),ot.refreshToken=a),et&&(_assert(typeof et=="string","internal-error",{appName:i}),ot.accessToken=et),tt&&(_assert(typeof tt=="number","internal-error",{appName:i}),ot.expirationTime=tt),ot}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(i){this.accessToken=i.accessToken,this.refreshToken=i.refreshToken,this.expirationTime=i.expirationTime}_clone(){return Object.assign(new StsTokenManager,this.toJSON())}_performRefresh(){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function assertStringOrUndefined(o,i){_assert(typeof o=="string"||typeof o>"u","internal-error",{appName:i})}class UserImpl{constructor(i){var{uid:s,auth:a,stsTokenManager:et}=i,tt=__rest$d(i,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ProactiveRefresh(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=s,this.auth=a,this.stsTokenManager=et,this.accessToken=et.accessToken,this.displayName=tt.displayName||null,this.email=tt.email||null,this.emailVerified=tt.emailVerified||!1,this.phoneNumber=tt.phoneNumber||null,this.photoURL=tt.photoURL||null,this.isAnonymous=tt.isAnonymous||!1,this.tenantId=tt.tenantId||null,this.providerData=tt.providerData?[...tt.providerData]:[],this.metadata=new UserMetadata(tt.createdAt||void 0,tt.lastLoginAt||void 0)}async getIdToken(i){const s=await _logoutIfInvalidated(this,this.stsTokenManager.getToken(this.auth,i));return _assert(s,this.auth,"internal-error"),this.accessToken!==s&&(this.accessToken=s,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),s}getIdTokenResult(i){return getIdTokenResult(this,i)}reload(){return reload(this)}_assign(i){this!==i&&(_assert(this.uid===i.uid,this.auth,"internal-error"),this.displayName=i.displayName,this.photoURL=i.photoURL,this.email=i.email,this.emailVerified=i.emailVerified,this.phoneNumber=i.phoneNumber,this.isAnonymous=i.isAnonymous,this.tenantId=i.tenantId,this.providerData=i.providerData.map(s=>Object.assign({},s)),this.metadata._copy(i.metadata),this.stsTokenManager._assign(i.stsTokenManager))}_clone(i){const s=new UserImpl(Object.assign(Object.assign({},this),{auth:i,stsTokenManager:this.stsTokenManager._clone()}));return s.metadata._copy(this.metadata),s}_onReload(i){_assert(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=i,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(i){this.reloadListener?this.reloadListener(i):this.reloadUserInfo=i}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(i,s=!1){let a=!1;i.idToken&&i.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(i),a=!0),s&&await _reloadWithoutSaving(this),await this.auth._persistUserIfCurrent(this),a&&this.auth._notifyListenersIfCurrent(this)}async delete(){const i=await this.getIdToken();return await _logoutIfInvalidated(this,deleteAccount(this.auth,{idToken:i})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(i=>Object.assign({},i)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(i,s){var a,et,tt,ot,dt,ht,ft,pt;const mt=(a=s.displayName)!==null&&a!==void 0?a:void 0,gt=(et=s.email)!==null&&et!==void 0?et:void 0,_t=(tt=s.phoneNumber)!==null&&tt!==void 0?tt:void 0,yt=(ot=s.photoURL)!==null&&ot!==void 0?ot:void 0,St=(dt=s.tenantId)!==null&&dt!==void 0?dt:void 0,Et=(ht=s._redirectEventId)!==null&&ht!==void 0?ht:void 0,vt=(ft=s.createdAt)!==null&&ft!==void 0?ft:void 0,bt=(pt=s.lastLoginAt)!==null&&pt!==void 0?pt:void 0,{uid:Tt,emailVerified:wt,isAnonymous:Pt,providerData:At,stsTokenManager:xt}=s;_assert(Tt&&xt,i,"internal-error");const Ot=StsTokenManager.fromJSON(this.name,xt);_assert(typeof Tt=="string",i,"internal-error"),assertStringOrUndefined(mt,i.name),assertStringOrUndefined(gt,i.name),_assert(typeof wt=="boolean",i,"internal-error"),_assert(typeof Pt=="boolean",i,"internal-error"),assertStringOrUndefined(_t,i.name),assertStringOrUndefined(yt,i.name),assertStringOrUndefined(St,i.name),assertStringOrUndefined(Et,i.name),assertStringOrUndefined(vt,i.name),assertStringOrUndefined(bt,i.name);const Rt=new UserImpl({uid:Tt,auth:i,email:gt,emailVerified:wt,displayName:mt,isAnonymous:Pt,photoURL:yt,phoneNumber:_t,tenantId:St,stsTokenManager:Ot,createdAt:vt,lastLoginAt:bt});return At&&Array.isArray(At)&&(Rt.providerData=At.map(Dt=>Object.assign({},Dt))),Et&&(Rt._redirectEventId=Et),Rt}static async _fromIdTokenResponse(i,s,a=!1){const et=new StsTokenManager;et.updateFromServerResponse(s);const tt=new UserImpl({uid:s.localId,auth:i,stsTokenManager:et,isAnonymous:a});return await _reloadWithoutSaving(tt),tt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const instanceCache=new Map;function _getInstance(o){debugAssert(o instanceof Function,"Expected a class definition");let i=instanceCache.get(o);return i?(debugAssert(i instanceof o,"Instance stored in cache mismatched with class"),i):(i=new o,instanceCache.set(o,i),i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class InMemoryPersistence{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(i,s){this.storage[i]=s}async _get(i){const s=this.storage[i];return s===void 0?null:s}async _remove(i){delete this.storage[i]}_addListener(i,s){}_removeListener(i,s){}}InMemoryPersistence.type="NONE";const inMemoryPersistence=InMemoryPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _persistenceKeyName(o,i,s){return`firebase:${o}:${i}:${s}`}class PersistenceUserManager{constructor(i,s,a){this.persistence=i,this.auth=s,this.userKey=a;const{config:et,name:tt}=this.auth;this.fullUserKey=_persistenceKeyName(this.userKey,et.apiKey,tt),this.fullPersistenceKey=_persistenceKeyName("persistence",et.apiKey,tt),this.boundEventHandler=s._onStorageEvent.bind(s),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(i){return this.persistence._set(this.fullUserKey,i.toJSON())}async getCurrentUser(){const i=await this.persistence._get(this.fullUserKey);return i?UserImpl._fromJSON(this.auth,i):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(i){if(this.persistence===i)return;const s=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=i,s)return this.setCurrentUser(s)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(i,s,a="authUser"){if(!s.length)return new PersistenceUserManager(_getInstance(inMemoryPersistence),i,a);const et=(await Promise.all(s.map(async ft=>{if(await ft._isAvailable())return ft}))).filter(ft=>ft);let tt=et[0]||_getInstance(inMemoryPersistence);const ot=_persistenceKeyName(a,i.config.apiKey,i.name);let dt=null;for(const ft of s)try{const pt=await ft._get(ot);if(pt){const mt=UserImpl._fromJSON(i,pt);ft!==tt&&(dt=mt),tt=ft;break}}catch{}const ht=et.filter(ft=>ft._shouldAllowMigration);return!tt._shouldAllowMigration||!ht.length?new PersistenceUserManager(tt,i,a):(tt=ht[0],dt&&await tt._set(ot,dt.toJSON()),await Promise.all(s.map(async ft=>{if(ft!==tt)try{await ft._remove(ot)}catch{}})),new PersistenceUserManager(tt,i,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getBrowserName(o){const i=o.toLowerCase();if(i.includes("opera/")||i.includes("opr/")||i.includes("opios/"))return"Opera";if(_isIEMobile(i))return"IEMobile";if(i.includes("msie")||i.includes("trident/"))return"IE";if(i.includes("edge/"))return"Edge";if(_isFirefox(i))return"Firefox";if(i.includes("silk/"))return"Silk";if(_isBlackBerry(i))return"Blackberry";if(_isWebOS(i))return"Webos";if(_isSafari(i))return"Safari";if((i.includes("chrome/")||_isChromeIOS(i))&&!i.includes("edge/"))return"Chrome";if(_isAndroid(i))return"Android";{const s=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,a=o.match(s);if((a==null?void 0:a.length)===2)return a[1]}return"Other"}function _isFirefox(o=getUA()){return/firefox\//i.test(o)}function _isSafari(o=getUA()){const i=o.toLowerCase();return i.includes("safari/")&&!i.includes("chrome/")&&!i.includes("crios/")&&!i.includes("android")}function _isChromeIOS(o=getUA()){return/crios\//i.test(o)}function _isIEMobile(o=getUA()){return/iemobile/i.test(o)}function _isAndroid(o=getUA()){return/android/i.test(o)}function _isBlackBerry(o=getUA()){return/blackberry/i.test(o)}function _isWebOS(o=getUA()){return/webos/i.test(o)}function _isIOS(o=getUA()){return/iphone|ipad|ipod/i.test(o)||/macintosh/i.test(o)&&/mobile/i.test(o)}function _isIOSStandalone(o=getUA()){var i;return _isIOS(o)&&!!(!((i=window.navigator)===null||i===void 0)&&i.standalone)}function _isIE10(){return isIE()&&document.documentMode===10}function _isMobileBrowser(o=getUA()){return _isIOS(o)||_isAndroid(o)||_isWebOS(o)||_isBlackBerry(o)||/windows phone/i.test(o)||_isIEMobile(o)}function _isIframe(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _getClientVersion(o,i=[]){let s;switch(o){case"Browser":s=_getBrowserName(getUA());break;case"Worker":s=`${_getBrowserName(getUA())}-${o}`;break;default:s=o}const a=i.length?i.join(","):"FirebaseCore-web";return`${s}/JsCore/${SDK_VERSION$1}/${a}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthMiddlewareQueue{constructor(i){this.auth=i,this.queue=[]}pushCallback(i,s){const a=tt=>new Promise((ot,dt)=>{try{const ht=i(tt);ot(ht)}catch(ht){dt(ht)}});a.onAbort=s,this.queue.push(a);const et=this.queue.length-1;return()=>{this.queue[et]=()=>Promise.resolve()}}async runMiddleware(i){if(this.auth.currentUser===i)return;const s=[];try{for(const a of this.queue)await a(i),a.onAbort&&s.push(a.onAbort)}catch(a){s.reverse();for(const et of s)try{et()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:a==null?void 0:a.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getPasswordPolicy(o,i={}){return _performApiRequest(o,"GET","/v2/passwordPolicy",_addTidIfNecessary(o,i))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MINIMUM_MIN_PASSWORD_LENGTH=6;class PasswordPolicyImpl{constructor(i){var s,a,et,tt;const ot=i.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(s=ot.minPasswordLength)!==null&&s!==void 0?s:MINIMUM_MIN_PASSWORD_LENGTH,ot.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=ot.maxPasswordLength),ot.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=ot.containsLowercaseCharacter),ot.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=ot.containsUppercaseCharacter),ot.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=ot.containsNumericCharacter),ot.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=ot.containsNonAlphanumericCharacter),this.enforcementState=i.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(et=(a=i.allowedNonAlphanumericCharacters)===null||a===void 0?void 0:a.join(""))!==null&&et!==void 0?et:"",this.forceUpgradeOnSignin=(tt=i.forceUpgradeOnSignin)!==null&&tt!==void 0?tt:!1,this.schemaVersion=i.schemaVersion}validatePassword(i){var s,a,et,tt,ot,dt;const ht={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(i,ht),this.validatePasswordCharacterOptions(i,ht),ht.isValid&&(ht.isValid=(s=ht.meetsMinPasswordLength)!==null&&s!==void 0?s:!0),ht.isValid&&(ht.isValid=(a=ht.meetsMaxPasswordLength)!==null&&a!==void 0?a:!0),ht.isValid&&(ht.isValid=(et=ht.containsLowercaseLetter)!==null&&et!==void 0?et:!0),ht.isValid&&(ht.isValid=(tt=ht.containsUppercaseLetter)!==null&&tt!==void 0?tt:!0),ht.isValid&&(ht.isValid=(ot=ht.containsNumericCharacter)!==null&&ot!==void 0?ot:!0),ht.isValid&&(ht.isValid=(dt=ht.containsNonAlphanumericCharacter)!==null&&dt!==void 0?dt:!0),ht}validatePasswordLengthOptions(i,s){const a=this.customStrengthOptions.minPasswordLength,et=this.customStrengthOptions.maxPasswordLength;a&&(s.meetsMinPasswordLength=i.length>=a),et&&(s.meetsMaxPasswordLength=i.length<=et)}validatePasswordCharacterOptions(i,s){this.updatePasswordCharacterOptionsStatuses(s,!1,!1,!1,!1);let a;for(let et=0;et<i.length;et++)a=i.charAt(et),this.updatePasswordCharacterOptionsStatuses(s,a>="a"&&a<="z",a>="A"&&a<="Z",a>="0"&&a<="9",this.allowedNonAlphanumericCharacters.includes(a))}updatePasswordCharacterOptionsStatuses(i,s,a,et,tt){this.customStrengthOptions.containsLowercaseLetter&&(i.containsLowercaseLetter||(i.containsLowercaseLetter=s)),this.customStrengthOptions.containsUppercaseLetter&&(i.containsUppercaseLetter||(i.containsUppercaseLetter=a)),this.customStrengthOptions.containsNumericCharacter&&(i.containsNumericCharacter||(i.containsNumericCharacter=et)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(i.containsNonAlphanumericCharacter||(i.containsNonAlphanumericCharacter=tt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthImpl{constructor(i,s,a,et){this.app=i,this.heartbeatServiceProvider=s,this.appCheckServiceProvider=a,this.config=et,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Subscription(this),this.idTokenSubscription=new Subscription(this),this.beforeStateQueue=new AuthMiddlewareQueue(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_DEFAULT_AUTH_ERROR_FACTORY,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=i.name,this.clientVersion=et.sdkClientVersion}_initializeWithPersistence(i,s){return s&&(this._popupRedirectResolver=_getInstance(s)),this._initializationPromise=this.queue(async()=>{var a,et;if(!this._deleted&&(this.persistenceManager=await PersistenceUserManager.create(this,i),!this._deleted)){if(!((a=this._popupRedirectResolver)===null||a===void 0)&&a._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(s),this.lastNotifiedUid=((et=this.currentUser)===null||et===void 0?void 0:et.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const i=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!i)){if(this.currentUser&&i&&this.currentUser.uid===i.uid){this._currentUser._assign(i),await this.currentUser.getIdToken();return}await this._updateCurrentUser(i,!0)}}async initializeCurrentUser(i){var s;const a=await this.assertedPersistence.getCurrentUser();let et=a,tt=!1;if(i&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const ot=(s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId,dt=et==null?void 0:et._redirectEventId,ht=await this.tryRedirectSignIn(i);(!ot||ot===dt)&&(ht!=null&&ht.user)&&(et=ht.user,tt=!0)}if(!et)return this.directlySetCurrentUser(null);if(!et._redirectEventId){if(tt)try{await this.beforeStateQueue.runMiddleware(et)}catch(ot){et=a,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(ot))}return et?this.reloadAndSetCurrentUserOrClear(et):this.directlySetCurrentUser(null)}return _assert(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===et._redirectEventId?this.directlySetCurrentUser(et):this.reloadAndSetCurrentUserOrClear(et)}async tryRedirectSignIn(i){let s=null;try{s=await this._popupRedirectResolver._completeRedirectFn(this,i,!0)}catch{await this._setRedirectUser(null)}return s}async reloadAndSetCurrentUserOrClear(i){try{await _reloadWithoutSaving(i)}catch(s){if((s==null?void 0:s.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(i)}useDeviceLanguage(){this.languageCode=_getUserLanguage()}async _delete(){this._deleted=!0}async updateCurrentUser(i){const s=i?getModularInstance(i):null;return s&&_assert(s.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(s&&s._clone(this))}async _updateCurrentUser(i,s=!1){if(!this._deleted)return i&&_assert(this.tenantId===i.tenantId,this,"tenant-id-mismatch"),s||await this.beforeStateQueue.runMiddleware(i),this.queue(async()=>{await this.directlySetCurrentUser(i),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(i){return this.queue(async()=>{await this.assertedPersistence.setPersistence(_getInstance(i))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(i){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const s=this._getPasswordPolicyInternal();return s.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):s.validatePassword(i)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const i=await _getPasswordPolicy(this),s=new PasswordPolicyImpl(i);this.tenantId===null?this._projectPasswordPolicy=s:this._tenantPasswordPolicies[this.tenantId]=s}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(i){this._errorFactory=new ErrorFactory("auth","Firebase",i())}onAuthStateChanged(i,s,a){return this.registerStateListener(this.authStateSubscription,i,s,a)}beforeAuthStateChanged(i,s){return this.beforeStateQueue.pushCallback(i,s)}onIdTokenChanged(i,s,a){return this.registerStateListener(this.idTokenSubscription,i,s,a)}authStateReady(){return new Promise((i,s)=>{if(this.currentUser)i();else{const a=this.onAuthStateChanged(()=>{a(),i()},s)}})}async revokeAccessToken(i){if(this.currentUser){const s=await this.currentUser.getIdToken(),a={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:i,idToken:s};this.tenantId!=null&&(a.tenantId=this.tenantId),await revokeToken(this,a)}}toJSON(){var i;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(i=this._currentUser)===null||i===void 0?void 0:i.toJSON()}}async _setRedirectUser(i,s){const a=await this.getOrInitRedirectPersistenceManager(s);return i===null?a.removeCurrentUser():a.setCurrentUser(i)}async getOrInitRedirectPersistenceManager(i){if(!this.redirectPersistenceManager){const s=i&&_getInstance(i)||this._popupRedirectResolver;_assert(s,this,"argument-error"),this.redirectPersistenceManager=await PersistenceUserManager.create(this,[_getInstance(s._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(i){var s,a;return this._isInitialized&&await this.queue(async()=>{}),((s=this._currentUser)===null||s===void 0?void 0:s._redirectEventId)===i?this._currentUser:((a=this.redirectUser)===null||a===void 0?void 0:a._redirectEventId)===i?this.redirectUser:null}async _persistUserIfCurrent(i){if(i===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(i))}_notifyListenersIfCurrent(i){i===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var i,s;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const a=(s=(i=this.currentUser)===null||i===void 0?void 0:i.uid)!==null&&s!==void 0?s:null;this.lastNotifiedUid!==a&&(this.lastNotifiedUid=a,this.authStateSubscription.next(this.currentUser))}registerStateListener(i,s,a,et){if(this._deleted)return()=>{};const tt=typeof s=="function"?s:s.next.bind(s);let ot=!1;const dt=this._isInitialized?Promise.resolve():this._initializationPromise;if(_assert(dt,this,"internal-error"),dt.then(()=>{ot||tt(this.currentUser)}),typeof s=="function"){const ht=i.addObserver(s,a,et);return()=>{ot=!0,ht()}}else{const ht=i.addObserver(s);return()=>{ot=!0,ht()}}}async directlySetCurrentUser(i){this.currentUser&&this.currentUser!==i&&this._currentUser._stopProactiveRefresh(),i&&this.isProactiveRefreshEnabled&&i._startProactiveRefresh(),this.currentUser=i,i?await this.assertedPersistence.setCurrentUser(i):await this.assertedPersistence.removeCurrentUser()}queue(i){return this.operations=this.operations.then(i,i),this.operations}get assertedPersistence(){return _assert(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(i){!i||this.frameworks.includes(i)||(this.frameworks.push(i),this.frameworks.sort(),this.clientVersion=_getClientVersion(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const s={"X-Client-Version":this.clientVersion};this.app.options.appId&&(s["X-Firebase-gmpid"]=this.app.options.appId);const a=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||i===void 0?void 0:i.getHeartbeatsHeader());a&&(s["X-Firebase-Client"]=a);const et=await this._getAppCheckToken();return et&&(s["X-Firebase-AppCheck"]=et),s}async _getAppCheckToken(){var i;const s=await((i=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||i===void 0?void 0:i.getToken());return s!=null&&s.error&&_logWarn(`Error while retrieving App Check token: ${s.error}`),s==null?void 0:s.token}}function _castAuth(o){return getModularInstance(o)}class Subscription{constructor(i){this.auth=i,this.observer=null,this.addObserver=createSubscribe(s=>this.observer=s)}get next(){return _assert(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getScriptParentElement(){var o,i;return(i=(o=document.getElementsByTagName("head"))===null||o===void 0?void 0:o[0])!==null&&i!==void 0?i:document}function _loadJS(o){return new Promise((i,s)=>{const a=document.createElement("script");a.setAttribute("src",o),a.onload=i,a.onerror=et=>{const tt=_createError("internal-error");tt.customData=et,s(tt)},a.type="text/javascript",a.charset="UTF-8",getScriptParentElement().appendChild(a)})}function _generateCallbackName(o){return`__${o}${Math.floor(Math.random()*1e6)}`}const RECAPTCHA_ENTERPRISE_URL="https://www.google.com/recaptcha/enterprise.js?render=",RECAPTCHA_ENTERPRISE_VERIFIER_TYPE="recaptcha-enterprise",FAKE_TOKEN="NO_RECAPTCHA";class RecaptchaEnterpriseVerifier{constructor(i){this.type=RECAPTCHA_ENTERPRISE_VERIFIER_TYPE,this.auth=_castAuth(i)}async verify(i="verify",s=!1){async function a(tt){if(!s){if(tt.tenantId==null&&tt._agentRecaptchaConfig!=null)return tt._agentRecaptchaConfig.siteKey;if(tt.tenantId!=null&&tt._tenantRecaptchaConfigs[tt.tenantId]!==void 0)return tt._tenantRecaptchaConfigs[tt.tenantId].siteKey}return new Promise(async(ot,dt)=>{getRecaptchaConfig(tt,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ht=>{if(ht.recaptchaKey===void 0)dt(new Error("recaptcha Enterprise site key undefined"));else{const ft=new RecaptchaConfig(ht);return tt.tenantId==null?tt._agentRecaptchaConfig=ft:tt._tenantRecaptchaConfigs[tt.tenantId]=ft,ot(ft.siteKey)}}).catch(ht=>{dt(ht)})})}function et(tt,ot,dt){const ht=window.grecaptcha;isEnterprise(ht)?ht.enterprise.ready(()=>{ht.enterprise.execute(tt,{action:i}).then(ft=>{ot(ft)}).catch(()=>{ot(FAKE_TOKEN)})}):dt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((tt,ot)=>{a(this.auth).then(dt=>{if(!s&&isEnterprise(window.grecaptcha))et(dt,tt,ot);else{if(typeof window>"u"){ot(new Error("RecaptchaVerifier is only supported in browser"));return}_loadJS(RECAPTCHA_ENTERPRISE_URL+dt).then(()=>{et(dt,tt,ot)}).catch(ht=>{ot(ht)})}}).catch(dt=>{ot(dt)})})}}async function injectRecaptchaFields(o,i,s,a=!1){const et=new RecaptchaEnterpriseVerifier(o);let tt;try{tt=await et.verify(s)}catch{tt=await et.verify(s,!0)}const ot=Object.assign({},i);return a?Object.assign(ot,{captchaResp:tt}):Object.assign(ot,{captchaResponse:tt}),Object.assign(ot,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(ot,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),ot}async function handleRecaptchaFlow(o,i,s,a){var et;if(!((et=o._getRecaptchaConfig())===null||et===void 0)&&et.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const tt=await injectRecaptchaFields(o,i,s,s==="getOobCode");return a(o,tt)}else return a(o,i).catch(async tt=>{if(tt.code==="auth/missing-recaptcha-token"){console.log(`${s} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const ot=await injectRecaptchaFields(o,i,s,s==="getOobCode");return a(o,ot)}else return Promise.reject(tt)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function initializeAuth(o,i){const s=_getProvider(o,"auth");if(s.isInitialized()){const et=s.getImmediate(),tt=s.getOptions();if(deepEqual(tt,i??{}))return et;_fail(et,"already-initialized")}return s.initialize({options:i})}function _initializeAuthInstance(o,i){const s=(i==null?void 0:i.persistence)||[],a=(Array.isArray(s)?s:[s]).map(_getInstance);i!=null&&i.errorMap&&o._updateErrorMap(i.errorMap),o._initializeWithPersistence(a,i==null?void 0:i.popupRedirectResolver)}function connectAuthEmulator(o,i,s){const a=_castAuth(o);_assert(a._canInitEmulator,a,"emulator-config-failed"),_assert(/^https?:\/\//.test(i),a,"invalid-emulator-scheme");const et=!!(s!=null&&s.disableWarnings),tt=extractProtocol(i),{host:ot,port:dt}=extractHostAndPort(i),ht=dt===null?"":`:${dt}`;a.config.emulator={url:`${tt}//${ot}${ht}/`},a.settings.appVerificationDisabledForTesting=!0,a.emulatorConfig=Object.freeze({host:ot,port:dt,protocol:tt.replace(":",""),options:Object.freeze({disableWarnings:et})}),et||emitEmulatorWarning()}function extractProtocol(o){const i=o.indexOf(":");return i<0?"":o.substr(0,i+1)}function extractHostAndPort(o){const i=extractProtocol(o),s=/(\/\/)?([^?#/]+)/.exec(o.substr(i.length));if(!s)return{host:"",port:null};const a=s[2].split("@").pop()||"",et=/^(\[[^\]]+\])(:|$)/.exec(a);if(et){const tt=et[1];return{host:tt,port:parsePort(a.substr(tt.length+1))}}else{const[tt,ot]=a.split(":");return{host:tt,port:parsePort(ot)}}}function parsePort(o){if(!o)return null;const i=Number(o);return isNaN(i)?null:i}function emitEmulatorWarning(){function o(){const i=document.createElement("p"),s=i.style;i.innerText="Running in emulator mode. Do not use with production credentials.",s.position="fixed",s.width="100%",s.backgroundColor="#ffffff",s.border=".1em solid #000000",s.color="#b50000",s.bottom="0px",s.left="0px",s.margin="0px",s.zIndex="10000",s.textAlign="center",i.classList.add("firebase-emulator-warning"),document.body.appendChild(i)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",o):o())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthCredential{constructor(i,s){this.providerId=i,this.signInMethod=s}toJSON(){return debugFail("not implemented")}_getIdTokenResponse(i){return debugFail("not implemented")}_linkToIdToken(i,s){return debugFail("not implemented")}_getReauthenticationResolver(i){return debugFail("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signInWithIdp(o,i){return _performSignInRequest(o,"POST","/v1/accounts:signInWithIdp",_addTidIfNecessary(o,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IDP_REQUEST_URI$1="http://localhost";class OAuthCredential extends AuthCredential{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(i){const s=new OAuthCredential(i.providerId,i.signInMethod);return i.idToken||i.accessToken?(i.idToken&&(s.idToken=i.idToken),i.accessToken&&(s.accessToken=i.accessToken),i.nonce&&!i.pendingToken&&(s.nonce=i.nonce),i.pendingToken&&(s.pendingToken=i.pendingToken)):i.oauthToken&&i.oauthTokenSecret?(s.accessToken=i.oauthToken,s.secret=i.oauthTokenSecret):_fail("argument-error"),s}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(i){const s=typeof i=="string"?JSON.parse(i):i,{providerId:a,signInMethod:et}=s,tt=__rest$d(s,["providerId","signInMethod"]);if(!a||!et)return null;const ot=new OAuthCredential(a,et);return ot.idToken=tt.idToken||void 0,ot.accessToken=tt.accessToken||void 0,ot.secret=tt.secret,ot.nonce=tt.nonce,ot.pendingToken=tt.pendingToken||null,ot}_getIdTokenResponse(i){const s=this.buildRequest();return signInWithIdp(i,s)}_linkToIdToken(i,s){const a=this.buildRequest();return a.idToken=s,signInWithIdp(i,a)}_getReauthenticationResolver(i){const s=this.buildRequest();return s.autoCreate=!1,signInWithIdp(i,s)}buildRequest(){const i={requestUri:IDP_REQUEST_URI$1,returnSecureToken:!0};if(this.pendingToken)i.pendingToken=this.pendingToken;else{const s={};this.idToken&&(s.id_token=this.idToken),this.accessToken&&(s.access_token=this.accessToken),this.secret&&(s.oauth_token_secret=this.secret),s.providerId=this.providerId,this.nonce&&!this.pendingToken&&(s.nonce=this.nonce),i.postBody=querystring(s)}return i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FederatedAuthProvider{constructor(i){this.providerId=i,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(i){this.defaultLanguageCode=i}setCustomParameters(i){return this.customParameters=i,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BaseOAuthProvider extends FederatedAuthProvider{constructor(){super(...arguments),this.scopes=[]}addScope(i){return this.scopes.includes(i)||this.scopes.push(i),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FacebookAuthProvider extends BaseOAuthProvider{constructor(){super("facebook.com")}static credential(i){return OAuthCredential._fromParams({providerId:FacebookAuthProvider.PROVIDER_ID,signInMethod:FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD,accessToken:i})}static credentialFromResult(i){return FacebookAuthProvider.credentialFromTaggedObject(i)}static credentialFromError(i){return FacebookAuthProvider.credentialFromTaggedObject(i.customData||{})}static credentialFromTaggedObject({_tokenResponse:i}){if(!i||!("oauthAccessToken"in i)||!i.oauthAccessToken)return null;try{return FacebookAuthProvider.credential(i.oauthAccessToken)}catch{return null}}}FacebookAuthProvider.FACEBOOK_SIGN_IN_METHOD="facebook.com";FacebookAuthProvider.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GoogleAuthProvider extends BaseOAuthProvider{constructor(){super("google.com"),this.addScope("profile")}static credential(i,s){return OAuthCredential._fromParams({providerId:GoogleAuthProvider.PROVIDER_ID,signInMethod:GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD,idToken:i,accessToken:s})}static credentialFromResult(i){return GoogleAuthProvider.credentialFromTaggedObject(i)}static credentialFromError(i){return GoogleAuthProvider.credentialFromTaggedObject(i.customData||{})}static credentialFromTaggedObject({_tokenResponse:i}){if(!i)return null;const{oauthIdToken:s,oauthAccessToken:a}=i;if(!s&&!a)return null;try{return GoogleAuthProvider.credential(s,a)}catch{return null}}}GoogleAuthProvider.GOOGLE_SIGN_IN_METHOD="google.com";GoogleAuthProvider.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GithubAuthProvider extends BaseOAuthProvider{constructor(){super("github.com")}static credential(i){return OAuthCredential._fromParams({providerId:GithubAuthProvider.PROVIDER_ID,signInMethod:GithubAuthProvider.GITHUB_SIGN_IN_METHOD,accessToken:i})}static credentialFromResult(i){return GithubAuthProvider.credentialFromTaggedObject(i)}static credentialFromError(i){return GithubAuthProvider.credentialFromTaggedObject(i.customData||{})}static credentialFromTaggedObject({_tokenResponse:i}){if(!i||!("oauthAccessToken"in i)||!i.oauthAccessToken)return null;try{return GithubAuthProvider.credential(i.oauthAccessToken)}catch{return null}}}GithubAuthProvider.GITHUB_SIGN_IN_METHOD="github.com";GithubAuthProvider.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TwitterAuthProvider extends BaseOAuthProvider{constructor(){super("twitter.com")}static credential(i,s){return OAuthCredential._fromParams({providerId:TwitterAuthProvider.PROVIDER_ID,signInMethod:TwitterAuthProvider.TWITTER_SIGN_IN_METHOD,oauthToken:i,oauthTokenSecret:s})}static credentialFromResult(i){return TwitterAuthProvider.credentialFromTaggedObject(i)}static credentialFromError(i){return TwitterAuthProvider.credentialFromTaggedObject(i.customData||{})}static credentialFromTaggedObject({_tokenResponse:i}){if(!i)return null;const{oauthAccessToken:s,oauthTokenSecret:a}=i;if(!s||!a)return null;try{return TwitterAuthProvider.credential(s,a)}catch{return null}}}TwitterAuthProvider.TWITTER_SIGN_IN_METHOD="twitter.com";TwitterAuthProvider.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function signUp(o,i){return _performSignInRequest(o,"POST","/v1/accounts:signUp",_addTidIfNecessary(o,i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UserCredentialImpl{constructor(i){this.user=i.user,this.providerId=i.providerId,this._tokenResponse=i._tokenResponse,this.operationType=i.operationType}static async _fromIdTokenResponse(i,s,a,et=!1){const tt=await UserImpl._fromIdTokenResponse(i,a,et),ot=providerIdForResponse(a);return new UserCredentialImpl({user:tt,providerId:ot,_tokenResponse:a,operationType:s})}static async _forOperation(i,s,a){await i._updateTokensIfNecessary(a,!0);const et=providerIdForResponse(a);return new UserCredentialImpl({user:i,providerId:et,_tokenResponse:a,operationType:s})}}function providerIdForResponse(o){return o.providerId?o.providerId:"phoneNumber"in o?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MultiFactorError extends FirebaseError{constructor(i,s,a,et){var tt;super(s.code,s.message),this.operationType=a,this.user=et,Object.setPrototypeOf(this,MultiFactorError.prototype),this.customData={appName:i.name,tenantId:(tt=i.tenantId)!==null&&tt!==void 0?tt:void 0,_serverResponse:s.customData._serverResponse,operationType:a}}static _fromErrorAndOperation(i,s,a,et){return new MultiFactorError(i,s,a,et)}}function _processCredentialSavingMfaContextIfNecessary(o,i,s,a){return(i==="reauthenticate"?s._getReauthenticationResolver(o):s._getIdTokenResponse(o)).catch(tt=>{throw tt.code==="auth/multi-factor-auth-required"?MultiFactorError._fromErrorAndOperation(o,tt,i,a):tt})}async function _link$1(o,i,s=!1){const a=await _logoutIfInvalidated(o,i._linkToIdToken(o.auth,await o.getIdToken()),s);return UserCredentialImpl._forOperation(o,"link",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _reauthenticate(o,i,s=!1){const{auth:a}=o,et="reauthenticate";try{const tt=await _logoutIfInvalidated(o,_processCredentialSavingMfaContextIfNecessary(a,et,i,o),s);_assert(tt.idToken,a,"internal-error");const ot=_parseToken(tt.idToken);_assert(ot,a,"internal-error");const{sub:dt}=ot;return _assert(o.uid===dt,a,"user-mismatch"),UserCredentialImpl._forOperation(o,et,tt)}catch(tt){throw(tt==null?void 0:tt.code)==="auth/user-not-found"&&_fail(a,"user-mismatch"),tt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _signInWithCredential(o,i,s=!1){const a="signIn",et=await _processCredentialSavingMfaContextIfNecessary(o,a,i),tt=await UserCredentialImpl._fromIdTokenResponse(o,a,et);return s||await o._updateCurrentUser(tt.user),tt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function recachePasswordPolicy(o){const i=_castAuth(o);i._getPasswordPolicyInternal()&&await i._updatePasswordPolicy()}async function createUserWithEmailAndPassword(o,i,s){const a=_castAuth(o),ot=await handleRecaptchaFlow(a,{returnSecureToken:!0,email:i,password:s,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",signUp).catch(ht=>{throw ht.code==="auth/password-does-not-meet-requirements"&&recachePasswordPolicy(o),ht}),dt=await UserCredentialImpl._fromIdTokenResponse(a,"signIn",ot);return await a._updateCurrentUser(dt.user),dt}function onIdTokenChanged(o,i,s,a){return getModularInstance(o).onIdTokenChanged(i,s,a)}function beforeAuthStateChanged(o,i,s){return getModularInstance(o).beforeAuthStateChanged(i,s)}const STORAGE_AVAILABLE_KEY="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserPersistenceClass{constructor(i,s){this.storageRetriever=i,this.type=s}_isAvailable(){try{return this.storage?(this.storage.setItem(STORAGE_AVAILABLE_KEY,"1"),this.storage.removeItem(STORAGE_AVAILABLE_KEY),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(i,s){return this.storage.setItem(i,JSON.stringify(s)),Promise.resolve()}_get(i){const s=this.storage.getItem(i);return Promise.resolve(s?JSON.parse(s):null)}_remove(i){return this.storage.removeItem(i),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _iframeCannotSyncWebStorage(){const o=getUA();return _isSafari(o)||_isIOS(o)}const _POLLING_INTERVAL_MS$1=1e3,IE10_LOCAL_STORAGE_SYNC_DELAY=10;class BrowserLocalPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(i,s)=>this.onStorageEvent(i,s),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=_iframeCannotSyncWebStorage()&&_isIframe(),this.fallbackToPolling=_isMobileBrowser(),this._shouldAllowMigration=!0}forAllChangedKeys(i){for(const s of Object.keys(this.listeners)){const a=this.storage.getItem(s),et=this.localCache[s];a!==et&&i(s,et,a)}}onStorageEvent(i,s=!1){if(!i.key){this.forAllChangedKeys((ot,dt,ht)=>{this.notifyListeners(ot,ht)});return}const a=i.key;if(s?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ot=this.storage.getItem(a);if(i.newValue!==ot)i.newValue!==null?this.storage.setItem(a,i.newValue):this.storage.removeItem(a);else if(this.localCache[a]===i.newValue&&!s)return}const et=()=>{const ot=this.storage.getItem(a);!s&&this.localCache[a]===ot||this.notifyListeners(a,ot)},tt=this.storage.getItem(a);_isIE10()&&tt!==i.newValue&&i.newValue!==i.oldValue?setTimeout(et,IE10_LOCAL_STORAGE_SYNC_DELAY):et()}notifyListeners(i,s){this.localCache[i]=s;const a=this.listeners[i];if(a)for(const et of Array.from(a))et(s&&JSON.parse(s))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((i,s,a)=>{this.onStorageEvent(new StorageEvent("storage",{key:i,oldValue:s,newValue:a}),!0)})},_POLLING_INTERVAL_MS$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(i,s){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[i]||(this.listeners[i]=new Set,this.localCache[i]=this.storage.getItem(i)),this.listeners[i].add(s)}_removeListener(i,s){this.listeners[i]&&(this.listeners[i].delete(s),this.listeners[i].size===0&&delete this.listeners[i]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(i,s){await super._set(i,s),this.localCache[i]=JSON.stringify(s)}async _get(i){const s=await super._get(i);return this.localCache[i]=JSON.stringify(s),s}async _remove(i){await super._remove(i),delete this.localCache[i]}}BrowserLocalPersistence.type="LOCAL";const browserLocalPersistence=BrowserLocalPersistence;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BrowserSessionPersistence extends BrowserPersistenceClass{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(i,s){}_removeListener(i,s){}}BrowserSessionPersistence.type="SESSION";const browserSessionPersistence=BrowserSessionPersistence;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _allSettled(o){return Promise.all(o.map(async i=>{try{return{fulfilled:!0,value:await i}}catch(s){return{fulfilled:!1,reason:s}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Receiver{constructor(i){this.eventTarget=i,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(i){const s=this.receivers.find(et=>et.isListeningto(i));if(s)return s;const a=new Receiver(i);return this.receivers.push(a),a}isListeningto(i){return this.eventTarget===i}async handleEvent(i){const s=i,{eventId:a,eventType:et,data:tt}=s.data,ot=this.handlersMap[et];if(!(ot!=null&&ot.size))return;s.ports[0].postMessage({status:"ack",eventId:a,eventType:et});const dt=Array.from(ot).map(async ft=>ft(s.origin,tt)),ht=await _allSettled(dt);s.ports[0].postMessage({status:"done",eventId:a,eventType:et,response:ht})}_subscribe(i,s){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[i]||(this.handlersMap[i]=new Set),this.handlersMap[i].add(s)}_unsubscribe(i,s){this.handlersMap[i]&&s&&this.handlersMap[i].delete(s),(!s||this.handlersMap[i].size===0)&&delete this.handlersMap[i],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Receiver.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _generateEventId(o="",i=10){let s="";for(let a=0;a<i;a++)s+=Math.floor(Math.random()*10);return o+s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sender{constructor(i){this.target=i,this.handlers=new Set}removeMessageHandler(i){i.messageChannel&&(i.messageChannel.port1.removeEventListener("message",i.onMessage),i.messageChannel.port1.close()),this.handlers.delete(i)}async _send(i,s,a=50){const et=typeof MessageChannel<"u"?new MessageChannel:null;if(!et)throw new Error("connection_unavailable");let tt,ot;return new Promise((dt,ht)=>{const ft=_generateEventId("",20);et.port1.start();const pt=setTimeout(()=>{ht(new Error("unsupported_event"))},a);ot={messageChannel:et,onMessage(mt){const gt=mt;if(gt.data.eventId===ft)switch(gt.data.status){case"ack":clearTimeout(pt),tt=setTimeout(()=>{ht(new Error("timeout"))},3e3);break;case"done":clearTimeout(tt),dt(gt.data.response);break;default:clearTimeout(pt),clearTimeout(tt),ht(new Error("invalid_response"));break}}},this.handlers.add(ot),et.port1.addEventListener("message",ot.onMessage),this.target.postMessage({eventType:i,eventId:ft,data:s},[et.port2])}).finally(()=>{ot&&this.removeMessageHandler(ot)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _window(){return window}function _setWindowLocation(o){_window().location.href=o}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _isWorker(){return typeof _window().WorkerGlobalScope<"u"&&typeof _window().importScripts=="function"}async function _getActiveServiceWorker(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _getServiceWorkerController(){var o;return((o=navigator==null?void 0:navigator.serviceWorker)===null||o===void 0?void 0:o.controller)||null}function _getWorkerGlobalScope(){return _isWorker()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebaseLocalStorageDb",DB_VERSION=1,DB_OBJECTSTORE_NAME="firebaseLocalStorage",DB_DATA_KEYPATH="fbase_key";class DBPromise{constructor(i){this.request=i}toPromise(){return new Promise((i,s)=>{this.request.addEventListener("success",()=>{i(this.request.result)}),this.request.addEventListener("error",()=>{s(this.request.error)})})}}function getObjectStore(o,i){return o.transaction([DB_OBJECTSTORE_NAME],i?"readwrite":"readonly").objectStore(DB_OBJECTSTORE_NAME)}function _deleteDatabase(){const o=indexedDB.deleteDatabase(DB_NAME);return new DBPromise(o).toPromise()}function _openDatabase(){const o=indexedDB.open(DB_NAME,DB_VERSION);return new Promise((i,s)=>{o.addEventListener("error",()=>{s(o.error)}),o.addEventListener("upgradeneeded",()=>{const a=o.result;try{a.createObjectStore(DB_OBJECTSTORE_NAME,{keyPath:DB_DATA_KEYPATH})}catch(et){s(et)}}),o.addEventListener("success",async()=>{const a=o.result;a.objectStoreNames.contains(DB_OBJECTSTORE_NAME)?i(a):(a.close(),await _deleteDatabase(),i(await _openDatabase()))})})}async function _putObject(o,i,s){const a=getObjectStore(o,!0).put({[DB_DATA_KEYPATH]:i,value:s});return new DBPromise(a).toPromise()}async function getObject(o,i){const s=getObjectStore(o,!1).get(i),a=await new DBPromise(s).toPromise();return a===void 0?null:a.value}function _deleteObject(o,i){const s=getObjectStore(o,!0).delete(i);return new DBPromise(s).toPromise()}const _POLLING_INTERVAL_MS=800,_TRANSACTION_RETRY_COUNT=3;class IndexedDBLocalPersistence{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _openDatabase(),this.db)}async _withRetries(i){let s=0;for(;;)try{const a=await this._openDb();return await i(a)}catch(a){if(s++>_TRANSACTION_RETRY_COUNT)throw a;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return _isWorker()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Receiver._getInstance(_getWorkerGlobalScope()),this.receiver._subscribe("keyChanged",async(i,s)=>({keyProcessed:(await this._poll()).includes(s.key)})),this.receiver._subscribe("ping",async(i,s)=>["keyChanged"])}async initializeSender(){var i,s;if(this.activeServiceWorker=await _getActiveServiceWorker(),!this.activeServiceWorker)return;this.sender=new Sender(this.activeServiceWorker);const a=await this.sender._send("ping",{},800);a&&!((i=a[0])===null||i===void 0)&&i.fulfilled&&!((s=a[0])===null||s===void 0)&&s.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(i){if(!(!this.sender||!this.activeServiceWorker||_getServiceWorkerController()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:i},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const i=await _openDatabase();return await _putObject(i,STORAGE_AVAILABLE_KEY,"1"),await _deleteObject(i,STORAGE_AVAILABLE_KEY),!0}catch{}return!1}async _withPendingWrite(i){this.pendingWrites++;try{await i()}finally{this.pendingWrites--}}async _set(i,s){return this._withPendingWrite(async()=>(await this._withRetries(a=>_putObject(a,i,s)),this.localCache[i]=s,this.notifyServiceWorker(i)))}async _get(i){const s=await this._withRetries(a=>getObject(a,i));return this.localCache[i]=s,s}async _remove(i){return this._withPendingWrite(async()=>(await this._withRetries(s=>_deleteObject(s,i)),delete this.localCache[i],this.notifyServiceWorker(i)))}async _poll(){const i=await this._withRetries(et=>{const tt=getObjectStore(et,!1).getAll();return new DBPromise(tt).toPromise()});if(!i)return[];if(this.pendingWrites!==0)return[];const s=[],a=new Set;if(i.length!==0)for(const{fbase_key:et,value:tt}of i)a.add(et),JSON.stringify(this.localCache[et])!==JSON.stringify(tt)&&(this.notifyListeners(et,tt),s.push(et));for(const et of Object.keys(this.localCache))this.localCache[et]&&!a.has(et)&&(this.notifyListeners(et,null),s.push(et));return s}notifyListeners(i,s){this.localCache[i]=s;const a=this.listeners[i];if(a)for(const et of Array.from(a))et(s)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),_POLLING_INTERVAL_MS)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(i,s){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[i]||(this.listeners[i]=new Set,this._get(i)),this.listeners[i].add(s)}_removeListener(i,s){this.listeners[i]&&(this.listeners[i].delete(s),this.listeners[i].size===0&&delete this.listeners[i]),Object.keys(this.listeners).length===0&&this.stopPolling()}}IndexedDBLocalPersistence.type="LOCAL";const indexedDBLocalPersistence=IndexedDBLocalPersistence;new Delay(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _withDefaultResolver(o,i){return i?_getInstance(i):(_assert(o._popupRedirectResolver,o,"argument-error"),o._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IdpCredential extends AuthCredential{constructor(i){super("custom","custom"),this.params=i}_getIdTokenResponse(i){return signInWithIdp(i,this._buildIdpRequest())}_linkToIdToken(i,s){return signInWithIdp(i,this._buildIdpRequest(s))}_getReauthenticationResolver(i){return signInWithIdp(i,this._buildIdpRequest())}_buildIdpRequest(i){const s={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return i&&(s.idToken=i),s}}function _signIn(o){return _signInWithCredential(o.auth,new IdpCredential(o),o.bypassAuthState)}function _reauth(o){const{auth:i,user:s}=o;return _assert(s,i,"internal-error"),_reauthenticate(s,new IdpCredential(o),o.bypassAuthState)}async function _link(o){const{auth:i,user:s}=o;return _assert(s,i,"internal-error"),_link$1(s,new IdpCredential(o),o.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AbstractPopupRedirectOperation{constructor(i,s,a,et,tt=!1){this.auth=i,this.resolver=a,this.user=et,this.bypassAuthState=tt,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(s)?s:[s]}execute(){return new Promise(async(i,s)=>{this.pendingPromise={resolve:i,reject:s};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(a){this.reject(a)}})}async onAuthEvent(i){const{urlResponse:s,sessionId:a,postBody:et,tenantId:tt,error:ot,type:dt}=i;if(ot){this.reject(ot);return}const ht={auth:this.auth,requestUri:s,sessionId:a,tenantId:tt||void 0,postBody:et||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(dt)(ht))}catch(ft){this.reject(ft)}}onError(i){this.reject(i)}getIdpTask(i){switch(i){case"signInViaPopup":case"signInViaRedirect":return _signIn;case"linkViaPopup":case"linkViaRedirect":return _link;case"reauthViaPopup":case"reauthViaRedirect":return _reauth;default:_fail(this.auth,"internal-error")}}resolve(i){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(i),this.unregisterAndCleanUp()}reject(i){debugAssert(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(i),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _POLL_WINDOW_CLOSE_TIMEOUT=new Delay(2e3,1e4);async function signInWithPopup(o,i,s){const a=_castAuth(o);_assertInstanceOf(o,i,FederatedAuthProvider);const et=_withDefaultResolver(a,s);return new PopupOperation(a,"signInViaPopup",i,et).executeNotNull()}class PopupOperation extends AbstractPopupRedirectOperation{constructor(i,s,a,et,tt){super(i,s,et,tt),this.provider=a,this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction&&PopupOperation.currentPopupAction.cancel(),PopupOperation.currentPopupAction=this}async executeNotNull(){const i=await this.execute();return _assert(i,this.auth,"internal-error"),i}async onExecution(){debugAssert(this.filter.length===1,"Popup operations only handle one event");const i=_generateEventId();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],i),this.authWindow.associatedEvent=i,this.resolver._originValidation(this.auth).catch(s=>{this.reject(s)}),this.resolver._isIframeWebStorageSupported(this.auth,s=>{s||this.reject(_createError(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var i;return((i=this.authWindow)===null||i===void 0?void 0:i.associatedEvent)||null}cancel(){this.reject(_createError(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,PopupOperation.currentPopupAction=null}pollUserCancellation(){const i=()=>{var s,a;if(!((a=(s=this.authWindow)===null||s===void 0?void 0:s.window)===null||a===void 0)&&a.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_createError(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(i,_POLL_WINDOW_CLOSE_TIMEOUT.get())};i()}}PopupOperation.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PENDING_REDIRECT_KEY="pendingRedirect",redirectOutcomeMap=new Map;class RedirectAction extends AbstractPopupRedirectOperation{constructor(i,s,a=!1){super(i,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],s,void 0,a),this.eventId=null}async execute(){let i=redirectOutcomeMap.get(this.auth._key());if(!i){try{const a=await _getAndClearPendingRedirectStatus(this.resolver,this.auth)?await super.execute():null;i=()=>Promise.resolve(a)}catch(s){i=()=>Promise.reject(s)}redirectOutcomeMap.set(this.auth._key(),i)}return this.bypassAuthState||redirectOutcomeMap.set(this.auth._key(),()=>Promise.resolve(null)),i()}async onAuthEvent(i){if(i.type==="signInViaRedirect")return super.onAuthEvent(i);if(i.type==="unknown"){this.resolve(null);return}if(i.eventId){const s=await this.auth._redirectUserForId(i.eventId);if(s)return this.user=s,super.onAuthEvent(i);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function _getAndClearPendingRedirectStatus(o,i){const s=pendingRedirectKey(i),a=resolverPersistence(o);if(!await a._isAvailable())return!1;const et=await a._get(s)==="true";return await a._remove(s),et}function _overrideRedirectResult(o,i){redirectOutcomeMap.set(o._key(),i)}function resolverPersistence(o){return _getInstance(o._redirectPersistence)}function pendingRedirectKey(o){return _persistenceKeyName(PENDING_REDIRECT_KEY,o.config.apiKey,o.name)}async function _getRedirectResult(o,i,s=!1){const a=_castAuth(o),et=_withDefaultResolver(a,i),ot=await new RedirectAction(a,et,s).execute();return ot&&!s&&(delete ot.user._redirectEventId,await a._persistUserIfCurrent(ot.user),await a._setRedirectUser(null,i)),ot}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EVENT_DUPLICATION_CACHE_DURATION_MS=10*60*1e3;class AuthEventManager{constructor(i){this.auth=i,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(i){this.consumers.add(i),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,i)&&(this.sendToConsumer(this.queuedRedirectEvent,i),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(i){this.consumers.delete(i)}onEvent(i){if(this.hasEventBeenHandled(i))return!1;let s=!1;return this.consumers.forEach(a=>{this.isEventForConsumer(i,a)&&(s=!0,this.sendToConsumer(i,a),this.saveEventToCache(i))}),this.hasHandledPotentialRedirect||!isRedirectEvent(i)||(this.hasHandledPotentialRedirect=!0,s||(this.queuedRedirectEvent=i,s=!0)),s}sendToConsumer(i,s){var a;if(i.error&&!isNullRedirectEvent(i)){const et=((a=i.error.code)===null||a===void 0?void 0:a.split("auth/")[1])||"internal-error";s.onError(_createError(this.auth,et))}else s.onAuthEvent(i)}isEventForConsumer(i,s){const a=s.eventId===null||!!i.eventId&&i.eventId===s.eventId;return s.filter.includes(i.type)&&a}hasEventBeenHandled(i){return Date.now()-this.lastProcessedEventTime>=EVENT_DUPLICATION_CACHE_DURATION_MS&&this.cachedEventUids.clear(),this.cachedEventUids.has(eventUid(i))}saveEventToCache(i){this.cachedEventUids.add(eventUid(i)),this.lastProcessedEventTime=Date.now()}}function eventUid(o){return[o.type,o.eventId,o.sessionId,o.tenantId].filter(i=>i).join("-")}function isNullRedirectEvent({type:o,error:i}){return o==="unknown"&&(i==null?void 0:i.code)==="auth/no-auth-event"}function isRedirectEvent(o){switch(o.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return isNullRedirectEvent(o);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _getProjectConfig(o,i={}){return _performApiRequest(o,"GET","/v1/projects",i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP_ADDRESS_REGEX=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,HTTP_REGEX=/^https?/;async function _validateOrigin(o){if(o.config.emulator)return;const{authorizedDomains:i}=await _getProjectConfig(o);for(const s of i)try{if(matchDomain(s))return}catch{}_fail(o,"unauthorized-domain")}function matchDomain(o){const i=_getCurrentUrl(),{protocol:s,hostname:a}=new URL(i);if(o.startsWith("chrome-extension://")){const ot=new URL(o);return ot.hostname===""&&a===""?s==="chrome-extension:"&&o.replace("chrome-extension://","")===i.replace("chrome-extension://",""):s==="chrome-extension:"&&ot.hostname===a}if(!HTTP_REGEX.test(s))return!1;if(IP_ADDRESS_REGEX.test(o))return a===o;const et=o.replace(/\./g,"\\.");return new RegExp("^(.+\\."+et+"|"+et+")$","i").test(a)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NETWORK_TIMEOUT=new Delay(3e4,6e4);function resetUnloadedGapiModules(){const o=_window().___jsl;if(o!=null&&o.H){for(const i of Object.keys(o.H))if(o.H[i].r=o.H[i].r||[],o.H[i].L=o.H[i].L||[],o.H[i].r=[...o.H[i].L],o.CP)for(let s=0;s<o.CP.length;s++)o.CP[s]=null}}function loadGapi(o){return new Promise((i,s)=>{var a,et,tt;function ot(){resetUnloadedGapiModules(),gapi.load("gapi.iframes",{callback:()=>{i(gapi.iframes.getContext())},ontimeout:()=>{resetUnloadedGapiModules(),s(_createError(o,"network-request-failed"))},timeout:NETWORK_TIMEOUT.get()})}if(!((et=(a=_window().gapi)===null||a===void 0?void 0:a.iframes)===null||et===void 0)&&et.Iframe)i(gapi.iframes.getContext());else if(!((tt=_window().gapi)===null||tt===void 0)&&tt.load)ot();else{const dt=_generateCallbackName("iframefcb");return _window()[dt]=()=>{gapi.load?ot():s(_createError(o,"network-request-failed"))},_loadJS(`https://apis.google.com/js/api.js?onload=${dt}`).catch(ht=>s(ht))}}).catch(i=>{throw cachedGApiLoader=null,i})}let cachedGApiLoader=null;function _loadGapi(o){return cachedGApiLoader=cachedGApiLoader||loadGapi(o),cachedGApiLoader}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PING_TIMEOUT=new Delay(5e3,15e3),IFRAME_PATH="__/auth/iframe",EMULATED_IFRAME_PATH="emulator/auth/iframe",IFRAME_ATTRIBUTES={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},EID_FROM_APIHOST=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function getIframeUrl(o){const i=o.config;_assert(i.authDomain,o,"auth-domain-config-required");const s=i.emulator?_emulatorUrl(i,EMULATED_IFRAME_PATH):`https://${o.config.authDomain}/${IFRAME_PATH}`,a={apiKey:i.apiKey,appName:o.name,v:SDK_VERSION$1},et=EID_FROM_APIHOST.get(o.config.apiHost);et&&(a.eid=et);const tt=o._getFrameworks();return tt.length&&(a.fw=tt.join(",")),`${s}?${querystring(a).slice(1)}`}async function _openIframe(o){const i=await _loadGapi(o),s=_window().gapi;return _assert(s,o,"internal-error"),i.open({where:document.body,url:getIframeUrl(o),messageHandlersFilter:s.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:IFRAME_ATTRIBUTES,dontclear:!0},a=>new Promise(async(et,tt)=>{await a.restyle({setHideOnLeave:!1});const ot=_createError(o,"network-request-failed"),dt=_window().setTimeout(()=>{tt(ot)},PING_TIMEOUT.get());function ht(){_window().clearTimeout(dt),et(a)}a.ping(ht).then(ht,()=>{tt(ot)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BASE_POPUP_OPTIONS={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},DEFAULT_WIDTH=500,DEFAULT_HEIGHT=600,TARGET_BLANK="_blank",FIREFOX_EMPTY_URL="http://localhost";class AuthPopup{constructor(i){this.window=i,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _open(o,i,s,a=DEFAULT_WIDTH,et=DEFAULT_HEIGHT){const tt=Math.max((window.screen.availHeight-et)/2,0).toString(),ot=Math.max((window.screen.availWidth-a)/2,0).toString();let dt="";const ht=Object.assign(Object.assign({},BASE_POPUP_OPTIONS),{width:a.toString(),height:et.toString(),top:tt,left:ot}),ft=getUA().toLowerCase();s&&(dt=_isChromeIOS(ft)?TARGET_BLANK:s),_isFirefox(ft)&&(i=i||FIREFOX_EMPTY_URL,ht.scrollbars="yes");const pt=Object.entries(ht).reduce((gt,[_t,yt])=>`${gt}${_t}=${yt},`,"");if(_isIOSStandalone(ft)&&dt!=="_self")return openAsNewWindowIOS(i||"",dt),new AuthPopup(null);const mt=window.open(i||"",dt,pt);_assert(mt,o,"popup-blocked");try{mt.focus()}catch{}return new AuthPopup(mt)}function openAsNewWindowIOS(o,i){const s=document.createElement("a");s.href=o,s.target=i;const a=document.createEvent("MouseEvent");a.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),s.dispatchEvent(a)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WIDGET_PATH="__/auth/handler",EMULATOR_WIDGET_PATH="emulator/auth/handler",FIREBASE_APP_CHECK_FRAGMENT_ID=encodeURIComponent("fac");async function _getRedirectUrl(o,i,s,a,et,tt){_assert(o.config.authDomain,o,"auth-domain-config-required"),_assert(o.config.apiKey,o,"invalid-api-key");const ot={apiKey:o.config.apiKey,appName:o.name,authType:s,redirectUrl:a,v:SDK_VERSION$1,eventId:et};if(i instanceof FederatedAuthProvider){i.setDefaultLanguage(o.languageCode),ot.providerId=i.providerId||"",isEmpty$1(i.getCustomParameters())||(ot.customParameters=JSON.stringify(i.getCustomParameters()));for(const[pt,mt]of Object.entries(tt||{}))ot[pt]=mt}if(i instanceof BaseOAuthProvider){const pt=i.getScopes().filter(mt=>mt!=="");pt.length>0&&(ot.scopes=pt.join(","))}o.tenantId&&(ot.tid=o.tenantId);const dt=ot;for(const pt of Object.keys(dt))dt[pt]===void 0&&delete dt[pt];const ht=await o._getAppCheckToken(),ft=ht?`#${FIREBASE_APP_CHECK_FRAGMENT_ID}=${encodeURIComponent(ht)}`:"";return`${getHandlerBase(o)}?${querystring(dt).slice(1)}${ft}`}function getHandlerBase({config:o}){return o.emulator?_emulatorUrl(o,EMULATOR_WIDGET_PATH):`https://${o.authDomain}/${WIDGET_PATH}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEB_STORAGE_SUPPORT_KEY="webStorageSupport";class BrowserPopupRedirectResolver{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=browserSessionPersistence,this._completeRedirectFn=_getRedirectResult,this._overrideRedirectResult=_overrideRedirectResult}async _openPopup(i,s,a,et){var tt;debugAssert((tt=this.eventManagers[i._key()])===null||tt===void 0?void 0:tt.manager,"_initialize() not called before _openPopup()");const ot=await _getRedirectUrl(i,s,a,_getCurrentUrl(),et);return _open(i,ot,_generateEventId())}async _openRedirect(i,s,a,et){await this._originValidation(i);const tt=await _getRedirectUrl(i,s,a,_getCurrentUrl(),et);return _setWindowLocation(tt),new Promise(()=>{})}_initialize(i){const s=i._key();if(this.eventManagers[s]){const{manager:et,promise:tt}=this.eventManagers[s];return et?Promise.resolve(et):(debugAssert(tt,"If manager is not set, promise should be"),tt)}const a=this.initAndGetManager(i);return this.eventManagers[s]={promise:a},a.catch(()=>{delete this.eventManagers[s]}),a}async initAndGetManager(i){const s=await _openIframe(i),a=new AuthEventManager(i);return s.register("authEvent",et=>(_assert(et==null?void 0:et.authEvent,i,"invalid-auth-event"),{status:a.onEvent(et.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[i._key()]={manager:a},this.iframes[i._key()]=s,a}_isIframeWebStorageSupported(i,s){this.iframes[i._key()].send(WEB_STORAGE_SUPPORT_KEY,{type:WEB_STORAGE_SUPPORT_KEY},et=>{var tt;const ot=(tt=et==null?void 0:et[0])===null||tt===void 0?void 0:tt[WEB_STORAGE_SUPPORT_KEY];ot!==void 0&&s(!!ot),_fail(i,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(i){const s=i._key();return this.originValidationPromises[s]||(this.originValidationPromises[s]=_validateOrigin(i)),this.originValidationPromises[s]}get _shouldInitProactively(){return _isMobileBrowser()||_isSafari()||_isIOS()}}const browserPopupRedirectResolver=BrowserPopupRedirectResolver;var name$1="@firebase/auth",version$3="1.5.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AuthInterop{constructor(i){this.auth=i,this.internalListeners=new Map}getUid(){var i;return this.assertAuthConfigured(),((i=this.auth.currentUser)===null||i===void 0?void 0:i.uid)||null}async getToken(i){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(i)}:null}addAuthTokenListener(i){if(this.assertAuthConfigured(),this.internalListeners.has(i))return;const s=this.auth.onIdTokenChanged(a=>{i((a==null?void 0:a.stsTokenManager.accessToken)||null)});this.internalListeners.set(i,s),this.updateProactiveRefresh()}removeAuthTokenListener(i){this.assertAuthConfigured();const s=this.internalListeners.get(i);s&&(this.internalListeners.delete(i),s(),this.updateProactiveRefresh())}assertAuthConfigured(){_assert(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getVersionForPlatform(o){switch(o){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function registerAuth(o){_registerComponent(new Component("auth",(i,{options:s})=>{const a=i.getProvider("app").getImmediate(),et=i.getProvider("heartbeat"),tt=i.getProvider("app-check-internal"),{apiKey:ot,authDomain:dt}=a.options;_assert(ot&&!ot.includes(":"),"invalid-api-key",{appName:a.name});const ht={apiKey:ot,authDomain:dt,clientPlatform:o,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_getClientVersion(o)},ft=new AuthImpl(a,et,tt,ht);return _initializeAuthInstance(ft,s),ft},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,s,a)=>{i.getProvider("auth-internal").initialize()})),_registerComponent(new Component("auth-internal",i=>{const s=_castAuth(i.getProvider("auth").getImmediate());return(a=>new AuthInterop(a))(s)},"PRIVATE").setInstantiationMode("EXPLICIT")),registerVersion(name$1,version$3,getVersionForPlatform(o)),registerVersion(name$1,version$3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ID_TOKEN_MAX_AGE=5*60,authIdTokenMaxAge=getExperimentalSetting("authIdTokenMaxAge")||DEFAULT_ID_TOKEN_MAX_AGE;let lastPostedIdToken=null;const mintCookieFactory=o=>async i=>{const s=i&&await i.getIdTokenResult(),a=s&&(new Date().getTime()-Date.parse(s.issuedAtTime))/1e3;if(a&&a>authIdTokenMaxAge)return;const et=s==null?void 0:s.token;lastPostedIdToken!==et&&(lastPostedIdToken=et,await fetch(o,{method:et?"POST":"DELETE",headers:et?{Authorization:`Bearer ${et}`}:{}}))};function getAuth(o=getApp()){const i=_getProvider(o,"auth");if(i.isInitialized())return i.getImmediate();const s=initializeAuth(o,{popupRedirectResolver:browserPopupRedirectResolver,persistence:[indexedDBLocalPersistence,browserLocalPersistence,browserSessionPersistence]}),a=getExperimentalSetting("authTokenSyncURL");if(a){const tt=mintCookieFactory(a);beforeAuthStateChanged(s,tt,()=>tt(s.currentUser)),onIdTokenChanged(s,ot=>tt(ot))}const et=getDefaultEmulatorHost("auth");return et&&connectAuthEmulator(s,`http://${et}`),s}registerAuth("Browser");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k$1,goog=goog||{},l$1=commonjsGlobal||self;function aa(o){var i=typeof o;return i=i!="object"?i:o?Array.isArray(o)?"array":i:"null",i=="array"||i=="object"&&typeof o.length=="number"}function p$1(o){var i=typeof o;return i=="object"&&o!=null||i=="function"}function ba(o){return Object.prototype.hasOwnProperty.call(o,ca)&&o[ca]||(o[ca]=++da)}var ca="closure_uid_"+(1e9*Math.random()>>>0),da=0;function ea(o,i,s){return o.call.apply(o.bind,arguments)}function fa(o,i,s){if(!o)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var et=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(et,a),o.apply(i,et)}}return function(){return o.apply(i,arguments)}}function q$1(o,i,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?q$1=ea:q$1=fa,q$1.apply(null,arguments)}function ha(o,i){var s=Array.prototype.slice.call(arguments,1);return function(){var a=s.slice();return a.push.apply(a,arguments),o.apply(this,a)}}function r$1(o,i){function s(){}s.prototype=i.prototype,o.$=i.prototype,o.prototype=new s,o.prototype.constructor=o,o.ac=function(a,et,tt){for(var ot=Array(arguments.length-2),dt=2;dt<arguments.length;dt++)ot[dt-2]=arguments[dt];return i.prototype[et].apply(a,ot)}}function v$2(){this.s=this.s,this.o=this.o}var ia=0;v$2.prototype.s=!1;v$2.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ia!=0)&&ba(this)};v$2.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ka=Array.prototype.indexOf?function(o,i){return Array.prototype.indexOf.call(o,i,void 0)}:function(o,i){if(typeof o=="string")return typeof i!="string"||i.length!=1?-1:o.indexOf(i,0);for(let s=0;s<o.length;s++)if(s in o&&o[s]===i)return s;return-1};function ma(o){const i=o.length;if(0<i){const s=Array(i);for(let a=0;a<i;a++)s[a]=o[a];return s}return[]}function na(o,i){for(let s=1;s<arguments.length;s++){const a=arguments[s];if(aa(a)){const et=o.length||0,tt=a.length||0;o.length=et+tt;for(let ot=0;ot<tt;ot++)o[et+ot]=a[ot]}else o.push(a)}}function w$2(o,i){this.type=o,this.g=this.target=i,this.defaultPrevented=!1}w$2.prototype.h=function(){this.defaultPrevented=!0};var oa=function(){if(!l$1.addEventListener||!Object.defineProperty)return!1;var o=!1,i=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const s=()=>{};l$1.addEventListener("test",s,i),l$1.removeEventListener("test",s,i)}catch{}return o}();function x(o){return/^[\s\xa0]*$/.test(o)}function pa(){var o=l$1.navigator;return o&&(o=o.userAgent)?o:""}function y(o){return pa().indexOf(o)!=-1}function qa(o){return qa[" "](o),o}qa[" "]=function(){};function ra(o,i){var s=sa;return Object.prototype.hasOwnProperty.call(s,o)?s[o]:s[o]=i(o)}var ta=y("Opera"),z=y("Trident")||y("MSIE"),ua=y("Edge"),va=ua||z,wa=y("Gecko")&&!(pa().toLowerCase().indexOf("webkit")!=-1&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),xa=pa().toLowerCase().indexOf("webkit")!=-1&&!y("Edge");function ya(){var o=l$1.document;return o?o.documentMode:void 0}var za;e:{var Aa="",Ba=function(){var o=pa();if(wa)return/rv:([^\);]+)(\)|;)/.exec(o);if(ua)return/Edge\/([\d\.]+)/.exec(o);if(z)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(o);if(xa)return/WebKit\/(\S+)/.exec(o);if(ta)return/(?:Version)[ \/]?(\S+)/.exec(o)}();if(Ba&&(Aa=Ba?Ba[1]:""),z){var Ca=ya();if(Ca!=null&&Ca>parseFloat(Aa)){za=String(Ca);break e}}za=Aa}var Da;if(l$1.document&&z){var Ea=ya();Da=Ea||parseInt(za,10)||void 0}else Da=void 0;var Fa=Da;function A(o,i){if(w$2.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var s=this.type=o.type,a=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=i,i=o.relatedTarget){if(wa){e:{try{qa(i.nodeName);var et=!0;break e}catch{}et=!1}et||(i=null)}}else s=="mouseover"?i=o.fromElement:s=="mouseout"&&(i=o.toElement);this.relatedTarget=i,a?(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:Ga[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&A.$.h.call(this)}}r$1(A,w$2);var Ga={2:"touch",3:"pen",4:"mouse"};A.prototype.h=function(){A.$.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var Ha="closure_listenable_"+(1e6*Math.random()|0),Ia=0;function Ja(o,i,s,a,et){this.listener=o,this.proxy=null,this.src=i,this.type=s,this.capture=!!a,this.la=et,this.key=++Ia,this.fa=this.ia=!1}function Ma(o){o.fa=!0,o.listener=null,o.proxy=null,o.src=null,o.la=null}function Na(o,i,s){for(const a in o)i.call(s,o[a],a,o)}function Oa(o,i){for(const s in o)i.call(void 0,o[s],s,o)}function Pa(o){const i={};for(const s in o)i[s]=o[s];return i}const Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(o,i){let s,a;for(let et=1;et<arguments.length;et++){a=arguments[et];for(s in a)o[s]=a[s];for(let tt=0;tt<Qa.length;tt++)s=Qa[tt],Object.prototype.hasOwnProperty.call(a,s)&&(o[s]=a[s])}}function Sa(o){this.src=o,this.g={},this.h=0}Sa.prototype.add=function(o,i,s,a,et){var tt=o.toString();o=this.g[tt],o||(o=this.g[tt]=[],this.h++);var ot=Ta(o,i,a,et);return-1<ot?(i=o[ot],s||(i.ia=!1)):(i=new Ja(i,this.src,tt,!!a,et),i.ia=s,o.push(i)),i};function Ua(o,i){var s=i.type;if(s in o.g){var a=o.g[s],et=ka(a,i),tt;(tt=0<=et)&&Array.prototype.splice.call(a,et,1),tt&&(Ma(i),o.g[s].length==0&&(delete o.g[s],o.h--))}}function Ta(o,i,s,a){for(var et=0;et<o.length;++et){var tt=o[et];if(!tt.fa&&tt.listener==i&&tt.capture==!!s&&tt.la==a)return et}return-1}var Va="closure_lm_"+(1e6*Math.random()|0),Wa={};function Ya(o,i,s,a,et){if(a&&a.once)return Za(o,i,s,a,et);if(Array.isArray(i)){for(var tt=0;tt<i.length;tt++)Ya(o,i[tt],s,a,et);return null}return s=$a(s),o&&o[Ha]?o.O(i,s,p$1(a)?!!a.capture:!!a,et):ab(o,i,s,!1,a,et)}function ab(o,i,s,a,et,tt){if(!i)throw Error("Invalid event type");var ot=p$1(et)?!!et.capture:!!et,dt=bb(o);if(dt||(o[Va]=dt=new Sa(o)),s=dt.add(i,s,a,ot,tt),s.proxy)return s;if(a=cb(),s.proxy=a,a.src=o,a.listener=s,o.addEventListener)oa||(et=ot),et===void 0&&(et=!1),o.addEventListener(i.toString(),a,et);else if(o.attachEvent)o.attachEvent(db$1(i.toString()),a);else if(o.addListener&&o.removeListener)o.addListener(a);else throw Error("addEventListener and attachEvent are unavailable.");return s}function cb(){function o(s){return i.call(o.src,o.listener,s)}const i=eb;return o}function Za(o,i,s,a,et){if(Array.isArray(i)){for(var tt=0;tt<i.length;tt++)Za(o,i[tt],s,a,et);return null}return s=$a(s),o&&o[Ha]?o.P(i,s,p$1(a)?!!a.capture:!!a,et):ab(o,i,s,!0,a,et)}function fb(o,i,s,a,et){if(Array.isArray(i))for(var tt=0;tt<i.length;tt++)fb(o,i[tt],s,a,et);else a=p$1(a)?!!a.capture:!!a,s=$a(s),o&&o[Ha]?(o=o.i,i=String(i).toString(),i in o.g&&(tt=o.g[i],s=Ta(tt,s,a,et),-1<s&&(Ma(tt[s]),Array.prototype.splice.call(tt,s,1),tt.length==0&&(delete o.g[i],o.h--)))):o&&(o=bb(o))&&(i=o.g[i.toString()],o=-1,i&&(o=Ta(i,s,a,et)),(s=-1<o?i[o]:null)&&gb(s))}function gb(o){if(typeof o!="number"&&o&&!o.fa){var i=o.src;if(i&&i[Ha])Ua(i.i,o);else{var s=o.type,a=o.proxy;i.removeEventListener?i.removeEventListener(s,a,o.capture):i.detachEvent?i.detachEvent(db$1(s),a):i.addListener&&i.removeListener&&i.removeListener(a),(s=bb(i))?(Ua(s,o),s.h==0&&(s.src=null,i[Va]=null)):Ma(o)}}}function db$1(o){return o in Wa?Wa[o]:Wa[o]="on"+o}function eb(o,i){if(o.fa)o=!0;else{i=new A(i,this);var s=o.listener,a=o.la||o.src;o.ia&&gb(o),o=s.call(a,i)}return o}function bb(o){return o=o[Va],o instanceof Sa?o:null}var hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a(o){return typeof o=="function"?o:(o[hb]||(o[hb]=function(i){return o.handleEvent(i)}),o[hb])}function B(){v$2.call(this),this.i=new Sa(this),this.S=this,this.J=null}r$1(B,v$2);B.prototype[Ha]=!0;B.prototype.removeEventListener=function(o,i,s,a){fb(this,o,i,s,a)};function C$1(o,i){var s,a=o.J;if(a)for(s=[];a;a=a.J)s.push(a);if(o=o.S,a=i.type||i,typeof i=="string")i=new w$2(i,o);else if(i instanceof w$2)i.target=i.target||o;else{var et=i;i=new w$2(a,o),Ra(i,et)}if(et=!0,s)for(var tt=s.length-1;0<=tt;tt--){var ot=i.g=s[tt];et=ib(ot,a,!0,i)&&et}if(ot=i.g=o,et=ib(ot,a,!0,i)&&et,et=ib(ot,a,!1,i)&&et,s)for(tt=0;tt<s.length;tt++)ot=i.g=s[tt],et=ib(ot,a,!1,i)&&et}B.prototype.N=function(){if(B.$.N.call(this),this.i){var o=this.i,i;for(i in o.g){for(var s=o.g[i],a=0;a<s.length;a++)Ma(s[a]);delete o.g[i],o.h--}}this.J=null};B.prototype.O=function(o,i,s,a){return this.i.add(String(o),i,!1,s,a)};B.prototype.P=function(o,i,s,a){return this.i.add(String(o),i,!0,s,a)};function ib(o,i,s,a){if(i=o.i.g[String(i)],!i)return!0;i=i.concat();for(var et=!0,tt=0;tt<i.length;++tt){var ot=i[tt];if(ot&&!ot.fa&&ot.capture==s){var dt=ot.listener,ht=ot.la||ot.src;ot.ia&&Ua(o.i,ot),et=dt.call(ht,a)!==!1&&et}}return et&&!a.defaultPrevented}var jb=l$1.JSON.stringify;class kb{constructor(i,s){this.i=i,this.j=s,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}function lb(){var o=mb;let i=null;return o.g&&(i=o.g,o.g=o.g.next,o.g||(o.h=null),i.next=null),i}class nb{constructor(){this.h=this.g=null}add(i,s){const a=ob.get();a.set(i,s),this.h?this.h.next=a:this.g=a,this.h=a}}var ob=new kb(()=>new pb,o=>o.reset());class pb{constructor(){this.next=this.g=this.h=null}set(i,s){this.h=i,this.g=s,this.next=null}reset(){this.next=this.g=this.h=null}}function qb(o){var i=1;o=o.split(":");const s=[];for(;0<i&&o.length;)s.push(o.shift()),i--;return o.length&&s.push(o.join(":")),s}function rb(o){l$1.setTimeout(()=>{throw o},0)}let sb,tb=!1,mb=new nb,vb=()=>{const o=l$1.Promise.resolve(void 0);sb=()=>{o.then(ub)}};var ub=()=>{for(var o;o=lb();){try{o.h.call(o.g)}catch(s){rb(s)}var i=ob;i.j(o),100>i.h&&(i.h++,o.next=i.g,i.g=o)}tb=!1};function wb(o,i){B.call(this),this.h=o||1,this.g=i||l$1,this.j=q$1(this.qb,this),this.l=Date.now()}r$1(wb,B);k$1=wb.prototype;k$1.ga=!1;k$1.T=null;k$1.qb=function(){if(this.ga){var o=Date.now()-this.l;0<o&&o<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-o):(this.T&&(this.g.clearTimeout(this.T),this.T=null),C$1(this,"tick"),this.ga&&(xb(this),this.start()))}};k$1.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xb(o){o.ga=!1,o.T&&(o.g.clearTimeout(o.T),o.T=null)}k$1.N=function(){wb.$.N.call(this),xb(this),delete this.g};function yb(o,i,s){if(typeof o=="function")s&&(o=q$1(o,s));else if(o&&typeof o.handleEvent=="function")o=q$1(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(i)?-1:l$1.setTimeout(o,i||0)}function zb(o){o.g=yb(()=>{o.g=null,o.i&&(o.i=!1,zb(o))},o.j);const i=o.h;o.h=null,o.m.apply(null,i)}class Ab extends v$2{constructor(i,s){super(),this.m=i,this.j=s,this.h=null,this.i=!1,this.g=null}l(i){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(l$1.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bb(o){v$2.call(this),this.h=o,this.g={}}r$1(Bb,v$2);var Cb=[];function Eb(o,i,s,a){Array.isArray(s)||(s&&(Cb[0]=s.toString()),s=Cb);for(var et=0;et<s.length;et++){var tt=Ya(i,s[et],a||o.handleEvent,!1,o.h||o);if(!tt)break;o.g[tt.key]=tt}}function Fb(o){Na(o.g,function(i,s){this.g.hasOwnProperty(s)&&gb(i)},o),o.g={}}Bb.prototype.N=function(){Bb.$.N.call(this),Fb(this)};Bb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gb(){this.g=!0}Gb.prototype.Ea=function(){this.g=!1};function Hb(o,i,s,a,et,tt){o.info(function(){if(o.g)if(tt)for(var ot="",dt=tt.split("&"),ht=0;ht<dt.length;ht++){var ft=dt[ht].split("=");if(1<ft.length){var pt=ft[0];ft=ft[1];var mt=pt.split("_");ot=2<=mt.length&&mt[1]=="type"?ot+(pt+"="+ft+"&"):ot+(pt+"=redacted&")}}else ot=null;else ot=tt;return"XMLHTTP REQ ("+a+") [attempt "+et+"]: "+i+`
`+s+`
`+ot})}function Ib(o,i,s,a,et,tt,ot){o.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+et+"]: "+i+`
`+s+`
`+tt+" "+ot})}function D$1(o,i,s,a){o.info(function(){return"XMLHTTP TEXT ("+i+"): "+Jb(o,s)+(a?" "+a:"")})}function Kb(o,i){o.info(function(){return"TIMEOUT: "+i})}Gb.prototype.info=function(){};function Jb(o,i){if(!o.g)return i;if(!i)return null;try{var s=JSON.parse(i);if(s){for(o=0;o<s.length;o++)if(Array.isArray(s[o])){var a=s[o];if(!(2>a.length)){var et=a[1];if(Array.isArray(et)&&!(1>et.length)){var tt=et[0];if(tt!="noop"&&tt!="stop"&&tt!="close")for(var ot=1;ot<et.length;ot++)et[ot]=""}}}}return jb(s)}catch{return i}}var E={},Lb=null;function Mb(){return Lb=Lb||new B}E.Ta="serverreachability";function Nb(o){w$2.call(this,E.Ta,o)}r$1(Nb,w$2);function Ob(o){const i=Mb();C$1(i,new Nb(i))}E.STAT_EVENT="statevent";function Pb(o,i){w$2.call(this,E.STAT_EVENT,o),this.stat=i}r$1(Pb,w$2);function F$1(o){const i=Mb();C$1(i,new Pb(i,o))}E.Ua="timingevent";function Qb(o,i){w$2.call(this,E.Ua,o),this.size=i}r$1(Qb,w$2);function Rb(o,i){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l$1.setTimeout(function(){o()},i)}var Sb={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Tb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ub(){}Ub.prototype.h=null;function Vb(o){return o.h||(o.h=o.i())}function Wb(){}var Xb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yb(){w$2.call(this,"d")}r$1(Yb,w$2);function Zb(){w$2.call(this,"c")}r$1(Zb,w$2);var $b;function ac(){}r$1(ac,Ub);ac.prototype.g=function(){return new XMLHttpRequest};ac.prototype.i=function(){return{}};$b=new ac;function bc(o,i,s,a){this.l=o,this.j=i,this.m=s,this.W=a||1,this.U=new Bb(this),this.P=cc,o=va?125:void 0,this.V=new wb(o),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dc}function dc(){this.i=null,this.g="",this.h=!1}var cc=45e3,ec={},fc={};k$1=bc.prototype;k$1.setTimeout=function(o){this.P=o};function gc(o,i,s){o.L=1,o.A=hc(G(i)),o.u=s,o.S=!0,ic(o,null)}function ic(o,i){o.G=Date.now(),jc(o),o.B=G(o.A);var s=o.B,a=o.W;Array.isArray(a)||(a=[String(a)]),kc(s.i,"t",a),o.o=0,s=o.l.J,o.h=new dc,o.g=lc(o.l,s?i:null,!o.u),0<o.O&&(o.M=new Ab(q$1(o.Pa,o,o.g),o.O)),Eb(o.U,o.g,"readystatechange",o.nb),i=o.I?Pa(o.I):{},o.u?(o.v||(o.v="POST"),i["Content-Type"]="application/x-www-form-urlencoded",o.g.ha(o.B,o.v,o.u,i)):(o.v="GET",o.g.ha(o.B,o.v,null,i)),Ob(),Hb(o.j,o.v,o.B,o.m,o.W,o.u)}k$1.nb=function(o){o=o.target;const i=this.M;i&&H(o)==3?i.l():this.Pa(o)};k$1.Pa=function(o){try{if(o==this.g)e:{const pt=H(this.g);var i=this.g.Ia();const mt=this.g.da();if(!(3>pt)&&(pt!=3||va||this.g&&(this.h.h||this.g.ja()||mc(this.g)))){this.J||pt!=4||i==7||(i==8||0>=mt?Ob(3):Ob(2)),nc(this);var s=this.g.da();this.ca=s;t:if(oc(this)){var a=mc(this.g);o="";var et=a.length,tt=H(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){I(this),pc(this);var ot="";break t}this.h.i=new l$1.TextDecoder}for(i=0;i<et;i++)this.h.h=!0,o+=this.h.i.decode(a[i],{stream:tt&&i==et-1});a.length=0,this.h.g+=o,this.o=0,ot=this.h.g}else ot=this.g.ja();if(this.i=s==200,Ib(this.j,this.v,this.B,this.m,this.W,pt,s),this.i){if(this.aa&&!this.K){t:{if(this.g){var dt,ht=this.g;if((dt=ht.g?ht.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(dt)){var ft=dt;break t}}ft=null}if(s=ft)D$1(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qc(this,s);else{this.i=!1,this.s=3,F$1(12),I(this),pc(this);break e}}this.S?(rc(this,pt,ot),va&&this.i&&pt==3&&(Eb(this.U,this.V,"tick",this.mb),this.V.start())):(D$1(this.j,this.m,ot,null),qc(this,ot)),pt==4&&I(this),this.i&&!this.J&&(pt==4?sc(this.l,this):(this.i=!1,jc(this)))}else tc(this.g),s==400&&0<ot.indexOf("Unknown SID")?(this.s=3,F$1(12)):(this.s=0,F$1(13)),I(this),pc(this)}}}catch{}finally{}};function oc(o){return o.g?o.v=="GET"&&o.L!=2&&o.l.Ha:!1}function rc(o,i,s){let a=!0,et;for(;!o.J&&o.o<s.length;)if(et=uc(o,s),et==fc){i==4&&(o.s=4,F$1(14),a=!1),D$1(o.j,o.m,null,"[Incomplete Response]");break}else if(et==ec){o.s=4,F$1(15),D$1(o.j,o.m,s,"[Invalid Chunk]"),a=!1;break}else D$1(o.j,o.m,et,null),qc(o,et);oc(o)&&o.o!=0&&(o.h.g=o.h.g.slice(o.o),o.o=0),i!=4||s.length!=0||o.h.h||(o.s=1,F$1(16),a=!1),o.i=o.i&&a,a?0<s.length&&!o.ba&&(o.ba=!0,i=o.l,i.g==o&&i.ca&&!i.M&&(i.l.info("Great, no buffering proxy detected. Bytes received: "+s.length),vc(i),i.M=!0,F$1(11))):(D$1(o.j,o.m,s,"[Invalid Chunked Response]"),I(o),pc(o))}k$1.mb=function(){if(this.g){var o=H(this.g),i=this.g.ja();this.o<i.length&&(nc(this),rc(this,o,i),this.i&&o!=4&&jc(this))}};function uc(o,i){var s=o.o,a=i.indexOf(`
`,s);return a==-1?fc:(s=Number(i.substring(s,a)),isNaN(s)?ec:(a+=1,a+s>i.length?fc:(i=i.slice(a,a+s),o.o=a+s,i)))}k$1.cancel=function(){this.J=!0,I(this)};function jc(o){o.Y=Date.now()+o.P,wc(o,o.P)}function wc(o,i){if(o.C!=null)throw Error("WatchDog timer not null");o.C=Rb(q$1(o.lb,o),i)}function nc(o){o.C&&(l$1.clearTimeout(o.C),o.C=null)}k$1.lb=function(){this.C=null;const o=Date.now();0<=o-this.Y?(Kb(this.j,this.B),this.L!=2&&(Ob(),F$1(17)),I(this),this.s=2,pc(this)):wc(this,this.Y-o)};function pc(o){o.l.H==0||o.J||sc(o.l,o)}function I(o){nc(o);var i=o.M;i&&typeof i.sa=="function"&&i.sa(),o.M=null,xb(o.V),Fb(o.U),o.g&&(i=o.g,o.g=null,i.abort(),i.sa())}function qc(o,i){try{var s=o.l;if(s.H!=0&&(s.g==o||xc(s.i,o))){if(!o.K&&xc(s.i,o)&&s.H==3){try{var a=s.Ja.g.parse(i)}catch{a=null}if(Array.isArray(a)&&a.length==3){var et=a;if(et[0]==0){e:if(!s.u){if(s.g)if(s.g.G+3e3<o.G)yc(s),zc(s);else break e;Ac(s),F$1(18)}}else s.Fa=et[1],0<s.Fa-s.V&&37500>et[2]&&s.G&&s.A==0&&!s.v&&(s.v=Rb(q$1(s.ib,s),6e3));if(1>=Bc(s.i)&&s.oa){try{s.oa()}catch{}s.oa=void 0}}else J(s,11)}else if((o.K||s.g==o)&&yc(s),!x(i))for(et=s.Ja.g.parse(i),i=0;i<et.length;i++){let ft=et[i];if(s.V=ft[0],ft=ft[1],s.H==2)if(ft[0]=="c"){s.K=ft[1],s.pa=ft[2];const pt=ft[3];pt!=null&&(s.ra=pt,s.l.info("VER="+s.ra));const mt=ft[4];mt!=null&&(s.Ga=mt,s.l.info("SVER="+s.Ga));const gt=ft[5];gt!=null&&typeof gt=="number"&&0<gt&&(a=1.5*gt,s.L=a,s.l.info("backChannelRequestTimeoutMs_="+a)),a=s;const _t=o.g;if(_t){const yt=_t.g?_t.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(yt){var tt=a.i;tt.g||yt.indexOf("spdy")==-1&&yt.indexOf("quic")==-1&&yt.indexOf("h2")==-1||(tt.j=tt.l,tt.g=new Set,tt.h&&(Cc(tt,tt.h),tt.h=null))}if(a.F){const St=_t.g?_t.g.getResponseHeader("X-HTTP-Session-Id"):null;St&&(a.Da=St,K(a.I,a.F,St))}}s.H=3,s.h&&s.h.Ba(),s.ca&&(s.S=Date.now()-o.G,s.l.info("Handshake RTT: "+s.S+"ms")),a=s;var ot=o;if(a.wa=Dc(a,a.J?a.pa:null,a.Y),ot.K){Ec(a.i,ot);var dt=ot,ht=a.L;ht&&dt.setTimeout(ht),dt.C&&(nc(dt),jc(dt)),a.g=ot}else Fc(a);0<s.j.length&&Gc(s)}else ft[0]!="stop"&&ft[0]!="close"||J(s,7);else s.H==3&&(ft[0]=="stop"||ft[0]=="close"?ft[0]=="stop"?J(s,7):Hc(s):ft[0]!="noop"&&s.h&&s.h.Aa(ft),s.A=0)}}Ob(4)}catch{}}function Ic(o){if(o.Z&&typeof o.Z=="function")return o.Z();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(aa(o)){for(var i=[],s=o.length,a=0;a<s;a++)i.push(o[a]);return i}i=[],s=0;for(a in o)i[s++]=o[a];return i}function Jc(o){if(o.ta&&typeof o.ta=="function")return o.ta();if(!o.Z||typeof o.Z!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(aa(o)||typeof o=="string"){var i=[];o=o.length;for(var s=0;s<o;s++)i.push(s);return i}i=[],s=0;for(const a in o)i[s++]=a;return i}}}function Kc(o,i){if(o.forEach&&typeof o.forEach=="function")o.forEach(i,void 0);else if(aa(o)||typeof o=="string")Array.prototype.forEach.call(o,i,void 0);else for(var s=Jc(o),a=Ic(o),et=a.length,tt=0;tt<et;tt++)i.call(void 0,a[tt],s&&s[tt],o)}var Lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc(o,i){if(o){o=o.split("&");for(var s=0;s<o.length;s++){var a=o[s].indexOf("="),et=null;if(0<=a){var tt=o[s].substring(0,a);et=o[s].substring(a+1)}else tt=o[s];i(tt,et?decodeURIComponent(et.replace(/\+/g," ")):"")}}}function M(o){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,o instanceof M){this.h=o.h,Nc(this,o.j),this.s=o.s,this.g=o.g,Oc(this,o.m),this.l=o.l;var i=o.i,s=new Pc;s.i=i.i,i.g&&(s.g=new Map(i.g),s.h=i.h),Qc(this,s),this.o=o.o}else o&&(i=String(o).match(Lc))?(this.h=!1,Nc(this,i[1]||"",!0),this.s=Rc(i[2]||""),this.g=Rc(i[3]||"",!0),Oc(this,i[4]),this.l=Rc(i[5]||"",!0),Qc(this,i[6]||"",!0),this.o=Rc(i[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}M.prototype.toString=function(){var o=[],i=this.j;i&&o.push(Sc(i,Tc,!0),":");var s=this.g;return(s||i=="file")&&(o.push("//"),(i=this.s)&&o.push(Sc(i,Tc,!0),"@"),o.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s=this.m,s!=null&&o.push(":",String(s))),(s=this.l)&&(this.g&&s.charAt(0)!="/"&&o.push("/"),o.push(Sc(s,s.charAt(0)=="/"?Uc:Vc,!0))),(s=this.i.toString())&&o.push("?",s),(s=this.o)&&o.push("#",Sc(s,Wc)),o.join("")};function G(o){return new M(o)}function Nc(o,i,s){o.j=s?Rc(i,!0):i,o.j&&(o.j=o.j.replace(/:$/,""))}function Oc(o,i){if(i){if(i=Number(i),isNaN(i)||0>i)throw Error("Bad port number "+i);o.m=i}else o.m=null}function Qc(o,i,s){i instanceof Pc?(o.i=i,Xc(o.i,o.h)):(s||(i=Sc(i,Yc)),o.i=new Pc(i,o.h))}function K(o,i,s){o.i.set(i,s)}function hc(o){return K(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Rc(o,i){return o?i?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Sc(o,i,s){return typeof o=="string"?(o=encodeURI(o).replace(i,Zc),s&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Zc(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Tc=/[#\/\?@]/g,Vc=/[#\?:]/g,Uc=/[#\?]/g,Yc=/[#\?@]/g,Wc=/#/g;function Pc(o,i){this.h=this.g=null,this.i=o||null,this.j=!!i}function N(o){o.g||(o.g=new Map,o.h=0,o.i&&Mc(o.i,function(i,s){o.add(decodeURIComponent(i.replace(/\+/g," ")),s)}))}k$1=Pc.prototype;k$1.add=function(o,i){N(this),this.i=null,o=O(this,o);var s=this.g.get(o);return s||this.g.set(o,s=[]),s.push(i),this.h+=1,this};function $c(o,i){N(o),i=O(o,i),o.g.has(i)&&(o.i=null,o.h-=o.g.get(i).length,o.g.delete(i))}function ad(o,i){return N(o),i=O(o,i),o.g.has(i)}k$1.forEach=function(o,i){N(this),this.g.forEach(function(s,a){s.forEach(function(et){o.call(i,et,a,this)},this)},this)};k$1.ta=function(){N(this);const o=Array.from(this.g.values()),i=Array.from(this.g.keys()),s=[];for(let a=0;a<i.length;a++){const et=o[a];for(let tt=0;tt<et.length;tt++)s.push(i[a])}return s};k$1.Z=function(o){N(this);let i=[];if(typeof o=="string")ad(this,o)&&(i=i.concat(this.g.get(O(this,o))));else{o=Array.from(this.g.values());for(let s=0;s<o.length;s++)i=i.concat(o[s])}return i};k$1.set=function(o,i){return N(this),this.i=null,o=O(this,o),ad(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[i]),this.h+=1,this};k$1.get=function(o,i){return o?(o=this.Z(o),0<o.length?String(o[0]):i):i};function kc(o,i,s){$c(o,i),0<s.length&&(o.i=null,o.g.set(O(o,i),ma(s)),o.h+=s.length)}k$1.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],i=Array.from(this.g.keys());for(var s=0;s<i.length;s++){var a=i[s];const tt=encodeURIComponent(String(a)),ot=this.Z(a);for(a=0;a<ot.length;a++){var et=tt;ot[a]!==""&&(et+="="+encodeURIComponent(String(ot[a]))),o.push(et)}}return this.i=o.join("&")};function O(o,i){return i=String(i),o.j&&(i=i.toLowerCase()),i}function Xc(o,i){i&&!o.j&&(N(o),o.i=null,o.g.forEach(function(s,a){var et=a.toLowerCase();a!=et&&($c(this,a),kc(this,et,s))},o)),o.j=i}var bd=class{constructor(o,i){this.g=o,this.map=i}};function cd(o){this.l=o||dd,l$1.PerformanceNavigationTiming?(o=l$1.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l$1.g&&l$1.g.Ka&&l$1.g.Ka()&&l$1.g.Ka().dc),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dd=10;function ed(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Bc(o){return o.h?1:o.g?o.g.size:0}function xc(o,i){return o.h?o.h==i:o.g?o.g.has(i):!1}function Cc(o,i){o.g?o.g.add(i):o.h=i}function Ec(o,i){o.h&&o.h==i?o.h=null:o.g&&o.g.has(i)&&o.g.delete(i)}cd.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function fd(o){if(o.h!=null)return o.i.concat(o.h.F);if(o.g!=null&&o.g.size!==0){let i=o.i;for(const s of o.g.values())i=i.concat(s.F);return i}return ma(o.i)}var gd=class{stringify(o){return l$1.JSON.stringify(o,void 0)}parse(o){return l$1.JSON.parse(o,void 0)}};function hd(){this.g=new gd}function id(o,i,s){const a=s||"";try{Kc(o,function(et,tt){let ot=et;p$1(et)&&(ot=jb(et)),i.push(a+tt+"="+encodeURIComponent(ot))})}catch(et){throw i.push(a+"type="+encodeURIComponent("_badmap")),et}}function jd(o,i){const s=new Gb;if(l$1.Image){const a=new Image;a.onload=ha(kd,s,a,"TestLoadImage: loaded",!0,i),a.onerror=ha(kd,s,a,"TestLoadImage: error",!1,i),a.onabort=ha(kd,s,a,"TestLoadImage: abort",!1,i),a.ontimeout=ha(kd,s,a,"TestLoadImage: timeout",!1,i),l$1.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=o}else i(!1)}function kd(o,i,s,a,et){try{i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null,et(a)}catch{}}function ld(o){this.l=o.ec||null,this.j=o.ob||!1}r$1(ld,Ub);ld.prototype.g=function(){return new md(this.l,this.j)};ld.prototype.i=function(o){return function(){return o}}({});function md(o,i){B.call(this),this.F=o,this.u=i,this.m=void 0,this.readyState=nd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r$1(md,B);var nd=0;k$1=md.prototype;k$1.open=function(o,i){if(this.readyState!=nd)throw this.abort(),Error("Error reopening a connection");this.C=o,this.B=i,this.readyState=1,od(this)};k$1.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const i={headers:this.v,method:this.C,credentials:this.m,cache:void 0};o&&(i.body=o),(this.F||l$1).fetch(new Request(this.B,i)).then(this.$a.bind(this),this.ka.bind(this))};k$1.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pd(this)),this.readyState=nd};k$1.$a=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,od(this)),this.g&&(this.readyState=3,od(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof l$1.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qd(this)}else o.text().then(this.Za.bind(this),this.ka.bind(this))};function qd(o){o.j.read().then(o.Xa.bind(o)).catch(o.ka.bind(o))}k$1.Xa=function(o){if(this.g){if(this.u&&o.value)this.response.push(o.value);else if(!this.u){var i=o.value?o.value:new Uint8Array(0);(i=this.A.decode(i,{stream:!o.done}))&&(this.response=this.responseText+=i)}o.done?pd(this):od(this),this.readyState==3&&qd(this)}};k$1.Za=function(o){this.g&&(this.response=this.responseText=o,pd(this))};k$1.Ya=function(o){this.g&&(this.response=o,pd(this))};k$1.ka=function(){this.g&&pd(this)};function pd(o){o.readyState=4,o.l=null,o.j=null,o.A=null,od(o)}k$1.setRequestHeader=function(o,i){this.v.append(o,i)};k$1.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""};k$1.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],i=this.h.entries();for(var s=i.next();!s.done;)s=s.value,o.push(s[0]+": "+s[1]),s=i.next();return o.join(`\r
`)};function od(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});var rd=l$1.JSON.parse;function P$1(o){B.call(this),this.headers=new Map,this.u=o||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sd,this.L=this.M=!1}r$1(P$1,B);var sd="",td=/^https?$/i,ud=["POST","PUT"];k$1=P$1.prototype;k$1.Oa=function(o){this.M=o};k$1.ha=function(o,i,s,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+o);i=i?i.toUpperCase():"GET",this.I=o,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$b.g(),this.C=this.u?Vb(this.u):Vb($b),this.g.onreadystatechange=q$1(this.La,this);try{this.G=!0,this.g.open(i,String(o),!0),this.G=!1}catch(tt){vd(this,tt);return}if(o=s||"",s=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var et in a)s.set(et,a[et]);else if(typeof a.keys=="function"&&typeof a.get=="function")for(const tt of a.keys())s.set(tt,a.get(tt));else throw Error("Unknown input type for opt_headers: "+String(a));a=Array.from(s.keys()).find(tt=>tt.toLowerCase()=="content-type"),et=l$1.FormData&&o instanceof l$1.FormData,!(0<=ka(ud,i))||a||et||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[tt,ot]of s)this.g.setRequestHeader(tt,ot);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wd(this),0<this.B&&((this.L=xd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q$1(this.ua,this)):this.A=yb(this.ua,this.B,this)),this.v=!0,this.g.send(o),this.v=!1}catch(tt){vd(this,tt)}};function xd(o){return z&&typeof o.timeout=="number"&&o.ontimeout!==void 0}k$1.ua=function(){typeof goog<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C$1(this,"timeout"),this.abort(8))};function vd(o,i){o.h=!1,o.g&&(o.l=!0,o.g.abort(),o.l=!1),o.j=i,o.m=5,yd(o),zd(o)}function yd(o){o.F||(o.F=!0,C$1(o,"complete"),C$1(o,"error"))}k$1.abort=function(o){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=o||7,C$1(this,"complete"),C$1(this,"abort"),zd(this))};k$1.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),P$1.$.N.call(this)};k$1.La=function(){this.s||(this.G||this.v||this.l?Ad(this):this.kb())};k$1.kb=function(){Ad(this)};function Ad(o){if(o.h&&typeof goog<"u"&&(!o.C[1]||H(o)!=4||o.da()!=2)){if(o.v&&H(o)==4)yb(o.La,0,o);else if(C$1(o,"readystatechange"),H(o)==4){o.h=!1;try{const ot=o.da();e:switch(ot){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var i=!0;break e;default:i=!1}var s;if(!(s=i)){var a;if(a=ot===0){var et=String(o.I).match(Lc)[1]||null;!et&&l$1.self&&l$1.self.location&&(et=l$1.self.location.protocol.slice(0,-1)),a=!td.test(et?et.toLowerCase():"")}s=a}if(s)C$1(o,"complete"),C$1(o,"success");else{o.m=6;try{var tt=2<H(o)?o.g.statusText:""}catch{tt=""}o.j=tt+" ["+o.da()+"]",yd(o)}}finally{zd(o)}}}}function zd(o,i){if(o.g){wd(o);const s=o.g,a=o.C[0]?()=>{}:null;o.g=null,o.C=null,i||C$1(o,"ready");try{s.onreadystatechange=a}catch{}}}function wd(o){o.g&&o.L&&(o.g.ontimeout=null),o.A&&(l$1.clearTimeout(o.A),o.A=null)}k$1.isActive=function(){return!!this.g};function H(o){return o.g?o.g.readyState:0}k$1.da=function(){try{return 2<H(this)?this.g.status:-1}catch{return-1}};k$1.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k$1.Wa=function(o){if(this.g){var i=this.g.responseText;return o&&i.indexOf(o)==0&&(i=i.substring(o.length)),rd(i)}};function mc(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.K){case sd:case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function tc(o){const i={};o=(o.g&&2<=H(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let a=0;a<o.length;a++){if(x(o[a]))continue;var s=qb(o[a]);const et=s[0];if(s=s[1],typeof s!="string")continue;s=s.trim();const tt=i[et]||[];i[et]=tt,tt.push(s)}Oa(i,function(a){return a.join(", ")})}k$1.Ia=function(){return this.m};k$1.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Bd(o){let i="";return Na(o,function(s,a){i+=a,i+=":",i+=s,i+=`\r
`}),i}function Cd(o,i,s){e:{for(a in s){var a=!1;break e}a=!0}a||(s=Bd(s),typeof o=="string"?s!=null&&encodeURIComponent(String(s)):K(o,i,s))}function Dd(o,i,s){return s&&s.internalChannelParams&&s.internalChannelParams[o]||i}function Ed(o){this.Ga=0,this.j=[],this.l=new Gb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dd("failFast",!1,o),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dd("baseRetryDelayMs",5e3,o),this.hb=Dd("retryDelaySeedMs",1e4,o),this.eb=Dd("forwardChannelMaxRetries",2,o),this.xa=Dd("forwardChannelRequestTimeoutMs",2e4,o),this.va=o&&o.xmlHttpFactory||void 0,this.Ha=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.i=new cd(o&&o.concurrentRequestLimit),this.Ja=new hd,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=o&&o.bc||!1,o&&o.Ea&&this.l.Ea(),o&&o.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&o&&o.detectBufferingProxy||!1,this.qa=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.qa=o.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k$1=Ed.prototype;k$1.ra=8;k$1.H=1;function Hc(o){if(Fd(o),o.H==3){var i=o.W++,s=G(o.I);if(K(s,"SID",o.K),K(s,"RID",i),K(s,"TYPE","terminate"),Gd(o,s),i=new bc(o,o.l,i),i.L=2,i.A=hc(G(s)),s=!1,l$1.navigator&&l$1.navigator.sendBeacon)try{s=l$1.navigator.sendBeacon(i.A.toString(),"")}catch{}!s&&l$1.Image&&(new Image().src=i.A,s=!0),s||(i.g=lc(i.l,null),i.g.ha(i.A)),i.G=Date.now(),jc(i)}Hd(o)}function zc(o){o.g&&(vc(o),o.g.cancel(),o.g=null)}function Fd(o){zc(o),o.u&&(l$1.clearTimeout(o.u),o.u=null),yc(o),o.i.cancel(),o.m&&(typeof o.m=="number"&&l$1.clearTimeout(o.m),o.m=null)}function Gc(o){if(!ed(o.i)&&!o.m){o.m=!0;var i=o.Na;sb||vb(),tb||(sb(),tb=!0),mb.add(i,o),o.C=0}}function Id(o,i){return Bc(o.i)>=o.i.j-(o.m?1:0)?!1:o.m?(o.j=i.F.concat(o.j),!0):o.H==1||o.H==2||o.C>=(o.cb?0:o.eb)?!1:(o.m=Rb(q$1(o.Na,o,i),Jd(o,o.C)),o.C++,!0)}k$1.Na=function(o){if(this.m)if(this.m=null,this.H==1){if(!o){this.W=Math.floor(1e5*Math.random()),o=this.W++;const et=new bc(this,this.l,o);let tt=this.s;if(this.U&&(tt?(tt=Pa(tt),Ra(tt,this.U)):tt=this.U),this.o!==null||this.O||(et.I=tt,tt=null),this.P)e:{for(var i=0,s=0;s<this.j.length;s++){t:{var a=this.j[s];if("__data__"in a.map&&(a=a.map.__data__,typeof a=="string")){a=a.length;break t}a=void 0}if(a===void 0)break;if(i+=a,4096<i){i=s;break e}if(i===4096||s===this.j.length-1){i=s+1;break e}}i=1e3}else i=1e3;i=Kd(this,et,i),s=G(this.I),K(s,"RID",o),K(s,"CVER",22),this.F&&K(s,"X-HTTP-Session-Id",this.F),Gd(this,s),tt&&(this.O?i="headers="+encodeURIComponent(String(Bd(tt)))+"&"+i:this.o&&Cd(s,this.o,tt)),Cc(this.i,et),this.bb&&K(s,"TYPE","init"),this.P?(K(s,"$req",i),K(s,"SID","null"),et.aa=!0,gc(et,s,null)):gc(et,s,i),this.H=2}}else this.H==3&&(o?Ld(this,o):this.j.length==0||ed(this.i)||Ld(this))};function Ld(o,i){var s;i?s=i.m:s=o.W++;const a=G(o.I);K(a,"SID",o.K),K(a,"RID",s),K(a,"AID",o.V),Gd(o,a),o.o&&o.s&&Cd(a,o.o,o.s),s=new bc(o,o.l,s,o.C+1),o.o===null&&(s.I=o.s),i&&(o.j=i.F.concat(o.j)),i=Kd(o,s,1e3),s.setTimeout(Math.round(.5*o.xa)+Math.round(.5*o.xa*Math.random())),Cc(o.i,s),gc(s,a,i)}function Gd(o,i){o.na&&Na(o.na,function(s,a){K(i,a,s)}),o.h&&Kc({},function(s,a){K(i,a,s)})}function Kd(o,i,s){s=Math.min(o.j.length,s);var a=o.h?q$1(o.h.Va,o.h,o):null;e:{var et=o.j;let tt=-1;for(;;){const ot=["count="+s];tt==-1?0<s?(tt=et[0].g,ot.push("ofs="+tt)):tt=0:ot.push("ofs="+tt);let dt=!0;for(let ht=0;ht<s;ht++){let ft=et[ht].g;const pt=et[ht].map;if(ft-=tt,0>ft)tt=Math.max(0,et[ht].g-100),dt=!1;else try{id(pt,ot,"req"+ft+"_")}catch{a&&a(pt)}}if(dt){a=ot.join("&");break e}}}return o=o.j.splice(0,s),i.F=o,a}function Fc(o){if(!o.g&&!o.u){o.ba=1;var i=o.Ma;sb||vb(),tb||(sb(),tb=!0),mb.add(i,o),o.A=0}}function Ac(o){return o.g||o.u||3<=o.A?!1:(o.ba++,o.u=Rb(q$1(o.Ma,o),Jd(o,o.A)),o.A++,!0)}k$1.Ma=function(){if(this.u=null,Md(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var o=2*this.S;this.l.info("BP detection timer enabled: "+o),this.B=Rb(q$1(this.jb,this),o)}};k$1.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,F$1(10),zc(this),Md(this))};function vc(o){o.B!=null&&(l$1.clearTimeout(o.B),o.B=null)}function Md(o){o.g=new bc(o,o.l,"rpc",o.ba),o.o===null&&(o.g.I=o.s),o.g.O=0;var i=G(o.wa);K(i,"RID","rpc"),K(i,"SID",o.K),K(i,"AID",o.V),K(i,"CI",o.G?"0":"1"),!o.G&&o.qa&&K(i,"TO",o.qa),K(i,"TYPE","xmlhttp"),Gd(o,i),o.o&&o.s&&Cd(i,o.o,o.s),o.L&&o.g.setTimeout(o.L);var s=o.g;o=o.pa,s.L=1,s.A=hc(G(i)),s.u=null,s.S=!0,ic(s,o)}k$1.ib=function(){this.v!=null&&(this.v=null,zc(this),Ac(this),F$1(19))};function yc(o){o.v!=null&&(l$1.clearTimeout(o.v),o.v=null)}function sc(o,i){var s=null;if(o.g==i){yc(o),vc(o),o.g=null;var a=2}else if(xc(o.i,i))s=i.F,Ec(o.i,i),a=1;else return;if(o.H!=0){if(i.i)if(a==1){s=i.u?i.u.length:0,i=Date.now()-i.G;var et=o.C;a=Mb(),C$1(a,new Qb(a,s)),Gc(o)}else Fc(o);else if(et=i.s,et==3||et==0&&0<i.ca||!(a==1&&Id(o,i)||a==2&&Ac(o)))switch(s&&0<s.length&&(i=o.i,i.i=i.i.concat(s)),et){case 1:J(o,5);break;case 4:J(o,10);break;case 3:J(o,6);break;default:J(o,2)}}}function Jd(o,i){let s=o.ab+Math.floor(Math.random()*o.hb);return o.isActive()||(s*=2),s*i}function J(o,i){if(o.l.info("Error code "+i),i==2){var s=null;o.h&&(s=null);var a=q$1(o.pb,o);s||(s=new M("//www.google.com/images/cleardot.gif"),l$1.location&&l$1.location.protocol=="http"||Nc(s,"https"),hc(s)),jd(s.toString(),a)}else F$1(2);o.H=0,o.h&&o.h.za(i),Hd(o),Fd(o)}k$1.pb=function(o){o?(this.l.info("Successfully pinged google.com"),F$1(2)):(this.l.info("Failed to ping google.com"),F$1(1))};function Hd(o){if(o.H=0,o.ma=[],o.h){const i=fd(o.i);(i.length!=0||o.j.length!=0)&&(na(o.ma,i),na(o.ma,o.j),o.i.i.length=0,ma(o.j),o.j.length=0),o.h.ya()}}function Dc(o,i,s){var a=s instanceof M?G(s):new M(s);if(a.g!="")i&&(a.g=i+"."+a.g),Oc(a,a.m);else{var et=l$1.location;a=et.protocol,i=i?i+"."+et.hostname:et.hostname,et=+et.port;var tt=new M(null);a&&Nc(tt,a),i&&(tt.g=i),et&&Oc(tt,et),s&&(tt.l=s),a=tt}return s=o.F,i=o.Da,s&&i&&K(a,s,i),K(a,"VER",o.ra),Gd(o,a),a}function lc(o,i,s){if(i&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return i=o.Ha&&!o.va?new P$1(new ld({ob:s})):new P$1(o.va),i.Oa(o.J),i}k$1.isActive=function(){return!!this.h&&this.h.isActive(this)};function Nd(){}k$1=Nd.prototype;k$1.Ba=function(){};k$1.Aa=function(){};k$1.za=function(){};k$1.ya=function(){};k$1.isActive=function(){return!0};k$1.Va=function(){};function Od(){if(z&&!(10<=Number(Fa)))throw Error("Environmental error: no available transport.")}Od.prototype.g=function(o,i){return new Q(o,i)};function Q(o,i){B.call(this),this.g=new Ed(i),this.l=o,this.h=i&&i.messageUrlParams||null,o=i&&i.messageHeaders||null,i&&i.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.s=o,o=i&&i.initMessageHeaders||null,i&&i.messageContentType&&(o?o["X-WebChannel-Content-Type"]=i.messageContentType:o={"X-WebChannel-Content-Type":i.messageContentType}),i&&i.Ca&&(o?o["X-WebChannel-Client-Profile"]=i.Ca:o={"X-WebChannel-Client-Profile":i.Ca}),this.g.U=o,(o=i&&i.cc)&&!x(o)&&(this.g.o=o),this.A=i&&i.supportsCrossDomainXhr||!1,this.v=i&&i.sendRawJson||!1,(i=i&&i.httpSessionIdParam)&&!x(i)&&(this.g.F=i,o=this.h,o!==null&&i in o&&(o=this.h,i in o&&delete o[i])),this.j=new R(this)}r$1(Q,B);Q.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var o=this.g,i=this.l,s=this.h||void 0;F$1(0),o.Y=i,o.na=s||{},o.G=o.aa,o.I=Dc(o,null,o.Y),Gc(o)};Q.prototype.close=function(){Hc(this.g)};Q.prototype.u=function(o){var i=this.g;if(typeof o=="string"){var s={};s.__data__=o,o=s}else this.v&&(s={},s.__data__=jb(o),o=s);i.j.push(new bd(i.fb++,o)),i.H==3&&Gc(i)};Q.prototype.N=function(){this.g.h=null,delete this.j,Hc(this.g),delete this.g,Q.$.N.call(this)};function Pd(o){Yb.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var i=o.__sm__;if(i){e:{for(const s in i){o=s;break e}o=void 0}(this.i=o)&&(o=this.i,i=i!==null&&o in i?i[o]:void 0),this.data=i}else this.data=o}r$1(Pd,Yb);function Qd(){Zb.call(this),this.status=1}r$1(Qd,Zb);function R(o){this.g=o}r$1(R,Nd);R.prototype.Ba=function(){C$1(this.g,"a")};R.prototype.Aa=function(o){C$1(this.g,new Pd(o))};R.prototype.za=function(o){C$1(this.g,new Qd)};R.prototype.ya=function(){C$1(this.g,"b")};function Rd(){this.blockSize=-1}function S$1(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}r$1(S$1,Rd);S$1.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sd(o,i,s){s||(s=0);var a=Array(16);if(typeof i=="string")for(var et=0;16>et;++et)a[et]=i.charCodeAt(s++)|i.charCodeAt(s++)<<8|i.charCodeAt(s++)<<16|i.charCodeAt(s++)<<24;else for(et=0;16>et;++et)a[et]=i[s++]|i[s++]<<8|i[s++]<<16|i[s++]<<24;i=o.g[0],s=o.g[1],et=o.g[2];var tt=o.g[3],ot=i+(tt^s&(et^tt))+a[0]+3614090360&4294967295;i=s+(ot<<7&4294967295|ot>>>25),ot=tt+(et^i&(s^et))+a[1]+3905402710&4294967295,tt=i+(ot<<12&4294967295|ot>>>20),ot=et+(s^tt&(i^s))+a[2]+606105819&4294967295,et=tt+(ot<<17&4294967295|ot>>>15),ot=s+(i^et&(tt^i))+a[3]+3250441966&4294967295,s=et+(ot<<22&4294967295|ot>>>10),ot=i+(tt^s&(et^tt))+a[4]+4118548399&4294967295,i=s+(ot<<7&4294967295|ot>>>25),ot=tt+(et^i&(s^et))+a[5]+1200080426&4294967295,tt=i+(ot<<12&4294967295|ot>>>20),ot=et+(s^tt&(i^s))+a[6]+2821735955&4294967295,et=tt+(ot<<17&4294967295|ot>>>15),ot=s+(i^et&(tt^i))+a[7]+4249261313&4294967295,s=et+(ot<<22&4294967295|ot>>>10),ot=i+(tt^s&(et^tt))+a[8]+1770035416&4294967295,i=s+(ot<<7&4294967295|ot>>>25),ot=tt+(et^i&(s^et))+a[9]+2336552879&4294967295,tt=i+(ot<<12&4294967295|ot>>>20),ot=et+(s^tt&(i^s))+a[10]+4294925233&4294967295,et=tt+(ot<<17&4294967295|ot>>>15),ot=s+(i^et&(tt^i))+a[11]+2304563134&4294967295,s=et+(ot<<22&4294967295|ot>>>10),ot=i+(tt^s&(et^tt))+a[12]+1804603682&4294967295,i=s+(ot<<7&4294967295|ot>>>25),ot=tt+(et^i&(s^et))+a[13]+4254626195&4294967295,tt=i+(ot<<12&4294967295|ot>>>20),ot=et+(s^tt&(i^s))+a[14]+2792965006&4294967295,et=tt+(ot<<17&4294967295|ot>>>15),ot=s+(i^et&(tt^i))+a[15]+1236535329&4294967295,s=et+(ot<<22&4294967295|ot>>>10),ot=i+(et^tt&(s^et))+a[1]+4129170786&4294967295,i=s+(ot<<5&4294967295|ot>>>27),ot=tt+(s^et&(i^s))+a[6]+3225465664&4294967295,tt=i+(ot<<9&4294967295|ot>>>23),ot=et+(i^s&(tt^i))+a[11]+643717713&4294967295,et=tt+(ot<<14&4294967295|ot>>>18),ot=s+(tt^i&(et^tt))+a[0]+3921069994&4294967295,s=et+(ot<<20&4294967295|ot>>>12),ot=i+(et^tt&(s^et))+a[5]+3593408605&4294967295,i=s+(ot<<5&4294967295|ot>>>27),ot=tt+(s^et&(i^s))+a[10]+38016083&4294967295,tt=i+(ot<<9&4294967295|ot>>>23),ot=et+(i^s&(tt^i))+a[15]+3634488961&4294967295,et=tt+(ot<<14&4294967295|ot>>>18),ot=s+(tt^i&(et^tt))+a[4]+3889429448&4294967295,s=et+(ot<<20&4294967295|ot>>>12),ot=i+(et^tt&(s^et))+a[9]+568446438&4294967295,i=s+(ot<<5&4294967295|ot>>>27),ot=tt+(s^et&(i^s))+a[14]+3275163606&4294967295,tt=i+(ot<<9&4294967295|ot>>>23),ot=et+(i^s&(tt^i))+a[3]+4107603335&4294967295,et=tt+(ot<<14&4294967295|ot>>>18),ot=s+(tt^i&(et^tt))+a[8]+1163531501&4294967295,s=et+(ot<<20&4294967295|ot>>>12),ot=i+(et^tt&(s^et))+a[13]+2850285829&4294967295,i=s+(ot<<5&4294967295|ot>>>27),ot=tt+(s^et&(i^s))+a[2]+4243563512&4294967295,tt=i+(ot<<9&4294967295|ot>>>23),ot=et+(i^s&(tt^i))+a[7]+1735328473&4294967295,et=tt+(ot<<14&4294967295|ot>>>18),ot=s+(tt^i&(et^tt))+a[12]+2368359562&4294967295,s=et+(ot<<20&4294967295|ot>>>12),ot=i+(s^et^tt)+a[5]+4294588738&4294967295,i=s+(ot<<4&4294967295|ot>>>28),ot=tt+(i^s^et)+a[8]+2272392833&4294967295,tt=i+(ot<<11&4294967295|ot>>>21),ot=et+(tt^i^s)+a[11]+1839030562&4294967295,et=tt+(ot<<16&4294967295|ot>>>16),ot=s+(et^tt^i)+a[14]+4259657740&4294967295,s=et+(ot<<23&4294967295|ot>>>9),ot=i+(s^et^tt)+a[1]+2763975236&4294967295,i=s+(ot<<4&4294967295|ot>>>28),ot=tt+(i^s^et)+a[4]+1272893353&4294967295,tt=i+(ot<<11&4294967295|ot>>>21),ot=et+(tt^i^s)+a[7]+4139469664&4294967295,et=tt+(ot<<16&4294967295|ot>>>16),ot=s+(et^tt^i)+a[10]+3200236656&4294967295,s=et+(ot<<23&4294967295|ot>>>9),ot=i+(s^et^tt)+a[13]+681279174&4294967295,i=s+(ot<<4&4294967295|ot>>>28),ot=tt+(i^s^et)+a[0]+3936430074&4294967295,tt=i+(ot<<11&4294967295|ot>>>21),ot=et+(tt^i^s)+a[3]+3572445317&4294967295,et=tt+(ot<<16&4294967295|ot>>>16),ot=s+(et^tt^i)+a[6]+76029189&4294967295,s=et+(ot<<23&4294967295|ot>>>9),ot=i+(s^et^tt)+a[9]+3654602809&4294967295,i=s+(ot<<4&4294967295|ot>>>28),ot=tt+(i^s^et)+a[12]+3873151461&4294967295,tt=i+(ot<<11&4294967295|ot>>>21),ot=et+(tt^i^s)+a[15]+530742520&4294967295,et=tt+(ot<<16&4294967295|ot>>>16),ot=s+(et^tt^i)+a[2]+3299628645&4294967295,s=et+(ot<<23&4294967295|ot>>>9),ot=i+(et^(s|~tt))+a[0]+4096336452&4294967295,i=s+(ot<<6&4294967295|ot>>>26),ot=tt+(s^(i|~et))+a[7]+1126891415&4294967295,tt=i+(ot<<10&4294967295|ot>>>22),ot=et+(i^(tt|~s))+a[14]+2878612391&4294967295,et=tt+(ot<<15&4294967295|ot>>>17),ot=s+(tt^(et|~i))+a[5]+4237533241&4294967295,s=et+(ot<<21&4294967295|ot>>>11),ot=i+(et^(s|~tt))+a[12]+1700485571&4294967295,i=s+(ot<<6&4294967295|ot>>>26),ot=tt+(s^(i|~et))+a[3]+2399980690&4294967295,tt=i+(ot<<10&4294967295|ot>>>22),ot=et+(i^(tt|~s))+a[10]+4293915773&4294967295,et=tt+(ot<<15&4294967295|ot>>>17),ot=s+(tt^(et|~i))+a[1]+2240044497&4294967295,s=et+(ot<<21&4294967295|ot>>>11),ot=i+(et^(s|~tt))+a[8]+1873313359&4294967295,i=s+(ot<<6&4294967295|ot>>>26),ot=tt+(s^(i|~et))+a[15]+4264355552&4294967295,tt=i+(ot<<10&4294967295|ot>>>22),ot=et+(i^(tt|~s))+a[6]+2734768916&4294967295,et=tt+(ot<<15&4294967295|ot>>>17),ot=s+(tt^(et|~i))+a[13]+1309151649&4294967295,s=et+(ot<<21&4294967295|ot>>>11),ot=i+(et^(s|~tt))+a[4]+4149444226&4294967295,i=s+(ot<<6&4294967295|ot>>>26),ot=tt+(s^(i|~et))+a[11]+3174756917&4294967295,tt=i+(ot<<10&4294967295|ot>>>22),ot=et+(i^(tt|~s))+a[2]+718787259&4294967295,et=tt+(ot<<15&4294967295|ot>>>17),ot=s+(tt^(et|~i))+a[9]+3951481745&4294967295,o.g[0]=o.g[0]+i&4294967295,o.g[1]=o.g[1]+(et+(ot<<21&4294967295|ot>>>11))&4294967295,o.g[2]=o.g[2]+et&4294967295,o.g[3]=o.g[3]+tt&4294967295}S$1.prototype.j=function(o,i){i===void 0&&(i=o.length);for(var s=i-this.blockSize,a=this.m,et=this.h,tt=0;tt<i;){if(et==0)for(;tt<=s;)Sd(this,o,tt),tt+=this.blockSize;if(typeof o=="string"){for(;tt<i;)if(a[et++]=o.charCodeAt(tt++),et==this.blockSize){Sd(this,a),et=0;break}}else for(;tt<i;)if(a[et++]=o[tt++],et==this.blockSize){Sd(this,a),et=0;break}}this.h=et,this.i+=i};S$1.prototype.l=function(){var o=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);o[0]=128;for(var i=1;i<o.length-8;++i)o[i]=0;var s=8*this.i;for(i=o.length-8;i<o.length;++i)o[i]=s&255,s/=256;for(this.j(o),o=Array(16),i=s=0;4>i;++i)for(var a=0;32>a;a+=8)o[s++]=this.g[i]>>>a&255;return o};function T(o,i){this.h=i;for(var s=[],a=!0,et=o.length-1;0<=et;et--){var tt=o[et]|0;a&&tt==i||(s[et]=tt,a=!1)}this.g=s}var sa={};function Td(o){return-128<=o&&128>o?ra(o,function(i){return new T([i|0],0>i?-1:0)}):new T([o|0],0>o?-1:0)}function U(o){if(isNaN(o)||!isFinite(o))return V;if(0>o)return W(U(-o));for(var i=[],s=1,a=0;o>=s;a++)i[a]=o/s|0,s*=Ud;return new T(i,0)}function Vd(o,i){if(o.length==0)throw Error("number format error: empty string");if(i=i||10,2>i||36<i)throw Error("radix out of range: "+i);if(o.charAt(0)=="-")return W(Vd(o.substring(1),i));if(0<=o.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=U(Math.pow(i,8)),a=V,et=0;et<o.length;et+=8){var tt=Math.min(8,o.length-et),ot=parseInt(o.substring(et,et+tt),i);8>tt?(tt=U(Math.pow(i,tt)),a=a.R(tt).add(U(ot))):(a=a.R(s),a=a.add(U(ot)))}return a}var Ud=4294967296,V=Td(0),Wd=Td(1),Xd=Td(16777216);k$1=T.prototype;k$1.ea=function(){if(X(this))return-W(this).ea();for(var o=0,i=1,s=0;s<this.g.length;s++){var a=this.D(s);o+=(0<=a?a:Ud+a)*i,i*=Ud}return o};k$1.toString=function(o){if(o=o||10,2>o||36<o)throw Error("radix out of range: "+o);if(Y(this))return"0";if(X(this))return"-"+W(this).toString(o);for(var i=U(Math.pow(o,6)),s=this,a="";;){var et=Yd(s,i).g;s=Zd(s,et.R(i));var tt=((0<s.g.length?s.g[0]:s.h)>>>0).toString(o);if(s=et,Y(s))return tt+a;for(;6>tt.length;)tt="0"+tt;a=tt+a}};k$1.D=function(o){return 0>o?0:o<this.g.length?this.g[o]:this.h};function Y(o){if(o.h!=0)return!1;for(var i=0;i<o.g.length;i++)if(o.g[i]!=0)return!1;return!0}function X(o){return o.h==-1}k$1.X=function(o){return o=Zd(this,o),X(o)?-1:Y(o)?0:1};function W(o){for(var i=o.g.length,s=[],a=0;a<i;a++)s[a]=~o.g[a];return new T(s,~o.h).add(Wd)}k$1.abs=function(){return X(this)?W(this):this};k$1.add=function(o){for(var i=Math.max(this.g.length,o.g.length),s=[],a=0,et=0;et<=i;et++){var tt=a+(this.D(et)&65535)+(o.D(et)&65535),ot=(tt>>>16)+(this.D(et)>>>16)+(o.D(et)>>>16);a=ot>>>16,tt&=65535,ot&=65535,s[et]=ot<<16|tt}return new T(s,s[s.length-1]&-2147483648?-1:0)};function Zd(o,i){return o.add(W(i))}k$1.R=function(o){if(Y(this)||Y(o))return V;if(X(this))return X(o)?W(this).R(W(o)):W(W(this).R(o));if(X(o))return W(this.R(W(o)));if(0>this.X(Xd)&&0>o.X(Xd))return U(this.ea()*o.ea());for(var i=this.g.length+o.g.length,s=[],a=0;a<2*i;a++)s[a]=0;for(a=0;a<this.g.length;a++)for(var et=0;et<o.g.length;et++){var tt=this.D(a)>>>16,ot=this.D(a)&65535,dt=o.D(et)>>>16,ht=o.D(et)&65535;s[2*a+2*et]+=ot*ht,$d(s,2*a+2*et),s[2*a+2*et+1]+=tt*ht,$d(s,2*a+2*et+1),s[2*a+2*et+1]+=ot*dt,$d(s,2*a+2*et+1),s[2*a+2*et+2]+=tt*dt,$d(s,2*a+2*et+2)}for(a=0;a<i;a++)s[a]=s[2*a+1]<<16|s[2*a];for(a=i;a<2*i;a++)s[a]=0;return new T(s,0)};function $d(o,i){for(;(o[i]&65535)!=o[i];)o[i+1]+=o[i]>>>16,o[i]&=65535,i++}function ae$1(o,i){this.g=o,this.h=i}function Yd(o,i){if(Y(i))throw Error("division by zero");if(Y(o))return new ae$1(V,V);if(X(o))return i=Yd(W(o),i),new ae$1(W(i.g),W(i.h));if(X(i))return i=Yd(o,W(i)),new ae$1(W(i.g),i.h);if(30<o.g.length){if(X(o)||X(i))throw Error("slowDivide_ only works with positive integers.");for(var s=Wd,a=i;0>=a.X(o);)s=be(s),a=be(a);var et=Z(s,1),tt=Z(a,1);for(a=Z(a,2),s=Z(s,2);!Y(a);){var ot=tt.add(a);0>=ot.X(o)&&(et=et.add(s),tt=ot),a=Z(a,1),s=Z(s,1)}return i=Zd(o,et.R(i)),new ae$1(et,i)}for(et=V;0<=o.X(i);){for(s=Math.max(1,Math.floor(o.ea()/i.ea())),a=Math.ceil(Math.log(s)/Math.LN2),a=48>=a?1:Math.pow(2,a-48),tt=U(s),ot=tt.R(i);X(ot)||0<ot.X(o);)s-=a,tt=U(s),ot=tt.R(i);Y(tt)&&(tt=Wd),et=et.add(tt),o=Zd(o,ot)}return new ae$1(et,o)}k$1.gb=function(o){return Yd(this,o).h};k$1.and=function(o){for(var i=Math.max(this.g.length,o.g.length),s=[],a=0;a<i;a++)s[a]=this.D(a)&o.D(a);return new T(s,this.h&o.h)};k$1.or=function(o){for(var i=Math.max(this.g.length,o.g.length),s=[],a=0;a<i;a++)s[a]=this.D(a)|o.D(a);return new T(s,this.h|o.h)};k$1.xor=function(o){for(var i=Math.max(this.g.length,o.g.length),s=[],a=0;a<i;a++)s[a]=this.D(a)^o.D(a);return new T(s,this.h^o.h)};function be(o){for(var i=o.g.length+1,s=[],a=0;a<i;a++)s[a]=o.D(a)<<1|o.D(a-1)>>>31;return new T(s,o.h)}function Z(o,i){var s=i>>5;i%=32;for(var a=o.g.length-s,et=[],tt=0;tt<a;tt++)et[tt]=0<i?o.D(tt+s)>>>i|o.D(tt+s+1)<<32-i:o.D(tt+s);return new T(et,o.h)}Od.prototype.createWebChannel=Od.prototype.g;Q.prototype.send=Q.prototype.u;Q.prototype.open=Q.prototype.m;Q.prototype.close=Q.prototype.close;Sb.NO_ERROR=0;Sb.TIMEOUT=8;Sb.HTTP_ERROR=6;Tb.COMPLETE="complete";Wb.EventType=Xb;Xb.OPEN="a";Xb.CLOSE="b";Xb.ERROR="c";Xb.MESSAGE="d";B.prototype.listen=B.prototype.O;P$1.prototype.listenOnce=P$1.prototype.P;P$1.prototype.getLastError=P$1.prototype.Sa;P$1.prototype.getLastErrorCode=P$1.prototype.Ia;P$1.prototype.getStatus=P$1.prototype.da;P$1.prototype.getResponseJson=P$1.prototype.Wa;P$1.prototype.getResponseText=P$1.prototype.ja;P$1.prototype.send=P$1.prototype.ha;P$1.prototype.setWithCredentials=P$1.prototype.Oa;S$1.prototype.digest=S$1.prototype.l;S$1.prototype.reset=S$1.prototype.reset;S$1.prototype.update=S$1.prototype.j;T.prototype.add=T.prototype.add;T.prototype.multiply=T.prototype.R;T.prototype.modulo=T.prototype.gb;T.prototype.compare=T.prototype.X;T.prototype.toNumber=T.prototype.ea;T.prototype.toString=T.prototype.toString;T.prototype.getBits=T.prototype.D;T.fromNumber=U;T.fromString=Vd;var createWebChannelTransport=function(){return new Od},getStatEventTarget=function(){return Mb()},ErrorCode=Sb,EventType=Tb,Event$1=E,Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},WebChannel=Wb,XhrIo=P$1,Md5=S$1,Integer=T;const w$1="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(i){this.uid=i}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(i){return i.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S="10.7.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$1=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return b$1.logLevel}function __PRIVATE_logDebug(o,...i){if(b$1.logLevel<=LogLevel.DEBUG){const s=i.map(__PRIVATE_argToString);b$1.debug(`Firestore (${S}): ${o}`,...s)}}function __PRIVATE_logError(o,...i){if(b$1.logLevel<=LogLevel.ERROR){const s=i.map(__PRIVATE_argToString);b$1.error(`Firestore (${S}): ${o}`,...s)}}function __PRIVATE_logWarn(o,...i){if(b$1.logLevel<=LogLevel.WARN){const s=i.map(__PRIVATE_argToString);b$1.warn(`Firestore (${S}): ${o}`,...s)}}function __PRIVATE_argToString(o){if(typeof o=="string")return o;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(o)}catch{return o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(o="Unexpected state"){const i=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+o;throw __PRIVATE_logError(i),new Error(i)}function __PRIVATE_hardAssert(o,i){o||fail()}function __PRIVATE_debugCast(o,i){return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(i,s){super(i,s),this.code=i,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((i,s)=>{this.resolve=i,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(i,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${i}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(i,s){i.enqueueRetryable(()=>s(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(i){this.token=i,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(i,s){this.changeListener=s,i.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(i){this.t=i,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(i,s){let a=this.i;const et=ht=>this.i!==a?(a=this.i,s(ht)):Promise.resolve();let tt=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),tt.resolve(),tt=new __PRIVATE_Deferred,i.enqueueRetryable(()=>et(this.currentUser))};const ot=()=>{const ht=tt;i.enqueueRetryable(async()=>{await ht.promise,await et(this.currentUser)})},dt=ht=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ht,this.auth.addAuthTokenListener(this.o),ot()};this.t.onInit(ht=>dt(ht)),setTimeout(()=>{if(!this.auth){const ht=this.t.getImmediate({optional:!0});ht?dt(ht):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),tt.resolve(),tt=new __PRIVATE_Deferred)}},0),ot()}getToken(){const i=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(a=>this.i!==i?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(__PRIVATE_hardAssert(typeof a.accessToken=="string"),new __PRIVATE_OAuthToken(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const i=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(i===null||typeof i=="string"),new User(i)}}class __PRIVATE_FirstPartyToken{constructor(i,s,a){this.l=i,this.h=s,this.P=a,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const i=this.T();return i&&this.I.set("Authorization",i),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(i,s,a){this.l=i,this.h=s,this.P=a}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(i,s){i.enqueueRetryable(()=>s(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(i){this.value=i,this.type="AppCheck",this.headers=new Map,i&&i.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(i){this.A=i,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(i,s){const a=tt=>{tt.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${tt.error.message}`);const ot=tt.token!==this.R;return this.R=tt.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${ot?"new":"existing"} token.`),ot?s(tt.token):Promise.resolve()};this.o=tt=>{i.enqueueRetryable(()=>a(tt))};const et=tt=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=tt,this.appCheck.addTokenListener(this.o)};this.A.onInit(tt=>et(tt)),setTimeout(()=>{if(!this.appCheck){const tt=this.A.getImmediate({optional:!0});tt?et(tt):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const i=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(i).then(s=>s?(__PRIVATE_hardAssert(typeof s.token=="string"),this.R=s.token,new AppCheckToken(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(o){const i=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(o);if(i&&typeof i.getRandomValues=="function")i.getRandomValues(s);else for(let a=0;a<o;a++)s[a]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/i.length)*i.length;let a="";for(;a.length<20;){const et=__PRIVATE_randomBytes(40);for(let tt=0;tt<et.length;++tt)a.length<20&&et[tt]<s&&(a+=i.charAt(et[tt]%i.length))}return a}}function __PRIVATE_primitiveComparator(o,i){return o<i?-1:o>i?1:0}function __PRIVATE_arrayEquals(o,i,s){return o.length===i.length&&o.every((a,et)=>s(a,i[et]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Timestamp{constructor(i,s){if(this.seconds=i,this.nanoseconds=s,s<0)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(i<-62135596800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i);if(i>=253402300800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+i)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(i){return Timestamp.fromMillis(i.getTime())}static fromMillis(i){const s=Math.floor(i/1e3),a=Math.floor(1e6*(i-1e3*s));return new Timestamp(s,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(i){return this.seconds===i.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,i.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,i.seconds)}isEqual(i){return i.seconds===this.seconds&&i.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const i=this.seconds- -62135596800;return String(i).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{constructor(i){this.timestamp=i}static fromTimestamp(i){return new SnapshotVersion(i)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(i){return this.timestamp._compareTo(i.timestamp)}isEqual(i){return this.timestamp.isEqual(i.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BasePath{constructor(i,s,a){s===void 0?s=0:s>i.length&&fail(),a===void 0?a=i.length-s:a>i.length-s&&fail(),this.segments=i,this.offset=s,this.len=a}get length(){return this.len}isEqual(i){return BasePath.comparator(this,i)===0}child(i){const s=this.segments.slice(this.offset,this.limit());return i instanceof BasePath?i.forEach(a=>{s.push(a)}):s.push(i),this.construct(s)}limit(){return this.offset+this.length}popFirst(i){return i=i===void 0?1:i,this.construct(this.segments,this.offset+i,this.length-i)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(i){return this.segments[this.offset+i]}isEmpty(){return this.length===0}isPrefixOf(i){if(i.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==i.get(s))return!1;return!0}isImmediateParentOf(i){if(this.length+1!==i.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==i.get(s))return!1;return!0}forEach(i){for(let s=this.offset,a=this.limit();s<a;s++)i(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(i,s){const a=Math.min(i.length,s.length);for(let et=0;et<a;et++){const tt=i.get(et),ot=s.get(et);if(tt<ot)return-1;if(tt>ot)return 1}return i.length<s.length?-1:i.length>s.length?1:0}}class ResourcePath extends BasePath{construct(i,s,a){return new ResourcePath(i,s,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...i){const s=[];for(const a of i){if(a.indexOf("//")>=0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);s.push(...a.split("/").filter(et=>et.length>0))}return new ResourcePath(s)}static emptyPath(){return new ResourcePath([])}}const C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(i,s,a){return new FieldPath$1(i,s,a)}static isValidIdentifier(i){return C.test(i)}canonicalString(){return this.toArray().map(i=>(i=i.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(i)||(i="`"+i+"`"),i)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(i){const s=[];let a="",et=0;const tt=()=>{if(a.length===0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(a),a=""};let ot=!1;for(;et<i.length;){const dt=i[et];if(dt==="\\"){if(et+1===i.length)throw new FirestoreError(D.INVALID_ARGUMENT,"Path has trailing escape character: "+i);const ht=i[et+1];if(ht!=="\\"&&ht!=="."&&ht!=="`")throw new FirestoreError(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+i);a+=ht,et+=2}else dt==="`"?(ot=!ot,et++):dt!=="."||ot?(a+=dt,et++):(tt(),et++)}if(tt(),ot)throw new FirestoreError(D.INVALID_ARGUMENT,"Unterminated ` in path: "+i);return new FieldPath$1(s)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(i){this.path=i}static fromPath(i){return new DocumentKey(ResourcePath.fromString(i))}static fromName(i){return new DocumentKey(ResourcePath.fromString(i).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(i){return this.path.length>=2&&this.path.get(this.path.length-2)===i}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(i){return i!==null&&ResourcePath.comparator(this.path,i.path)===0}toString(){return this.path.toString()}static comparator(i,s){return ResourcePath.comparator(i.path,s.path)}static isDocumentKey(i){return i.length%2==0}static fromSegments(i){return new DocumentKey(new ResourcePath(i.slice()))}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime(o,i){const s=o.toTimestamp().seconds,a=o.toTimestamp().nanoseconds+1,et=SnapshotVersion.fromTimestamp(a===1e9?new Timestamp(s+1,0):new Timestamp(s,a));return new IndexOffset(et,DocumentKey.empty(),i)}function __PRIVATE_newIndexOffsetFromDocument(o){return new IndexOffset(o.readTime,o.key,-1)}class IndexOffset{constructor(i,s,a){this.readTime=i,this.documentKey=s,this.largestBatchId=a}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}}function __PRIVATE_indexOffsetComparator(o,i){let s=o.readTime.compareTo(i.readTime);return s!==0?s:(s=DocumentKey.comparator(o.documentKey,i.documentKey),s!==0?s:__PRIVATE_primitiveComparator(o.largestBatchId,i.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v$1="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(i){this.onCommittedListeners.push(i)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(i=>i())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(o){if(o.code!==D.FAILED_PRECONDITION||o.message!==v$1)throw o;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(i){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,i(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(i){return this.next(void 0,i)}next(i,s){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(i,this.result):new PersistencePromise((a,et)=>{this.nextCallback=tt=>{this.wrapSuccess(i,tt).next(a,et)},this.catchCallback=tt=>{this.wrapFailure(s,tt).next(a,et)}})}toPromise(){return new Promise((i,s)=>{this.next(i,s)})}wrapUserFunction(i){try{const s=i();return s instanceof PersistencePromise?s:PersistencePromise.resolve(s)}catch(s){return PersistencePromise.reject(s)}}wrapSuccess(i,s){return i?this.wrapUserFunction(()=>i(s)):PersistencePromise.resolve(s)}wrapFailure(i,s){return i?this.wrapUserFunction(()=>i(s)):PersistencePromise.reject(s)}static resolve(i){return new PersistencePromise((s,a)=>{s(i)})}static reject(i){return new PersistencePromise((s,a)=>{a(i)})}static waitFor(i){return new PersistencePromise((s,a)=>{let et=0,tt=0,ot=!1;i.forEach(dt=>{++et,dt.next(()=>{++tt,ot&&tt===et&&s()},ht=>a(ht))}),ot=!0,tt===et&&s()})}static or(i){let s=PersistencePromise.resolve(!1);for(const a of i)s=s.next(et=>et?PersistencePromise.resolve(et):a());return s}static forEach(i,s){const a=[];return i.forEach((et,tt)=>{a.push(s.call(this,et,tt))}),this.waitFor(a)}static mapArray(i,s){return new PersistencePromise((a,et)=>{const tt=i.length,ot=new Array(tt);let dt=0;for(let ht=0;ht<tt;ht++){const ft=ht;s(i[ft]).next(pt=>{ot[ft]=pt,++dt,dt===tt&&a(ot)},pt=>et(pt))}})}static doWhile(i,s){return new PersistencePromise((a,et)=>{const tt=()=>{i()===!0?s().next(()=>{tt()},et):a()};tt()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_SimpleDbTransaction{constructor(i,s){this.action=i,this.transaction=s,this.aborted=!1,this.V=new __PRIVATE_Deferred,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{s.error?this.V.reject(new __PRIVATE_IndexedDbTransactionError(i,s.error)):this.V.resolve()},this.transaction.onerror=a=>{const et=__PRIVATE_checkForAndReportiOSError(a.target.error);this.V.reject(new __PRIVATE_IndexedDbTransactionError(i,et))}}static open(i,s,a,et){try{return new __PRIVATE_SimpleDbTransaction(s,i.transaction(et,a))}catch(tt){throw new __PRIVATE_IndexedDbTransactionError(s,tt)}}get m(){return this.V.promise}abort(i){i&&this.V.reject(i),this.aborted||(__PRIVATE_logDebug("SimpleDb","Aborting transaction:",i?i.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const i=this.transaction;this.aborted||typeof i.commit!="function"||i.commit()}store(i){const s=this.transaction.objectStore(i);return new __PRIVATE_SimpleDbStore(s)}}class __PRIVATE_SimpleDb{constructor(i,s,a){this.name=i,this.version=s,this.p=a,__PRIVATE_SimpleDb.S(getUA())===12.2&&__PRIVATE_logError("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(i){return __PRIVATE_logDebug("SimpleDb","Removing database:",i),__PRIVATE_wrapRequest(window.indexedDB.deleteDatabase(i)).toPromise()}static D(){if(!isIndexedDBAvailable())return!1;if(__PRIVATE_SimpleDb.C())return!0;const i=getUA(),s=__PRIVATE_SimpleDb.S(i),a=0<s&&s<10,et=__PRIVATE_SimpleDb.v(i),tt=0<et&&et<4.5;return!(i.indexOf("MSIE ")>0||i.indexOf("Trident/")>0||i.indexOf("Edge/")>0||a||tt)}static C(){var i;return typeof process<"u"&&((i=process.__PRIVATE_env)===null||i===void 0?void 0:i.F)==="YES"}static M(i,s){return i.store(s)}static S(i){const s=i.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static v(i){const s=i.match(/Android ([\d.]+)/i),a=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(a)}async O(i){return this.db||(__PRIVATE_logDebug("SimpleDb","Opening database:",this.name),this.db=await new Promise((s,a)=>{const et=indexedDB.open(this.name,this.version);et.onsuccess=tt=>{const ot=tt.target.result;s(ot)},et.onblocked=()=>{a(new __PRIVATE_IndexedDbTransactionError(i,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},et.onerror=tt=>{const ot=tt.target.error;ot.name==="VersionError"?a(new FirestoreError(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):ot.name==="InvalidStateError"?a(new FirestoreError(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+ot)):a(new __PRIVATE_IndexedDbTransactionError(i,ot))},et.onupgradeneeded=tt=>{__PRIVATE_logDebug("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',tt.oldVersion);const ot=tt.target.result;this.p.N(ot,et.transaction,tt.oldVersion,this.version).next(()=>{__PRIVATE_logDebug("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=s=>this.B(s)),this.db}L(i){this.B=i,this.db&&(this.db.onversionchange=s=>i(s))}async runTransaction(i,s,a,et){const tt=s==="readonly";let ot=0;for(;;){++ot;try{this.db=await this.O(i);const dt=__PRIVATE_SimpleDbTransaction.open(this.db,i,tt?"readonly":"readwrite",a),ht=et(dt).next(ft=>(dt.g(),ft)).catch(ft=>(dt.abort(ft),PersistencePromise.reject(ft))).toPromise();return ht.catch(()=>{}),await dt.m,ht}catch(dt){const ht=dt,ft=ht.name!=="FirebaseError"&&ot<3;if(__PRIVATE_logDebug("SimpleDb","Transaction failed with error:",ht.message,"Retrying:",ft),this.close(),!ft)return Promise.reject(ht)}}}close(){this.db&&this.db.close(),this.db=void 0}}class __PRIVATE_IterationController{constructor(i){this.k=i,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(i){this.k=i}done(){this.q=!0}U(i){this.K=i}delete(){return __PRIVATE_wrapRequest(this.k.delete())}}class __PRIVATE_IndexedDbTransactionError extends FirestoreError{constructor(i,s){super(D.UNAVAILABLE,`IndexedDB transaction '${i}' failed: ${s}`),this.name="IndexedDbTransactionError"}}function __PRIVATE_isIndexedDbTransactionError(o){return o.name==="IndexedDbTransactionError"}class __PRIVATE_SimpleDbStore{constructor(i){this.store=i}put(i,s){let a;return s!==void 0?(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,i,s),a=this.store.put(s,i)):(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,"<auto-key>",i),a=this.store.put(i)),__PRIVATE_wrapRequest(a)}add(i){return __PRIVATE_logDebug("SimpleDb","ADD",this.store.name,i,i),__PRIVATE_wrapRequest(this.store.add(i))}get(i){return __PRIVATE_wrapRequest(this.store.get(i)).next(s=>(s===void 0&&(s=null),__PRIVATE_logDebug("SimpleDb","GET",this.store.name,i,s),s))}delete(i){return __PRIVATE_logDebug("SimpleDb","DELETE",this.store.name,i),__PRIVATE_wrapRequest(this.store.delete(i))}count(){return __PRIVATE_logDebug("SimpleDb","COUNT",this.store.name),__PRIVATE_wrapRequest(this.store.count())}W(i,s){const a=this.options(i,s),et=a.index?this.store.index(a.index):this.store;if(typeof et.getAll=="function"){const tt=et.getAll(a.range);return new PersistencePromise((ot,dt)=>{tt.onerror=ht=>{dt(ht.target.error)},tt.onsuccess=ht=>{ot(ht.target.result)}})}{const tt=this.cursor(a),ot=[];return this.G(tt,(dt,ht)=>{ot.push(ht)}).next(()=>ot)}}j(i,s){const a=this.store.getAll(i,s===null?void 0:s);return new PersistencePromise((et,tt)=>{a.onerror=ot=>{tt(ot.target.error)},a.onsuccess=ot=>{et(ot.target.result)}})}H(i,s){__PRIVATE_logDebug("SimpleDb","DELETE ALL",this.store.name);const a=this.options(i,s);a.J=!1;const et=this.cursor(a);return this.G(et,(tt,ot,dt)=>dt.delete())}Y(i,s){let a;s?a=i:(a={},s=i);const et=this.cursor(a);return this.G(et,s)}Z(i){const s=this.cursor({});return new PersistencePromise((a,et)=>{s.onerror=tt=>{const ot=__PRIVATE_checkForAndReportiOSError(tt.target.error);et(ot)},s.onsuccess=tt=>{const ot=tt.target.result;ot?i(ot.primaryKey,ot.value).next(dt=>{dt?ot.continue():a()}):a()}})}G(i,s){const a=[];return new PersistencePromise((et,tt)=>{i.onerror=ot=>{tt(ot.target.error)},i.onsuccess=ot=>{const dt=ot.target.result;if(!dt)return void et();const ht=new __PRIVATE_IterationController(dt),ft=s(dt.primaryKey,dt.value,ht);if(ft instanceof PersistencePromise){const pt=ft.catch(mt=>(ht.done(),PersistencePromise.reject(mt)));a.push(pt)}ht.isDone?et():ht.$===null?dt.continue():dt.continue(ht.$)}}).next(()=>PersistencePromise.waitFor(a))}options(i,s){let a;return i!==void 0&&(typeof i=="string"?a=i:s=i),{index:a,range:s}}cursor(i){let s="next";if(i.reverse&&(s="prev"),i.index){const a=this.store.index(i.index);return i.J?a.openKeyCursor(i.range,s):a.openCursor(i.range,s)}return this.store.openCursor(i.range,s)}}function __PRIVATE_wrapRequest(o){return new PersistencePromise((i,s)=>{o.onsuccess=a=>{const et=a.target.result;i(et)},o.onerror=a=>{const et=__PRIVATE_checkForAndReportiOSError(a.target.error);s(et)}})}let F=!1;function __PRIVATE_checkForAndReportiOSError(o){const i=__PRIVATE_SimpleDb.S(getUA());if(i>=12.2&&i<13){const s="An internal error was encountered in the Indexed Database server";if(o.message.indexOf(s)>=0){const a=new FirestoreError("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${s}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F||(F=!0,setTimeout(()=>{throw a},0)),a}}return o}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(i,s){this.previousValue=i,s&&(s.sequenceNumberHandler=a=>this.se(a),this.oe=a=>s.writeSequenceNumber(a))}se(i){return this.previousValue=Math.max(i,this.previousValue),this.previousValue}next(){const i=++this.previousValue;return this.oe&&this.oe(i),i}}__PRIVATE_ListenSequence._e=-1;function __PRIVATE_isNullOrUndefined(o){return o==null}function __PRIVATE_isNegativeZero(o){return o===0&&1/o==-1/0}function isSafeInteger(o){return typeof o=="number"&&Number.isInteger(o)&&!__PRIVATE_isNegativeZero(o)&&o<=Number.MAX_SAFE_INTEGER&&o>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(o){let i=0;for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&i++;return i}function forEach(o,i){for(const s in o)Object.prototype.hasOwnProperty.call(o,s)&&i(s,o[s])}function isEmpty(o){for(const i in o)if(Object.prototype.hasOwnProperty.call(o,i))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SortedMap$1=class gs{constructor(i,s){this.comparator=i,this.root=s||LLRBNode$1.EMPTY}insert(i,s){return new gs(this.comparator,this.root.insert(i,s,this.comparator).copy(null,null,LLRBNode$1.BLACK,null,null))}remove(i){return new gs(this.comparator,this.root.remove(i,this.comparator).copy(null,null,LLRBNode$1.BLACK,null,null))}get(i){let s=this.root;for(;!s.isEmpty();){const a=this.comparator(i,s.key);if(a===0)return s.value;a<0?s=s.left:a>0&&(s=s.right)}return null}indexOf(i){let s=0,a=this.root;for(;!a.isEmpty();){const et=this.comparator(i,a.key);if(et===0)return s+a.left.size;et<0?a=a.left:(s+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(i){return this.root.inorderTraversal(i)}forEach(i){this.inorderTraversal((s,a)=>(i(s,a),!1))}toString(){const i=[];return this.inorderTraversal((s,a)=>(i.push(`${s}:${a}`),!1)),`{${i.join(", ")}}`}reverseTraversal(i){return this.root.reverseTraversal(i)}getIterator(){return new SortedMapIterator$1(this.root,null,this.comparator,!1)}getIteratorFrom(i){return new SortedMapIterator$1(this.root,i,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator$1(this.root,null,this.comparator,!0)}getReverseIteratorFrom(i){return new SortedMapIterator$1(this.root,i,this.comparator,!0)}},SortedMapIterator$1=class{constructor(i,s,a,et){this.isReverse=et,this.nodeStack=[];let tt=1;for(;!i.isEmpty();)if(tt=s?a(i.key,s):1,s&&et&&(tt*=-1),tt<0)i=this.isReverse?i.left:i.right;else{if(tt===0){this.nodeStack.push(i);break}this.nodeStack.push(i),i=this.isReverse?i.right:i.left}}getNext(){let i=this.nodeStack.pop();const s={key:i.key,value:i.value};if(this.isReverse)for(i=i.left;!i.isEmpty();)this.nodeStack.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack.push(i),i=i.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const i=this.nodeStack[this.nodeStack.length-1];return{key:i.key,value:i.value}}},LLRBNode$1=class kr{constructor(i,s,a,et,tt){this.key=i,this.value=s,this.color=a??kr.RED,this.left=et??kr.EMPTY,this.right=tt??kr.EMPTY,this.size=this.left.size+1+this.right.size}copy(i,s,a,et,tt){return new kr(i??this.key,s??this.value,a??this.color,et??this.left,tt??this.right)}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,s,a){let et=this;const tt=a(i,et.key);return et=tt<0?et.copy(null,null,null,et.left.insert(i,s,a),null):tt===0?et.copy(null,s,null,null,null):et.copy(null,null,null,null,et.right.insert(i,s,a)),et.fixUp()}removeMin(){if(this.left.isEmpty())return kr.EMPTY;let i=this;return i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.removeMin(),null),i.fixUp()}remove(i,s){let a,et=this;if(s(i,et.key)<0)et.left.isEmpty()||et.left.isRed()||et.left.left.isRed()||(et=et.moveRedLeft()),et=et.copy(null,null,null,et.left.remove(i,s),null);else{if(et.left.isRed()&&(et=et.rotateRight()),et.right.isEmpty()||et.right.isRed()||et.right.left.isRed()||(et=et.moveRedRight()),s(i,et.key)===0){if(et.right.isEmpty())return kr.EMPTY;a=et.right.min(),et=et.copy(a.key,a.value,null,null,et.right.removeMin())}et=et.copy(null,null,null,null,et.right.remove(i,s))}return et.fixUp()}isRed(){return this.color}fixUp(){let i=this;return i.right.isRed()&&!i.left.isRed()&&(i=i.rotateLeft()),i.left.isRed()&&i.left.left.isRed()&&(i=i.rotateRight()),i.left.isRed()&&i.right.isRed()&&(i=i.colorFlip()),i}moveRedLeft(){let i=this.colorFlip();return i.right.left.isRed()&&(i=i.copy(null,null,null,null,i.right.rotateRight()),i=i.rotateLeft(),i=i.colorFlip()),i}moveRedRight(){let i=this.colorFlip();return i.left.left.isRed()&&(i=i.rotateRight(),i=i.colorFlip()),i}rotateLeft(){const i=this.copy(null,null,kr.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight(){const i=this.copy(null,null,kr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip(){const i=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,s)}checkMaxDepth(){const i=this.check();return Math.pow(2,i)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();const i=this.left.check();if(i!==this.right.check())throw fail();return i+(this.isRed()?0:1)}};LLRBNode$1.EMPTY=null,LLRBNode$1.RED=!0,LLRBNode$1.BLACK=!1;LLRBNode$1.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(i,s,a,et,tt){return this}insert(i,s,a){return new LLRBNode$1(i,s)}remove(i,s){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(i){this.comparator=i,this.data=new SortedMap$1(this.comparator)}has(i){return this.data.get(i)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(i){return this.data.indexOf(i)}forEach(i){this.data.inorderTraversal((s,a)=>(i(s),!1))}forEachInRange(i,s){const a=this.data.getIteratorFrom(i[0]);for(;a.hasNext();){const et=a.getNext();if(this.comparator(et.key,i[1])>=0)return;s(et.key)}}forEachWhile(i,s){let a;for(a=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();a.hasNext();)if(!i(a.getNext().key))return}firstAfterOrEqual(i){const s=this.data.getIteratorFrom(i);return s.hasNext()?s.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(i){return new SortedSetIterator(this.data.getIteratorFrom(i))}add(i){return this.copy(this.data.remove(i).insert(i,!0))}delete(i){return this.has(i)?this.copy(this.data.remove(i)):this}isEmpty(){return this.data.isEmpty()}unionWith(i){let s=this;return s.size<i.size&&(s=i,i=this),i.forEach(a=>{s=s.add(a)}),s}isEqual(i){if(!(i instanceof SortedSet)||this.size!==i.size)return!1;const s=this.data.getIterator(),a=i.data.getIterator();for(;s.hasNext();){const et=s.getNext().key,tt=a.getNext().key;if(this.comparator(et,tt)!==0)return!1}return!0}toArray(){const i=[];return this.forEach(s=>{i.push(s)}),i}toString(){const i=[];return this.forEach(s=>i.push(s)),"SortedSet("+i.toString()+")"}copy(i){const s=new SortedSet(this.comparator);return s.data=i,s}}class SortedSetIterator{constructor(i){this.iter=i}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(i){this.fields=i,i.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(i){let s=new SortedSet(FieldPath$1.comparator);for(const a of this.fields)s=s.add(a);for(const a of i)s=s.add(a);return new FieldMask(s.toArray())}covers(i){for(const s of this.fields)if(s.isPrefixOf(i))return!0;return!1}isEqual(i){return __PRIVATE_arrayEquals(this.fields,i.fields,(s,a)=>s.isEqual(a))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(i){this.binaryString=i}static fromBase64String(i){const s=function(et){try{return atob(et)}catch(tt){throw typeof DOMException<"u"&&tt instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+tt):tt}}(i);return new ByteString(s)}static fromUint8Array(i){const s=function(et){let tt="";for(let ot=0;ot<et.length;++ot)tt+=String.fromCharCode(et[ot]);return tt}(i);return new ByteString(s)}[Symbol.iterator](){let i=0;return{next:()=>i<this.binaryString.length?{value:this.binaryString.charCodeAt(i++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const a=new Uint8Array(s.length);for(let et=0;et<s.length;et++)a[et]=s.charCodeAt(et);return a}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(i){return __PRIVATE_primitiveComparator(this.binaryString,i.binaryString)}isEqual(i){return this.binaryString===i.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(o){if(__PRIVATE_hardAssert(!!o),typeof o=="string"){let i=0;const s=ee.exec(o);if(__PRIVATE_hardAssert(!!s),s[1]){let et=s[1];et=(et+"000000000").substr(0,9),i=Number(et)}const a=new Date(o);return{seconds:Math.floor(a.getTime()/1e3),nanos:i}}return{seconds:__PRIVATE_normalizeNumber(o.seconds),nanos:__PRIVATE_normalizeNumber(o.nanos)}}function __PRIVATE_normalizeNumber(o){return typeof o=="number"?o:typeof o=="string"?Number(o):0}function __PRIVATE_normalizeByteString(o){return typeof o=="string"?ByteString.fromBase64String(o):ByteString.fromUint8Array(o)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp(o){var i,s;return((s=(((i=o==null?void 0:o.mapValue)===null||i===void 0?void 0:i.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function __PRIVATE_getPreviousValue(o){const i=o.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(i)?__PRIVATE_getPreviousValue(i):i}function __PRIVATE_getLocalWriteTime(o){const i=__PRIVATE_normalizeTimestamp(o.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(i.seconds,i.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(i,s,a,et,tt,ot,dt,ht,ft){this.databaseId=i,this.appId=s,this.persistenceKey=a,this.host=et,this.ssl=tt,this.forceLongPolling=ot,this.autoDetectLongPolling=dt,this.longPollingOptions=ht,this.useFetchStreams=ft}}class DatabaseId{constructor(i,s){this.projectId=i,this.database=s||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(i){return i instanceof DatabaseId&&i.projectId===this.projectId&&i.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function __PRIVATE_typeOrder(o){return"nullValue"in o?0:"booleanValue"in o?1:"integerValue"in o||"doubleValue"in o?2:"timestampValue"in o?3:"stringValue"in o?5:"bytesValue"in o?6:"referenceValue"in o?7:"geoPointValue"in o?8:"arrayValue"in o?9:"mapValue"in o?__PRIVATE_isServerTimestamp(o)?4:__PRIVATE_isMaxValue(o)?9007199254740991:10:fail()}function __PRIVATE_valueEquals(o,i){if(o===i)return!0;const s=__PRIVATE_typeOrder(o);if(s!==__PRIVATE_typeOrder(i))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return o.booleanValue===i.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(o).isEqual(__PRIVATE_getLocalWriteTime(i));case 3:return function(et,tt){if(typeof et.timestampValue=="string"&&typeof tt.timestampValue=="string"&&et.timestampValue.length===tt.timestampValue.length)return et.timestampValue===tt.timestampValue;const ot=__PRIVATE_normalizeTimestamp(et.timestampValue),dt=__PRIVATE_normalizeTimestamp(tt.timestampValue);return ot.seconds===dt.seconds&&ot.nanos===dt.nanos}(o,i);case 5:return o.stringValue===i.stringValue;case 6:return function(et,tt){return __PRIVATE_normalizeByteString(et.bytesValue).isEqual(__PRIVATE_normalizeByteString(tt.bytesValue))}(o,i);case 7:return o.referenceValue===i.referenceValue;case 8:return function(et,tt){return __PRIVATE_normalizeNumber(et.geoPointValue.latitude)===__PRIVATE_normalizeNumber(tt.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(et.geoPointValue.longitude)===__PRIVATE_normalizeNumber(tt.geoPointValue.longitude)}(o,i);case 2:return function(et,tt){if("integerValue"in et&&"integerValue"in tt)return __PRIVATE_normalizeNumber(et.integerValue)===__PRIVATE_normalizeNumber(tt.integerValue);if("doubleValue"in et&&"doubleValue"in tt){const ot=__PRIVATE_normalizeNumber(et.doubleValue),dt=__PRIVATE_normalizeNumber(tt.doubleValue);return ot===dt?__PRIVATE_isNegativeZero(ot)===__PRIVATE_isNegativeZero(dt):isNaN(ot)&&isNaN(dt)}return!1}(o,i);case 9:return __PRIVATE_arrayEquals(o.arrayValue.values||[],i.arrayValue.values||[],__PRIVATE_valueEquals);case 10:return function(et,tt){const ot=et.mapValue.fields||{},dt=tt.mapValue.fields||{};if(__PRIVATE_objectSize(ot)!==__PRIVATE_objectSize(dt))return!1;for(const ht in ot)if(ot.hasOwnProperty(ht)&&(dt[ht]===void 0||!__PRIVATE_valueEquals(ot[ht],dt[ht])))return!1;return!0}(o,i);default:return fail()}}function __PRIVATE_arrayValueContains(o,i){return(o.values||[]).find(s=>__PRIVATE_valueEquals(s,i))!==void 0}function __PRIVATE_valueCompare(o,i){if(o===i)return 0;const s=__PRIVATE_typeOrder(o),a=__PRIVATE_typeOrder(i);if(s!==a)return __PRIVATE_primitiveComparator(s,a);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(o.booleanValue,i.booleanValue);case 2:return function(tt,ot){const dt=__PRIVATE_normalizeNumber(tt.integerValue||tt.doubleValue),ht=__PRIVATE_normalizeNumber(ot.integerValue||ot.doubleValue);return dt<ht?-1:dt>ht?1:dt===ht?0:isNaN(dt)?isNaN(ht)?0:-1:1}(o,i);case 3:return __PRIVATE_compareTimestamps(o.timestampValue,i.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(o),__PRIVATE_getLocalWriteTime(i));case 5:return __PRIVATE_primitiveComparator(o.stringValue,i.stringValue);case 6:return function(tt,ot){const dt=__PRIVATE_normalizeByteString(tt),ht=__PRIVATE_normalizeByteString(ot);return dt.compareTo(ht)}(o.bytesValue,i.bytesValue);case 7:return function(tt,ot){const dt=tt.split("/"),ht=ot.split("/");for(let ft=0;ft<dt.length&&ft<ht.length;ft++){const pt=__PRIVATE_primitiveComparator(dt[ft],ht[ft]);if(pt!==0)return pt}return __PRIVATE_primitiveComparator(dt.length,ht.length)}(o.referenceValue,i.referenceValue);case 8:return function(tt,ot){const dt=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(tt.latitude),__PRIVATE_normalizeNumber(ot.latitude));return dt!==0?dt:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(tt.longitude),__PRIVATE_normalizeNumber(ot.longitude))}(o.geoPointValue,i.geoPointValue);case 9:return function(tt,ot){const dt=tt.values||[],ht=ot.values||[];for(let ft=0;ft<dt.length&&ft<ht.length;++ft){const pt=__PRIVATE_valueCompare(dt[ft],ht[ft]);if(pt)return pt}return __PRIVATE_primitiveComparator(dt.length,ht.length)}(o.arrayValue,i.arrayValue);case 10:return function(tt,ot){if(tt===te.mapValue&&ot===te.mapValue)return 0;if(tt===te.mapValue)return 1;if(ot===te.mapValue)return-1;const dt=tt.fields||{},ht=Object.keys(dt),ft=ot.fields||{},pt=Object.keys(ft);ht.sort(),pt.sort();for(let mt=0;mt<ht.length&&mt<pt.length;++mt){const gt=__PRIVATE_primitiveComparator(ht[mt],pt[mt]);if(gt!==0)return gt;const _t=__PRIVATE_valueCompare(dt[ht[mt]],ft[pt[mt]]);if(_t!==0)return _t}return __PRIVATE_primitiveComparator(ht.length,pt.length)}(o.mapValue,i.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps(o,i){if(typeof o=="string"&&typeof i=="string"&&o.length===i.length)return __PRIVATE_primitiveComparator(o,i);const s=__PRIVATE_normalizeTimestamp(o),a=__PRIVATE_normalizeTimestamp(i),et=__PRIVATE_primitiveComparator(s.seconds,a.seconds);return et!==0?et:__PRIVATE_primitiveComparator(s.nanos,a.nanos)}function canonicalId(o){return __PRIVATE_canonifyValue(o)}function __PRIVATE_canonifyValue(o){return"nullValue"in o?"null":"booleanValue"in o?""+o.booleanValue:"integerValue"in o?""+o.integerValue:"doubleValue"in o?""+o.doubleValue:"timestampValue"in o?function(s){const a=__PRIVATE_normalizeTimestamp(s);return`time(${a.seconds},${a.nanos})`}(o.timestampValue):"stringValue"in o?o.stringValue:"bytesValue"in o?function(s){return __PRIVATE_normalizeByteString(s).toBase64()}(o.bytesValue):"referenceValue"in o?function(s){return DocumentKey.fromName(s).toString()}(o.referenceValue):"geoPointValue"in o?function(s){return`geo(${s.latitude},${s.longitude})`}(o.geoPointValue):"arrayValue"in o?function(s){let a="[",et=!0;for(const tt of s.values||[])et?et=!1:a+=",",a+=__PRIVATE_canonifyValue(tt);return a+"]"}(o.arrayValue):"mapValue"in o?function(s){const a=Object.keys(s.fields||{}).sort();let et="{",tt=!0;for(const ot of a)tt?tt=!1:et+=",",et+=`${ot}:${__PRIVATE_canonifyValue(s.fields[ot])}`;return et+"}"}(o.mapValue):fail()}function isInteger(o){return!!o&&"integerValue"in o}function isArray(o){return!!o&&"arrayValue"in o}function __PRIVATE_isNullValue(o){return!!o&&"nullValue"in o}function __PRIVATE_isNanValue(o){return!!o&&"doubleValue"in o&&isNaN(Number(o.doubleValue))}function __PRIVATE_isMapValue(o){return!!o&&"mapValue"in o}function __PRIVATE_deepClone(o){if(o.geoPointValue)return{geoPointValue:Object.assign({},o.geoPointValue)};if(o.timestampValue&&typeof o.timestampValue=="object")return{timestampValue:Object.assign({},o.timestampValue)};if(o.mapValue){const i={mapValue:{fields:{}}};return forEach(o.mapValue.fields,(s,a)=>i.mapValue.fields[s]=__PRIVATE_deepClone(a)),i}if(o.arrayValue){const i={arrayValue:{values:[]}};for(let s=0;s<(o.arrayValue.values||[]).length;++s)i.arrayValue.values[s]=__PRIVATE_deepClone(o.arrayValue.values[s]);return i}return Object.assign({},o)}function __PRIVATE_isMaxValue(o){return(((o.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(i){this.value=i}static empty(){return new ObjectValue({mapValue:{}})}field(i){if(i.isEmpty())return this.value;{let s=this.value;for(let a=0;a<i.length-1;++a)if(s=(s.mapValue.fields||{})[i.get(a)],!__PRIVATE_isMapValue(s))return null;return s=(s.mapValue.fields||{})[i.lastSegment()],s||null}}set(i,s){this.getFieldsMap(i.popLast())[i.lastSegment()]=__PRIVATE_deepClone(s)}setAll(i){let s=FieldPath$1.emptyPath(),a={},et=[];i.forEach((ot,dt)=>{if(!s.isImmediateParentOf(dt)){const ht=this.getFieldsMap(s);this.applyChanges(ht,a,et),a={},et=[],s=dt.popLast()}ot?a[dt.lastSegment()]=__PRIVATE_deepClone(ot):et.push(dt.lastSegment())});const tt=this.getFieldsMap(s);this.applyChanges(tt,a,et)}delete(i){const s=this.field(i.popLast());__PRIVATE_isMapValue(s)&&s.mapValue.fields&&delete s.mapValue.fields[i.lastSegment()]}isEqual(i){return __PRIVATE_valueEquals(this.value,i.value)}getFieldsMap(i){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let a=0;a<i.length;++a){let et=s.mapValue.fields[i.get(a)];__PRIVATE_isMapValue(et)&&et.mapValue.fields||(et={mapValue:{fields:{}}},s.mapValue.fields[i.get(a)]=et),s=et}return s.mapValue.fields}applyChanges(i,s,a){forEach(s,(et,tt)=>i[et]=tt);for(const et of a)delete i[et]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(o){const i=[];return forEach(o.fields,(s,a)=>{const et=new FieldPath$1([s]);if(__PRIVATE_isMapValue(a)){const tt=__PRIVATE_extractFieldMask(a.mapValue).fields;if(tt.length===0)i.push(et);else for(const ot of tt)i.push(et.child(ot))}else i.push(et)}),new FieldMask(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(i,s,a,et,tt,ot,dt){this.key=i,this.documentType=s,this.version=a,this.readTime=et,this.createTime=tt,this.data=ot,this.documentState=dt}static newInvalidDocument(i){return new MutableDocument(i,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(i,s,a,et){return new MutableDocument(i,1,s,SnapshotVersion.min(),a,et,0)}static newNoDocument(i,s){return new MutableDocument(i,2,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(i,s){return new MutableDocument(i,3,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(i,s){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=i),this.version=i,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(i){return this.version=i,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(i){return this.version=i,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(i){return this.readTime=i,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(i){return i instanceof MutableDocument&&this.key.isEqual(i.key)&&this.version.isEqual(i.version)&&this.documentType===i.documentType&&this.documentState===i.documentState&&this.data.isEqual(i.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(i,s){this.position=i,this.inclusive=s}}function __PRIVATE_boundCompareToDocument(o,i,s){let a=0;for(let et=0;et<o.position.length;et++){const tt=i[et],ot=o.position[et];if(tt.field.isKeyField()?a=DocumentKey.comparator(DocumentKey.fromName(ot.referenceValue),s.key):a=__PRIVATE_valueCompare(ot,s.data.field(tt.field)),tt.dir==="desc"&&(a*=-1),a!==0)break}return a}function __PRIVATE_boundEquals(o,i){if(o===null)return i===null;if(i===null||o.inclusive!==i.inclusive||o.position.length!==i.position.length)return!1;for(let s=0;s<o.position.length;s++)if(!__PRIVATE_valueEquals(o.position[s],i.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(i,s="asc"){this.field=i,this.dir=s}}function __PRIVATE_orderByEquals(o,i){return o.dir===i.dir&&o.field.isEqual(i.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(i,s,a){super(),this.field=i,this.op=s,this.value=a}static create(i,s,a){return i.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(i,s,a):new __PRIVATE_KeyFieldFilter(i,s,a):s==="array-contains"?new __PRIVATE_ArrayContainsFilter(i,a):s==="in"?new __PRIVATE_InFilter(i,a):s==="not-in"?new __PRIVATE_NotInFilter(i,a):s==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(i,a):new FieldFilter(i,s,a)}static createKeyFieldInFilter(i,s,a){return s==="in"?new __PRIVATE_KeyFieldInFilter(i,a):new __PRIVATE_KeyFieldNotInFilter(i,a)}matches(i){const s=i.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value)):s!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(s)&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value))}matchesComparison(i){switch(this.op){case"<":return i<0;case"<=":return i<=0;case"==":return i===0;case"!=":return i!==0;case">":return i>0;case">=":return i>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(i,s){super(),this.filters=i,this.op=s,this.ue=null}static create(i,s){return new CompositeFilter(i,s)}matches(i){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(s=>!s.matches(i))===void 0:this.filters.find(s=>s.matches(i))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((i,s)=>i.concat(s.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(o){return o.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(o){return __PRIVATE_compositeFilterIsFlat(o)&&__PRIVATE_compositeFilterIsConjunction(o)}function __PRIVATE_compositeFilterIsFlat(o){for(const i of o.filters)if(i instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(o){if(o instanceof FieldFilter)return o.field.canonicalString()+o.op.toString()+canonicalId(o.value);if(__PRIVATE_compositeFilterIsFlatConjunction(o))return o.filters.map(i=>__PRIVATE_canonifyFilter(i)).join(",");{const i=o.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(",");return`${o.op}(${i})`}}function __PRIVATE_filterEquals(o,i){return o instanceof FieldFilter?function(a,et){return et instanceof FieldFilter&&a.op===et.op&&a.field.isEqual(et.field)&&__PRIVATE_valueEquals(a.value,et.value)}(o,i):o instanceof CompositeFilter?function(a,et){return et instanceof CompositeFilter&&a.op===et.op&&a.filters.length===et.filters.length?a.filters.reduce((tt,ot,dt)=>tt&&__PRIVATE_filterEquals(ot,et.filters[dt]),!0):!1}(o,i):void fail()}function __PRIVATE_stringifyFilter(o){return o instanceof FieldFilter?function(s){return`${s.field.canonicalString()} ${s.op} ${canonicalId(s.value)}`}(o):o instanceof CompositeFilter?function(s){return s.op.toString()+" {"+s.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(o):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(i,s,a){super(i,s,a),this.key=DocumentKey.fromName(a.referenceValue)}matches(i){const s=DocumentKey.comparator(i.key,this.key);return this.matchesComparison(s)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(i,s){super(i,"in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",s)}matches(i){return this.keys.some(s=>s.isEqual(i.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(i,s){super(i,"not-in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",s)}matches(i){return!this.keys.some(s=>s.isEqual(i.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(o,i){var s;return(((s=i.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(a=>DocumentKey.fromName(a.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(i,s){super(i,"array-contains",s)}matches(i){const s=i.data.field(this.field);return isArray(s)&&__PRIVATE_arrayValueContains(s.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(i,s){super(i,"in",s)}matches(i){const s=i.data.field(this.field);return s!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(i,s){super(i,"not-in",s)}matches(i){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=i.data.field(this.field);return s!==null&&!__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(i,s){super(i,"array-contains-any",s)}matches(i){const s=i.data.field(this.field);return!(!isArray(s)||!s.arrayValue.values)&&s.arrayValue.values.some(a=>__PRIVATE_arrayValueContains(this.value.arrayValue,a))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(i,s=null,a=[],et=[],tt=null,ot=null,dt=null){this.path=i,this.collectionGroup=s,this.orderBy=a,this.filters=et,this.limit=tt,this.startAt=ot,this.endAt=dt,this.ce=null}}function __PRIVATE_newTarget(o,i=null,s=[],a=[],et=null,tt=null,ot=null){return new __PRIVATE_TargetImpl(o,i,s,a,et,tt,ot)}function __PRIVATE_canonifyTarget(o){const i=__PRIVATE_debugCast(o);if(i.ce===null){let s=i.path.canonicalString();i.collectionGroup!==null&&(s+="|cg:"+i.collectionGroup),s+="|f:",s+=i.filters.map(a=>__PRIVATE_canonifyFilter(a)).join(","),s+="|ob:",s+=i.orderBy.map(a=>function(tt){return tt.field.canonicalString()+tt.dir}(a)).join(","),__PRIVATE_isNullOrUndefined(i.limit)||(s+="|l:",s+=i.limit),i.startAt&&(s+="|lb:",s+=i.startAt.inclusive?"b:":"a:",s+=i.startAt.position.map(a=>canonicalId(a)).join(",")),i.endAt&&(s+="|ub:",s+=i.endAt.inclusive?"a:":"b:",s+=i.endAt.position.map(a=>canonicalId(a)).join(",")),i.ce=s}return i.ce}function __PRIVATE_targetEquals(o,i){if(o.limit!==i.limit||o.orderBy.length!==i.orderBy.length)return!1;for(let s=0;s<o.orderBy.length;s++)if(!__PRIVATE_orderByEquals(o.orderBy[s],i.orderBy[s]))return!1;if(o.filters.length!==i.filters.length)return!1;for(let s=0;s<o.filters.length;s++)if(!__PRIVATE_filterEquals(o.filters[s],i.filters[s]))return!1;return o.collectionGroup===i.collectionGroup&&!!o.path.isEqual(i.path)&&!!__PRIVATE_boundEquals(o.startAt,i.startAt)&&__PRIVATE_boundEquals(o.endAt,i.endAt)}function __PRIVATE_targetIsDocumentTarget(o){return DocumentKey.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(i,s=null,a=[],et=[],tt=null,ot="F",dt=null,ht=null){this.path=i,this.collectionGroup=s,this.explicitOrderBy=a,this.filters=et,this.limit=tt,this.limitType=ot,this.startAt=dt,this.endAt=ht,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(o,i,s,a,et,tt,ot,dt){return new __PRIVATE_QueryImpl(o,i,s,a,et,tt,ot,dt)}function __PRIVATE_newQueryForPath(o){return new __PRIVATE_QueryImpl(o)}function __PRIVATE_queryMatchesAllDocuments(o){return o.filters.length===0&&o.limit===null&&o.startAt==null&&o.endAt==null&&(o.explicitOrderBy.length===0||o.explicitOrderBy.length===1&&o.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(o){return o.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(o){const i=__PRIVATE_debugCast(o);if(i.le===null){i.le=[];const s=new Set;for(const tt of i.explicitOrderBy)i.le.push(tt),s.add(tt.field.canonicalString());const a=i.explicitOrderBy.length>0?i.explicitOrderBy[i.explicitOrderBy.length-1].dir:"asc";(function(ot){let dt=new SortedSet(FieldPath$1.comparator);return ot.filters.forEach(ht=>{ht.getFlattenedFilters().forEach(ft=>{ft.isInequality()&&(dt=dt.add(ft.field))})}),dt})(i).forEach(tt=>{s.has(tt.canonicalString())||tt.isKeyField()||i.le.push(new OrderBy(tt,a))}),s.has(FieldPath$1.keyField().canonicalString())||i.le.push(new OrderBy(FieldPath$1.keyField(),a))}return i.le}function __PRIVATE_queryToTarget(o){const i=__PRIVATE_debugCast(o);return i.he||(i.he=__PRIVATE__queryToTarget(i,__PRIVATE_queryNormalizedOrderBy(o))),i.he}function __PRIVATE__queryToTarget(o,i){if(o.limitType==="F")return __PRIVATE_newTarget(o.path,o.collectionGroup,i,o.filters,o.limit,o.startAt,o.endAt);{i=i.map(et=>{const tt=et.dir==="desc"?"asc":"desc";return new OrderBy(et.field,tt)});const s=o.endAt?new Bound(o.endAt.position,o.endAt.inclusive):null,a=o.startAt?new Bound(o.startAt.position,o.startAt.inclusive):null;return __PRIVATE_newTarget(o.path,o.collectionGroup,i,o.filters,o.limit,s,a)}}function __PRIVATE_queryWithLimit(o,i,s){return new __PRIVATE_QueryImpl(o.path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),i,s,o.startAt,o.endAt)}function __PRIVATE_queryEquals(o,i){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(o),__PRIVATE_queryToTarget(i))&&o.limitType===i.limitType}function __PRIVATE_canonifyQuery(o){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(o))}|lt:${o.limitType}`}function __PRIVATE_stringifyQuery(o){return`Query(target=${function(s){let a=s.path.canonicalString();return s.collectionGroup!==null&&(a+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(a+=`, filters: [${s.filters.map(et=>__PRIVATE_stringifyFilter(et)).join(", ")}]`),__PRIVATE_isNullOrUndefined(s.limit)||(a+=", limit: "+s.limit),s.orderBy.length>0&&(a+=`, orderBy: [${s.orderBy.map(et=>function(ot){return`${ot.field.canonicalString()} (${ot.dir})`}(et)).join(", ")}]`),s.startAt&&(a+=", startAt: ",a+=s.startAt.inclusive?"b:":"a:",a+=s.startAt.position.map(et=>canonicalId(et)).join(",")),s.endAt&&(a+=", endAt: ",a+=s.endAt.inclusive?"a:":"b:",a+=s.endAt.position.map(et=>canonicalId(et)).join(",")),`Target(${a})`}(__PRIVATE_queryToTarget(o))}; limitType=${o.limitType})`}function __PRIVATE_queryMatches(o,i){return i.isFoundDocument()&&function(a,et){const tt=et.key.path;return a.collectionGroup!==null?et.key.hasCollectionId(a.collectionGroup)&&a.path.isPrefixOf(tt):DocumentKey.isDocumentKey(a.path)?a.path.isEqual(tt):a.path.isImmediateParentOf(tt)}(o,i)&&function(a,et){for(const tt of __PRIVATE_queryNormalizedOrderBy(a))if(!tt.field.isKeyField()&&et.data.field(tt.field)===null)return!1;return!0}(o,i)&&function(a,et){for(const tt of a.filters)if(!tt.matches(et))return!1;return!0}(o,i)&&function(a,et){return!(a.startAt&&!function(ot,dt,ht){const ft=__PRIVATE_boundCompareToDocument(ot,dt,ht);return ot.inclusive?ft<=0:ft<0}(a.startAt,__PRIVATE_queryNormalizedOrderBy(a),et)||a.endAt&&!function(ot,dt,ht){const ft=__PRIVATE_boundCompareToDocument(ot,dt,ht);return ot.inclusive?ft>=0:ft>0}(a.endAt,__PRIVATE_queryNormalizedOrderBy(a),et))}(o,i)}function __PRIVATE_queryCollectionGroup(o){return o.collectionGroup||(o.path.length%2==1?o.path.lastSegment():o.path.get(o.path.length-2))}function __PRIVATE_newQueryComparator(o){return(i,s)=>{let a=!1;for(const et of __PRIVATE_queryNormalizedOrderBy(o)){const tt=__PRIVATE_compareDocs(et,i,s);if(tt!==0)return tt;a=a||et.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(o,i,s){const a=o.field.isKeyField()?DocumentKey.comparator(i.key,s.key):function(tt,ot,dt){const ht=ot.data.field(tt),ft=dt.data.field(tt);return ht!==null&&ft!==null?__PRIVATE_valueCompare(ht,ft):fail()}(o.field,i,s);switch(o.dir){case"asc":return a;case"desc":return-1*a;default:return fail()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(i,s){this.mapKeyFn=i,this.equalsFn=s,this.inner={},this.innerSize=0}get(i){const s=this.mapKeyFn(i),a=this.inner[s];if(a!==void 0){for(const[et,tt]of a)if(this.equalsFn(et,i))return tt}}has(i){return this.get(i)!==void 0}set(i,s){const a=this.mapKeyFn(i),et=this.inner[a];if(et===void 0)return this.inner[a]=[[i,s]],void this.innerSize++;for(let tt=0;tt<et.length;tt++)if(this.equalsFn(et[tt][0],i))return void(et[tt]=[i,s]);et.push([i,s]),this.innerSize++}delete(i){const s=this.mapKeyFn(i),a=this.inner[s];if(a===void 0)return!1;for(let et=0;et<a.length;et++)if(this.equalsFn(a[et][0],i))return a.length===1?delete this.inner[s]:a.splice(et,1),this.innerSize--,!0;return!1}forEach(i){forEach(this.inner,(s,a)=>{for(const[et,tt]of a)i(et,tt)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=new SortedMap$1(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return re}const ie=new SortedMap$1(DocumentKey.comparator);function documentMap(...o){let i=ie;for(const s of o)i=i.insert(s.key,s);return i}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(o){let i=ie;return o.forEach((s,a)=>i=i.insert(s,a.overlayedDocument)),i}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(o=>o.toString(),(o,i)=>o.isEqual(i))}const se=new SortedMap$1(DocumentKey.comparator),oe=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...o){let i=oe;for(const s of o)i=i.add(s);return i}const _e=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return _e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(o,i){if(o.useProto3Json){if(isNaN(i))return{doubleValue:"NaN"};if(i===1/0)return{doubleValue:"Infinity"};if(i===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(i)?"-0":i}}function __PRIVATE_toInteger(o){return{integerValue:""+o}}function toNumber(o,i){return isSafeInteger(i)?__PRIVATE_toInteger(i):__PRIVATE_toDouble(o,i)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(o,i,s){return o instanceof __PRIVATE_ServerTimestampTransform?function(et,tt){const ot={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:et.seconds,nanos:et.nanoseconds}}}};return tt&&__PRIVATE_isServerTimestamp(tt)&&(tt=__PRIVATE_getPreviousValue(tt)),tt&&(ot.fields.__previous_value__=tt),{mapValue:ot}}(s,i):o instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(o,i):o instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(o,i):function(et,tt){const ot=__PRIVATE_computeTransformOperationBaseValue(et,tt),dt=asNumber(ot)+asNumber(et.Ie);return isInteger(ot)&&isInteger(et.Ie)?__PRIVATE_toInteger(dt):__PRIVATE_toDouble(et.serializer,dt)}(o,i)}function __PRIVATE_applyTransformOperationToRemoteDocument(o,i,s){return o instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(o,i):o instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(o,i):s}function __PRIVATE_computeTransformOperationBaseValue(o,i){return o instanceof __PRIVATE_NumericIncrementTransformOperation?function(a){return isInteger(a)||function(tt){return!!tt&&"doubleValue"in tt}(a)}(i)?i:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(i){super(),this.elements=i}}function __PRIVATE_applyArrayUnionTransformOperation(o,i){const s=__PRIVATE_coercedFieldValuesArray(i);for(const a of o.elements)s.some(et=>__PRIVATE_valueEquals(et,a))||s.push(a);return{arrayValue:{values:s}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(i){super(),this.elements=i}}function __PRIVATE_applyArrayRemoveTransformOperation(o,i){let s=__PRIVATE_coercedFieldValuesArray(i);for(const a of o.elements)s=s.filter(et=>!__PRIVATE_valueEquals(et,a));return{arrayValue:{values:s}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(i,s){super(),this.serializer=i,this.Ie=s}}function asNumber(o){return __PRIVATE_normalizeNumber(o.integerValue||o.doubleValue)}function __PRIVATE_coercedFieldValuesArray(o){return isArray(o)&&o.arrayValue.values?o.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(o,i){return o.field.isEqual(i.field)&&function(a,et){return a instanceof __PRIVATE_ArrayUnionTransformOperation&&et instanceof __PRIVATE_ArrayUnionTransformOperation||a instanceof __PRIVATE_ArrayRemoveTransformOperation&&et instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(a.elements,et.elements,__PRIVATE_valueEquals):a instanceof __PRIVATE_NumericIncrementTransformOperation&&et instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(a.Ie,et.Ie):a instanceof __PRIVATE_ServerTimestampTransform&&et instanceof __PRIVATE_ServerTimestampTransform}(o.transform,i.transform)}class MutationResult{constructor(i,s){this.version=i,this.transformResults=s}}class Precondition{constructor(i,s){this.updateTime=i,this.exists=s}static none(){return new Precondition}static exists(i){return new Precondition(void 0,i)}static updateTime(i){return new Precondition(i)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(i){return this.exists===i.exists&&(this.updateTime?!!i.updateTime&&this.updateTime.isEqual(i.updateTime):!i.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(o,i){return o.updateTime!==void 0?i.isFoundDocument()&&i.version.isEqual(o.updateTime):o.exists===void 0||o.exists===i.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(o,i){if(!o.hasLocalMutations||i&&i.fields.length===0)return null;if(i===null)return o.isNoDocument()?new __PRIVATE_DeleteMutation(o.key,Precondition.none()):new __PRIVATE_SetMutation(o.key,o.data,Precondition.none());{const s=o.data,a=ObjectValue.empty();let et=new SortedSet(FieldPath$1.comparator);for(let tt of i.fields)if(!et.has(tt)){let ot=s.field(tt);ot===null&&tt.length>1&&(tt=tt.popLast(),ot=s.field(tt)),ot===null?a.delete(tt):a.set(tt,ot),et=et.add(tt)}return new __PRIVATE_PatchMutation(o.key,a,new FieldMask(et.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(o,i,s){o instanceof __PRIVATE_SetMutation?function(et,tt,ot){const dt=et.value.clone(),ht=__PRIVATE_serverTransformResults(et.fieldTransforms,tt,ot.transformResults);dt.setAll(ht),tt.convertToFoundDocument(ot.version,dt).setHasCommittedMutations()}(o,i,s):o instanceof __PRIVATE_PatchMutation?function(et,tt,ot){if(!__PRIVATE_preconditionIsValidForDocument(et.precondition,tt))return void tt.convertToUnknownDocument(ot.version);const dt=__PRIVATE_serverTransformResults(et.fieldTransforms,tt,ot.transformResults),ht=tt.data;ht.setAll(__PRIVATE_getPatch(et)),ht.setAll(dt),tt.convertToFoundDocument(ot.version,ht).setHasCommittedMutations()}(o,i,s):function(et,tt,ot){tt.convertToNoDocument(ot.version).setHasCommittedMutations()}(0,i,s)}function __PRIVATE_mutationApplyToLocalView(o,i,s,a){return o instanceof __PRIVATE_SetMutation?function(tt,ot,dt,ht){if(!__PRIVATE_preconditionIsValidForDocument(tt.precondition,ot))return dt;const ft=tt.value.clone(),pt=__PRIVATE_localTransformResults(tt.fieldTransforms,ht,ot);return ft.setAll(pt),ot.convertToFoundDocument(ot.version,ft).setHasLocalMutations(),null}(o,i,s,a):o instanceof __PRIVATE_PatchMutation?function(tt,ot,dt,ht){if(!__PRIVATE_preconditionIsValidForDocument(tt.precondition,ot))return dt;const ft=__PRIVATE_localTransformResults(tt.fieldTransforms,ht,ot),pt=ot.data;return pt.setAll(__PRIVATE_getPatch(tt)),pt.setAll(ft),ot.convertToFoundDocument(ot.version,pt).setHasLocalMutations(),dt===null?null:dt.unionWith(tt.fieldMask.fields).unionWith(tt.fieldTransforms.map(mt=>mt.field))}(o,i,s,a):function(tt,ot,dt){return __PRIVATE_preconditionIsValidForDocument(tt.precondition,ot)?(ot.convertToNoDocument(ot.version).setHasLocalMutations(),null):dt}(o,i,s)}function __PRIVATE_mutationExtractBaseValue(o,i){let s=null;for(const a of o.fieldTransforms){const et=i.data.field(a.field),tt=__PRIVATE_computeTransformOperationBaseValue(a.transform,et||null);tt!=null&&(s===null&&(s=ObjectValue.empty()),s.set(a.field,tt))}return s||null}function __PRIVATE_mutationEquals(o,i){return o.type===i.type&&!!o.key.isEqual(i.key)&&!!o.precondition.isEqual(i.precondition)&&!!function(a,et){return a===void 0&&et===void 0||!(!a||!et)&&__PRIVATE_arrayEquals(a,et,(tt,ot)=>__PRIVATE_fieldTransformEquals(tt,ot))}(o.fieldTransforms,i.fieldTransforms)&&(o.type===0?o.value.isEqual(i.value):o.type!==1||o.data.isEqual(i.data)&&o.fieldMask.isEqual(i.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(i,s,a,et=[]){super(),this.key=i,this.value=s,this.precondition=a,this.fieldTransforms=et,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(i,s,a,et,tt=[]){super(),this.key=i,this.data=s,this.fieldMask=a,this.precondition=et,this.fieldTransforms=tt,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(o){const i=new Map;return o.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const a=o.data.field(s);i.set(s,a)}}),i}function __PRIVATE_serverTransformResults(o,i,s){const a=new Map;__PRIVATE_hardAssert(o.length===s.length);for(let et=0;et<s.length;et++){const tt=o[et],ot=tt.transform,dt=i.data.field(tt.field);a.set(tt.field,__PRIVATE_applyTransformOperationToRemoteDocument(ot,dt,s[et]))}return a}function __PRIVATE_localTransformResults(o,i,s){const a=new Map;for(const et of o){const tt=et.transform,ot=s.data.field(et.field);a.set(et.field,__PRIVATE_applyTransformOperationToLocalView(tt,ot,i))}return a}class __PRIVATE_DeleteMutation extends Mutation{constructor(i,s){super(),this.key=i,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(i,s){super(),this.key=i,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(i,s,a,et){this.batchId=i,this.localWriteTime=s,this.baseMutations=a,this.mutations=et}applyToRemoteDocument(i,s){const a=s.mutationResults;for(let et=0;et<this.mutations.length;et++){const tt=this.mutations[et];tt.key.isEqual(i.key)&&__PRIVATE_mutationApplyToRemoteDocument(tt,i,a[et])}}applyToLocalView(i,s){for(const a of this.baseMutations)a.key.isEqual(i.key)&&(s=__PRIVATE_mutationApplyToLocalView(a,i,s,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(i.key)&&(s=__PRIVATE_mutationApplyToLocalView(a,i,s,this.localWriteTime));return s}applyToLocalDocumentSet(i,s){const a=__PRIVATE_newMutationMap();return this.mutations.forEach(et=>{const tt=i.get(et.key),ot=tt.overlayedDocument;let dt=this.applyToLocalView(ot,tt.mutatedFields);dt=s.has(et.key)?null:dt;const ht=__PRIVATE_calculateOverlayMutation(ot,dt);ht!==null&&a.set(et.key,ht),ot.isValidDocument()||ot.convertToNoDocument(SnapshotVersion.min())}),a}keys(){return this.mutations.reduce((i,s)=>i.add(s.key),__PRIVATE_documentKeySet())}isEqual(i){return this.batchId===i.batchId&&__PRIVATE_arrayEquals(this.mutations,i.mutations,(s,a)=>__PRIVATE_mutationEquals(s,a))&&__PRIVATE_arrayEquals(this.baseMutations,i.baseMutations,(s,a)=>__PRIVATE_mutationEquals(s,a))}}class MutationBatchResult{constructor(i,s,a,et){this.batch=i,this.commitVersion=s,this.mutationResults=a,this.docVersions=et}static from(i,s,a){__PRIVATE_hardAssert(i.mutations.length===a.length);let et=function(){return se}();const tt=i.mutations;for(let ot=0;ot<tt.length;ot++)et=et.insert(tt[ot].key,a[ot].version);return new MutationBatchResult(i,s,a,et)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Overlay$1=class{constructor(i,s){this.largestBatchId=i,this.mutation=s}getKey(){return this.mutation.key}isEqual(i){return i!==null&&this.mutation===i.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(i,s){this.count=i,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae,ue;function __PRIVATE_isPermanentError(o){switch(o){default:return fail();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function __PRIVATE_mapCodeFromRpcCode(o){if(o===void 0)return __PRIVATE_logError("GRPC error has no .code"),D.UNKNOWN;switch(o){case ae.OK:return D.OK;case ae.CANCELLED:return D.CANCELLED;case ae.UNKNOWN:return D.UNKNOWN;case ae.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ae.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ae.INTERNAL:return D.INTERNAL;case ae.UNAVAILABLE:return D.UNAVAILABLE;case ae.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ae.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ae.NOT_FOUND:return D.NOT_FOUND;case ae.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ae.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ae.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ae.ABORTED:return D.ABORTED;case ae.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ae.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ae.DATA_LOSS:return D.DATA_LOSS;default:return fail()}}(ue=ae||(ae={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(o){const i=__PRIVATE_newTextEncoder().encode(o),s=new Md5;return s.update(i),new Uint8Array(s.digest())}function __PRIVATE_get64BitUints(o){const i=new DataView(o.buffer),s=i.getUint32(0,!0),a=i.getUint32(4,!0),et=i.getUint32(8,!0),tt=i.getUint32(12,!0);return[new Integer([s,a],0),new Integer([et,tt],0)]}class BloomFilter{constructor(i,s,a){if(this.bitmap=i,this.padding=s,this.hashCount=a,s<0||s>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${s}`);if(a<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${a}`);if(i.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${a}`);if(i.length===0&&s!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${s}`);this.Te=8*i.length-s,this.Ee=Integer.fromNumber(this.Te)}de(i,s,a){let et=i.add(s.multiply(Integer.fromNumber(a)));return et.compare(le)===1&&(et=new Integer([et.getBits(0),et.getBits(1)],0)),et.modulo(this.Ee).toNumber()}Ae(i){return(this.bitmap[Math.floor(i/8)]&1<<i%8)!=0}mightContain(i){if(this.Te===0)return!1;const s=__PRIVATE_getMd5HashValue(i),[a,et]=__PRIVATE_get64BitUints(s);for(let tt=0;tt<this.hashCount;tt++){const ot=this.de(a,et,tt);if(!this.Ae(ot))return!1}return!0}static create(i,s,a){const et=i%8==0?0:8-i%8,tt=new Uint8Array(Math.ceil(i/8)),ot=new BloomFilter(tt,et,s);return a.forEach(dt=>ot.insert(dt)),ot}insert(i){if(this.Te===0)return;const s=__PRIVATE_getMd5HashValue(i),[a,et]=__PRIVATE_get64BitUints(s);for(let tt=0;tt<this.hashCount;tt++){const ot=this.de(a,et,tt);this.Re(ot)}}Re(i){const s=Math.floor(i/8),a=i%8;this.bitmap[s]|=1<<a}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(i,s,a,et,tt){this.snapshotVersion=i,this.targetChanges=s,this.targetMismatches=a,this.documentUpdates=et,this.resolvedLimboDocuments=tt}static createSynthesizedRemoteEventForCurrentChange(i,s,a){const et=new Map;return et.set(i,TargetChange.createSynthesizedTargetChangeForCurrentChange(i,s,a)),new RemoteEvent(SnapshotVersion.min(),et,new SortedMap$1(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(i,s,a,et,tt){this.resumeToken=i,this.current=s,this.addedDocuments=a,this.modifiedDocuments=et,this.removedDocuments=tt}static createSynthesizedTargetChangeForCurrentChange(i,s,a){return new TargetChange(a,s,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(i,s,a,et){this.Ve=i,this.removedTargetIds=s,this.key=a,this.me=et}}class __PRIVATE_ExistenceFilterChange{constructor(i,s){this.targetId=i,this.fe=s}}class __PRIVATE_WatchTargetChange{constructor(i,s,a=ByteString.EMPTY_BYTE_STRING,et=null){this.state=i,this.targetIds=s,this.resumeToken=a,this.cause=et}}class __PRIVATE_TargetState{constructor(){this.ge=0,this.pe=__PRIVATE_snapshotChangesMap(),this.ye=ByteString.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(i){i.approximateByteSize()>0&&(this.Se=!0,this.ye=i)}ve(){let i=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return this.pe.forEach((et,tt)=>{switch(tt){case 0:i=i.add(et);break;case 2:s=s.add(et);break;case 1:a=a.add(et);break;default:fail()}}),new TargetChange(this.ye,this.we,i,s,a)}Fe(){this.Se=!1,this.pe=__PRIVATE_snapshotChangesMap()}Me(i,s){this.Se=!0,this.pe=this.pe.insert(i,s)}xe(i){this.Se=!0,this.pe=this.pe.remove(i)}Oe(){this.ge+=1}Ne(){this.ge-=1,__PRIVATE_hardAssert(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class __PRIVATE_WatchChangeAggregator{constructor(i){this.Le=i,this.ke=new Map,this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap$1(__PRIVATE_primitiveComparator)}$e(i){for(const s of i.Ve)i.me&&i.me.isFoundDocument()?this.Ue(s,i.me):this.We(s,i.key,i.me);for(const s of i.removedTargetIds)this.We(s,i.key,i.me)}Ge(i){this.forEachTarget(i,s=>{const a=this.ze(s);switch(i.state){case 0:this.je(s)&&a.Ce(i.resumeToken);break;case 1:a.Ne(),a.be||a.Fe(),a.Ce(i.resumeToken);break;case 2:a.Ne(),a.be||this.removeTarget(s);break;case 3:this.je(s)&&(a.Be(),a.Ce(i.resumeToken));break;case 4:this.je(s)&&(this.He(s),a.Ce(i.resumeToken));break;default:fail()}})}forEachTarget(i,s){i.targetIds.length>0?i.targetIds.forEach(s):this.ke.forEach((a,et)=>{this.je(et)&&s(et)})}Je(i){const s=i.targetId,a=i.fe.count,et=this.Ye(s);if(et){const tt=et.target;if(__PRIVATE_targetIsDocumentTarget(tt))if(a===0){const ot=new DocumentKey(tt.path);this.We(s,ot,MutableDocument.newNoDocument(ot,SnapshotVersion.min()))}else __PRIVATE_hardAssert(a===1);else{const ot=this.Ze(s);if(ot!==a){const dt=this.Xe(i),ht=dt?this.et(dt,i,ot):1;if(ht!==0){this.He(s);const ft=ht===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(s,ft)}}}}}Xe(i){const s=i.fe.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:a="",padding:et=0},hashCount:tt=0}=s;let ot,dt;try{ot=__PRIVATE_normalizeByteString(a).toUint8Array()}catch(ht){if(ht instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+ht.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw ht}try{dt=new BloomFilter(ot,et,tt)}catch(ht){return __PRIVATE_logWarn(ht instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",ht),null}return dt.Te===0?null:dt}et(i,s,a){return s.fe.count===a-this.rt(i,s.targetId)?0:2}rt(i,s){const a=this.Le.getRemoteKeysForTarget(s);let et=0;return a.forEach(tt=>{const ot=this.Le.nt(),dt=`projects/${ot.projectId}/databases/${ot.database}/documents/${tt.path.canonicalString()}`;i.mightContain(dt)||(this.We(s,tt,null),et++)}),et}it(i){const s=new Map;this.ke.forEach((tt,ot)=>{const dt=this.Ye(ot);if(dt){if(tt.current&&__PRIVATE_targetIsDocumentTarget(dt.target)){const ht=new DocumentKey(dt.target.path);this.qe.get(ht)!==null||this.st(ot,ht)||this.We(ot,ht,MutableDocument.newNoDocument(ht,i))}tt.De&&(s.set(ot,tt.ve()),tt.Fe())}});let a=__PRIVATE_documentKeySet();this.Qe.forEach((tt,ot)=>{let dt=!0;ot.forEachWhile(ht=>{const ft=this.Ye(ht);return!ft||ft.purpose==="TargetPurposeLimboResolution"||(dt=!1,!1)}),dt&&(a=a.add(tt))}),this.qe.forEach((tt,ot)=>ot.setReadTime(i));const et=new RemoteEvent(i,s,this.Ke,this.qe,a);return this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap$1(__PRIVATE_primitiveComparator),et}Ue(i,s){if(!this.je(i))return;const a=this.st(i,s.key)?2:0;this.ze(i).Me(s.key,a),this.qe=this.qe.insert(s.key,s),this.Qe=this.Qe.insert(s.key,this.ot(s.key).add(i))}We(i,s,a){if(!this.je(i))return;const et=this.ze(i);this.st(i,s)?et.Me(s,1):et.xe(s),this.Qe=this.Qe.insert(s,this.ot(s).delete(i)),a&&(this.qe=this.qe.insert(s,a))}removeTarget(i){this.ke.delete(i)}Ze(i){const s=this.ze(i).ve();return this.Le.getRemoteKeysForTarget(i).size+s.addedDocuments.size-s.removedDocuments.size}Oe(i){this.ze(i).Oe()}ze(i){let s=this.ke.get(i);return s||(s=new __PRIVATE_TargetState,this.ke.set(i,s)),s}ot(i){let s=this.Qe.get(i);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.Qe=this.Qe.insert(i,s)),s}je(i){const s=this.Ye(i)!==null;return s||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",i),s}Ye(i){const s=this.ke.get(i);return s&&s.be?null:this.Le._t(i)}He(i){this.ke.set(i,new __PRIVATE_TargetState),this.Le.getRemoteKeysForTarget(i).forEach(s=>{this.We(i,s,null)})}st(i,s){return this.Le.getRemoteKeysForTarget(i).has(s)}}function __PRIVATE_documentTargetMap(){return new SortedMap$1(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap$1(DocumentKey.comparator)}const he={asc:"ASCENDING",desc:"DESCENDING"},Pe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ie={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(i,s){this.databaseId=i,this.useProto3Json=s}}function __PRIVATE_toInt32Proto(o,i){return o.useProto3Json||__PRIVATE_isNullOrUndefined(i)?i:{value:i}}function toTimestamp(o,i){return o.useProto3Json?`${new Date(1e3*i.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+i.nanoseconds).slice(-9)}Z`:{seconds:""+i.seconds,nanos:i.nanoseconds}}function __PRIVATE_toBytes(o,i){return o.useProto3Json?i.toBase64():i.toUint8Array()}function __PRIVATE_toVersion(o,i){return toTimestamp(o,i.toTimestamp())}function __PRIVATE_fromVersion(o){return __PRIVATE_hardAssert(!!o),SnapshotVersion.fromTimestamp(function(s){const a=__PRIVATE_normalizeTimestamp(s);return new Timestamp(a.seconds,a.nanos)}(o))}function __PRIVATE_toResourceName(o,i){return __PRIVATE_toResourcePath(o,i).canonicalString()}function __PRIVATE_toResourcePath(o,i){const s=function(et){return new ResourcePath(["projects",et.projectId,"databases",et.database])}(o).child("documents");return i===void 0?s:s.child(i)}function __PRIVATE_fromResourceName(o){const i=ResourcePath.fromString(o);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(i)),i}function __PRIVATE_toName(o,i){return __PRIVATE_toResourceName(o.databaseId,i.path)}function fromName(o,i){const s=__PRIVATE_fromResourceName(i);if(s.get(1)!==o.databaseId.projectId)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+o.databaseId.projectId);if(s.get(3)!==o.databaseId.database)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+o.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(s))}function __PRIVATE_toQueryPath(o,i){return __PRIVATE_toResourceName(o.databaseId,i)}function __PRIVATE_fromQueryPath(o){const i=__PRIVATE_fromResourceName(o);return i.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(i)}function __PRIVATE_getEncodedDatabaseId(o){return new ResourcePath(["projects",o.databaseId.projectId,"databases",o.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(o){return __PRIVATE_hardAssert(o.length>4&&o.get(4)==="documents"),o.popFirst(5)}function __PRIVATE_toMutationDocument(o,i,s){return{name:__PRIVATE_toName(o,i),fields:s.value.mapValue.fields}}function __PRIVATE_fromWatchChange(o,i){let s;if("targetChange"in i){i.targetChange;const a=function(ft){return ft==="NO_CHANGE"?0:ft==="ADD"?1:ft==="REMOVE"?2:ft==="CURRENT"?3:ft==="RESET"?4:fail()}(i.targetChange.targetChangeType||"NO_CHANGE"),et=i.targetChange.targetIds||[],tt=function(ft,pt){return ft.useProto3Json?(__PRIVATE_hardAssert(pt===void 0||typeof pt=="string"),ByteString.fromBase64String(pt||"")):(__PRIVATE_hardAssert(pt===void 0||pt instanceof Uint8Array),ByteString.fromUint8Array(pt||new Uint8Array))}(o,i.targetChange.resumeToken),ot=i.targetChange.cause,dt=ot&&function(ft){const pt=ft.code===void 0?D.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(ft.code);return new FirestoreError(pt,ft.message||"")}(ot);s=new __PRIVATE_WatchTargetChange(a,et,tt,dt||null)}else if("documentChange"in i){i.documentChange;const a=i.documentChange;a.document,a.document.name,a.document.updateTime;const et=fromName(o,a.document.name),tt=__PRIVATE_fromVersion(a.document.updateTime),ot=a.document.createTime?__PRIVATE_fromVersion(a.document.createTime):SnapshotVersion.min(),dt=new ObjectValue({mapValue:{fields:a.document.fields}}),ht=MutableDocument.newFoundDocument(et,tt,ot,dt),ft=a.targetIds||[],pt=a.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange(ft,pt,ht.key,ht)}else if("documentDelete"in i){i.documentDelete;const a=i.documentDelete;a.document;const et=fromName(o,a.document),tt=a.readTime?__PRIVATE_fromVersion(a.readTime):SnapshotVersion.min(),ot=MutableDocument.newNoDocument(et,tt),dt=a.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],dt,ot.key,ot)}else if("documentRemove"in i){i.documentRemove;const a=i.documentRemove;a.document;const et=fromName(o,a.document),tt=a.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],tt,et,null)}else{if(!("filter"in i))return fail();{i.filter;const a=i.filter;a.targetId;const{count:et=0,unchangedNames:tt}=a,ot=new ExistenceFilter(et,tt),dt=a.targetId;s=new __PRIVATE_ExistenceFilterChange(dt,ot)}}return s}function toMutation(o,i){let s;if(i instanceof __PRIVATE_SetMutation)s={update:__PRIVATE_toMutationDocument(o,i.key,i.value)};else if(i instanceof __PRIVATE_DeleteMutation)s={delete:__PRIVATE_toName(o,i.key)};else if(i instanceof __PRIVATE_PatchMutation)s={update:__PRIVATE_toMutationDocument(o,i.key,i.data),updateMask:__PRIVATE_toDocumentMask(i.fieldMask)};else{if(!(i instanceof __PRIVATE_VerifyMutation))return fail();s={verify:__PRIVATE_toName(o,i.key)}}return i.fieldTransforms.length>0&&(s.updateTransforms=i.fieldTransforms.map(a=>function(tt,ot){const dt=ot.transform;if(dt instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:ot.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(dt instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:ot.field.canonicalString(),appendMissingElements:{values:dt.elements}};if(dt instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:ot.field.canonicalString(),removeAllFromArray:{values:dt.elements}};if(dt instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:ot.field.canonicalString(),increment:dt.Ie};throw fail()}(0,a))),i.precondition.isNone||(s.currentDocument=function(et,tt){return tt.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(et,tt.updateTime)}:tt.exists!==void 0?{exists:tt.exists}:fail()}(o,i.precondition)),s}function __PRIVATE_fromWriteResults(o,i){return o&&o.length>0?(__PRIVATE_hardAssert(i!==void 0),o.map(s=>function(et,tt){let ot=et.updateTime?__PRIVATE_fromVersion(et.updateTime):__PRIVATE_fromVersion(tt);return ot.isEqual(SnapshotVersion.min())&&(ot=__PRIVATE_fromVersion(tt)),new MutationResult(ot,et.transformResults||[])}(s,i))):[]}function __PRIVATE_toDocumentsTarget(o,i){return{documents:[__PRIVATE_toQueryPath(o,i.path)]}}function __PRIVATE_toQueryTarget(o,i){const s={structuredQuery:{}},a=i.path;let et;i.collectionGroup!==null?(et=a,s.structuredQuery.from=[{collectionId:i.collectionGroup,allDescendants:!0}]):(et=a.popLast(),s.structuredQuery.from=[{collectionId:a.lastSegment()}]),s.parent=__PRIVATE_toQueryPath(o,et);const tt=function(ft){if(ft.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(ft,"and"))}(i.filters);tt&&(s.structuredQuery.where=tt);const ot=function(ft){if(ft.length!==0)return ft.map(pt=>function(gt){return{field:__PRIVATE_toFieldPathReference(gt.field),direction:__PRIVATE_toDirection(gt.dir)}}(pt))}(i.orderBy);ot&&(s.structuredQuery.orderBy=ot);const dt=__PRIVATE_toInt32Proto(o,i.limit);return dt!==null&&(s.structuredQuery.limit=dt),i.startAt&&(s.structuredQuery.startAt=function(ft){return{before:ft.inclusive,values:ft.position}}(i.startAt)),i.endAt&&(s.structuredQuery.endAt=function(ft){return{before:!ft.inclusive,values:ft.position}}(i.endAt)),{ut:s,parent:et}}function __PRIVATE_convertQueryTargetToQuery(o){let i=__PRIVATE_fromQueryPath(o.parent);const s=o.structuredQuery,a=s.from?s.from.length:0;let et=null;if(a>0){__PRIVATE_hardAssert(a===1);const pt=s.from[0];pt.allDescendants?et=pt.collectionId:i=i.child(pt.collectionId)}let tt=[];s.where&&(tt=function(mt){const gt=__PRIVATE_fromFilter(mt);return gt instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(gt)?gt.getFilters():[gt]}(s.where));let ot=[];s.orderBy&&(ot=function(mt){return mt.map(gt=>function(yt){return new OrderBy(__PRIVATE_fromFieldPathReference(yt.field),function(Et){switch(Et){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(yt.direction))}(gt))}(s.orderBy));let dt=null;s.limit&&(dt=function(mt){let gt;return gt=typeof mt=="object"?mt.value:mt,__PRIVATE_isNullOrUndefined(gt)?null:gt}(s.limit));let ht=null;s.startAt&&(ht=function(mt){const gt=!!mt.before,_t=mt.values||[];return new Bound(_t,gt)}(s.startAt));let ft=null;return s.endAt&&(ft=function(mt){const gt=!mt.before,_t=mt.values||[];return new Bound(_t,gt)}(s.endAt)),__PRIVATE_newQuery(i,et,ot,tt,dt,"F",ht,ft)}function __PRIVATE_toListenRequestLabels(o,i){const s=function(et){switch(et){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail()}}(i.purpose);return s==null?null:{"goog-listen-tags":s}}function __PRIVATE_fromFilter(o){return o.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const a=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(a,"==",{doubleValue:NaN});case"IS_NULL":const et=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(et,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const tt=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(tt,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const ot=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(ot,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}(o):o.fieldFilter!==void 0?function(s){return FieldFilter.create(__PRIVATE_fromFieldPathReference(s.fieldFilter.field),function(et){switch(et){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(s.fieldFilter.op),s.fieldFilter.value)}(o):o.compositeFilter!==void 0?function(s){return CompositeFilter.create(s.compositeFilter.filters.map(a=>__PRIVATE_fromFilter(a)),function(et){switch(et){case"AND":return"and";case"OR":return"or";default:return fail()}}(s.compositeFilter.op))}(o):fail()}function __PRIVATE_toDirection(o){return he[o]}function __PRIVATE_toOperatorName(o){return Pe[o]}function __PRIVATE_toCompositeOperatorName(o){return Ie[o]}function __PRIVATE_toFieldPathReference(o){return{fieldPath:o.canonicalString()}}function __PRIVATE_fromFieldPathReference(o){return FieldPath$1.fromServerFormat(o.fieldPath)}function __PRIVATE_toFilter(o){return o instanceof FieldFilter?function(s){if(s.op==="=="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:__PRIVATE_toOperatorName(s.op),value:s.value}}}(o):o instanceof CompositeFilter?function(s){const a=s.getFilters().map(et=>__PRIVATE_toFilter(et));return a.length===1?a[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(s.op),filters:a}}}(o):fail()}function __PRIVATE_toDocumentMask(o){const i=[];return o.fields.forEach(s=>i.push(s.canonicalString())),{fieldPaths:i}}function __PRIVATE_isValidResourceName(o){return o.length>=4&&o.get(0)==="projects"&&o.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(i,s,a,et,tt=SnapshotVersion.min(),ot=SnapshotVersion.min(),dt=ByteString.EMPTY_BYTE_STRING,ht=null){this.target=i,this.targetId=s,this.purpose=a,this.sequenceNumber=et,this.snapshotVersion=tt,this.lastLimboFreeSnapshotVersion=ot,this.resumeToken=dt,this.expectedCount=ht}withSequenceNumber(i){return new TargetData(this.target,this.targetId,this.purpose,i,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(i,s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,i,null)}withExpectedCount(i){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,i)}withLastLimboFreeSnapshotVersion(i){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,i,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(i){this.ct=i}}function __PRIVATE_fromBundledQuery(o){const i=__PRIVATE_convertQueryTargetToQuery({parent:o.parent,structuredQuery:o.structuredQuery});return o.limitType==="LAST"?__PRIVATE_queryWithLimit(i,i.limit,"L"):i}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this._n=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(i,s){return this._n.add(s),PersistencePromise.resolve()}getCollectionParents(i,s){return PersistencePromise.resolve(this._n.getEntries(s))}addFieldIndex(i,s){return PersistencePromise.resolve()}deleteFieldIndex(i,s){return PersistencePromise.resolve()}deleteAllFieldIndexes(i){return PersistencePromise.resolve()}createTargetIndexes(i,s){return PersistencePromise.resolve()}getDocumentsMatchingTarget(i,s){return PersistencePromise.resolve(null)}getIndexType(i,s){return PersistencePromise.resolve(0)}getFieldIndexes(i,s){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(i){return PersistencePromise.resolve(null)}getMinOffset(i,s){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(i,s){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(i,s,a){return PersistencePromise.resolve()}updateIndexEntries(i,s){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(i){const s=i.lastSegment(),a=i.popLast(),et=this.index[s]||new SortedSet(ResourcePath.comparator),tt=!et.has(a);return this.index[s]=et.add(a),tt}has(i){const s=i.lastSegment(),a=i.popLast(),et=this.index[s];return et&&et.has(a)}getEntries(i){return(this.index[i]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(i){this.On=i}next(){return this.On+=2,this.On}static Nn(){return new __PRIVATE_TargetIdGenerator(0)}static Bn(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(i=>i.toString(),(i,s)=>i.isEqual(s)),this.changesApplied=!1}addEntry(i){this.assertNotApplied(),this.changes.set(i.key,i)}removeEntry(i,s){this.assertNotApplied(),this.changes.set(i,MutableDocument.newInvalidDocument(i).setReadTime(s))}getEntry(i,s){this.assertNotApplied();const a=this.changes.get(s);return a!==void 0?PersistencePromise.resolve(a):this.getFromCache(i,s)}getEntries(i,s){return this.getAllFromCache(i,s)}apply(i){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(i)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(i,s){this.overlayedDocument=i,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(i,s,a,et){this.remoteDocumentCache=i,this.mutationQueue=s,this.documentOverlayCache=a,this.indexManager=et}getDocument(i,s){let a=null;return this.documentOverlayCache.getOverlay(i,s).next(et=>(a=et,this.remoteDocumentCache.getEntry(i,s))).next(et=>(a!==null&&__PRIVATE_mutationApplyToLocalView(a.mutation,et,FieldMask.empty(),Timestamp.now()),et))}getDocuments(i,s){return this.remoteDocumentCache.getEntries(i,s).next(a=>this.getLocalViewOfDocuments(i,a,__PRIVATE_documentKeySet()).next(()=>a))}getLocalViewOfDocuments(i,s,a=__PRIVATE_documentKeySet()){const et=__PRIVATE_newOverlayMap();return this.populateOverlays(i,et,s).next(()=>this.computeViews(i,s,et,a).next(tt=>{let ot=documentMap();return tt.forEach((dt,ht)=>{ot=ot.insert(dt,ht.overlayedDocument)}),ot}))}getOverlayedDocuments(i,s){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(i,a,s).next(()=>this.computeViews(i,s,a,__PRIVATE_documentKeySet()))}populateOverlays(i,s,a){const et=[];return a.forEach(tt=>{s.has(tt)||et.push(tt)}),this.documentOverlayCache.getOverlays(i,et).next(tt=>{tt.forEach((ot,dt)=>{s.set(ot,dt)})})}computeViews(i,s,a,et){let tt=__PRIVATE_mutableDocumentMap();const ot=__PRIVATE_newDocumentKeyMap(),dt=function(){return __PRIVATE_newDocumentKeyMap()}();return s.forEach((ht,ft)=>{const pt=a.get(ft.key);et.has(ft.key)&&(pt===void 0||pt.mutation instanceof __PRIVATE_PatchMutation)?tt=tt.insert(ft.key,ft):pt!==void 0?(ot.set(ft.key,pt.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(pt.mutation,ft,pt.mutation.getFieldMask(),Timestamp.now())):ot.set(ft.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(i,tt).next(ht=>(ht.forEach((ft,pt)=>ot.set(ft,pt)),s.forEach((ft,pt)=>{var mt;return dt.set(ft,new OverlayedDocument(pt,(mt=ot.get(ft))!==null&&mt!==void 0?mt:null))}),dt))}recalculateAndSaveOverlays(i,s){const a=__PRIVATE_newDocumentKeyMap();let et=new SortedMap$1((ot,dt)=>ot-dt),tt=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(i,s).next(ot=>{for(const dt of ot)dt.keys().forEach(ht=>{const ft=s.get(ht);if(ft===null)return;let pt=a.get(ht)||FieldMask.empty();pt=dt.applyToLocalView(ft,pt),a.set(ht,pt);const mt=(et.get(dt.batchId)||__PRIVATE_documentKeySet()).add(ht);et=et.insert(dt.batchId,mt)})}).next(()=>{const ot=[],dt=et.getReverseIterator();for(;dt.hasNext();){const ht=dt.getNext(),ft=ht.key,pt=ht.value,mt=__PRIVATE_newMutationMap();pt.forEach(gt=>{if(!tt.has(gt)){const _t=__PRIVATE_calculateOverlayMutation(s.get(gt),a.get(gt));_t!==null&&mt.set(gt,_t),tt=tt.add(gt)}}),ot.push(this.documentOverlayCache.saveOverlays(i,ft,mt))}return PersistencePromise.waitFor(ot)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(i,s){return this.remoteDocumentCache.getEntries(i,s).next(a=>this.recalculateAndSaveOverlays(i,a))}getDocumentsMatchingQuery(i,s,a,et){return function(ot){return DocumentKey.isDocumentKey(ot.path)&&ot.collectionGroup===null&&ot.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(i,s.path):__PRIVATE_isCollectionGroupQuery(s)?this.getDocumentsMatchingCollectionGroupQuery(i,s,a,et):this.getDocumentsMatchingCollectionQuery(i,s,a,et)}getNextDocuments(i,s,a,et){return this.remoteDocumentCache.getAllFromCollectionGroup(i,s,a,et).next(tt=>{const ot=et-tt.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(i,s,a.largestBatchId,et-tt.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let dt=-1,ht=tt;return ot.next(ft=>PersistencePromise.forEach(ft,(pt,mt)=>(dt<mt.largestBatchId&&(dt=mt.largestBatchId),tt.get(pt)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(i,pt).next(gt=>{ht=ht.insert(pt,gt)}))).next(()=>this.populateOverlays(i,ft,tt)).next(()=>this.computeViews(i,ht,ft,__PRIVATE_documentKeySet())).next(pt=>({batchId:dt,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(pt)})))})}getDocumentsMatchingDocumentQuery(i,s){return this.getDocument(i,new DocumentKey(s)).next(a=>{let et=documentMap();return a.isFoundDocument()&&(et=et.insert(a.key,a)),et})}getDocumentsMatchingCollectionGroupQuery(i,s,a,et){const tt=s.collectionGroup;let ot=documentMap();return this.indexManager.getCollectionParents(i,tt).next(dt=>PersistencePromise.forEach(dt,ht=>{const ft=function(mt,gt){return new __PRIVATE_QueryImpl(gt,null,mt.explicitOrderBy.slice(),mt.filters.slice(),mt.limit,mt.limitType,mt.startAt,mt.endAt)}(s,ht.child(tt));return this.getDocumentsMatchingCollectionQuery(i,ft,a,et).next(pt=>{pt.forEach((mt,gt)=>{ot=ot.insert(mt,gt)})})}).next(()=>ot))}getDocumentsMatchingCollectionQuery(i,s,a,et){let tt;return this.documentOverlayCache.getOverlaysForCollection(i,s.path,a.largestBatchId).next(ot=>(tt=ot,this.remoteDocumentCache.getDocumentsMatchingQuery(i,s,a,tt,et))).next(ot=>{tt.forEach((ht,ft)=>{const pt=ft.getKey();ot.get(pt)===null&&(ot=ot.insert(pt,MutableDocument.newInvalidDocument(pt)))});let dt=documentMap();return ot.forEach((ht,ft)=>{const pt=tt.get(ht);pt!==void 0&&__PRIVATE_mutationApplyToLocalView(pt.mutation,ft,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(s,ft)&&(dt=dt.insert(ht,ft))}),dt})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(i){this.serializer=i,this.cr=new Map,this.lr=new Map}getBundleMetadata(i,s){return PersistencePromise.resolve(this.cr.get(s))}saveBundleMetadata(i,s){return this.cr.set(s.id,function(et){return{id:et.id,version:et.version,createTime:__PRIVATE_fromVersion(et.createTime)}}(s)),PersistencePromise.resolve()}getNamedQuery(i,s){return PersistencePromise.resolve(this.lr.get(s))}saveNamedQuery(i,s){return this.lr.set(s.name,function(et){return{name:et.name,query:__PRIVATE_fromBundledQuery(et.bundledQuery),readTime:__PRIVATE_fromVersion(et.readTime)}}(s)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap$1(DocumentKey.comparator),this.hr=new Map}getOverlay(i,s){return PersistencePromise.resolve(this.overlays.get(s))}getOverlays(i,s){const a=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,et=>this.getOverlay(i,et).next(tt=>{tt!==null&&a.set(et,tt)})).next(()=>a)}saveOverlays(i,s,a){return a.forEach((et,tt)=>{this.ht(i,s,tt)}),PersistencePromise.resolve()}removeOverlaysForBatchId(i,s,a){const et=this.hr.get(a);return et!==void 0&&(et.forEach(tt=>this.overlays=this.overlays.remove(tt)),this.hr.delete(a)),PersistencePromise.resolve()}getOverlaysForCollection(i,s,a){const et=__PRIVATE_newOverlayMap(),tt=s.length+1,ot=new DocumentKey(s.child("")),dt=this.overlays.getIteratorFrom(ot);for(;dt.hasNext();){const ht=dt.getNext().value,ft=ht.getKey();if(!s.isPrefixOf(ft.path))break;ft.path.length===tt&&ht.largestBatchId>a&&et.set(ht.getKey(),ht)}return PersistencePromise.resolve(et)}getOverlaysForCollectionGroup(i,s,a,et){let tt=new SortedMap$1((ft,pt)=>ft-pt);const ot=this.overlays.getIterator();for(;ot.hasNext();){const ft=ot.getNext().value;if(ft.getKey().getCollectionGroup()===s&&ft.largestBatchId>a){let pt=tt.get(ft.largestBatchId);pt===null&&(pt=__PRIVATE_newOverlayMap(),tt=tt.insert(ft.largestBatchId,pt)),pt.set(ft.getKey(),ft)}}const dt=__PRIVATE_newOverlayMap(),ht=tt.getIterator();for(;ht.hasNext()&&(ht.getNext().value.forEach((ft,pt)=>dt.set(ft,pt)),!(dt.size()>=et)););return PersistencePromise.resolve(dt)}ht(i,s,a){const et=this.overlays.get(a.key);if(et!==null){const ot=this.hr.get(et.largestBatchId).delete(a.key);this.hr.set(et.largestBatchId,ot)}this.overlays=this.overlays.insert(a.key,new Overlay$1(s,a));let tt=this.hr.get(s);tt===void 0&&(tt=__PRIVATE_documentKeySet(),this.hr.set(s,tt)),this.hr.set(s,tt.add(a.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Pr=new SortedSet(__PRIVATE_DocReference.Ir),this.Tr=new SortedSet(__PRIVATE_DocReference.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(i,s){const a=new __PRIVATE_DocReference(i,s);this.Pr=this.Pr.add(a),this.Tr=this.Tr.add(a)}dr(i,s){i.forEach(a=>this.addReference(a,s))}removeReference(i,s){this.Ar(new __PRIVATE_DocReference(i,s))}Rr(i,s){i.forEach(a=>this.removeReference(a,s))}Vr(i){const s=new DocumentKey(new ResourcePath([])),a=new __PRIVATE_DocReference(s,i),et=new __PRIVATE_DocReference(s,i+1),tt=[];return this.Tr.forEachInRange([a,et],ot=>{this.Ar(ot),tt.push(ot.key)}),tt}mr(){this.Pr.forEach(i=>this.Ar(i))}Ar(i){this.Pr=this.Pr.delete(i),this.Tr=this.Tr.delete(i)}gr(i){const s=new DocumentKey(new ResourcePath([])),a=new __PRIVATE_DocReference(s,i),et=new __PRIVATE_DocReference(s,i+1);let tt=__PRIVATE_documentKeySet();return this.Tr.forEachInRange([a,et],ot=>{tt=tt.add(ot.key)}),tt}containsKey(i){const s=new __PRIVATE_DocReference(i,0),a=this.Pr.firstAfterOrEqual(s);return a!==null&&i.isEqual(a.key)}}class __PRIVATE_DocReference{constructor(i,s){this.key=i,this.pr=s}static Ir(i,s){return DocumentKey.comparator(i.key,s.key)||__PRIVATE_primitiveComparator(i.pr,s.pr)}static Er(i,s){return __PRIVATE_primitiveComparator(i.pr,s.pr)||DocumentKey.comparator(i.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(i,s){this.indexManager=i,this.referenceDelegate=s,this.mutationQueue=[],this.yr=1,this.wr=new SortedSet(__PRIVATE_DocReference.Ir)}checkEmpty(i){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(i,s,a,et){const tt=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const ot=new MutationBatch(tt,s,a,et);this.mutationQueue.push(ot);for(const dt of et)this.wr=this.wr.add(new __PRIVATE_DocReference(dt.key,tt)),this.indexManager.addToCollectionParentIndex(i,dt.key.path.popLast());return PersistencePromise.resolve(ot)}lookupMutationBatch(i,s){return PersistencePromise.resolve(this.Sr(s))}getNextMutationBatchAfterBatchId(i,s){const a=s+1,et=this.br(a),tt=et<0?0:et;return PersistencePromise.resolve(this.mutationQueue.length>tt?this.mutationQueue[tt]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(i){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(i,s){const a=new __PRIVATE_DocReference(s,0),et=new __PRIVATE_DocReference(s,Number.POSITIVE_INFINITY),tt=[];return this.wr.forEachInRange([a,et],ot=>{const dt=this.Sr(ot.pr);tt.push(dt)}),PersistencePromise.resolve(tt)}getAllMutationBatchesAffectingDocumentKeys(i,s){let a=new SortedSet(__PRIVATE_primitiveComparator);return s.forEach(et=>{const tt=new __PRIVATE_DocReference(et,0),ot=new __PRIVATE_DocReference(et,Number.POSITIVE_INFINITY);this.wr.forEachInRange([tt,ot],dt=>{a=a.add(dt.pr)})}),PersistencePromise.resolve(this.Dr(a))}getAllMutationBatchesAffectingQuery(i,s){const a=s.path,et=a.length+1;let tt=a;DocumentKey.isDocumentKey(tt)||(tt=tt.child(""));const ot=new __PRIVATE_DocReference(new DocumentKey(tt),0);let dt=new SortedSet(__PRIVATE_primitiveComparator);return this.wr.forEachWhile(ht=>{const ft=ht.key.path;return!!a.isPrefixOf(ft)&&(ft.length===et&&(dt=dt.add(ht.pr)),!0)},ot),PersistencePromise.resolve(this.Dr(dt))}Dr(i){const s=[];return i.forEach(a=>{const et=this.Sr(a);et!==null&&s.push(et)}),s}removeMutationBatch(i,s){__PRIVATE_hardAssert(this.Cr(s.batchId,"removed")===0),this.mutationQueue.shift();let a=this.wr;return PersistencePromise.forEach(s.mutations,et=>{const tt=new __PRIVATE_DocReference(et.key,s.batchId);return a=a.delete(tt),this.referenceDelegate.markPotentiallyOrphaned(i,et.key)}).next(()=>{this.wr=a})}Mn(i){}containsKey(i,s){const a=new __PRIVATE_DocReference(s,0),et=this.wr.firstAfterOrEqual(a);return PersistencePromise.resolve(s.isEqual(et&&et.key))}performConsistencyCheck(i){return this.mutationQueue.length,PersistencePromise.resolve()}Cr(i,s){return this.br(i)}br(i){return this.mutationQueue.length===0?0:i-this.mutationQueue[0].batchId}Sr(i){const s=this.br(i);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(i){this.vr=i,this.docs=function(){return new SortedMap$1(DocumentKey.comparator)}(),this.size=0}setIndexManager(i){this.indexManager=i}addEntry(i,s){const a=s.key,et=this.docs.get(a),tt=et?et.size:0,ot=this.vr(s);return this.docs=this.docs.insert(a,{document:s.mutableCopy(),size:ot}),this.size+=ot-tt,this.indexManager.addToCollectionParentIndex(i,a.path.popLast())}removeEntry(i){const s=this.docs.get(i);s&&(this.docs=this.docs.remove(i),this.size-=s.size)}getEntry(i,s){const a=this.docs.get(s);return PersistencePromise.resolve(a?a.document.mutableCopy():MutableDocument.newInvalidDocument(s))}getEntries(i,s){let a=__PRIVATE_mutableDocumentMap();return s.forEach(et=>{const tt=this.docs.get(et);a=a.insert(et,tt?tt.document.mutableCopy():MutableDocument.newInvalidDocument(et))}),PersistencePromise.resolve(a)}getDocumentsMatchingQuery(i,s,a,et){let tt=__PRIVATE_mutableDocumentMap();const ot=s.path,dt=new DocumentKey(ot.child("")),ht=this.docs.getIteratorFrom(dt);for(;ht.hasNext();){const{key:ft,value:{document:pt}}=ht.getNext();if(!ot.isPrefixOf(ft.path))break;ft.path.length>ot.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(pt),a)<=0||(et.has(pt.key)||__PRIVATE_queryMatches(s,pt))&&(tt=tt.insert(pt.key,pt.mutableCopy()))}return PersistencePromise.resolve(tt)}getAllFromCollectionGroup(i,s,a,et){fail()}Fr(i,s){return PersistencePromise.forEach(this.docs,a=>s(a))}newChangeBuffer(i){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(i){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(i){super(),this.ar=i}applyChanges(i){const s=[];return this.changes.forEach((a,et)=>{et.isValidDocument()?s.push(this.ar.addEntry(i,et)):this.ar.removeEntry(a)}),PersistencePromise.waitFor(s)}getFromCache(i,s){return this.ar.getEntry(i,s)}getAllFromCache(i,s){return this.ar.getEntries(i,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(i){this.persistence=i,this.Mr=new ObjectMap(s=>__PRIVATE_canonifyTarget(s),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Or=0,this.Nr=new __PRIVATE_ReferenceSet,this.targetCount=0,this.Br=__PRIVATE_TargetIdGenerator.Nn()}forEachTarget(i,s){return this.Mr.forEach((a,et)=>s(et)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(i){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(i){return PersistencePromise.resolve(this.Or)}allocateTargetId(i){return this.highestTargetId=this.Br.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(i,s,a){return a&&(this.lastRemoteSnapshotVersion=a),s>this.Or&&(this.Or=s),PersistencePromise.resolve()}qn(i){this.Mr.set(i.target,i);const s=i.targetId;s>this.highestTargetId&&(this.Br=new __PRIVATE_TargetIdGenerator(s),this.highestTargetId=s),i.sequenceNumber>this.Or&&(this.Or=i.sequenceNumber)}addTargetData(i,s){return this.qn(s),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(i,s){return this.qn(s),PersistencePromise.resolve()}removeTargetData(i,s){return this.Mr.delete(s.target),this.Nr.Vr(s.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(i,s,a){let et=0;const tt=[];return this.Mr.forEach((ot,dt)=>{dt.sequenceNumber<=s&&a.get(dt.targetId)===null&&(this.Mr.delete(ot),tt.push(this.removeMatchingKeysForTargetId(i,dt.targetId)),et++)}),PersistencePromise.waitFor(tt).next(()=>et)}getTargetCount(i){return PersistencePromise.resolve(this.targetCount)}getTargetData(i,s){const a=this.Mr.get(s)||null;return PersistencePromise.resolve(a)}addMatchingKeys(i,s,a){return this.Nr.dr(s,a),PersistencePromise.resolve()}removeMatchingKeys(i,s,a){this.Nr.Rr(s,a);const et=this.persistence.referenceDelegate,tt=[];return et&&s.forEach(ot=>{tt.push(et.markPotentiallyOrphaned(i,ot))}),PersistencePromise.waitFor(tt)}removeMatchingKeysForTargetId(i,s){return this.Nr.Vr(s),PersistencePromise.resolve()}getMatchingKeysForTargetId(i,s){const a=this.Nr.gr(s);return PersistencePromise.resolve(a)}containsKey(i,s){return PersistencePromise.resolve(this.Nr.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(i,s){this.Lr={},this.overlays={},this.kr=new __PRIVATE_ListenSequence(0),this.qr=!1,this.qr=!0,this.referenceDelegate=i(this),this.Qr=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(et){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(et)}(a=>this.referenceDelegate.Kr(a)),this.serializer=new __PRIVATE_LocalSerializer(s),this.$r=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(i){return this.indexManager}getDocumentOverlayCache(i){let s=this.overlays[i.toKey()];return s||(s=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[i.toKey()]=s),s}getMutationQueue(i,s){let a=this.Lr[i.toKey()];return a||(a=new __PRIVATE_MemoryMutationQueue(s,this.referenceDelegate),this.Lr[i.toKey()]=a),a}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(i,s,a){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",i);const et=new __PRIVATE_MemoryTransaction(this.kr.next());return this.referenceDelegate.Ur(),a(et).next(tt=>this.referenceDelegate.Wr(et).next(()=>tt)).toPromise().then(tt=>(et.raiseOnCommittedEvent(),tt))}Gr(i,s){return PersistencePromise.or(Object.values(this.Lr).map(a=>()=>a.containsKey(i,s)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(i){super(),this.currentSequenceNumber=i}}class __PRIVATE_MemoryEagerDelegate{constructor(i){this.persistence=i,this.zr=new __PRIVATE_ReferenceSet,this.jr=null}static Hr(i){return new __PRIVATE_MemoryEagerDelegate(i)}get Jr(){if(this.jr)return this.jr;throw fail()}addReference(i,s,a){return this.zr.addReference(a,s),this.Jr.delete(a.toString()),PersistencePromise.resolve()}removeReference(i,s,a){return this.zr.removeReference(a,s),this.Jr.add(a.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(i,s){return this.Jr.add(s.toString()),PersistencePromise.resolve()}removeTarget(i,s){this.zr.Vr(s.targetId).forEach(et=>this.Jr.add(et.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(i,s.targetId).next(et=>{et.forEach(tt=>this.Jr.add(tt.toString()))}).next(()=>a.removeTargetData(i,s))}Ur(){this.jr=new Set}Wr(i){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Jr,a=>{const et=DocumentKey.fromPath(a);return this.Yr(i,et).next(tt=>{tt||s.removeEntry(et,SnapshotVersion.min())})}).next(()=>(this.jr=null,s.apply(i)))}updateLimboDocument(i,s){return this.Yr(i,s).next(a=>{a?this.Jr.delete(s.toString()):this.Jr.add(s.toString())})}Kr(i){return 0}Yr(i,s){return PersistencePromise.or([()=>PersistencePromise.resolve(this.zr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(i,s),()=>this.persistence.Gr(i,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(i,s,a,et){this.targetId=i,this.fromCache=s,this.qi=a,this.Qi=et}static Ki(i,s){let a=__PRIVATE_documentKeySet(),et=__PRIVATE_documentKeySet();for(const tt of s.docChanges)switch(tt.type){case 0:a=a.add(tt.doc.key);break;case 1:et=et.add(tt.doc.key)}return new __PRIVATE_LocalViewChanges(i,s.fromCache,a,et)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(i){this._documentReadCount+=i}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return isSafari()?8:__PRIVATE_SimpleDb.v(getUA())>0?6:4}()}initialize(i,s){this.zi=i,this.indexManager=s,this.$i=!0}getDocumentsMatchingQuery(i,s,a,et){const tt={result:null};return this.ji(i,s).next(ot=>{tt.result=ot}).next(()=>{if(!tt.result)return this.Hi(i,s,et,a).next(ot=>{tt.result=ot})}).next(()=>{if(tt.result)return;const ot=new QueryContext;return this.Ji(i,s,ot).next(dt=>{if(tt.result=dt,this.Ui)return this.Yi(i,s,ot,dt.size)})}).next(()=>tt.result)}Yi(i,s,a,et){return a.documentReadCount<this.Wi?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(s),"scans",a.documentReadCount,"local documents and returns",et,"documents as results."),a.documentReadCount>this.Gi*et?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(i,__PRIVATE_queryToTarget(s))):PersistencePromise.resolve())}ji(i,s){if(__PRIVATE_queryMatchesAllDocuments(s))return PersistencePromise.resolve(null);let a=__PRIVATE_queryToTarget(s);return this.indexManager.getIndexType(i,a).next(et=>et===0?null:(s.limit!==null&&et===1&&(s=__PRIVATE_queryWithLimit(s,null,"F"),a=__PRIVATE_queryToTarget(s)),this.indexManager.getDocumentsMatchingTarget(i,a).next(tt=>{const ot=__PRIVATE_documentKeySet(...tt);return this.zi.getDocuments(i,ot).next(dt=>this.indexManager.getMinOffset(i,a).next(ht=>{const ft=this.Zi(s,dt);return this.Xi(s,ft,ot,ht.readTime)?this.ji(i,__PRIVATE_queryWithLimit(s,null,"F")):this.es(i,ft,s,ht)}))})))}Hi(i,s,a,et){return __PRIVATE_queryMatchesAllDocuments(s)||et.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.zi.getDocuments(i,a).next(tt=>{const ot=this.Zi(s,tt);return this.Xi(s,ot,a,et)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",et.toString(),__PRIVATE_stringifyQuery(s)),this.es(i,ot,s,__PRIVATE_newIndexOffsetSuccessorFromReadTime(et,-1)).next(dt=>dt))})}Zi(i,s){let a=new SortedSet(__PRIVATE_newQueryComparator(i));return s.forEach((et,tt)=>{__PRIVATE_queryMatches(i,tt)&&(a=a.add(tt))}),a}Xi(i,s,a,et){if(i.limit===null)return!1;if(a.size!==s.size)return!0;const tt=i.limitType==="F"?s.last():s.first();return!!tt&&(tt.hasPendingWrites||tt.version.compareTo(et)>0)}Ji(i,s,a){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(s)),this.zi.getDocumentsMatchingQuery(i,s,IndexOffset.min(),a)}es(i,s,a,et){return this.zi.getDocumentsMatchingQuery(i,a,et).next(tt=>(s.forEach(ot=>{tt=tt.insert(ot.key,ot)}),tt))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalStoreImpl{constructor(i,s,a,et){this.persistence=i,this.ts=s,this.serializer=et,this.ns=new SortedMap$1(__PRIVATE_primitiveComparator),this.rs=new ObjectMap(tt=>__PRIVATE_canonifyTarget(tt),__PRIVATE_targetEquals),this.ss=new Map,this.os=i.getRemoteDocumentCache(),this.Qr=i.getTargetCache(),this.$r=i.getBundleCache(),this._s(a)}_s(i){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(i),this.indexManager=this.persistence.getIndexManager(i),this.mutationQueue=this.persistence.getMutationQueue(i,this.indexManager),this.localDocuments=new LocalDocumentsView(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(i){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>i.collect(s,this.ns))}}function __PRIVATE_newLocalStore(o,i,s,a){return new __PRIVATE_LocalStoreImpl(o,i,s,a)}async function __PRIVATE_localStoreHandleUserChange(o,i){const s=__PRIVATE_debugCast(o);return await s.persistence.runTransaction("Handle user change","readonly",a=>{let et;return s.mutationQueue.getAllMutationBatches(a).next(tt=>(et=tt,s._s(i),s.mutationQueue.getAllMutationBatches(a))).next(tt=>{const ot=[],dt=[];let ht=__PRIVATE_documentKeySet();for(const ft of et){ot.push(ft.batchId);for(const pt of ft.mutations)ht=ht.add(pt.key)}for(const ft of tt){dt.push(ft.batchId);for(const pt of ft.mutations)ht=ht.add(pt.key)}return s.localDocuments.getDocuments(a,ht).next(ft=>({us:ft,removedBatchIds:ot,addedBatchIds:dt}))})})}function __PRIVATE_localStoreAcknowledgeBatch(o,i){const s=__PRIVATE_debugCast(o);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const et=i.batch.keys(),tt=s.os.newChangeBuffer({trackRemovals:!0});return function(dt,ht,ft,pt){const mt=ft.batch,gt=mt.keys();let _t=PersistencePromise.resolve();return gt.forEach(yt=>{_t=_t.next(()=>pt.getEntry(ht,yt)).next(St=>{const Et=ft.docVersions.get(yt);__PRIVATE_hardAssert(Et!==null),St.version.compareTo(Et)<0&&(mt.applyToRemoteDocument(St,ft),St.isValidDocument()&&(St.setReadTime(ft.commitVersion),pt.addEntry(St)))})}),_t.next(()=>dt.mutationQueue.removeMutationBatch(ht,mt))}(s,a,i,tt).next(()=>tt.apply(a)).next(()=>s.mutationQueue.performConsistencyCheck(a)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(a,et,i.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(dt){let ht=__PRIVATE_documentKeySet();for(let ft=0;ft<dt.mutationResults.length;++ft)dt.mutationResults[ft].transformResults.length>0&&(ht=ht.add(dt.batch.mutations[ft].key));return ht}(i))).next(()=>s.localDocuments.getDocuments(a,et))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(o){const i=__PRIVATE_debugCast(o);return i.persistence.runTransaction("Get last remote snapshot version","readonly",s=>i.Qr.getLastRemoteSnapshotVersion(s))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(o,i){const s=__PRIVATE_debugCast(o),a=i.snapshotVersion;let et=s.ns;return s.persistence.runTransaction("Apply remote event","readwrite-primary",tt=>{const ot=s.os.newChangeBuffer({trackRemovals:!0});et=s.ns;const dt=[];i.targetChanges.forEach((pt,mt)=>{const gt=et.get(mt);if(!gt)return;dt.push(s.Qr.removeMatchingKeys(tt,pt.removedDocuments,mt).next(()=>s.Qr.addMatchingKeys(tt,pt.addedDocuments,mt)));let _t=gt.withSequenceNumber(tt.currentSequenceNumber);i.targetMismatches.get(mt)!==null?_t=_t.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):pt.resumeToken.approximateByteSize()>0&&(_t=_t.withResumeToken(pt.resumeToken,a)),et=et.insert(mt,_t),function(St,Et,vt){return St.resumeToken.approximateByteSize()===0||Et.snapshotVersion.toMicroseconds()-St.snapshotVersion.toMicroseconds()>=3e8?!0:vt.addedDocuments.size+vt.modifiedDocuments.size+vt.removedDocuments.size>0}(gt,_t,pt)&&dt.push(s.Qr.updateTargetData(tt,_t))});let ht=__PRIVATE_mutableDocumentMap(),ft=__PRIVATE_documentKeySet();if(i.documentUpdates.forEach(pt=>{i.resolvedLimboDocuments.has(pt)&&dt.push(s.persistence.referenceDelegate.updateLimboDocument(tt,pt))}),dt.push(__PRIVATE_populateDocumentChangeBuffer(tt,ot,i.documentUpdates).next(pt=>{ht=pt.cs,ft=pt.ls})),!a.isEqual(SnapshotVersion.min())){const pt=s.Qr.getLastRemoteSnapshotVersion(tt).next(mt=>s.Qr.setTargetsMetadata(tt,tt.currentSequenceNumber,a));dt.push(pt)}return PersistencePromise.waitFor(dt).next(()=>ot.apply(tt)).next(()=>s.localDocuments.getLocalViewOfDocuments(tt,ht,ft)).next(()=>ht)}).then(tt=>(s.ns=et,tt))}function __PRIVATE_populateDocumentChangeBuffer(o,i,s){let a=__PRIVATE_documentKeySet(),et=__PRIVATE_documentKeySet();return s.forEach(tt=>a=a.add(tt)),i.getEntries(o,a).next(tt=>{let ot=__PRIVATE_mutableDocumentMap();return s.forEach((dt,ht)=>{const ft=tt.get(dt);ht.isFoundDocument()!==ft.isFoundDocument()&&(et=et.add(dt)),ht.isNoDocument()&&ht.version.isEqual(SnapshotVersion.min())?(i.removeEntry(dt,ht.readTime),ot=ot.insert(dt,ht)):!ft.isValidDocument()||ht.version.compareTo(ft.version)>0||ht.version.compareTo(ft.version)===0&&ft.hasPendingWrites?(i.addEntry(ht),ot=ot.insert(dt,ht)):__PRIVATE_logDebug("LocalStore","Ignoring outdated watch update for ",dt,". Current version:",ft.version," Watch version:",ht.version)}),{cs:ot,ls:et}})}function __PRIVATE_localStoreGetNextMutationBatch(o,i){const s=__PRIVATE_debugCast(o);return s.persistence.runTransaction("Get next mutation batch","readonly",a=>(i===void 0&&(i=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(a,i)))}function __PRIVATE_localStoreAllocateTarget(o,i){const s=__PRIVATE_debugCast(o);return s.persistence.runTransaction("Allocate target","readwrite",a=>{let et;return s.Qr.getTargetData(a,i).next(tt=>tt?(et=tt,PersistencePromise.resolve(et)):s.Qr.allocateTargetId(a).next(ot=>(et=new TargetData(i,ot,"TargetPurposeListen",a.currentSequenceNumber),s.Qr.addTargetData(a,et).next(()=>et))))}).then(a=>{const et=s.ns.get(a.targetId);return(et===null||a.snapshotVersion.compareTo(et.snapshotVersion)>0)&&(s.ns=s.ns.insert(a.targetId,a),s.rs.set(i,a.targetId)),a})}async function __PRIVATE_localStoreReleaseTarget(o,i,s){const a=__PRIVATE_debugCast(o),et=a.ns.get(i),tt=s?"readwrite":"readwrite-primary";try{s||await a.persistence.runTransaction("Release target",tt,ot=>a.persistence.referenceDelegate.removeTarget(ot,et))}catch(ot){if(!__PRIVATE_isIndexedDbTransactionError(ot))throw ot;__PRIVATE_logDebug("LocalStore",`Failed to update sequence numbers for target ${i}: ${ot}`)}a.ns=a.ns.remove(i),a.rs.delete(et.target)}function __PRIVATE_localStoreExecuteQuery(o,i,s){const a=__PRIVATE_debugCast(o);let et=SnapshotVersion.min(),tt=__PRIVATE_documentKeySet();return a.persistence.runTransaction("Execute query","readwrite",ot=>function(ht,ft,pt){const mt=__PRIVATE_debugCast(ht),gt=mt.rs.get(pt);return gt!==void 0?PersistencePromise.resolve(mt.ns.get(gt)):mt.Qr.getTargetData(ft,pt)}(a,ot,__PRIVATE_queryToTarget(i)).next(dt=>{if(dt)return et=dt.lastLimboFreeSnapshotVersion,a.Qr.getMatchingKeysForTargetId(ot,dt.targetId).next(ht=>{tt=ht})}).next(()=>a.ts.getDocumentsMatchingQuery(ot,i,s?et:SnapshotVersion.min(),s?tt:__PRIVATE_documentKeySet())).next(dt=>(__PRIVATE_setMaxReadTime(a,__PRIVATE_queryCollectionGroup(i),dt),{documents:dt,hs:tt})))}function __PRIVATE_setMaxReadTime(o,i,s){let a=o.ss.get(i)||SnapshotVersion.min();s.forEach((et,tt)=>{tt.readTime.compareTo(a)>0&&(a=tt.readTime)}),o.ss.set(i,a)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}As(i){this.activeTargetIds=this.activeTargetIds.add(i)}Rs(i){this.activeTargetIds=this.activeTargetIds.delete(i)}ds(){const i={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(i)}}class __PRIVATE_MemorySharedClientState{constructor(){this.no=new __PRIVATE_LocalClientState,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(i){}updateMutationState(i,s,a){}addLocalQueryTarget(i){return this.no.As(i),this.ro[i]||"not-current"}updateQueryState(i,s,a){this.ro[i]=s}removeLocalQueryTarget(i){this.no.Rs(i)}isLocalQueryTarget(i){return this.no.activeTargetIds.has(i)}clearQueryState(i){delete this.ro[i]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(i){return this.no.activeTargetIds.has(i)}start(){return this.no=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(i,s,a){}setOnlineState(i){}shutdown(){}writeSequenceNumber(i){}notifyBundleLoaded(i){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{io(i){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(i){this.uo.push(i)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const i of this.uo)i(0)}ao(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const i of this.uo)i(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ae=null;function __PRIVATE_generateUniqueDebugId(){return Ae===null?Ae=function(){return 268435456+Math.round(2147483648*Math.random())}():Ae++,"0x"+Ae.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(i){this.lo=i.lo,this.ho=i.ho}Po(i){this.Io=i}To(i){this.Eo=i}onMessage(i){this.Ao=i}close(){this.ho()}send(i){this.lo(i)}Ro(){this.Io()}Vo(i){this.Eo(i)}mo(i){this.Ao(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve="WebChannelConnection";class __PRIVATE_WebChannelConnection extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const a=s.ssl?"https":"http",et=encodeURIComponent(this.databaseId.projectId),tt=encodeURIComponent(this.databaseId.database);this.fo=a+"://"+s.host,this.po=`projects/${et}/databases/${tt}`,this.yo=this.databaseId.database==="(default)"?`project_id=${et}`:`project_id=${et}&database_id=${tt}`}get wo(){return!1}So(s,a,et,tt,ot){const dt=__PRIVATE_generateUniqueDebugId(),ht=this.bo(s,a.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${s}' ${dt}:`,ht,et);const ft={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(ft,tt,ot),this.Co(s,ht,ft,et).then(pt=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${s}' ${dt}: `,pt),pt),pt=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${s}' ${dt} failed with error: `,pt,"url: ",ht,"request:",et),pt})}vo(s,a,et,tt,ot,dt){return this.So(s,a,et,tt,ot)}Do(s,a,et){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+S}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),a&&a.headers.forEach((tt,ot)=>s[ot]=tt),et&&et.headers.forEach((tt,ot)=>s[ot]=tt)}bo(s,a){const et=Re[s];return`${this.fo}/v1/${a}:${et}`}terminate(){}}{constructor(i){super(i),this.forceLongPolling=i.forceLongPolling,this.autoDetectLongPolling=i.autoDetectLongPolling,this.useFetchStreams=i.useFetchStreams,this.longPollingOptions=i.longPollingOptions}Co(i,s,a,et){const tt=__PRIVATE_generateUniqueDebugId();return new Promise((ot,dt)=>{const ht=new XhrIo;ht.setWithCredentials(!0),ht.listenOnce(EventType.COMPLETE,()=>{try{switch(ht.getLastErrorCode()){case ErrorCode.NO_ERROR:const pt=ht.getResponseJson();__PRIVATE_logDebug(Ve,`XHR for RPC '${i}' ${tt} received:`,JSON.stringify(pt)),ot(pt);break;case ErrorCode.TIMEOUT:__PRIVATE_logDebug(Ve,`RPC '${i}' ${tt} timed out`),dt(new FirestoreError(D.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode.HTTP_ERROR:const mt=ht.getStatus();if(__PRIVATE_logDebug(Ve,`RPC '${i}' ${tt} failed with status:`,mt,"response text:",ht.getResponseText()),mt>0){let gt=ht.getResponseJson();Array.isArray(gt)&&(gt=gt[0]);const _t=gt==null?void 0:gt.error;if(_t&&_t.status&&_t.message){const yt=function(Et){const vt=Et.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(vt)>=0?vt:D.UNKNOWN}(_t.status);dt(new FirestoreError(yt,_t.message))}else dt(new FirestoreError(D.UNKNOWN,"Server responded with status "+ht.getStatus()))}else dt(new FirestoreError(D.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(Ve,`RPC '${i}' ${tt} completed.`)}});const ft=JSON.stringify(et);__PRIVATE_logDebug(Ve,`RPC '${i}' ${tt} sending request:`,et),ht.send(s,"POST",ft,a,15)})}Fo(i,s,a){const et=__PRIVATE_generateUniqueDebugId(),tt=[this.fo,"/","google.firestore.v1.Firestore","/",i,"/channel"],ot=createWebChannelTransport(),dt=getStatEventTarget(),ht={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},ft=this.longPollingOptions.timeoutSeconds;ft!==void 0&&(ht.longPollingTimeout=Math.round(1e3*ft)),this.useFetchStreams&&(ht.useFetchStreams=!0),this.Do(ht.initMessageHeaders,s,a),ht.encodeInitMessageHeaders=!0;const pt=tt.join("");__PRIVATE_logDebug(Ve,`Creating RPC '${i}' stream ${et}: ${pt}`,ht);const mt=ot.createWebChannel(pt,ht);let gt=!1,_t=!1;const yt=new __PRIVATE_StreamBridge({lo:Et=>{_t?__PRIVATE_logDebug(Ve,`Not sending because RPC '${i}' stream ${et} is closed:`,Et):(gt||(__PRIVATE_logDebug(Ve,`Opening RPC '${i}' stream ${et} transport.`),mt.open(),gt=!0),__PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} sending:`,Et),mt.send(Et))},ho:()=>mt.close()}),St=(Et,vt,bt)=>{Et.listen(vt,Tt=>{try{bt(Tt)}catch(wt){setTimeout(()=>{throw wt},0)}})};return St(mt,WebChannel.EventType.OPEN,()=>{_t||__PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} transport opened.`)}),St(mt,WebChannel.EventType.CLOSE,()=>{_t||(_t=!0,__PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} transport closed`),yt.Vo())}),St(mt,WebChannel.EventType.ERROR,Et=>{_t||(_t=!0,__PRIVATE_logWarn(Ve,`RPC '${i}' stream ${et} transport errored:`,Et),yt.Vo(new FirestoreError(D.UNAVAILABLE,"The operation could not be completed")))}),St(mt,WebChannel.EventType.MESSAGE,Et=>{var vt;if(!_t){const bt=Et.data[0];__PRIVATE_hardAssert(!!bt);const Tt=bt,wt=Tt.error||((vt=Tt[0])===null||vt===void 0?void 0:vt.error);if(wt){__PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} received error:`,wt);const Pt=wt.status;let At=function(Rt){const Dt=ae[Rt];if(Dt!==void 0)return __PRIVATE_mapCodeFromRpcCode(Dt)}(Pt),xt=wt.message;At===void 0&&(At=D.INTERNAL,xt="Unknown error status: "+Pt+" with message "+wt.message),_t=!0,yt.Vo(new FirestoreError(At,xt)),mt.close()}else __PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} received:`,bt),yt.mo(bt)}}),St(dt,Event$1.STAT_EVENT,Et=>{Et.stat===Stat.PROXY?__PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} detected buffering proxy`):Et.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Ve,`RPC '${i}' stream ${et} detected no buffering proxy`)}),setTimeout(()=>{yt.Ro()},0),yt}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(o){return new JsonProtoSerializer(o,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(i,s,a=1e3,et=1.5,tt=6e4){this.oi=i,this.timerId=s,this.Mo=a,this.xo=et,this.Oo=tt,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(i){this.cancel();const s=Math.floor(this.No+this.Qo()),a=Math.max(0,Date.now()-this.Lo),et=Math.max(0,s-a);et>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${et} ms (base delay: ${this.No} ms, delay with jitter: ${s} ms, last attempt: ${a} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,et,()=>(this.Lo=Date.now(),i())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_PersistentStream{constructor(i,s,a,et,tt,ot,dt,ht){this.oi=i,this.$o=a,this.Uo=et,this.connection=tt,this.authCredentialsProvider=ot,this.appCheckCredentialsProvider=dt,this.listener=ht,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new __PRIVATE_ExponentialBackoff(i,s)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(i){this.n_(),this.stream.send(i)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(i,s){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,i!==4?this.jo.reset():s&&s.code===D.RESOURCE_EXHAUSTED?(__PRIVATE_logError(s.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):s&&s.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=i,await this.listener.To(s)}i_(){}auth(){this.state=1;const i=this.s_(this.Wo),s=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,et])=>{this.Wo===s&&this.o_(a,et)},a=>{i(()=>{const et=new FirestoreError(D.UNKNOWN,"Fetching auth token failed: "+a.message);return this.__(et)})})}o_(i,s){const a=this.s_(this.Wo);this.stream=this.a_(i,s),this.stream.Po(()=>{a(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(et=>{a(()=>this.__(et))}),this.stream.onMessage(et=>{a(()=>this.onMessage(et))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(i){return __PRIVATE_logDebug("PersistentStream",`close with error: ${i}`),this.stream=null,this.close(4,i)}s_(i){return s=>{this.oi.enqueueAndForget(()=>this.Wo===i?s():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(i,s,a,et,tt,ot){super(i,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,a,et,ot),this.serializer=tt}a_(i,s){return this.connection.Fo("Listen",i,s)}onMessage(i){this.jo.reset();const s=__PRIVATE_fromWatchChange(this.serializer,i),a=function(tt){if(!("targetChange"in tt))return SnapshotVersion.min();const ot=tt.targetChange;return ot.targetIds&&ot.targetIds.length?SnapshotVersion.min():ot.readTime?__PRIVATE_fromVersion(ot.readTime):SnapshotVersion.min()}(i);return this.listener.u_(s,a)}c_(i){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.addTarget=function(tt,ot){let dt;const ht=ot.target;if(dt=__PRIVATE_targetIsDocumentTarget(ht)?{documents:__PRIVATE_toDocumentsTarget(tt,ht)}:{query:__PRIVATE_toQueryTarget(tt,ht).ut},dt.targetId=ot.targetId,ot.resumeToken.approximateByteSize()>0){dt.resumeToken=__PRIVATE_toBytes(tt,ot.resumeToken);const ft=__PRIVATE_toInt32Proto(tt,ot.expectedCount);ft!==null&&(dt.expectedCount=ft)}else if(ot.snapshotVersion.compareTo(SnapshotVersion.min())>0){dt.readTime=toTimestamp(tt,ot.snapshotVersion.toTimestamp());const ft=__PRIVATE_toInt32Proto(tt,ot.expectedCount);ft!==null&&(dt.expectedCount=ft)}return dt}(this.serializer,i);const a=__PRIVATE_toListenRequestLabels(this.serializer,i);a&&(s.labels=a),this.t_(s)}l_(i){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.removeTarget=i,this.t_(s)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(i,s,a,et,tt,ot){super(i,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,a,et,ot),this.serializer=tt,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(i,s){return this.connection.Fo("Write",i,s)}onMessage(i){if(__PRIVATE_hardAssert(!!i.streamToken),this.lastStreamToken=i.streamToken,this.h_){this.jo.reset();const s=__PRIVATE_fromWriteResults(i.writeResults,i.commitTime),a=__PRIVATE_fromVersion(i.commitTime);return this.listener.T_(a,s)}return __PRIVATE_hardAssert(!i.writeResults||i.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const i={};i.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.t_(i)}I_(i){const s={streamToken:this.lastStreamToken,writes:i.map(a=>toMutation(this.serializer,a))};this.t_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DatastoreImpl extends class{}{constructor(i,s,a,et){super(),this.authCredentials=i,this.appCheckCredentials=s,this.connection=a,this.serializer=et,this.A_=!1}R_(){if(this.A_)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}So(i,s,a,et){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([tt,ot])=>this.connection.So(i,__PRIVATE_toResourcePath(s,a),et,tt,ot)).catch(tt=>{throw tt.name==="FirebaseError"?(tt.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),tt):new FirestoreError(D.UNKNOWN,tt.toString())})}vo(i,s,a,et,tt){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([ot,dt])=>this.connection.vo(i,__PRIVATE_toResourcePath(s,a),et,ot,dt,tt)).catch(ot=>{throw ot.name==="FirebaseError"?(ot.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),ot):new FirestoreError(D.UNKNOWN,ot.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(i,s){this.asyncQueue=i,this.onlineStateHandler=s,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(i){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${i.toString()}`),this.y_("Offline")))}set(i){this.b_(),this.m_=0,i==="Online"&&(this.g_=!1),this.y_(i)}y_(i){i!==this.state&&(this.state=i,this.onlineStateHandler(i))}w_(i){const s=`Could not reach Cloud Firestore backend. ${i}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(__PRIVATE_logError(s),this.g_=!1):__PRIVATE_logDebug("OnlineStateTracker",s)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_RemoteStoreImpl{constructor(i,s,a,et,tt){this.localStore=i,this.datastore=s,this.asyncQueue=a,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=tt,this.M_.io(ot=>{a.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function(ht){const ft=__PRIVATE_debugCast(ht);ft.v_.add(4),await __PRIVATE_disableNetworkInternal(ft),ft.x_.set("Unknown"),ft.v_.delete(4),await __PRIVATE_enableNetworkInternal(ft)}(this))})}),this.x_=new __PRIVATE_OnlineStateTracker(a,et)}}async function __PRIVATE_enableNetworkInternal(o){if(__PRIVATE_canUseNetwork(o))for(const i of o.F_)await i(!0)}async function __PRIVATE_disableNetworkInternal(o){for(const i of o.F_)await i(!1)}function __PRIVATE_remoteStoreListen(o,i){const s=__PRIVATE_debugCast(o);s.C_.has(i.targetId)||(s.C_.set(i.targetId,i),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):__PRIVATE_ensureWatchStream(s).Jo()&&__PRIVATE_sendWatchRequest(s,i))}function __PRIVATE_remoteStoreUnlisten(o,i){const s=__PRIVATE_debugCast(o),a=__PRIVATE_ensureWatchStream(s);s.C_.delete(i),a.Jo()&&__PRIVATE_sendUnwatchRequest(s,i),s.C_.size===0&&(a.Jo()?a.Xo():__PRIVATE_canUseNetwork(s)&&s.x_.set("Unknown"))}function __PRIVATE_sendWatchRequest(o,i){if(o.O_.Oe(i.targetId),i.resumeToken.approximateByteSize()>0||i.snapshotVersion.compareTo(SnapshotVersion.min())>0){const s=o.remoteSyncer.getRemoteKeysForTarget(i.targetId).size;i=i.withExpectedCount(s)}__PRIVATE_ensureWatchStream(o).c_(i)}function __PRIVATE_sendUnwatchRequest(o,i){o.O_.Oe(i),__PRIVATE_ensureWatchStream(o).l_(i)}function __PRIVATE_startWatchStream(o){o.O_=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:i=>o.remoteSyncer.getRemoteKeysForTarget(i),_t:i=>o.C_.get(i)||null,nt:()=>o.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(o).start(),o.x_.p_()}function __PRIVATE_shouldStartWatchStream(o){return __PRIVATE_canUseNetwork(o)&&!__PRIVATE_ensureWatchStream(o).Ho()&&o.C_.size>0}function __PRIVATE_canUseNetwork(o){return __PRIVATE_debugCast(o).v_.size===0}function __PRIVATE_cleanUpWatchStreamState(o){o.O_=void 0}async function __PRIVATE_onWatchStreamOpen(o){o.C_.forEach((i,s)=>{__PRIVATE_sendWatchRequest(o,i)})}async function __PRIVATE_onWatchStreamClose(o,i){__PRIVATE_cleanUpWatchStreamState(o),__PRIVATE_shouldStartWatchStream(o)?(o.x_.S_(i),__PRIVATE_startWatchStream(o)):o.x_.set("Unknown")}async function __PRIVATE_onWatchStreamChange(o,i,s){if(o.x_.set("Online"),i instanceof __PRIVATE_WatchTargetChange&&i.state===2&&i.cause)try{await async function(et,tt){const ot=tt.cause;for(const dt of tt.targetIds)et.C_.has(dt)&&(await et.remoteSyncer.rejectListen(dt,ot),et.C_.delete(dt),et.O_.removeTarget(dt))}(o,i)}catch(a){__PRIVATE_logDebug("RemoteStore","Failed to remove targets %s: %s ",i.targetIds.join(","),a),await __PRIVATE_disableNetworkUntilRecovery(o,a)}else if(i instanceof __PRIVATE_DocumentWatchChange?o.O_.$e(i):i instanceof __PRIVATE_ExistenceFilterChange?o.O_.Je(i):o.O_.Ge(i),!s.isEqual(SnapshotVersion.min()))try{const a=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(o.localStore);s.compareTo(a)>=0&&await function(tt,ot){const dt=tt.O_.it(ot);return dt.targetChanges.forEach((ht,ft)=>{if(ht.resumeToken.approximateByteSize()>0){const pt=tt.C_.get(ft);pt&&tt.C_.set(ft,pt.withResumeToken(ht.resumeToken,ot))}}),dt.targetMismatches.forEach((ht,ft)=>{const pt=tt.C_.get(ht);if(!pt)return;tt.C_.set(ht,pt.withResumeToken(ByteString.EMPTY_BYTE_STRING,pt.snapshotVersion)),__PRIVATE_sendUnwatchRequest(tt,ht);const mt=new TargetData(pt.target,ht,ft,pt.sequenceNumber);__PRIVATE_sendWatchRequest(tt,mt)}),tt.remoteSyncer.applyRemoteEvent(dt)}(o,s)}catch(a){__PRIVATE_logDebug("RemoteStore","Failed to raise snapshot:",a),await __PRIVATE_disableNetworkUntilRecovery(o,a)}}async function __PRIVATE_disableNetworkUntilRecovery(o,i,s){if(!__PRIVATE_isIndexedDbTransactionError(i))throw i;o.v_.add(1),await __PRIVATE_disableNetworkInternal(o),o.x_.set("Offline"),s||(s=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(o.localStore)),o.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await s(),o.v_.delete(1),await __PRIVATE_enableNetworkInternal(o)})}function __PRIVATE_executeWithRecovery(o,i){return i().catch(s=>__PRIVATE_disableNetworkUntilRecovery(o,s,i))}async function __PRIVATE_fillWritePipeline(o){const i=__PRIVATE_debugCast(o),s=__PRIVATE_ensureWriteStream(i);let a=i.D_.length>0?i.D_[i.D_.length-1].batchId:-1;for(;__PRIVATE_canAddToWritePipeline(i);)try{const et=await __PRIVATE_localStoreGetNextMutationBatch(i.localStore,a);if(et===null){i.D_.length===0&&s.Xo();break}a=et.batchId,__PRIVATE_addToWritePipeline(i,et)}catch(et){await __PRIVATE_disableNetworkUntilRecovery(i,et)}__PRIVATE_shouldStartWriteStream(i)&&__PRIVATE_startWriteStream(i)}function __PRIVATE_canAddToWritePipeline(o){return __PRIVATE_canUseNetwork(o)&&o.D_.length<10}function __PRIVATE_addToWritePipeline(o,i){o.D_.push(i);const s=__PRIVATE_ensureWriteStream(o);s.Jo()&&s.P_&&s.I_(i.mutations)}function __PRIVATE_shouldStartWriteStream(o){return __PRIVATE_canUseNetwork(o)&&!__PRIVATE_ensureWriteStream(o).Ho()&&o.D_.length>0}function __PRIVATE_startWriteStream(o){__PRIVATE_ensureWriteStream(o).start()}async function __PRIVATE_onWriteStreamOpen(o){__PRIVATE_ensureWriteStream(o).d_()}async function __PRIVATE_onWriteHandshakeComplete(o){const i=__PRIVATE_ensureWriteStream(o);for(const s of o.D_)i.I_(s.mutations)}async function __PRIVATE_onMutationResult(o,i,s){const a=o.D_.shift(),et=MutationBatchResult.from(a,i,s);await __PRIVATE_executeWithRecovery(o,()=>o.remoteSyncer.applySuccessfulWrite(et)),await __PRIVATE_fillWritePipeline(o)}async function __PRIVATE_onWriteStreamClose(o,i){i&&__PRIVATE_ensureWriteStream(o).P_&&await async function(a,et){if(function(ot){return __PRIVATE_isPermanentError(ot)&&ot!==D.ABORTED}(et.code)){const tt=a.D_.shift();__PRIVATE_ensureWriteStream(a).Zo(),await __PRIVATE_executeWithRecovery(a,()=>a.remoteSyncer.rejectFailedWrite(tt.batchId,et)),await __PRIVATE_fillWritePipeline(a)}}(o,i),__PRIVATE_shouldStartWriteStream(o)&&__PRIVATE_startWriteStream(o)}async function __PRIVATE_remoteStoreHandleCredentialChange(o,i){const s=__PRIVATE_debugCast(o);s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");const a=__PRIVATE_canUseNetwork(s);s.v_.add(3),await __PRIVATE_disableNetworkInternal(s),a&&s.x_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(i),s.v_.delete(3),await __PRIVATE_enableNetworkInternal(s)}async function __PRIVATE_remoteStoreApplyPrimaryState(o,i){const s=__PRIVATE_debugCast(o);i?(s.v_.delete(2),await __PRIVATE_enableNetworkInternal(s)):i||(s.v_.add(2),await __PRIVATE_disableNetworkInternal(s),s.x_.set("Unknown"))}function __PRIVATE_ensureWatchStream(o){return o.N_||(o.N_=function(s,a,et){const tt=__PRIVATE_debugCast(s);return tt.R_(),new __PRIVATE_PersistentListenStream(a,tt.connection,tt.authCredentials,tt.appCheckCredentials,tt.serializer,et)}(o.datastore,o.asyncQueue,{Po:__PRIVATE_onWatchStreamOpen.bind(null,o),To:__PRIVATE_onWatchStreamClose.bind(null,o),u_:__PRIVATE_onWatchStreamChange.bind(null,o)}),o.F_.push(async i=>{i?(o.N_.Zo(),__PRIVATE_shouldStartWatchStream(o)?__PRIVATE_startWatchStream(o):o.x_.set("Unknown")):(await o.N_.stop(),__PRIVATE_cleanUpWatchStreamState(o))})),o.N_}function __PRIVATE_ensureWriteStream(o){return o.B_||(o.B_=function(s,a,et){const tt=__PRIVATE_debugCast(s);return tt.R_(),new __PRIVATE_PersistentWriteStream(a,tt.connection,tt.authCredentials,tt.appCheckCredentials,tt.serializer,et)}(o.datastore,o.asyncQueue,{Po:__PRIVATE_onWriteStreamOpen.bind(null,o),To:__PRIVATE_onWriteStreamClose.bind(null,o),E_:__PRIVATE_onWriteHandshakeComplete.bind(null,o),T_:__PRIVATE_onMutationResult.bind(null,o)}),o.F_.push(async i=>{i?(o.B_.Zo(),await __PRIVATE_fillWritePipeline(o)):(await o.B_.stop(),o.D_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${o.D_.length} pending writes`),o.D_=[]))})),o.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(i,s,a,et,tt){this.asyncQueue=i,this.timerId=s,this.targetTimeMs=a,this.op=et,this.removalCallback=tt,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(ot=>{})}get promise(){return this.deferred.promise}static createAndSchedule(i,s,a,et,tt){const ot=Date.now()+a,dt=new DelayedOperation(i,s,ot,et,tt);return dt.start(a),dt}start(i){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),i)}skipDelay(){return this.handleDelayElapsed()}cancel(i){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(D.CANCELLED,"Operation cancelled"+(i?": "+i:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(i=>this.deferred.resolve(i))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(o,i){if(__PRIVATE_logError("AsyncQueue",`${i}: ${o}`),__PRIVATE_isIndexedDbTransactionError(o))return new FirestoreError(D.UNAVAILABLE,`${i}: ${o}`);throw o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{constructor(i){this.comparator=i?(s,a)=>i(s,a)||DocumentKey.comparator(s.key,a.key):(s,a)=>DocumentKey.comparator(s.key,a.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap$1(this.comparator)}static emptySet(i){return new DocumentSet(i.comparator)}has(i){return this.keyedMap.get(i)!=null}get(i){return this.keyedMap.get(i)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(i){const s=this.keyedMap.get(i);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(i){this.sortedSet.inorderTraversal((s,a)=>(i(s),!1))}add(i){const s=this.delete(i.key);return s.copy(s.keyedMap.insert(i.key,i),s.sortedSet.insert(i,null))}delete(i){const s=this.get(i);return s?this.copy(this.keyedMap.remove(i),this.sortedSet.remove(s)):this}isEqual(i){if(!(i instanceof DocumentSet)||this.size!==i.size)return!1;const s=this.sortedSet.getIterator(),a=i.sortedSet.getIterator();for(;s.hasNext();){const et=s.getNext().key,tt=a.getNext().key;if(!et.isEqual(tt))return!1}return!0}toString(){const i=[];return this.forEach(s=>{i.push(s.toString())}),i.length===0?"DocumentSet ()":`DocumentSet (
  `+i.join(`  
`)+`
)`}copy(i,s){const a=new DocumentSet;return a.comparator=this.comparator,a.keyedMap=i,a.sortedSet=s,a}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.L_=new SortedMap$1(DocumentKey.comparator)}track(i){const s=i.doc.key,a=this.L_.get(s);a?i.type!==0&&a.type===3?this.L_=this.L_.insert(s,i):i.type===3&&a.type!==1?this.L_=this.L_.insert(s,{type:a.type,doc:i.doc}):i.type===2&&a.type===2?this.L_=this.L_.insert(s,{type:2,doc:i.doc}):i.type===2&&a.type===0?this.L_=this.L_.insert(s,{type:0,doc:i.doc}):i.type===1&&a.type===0?this.L_=this.L_.remove(s):i.type===1&&a.type===2?this.L_=this.L_.insert(s,{type:1,doc:a.doc}):i.type===0&&a.type===1?this.L_=this.L_.insert(s,{type:2,doc:i.doc}):fail():this.L_=this.L_.insert(s,i)}k_(){const i=[];return this.L_.inorderTraversal((s,a)=>{i.push(a)}),i}}class ViewSnapshot{constructor(i,s,a,et,tt,ot,dt,ht,ft){this.query=i,this.docs=s,this.oldDocs=a,this.docChanges=et,this.mutatedKeys=tt,this.fromCache=ot,this.syncStateChanged=dt,this.excludesMetadataChanges=ht,this.hasCachedResults=ft}static fromInitialDocuments(i,s,a,et,tt){const ot=[];return s.forEach(dt=>{ot.push({type:0,doc:dt})}),new ViewSnapshot(i,s,DocumentSet.emptySet(s),ot,a,et,!0,!1,tt)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(i){if(!(this.fromCache===i.fromCache&&this.hasCachedResults===i.hasCachedResults&&this.syncStateChanged===i.syncStateChanged&&this.mutatedKeys.isEqual(i.mutatedKeys)&&__PRIVATE_queryEquals(this.query,i.query)&&this.docs.isEqual(i.docs)&&this.oldDocs.isEqual(i.oldDocs)))return!1;const s=this.docChanges,a=i.docChanges;if(s.length!==a.length)return!1;for(let et=0;et<s.length;et++)if(s[et].type!==a[et].type||!s[et].doc.isEqual(a[et].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.q_=void 0,this.Q_=[]}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=new ObjectMap(i=>__PRIVATE_canonifyQuery(i),__PRIVATE_queryEquals),this.onlineState="Unknown",this.K_=new Set}}async function __PRIVATE_eventManagerListen(o,i){const s=__PRIVATE_debugCast(o),a=i.query;let et=!1,tt=s.queries.get(a);if(tt||(et=!0,tt=new __PRIVATE_QueryListenersInfo),et)try{tt.q_=await s.onListen(a)}catch(ot){const dt=__PRIVATE_wrapInUserErrorIfRecoverable(ot,`Initialization of query '${__PRIVATE_stringifyQuery(i.query)}' failed`);return void i.onError(dt)}s.queries.set(a,tt),tt.Q_.push(i),i.U_(s.onlineState),tt.q_&&i.W_(tt.q_)&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}async function __PRIVATE_eventManagerUnlisten(o,i){const s=__PRIVATE_debugCast(o),a=i.query;let et=!1;const tt=s.queries.get(a);if(tt){const ot=tt.Q_.indexOf(i);ot>=0&&(tt.Q_.splice(ot,1),et=tt.Q_.length===0)}if(et)return s.queries.delete(a),s.onUnlisten(a)}function __PRIVATE_eventManagerOnWatchChange(o,i){const s=__PRIVATE_debugCast(o);let a=!1;for(const et of i){const tt=et.query,ot=s.queries.get(tt);if(ot){for(const dt of ot.Q_)dt.W_(et)&&(a=!0);ot.q_=et}}a&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}function __PRIVATE_eventManagerOnWatchError(o,i,s){const a=__PRIVATE_debugCast(o),et=a.queries.get(i);if(et)for(const tt of et.Q_)tt.onError(s);a.queries.delete(i)}function __PRIVATE_raiseSnapshotsInSyncEvent(o){o.K_.forEach(i=>{i.next()})}class __PRIVATE_QueryListener{constructor(i,s,a){this.query=i,this.G_=s,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=a||{}}W_(i){if(!this.options.includeMetadataChanges){const a=[];for(const et of i.docChanges)et.type!==3&&a.push(et);i=new ViewSnapshot(i.query,i.docs,i.oldDocs,a,i.mutatedKeys,i.fromCache,i.syncStateChanged,!0,i.hasCachedResults)}let s=!1;return this.z_?this.H_(i)&&(this.G_.next(i),s=!0):this.J_(i,this.onlineState)&&(this.Y_(i),s=!0),this.j_=i,s}onError(i){this.G_.error(i)}U_(i){this.onlineState=i;let s=!1;return this.j_&&!this.z_&&this.J_(this.j_,i)&&(this.Y_(this.j_),s=!0),s}J_(i,s){if(!i.fromCache)return!0;const a=s!=="Offline";return(!this.options.Z_||!a)&&(!i.docs.isEmpty()||i.hasCachedResults||s==="Offline")}H_(i){if(i.docChanges.length>0)return!0;const s=this.j_&&this.j_.hasPendingWrites!==i.hasPendingWrites;return!(!i.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Y_(i){i=ViewSnapshot.fromInitialDocuments(i.query,i.docs,i.mutatedKeys,i.fromCache,i.hasCachedResults),this.z_=!0,this.G_.next(i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(i){this.key=i}}class __PRIVATE_RemovedLimboDocument{constructor(i){this.key=i}}class __PRIVATE_View{constructor(i,s){this.query=i,this.oa=s,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.ua=__PRIVATE_newQueryComparator(i),this.ca=new DocumentSet(this.ua)}get la(){return this.oa}ha(i,s){const a=s?s.Pa:new __PRIVATE_DocumentChangeSet,et=s?s.ca:this.ca;let tt=s?s.mutatedKeys:this.mutatedKeys,ot=et,dt=!1;const ht=this.query.limitType==="F"&&et.size===this.query.limit?et.last():null,ft=this.query.limitType==="L"&&et.size===this.query.limit?et.first():null;if(i.inorderTraversal((pt,mt)=>{const gt=et.get(pt),_t=__PRIVATE_queryMatches(this.query,mt)?mt:null,yt=!!gt&&this.mutatedKeys.has(gt.key),St=!!_t&&(_t.hasLocalMutations||this.mutatedKeys.has(_t.key)&&_t.hasCommittedMutations);let Et=!1;gt&&_t?gt.data.isEqual(_t.data)?yt!==St&&(a.track({type:3,doc:_t}),Et=!0):this.Ia(gt,_t)||(a.track({type:2,doc:_t}),Et=!0,(ht&&this.ua(_t,ht)>0||ft&&this.ua(_t,ft)<0)&&(dt=!0)):!gt&&_t?(a.track({type:0,doc:_t}),Et=!0):gt&&!_t&&(a.track({type:1,doc:gt}),Et=!0,(ht||ft)&&(dt=!0)),Et&&(_t?(ot=ot.add(_t),tt=St?tt.add(pt):tt.delete(pt)):(ot=ot.delete(pt),tt=tt.delete(pt)))}),this.query.limit!==null)for(;ot.size>this.query.limit;){const pt=this.query.limitType==="F"?ot.last():ot.first();ot=ot.delete(pt.key),tt=tt.delete(pt.key),a.track({type:1,doc:pt})}return{ca:ot,Pa:a,Xi:dt,mutatedKeys:tt}}Ia(i,s){return i.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(i,s,a,et){const tt=this.ca;this.ca=i.ca,this.mutatedKeys=i.mutatedKeys;const ot=i.Pa.k_();ot.sort((pt,mt)=>function(_t,yt){const St=Et=>{switch(Et){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail()}};return St(_t)-St(yt)}(pt.type,mt.type)||this.ua(pt.doc,mt.doc)),this.Ta(a),et=et!=null&&et;const dt=s&&!et?this.Ea():[],ht=this.aa.size===0&&this.current&&!et?1:0,ft=ht!==this._a;return this._a=ht,ot.length!==0||ft?{snapshot:new ViewSnapshot(this.query,i.ca,tt,ot,i.mutatedKeys,ht===0,ft,!1,!!a&&a.resumeToken.approximateByteSize()>0),da:dt}:{da:dt}}U_(i){return this.current&&i==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(i){return!this.oa.has(i)&&!!this.ca.has(i)&&!this.ca.get(i).hasLocalMutations}Ta(i){i&&(i.addedDocuments.forEach(s=>this.oa=this.oa.add(s)),i.modifiedDocuments.forEach(s=>{}),i.removedDocuments.forEach(s=>this.oa=this.oa.delete(s)),this.current=i.current)}Ea(){if(!this.current)return[];const i=this.aa;this.aa=__PRIVATE_documentKeySet(),this.ca.forEach(a=>{this.Aa(a.key)&&(this.aa=this.aa.add(a.key))});const s=[];return i.forEach(a=>{this.aa.has(a)||s.push(new __PRIVATE_RemovedLimboDocument(a))}),this.aa.forEach(a=>{i.has(a)||s.push(new __PRIVATE_AddedLimboDocument(a))}),s}Ra(i){this.oa=i.hs,this.aa=__PRIVATE_documentKeySet();const s=this.ha(i.documents);return this.applyChanges(s,!0)}Va(){return ViewSnapshot.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class __PRIVATE_QueryView{constructor(i,s,a){this.query=i,this.targetId=s,this.view=a}}class LimboResolution{constructor(i){this.key=i,this.ma=!1}}class __PRIVATE_SyncEngineImpl{constructor(i,s,a,et,tt,ot){this.localStore=i,this.remoteStore=s,this.eventManager=a,this.sharedClientState=et,this.currentUser=tt,this.maxConcurrentLimboResolutions=ot,this.fa={},this.ga=new ObjectMap(dt=>__PRIVATE_canonifyQuery(dt),__PRIVATE_queryEquals),this.pa=new Map,this.ya=new Set,this.wa=new SortedMap$1(DocumentKey.comparator),this.Sa=new Map,this.ba=new __PRIVATE_ReferenceSet,this.Da={},this.Ca=new Map,this.va=__PRIVATE_TargetIdGenerator.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function __PRIVATE_syncEngineListen(o,i){const s=__PRIVATE_ensureWatchCallbacks(o);let a,et;const tt=s.ga.get(i);if(tt)a=tt.targetId,s.sharedClientState.addLocalQueryTarget(a),et=tt.view.Va();else{const ot=await __PRIVATE_localStoreAllocateTarget(s.localStore,__PRIVATE_queryToTarget(i)),dt=s.sharedClientState.addLocalQueryTarget(ot.targetId);a=ot.targetId,et=await __PRIVATE_initializeViewAndComputeSnapshot(s,i,a,dt==="current",ot.resumeToken),s.isPrimaryClient&&__PRIVATE_remoteStoreListen(s.remoteStore,ot)}return et}async function __PRIVATE_initializeViewAndComputeSnapshot(o,i,s,a,et){o.Ma=(mt,gt,_t)=>async function(St,Et,vt,bt){let Tt=Et.view.ha(vt);Tt.Xi&&(Tt=await __PRIVATE_localStoreExecuteQuery(St.localStore,Et.query,!1).then(({documents:xt})=>Et.view.ha(xt,Tt)));const wt=bt&&bt.targetChanges.get(Et.targetId),Pt=bt&&bt.targetMismatches.get(Et.targetId)!=null,At=Et.view.applyChanges(Tt,St.isPrimaryClient,wt,Pt);return __PRIVATE_updateTrackedLimbos(St,Et.targetId,At.da),At.snapshot}(o,mt,gt,_t);const tt=await __PRIVATE_localStoreExecuteQuery(o.localStore,i,!0),ot=new __PRIVATE_View(i,tt.hs),dt=ot.ha(tt.documents),ht=TargetChange.createSynthesizedTargetChangeForCurrentChange(s,a&&o.onlineState!=="Offline",et),ft=ot.applyChanges(dt,o.isPrimaryClient,ht);__PRIVATE_updateTrackedLimbos(o,s,ft.da);const pt=new __PRIVATE_QueryView(i,s,ot);return o.ga.set(i,pt),o.pa.has(s)?o.pa.get(s).push(i):o.pa.set(s,[i]),ft.snapshot}async function __PRIVATE_syncEngineUnlisten(o,i){const s=__PRIVATE_debugCast(o),a=s.ga.get(i),et=s.pa.get(a.targetId);if(et.length>1)return s.pa.set(a.targetId,et.filter(tt=>!__PRIVATE_queryEquals(tt,i))),void s.ga.delete(i);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(a.targetId),s.sharedClientState.isActiveQueryTarget(a.targetId)||await __PRIVATE_localStoreReleaseTarget(s.localStore,a.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(a.targetId),__PRIVATE_remoteStoreUnlisten(s.remoteStore,a.targetId),__PRIVATE_removeAndCleanupTarget(s,a.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(s,a.targetId),await __PRIVATE_localStoreReleaseTarget(s.localStore,a.targetId,!0))}async function __PRIVATE_syncEngineWrite(o,i,s){const a=__PRIVATE_syncEngineEnsureWriteCallbacks(o);try{const et=await function(ot,dt){const ht=__PRIVATE_debugCast(ot),ft=Timestamp.now(),pt=dt.reduce((_t,yt)=>_t.add(yt.key),__PRIVATE_documentKeySet());let mt,gt;return ht.persistence.runTransaction("Locally write mutations","readwrite",_t=>{let yt=__PRIVATE_mutableDocumentMap(),St=__PRIVATE_documentKeySet();return ht.os.getEntries(_t,pt).next(Et=>{yt=Et,yt.forEach((vt,bt)=>{bt.isValidDocument()||(St=St.add(vt))})}).next(()=>ht.localDocuments.getOverlayedDocuments(_t,yt)).next(Et=>{mt=Et;const vt=[];for(const bt of dt){const Tt=__PRIVATE_mutationExtractBaseValue(bt,mt.get(bt.key).overlayedDocument);Tt!=null&&vt.push(new __PRIVATE_PatchMutation(bt.key,Tt,__PRIVATE_extractFieldMask(Tt.value.mapValue),Precondition.exists(!0)))}return ht.mutationQueue.addMutationBatch(_t,ft,vt,dt)}).next(Et=>{gt=Et;const vt=Et.applyToLocalDocumentSet(mt,St);return ht.documentOverlayCache.saveOverlays(_t,Et.batchId,vt)})}).then(()=>({batchId:gt.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(mt)}))}(a.localStore,i);a.sharedClientState.addPendingMutation(et.batchId),function(ot,dt,ht){let ft=ot.Da[ot.currentUser.toKey()];ft||(ft=new SortedMap$1(__PRIVATE_primitiveComparator)),ft=ft.insert(dt,ht),ot.Da[ot.currentUser.toKey()]=ft}(a,et.batchId,s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,et.changes),await __PRIVATE_fillWritePipeline(a.remoteStore)}catch(et){const tt=__PRIVATE_wrapInUserErrorIfRecoverable(et,"Failed to persist write");s.reject(tt)}}async function __PRIVATE_syncEngineApplyRemoteEvent(o,i){const s=__PRIVATE_debugCast(o);try{const a=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(s.localStore,i);i.targetChanges.forEach((et,tt)=>{const ot=s.Sa.get(tt);ot&&(__PRIVATE_hardAssert(et.addedDocuments.size+et.modifiedDocuments.size+et.removedDocuments.size<=1),et.addedDocuments.size>0?ot.ma=!0:et.modifiedDocuments.size>0?__PRIVATE_hardAssert(ot.ma):et.removedDocuments.size>0&&(__PRIVATE_hardAssert(ot.ma),ot.ma=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,a,i)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_syncEngineApplyOnlineStateChange(o,i,s){const a=__PRIVATE_debugCast(o);if(a.isPrimaryClient&&s===0||!a.isPrimaryClient&&s===1){const et=[];a.ga.forEach((tt,ot)=>{const dt=ot.view.U_(i);dt.snapshot&&et.push(dt.snapshot)}),function(ot,dt){const ht=__PRIVATE_debugCast(ot);ht.onlineState=dt;let ft=!1;ht.queries.forEach((pt,mt)=>{for(const gt of mt.Q_)gt.U_(dt)&&(ft=!0)}),ft&&__PRIVATE_raiseSnapshotsInSyncEvent(ht)}(a.eventManager,i),et.length&&a.fa.u_(et),a.onlineState=i,a.isPrimaryClient&&a.sharedClientState.setOnlineState(i)}}async function __PRIVATE_syncEngineRejectListen(o,i,s){const a=__PRIVATE_debugCast(o);a.sharedClientState.updateQueryState(i,"rejected",s);const et=a.Sa.get(i),tt=et&&et.key;if(tt){let ot=new SortedMap$1(DocumentKey.comparator);ot=ot.insert(tt,MutableDocument.newNoDocument(tt,SnapshotVersion.min()));const dt=__PRIVATE_documentKeySet().add(tt),ht=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap$1(__PRIVATE_primitiveComparator),ot,dt);await __PRIVATE_syncEngineApplyRemoteEvent(a,ht),a.wa=a.wa.remove(tt),a.Sa.delete(i),__PRIVATE_pumpEnqueuedLimboResolutions(a)}else await __PRIVATE_localStoreReleaseTarget(a.localStore,i,!1).then(()=>__PRIVATE_removeAndCleanupTarget(a,i,s)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(o,i){const s=__PRIVATE_debugCast(o),a=i.batch.batchId;try{const et=await __PRIVATE_localStoreAcknowledgeBatch(s.localStore,i);__PRIVATE_processUserCallback(s,a,null),__PRIVATE_triggerPendingWritesCallbacks(s,a),s.sharedClientState.updateMutationState(a,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,et)}catch(et){await __PRIVATE_ignoreIfPrimaryLeaseLoss(et)}}async function __PRIVATE_syncEngineRejectFailedWrite(o,i,s){const a=__PRIVATE_debugCast(o);try{const et=await function(ot,dt){const ht=__PRIVATE_debugCast(ot);return ht.persistence.runTransaction("Reject batch","readwrite-primary",ft=>{let pt;return ht.mutationQueue.lookupMutationBatch(ft,dt).next(mt=>(__PRIVATE_hardAssert(mt!==null),pt=mt.keys(),ht.mutationQueue.removeMutationBatch(ft,mt))).next(()=>ht.mutationQueue.performConsistencyCheck(ft)).next(()=>ht.documentOverlayCache.removeOverlaysForBatchId(ft,pt,dt)).next(()=>ht.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(ft,pt)).next(()=>ht.localDocuments.getDocuments(ft,pt))})}(a.localStore,i);__PRIVATE_processUserCallback(a,i,s),__PRIVATE_triggerPendingWritesCallbacks(a,i),a.sharedClientState.updateMutationState(i,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(a,et)}catch(et){await __PRIVATE_ignoreIfPrimaryLeaseLoss(et)}}function __PRIVATE_triggerPendingWritesCallbacks(o,i){(o.Ca.get(i)||[]).forEach(s=>{s.resolve()}),o.Ca.delete(i)}function __PRIVATE_processUserCallback(o,i,s){const a=__PRIVATE_debugCast(o);let et=a.Da[a.currentUser.toKey()];if(et){const tt=et.get(i);tt&&(s?tt.reject(s):tt.resolve(),et=et.remove(i)),a.Da[a.currentUser.toKey()]=et}}function __PRIVATE_removeAndCleanupTarget(o,i,s=null){o.sharedClientState.removeLocalQueryTarget(i);for(const a of o.pa.get(i))o.ga.delete(a),s&&o.fa.xa(a,s);o.pa.delete(i),o.isPrimaryClient&&o.ba.Vr(i).forEach(a=>{o.ba.containsKey(a)||__PRIVATE_removeLimboTarget(o,a)})}function __PRIVATE_removeLimboTarget(o,i){o.ya.delete(i.path.canonicalString());const s=o.wa.get(i);s!==null&&(__PRIVATE_remoteStoreUnlisten(o.remoteStore,s),o.wa=o.wa.remove(i),o.Sa.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(o))}function __PRIVATE_updateTrackedLimbos(o,i,s){for(const a of s)a instanceof __PRIVATE_AddedLimboDocument?(o.ba.addReference(a.key,i),__PRIVATE_trackLimboChange(o,a)):a instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug("SyncEngine","Document no longer in limbo: "+a.key),o.ba.removeReference(a.key,i),o.ba.containsKey(a.key)||__PRIVATE_removeLimboTarget(o,a.key)):fail()}function __PRIVATE_trackLimboChange(o,i){const s=i.key,a=s.path.canonicalString();o.wa.get(s)||o.ya.has(a)||(__PRIVATE_logDebug("SyncEngine","New document in limbo: "+s),o.ya.add(a),__PRIVATE_pumpEnqueuedLimboResolutions(o))}function __PRIVATE_pumpEnqueuedLimboResolutions(o){for(;o.ya.size>0&&o.wa.size<o.maxConcurrentLimboResolutions;){const i=o.ya.values().next().value;o.ya.delete(i);const s=new DocumentKey(ResourcePath.fromString(i)),a=o.va.next();o.Sa.set(a,new LimboResolution(s)),o.wa=o.wa.insert(s,a),__PRIVATE_remoteStoreListen(o.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(s.path)),a,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence._e))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,i,s){const a=__PRIVATE_debugCast(o),et=[],tt=[],ot=[];a.ga.isEmpty()||(a.ga.forEach((dt,ht)=>{ot.push(a.Ma(ht,i,s).then(ft=>{if((ft||s)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(ht.targetId,ft!=null&&ft.fromCache?"not-current":"current"),ft){et.push(ft);const pt=__PRIVATE_LocalViewChanges.Ki(ht.targetId,ft);tt.push(pt)}}))}),await Promise.all(ot),a.fa.u_(et),await async function(ht,ft){const pt=__PRIVATE_debugCast(ht);try{await pt.persistence.runTransaction("notifyLocalViewChanges","readwrite",mt=>PersistencePromise.forEach(ft,gt=>PersistencePromise.forEach(gt.qi,_t=>pt.persistence.referenceDelegate.addReference(mt,gt.targetId,_t)).next(()=>PersistencePromise.forEach(gt.Qi,_t=>pt.persistence.referenceDelegate.removeReference(mt,gt.targetId,_t)))))}catch(mt){if(!__PRIVATE_isIndexedDbTransactionError(mt))throw mt;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+mt)}for(const mt of ft){const gt=mt.targetId;if(!mt.fromCache){const _t=pt.ns.get(gt),yt=_t.snapshotVersion,St=_t.withLastLimboFreeSnapshotVersion(yt);pt.ns=pt.ns.insert(gt,St)}}}(a.localStore,tt))}async function __PRIVATE_syncEngineHandleCredentialChange(o,i){const s=__PRIVATE_debugCast(o);if(!s.currentUser.isEqual(i)){__PRIVATE_logDebug("SyncEngine","User change. New user:",i.toKey());const a=await __PRIVATE_localStoreHandleUserChange(s.localStore,i);s.currentUser=i,function(tt,ot){tt.Ca.forEach(dt=>{dt.forEach(ht=>{ht.reject(new FirestoreError(D.CANCELLED,ot))})}),tt.Ca.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(i,a.removedBatchIds,a.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,a.us)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(o,i){const s=__PRIVATE_debugCast(o),a=s.Sa.get(i);if(a&&a.ma)return __PRIVATE_documentKeySet().add(a.key);{let et=__PRIVATE_documentKeySet();const tt=s.pa.get(i);if(!tt)return et;for(const ot of tt){const dt=s.ga.get(ot);et=et.unionWith(dt.view.la)}return et}}function __PRIVATE_ensureWatchCallbacks(o){const i=__PRIVATE_debugCast(o);return i.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,i),i.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,i),i.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,i),i.fa.u_=__PRIVATE_eventManagerOnWatchChange.bind(null,i.eventManager),i.fa.xa=__PRIVATE_eventManagerOnWatchError.bind(null,i.eventManager),i}function __PRIVATE_syncEngineEnsureWriteCallbacks(o){const i=__PRIVATE_debugCast(o);return i.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,i),i.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,i),i}class MemoryOfflineComponentProvider{constructor(){this.synchronizeTabs=!1}async initialize(i){this.serializer=__PRIVATE_newSerializer(i.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(i),this.persistence=this.createPersistence(i),await this.persistence.start(),this.localStore=this.createLocalStore(i),this.gcScheduler=this.createGarbageCollectionScheduler(i,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(i,this.localStore)}createGarbageCollectionScheduler(i,s){return null}createIndexBackfillerScheduler(i,s){return null}createLocalStore(i){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,i.initialUser,this.serializer)}createPersistence(i){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Hr,this.serializer)}createSharedClientState(i){return new __PRIVATE_MemorySharedClientState}async terminate(){var i,s;(i=this.gcScheduler)===null||i===void 0||i.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OnlineComponentProvider{async initialize(i,s){this.localStore||(this.localStore=i.localStore,this.sharedClientState=i.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!i.synchronizeTabs),this.sharedClientState.onlineStateHandler=a=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,a,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(i){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(i){const s=__PRIVATE_newSerializer(i.databaseInfo.databaseId),a=function(tt){return new __PRIVATE_WebChannelConnection(tt)}(i.databaseInfo);return function(tt,ot,dt,ht){return new __PRIVATE_DatastoreImpl(tt,ot,dt,ht)}(i.authCredentials,i.appCheckCredentials,a,s)}createRemoteStore(i){return function(a,et,tt,ot,dt){return new __PRIVATE_RemoteStoreImpl(a,et,tt,ot,dt)}(this.localStore,this.datastore,i.asyncQueue,s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,0),function(){return __PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(i,s){return function(et,tt,ot,dt,ht,ft,pt){const mt=new __PRIVATE_SyncEngineImpl(et,tt,ot,dt,ht,ft);return pt&&(mt.Fa=!0),mt}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,i.initialUser,i.maxConcurrentLimboResolutions,s)}async terminate(){var i;await async function(a){const et=__PRIVATE_debugCast(a);__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),et.v_.add(5),await __PRIVATE_disableNetworkInternal(et),et.M_.shutdown(),et.x_.set("Unknown")}(this.remoteStore),(i=this.datastore)===null||i===void 0||i.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(i){this.observer=i,this.muted=!1}next(i){this.observer.next&&this.Ba(this.observer.next,i)}error(i){this.observer.error?this.Ba(this.observer.error,i):__PRIVATE_logError("Uncaught Error in snapshot listener:",i.toString())}La(){this.muted=!0}Ba(i,s){this.muted||setTimeout(()=>{this.muted||i(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreClient{constructor(i,s,a,et){this.authCredentials=i,this.appCheckCredentials=s,this.asyncQueue=a,this.databaseInfo=et,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,async tt=>{__PRIVATE_logDebug("FirestoreClient","Received user=",tt.uid),await this.authCredentialListener(tt),this.user=tt}),this.appCheckCredentials.start(a,tt=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",tt),this.appCheckCredentialListener(tt,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(i){this.authCredentialListener=i}setAppCheckTokenChangeListener(i){this.appCheckCredentialListener=i}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const i=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),i.resolve()}catch(s){const a=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");i.reject(a)}}),i.promise}}async function __PRIVATE_setOfflineComponentProvider(o,i){o.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");const s=o.configuration;await i.initialize(s);let a=s.initialUser;o.setCredentialChangeListener(async et=>{a.isEqual(et)||(await __PRIVATE_localStoreHandleUserChange(i.localStore,et),a=et)}),i.persistence.setDatabaseDeletedListener(()=>o.terminate()),o._offlineComponents=i}async function __PRIVATE_setOnlineComponentProvider(o,i){o.asyncQueue.verifyOperationInProgress();const s=await __PRIVATE_ensureOfflineComponents(o);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await i.initialize(s,o.configuration),o.setCredentialChangeListener(a=>__PRIVATE_remoteStoreHandleCredentialChange(i.remoteStore,a)),o.setAppCheckTokenChangeListener((a,et)=>__PRIVATE_remoteStoreHandleCredentialChange(i.remoteStore,et)),o._onlineComponents=i}function __PRIVATE_canFallbackFromIndexedDbError(o){return o.name==="FirebaseError"?o.code===D.FAILED_PRECONDITION||o.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11}async function __PRIVATE_ensureOfflineComponents(o){if(!o._offlineComponents)if(o._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(o,o._uninitializedComponentsProvider._offline)}catch(i){const s=i;if(!__PRIVATE_canFallbackFromIndexedDbError(s))throw s;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+s),await __PRIVATE_setOfflineComponentProvider(o,new MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(o,new MemoryOfflineComponentProvider);return o._offlineComponents}async function __PRIVATE_ensureOnlineComponents(o){return o._onlineComponents||(o._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(o,o._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(o,new OnlineComponentProvider))),o._onlineComponents}function __PRIVATE_getSyncEngine(o){return __PRIVATE_ensureOnlineComponents(o).then(i=>i.syncEngine)}async function __PRIVATE_getEventManager(o){const i=await __PRIVATE_ensureOnlineComponents(o),s=i.eventManager;return s.onListen=__PRIVATE_syncEngineListen.bind(null,i.syncEngine),s.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,i.syncEngine),s}function __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(o,i,s={}){const a=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget(async()=>function(tt,ot,dt,ht,ft){const pt=new __PRIVATE_AsyncObserver({next:gt=>{ot.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(tt,mt));const _t=gt.docs.has(dt);!_t&&gt.fromCache?ft.reject(new FirestoreError(D.UNAVAILABLE,"Failed to get document because the client is offline.")):_t&&gt.fromCache&&ht&&ht.source==="server"?ft.reject(new FirestoreError(D.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):ft.resolve(gt)},error:gt=>ft.reject(gt)}),mt=new __PRIVATE_QueryListener(__PRIVATE_newQueryForPath(dt.path),pt,{includeMetadataChanges:!0,Z_:!0});return __PRIVATE_eventManagerListen(tt,mt)}(await __PRIVATE_getEventManager(o),o.asyncQueue,i,s,a)),a.promise}function __PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(o,i,s={}){const a=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget(async()=>function(tt,ot,dt,ht,ft){const pt=new __PRIVATE_AsyncObserver({next:gt=>{ot.enqueueAndForget(()=>__PRIVATE_eventManagerUnlisten(tt,mt)),gt.fromCache&&ht.source==="server"?ft.reject(new FirestoreError(D.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):ft.resolve(gt)},error:gt=>ft.reject(gt)}),mt=new __PRIVATE_QueryListener(dt,pt,{includeMetadataChanges:!0,Z_:!0});return __PRIVATE_eventManagerListen(tt,mt)}(await __PRIVATE_getEventManager(o),o.asyncQueue,i,s,a)),a.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(o){const i={};return o.timeoutSeconds!==void 0&&(i.timeoutSeconds=o.timeoutSeconds),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(o,i,s){if(!s)throw new FirestoreError(D.INVALID_ARGUMENT,`Function ${o}() cannot be called with an empty ${i}.`)}function __PRIVATE_validateIsNotUsedTogether(o,i,s,a){if(i===!0&&a===!0)throw new FirestoreError(D.INVALID_ARGUMENT,`${o} and ${s} cannot be used together.`)}function __PRIVATE_validateDocumentPath(o){if(!DocumentKey.isDocumentKey(o))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${o} has ${o.length}.`)}function __PRIVATE_validateCollectionPath(o){if(DocumentKey.isDocumentKey(o))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${o} has ${o.length}.`)}function __PRIVATE_valueDescription(o){if(o===void 0)return"undefined";if(o===null)return"null";if(typeof o=="string")return o.length>20&&(o=`${o.substring(0,20)}...`),JSON.stringify(o);if(typeof o=="number"||typeof o=="boolean")return""+o;if(typeof o=="object"){if(o instanceof Array)return"an array";{const i=function(a){return a.constructor?a.constructor.name:null}(o);return i?`a custom ${i} object`:"an object"}}return typeof o=="function"?"a function":fail()}function __PRIVATE_cast(o,i){if("_delegate"in o&&(o=o._delegate),!(o instanceof i)){if(i.name===o.constructor.name)throw new FirestoreError(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=__PRIVATE_valueDescription(o);throw new FirestoreError(D.INVALID_ARGUMENT,`Expected type '${i.name}', but it was: ${s}`)}}return o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreSettingsImpl{constructor(i){var s,a;if(i.host===void 0){if(i.ssl!==void 0)throw new FirestoreError(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=i.host,this.ssl=(s=i.ssl)===null||s===void 0||s;if(this.credentials=i.credentials,this.ignoreUndefinedProperties=!!i.ignoreUndefinedProperties,this.localCache=i.localCache,i.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(i.cacheSizeBytes!==-1&&i.cacheSizeBytes<1048576)throw new FirestoreError(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=i.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",i.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",i.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!i.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:i.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!i.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((a=i.experimentalLongPollingOptions)!==null&&a!==void 0?a:{}),function(tt){if(tt.timeoutSeconds!==void 0){if(isNaN(tt.timeoutSeconds))throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${tt.timeoutSeconds} (must not be NaN)`);if(tt.timeoutSeconds<5)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${tt.timeoutSeconds} (minimum allowed value is 5)`);if(tt.timeoutSeconds>30)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${tt.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!i.useFetchStreams}isEqual(i){return this.host===i.host&&this.ssl===i.ssl&&this.credentials===i.credentials&&this.cacheSizeBytes===i.cacheSizeBytes&&this.experimentalForceLongPolling===i.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===i.experimentalAutoDetectLongPolling&&function(a,et){return a.timeoutSeconds===et.timeoutSeconds}(this.experimentalLongPollingOptions,i.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===i.ignoreUndefinedProperties&&this.useFetchStreams===i.useFetchStreams}}class Firestore$1{constructor(i,s,a,et){this._authCredentials=i,this._appCheckCredentials=s,this._databaseId=a,this._app=et,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(i){if(this._settingsFrozen)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(i),i.credentials!==void 0&&(this._authCredentials=function(a){if(!a)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(a.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(a.sessionIndex||"0",a.iamToken||null,a.authTokenFactory||null);case"provider":return a.client;default:throw new FirestoreError(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(i.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const a=me.get(s);a&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),me.delete(s),a.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(o,i,s,a={}){var et;const tt=(o=__PRIVATE_cast(o,Firestore$1))._getSettings(),ot=`${i}:${s}`;if(tt.host!=="firestore.googleapis.com"&&tt.host!==ot&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),o._setSettings(Object.assign(Object.assign({},tt),{host:ot,ssl:!1})),a.mockUserToken){let dt,ht;if(typeof a.mockUserToken=="string")dt=a.mockUserToken,ht=User.MOCK_USER;else{dt=createMockUserToken(a.mockUserToken,(et=o._app)===null||et===void 0?void 0:et.options.projectId);const ft=a.mockUserToken.sub||a.mockUserToken.user_id;if(!ft)throw new FirestoreError(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");ht=new User(ft)}o._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(dt,ht))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(i,s,a){this.converter=s,this._query=a,this.type="query",this.firestore=i}withConverter(i){return new Query(this.firestore,i,this._query)}}class DocumentReference{constructor(i,s,a){this.converter=s,this._key=a,this.type="document",this.firestore=i}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(i){return new DocumentReference(this.firestore,i,this._key)}}class CollectionReference extends Query{constructor(i,s,a){super(i,s,__PRIVATE_newQueryForPath(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const i=this._path.popLast();return i.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(i))}withConverter(i){return new CollectionReference(this.firestore,i,this._path)}}function collection(o,i,...s){if(o=getModularInstance(o),__PRIVATE_validateNonEmptyArgument("collection","path",i),o instanceof Firestore$1){const a=ResourcePath.fromString(i,...s);return __PRIVATE_validateCollectionPath(a),new CollectionReference(o,null,a)}{if(!(o instanceof DocumentReference||o instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=o._path.child(ResourcePath.fromString(i,...s));return __PRIVATE_validateCollectionPath(a),new CollectionReference(o.firestore,null,a)}}function doc(o,i,...s){if(o=getModularInstance(o),arguments.length===1&&(i=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",i),o instanceof Firestore$1){const a=ResourcePath.fromString(i,...s);return __PRIVATE_validateDocumentPath(a),new DocumentReference(o,null,new DocumentKey(a))}{if(!(o instanceof DocumentReference||o instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=o._path.child(ResourcePath.fromString(i,...s));return __PRIVATE_validateDocumentPath(a),new DocumentReference(o.firestore,o instanceof CollectionReference?o.converter:null,new DocumentKey(a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncQueueImpl{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._u=()=>{const s=getDocument();s&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+s.visibilityState),this.jo.Ko()};const i=getDocument();i&&typeof i.addEventListener=="function"&&i.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(i){this.enqueue(i)}enqueueAndForgetEvenWhileRestricted(i){this.au(),this.uu(i)}enterRestrictedMode(i){if(!this.tu){this.tu=!0,this.su=i||!1;const s=getDocument();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._u)}}enqueue(i){if(this.au(),this.tu)return new Promise(()=>{});const s=new __PRIVATE_Deferred;return this.uu(()=>this.tu&&this.su?Promise.resolve():(i().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(i){this.enqueueAndForget(()=>(this.eu.push(i),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(i){if(!__PRIVATE_isIndexedDbTransactionError(i))throw i;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+i)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(i){const s=this.Xa.then(()=>(this.iu=!0,i().catch(a=>{this.ru=a,this.iu=!1;const et=function(ot){let dt=ot.message||"";return ot.stack&&(dt=ot.stack.includes(ot.message)?ot.stack:ot.message+`
`+ot.stack),dt}(a);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",et),a}).then(a=>(this.iu=!1,a))));return this.Xa=s,s}enqueueAfterDelay(i,s,a){this.au(),this.ou.indexOf(i)>-1&&(s=0);const et=DelayedOperation.createAndSchedule(this,i,s,a,tt=>this.lu(tt));return this.nu.push(et),et}au(){this.ru&&fail()}verifyOperationInProgress(){}async hu(){let i;do i=this.Xa,await i;while(i!==this.Xa)}Pu(i){for(const s of this.nu)if(s.timerId===i)return!0;return!1}Iu(i){return this.hu().then(()=>{this.nu.sort((s,a)=>s.targetTimeMs-a.targetTimeMs);for(const s of this.nu)if(s.skipDelay(),i!=="all"&&s.timerId===i)break;return this.hu()})}Tu(i){this.ou.push(i)}lu(i){const s=this.nu.indexOf(i);this.nu.splice(s,1)}}class Firestore extends Firestore$1{constructor(i,s,a,et){super(i,s,a,et),this.type="firestore",this._queue=function(){return new __PRIVATE_AsyncQueueImpl}(),this._persistenceKey=(et==null?void 0:et.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||__PRIVATE_configureFirestore(this),this._firestoreClient.terminate()}}function getFirestore(o,i){const s=typeof o=="object"?o:getApp(),a=typeof o=="string"?o:i||"(default)",et=_getProvider(s,"firestore").getImmediate({identifier:a});if(!et._initialized){const tt=getDefaultEmulatorHostnameAndPort("firestore");tt&&connectFirestoreEmulator(et,...tt)}return et}function ensureFirestoreConfigured(o){return o._firestoreClient||__PRIVATE_configureFirestore(o),o._firestoreClient.verifyNotTerminated(),o._firestoreClient}function __PRIVATE_configureFirestore(o){var i,s,a;const et=o._freezeSettings(),tt=function(dt,ht,ft,pt){return new DatabaseInfo(dt,ht,ft,pt.host,pt.ssl,pt.experimentalForceLongPolling,pt.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(pt.experimentalLongPollingOptions),pt.useFetchStreams)}(o._databaseId,((i=o._app)===null||i===void 0?void 0:i.options.appId)||"",o._persistenceKey,et);o._firestoreClient=new FirestoreClient(o._authCredentials,o._appCheckCredentials,o._queue,tt),!((s=et.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((a=et.localCache)===null||a===void 0)&&a._onlineComponentProvider)&&(o._firestoreClient._uninitializedComponentsProvider={_offlineKind:et.localCache.kind,_offline:et.localCache._offlineComponentProvider,_online:et.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(i){this._byteString=i}static fromBase64String(i){try{return new Bytes(ByteString.fromBase64String(i))}catch(s){throw new FirestoreError(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(i){return new Bytes(ByteString.fromUint8Array(i))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(i){return this._byteString.isEqual(i._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...i){for(let s=0;s<i.length;++s)if(i[s].length===0)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(i)}isEqual(i){return this._internalPath.isEqual(i._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(i){this._methodName=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(i,s){if(!isFinite(i)||i<-90||i>90)throw new FirestoreError(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+i);if(!isFinite(s)||s<-180||s>180)throw new FirestoreError(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=i,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(i){return this._lat===i._lat&&this._long===i._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(i){return __PRIVATE_primitiveComparator(this._lat,i._lat)||__PRIVATE_primitiveComparator(this._long,i._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge=/^__.*__$/;class ParsedSetData{constructor(i,s,a){this.data=i,this.fieldMask=s,this.fieldTransforms=a}toMutation(i,s){return this.fieldMask!==null?new __PRIVATE_PatchMutation(i,this.data,this.fieldMask,s,this.fieldTransforms):new __PRIVATE_SetMutation(i,this.data,s,this.fieldTransforms)}}class ParsedUpdateData{constructor(i,s,a){this.data=i,this.fieldMask=s,this.fieldTransforms=a}toMutation(i,s){return new __PRIVATE_PatchMutation(i,this.data,this.fieldMask,s,this.fieldTransforms)}}function __PRIVATE_isWrite(o){switch(o){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}class __PRIVATE_ParseContextImpl{constructor(i,s,a,et,tt,ot){this.settings=i,this.databaseId=s,this.serializer=a,this.ignoreUndefinedProperties=et,tt===void 0&&this.Eu(),this.fieldTransforms=tt||[],this.fieldMask=ot||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(i){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),i),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(i){var s;const a=(s=this.path)===null||s===void 0?void 0:s.child(i),et=this.Au({path:a,Vu:!1});return et.mu(i),et}fu(i){var s;const a=(s=this.path)===null||s===void 0?void 0:s.child(i),et=this.Au({path:a,Vu:!1});return et.Eu(),et}gu(i){return this.Au({path:void 0,Vu:!0})}pu(i){return __PRIVATE_createError(i,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(i){return this.fieldMask.find(s=>i.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>i.isPrefixOf(s.field))!==void 0}Eu(){if(this.path)for(let i=0;i<this.path.length;i++)this.mu(this.path.get(i))}mu(i){if(i.length===0)throw this.pu("Document fields must not be empty");if(__PRIVATE_isWrite(this.du)&&ge.test(i))throw this.pu('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(i,s,a){this.databaseId=i,this.ignoreUndefinedProperties=s,this.serializer=a||__PRIVATE_newSerializer(i)}Su(i,s,a,et=!1){return new __PRIVATE_ParseContextImpl({du:i,methodName:s,wu:a,path:FieldPath$1.emptyPath(),Vu:!1,yu:et},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(o){const i=o._freezeSettings(),s=__PRIVATE_newSerializer(o._databaseId);return new __PRIVATE_UserDataReader(o._databaseId,!!i.ignoreUndefinedProperties,s)}function __PRIVATE_parseSetData(o,i,s,a,et,tt={}){const ot=o.Su(tt.merge||tt.mergeFields?2:0,i,s,et);__PRIVATE_validatePlainObject("Data must be an object, but it was:",ot,a);const dt=__PRIVATE_parseObject(a,ot);let ht,ft;if(tt.merge)ht=new FieldMask(ot.fieldMask),ft=ot.fieldTransforms;else if(tt.mergeFields){const pt=[];for(const mt of tt.mergeFields){const gt=__PRIVATE_fieldPathFromArgument$1(i,mt,s);if(!ot.contains(gt))throw new FirestoreError(D.INVALID_ARGUMENT,`Field '${gt}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(pt,gt)||pt.push(gt)}ht=new FieldMask(pt),ft=ot.fieldTransforms.filter(mt=>ht.covers(mt.field))}else ht=null,ft=ot.fieldTransforms;return new ParsedSetData(new ObjectValue(dt),ht,ft)}class __PRIVATE_DeleteFieldValueImpl extends FieldValue{_toFieldTransform(i){if(i.du!==2)throw i.du===1?i.pu(`${this._methodName}() can only appear at the top level of your update data`):i.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return i.fieldMask.push(i.path),null}isEqual(i){return i instanceof __PRIVATE_DeleteFieldValueImpl}}function __PRIVATE_parseUpdateData(o,i,s,a){const et=o.Su(1,i,s);__PRIVATE_validatePlainObject("Data must be an object, but it was:",et,a);const tt=[],ot=ObjectValue.empty();forEach(a,(ht,ft)=>{const pt=__PRIVATE_fieldPathFromDotSeparatedString(i,ht,s);ft=getModularInstance(ft);const mt=et.fu(pt);if(ft instanceof __PRIVATE_DeleteFieldValueImpl)tt.push(pt);else{const gt=__PRIVATE_parseData(ft,mt);gt!=null&&(tt.push(pt),ot.set(pt,gt))}});const dt=new FieldMask(tt);return new ParsedUpdateData(ot,dt,et.fieldTransforms)}function __PRIVATE_parseUpdateVarargs(o,i,s,a,et,tt){const ot=o.Su(1,i,s),dt=[__PRIVATE_fieldPathFromArgument$1(i,a,s)],ht=[et];if(tt.length%2!=0)throw new FirestoreError(D.INVALID_ARGUMENT,`Function ${i}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let gt=0;gt<tt.length;gt+=2)dt.push(__PRIVATE_fieldPathFromArgument$1(i,tt[gt])),ht.push(tt[gt+1]);const ft=[],pt=ObjectValue.empty();for(let gt=dt.length-1;gt>=0;--gt)if(!__PRIVATE_fieldMaskContains(ft,dt[gt])){const _t=dt[gt];let yt=ht[gt];yt=getModularInstance(yt);const St=ot.fu(_t);if(yt instanceof __PRIVATE_DeleteFieldValueImpl)ft.push(_t);else{const Et=__PRIVATE_parseData(yt,St);Et!=null&&(ft.push(_t),pt.set(_t,Et))}}const mt=new FieldMask(ft);return new ParsedUpdateData(pt,mt,ot.fieldTransforms)}function __PRIVATE_parseData(o,i){if(__PRIVATE_looksLikeJsonObject(o=getModularInstance(o)))return __PRIVATE_validatePlainObject("Unsupported field value:",i,o),__PRIVATE_parseObject(o,i);if(o instanceof FieldValue)return function(a,et){if(!__PRIVATE_isWrite(et.du))throw et.pu(`${a._methodName}() can only be used with update() and set()`);if(!et.path)throw et.pu(`${a._methodName}() is not currently supported inside arrays`);const tt=a._toFieldTransform(et);tt&&et.fieldTransforms.push(tt)}(o,i),null;if(o===void 0&&i.ignoreUndefinedProperties)return null;if(i.path&&i.fieldMask.push(i.path),o instanceof Array){if(i.settings.Vu&&i.du!==4)throw i.pu("Nested arrays are not supported");return function(a,et){const tt=[];let ot=0;for(const dt of a){let ht=__PRIVATE_parseData(dt,et.gu(ot));ht==null&&(ht={nullValue:"NULL_VALUE"}),tt.push(ht),ot++}return{arrayValue:{values:tt}}}(o,i)}return function(a,et){if((a=getModularInstance(a))===null)return{nullValue:"NULL_VALUE"};if(typeof a=="number")return toNumber(et.serializer,a);if(typeof a=="boolean")return{booleanValue:a};if(typeof a=="string")return{stringValue:a};if(a instanceof Date){const tt=Timestamp.fromDate(a);return{timestampValue:toTimestamp(et.serializer,tt)}}if(a instanceof Timestamp){const tt=new Timestamp(a.seconds,1e3*Math.floor(a.nanoseconds/1e3));return{timestampValue:toTimestamp(et.serializer,tt)}}if(a instanceof GeoPoint)return{geoPointValue:{latitude:a.latitude,longitude:a.longitude}};if(a instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(et.serializer,a._byteString)};if(a instanceof DocumentReference){const tt=et.databaseId,ot=a.firestore._databaseId;if(!ot.isEqual(tt))throw et.pu(`Document reference is for database ${ot.projectId}/${ot.database} but should be for database ${tt.projectId}/${tt.database}`);return{referenceValue:__PRIVATE_toResourceName(a.firestore._databaseId||et.databaseId,a._key.path)}}throw et.pu(`Unsupported field value: ${__PRIVATE_valueDescription(a)}`)}(o,i)}function __PRIVATE_parseObject(o,i){const s={};return isEmpty(o)?i.path&&i.path.length>0&&i.fieldMask.push(i.path):forEach(o,(a,et)=>{const tt=__PRIVATE_parseData(et,i.Ru(a));tt!=null&&(s[a]=tt)}),{mapValue:{fields:s}}}function __PRIVATE_looksLikeJsonObject(o){return!(typeof o!="object"||o===null||o instanceof Array||o instanceof Date||o instanceof Timestamp||o instanceof GeoPoint||o instanceof Bytes||o instanceof DocumentReference||o instanceof FieldValue)}function __PRIVATE_validatePlainObject(o,i,s){if(!__PRIVATE_looksLikeJsonObject(s)||!function(et){return typeof et=="object"&&et!==null&&(Object.getPrototypeOf(et)===Object.prototype||Object.getPrototypeOf(et)===null)}(s)){const a=__PRIVATE_valueDescription(s);throw a==="an object"?i.pu(o+" a custom object"):i.pu(o+" "+a)}}function __PRIVATE_fieldPathFromArgument$1(o,i,s){if((i=getModularInstance(i))instanceof FieldPath)return i._internalPath;if(typeof i=="string")return __PRIVATE_fieldPathFromDotSeparatedString(o,i);throw __PRIVATE_createError("Field path arguments must be of type string or ",o,!1,void 0,s)}const pe=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(o,i,s){if(i.search(pe)>=0)throw __PRIVATE_createError(`Invalid field path (${i}). Paths must not contain '~', '*', '/', '[', or ']'`,o,!1,void 0,s);try{return new FieldPath(...i.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${i}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,o,!1,void 0,s)}}function __PRIVATE_createError(o,i,s,a,et){const tt=a&&!a.isEmpty(),ot=et!==void 0;let dt=`Function ${i}() called with invalid data`;s&&(dt+=" (via `toFirestore()`)"),dt+=". ";let ht="";return(tt||ot)&&(ht+=" (found",tt&&(ht+=` in field ${a}`),ot&&(ht+=` in document ${et}`),ht+=")"),new FirestoreError(D.INVALID_ARGUMENT,dt+o+ht)}function __PRIVATE_fieldMaskContains(o,i){return o.some(s=>s.isEqual(i))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(i,s,a,et,tt){this._firestore=i,this._userDataWriter=s,this._key=a,this._document=et,this._converter=tt}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const i=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(i)}return this._userDataWriter.convertValue(this._document.data.value)}}get(i){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",i));if(s!==null)return this._userDataWriter.convertValue(s)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(o,i){return typeof i=="string"?__PRIVATE_fieldPathFromDotSeparatedString(o,i):i instanceof FieldPath?i._internalPath:i._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(o){if(o.limitType==="L"&&o.explicitOrderBy.length===0)throw new FirestoreError(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AbstractUserDataWriter{convertValue(i,s="none"){switch(__PRIVATE_typeOrder(i)){case 0:return null;case 1:return i.booleanValue;case 2:return __PRIVATE_normalizeNumber(i.integerValue||i.doubleValue);case 3:return this.convertTimestamp(i.timestampValue);case 4:return this.convertServerTimestamp(i,s);case 5:return i.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(i.bytesValue));case 7:return this.convertReference(i.referenceValue);case 8:return this.convertGeoPoint(i.geoPointValue);case 9:return this.convertArray(i.arrayValue,s);case 10:return this.convertObject(i.mapValue,s);default:throw fail()}}convertObject(i,s){return this.convertObjectMap(i.fields,s)}convertObjectMap(i,s="none"){const a={};return forEach(i,(et,tt)=>{a[et]=this.convertValue(tt,s)}),a}convertGeoPoint(i){return new GeoPoint(__PRIVATE_normalizeNumber(i.latitude),__PRIVATE_normalizeNumber(i.longitude))}convertArray(i,s){return(i.values||[]).map(a=>this.convertValue(a,s))}convertServerTimestamp(i,s){switch(s){case"previous":const a=__PRIVATE_getPreviousValue(i);return a==null?null:this.convertValue(a,s);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(i));default:return null}}convertTimestamp(i){const s=__PRIVATE_normalizeTimestamp(i);return new Timestamp(s.seconds,s.nanos)}convertDocumentKey(i,s){const a=ResourcePath.fromString(i);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(a));const et=new DatabaseId(a.get(1),a.get(3)),tt=new DocumentKey(a.popFirst(5));return et.isEqual(s)||__PRIVATE_logError(`Document ${tt} contains a document reference within a different database (${et.projectId}/${et.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),tt}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(o,i,s){let a;return a=o?s&&(s.merge||s.mergeFields)?o.toFirestore(i,s):o.toFirestore(i):i,a}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(i,s){this.hasPendingWrites=i,this.fromCache=s}isEqual(i){return this.hasPendingWrites===i.hasPendingWrites&&this.fromCache===i.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(i,s,a,et,tt,ot){super(i,s,a,et,ot),this._firestore=i,this._firestoreImpl=i,this.metadata=tt}exists(){return super.exists()}data(i={}){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,i)}return this._userDataWriter.convertValue(this._document.data.value,i.serverTimestamps)}}get(i,s={}){if(this._document){const a=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",i));if(a!==null)return this._userDataWriter.convertValue(a,s.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(i={}){return super.data(i)}}class QuerySnapshot{constructor(i,s,a,et){this._firestore=i,this._userDataWriter=s,this._snapshot=et,this.metadata=new SnapshotMetadata(et.hasPendingWrites,et.fromCache),this.query=a}get docs(){const i=[];return this.forEach(s=>i.push(s)),i}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(i,s){this._snapshot.docs.forEach(a=>{i.call(s,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,a.key,a,new SnapshotMetadata(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(i={}){const s=!!i.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(et,tt){if(et._snapshot.oldDocs.isEmpty()){let ot=0;return et._snapshot.docChanges.map(dt=>{const ht=new QueryDocumentSnapshot(et._firestore,et._userDataWriter,dt.doc.key,dt.doc,new SnapshotMetadata(et._snapshot.mutatedKeys.has(dt.doc.key),et._snapshot.fromCache),et.query.converter);return dt.doc,{type:"added",doc:ht,oldIndex:-1,newIndex:ot++}})}{let ot=et._snapshot.oldDocs;return et._snapshot.docChanges.filter(dt=>tt||dt.type!==3).map(dt=>{const ht=new QueryDocumentSnapshot(et._firestore,et._userDataWriter,dt.doc.key,dt.doc,new SnapshotMetadata(et._snapshot.mutatedKeys.has(dt.doc.key),et._snapshot.fromCache),et.query.converter);let ft=-1,pt=-1;return dt.type!==0&&(ft=ot.indexOf(dt.doc.key),ot=ot.delete(dt.doc.key)),dt.type!==1&&(ot=ot.add(dt.doc),pt=ot.indexOf(dt.doc.key)),{type:__PRIVATE_resultChangeType(dt.type),doc:ht,oldIndex:ft,newIndex:pt}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function __PRIVATE_resultChangeType(o){switch(o){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getDoc(o){o=__PRIVATE_cast(o,DocumentReference);const i=__PRIVATE_cast(o.firestore,Firestore);return __PRIVATE_firestoreClientGetDocumentViaSnapshotListener(ensureFirestoreConfigured(i),o._key).then(s=>__PRIVATE_convertToDocSnapshot(i,o,s))}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(i){super(),this.firestore=i}convertBytes(i){return new Bytes(i)}convertReference(i){const s=this.convertDocumentKey(i,this.firestore._databaseId);return new DocumentReference(this.firestore,null,s)}}function getDocs(o){o=__PRIVATE_cast(o,Query);const i=__PRIVATE_cast(o.firestore,Firestore),s=ensureFirestoreConfigured(i),a=new __PRIVATE_ExpUserDataWriter(i);return __PRIVATE_validateHasExplicitOrderByForLimitToLast(o._query),__PRIVATE_firestoreClientGetDocumentsViaSnapshotListener(s,o._query).then(et=>new QuerySnapshot(i,a,o,et))}function updateDoc(o,i,s,...a){o=__PRIVATE_cast(o,DocumentReference);const et=__PRIVATE_cast(o.firestore,Firestore),tt=__PRIVATE_newUserDataReader(et);let ot;return ot=typeof(i=getModularInstance(i))=="string"||i instanceof FieldPath?__PRIVATE_parseUpdateVarargs(tt,"updateDoc",o._key,i,s,a):__PRIVATE_parseUpdateData(tt,"updateDoc",o._key,i),executeWrite(et,[ot.toMutation(o._key,Precondition.exists(!0))])}function addDoc(o,i){const s=__PRIVATE_cast(o.firestore,Firestore),a=doc(o),et=__PRIVATE_applyFirestoreDataConverter(o.converter,i);return executeWrite(s,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(o.firestore),"addDoc",a._key,et,o.converter!==null,{}).toMutation(a._key,Precondition.exists(!1))]).then(()=>a)}function executeWrite(o,i){return function(a,et){const tt=new __PRIVATE_Deferred;return a.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(a),et,tt)),tt.promise}(ensureFirestoreConfigured(o),i)}function __PRIVATE_convertToDocSnapshot(o,i,s){const a=s.docs.get(i._key),et=new __PRIVATE_ExpUserDataWriter(o);return new DocumentSnapshot(o,et,i._key,a,new SnapshotMetadata(s.hasPendingWrites,s.fromCache),i.converter)}(function(i,s=!0){(function(et){S=et})(SDK_VERSION$1),_registerComponent(new Component("firestore",(a,{instanceIdentifier:et,options:tt})=>{const ot=a.getProvider("app").getImmediate(),dt=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(a.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(a.getProvider("app-check-internal")),function(ft,pt){if(!Object.prototype.hasOwnProperty.apply(ft.options,["projectId"]))throw new FirestoreError(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(ft.options.projectId,pt)}(ot,et),ot);return tt=Object.assign({useFetchStreams:s},tt),dt._setSettings(tt),dt},"PUBLIC").setMultipleInstances(!0)),registerVersion(w$1,"4.4.1",i),registerVersion(w$1,"4.4.1","esm2017")})();var define_process_env_default={};const name="@firebase/database",version$2="1.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let SDK_VERSION="";function setSDKVersion(o){SDK_VERSION=o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DOMStorageWrapper{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,s){s==null?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),stringify(s))}get(i){const s=this.domStorage_.getItem(this.prefixedName_(i));return s==null?null:jsonEval(s)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MemoryStorage{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,s){s==null?delete this.cache_[i]:this.cache_[i]=s}get(i){return contains$1(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const createStoragefor=function(o){try{if(typeof window<"u"&&typeof window[o]<"u"){const i=window[o];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new DOMStorageWrapper(i)}}catch{}return new MemoryStorage},PersistentStorage=createStoragefor("localStorage"),SessionStorage=createStoragefor("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logClient=new Logger("@firebase/database"),LUIDGenerator=function(){let o=1;return function(){return o++}}(),sha1=function(o){const i=stringToByteArray(o),s=new Sha1;s.update(i);const a=s.digest();return base64.encodeByteArray(a)},buildLogMessage_=function(...o){let i="";for(let s=0;s<o.length;s++){const a=o[s];Array.isArray(a)||a&&typeof a=="object"&&typeof a.length=="number"?i+=buildLogMessage_.apply(null,a):typeof a=="object"?i+=stringify(a):i+=a,i+=" "}return i};let logger=null,firstLog_=!0;const enableLogging$1=function(o,i){assert(!i||o===!0||o===!1,"Can't turn on custom loggers persistently."),o===!0?(logClient.logLevel=LogLevel.VERBOSE,logger=logClient.log.bind(logClient),i&&SessionStorage.set("logging_enabled",!0)):typeof o=="function"?logger=o:(logger=null,SessionStorage.remove("logging_enabled"))},log$1=function(...o){if(firstLog_===!0&&(firstLog_=!1,logger===null&&SessionStorage.get("logging_enabled")===!0&&enableLogging$1(!0)),logger){const i=buildLogMessage_.apply(null,o);logger(i)}},logWrapper=function(o){return function(...i){log$1(o,...i)}},error=function(...o){const i="FIREBASE INTERNAL ERROR: "+buildLogMessage_(...o);logClient.error(i)},fatal=function(...o){const i=`FIREBASE FATAL ERROR: ${buildLogMessage_(...o)}`;throw logClient.error(i),new Error(i)},warn=function(...o){const i="FIREBASE WARNING: "+buildLogMessage_(...o);logClient.warn(i)},warnIfPageIsSecure=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&warn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},isInvalidJSONNumber=function(o){return typeof o=="number"&&(o!==o||o===Number.POSITIVE_INFINITY||o===Number.NEGATIVE_INFINITY)},executeWhenDOMReady=function(o){if(document.readyState==="complete")o();else{let i=!1;const s=function(){if(!document.body){setTimeout(s,Math.floor(10));return}i||(i=!0,o())};document.addEventListener?(document.addEventListener("DOMContentLoaded",s,!1),window.addEventListener("load",s,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&s()}),window.attachEvent("onload",s))}},MIN_NAME="[MIN_NAME]",MAX_NAME="[MAX_NAME]",nameCompare=function(o,i){if(o===i)return 0;if(o===MIN_NAME||i===MAX_NAME)return-1;if(i===MIN_NAME||o===MAX_NAME)return 1;{const s=tryParseInt(o),a=tryParseInt(i);return s!==null?a!==null?s-a===0?o.length-i.length:s-a:-1:a!==null?1:o<i?-1:1}},stringCompare=function(o,i){return o===i?0:o<i?-1:1},requireKey=function(o,i){if(i&&o in i)return i[o];throw new Error("Missing required key ("+o+") in object: "+stringify(i))},ObjectToUniqueKey=function(o){if(typeof o!="object"||o===null)return stringify(o);const i=[];for(const a in o)i.push(a);i.sort();let s="{";for(let a=0;a<i.length;a++)a!==0&&(s+=","),s+=stringify(i[a]),s+=":",s+=ObjectToUniqueKey(o[i[a]]);return s+="}",s},splitStringBySize=function(o,i){const s=o.length;if(s<=i)return[o];const a=[];for(let et=0;et<s;et+=i)et+i>s?a.push(o.substring(et,s)):a.push(o.substring(et,et+i));return a};function each(o,i){for(const s in o)o.hasOwnProperty(s)&&i(s,o[s])}const doubleToIEEE754String=function(o){assert(!isInvalidJSONNumber(o),"Invalid JSON number");const i=11,s=52,a=(1<<i-1)-1;let et,tt,ot,dt,ht;o===0?(tt=0,ot=0,et=1/o===-1/0?1:0):(et=o<0,o=Math.abs(o),o>=Math.pow(2,1-a)?(dt=Math.min(Math.floor(Math.log(o)/Math.LN2),a),tt=dt+a,ot=Math.round(o*Math.pow(2,s-dt)-Math.pow(2,s))):(tt=0,ot=Math.round(o/Math.pow(2,1-a-s))));const ft=[];for(ht=s;ht;ht-=1)ft.push(ot%2?1:0),ot=Math.floor(ot/2);for(ht=i;ht;ht-=1)ft.push(tt%2?1:0),tt=Math.floor(tt/2);ft.push(et?1:0),ft.reverse();const pt=ft.join("");let mt="";for(ht=0;ht<64;ht+=8){let gt=parseInt(pt.substr(ht,8),2).toString(16);gt.length===1&&(gt="0"+gt),mt=mt+gt}return mt.toLowerCase()},isChromeExtensionContentScript=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},isWindowsStoreApp=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"},INTEGER_REGEXP_=new RegExp("^-?(0*)\\d{1,10}$"),INTEGER_32_MIN=-2147483648,INTEGER_32_MAX=2147483647,tryParseInt=function(o){if(INTEGER_REGEXP_.test(o)){const i=Number(o);if(i>=INTEGER_32_MIN&&i<=INTEGER_32_MAX)return i}return null},exceptionGuard=function(o){try{o()}catch(i){setTimeout(()=>{const s=i.stack||"";throw warn("Exception was thrown by user callback.",s),i},Math.floor(0))}},beingCrawled=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},setTimeoutNonBlocking=function(o,i){const s=setTimeout(o,i);return typeof s=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(s):typeof s=="object"&&s.unref&&s.unref(),s};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AppCheckTokenProvider{constructor(i,s){this.appName_=i,this.appCheckProvider=s,this.appCheck=s==null?void 0:s.getImmediate({optional:!0}),this.appCheck||s==null||s.get().then(a=>this.appCheck=a)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((s,a)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(s,a):s(null)},0)})}addTokenChangeListener(i){var s;(s=this.appCheckProvider)===null||s===void 0||s.get().then(a=>a.addTokenListener(i))}notifyForInvalidToken(){warn(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAuthTokenProvider{constructor(i,s,a){this.appName_=i,this.firebaseOptions_=s,this.authProvider_=a,this.auth_=null,this.auth_=a.getImmediate({optional:!0}),this.auth_||a.onInit(et=>this.auth_=et)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(s=>s&&s.code==="auth/token-not-initialized"?(log$1("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(s)):new Promise((s,a)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(s,a):s(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(s=>s.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(s=>s.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?i+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?i+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':i+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',warn(i)}}class EmulatorTokenProvider{constructor(i){this.accessToken=i}getToken(i){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(i){i(this.accessToken)}removeTokenChangeListener(i){}notifyForInvalidToken(){}}EmulatorTokenProvider.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PROTOCOL_VERSION="5",VERSION_PARAM="v",TRANSPORT_SESSION_PARAM="s",REFERER_PARAM="r",FORGE_REF="f",FORGE_DOMAIN_RE=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LAST_SESSION_PARAM="ls",APPLICATION_ID_PARAM="p",APP_CHECK_TOKEN_PARAM="ac",WEBSOCKET="websocket",LONG_POLLING="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RepoInfo{constructor(i,s,a,et,tt=!1,ot="",dt=!1,ht=!1){this.secure=s,this.namespace=a,this.webSocketOnly=et,this.nodeAdmin=tt,this.persistenceKey=ot,this.includeNamespaceInQueryParams=dt,this.isUsingEmulator=ht,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=PersistentStorage.get("host:"+i)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&PersistentStorage.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){const i=this.secure?"https://":"http://",s=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${i}${this.host}/${s}`}}function repoInfoNeedsQueryParam(o){return o.host!==o.internalHost||o.isCustomHost()||o.includeNamespaceInQueryParams}function repoInfoConnectionURL(o,i,s){assert(typeof i=="string","typeof type must == string"),assert(typeof s=="object","typeof params must == object");let a;if(i===WEBSOCKET)a=(o.secure?"wss://":"ws://")+o.internalHost+"/.ws?";else if(i===LONG_POLLING)a=(o.secure?"https://":"http://")+o.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+i);repoInfoNeedsQueryParam(o)&&(s.ns=o.namespace);const et=[];return each(s,(tt,ot)=>{et.push(tt+"="+ot)}),a+et.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsCollection{constructor(){this.counters_={}}incrementCounter(i,s=1){contains$1(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=s}get(){return deepCopy(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const collections={},reporters={};function statsManagerGetCollection(o){const i=o.toString();return collections[i]||(collections[i]=new StatsCollection),collections[i]}function statsManagerGetOrCreateReporter(o,i){const s=o.toString();return reporters[s]||(reporters[s]=i()),reporters[s]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PacketReceiver{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,s){this.closeAfterResponse=i,this.onClose=s,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,s){for(this.pendingResponses[i]=s;this.pendingResponses[this.currentResponseNum];){const a=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let et=0;et<a.length;++et)a[et]&&exceptionGuard(()=>{this.onMessage_(a[et])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_LONGPOLL_START_PARAM="start",FIREBASE_LONGPOLL_CLOSE_COMMAND="close",FIREBASE_LONGPOLL_COMMAND_CB_NAME="pLPCommand",FIREBASE_LONGPOLL_DATA_CB_NAME="pRTLPCB",FIREBASE_LONGPOLL_ID_PARAM="id",FIREBASE_LONGPOLL_PW_PARAM="pw",FIREBASE_LONGPOLL_SERIAL_PARAM="ser",FIREBASE_LONGPOLL_CALLBACK_ID_PARAM="cb",FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM="seg",FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET="ts",FIREBASE_LONGPOLL_DATA_PARAM="d",FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM="dframe",MAX_URL_DATA_SIZE=1870,SEG_HEADER_SIZE=30,MAX_PAYLOAD_SIZE=MAX_URL_DATA_SIZE-SEG_HEADER_SIZE,KEEPALIVE_REQUEST_INTERVAL=25e3,LP_CONNECT_TIMEOUT=3e4;class BrowserPollConnection{constructor(i,s,a,et,tt,ot,dt){this.connId=i,this.repoInfo=s,this.applicationId=a,this.appCheckToken=et,this.authToken=tt,this.transportSessionId=ot,this.lastSessionId=dt,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=logWrapper(i),this.stats_=statsManagerGetCollection(s),this.urlFn=ht=>(this.appCheckToken&&(ht[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),repoInfoConnectionURL(s,LONG_POLLING,ht))}open(i,s){this.curSegmentNum=0,this.onDisconnect_=s,this.myPacketOrderer=new PacketReceiver(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(LP_CONNECT_TIMEOUT)),executeWhenDOMReady(()=>{if(this.isClosed_)return;this.scriptTagHolder=new FirebaseIFrameScriptHolder((...tt)=>{const[ot,dt,ht,ft,pt]=tt;if(this.incrementIncomingBytes_(tt),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,ot===FIREBASE_LONGPOLL_START_PARAM)this.id=dt,this.password=ht;else if(ot===FIREBASE_LONGPOLL_CLOSE_COMMAND)dt?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(dt,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+ot)},(...tt)=>{const[ot,dt]=tt;this.incrementIncomingBytes_(tt),this.myPacketOrderer.handleResponse(ot,dt)},()=>{this.onClosed_()},this.urlFn);const a={};a[FIREBASE_LONGPOLL_START_PARAM]="t",a[FIREBASE_LONGPOLL_SERIAL_PARAM]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(a[FIREBASE_LONGPOLL_CALLBACK_ID_PARAM]=this.scriptTagHolder.uniqueCallbackIdentifier),a[VERSION_PARAM]=PROTOCOL_VERSION,this.transportSessionId&&(a[TRANSPORT_SESSION_PARAM]=this.transportSessionId),this.lastSessionId&&(a[LAST_SESSION_PARAM]=this.lastSessionId),this.applicationId&&(a[APPLICATION_ID_PARAM]=this.applicationId),this.appCheckToken&&(a[APP_CHECK_TOKEN_PARAM]=this.appCheckToken),typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(a[REFERER_PARAM]=FORGE_REF);const et=this.urlFn(a);this.log_("Connecting via long-poll to "+et),this.scriptTagHolder.addTag(et,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){BrowserPollConnection.forceAllow_=!0}static forceDisallow(){BrowserPollConnection.forceDisallow_=!0}static isAvailable(){return BrowserPollConnection.forceAllow_?!0:!BrowserPollConnection.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!isChromeExtensionContentScript()&&!isWindowsStoreApp()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const s=stringify(i);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const a=base64Encode(s),et=splitStringBySize(a,MAX_PAYLOAD_SIZE);for(let tt=0;tt<et.length;tt++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,et.length,et[tt]),this.curSegmentNum++}addDisconnectPingFrame(i,s){this.myDisconnFrame=document.createElement("iframe");const a={};a[FIREBASE_LONGPOLL_DISCONN_FRAME_REQUEST_PARAM]="t",a[FIREBASE_LONGPOLL_ID_PARAM]=i,a[FIREBASE_LONGPOLL_PW_PARAM]=s,this.myDisconnFrame.src=this.urlFn(a),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const s=stringify(i).length;this.bytesReceived+=s,this.stats_.incrementCounter("bytes_received",s)}}class FirebaseIFrameScriptHolder{constructor(i,s,a,et){this.onDisconnect=a,this.urlFn=et,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=LUIDGenerator(),window[FIREBASE_LONGPOLL_COMMAND_CB_NAME+this.uniqueCallbackIdentifier]=i,window[FIREBASE_LONGPOLL_DATA_CB_NAME+this.uniqueCallbackIdentifier]=s,this.myIFrame=FirebaseIFrameScriptHolder.createIFrame_();let tt="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(tt='<script>document.domain="'+document.domain+'";<\/script>');const ot="<html><body>"+tt+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(ot),this.myIFrame.doc.close()}catch(dt){log$1("frame writing exception"),dt.stack&&log$1(dt.stack),log$1(dt)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",document.body){document.body.appendChild(i);try{i.contentWindow.document||log$1("No IE domain setting required")}catch{const a=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+a+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,s){for(this.myID=i,this.myPW=s,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i[FIREBASE_LONGPOLL_ID_PARAM]=this.myID,i[FIREBASE_LONGPOLL_PW_PARAM]=this.myPW,i[FIREBASE_LONGPOLL_SERIAL_PARAM]=this.currentSerial;let s=this.urlFn(i),a="",et=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+SEG_HEADER_SIZE+a.length<=MAX_URL_DATA_SIZE;){const ot=this.pendingSegs.shift();a=a+"&"+FIREBASE_LONGPOLL_SEGMENT_NUM_PARAM+et+"="+ot.seg+"&"+FIREBASE_LONGPOLL_SEGMENTS_IN_PACKET+et+"="+ot.ts+"&"+FIREBASE_LONGPOLL_DATA_PARAM+et+"="+ot.d,et++}return s=s+a,this.addLongPollTag_(s,this.currentSerial),!0}else return!1}enqueueSegment(i,s,a){this.pendingSegs.push({seg:i,ts:s,d:a}),this.alive&&this.newRequest_()}addLongPollTag_(i,s){this.outstandingRequests.add(s);const a=()=>{this.outstandingRequests.delete(s),this.newRequest_()},et=setTimeout(a,Math.floor(KEEPALIVE_REQUEST_INTERVAL)),tt=()=>{clearTimeout(et),a()};this.addTag(i,tt)}addTag(i,s){setTimeout(()=>{try{if(!this.sendNewPolls)return;const a=this.myIFrame.doc.createElement("script");a.type="text/javascript",a.async=!0,a.src=i,a.onload=a.onreadystatechange=function(){const et=a.readyState;(!et||et==="loaded"||et==="complete")&&(a.onload=a.onreadystatechange=null,a.parentNode&&a.parentNode.removeChild(a),s())},a.onerror=()=>{log$1("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(a)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WEBSOCKET_MAX_FRAME_SIZE=16384,WEBSOCKET_KEEPALIVE_INTERVAL=45e3;let WebSocketImpl=null;typeof MozWebSocket<"u"?WebSocketImpl=MozWebSocket:typeof WebSocket<"u"&&(WebSocketImpl=WebSocket);class WebSocketConnection{constructor(i,s,a,et,tt,ot,dt){this.connId=i,this.applicationId=a,this.appCheckToken=et,this.authToken=tt,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=logWrapper(this.connId),this.stats_=statsManagerGetCollection(s),this.connURL=WebSocketConnection.connectionURL_(s,ot,dt,et,a),this.nodeAdmin=s.nodeAdmin}static connectionURL_(i,s,a,et,tt){const ot={};return ot[VERSION_PARAM]=PROTOCOL_VERSION,typeof location<"u"&&location.hostname&&FORGE_DOMAIN_RE.test(location.hostname)&&(ot[REFERER_PARAM]=FORGE_REF),s&&(ot[TRANSPORT_SESSION_PARAM]=s),a&&(ot[LAST_SESSION_PARAM]=a),et&&(ot[APP_CHECK_TOKEN_PARAM]=et),tt&&(ot[APPLICATION_ID_PARAM]=tt),repoInfoConnectionURL(i,WEBSOCKET,ot)}open(i,s){this.onDisconnect=s,this.onMessage=i,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,PersistentStorage.set("previous_websocket_failure",!0);try{let a;isNodeSdk(),this.mySock=new WebSocketImpl(this.connURL,[],a)}catch(a){this.log_("Error instantiating WebSocket.");const et=a.message||a.data;et&&this.log_(et),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=a=>{this.handleIncomingFrame(a)},this.mySock.onerror=a=>{this.log_("WebSocket error.  Closing connection.");const et=a.message||a.data;et&&this.log_(et),this.onClosed_()}}start(){}static forceDisallow(){WebSocketConnection.forceDisallow_=!0}static isAvailable(){let i=!1;if(typeof navigator<"u"&&navigator.userAgent){const s=/Android ([0-9]{0,}\.[0-9]{0,})/,a=navigator.userAgent.match(s);a&&a.length>1&&parseFloat(a[1])<4.4&&(i=!0)}return!i&&WebSocketImpl!==null&&!WebSocketConnection.forceDisallow_}static previouslyFailed(){return PersistentStorage.isInMemoryStorage||PersistentStorage.get("previous_websocket_failure")===!0}markConnectionHealthy(){PersistentStorage.remove("previous_websocket_failure")}appendFrame_(i){if(this.frames.push(i),this.frames.length===this.totalFrames){const s=this.frames.join("");this.frames=null;const a=jsonEval(s);this.onMessage(a)}}handleNewFrameCount_(i){this.totalFrames=i,this.frames=[]}extractFrameCount_(i){if(assert(this.frames===null,"We already have a frame buffer"),i.length<=6){const s=Number(i);if(!isNaN(s))return this.handleNewFrameCount_(s),null}return this.handleNewFrameCount_(1),i}handleIncomingFrame(i){if(this.mySock===null)return;const s=i.data;if(this.bytesReceived+=s.length,this.stats_.incrementCounter("bytes_received",s.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(s);else{const a=this.extractFrameCount_(s);a!==null&&this.appendFrame_(a)}}send(i){this.resetKeepAlive();const s=stringify(i);this.bytesSent+=s.length,this.stats_.incrementCounter("bytes_sent",s.length);const a=splitStringBySize(s,WEBSOCKET_MAX_FRAME_SIZE);a.length>1&&this.sendString_(String(a.length));for(let et=0;et<a.length;et++)this.sendString_(a[et])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(WEBSOCKET_KEEPALIVE_INTERVAL))}sendString_(i){try{this.mySock.send(i)}catch(s){this.log_("Exception thrown from WebSocket.send():",s.message||s.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}WebSocketConnection.responsesRequiredToBeHealthy=2;WebSocketConnection.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransportManager{constructor(i){this.initTransports_(i)}static get ALL_TRANSPORTS(){return[BrowserPollConnection,WebSocketConnection]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(i){const s=WebSocketConnection&&WebSocketConnection.isAvailable();let a=s&&!WebSocketConnection.previouslyFailed();if(i.webSocketOnly&&(s||warn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),a=!0),a)this.transports_=[WebSocketConnection];else{const et=this.transports_=[];for(const tt of TransportManager.ALL_TRANSPORTS)tt&&tt.isAvailable()&&et.push(tt);TransportManager.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}TransportManager.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UPGRADE_TIMEOUT=6e4,DELAY_BEFORE_SENDING_EXTRA_REQUESTS=5e3,BYTES_SENT_HEALTHY_OVERRIDE=10*1024,BYTES_RECEIVED_HEALTHY_OVERRIDE=100*1024,MESSAGE_TYPE="t",MESSAGE_DATA="d",CONTROL_SHUTDOWN="s",CONTROL_RESET="r",CONTROL_ERROR="e",CONTROL_PONG="o",SWITCH_ACK="a",END_TRANSMISSION="n",PING="p",SERVER_HELLO="h";class Connection{constructor(i,s,a,et,tt,ot,dt,ht,ft,pt){this.id=i,this.repoInfo_=s,this.applicationId_=a,this.appCheckToken_=et,this.authToken_=tt,this.onMessage_=ot,this.onReady_=dt,this.onDisconnect_=ht,this.onKill_=ft,this.lastSessionId=pt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=logWrapper("c:"+this.id+":"),this.transportManager_=new TransportManager(s),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.conn_),a=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(s,a)},Math.floor(0));const et=i.healthyTimeout||0;et>0&&(this.healthyTimeout_=setTimeoutNonBlocking(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>BYTES_RECEIVED_HEALTHY_OVERRIDE?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>BYTES_SENT_HEALTHY_OVERRIDE?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(et)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return s=>{i===this.conn_?this.onConnectionLost_(s):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return s=>{this.state_!==2&&(i===this.rx_?this.onPrimaryMessageReceived_(s):i===this.secondaryConn_?this.onSecondaryMessageReceived_(s):this.log_("message on old connection"))}}sendRequest(i){const s={t:"d",d:i};this.sendData_(s)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if(MESSAGE_TYPE in i){const s=i[MESSAGE_TYPE];s===SWITCH_ACK?this.upgradeIfSecondaryHealthy_():s===CONTROL_RESET?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):s===CONTROL_PONG&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const s=requireKey("t",i),a=requireKey("d",i);if(s==="c")this.onSecondaryControl_(a);else if(s==="d")this.pendingDataMessages.push(a);else throw new Error("Unknown protocol layer: "+s)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:PING,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:SWITCH_ACK,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:END_TRANSMISSION,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const s=requireKey("t",i),a=requireKey("d",i);s==="c"?this.onControl_(a):s==="d"&&this.onDataMessage_(a)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const s=requireKey(MESSAGE_TYPE,i);if(MESSAGE_DATA in i){const a=i[MESSAGE_DATA];if(s===SERVER_HELLO){const et=Object.assign({},a);this.repoInfo_.isUsingEmulator&&(et.h=this.repoInfo_.host),this.onHandshake_(et)}else if(s===END_TRANSMISSION){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let et=0;et<this.pendingDataMessages.length;++et)this.onDataMessage_(this.pendingDataMessages[et]);this.pendingDataMessages=[],this.tryCleanupConnection()}else s===CONTROL_SHUTDOWN?this.onConnectionShutdown_(a):s===CONTROL_RESET?this.onReset_(a):s===CONTROL_ERROR?error("Server Error: "+a):s===CONTROL_PONG?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):error("Unknown control packet command: "+s)}}onHandshake_(i){const s=i.ts,a=i.v,et=i.h;this.sessionId=i.s,this.repoInfo_.host=et,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,s),PROTOCOL_VERSION!==a&&warn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const s=this.connReceiver_(this.secondaryConn_),a=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(s,a),setTimeoutNonBlocking(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(UPGRADE_TIMEOUT))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,s){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(s,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):setTimeoutNonBlocking(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(DELAY_BEFORE_SENDING_EXTRA_REQUESTS))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:PING,d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,!i&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(PersistentStorage.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(i)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ServerActions{put(i,s,a,et){}merge(i,s,a,et){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,s,a){}onDisconnectMerge(i,s,a){}onDisconnectCancel(i,s){}reportStats(i){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventEmitter{constructor(i){this.allowedEvents_=i,this.listeners_={},assert(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...s){if(Array.isArray(this.listeners_[i])){const a=[...this.listeners_[i]];for(let et=0;et<a.length;et++)a[et].callback.apply(a[et].context,s)}}on(i,s,a){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:s,context:a});const et=this.getInitialEvent(i);et&&s.apply(a,et)}off(i,s,a){this.validateEventType_(i);const et=this.listeners_[i]||[];for(let tt=0;tt<et.length;tt++)if(et[tt].callback===s&&(!a||a===et[tt].context)){et.splice(tt,1);return}}validateEventType_(i){assert(this.allowedEvents_.find(s=>s===i),"Unknown event: "+i)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OnlineMonitor extends EventEmitter{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!isMobileCordova()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new OnlineMonitor}getInitialEvent(i){return assert(i==="online","Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_PATH_DEPTH=32,MAX_PATH_LENGTH_BYTES=768;class Path{constructor(i,s){if(s===void 0){this.pieces_=i.split("/");let a=0;for(let et=0;et<this.pieces_.length;et++)this.pieces_[et].length>0&&(this.pieces_[a]=this.pieces_[et],a++);this.pieces_.length=a,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=s}toString(){let i="";for(let s=this.pieceNum_;s<this.pieces_.length;s++)this.pieces_[s]!==""&&(i+="/"+this.pieces_[s]);return i||"/"}}function newEmptyPath(){return new Path("")}function pathGetFront(o){return o.pieceNum_>=o.pieces_.length?null:o.pieces_[o.pieceNum_]}function pathGetLength(o){return o.pieces_.length-o.pieceNum_}function pathPopFront(o){let i=o.pieceNum_;return i<o.pieces_.length&&i++,new Path(o.pieces_,i)}function pathGetBack(o){return o.pieceNum_<o.pieces_.length?o.pieces_[o.pieces_.length-1]:null}function pathToUrlEncodedString(o){let i="";for(let s=o.pieceNum_;s<o.pieces_.length;s++)o.pieces_[s]!==""&&(i+="/"+encodeURIComponent(String(o.pieces_[s])));return i||"/"}function pathSlice(o,i=0){return o.pieces_.slice(o.pieceNum_+i)}function pathParent(o){if(o.pieceNum_>=o.pieces_.length)return null;const i=[];for(let s=o.pieceNum_;s<o.pieces_.length-1;s++)i.push(o.pieces_[s]);return new Path(i,0)}function pathChild(o,i){const s=[];for(let a=o.pieceNum_;a<o.pieces_.length;a++)s.push(o.pieces_[a]);if(i instanceof Path)for(let a=i.pieceNum_;a<i.pieces_.length;a++)s.push(i.pieces_[a]);else{const a=i.split("/");for(let et=0;et<a.length;et++)a[et].length>0&&s.push(a[et])}return new Path(s,0)}function pathIsEmpty(o){return o.pieceNum_>=o.pieces_.length}function newRelativePath(o,i){const s=pathGetFront(o),a=pathGetFront(i);if(s===null)return i;if(s===a)return newRelativePath(pathPopFront(o),pathPopFront(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+o+")")}function pathEquals(o,i){if(pathGetLength(o)!==pathGetLength(i))return!1;for(let s=o.pieceNum_,a=i.pieceNum_;s<=o.pieces_.length;s++,a++)if(o.pieces_[s]!==i.pieces_[a])return!1;return!0}function pathContains(o,i){let s=o.pieceNum_,a=i.pieceNum_;if(pathGetLength(o)>pathGetLength(i))return!1;for(;s<o.pieces_.length;){if(o.pieces_[s]!==i.pieces_[a])return!1;++s,++a}return!0}class ValidationPath{constructor(i,s){this.errorPrefix_=s,this.parts_=pathSlice(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let a=0;a<this.parts_.length;a++)this.byteLength_+=stringLength(this.parts_[a]);validationPathCheckValid(this)}}function validationPathPush(o,i){o.parts_.length>0&&(o.byteLength_+=1),o.parts_.push(i),o.byteLength_+=stringLength(i),validationPathCheckValid(o)}function validationPathPop(o){const i=o.parts_.pop();o.byteLength_-=stringLength(i),o.parts_.length>0&&(o.byteLength_-=1)}function validationPathCheckValid(o){if(o.byteLength_>MAX_PATH_LENGTH_BYTES)throw new Error(o.errorPrefix_+"has a key path longer than "+MAX_PATH_LENGTH_BYTES+" bytes ("+o.byteLength_+").");if(o.parts_.length>MAX_PATH_DEPTH)throw new Error(o.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+MAX_PATH_DEPTH+") or object contains a cycle "+validationPathToErrorString(o))}function validationPathToErrorString(o){return o.parts_.length===0?"":"in property '"+o.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VisibilityMonitor extends EventEmitter{constructor(){super(["visible"]);let i,s;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(s="visibilitychange",i="hidden"):typeof document.mozHidden<"u"?(s="mozvisibilitychange",i="mozHidden"):typeof document.msHidden<"u"?(s="msvisibilitychange",i="msHidden"):typeof document.webkitHidden<"u"&&(s="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,s&&document.addEventListener(s,()=>{const a=!document[i];a!==this.visible_&&(this.visible_=a,this.trigger("visible",a))},!1)}static getInstance(){return new VisibilityMonitor}getInitialEvent(i){return assert(i==="visible","Unknown event type: "+i),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RECONNECT_MIN_DELAY=1e3,RECONNECT_MAX_DELAY_DEFAULT=60*5*1e3,RECONNECT_MAX_DELAY_FOR_ADMINS=30*1e3,RECONNECT_DELAY_MULTIPLIER=1.3,RECONNECT_DELAY_RESET_TIMEOUT=3e4,SERVER_KILL_INTERRUPT_REASON="server_kill",INVALID_TOKEN_THRESHOLD=3;class PersistentConnection extends ServerActions{constructor(i,s,a,et,tt,ot,dt,ht){if(super(),this.repoInfo_=i,this.applicationId_=s,this.onDataUpdate_=a,this.onConnectStatus_=et,this.onServerInfoUpdate_=tt,this.authTokenProvider_=ot,this.appCheckTokenProvider_=dt,this.authOverride_=ht,this.id=PersistentConnection.nextPersistentConnectionId_++,this.log_=logWrapper("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=RECONNECT_MIN_DELAY,this.maxReconnectDelay_=RECONNECT_MAX_DELAY_DEFAULT,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,ht&&!isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");VisibilityMonitor.getInstance().on("visible",this.onVisible_,this),i.host.indexOf("fblocal")===-1&&OnlineMonitor.getInstance().on("online",this.onOnline_,this)}sendRequest(i,s,a){const et=++this.requestNumber_,tt={r:et,a:i,b:s};this.log_(stringify(tt)),assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(tt),a&&(this.requestCBHash_[et]=a)}get(i){this.initConnection_();const s=new Deferred,et={action:"g",request:{p:i._path.toString(),q:i._queryObject},onComplete:ot=>{const dt=ot.d;ot.s==="ok"?s.resolve(dt):s.reject(dt)}};this.outstandingGets_.push(et),this.outstandingGetCount_++;const tt=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(tt),s.promise}listen(i,s,a,et){this.initConnection_();const tt=i._queryIdentifier,ot=i._path.toString();this.log_("Listen called for "+ot+" "+tt),this.listens.has(ot)||this.listens.set(ot,new Map),assert(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"listen() called for non-default but complete query"),assert(!this.listens.get(ot).has(tt),"listen() called twice for same path/queryId.");const dt={onComplete:et,hashFn:s,query:i,tag:a};this.listens.get(ot).set(tt,dt),this.connected_&&this.sendListen_(dt)}sendGet_(i){const s=this.outstandingGets_[i];this.sendRequest("g",s.request,a=>{delete this.outstandingGets_[i],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),s.onComplete&&s.onComplete(a)})}sendListen_(i){const s=i.query,a=s._path.toString(),et=s._queryIdentifier;this.log_("Listen on "+a+" for "+et);const tt={p:a},ot="q";i.tag&&(tt.q=s._queryObject,tt.t=i.tag),tt.h=i.hashFn(),this.sendRequest(ot,tt,dt=>{const ht=dt.d,ft=dt.s;PersistentConnection.warnOnListenWarnings_(ht,s),(this.listens.get(a)&&this.listens.get(a).get(et))===i&&(this.log_("listen response",dt),ft!=="ok"&&this.removeListen_(a,et),i.onComplete&&i.onComplete(ft,ht))})}static warnOnListenWarnings_(i,s){if(i&&typeof i=="object"&&contains$1(i,"w")){const a=safeGet(i,"w");if(Array.isArray(a)&&~a.indexOf("no_index")){const et='".indexOn": "'+s._queryParams.getIndex().toString()+'"',tt=s._path.toString();warn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${et} at ${tt} to your security rules for better performance.`)}}}refreshAuthToken(i){this.authToken_=i,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(i)}reduceReconnectDelayIfAdminCredential_(i){(i&&i.length===40||isAdmin(i))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS)}refreshAppCheckToken(i){this.appCheckToken_=i,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const i=this.authToken_,s=isValidFormat(i)?"auth":"gauth",a={cred:i};this.authOverride_===null?a.noauth=!0:typeof this.authOverride_=="object"&&(a.authvar=this.authOverride_),this.sendRequest(s,a,et=>{const tt=et.s,ot=et.d||"error";this.authToken_===i&&(tt==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(tt,ot))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},i=>{const s=i.s,a=i.d||"error";s==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(s,a)})}unlisten(i,s){const a=i._path.toString(),et=i._queryIdentifier;this.log_("Unlisten called for "+a+" "+et),assert(i._queryParams.isDefault()||!i._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(a,et)&&this.connected_&&this.sendUnlisten_(a,et,i._queryObject,s)}sendUnlisten_(i,s,a,et){this.log_("Unlisten on "+i+" for "+s);const tt={p:i},ot="n";et&&(tt.q=a,tt.t=et),this.sendRequest(ot,tt)}onDisconnectPut(i,s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",i,s,a):this.onDisconnectRequestQueue_.push({pathString:i,action:"o",data:s,onComplete:a})}onDisconnectMerge(i,s,a){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",i,s,a):this.onDisconnectRequestQueue_.push({pathString:i,action:"om",data:s,onComplete:a})}onDisconnectCancel(i,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",i,null,s):this.onDisconnectRequestQueue_.push({pathString:i,action:"oc",data:null,onComplete:s})}sendOnDisconnect_(i,s,a,et){const tt={p:s,d:a};this.log_("onDisconnect "+i,tt),this.sendRequest(i,tt,ot=>{et&&setTimeout(()=>{et(ot.s,ot.d)},Math.floor(0))})}put(i,s,a,et){this.putInternal("p",i,s,a,et)}merge(i,s,a,et){this.putInternal("m",i,s,a,et)}putInternal(i,s,a,et,tt){this.initConnection_();const ot={p:s,d:a};tt!==void 0&&(ot.h=tt),this.outstandingPuts_.push({action:i,request:ot,onComplete:et}),this.outstandingPutCount_++;const dt=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(dt):this.log_("Buffering put: "+s)}sendPut_(i){const s=this.outstandingPuts_[i].action,a=this.outstandingPuts_[i].request,et=this.outstandingPuts_[i].onComplete;this.outstandingPuts_[i].queued=this.connected_,this.sendRequest(s,a,tt=>{this.log_(s+" response",tt),delete this.outstandingPuts_[i],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),et&&et(tt.s,tt.d)})}reportStats(i){if(this.connected_){const s={c:i};this.log_("reportStats",s),this.sendRequest("s",s,a=>{if(a.s!=="ok"){const tt=a.d;this.log_("reportStats","Error sending stats: "+tt)}})}}onDataMessage_(i){if("r"in i){this.log_("from server: "+stringify(i));const s=i.r,a=this.requestCBHash_[s];a&&(delete this.requestCBHash_[s],a(i.b))}else{if("error"in i)throw"A server-side error has occurred: "+i.error;"a"in i&&this.onDataPush_(i.a,i.b)}}onDataPush_(i,s){this.log_("handleServerMessage",i,s),i==="d"?this.onDataUpdate_(s.p,s.d,!1,s.t):i==="m"?this.onDataUpdate_(s.p,s.d,!0,s.t):i==="c"?this.onListenRevoked_(s.p,s.q):i==="ac"?this.onAuthRevoked_(s.s,s.d):i==="apc"?this.onAppCheckRevoked_(s.s,s.d):i==="sd"?this.onSecurityDebugPacket_(s):error("Unrecognized action received from server: "+stringify(i)+`
Are you using the latest client?`)}onReady_(i,s){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(i),this.lastSessionId=s,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(i){assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(i))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(i){i&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)),this.visible_=i}onOnline_(i){i?(this.log_("Browser went online."),this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>RECONNECT_DELAY_RESET_TIMEOUT&&(this.reconnectDelay_=RECONNECT_MIN_DELAY),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const i=new Date().getTime()-this.lastConnectionAttemptTime_;let s=Math.max(0,this.reconnectDelay_-i);s=Math.random()*s,this.log_("Trying to reconnect in "+s+"ms"),this.scheduleConnect_(s),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*RECONNECT_DELAY_MULTIPLIER)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const i=this.onDataMessage_.bind(this),s=this.onReady_.bind(this),a=this.onRealtimeDisconnect_.bind(this),et=this.id+":"+PersistentConnection.nextConnectionId_++,tt=this.lastSessionId;let ot=!1,dt=null;const ht=function(){dt?dt.close():(ot=!0,a())},ft=function(mt){assert(dt,"sendRequest call when we're not connected not allowed."),dt.sendRequest(mt)};this.realtime_={close:ht,sendRequest:ft};const pt=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[mt,gt]=await Promise.all([this.authTokenProvider_.getToken(pt),this.appCheckTokenProvider_.getToken(pt)]);ot?log$1("getToken() completed but was canceled"):(log$1("getToken() completed. Creating connection."),this.authToken_=mt&&mt.accessToken,this.appCheckToken_=gt&&gt.token,dt=new Connection(et,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,i,s,a,_t=>{warn(_t+" ("+this.repoInfo_.toString()+")"),this.interrupt(SERVER_KILL_INTERRUPT_REASON)},tt))}catch(mt){this.log_("Failed to get token: "+mt),ot||(this.repoInfo_.nodeAdmin&&warn(mt),ht())}}}interrupt(i){log$1("Interrupting connection for reason: "+i),this.interruptReasons_[i]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(i){log$1("Resuming connection for reason: "+i),delete this.interruptReasons_[i],isEmpty$1(this.interruptReasons_)&&(this.reconnectDelay_=RECONNECT_MIN_DELAY,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(i){const s=i-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:s})}cancelSentTransactions_(){for(let i=0;i<this.outstandingPuts_.length;i++){const s=this.outstandingPuts_[i];s&&"h"in s.request&&s.queued&&(s.onComplete&&s.onComplete("disconnect"),delete this.outstandingPuts_[i],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(i,s){let a;s?a=s.map(tt=>ObjectToUniqueKey(tt)).join("$"):a="default";const et=this.removeListen_(i,a);et&&et.onComplete&&et.onComplete("permission_denied")}removeListen_(i,s){const a=new Path(i).toString();let et;if(this.listens.has(a)){const tt=this.listens.get(a);et=tt.get(s),tt.delete(s),tt.size===0&&this.listens.delete(a)}else et=void 0;return et}onAuthRevoked_(i,s){log$1("Auth token revoked: "+i+"/"+s),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(i==="invalid_token"||i==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=INVALID_TOKEN_THRESHOLD&&(this.reconnectDelay_=RECONNECT_MAX_DELAY_FOR_ADMINS,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(i,s){log$1("App check token revoked: "+i+"/"+s),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(i==="invalid_token"||i==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=INVALID_TOKEN_THRESHOLD&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(i){this.securityDebugCallback_?this.securityDebugCallback_(i):"msg"in i&&console.log("FIREBASE: "+i.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const i of this.listens.values())for(const s of i.values())this.sendListen_(s);for(let i=0;i<this.outstandingPuts_.length;i++)this.outstandingPuts_[i]&&this.sendPut_(i);for(;this.onDisconnectRequestQueue_.length;){const i=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(i.action,i.pathString,i.data,i.onComplete)}for(let i=0;i<this.outstandingGets_.length;i++)this.outstandingGets_[i]&&this.sendGet_(i)}sendConnectStats_(){const i={};let s="js";i["sdk."+s+"."+SDK_VERSION.replace(/\./g,"-")]=1,isMobileCordova()?i["framework.cordova"]=1:isReactNative()&&(i["framework.reactnative"]=1),this.reportStats(i)}shouldReconnect_(){const i=OnlineMonitor.getInstance().currentlyOnline();return isEmpty$1(this.interruptReasons_)&&i}}PersistentConnection.nextPersistentConnectionId_=0;PersistentConnection.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NamedNode{constructor(i,s){this.name=i,this.node=s}static Wrap(i,s){return new NamedNode(i,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Index{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,s){const a=new NamedNode(MIN_NAME,i),et=new NamedNode(MIN_NAME,s);return this.compare(a,et)!==0}minPost(){return NamedNode.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __EMPTY_NODE;class KeyIndex extends Index{static get __EMPTY_NODE(){return __EMPTY_NODE}static set __EMPTY_NODE(i){__EMPTY_NODE=i}compare(i,s){return nameCompare(i.name,s.name)}isDefinedOn(i){throw assertionError("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,s){return!1}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,__EMPTY_NODE)}makePost(i,s){return assert(typeof i=="string","KeyIndex indexValue must always be a string."),new NamedNode(i,__EMPTY_NODE)}toString(){return".key"}}const KEY_INDEX=new KeyIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMapIterator{constructor(i,s,a,et,tt=null){this.isReverse_=et,this.resultGenerator_=tt,this.nodeStack_=[];let ot=1;for(;!i.isEmpty();)if(i=i,ot=s?a(i.key,s):1,et&&(ot*=-1),ot<0)this.isReverse_?i=i.left:i=i.right;else if(ot===0){this.nodeStack_.push(i);break}else this.nodeStack_.push(i),this.isReverse_?i=i.right:i=i.left}getNext(){if(this.nodeStack_.length===0)return null;let i=this.nodeStack_.pop(),s;if(this.resultGenerator_?s=this.resultGenerator_(i.key,i.value):s={key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return s}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}class LLRBNode{constructor(i,s,a,et,tt){this.key=i,this.value=s,this.color=a??LLRBNode.RED,this.left=et??SortedMap.EMPTY_NODE,this.right=tt??SortedMap.EMPTY_NODE}copy(i,s,a,et,tt){return new LLRBNode(i??this.key,s??this.value,a??this.color,et??this.left,tt??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(i){return this.left.inorderTraversal(i)||!!i(this.key,this.value)||this.right.inorderTraversal(i)}reverseTraversal(i){return this.right.reverseTraversal(i)||i(this.key,this.value)||this.left.reverseTraversal(i)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(i,s,a){let et=this;const tt=a(i,et.key);return tt<0?et=et.copy(null,null,null,et.left.insert(i,s,a),null):tt===0?et=et.copy(null,s,null,null,null):et=et.copy(null,null,null,null,et.right.insert(i,s,a)),et.fixUp_()}removeMin_(){if(this.left.isEmpty())return SortedMap.EMPTY_NODE;let i=this;return!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.removeMin_(),null),i.fixUp_()}remove(i,s){let a,et;if(a=this,s(i,a.key)<0)!a.left.isEmpty()&&!a.left.isRed_()&&!a.left.left.isRed_()&&(a=a.moveRedLeft_()),a=a.copy(null,null,null,a.left.remove(i,s),null);else{if(a.left.isRed_()&&(a=a.rotateRight_()),!a.right.isEmpty()&&!a.right.isRed_()&&!a.right.left.isRed_()&&(a=a.moveRedRight_()),s(i,a.key)===0){if(a.right.isEmpty())return SortedMap.EMPTY_NODE;et=a.right.min_(),a=a.copy(et.key,et.value,null,null,a.right.removeMin_())}a=a.copy(null,null,null,null,a.right.remove(i,s))}return a.fixUp_()}isRed_(){return this.color}fixUp_(){let i=this;return i.right.isRed_()&&!i.left.isRed_()&&(i=i.rotateLeft_()),i.left.isRed_()&&i.left.left.isRed_()&&(i=i.rotateRight_()),i.left.isRed_()&&i.right.isRed_()&&(i=i.colorFlip_()),i}moveRedLeft_(){let i=this.colorFlip_();return i.right.left.isRed_()&&(i=i.copy(null,null,null,null,i.right.rotateRight_()),i=i.rotateLeft_(),i=i.colorFlip_()),i}moveRedRight_(){let i=this.colorFlip_();return i.left.left.isRed_()&&(i=i.rotateRight_(),i=i.colorFlip_()),i}rotateLeft_(){const i=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,i,null)}rotateRight_(){const i=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,i)}colorFlip_(){const i=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,i,s)}checkMaxDepth_(){const i=this.check_();return Math.pow(2,i)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const i=this.left.check_();if(i!==this.right.check_())throw new Error("Black depths differ");return i+(this.isRed_()?0:1)}}LLRBNode.RED=!0;LLRBNode.BLACK=!1;class LLRBEmptyNode{copy(i,s,a,et,tt){return this}insert(i,s,a){return new LLRBNode(i,s,null)}remove(i,s){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class SortedMap{constructor(i,s=SortedMap.EMPTY_NODE){this.comparator_=i,this.root_=s}insert(i,s){return new SortedMap(this.comparator_,this.root_.insert(i,s,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}remove(i){return new SortedMap(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,LLRBNode.BLACK,null,null))}get(i){let s,a=this.root_;for(;!a.isEmpty();){if(s=this.comparator_(i,a.key),s===0)return a.value;s<0?a=a.left:s>0&&(a=a.right)}return null}getPredecessorKey(i){let s,a=this.root_,et=null;for(;!a.isEmpty();)if(s=this.comparator_(i,a.key),s===0){if(a.left.isEmpty())return et?et.key:null;for(a=a.left;!a.right.isEmpty();)a=a.right;return a.key}else s<0?a=a.left:s>0&&(et=a,a=a.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new SortedMapIterator(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,s){return new SortedMapIterator(this.root_,i,this.comparator_,!1,s)}getReverseIteratorFrom(i,s){return new SortedMapIterator(this.root_,i,this.comparator_,!0,s)}getReverseIterator(i){return new SortedMapIterator(this.root_,null,this.comparator_,!0,i)}}SortedMap.EMPTY_NODE=new LLRBEmptyNode;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NAME_ONLY_COMPARATOR(o,i){return nameCompare(o.name,i.name)}function NAME_COMPARATOR(o,i){return nameCompare(o,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MAX_NODE$2;function setMaxNode$1(o){MAX_NODE$2=o}const priorityHashText=function(o){return typeof o=="number"?"number:"+doubleToIEEE754String(o):"string:"+o},validatePriorityNode=function(o){if(o.isLeafNode()){const i=o.val();assert(typeof i=="string"||typeof i=="number"||typeof i=="object"&&contains$1(i,".sv"),"Priority must be a string or number.")}else assert(o===MAX_NODE$2||o.isEmpty(),"priority of unexpected type.");assert(o===MAX_NODE$2||o.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let __childrenNodeConstructor;class LeafNode{constructor(i,s=LeafNode.__childrenNodeConstructor.EMPTY_NODE){this.value_=i,this.priorityNode_=s,this.lazyHash_=null,assert(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),validatePriorityNode(this.priorityNode_)}static set __childrenNodeConstructor(i){__childrenNodeConstructor=i}static get __childrenNodeConstructor(){return __childrenNodeConstructor}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(i){return new LeafNode(this.value_,i)}getImmediateChild(i){return i===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}getChild(i){return pathIsEmpty(i)?this:pathGetFront(i)===".priority"?this.priorityNode_:LeafNode.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(i,s){return null}updateImmediateChild(i,s){return i===".priority"?this.updatePriority(s):s.isEmpty()&&i!==".priority"?this:LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(i,s).updatePriority(this.priorityNode_)}updateChild(i,s){const a=pathGetFront(i);return a===null?s:s.isEmpty()&&a!==".priority"?this:(assert(a!==".priority"||pathGetLength(i)===1,".priority must be the last token in a path"),this.updateImmediateChild(a,LeafNode.__childrenNodeConstructor.EMPTY_NODE.updateChild(pathPopFront(i),s)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(i,s){return!1}val(i){return i&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let i="";this.priorityNode_.isEmpty()||(i+="priority:"+priorityHashText(this.priorityNode_.val())+":");const s=typeof this.value_;i+=s+":",s==="number"?i+=doubleToIEEE754String(this.value_):i+=this.value_,this.lazyHash_=sha1(i)}return this.lazyHash_}getValue(){return this.value_}compareTo(i){return i===LeafNode.__childrenNodeConstructor.EMPTY_NODE?1:i instanceof LeafNode.__childrenNodeConstructor?-1:(assert(i.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(i))}compareToLeafNode_(i){const s=typeof i.value_,a=typeof this.value_,et=LeafNode.VALUE_TYPE_ORDER.indexOf(s),tt=LeafNode.VALUE_TYPE_ORDER.indexOf(a);return assert(et>=0,"Unknown leaf type: "+s),assert(tt>=0,"Unknown leaf type: "+a),et===tt?a==="object"?0:this.value_<i.value_?-1:this.value_===i.value_?0:1:tt-et}withIndex(){return this}isIndexed(){return!0}equals(i){if(i===this)return!0;if(i.isLeafNode()){const s=i;return this.value_===s.value_&&this.priorityNode_.equals(s.priorityNode_)}else return!1}}LeafNode.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nodeFromJSON$1,MAX_NODE$1;function setNodeFromJSON(o){nodeFromJSON$1=o}function setMaxNode(o){MAX_NODE$1=o}class PriorityIndex extends Index{compare(i,s){const a=i.node.getPriority(),et=s.node.getPriority(),tt=a.compareTo(et);return tt===0?nameCompare(i.name,s.name):tt}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,s){return!i.getPriority().equals(s.getPriority())}minPost(){return NamedNode.MIN}maxPost(){return new NamedNode(MAX_NAME,new LeafNode("[PRIORITY-POST]",MAX_NODE$1))}makePost(i,s){const a=nodeFromJSON$1(i);return new NamedNode(s,new LeafNode("[PRIORITY-POST]",a))}toString(){return".priority"}}const PRIORITY_INDEX=new PriorityIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LOG_2=Math.log(2);class Base12Num{constructor(i){const s=tt=>parseInt(Math.log(tt)/LOG_2,10),a=tt=>parseInt(Array(tt+1).join("1"),2);this.count=s(i+1),this.current_=this.count-1;const et=a(this.count);this.bits_=i+1&et}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const buildChildSet=function(o,i,s,a){o.sort(i);const et=function(ht,ft){const pt=ft-ht;let mt,gt;if(pt===0)return null;if(pt===1)return mt=o[ht],gt=s?s(mt):mt,new LLRBNode(gt,mt.node,LLRBNode.BLACK,null,null);{const _t=parseInt(pt/2,10)+ht,yt=et(ht,_t),St=et(_t+1,ft);return mt=o[_t],gt=s?s(mt):mt,new LLRBNode(gt,mt.node,LLRBNode.BLACK,yt,St)}},tt=function(ht){let ft=null,pt=null,mt=o.length;const gt=function(yt,St){const Et=mt-yt,vt=mt;mt-=yt;const bt=et(Et+1,vt),Tt=o[Et],wt=s?s(Tt):Tt;_t(new LLRBNode(wt,Tt.node,St,null,bt))},_t=function(yt){ft?(ft.left=yt,ft=yt):(pt=yt,ft=yt)};for(let yt=0;yt<ht.count;++yt){const St=ht.nextBitIsOne(),Et=Math.pow(2,ht.count-(yt+1));St?gt(Et,LLRBNode.BLACK):(gt(Et,LLRBNode.BLACK),gt(Et,LLRBNode.RED))}return pt},ot=new Base12Num(o.length),dt=tt(ot);return new SortedMap(a||i,dt)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _defaultIndexMap;const fallbackObject={};class IndexMap{constructor(i,s){this.indexes_=i,this.indexSet_=s}static get Default(){return assert(fallbackObject&&PRIORITY_INDEX,"ChildrenNode.ts has not been loaded"),_defaultIndexMap=_defaultIndexMap||new IndexMap({".priority":fallbackObject},{".priority":PRIORITY_INDEX}),_defaultIndexMap}get(i){const s=safeGet(this.indexes_,i);if(!s)throw new Error("No index defined for "+i);return s instanceof SortedMap?s:null}hasIndex(i){return contains$1(this.indexSet_,i.toString())}addIndex(i,s){assert(i!==KEY_INDEX,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const a=[];let et=!1;const tt=s.getIterator(NamedNode.Wrap);let ot=tt.getNext();for(;ot;)et=et||i.isDefinedOn(ot.node),a.push(ot),ot=tt.getNext();let dt;et?dt=buildChildSet(a,i.getCompare()):dt=fallbackObject;const ht=i.toString(),ft=Object.assign({},this.indexSet_);ft[ht]=i;const pt=Object.assign({},this.indexes_);return pt[ht]=dt,new IndexMap(pt,ft)}addToIndexes(i,s){const a=map(this.indexes_,(et,tt)=>{const ot=safeGet(this.indexSet_,tt);if(assert(ot,"Missing index implementation for "+tt),et===fallbackObject)if(ot.isDefinedOn(i.node)){const dt=[],ht=s.getIterator(NamedNode.Wrap);let ft=ht.getNext();for(;ft;)ft.name!==i.name&&dt.push(ft),ft=ht.getNext();return dt.push(i),buildChildSet(dt,ot.getCompare())}else return fallbackObject;else{const dt=s.get(i.name);let ht=et;return dt&&(ht=ht.remove(new NamedNode(i.name,dt))),ht.insert(i,i.node)}});return new IndexMap(a,this.indexSet_)}removeFromIndexes(i,s){const a=map(this.indexes_,et=>{if(et===fallbackObject)return et;{const tt=s.get(i.name);return tt?et.remove(new NamedNode(i.name,tt)):et}});return new IndexMap(a,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let EMPTY_NODE;class ChildrenNode{constructor(i,s,a){this.children_=i,this.priorityNode_=s,this.indexMap_=a,this.lazyHash_=null,this.priorityNode_&&validatePriorityNode(this.priorityNode_),this.children_.isEmpty()&&assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return EMPTY_NODE||(EMPTY_NODE=new ChildrenNode(new SortedMap(NAME_COMPARATOR),null,IndexMap.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||EMPTY_NODE}updatePriority(i){return this.children_.isEmpty()?this:new ChildrenNode(this.children_,i,this.indexMap_)}getImmediateChild(i){if(i===".priority")return this.getPriority();{const s=this.children_.get(i);return s===null?EMPTY_NODE:s}}getChild(i){const s=pathGetFront(i);return s===null?this:this.getImmediateChild(s).getChild(pathPopFront(i))}hasChild(i){return this.children_.get(i)!==null}updateImmediateChild(i,s){if(assert(s,"We should always be passing snapshot nodes"),i===".priority")return this.updatePriority(s);{const a=new NamedNode(i,s);let et,tt;s.isEmpty()?(et=this.children_.remove(i),tt=this.indexMap_.removeFromIndexes(a,this.children_)):(et=this.children_.insert(i,s),tt=this.indexMap_.addToIndexes(a,this.children_));const ot=et.isEmpty()?EMPTY_NODE:this.priorityNode_;return new ChildrenNode(et,ot,tt)}}updateChild(i,s){const a=pathGetFront(i);if(a===null)return s;{assert(pathGetFront(i)!==".priority"||pathGetLength(i)===1,".priority must be the last token in a path");const et=this.getImmediateChild(a).updateChild(pathPopFront(i),s);return this.updateImmediateChild(a,et)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(i){if(this.isEmpty())return null;const s={};let a=0,et=0,tt=!0;if(this.forEachChild(PRIORITY_INDEX,(ot,dt)=>{s[ot]=dt.val(i),a++,tt&&ChildrenNode.INTEGER_REGEXP_.test(ot)?et=Math.max(et,Number(ot)):tt=!1}),!i&&tt&&et<2*a){const ot=[];for(const dt in s)ot[dt]=s[dt];return ot}else return i&&!this.getPriority().isEmpty()&&(s[".priority"]=this.getPriority().val()),s}hash(){if(this.lazyHash_===null){let i="";this.getPriority().isEmpty()||(i+="priority:"+priorityHashText(this.getPriority().val())+":"),this.forEachChild(PRIORITY_INDEX,(s,a)=>{const et=a.hash();et!==""&&(i+=":"+s+":"+et)}),this.lazyHash_=i===""?"":sha1(i)}return this.lazyHash_}getPredecessorChildName(i,s,a){const et=this.resolveIndex_(a);if(et){const tt=et.getPredecessorKey(new NamedNode(i,s));return tt?tt.name:null}else return this.children_.getPredecessorKey(i)}getFirstChildName(i){const s=this.resolveIndex_(i);if(s){const a=s.minKey();return a&&a.name}else return this.children_.minKey()}getFirstChild(i){const s=this.getFirstChildName(i);return s?new NamedNode(s,this.children_.get(s)):null}getLastChildName(i){const s=this.resolveIndex_(i);if(s){const a=s.maxKey();return a&&a.name}else return this.children_.maxKey()}getLastChild(i){const s=this.getLastChildName(i);return s?new NamedNode(s,this.children_.get(s)):null}forEachChild(i,s){const a=this.resolveIndex_(i);return a?a.inorderTraversal(et=>s(et.name,et.node)):this.children_.inorderTraversal(s)}getIterator(i){return this.getIteratorFrom(i.minPost(),i)}getIteratorFrom(i,s){const a=this.resolveIndex_(s);if(a)return a.getIteratorFrom(i,et=>et);{const et=this.children_.getIteratorFrom(i.name,NamedNode.Wrap);let tt=et.peek();for(;tt!=null&&s.compare(tt,i)<0;)et.getNext(),tt=et.peek();return et}}getReverseIterator(i){return this.getReverseIteratorFrom(i.maxPost(),i)}getReverseIteratorFrom(i,s){const a=this.resolveIndex_(s);if(a)return a.getReverseIteratorFrom(i,et=>et);{const et=this.children_.getReverseIteratorFrom(i.name,NamedNode.Wrap);let tt=et.peek();for(;tt!=null&&s.compare(tt,i)>0;)et.getNext(),tt=et.peek();return et}}compareTo(i){return this.isEmpty()?i.isEmpty()?0:-1:i.isLeafNode()||i.isEmpty()?1:i===MAX_NODE?-1:0}withIndex(i){if(i===KEY_INDEX||this.indexMap_.hasIndex(i))return this;{const s=this.indexMap_.addIndex(i,this.children_);return new ChildrenNode(this.children_,this.priorityNode_,s)}}isIndexed(i){return i===KEY_INDEX||this.indexMap_.hasIndex(i)}equals(i){if(i===this)return!0;if(i.isLeafNode())return!1;{const s=i;if(this.getPriority().equals(s.getPriority()))if(this.children_.count()===s.children_.count()){const a=this.getIterator(PRIORITY_INDEX),et=s.getIterator(PRIORITY_INDEX);let tt=a.getNext(),ot=et.getNext();for(;tt&&ot;){if(tt.name!==ot.name||!tt.node.equals(ot.node))return!1;tt=a.getNext(),ot=et.getNext()}return tt===null&&ot===null}else return!1;else return!1}}resolveIndex_(i){return i===KEY_INDEX?null:this.indexMap_.get(i.toString())}}ChildrenNode.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class MaxNode extends ChildrenNode{constructor(){super(new SortedMap(NAME_COMPARATOR),ChildrenNode.EMPTY_NODE,IndexMap.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return ChildrenNode.EMPTY_NODE}isEmpty(){return!1}}const MAX_NODE=new MaxNode;Object.defineProperties(NamedNode,{MIN:{value:new NamedNode(MIN_NAME,ChildrenNode.EMPTY_NODE)},MAX:{value:new NamedNode(MAX_NAME,MAX_NODE)}});KeyIndex.__EMPTY_NODE=ChildrenNode.EMPTY_NODE;LeafNode.__childrenNodeConstructor=ChildrenNode;setMaxNode$1(MAX_NODE);setMaxNode(MAX_NODE);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const USE_HINZE=!0;function nodeFromJSON(o,i=null){if(o===null)return ChildrenNode.EMPTY_NODE;if(typeof o=="object"&&".priority"in o&&(i=o[".priority"]),assert(i===null||typeof i=="string"||typeof i=="number"||typeof i=="object"&&".sv"in i,"Invalid priority type found: "+typeof i),typeof o=="object"&&".value"in o&&o[".value"]!==null&&(o=o[".value"]),typeof o!="object"||".sv"in o){const s=o;return new LeafNode(s,nodeFromJSON(i))}if(!(o instanceof Array)&&USE_HINZE){const s=[];let a=!1;if(each(o,(ot,dt)=>{if(ot.substring(0,1)!=="."){const ht=nodeFromJSON(dt);ht.isEmpty()||(a=a||!ht.getPriority().isEmpty(),s.push(new NamedNode(ot,ht)))}}),s.length===0)return ChildrenNode.EMPTY_NODE;const tt=buildChildSet(s,NAME_ONLY_COMPARATOR,ot=>ot.name,NAME_COMPARATOR);if(a){const ot=buildChildSet(s,PRIORITY_INDEX.getCompare());return new ChildrenNode(tt,nodeFromJSON(i),new IndexMap({".priority":ot},{".priority":PRIORITY_INDEX}))}else return new ChildrenNode(tt,nodeFromJSON(i),IndexMap.Default)}else{let s=ChildrenNode.EMPTY_NODE;return each(o,(a,et)=>{if(contains$1(o,a)&&a.substring(0,1)!=="."){const tt=nodeFromJSON(et);(tt.isLeafNode()||!tt.isEmpty())&&(s=s.updateImmediateChild(a,tt))}}),s.updatePriority(nodeFromJSON(i))}}setNodeFromJSON(nodeFromJSON);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PathIndex extends Index{constructor(i){super(),this.indexPath_=i,assert(!pathIsEmpty(i)&&pathGetFront(i)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,s){const a=this.extractChild(i.node),et=this.extractChild(s.node),tt=a.compareTo(et);return tt===0?nameCompare(i.name,s.name):tt}makePost(i,s){const a=nodeFromJSON(i),et=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,a);return new NamedNode(s,et)}maxPost(){const i=ChildrenNode.EMPTY_NODE.updateChild(this.indexPath_,MAX_NODE);return new NamedNode(MAX_NAME,i)}toString(){return pathSlice(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ValueIndex extends Index{compare(i,s){const a=i.node.compareTo(s.node);return a===0?nameCompare(i.name,s.name):a}isDefinedOn(i){return!0}indexedValueChanged(i,s){return!i.equals(s)}minPost(){return NamedNode.MIN}maxPost(){return NamedNode.MAX}makePost(i,s){const a=nodeFromJSON(i);return new NamedNode(s,a)}toString(){return".value"}}const VALUE_INDEX=new ValueIndex;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function changeValue(o){return{type:"value",snapshotNode:o}}function changeChildAdded(o,i){return{type:"child_added",snapshotNode:i,childName:o}}function changeChildRemoved(o,i){return{type:"child_removed",snapshotNode:i,childName:o}}function changeChildChanged(o,i,s){return{type:"child_changed",snapshotNode:i,childName:o,oldSnap:s}}function changeChildMoved(o,i){return{type:"child_moved",snapshotNode:i,childName:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryParams{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=PRIORITY_INDEX}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:MIN_NAME}hasEnd(){return this.endSet_}getIndexEndValue(){return assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:MAX_NAME}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return assert(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===PRIORITY_INDEX}copy(){const i=new QueryParams;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.startAfterSet_=this.startAfterSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.endBeforeSet_=this.endBeforeSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function queryParamsToRestQueryStringParameters(o){const i={};if(o.isDefault())return i;let s;if(o.index_===PRIORITY_INDEX?s="$priority":o.index_===VALUE_INDEX?s="$value":o.index_===KEY_INDEX?s="$key":(assert(o.index_ instanceof PathIndex,"Unrecognized index type!"),s=o.index_.toString()),i.orderBy=stringify(s),o.startSet_){const a=o.startAfterSet_?"startAfter":"startAt";i[a]=stringify(o.indexStartValue_),o.startNameSet_&&(i[a]+=","+stringify(o.indexStartName_))}if(o.endSet_){const a=o.endBeforeSet_?"endBefore":"endAt";i[a]=stringify(o.indexEndValue_),o.endNameSet_&&(i[a]+=","+stringify(o.indexEndName_))}return o.limitSet_&&(o.isViewFromLeft()?i.limitToFirst=o.limit_:i.limitToLast=o.limit_),i}function queryParamsGetQueryObject(o){const i={};if(o.startSet_&&(i.sp=o.indexStartValue_,o.startNameSet_&&(i.sn=o.indexStartName_),i.sin=!o.startAfterSet_),o.endSet_&&(i.ep=o.indexEndValue_,o.endNameSet_&&(i.en=o.indexEndName_),i.ein=!o.endBeforeSet_),o.limitSet_){i.l=o.limit_;let s=o.viewFrom_;s===""&&(o.isViewFromLeft()?s="l":s="r"),i.vf=s}return o.index_!==PRIORITY_INDEX&&(i.i=o.index_.toString()),i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ReadonlyRestClient extends ServerActions{constructor(i,s,a,et){super(),this.repoInfo_=i,this.onDataUpdate_=s,this.authTokenProvider_=a,this.appCheckTokenProvider_=et,this.log_=logWrapper("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,s){return s!==void 0?"tag$"+s:(assert(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,s,a,et){const tt=i._path.toString();this.log_("Listen called for "+tt+" "+i._queryIdentifier);const ot=ReadonlyRestClient.getListenId_(i,a),dt={};this.listens_[ot]=dt;const ht=queryParamsToRestQueryStringParameters(i._queryParams);this.restRequest_(tt+".json",ht,(ft,pt)=>{let mt=pt;if(ft===404&&(mt=null,ft=null),ft===null&&this.onDataUpdate_(tt,mt,!1,a),safeGet(this.listens_,ot)===dt){let gt;ft?ft===401?gt="permission_denied":gt="rest_error:"+ft:gt="ok",et(gt,null)}})}unlisten(i,s){const a=ReadonlyRestClient.getListenId_(i,s);delete this.listens_[a]}get(i){const s=queryParamsToRestQueryStringParameters(i._queryParams),a=i._path.toString(),et=new Deferred;return this.restRequest_(a+".json",s,(tt,ot)=>{let dt=ot;tt===404&&(dt=null,tt=null),tt===null?(this.onDataUpdate_(a,dt,!1,null),et.resolve(dt)):et.reject(new Error(dt))}),et.promise}refreshAuthToken(i){}restRequest_(i,s={},a){return s.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([et,tt])=>{et&&et.accessToken&&(s.auth=et.accessToken),tt&&tt.token&&(s.ac=tt.token);const ot=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+querystring(s);this.log_("Sending REST request for "+ot);const dt=new XMLHttpRequest;dt.onreadystatechange=()=>{if(a&&dt.readyState===4){this.log_("REST Response for "+ot+" received. status:",dt.status,"response:",dt.responseText);let ht=null;if(dt.status>=200&&dt.status<300){try{ht=jsonEval(dt.responseText)}catch{warn("Failed to parse JSON response for "+ot+": "+dt.responseText)}a(null,ht)}else dt.status!==401&&dt.status!==404&&warn("Got unsuccessful REST response for "+ot+" Status: "+dt.status),a(dt.status);a=null}},dt.open("GET",ot,!0),dt.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotHolder{constructor(){this.rootNode_=ChildrenNode.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,s){this.rootNode_=this.rootNode_.updateChild(i,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newSparseSnapshotTree(){return{value:null,children:new Map}}function sparseSnapshotTreeRemember(o,i,s){if(pathIsEmpty(i))o.value=s,o.children.clear();else if(o.value!==null)o.value=o.value.updateChild(i,s);else{const a=pathGetFront(i);o.children.has(a)||o.children.set(a,newSparseSnapshotTree());const et=o.children.get(a);i=pathPopFront(i),sparseSnapshotTreeRemember(et,i,s)}}function sparseSnapshotTreeForEachTree(o,i,s){o.value!==null?s(i,o.value):sparseSnapshotTreeForEachChild(o,(a,et)=>{const tt=new Path(i.toString()+"/"+a);sparseSnapshotTreeForEachTree(et,tt,s)})}function sparseSnapshotTreeForEachChild(o,i){o.children.forEach((s,a)=>{i(a,s)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StatsListener{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),s=Object.assign({},i);return this.last_&&each(this.last_,(a,et)=>{s[a]=s[a]-et}),this.last_=i,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIRST_STATS_MIN_TIME=10*1e3,FIRST_STATS_MAX_TIME=30*1e3,REPORT_STATS_INTERVAL=5*60*1e3;class StatsReporter{constructor(i,s){this.server_=s,this.statsToReport_={},this.statsListener_=new StatsListener(i);const a=FIRST_STATS_MIN_TIME+(FIRST_STATS_MAX_TIME-FIRST_STATS_MIN_TIME)*Math.random();setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(a))}reportStats_(){const i=this.statsListener_.get(),s={};let a=!1;each(i,(et,tt)=>{tt>0&&contains$1(this.statsToReport_,et)&&(s[et]=tt,a=!0)}),a&&this.server_.reportStats(s),setTimeoutNonBlocking(this.reportStats_.bind(this),Math.floor(Math.random()*2*REPORT_STATS_INTERVAL))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var OperationType;(function(o){o[o.OVERWRITE=0]="OVERWRITE",o[o.MERGE=1]="MERGE",o[o.ACK_USER_WRITE=2]="ACK_USER_WRITE",o[o.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(OperationType||(OperationType={}));function newOperationSourceUser(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function newOperationSourceServer(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function newOperationSourceServerTaggedQuery(o){return{fromUser:!1,fromServer:!0,queryId:o,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AckUserWrite{constructor(i,s,a){this.path=i,this.affectedTree=s,this.revert=a,this.type=OperationType.ACK_USER_WRITE,this.source=newOperationSourceUser()}operationForChild(i){if(pathIsEmpty(this.path)){if(this.affectedTree.value!=null)return assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const s=this.affectedTree.subtree(new Path(i));return new AckUserWrite(newEmptyPath(),s,this.revert)}}else return assert(pathGetFront(this.path)===i,"operationForChild called for unrelated child."),new AckUserWrite(pathPopFront(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overwrite{constructor(i,s,a){this.source=i,this.path=s,this.snap=a,this.type=OperationType.OVERWRITE}operationForChild(i){return pathIsEmpty(this.path)?new Overwrite(this.source,newEmptyPath(),this.snap.getImmediateChild(i)):new Overwrite(this.source,pathPopFront(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Merge{constructor(i,s,a){this.source=i,this.path=s,this.children=a,this.type=OperationType.MERGE}operationForChild(i){if(pathIsEmpty(this.path)){const s=this.children.subtree(new Path(i));return s.isEmpty()?null:s.value?new Overwrite(this.source,newEmptyPath(),s.value):new Merge(this.source,newEmptyPath(),s)}else return assert(pathGetFront(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new Merge(this.source,pathPopFront(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CacheNode{constructor(i,s,a){this.node_=i,this.fullyInitialized_=s,this.filtered_=a}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(pathIsEmpty(i))return this.isFullyInitialized()&&!this.filtered_;const s=pathGetFront(i);return this.isCompleteForChild(s)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}function eventGeneratorGenerateEventsForChanges(o,i,s,a){const et=[],tt=[];return i.forEach(ot=>{ot.type==="child_changed"&&o.index_.indexedValueChanged(ot.oldSnap,ot.snapshotNode)&&tt.push(changeChildMoved(ot.childName,ot.snapshotNode))}),eventGeneratorGenerateEventsForType(o,et,"child_removed",i,a,s),eventGeneratorGenerateEventsForType(o,et,"child_added",i,a,s),eventGeneratorGenerateEventsForType(o,et,"child_moved",tt,a,s),eventGeneratorGenerateEventsForType(o,et,"child_changed",i,a,s),eventGeneratorGenerateEventsForType(o,et,"value",i,a,s),et}function eventGeneratorGenerateEventsForType(o,i,s,a,et,tt){const ot=a.filter(dt=>dt.type===s);ot.sort((dt,ht)=>eventGeneratorCompareChanges(o,dt,ht)),ot.forEach(dt=>{const ht=eventGeneratorMaterializeSingleChange(o,dt,tt);et.forEach(ft=>{ft.respondsTo(dt.type)&&i.push(ft.createEvent(ht,o.query_))})})}function eventGeneratorMaterializeSingleChange(o,i,s){return i.type==="value"||i.type==="child_removed"||(i.prevName=s.getPredecessorChildName(i.childName,i.snapshotNode,o.index_)),i}function eventGeneratorCompareChanges(o,i,s){if(i.childName==null||s.childName==null)throw assertionError("Should only compare child_ events.");const a=new NamedNode(i.childName,i.snapshotNode),et=new NamedNode(s.childName,s.snapshotNode);return o.index_.compare(a,et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function newViewCache(o,i){return{eventCache:o,serverCache:i}}function viewCacheUpdateEventSnap(o,i,s,a){return newViewCache(new CacheNode(i,s,a),o.serverCache)}function viewCacheUpdateServerSnap(o,i,s,a){return newViewCache(o.eventCache,new CacheNode(i,s,a))}function viewCacheGetCompleteEventSnap(o){return o.eventCache.isFullyInitialized()?o.eventCache.getNode():null}function viewCacheGetCompleteServerSnap(o){return o.serverCache.isFullyInitialized()?o.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let emptyChildrenSingleton;const EmptyChildren=()=>(emptyChildrenSingleton||(emptyChildrenSingleton=new SortedMap(stringCompare)),emptyChildrenSingleton);class ImmutableTree{constructor(i,s=EmptyChildren()){this.value=i,this.children=s}static fromObject(i){let s=new ImmutableTree(null);return each(i,(a,et)=>{s=s.set(new Path(a),et)}),s}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,s){if(this.value!=null&&s(this.value))return{path:newEmptyPath(),value:this.value};if(pathIsEmpty(i))return null;{const a=pathGetFront(i),et=this.children.get(a);if(et!==null){const tt=et.findRootMostMatchingPathAndValue(pathPopFront(i),s);return tt!=null?{path:pathChild(new Path(a),tt.path),value:tt.value}:null}else return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(pathIsEmpty(i))return this;{const s=pathGetFront(i),a=this.children.get(s);return a!==null?a.subtree(pathPopFront(i)):new ImmutableTree(null)}}set(i,s){if(pathIsEmpty(i))return new ImmutableTree(s,this.children);{const a=pathGetFront(i),tt=(this.children.get(a)||new ImmutableTree(null)).set(pathPopFront(i),s),ot=this.children.insert(a,tt);return new ImmutableTree(this.value,ot)}}remove(i){if(pathIsEmpty(i))return this.children.isEmpty()?new ImmutableTree(null):new ImmutableTree(null,this.children);{const s=pathGetFront(i),a=this.children.get(s);if(a){const et=a.remove(pathPopFront(i));let tt;return et.isEmpty()?tt=this.children.remove(s):tt=this.children.insert(s,et),this.value===null&&tt.isEmpty()?new ImmutableTree(null):new ImmutableTree(this.value,tt)}else return this}}get(i){if(pathIsEmpty(i))return this.value;{const s=pathGetFront(i),a=this.children.get(s);return a?a.get(pathPopFront(i)):null}}setTree(i,s){if(pathIsEmpty(i))return s;{const a=pathGetFront(i),tt=(this.children.get(a)||new ImmutableTree(null)).setTree(pathPopFront(i),s);let ot;return tt.isEmpty()?ot=this.children.remove(a):ot=this.children.insert(a,tt),new ImmutableTree(this.value,ot)}}fold(i){return this.fold_(newEmptyPath(),i)}fold_(i,s){const a={};return this.children.inorderTraversal((et,tt)=>{a[et]=tt.fold_(pathChild(i,et),s)}),s(i,this.value,a)}findOnPath(i,s){return this.findOnPath_(i,newEmptyPath(),s)}findOnPath_(i,s,a){const et=this.value?a(s,this.value):!1;if(et)return et;if(pathIsEmpty(i))return null;{const tt=pathGetFront(i),ot=this.children.get(tt);return ot?ot.findOnPath_(pathPopFront(i),pathChild(s,tt),a):null}}foreachOnPath(i,s){return this.foreachOnPath_(i,newEmptyPath(),s)}foreachOnPath_(i,s,a){if(pathIsEmpty(i))return this;{this.value&&a(s,this.value);const et=pathGetFront(i),tt=this.children.get(et);return tt?tt.foreachOnPath_(pathPopFront(i),pathChild(s,et),a):new ImmutableTree(null)}}foreach(i){this.foreach_(newEmptyPath(),i)}foreach_(i,s){this.children.inorderTraversal((a,et)=>{et.foreach_(pathChild(i,a),s)}),this.value&&s(i,this.value)}foreachChild(i){this.children.inorderTraversal((s,a)=>{a.value&&i(s,a.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CompoundWrite{constructor(i){this.writeTree_=i}static empty(){return new CompoundWrite(new ImmutableTree(null))}}function compoundWriteAddWrite(o,i,s){if(pathIsEmpty(i))return new CompoundWrite(new ImmutableTree(s));{const a=o.writeTree_.findRootMostValueAndPath(i);if(a!=null){const et=a.path;let tt=a.value;const ot=newRelativePath(et,i);return tt=tt.updateChild(ot,s),new CompoundWrite(o.writeTree_.set(et,tt))}else{const et=new ImmutableTree(s),tt=o.writeTree_.setTree(i,et);return new CompoundWrite(tt)}}}function compoundWriteAddWrites(o,i,s){let a=o;return each(s,(et,tt)=>{a=compoundWriteAddWrite(a,pathChild(i,et),tt)}),a}function compoundWriteRemoveWrite(o,i){if(pathIsEmpty(i))return CompoundWrite.empty();{const s=o.writeTree_.setTree(i,new ImmutableTree(null));return new CompoundWrite(s)}}function compoundWriteHasCompleteWrite(o,i){return compoundWriteGetCompleteNode(o,i)!=null}function compoundWriteGetCompleteNode(o,i){const s=o.writeTree_.findRootMostValueAndPath(i);return s!=null?o.writeTree_.get(s.path).getChild(newRelativePath(s.path,i)):null}function compoundWriteGetCompleteChildren(o){const i=[],s=o.writeTree_.value;return s!=null?s.isLeafNode()||s.forEachChild(PRIORITY_INDEX,(a,et)=>{i.push(new NamedNode(a,et))}):o.writeTree_.children.inorderTraversal((a,et)=>{et.value!=null&&i.push(new NamedNode(a,et.value))}),i}function compoundWriteChildCompoundWrite(o,i){if(pathIsEmpty(i))return o;{const s=compoundWriteGetCompleteNode(o,i);return s!=null?new CompoundWrite(new ImmutableTree(s)):new CompoundWrite(o.writeTree_.subtree(i))}}function compoundWriteIsEmpty(o){return o.writeTree_.isEmpty()}function compoundWriteApply(o,i){return applySubtreeWrite(newEmptyPath(),o.writeTree_,i)}function applySubtreeWrite(o,i,s){if(i.value!=null)return s.updateChild(o,i.value);{let a=null;return i.children.inorderTraversal((et,tt)=>{et===".priority"?(assert(tt.value!==null,"Priority writes must always be leaf nodes"),a=tt.value):s=applySubtreeWrite(pathChild(o,et),tt,s)}),!s.getChild(o).isEmpty()&&a!==null&&(s=s.updateChild(pathChild(o,".priority"),a)),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function writeTreeChildWrites(o,i){return newWriteTreeRef(i,o)}function writeTreeAddOverwrite(o,i,s,a,et){assert(a>o.lastWriteId,"Stacking an older write on top of newer ones"),et===void 0&&(et=!0),o.allWrites.push({path:i,snap:s,writeId:a,visible:et}),et&&(o.visibleWrites=compoundWriteAddWrite(o.visibleWrites,i,s)),o.lastWriteId=a}function writeTreeGetWrite(o,i){for(let s=0;s<o.allWrites.length;s++){const a=o.allWrites[s];if(a.writeId===i)return a}return null}function writeTreeRemoveWrite(o,i){const s=o.allWrites.findIndex(dt=>dt.writeId===i);assert(s>=0,"removeWrite called with nonexistent writeId.");const a=o.allWrites[s];o.allWrites.splice(s,1);let et=a.visible,tt=!1,ot=o.allWrites.length-1;for(;et&&ot>=0;){const dt=o.allWrites[ot];dt.visible&&(ot>=s&&writeTreeRecordContainsPath_(dt,a.path)?et=!1:pathContains(a.path,dt.path)&&(tt=!0)),ot--}if(et){if(tt)return writeTreeResetTree_(o),!0;if(a.snap)o.visibleWrites=compoundWriteRemoveWrite(o.visibleWrites,a.path);else{const dt=a.children;each(dt,ht=>{o.visibleWrites=compoundWriteRemoveWrite(o.visibleWrites,pathChild(a.path,ht))})}return!0}else return!1}function writeTreeRecordContainsPath_(o,i){if(o.snap)return pathContains(o.path,i);for(const s in o.children)if(o.children.hasOwnProperty(s)&&pathContains(pathChild(o.path,s),i))return!0;return!1}function writeTreeResetTree_(o){o.visibleWrites=writeTreeLayerTree_(o.allWrites,writeTreeDefaultFilter_,newEmptyPath()),o.allWrites.length>0?o.lastWriteId=o.allWrites[o.allWrites.length-1].writeId:o.lastWriteId=-1}function writeTreeDefaultFilter_(o){return o.visible}function writeTreeLayerTree_(o,i,s){let a=CompoundWrite.empty();for(let et=0;et<o.length;++et){const tt=o[et];if(i(tt)){const ot=tt.path;let dt;if(tt.snap)pathContains(s,ot)?(dt=newRelativePath(s,ot),a=compoundWriteAddWrite(a,dt,tt.snap)):pathContains(ot,s)&&(dt=newRelativePath(ot,s),a=compoundWriteAddWrite(a,newEmptyPath(),tt.snap.getChild(dt)));else if(tt.children){if(pathContains(s,ot))dt=newRelativePath(s,ot),a=compoundWriteAddWrites(a,dt,tt.children);else if(pathContains(ot,s))if(dt=newRelativePath(ot,s),pathIsEmpty(dt))a=compoundWriteAddWrites(a,newEmptyPath(),tt.children);else{const ht=safeGet(tt.children,pathGetFront(dt));if(ht){const ft=ht.getChild(pathPopFront(dt));a=compoundWriteAddWrite(a,newEmptyPath(),ft)}}}else throw assertionError("WriteRecord should have .snap or .children")}}return a}function writeTreeCalcCompleteEventCache(o,i,s,a,et){if(!a&&!et){const tt=compoundWriteGetCompleteNode(o.visibleWrites,i);if(tt!=null)return tt;{const ot=compoundWriteChildCompoundWrite(o.visibleWrites,i);if(compoundWriteIsEmpty(ot))return s;if(s==null&&!compoundWriteHasCompleteWrite(ot,newEmptyPath()))return null;{const dt=s||ChildrenNode.EMPTY_NODE;return compoundWriteApply(ot,dt)}}}else{const tt=compoundWriteChildCompoundWrite(o.visibleWrites,i);if(!et&&compoundWriteIsEmpty(tt))return s;if(!et&&s==null&&!compoundWriteHasCompleteWrite(tt,newEmptyPath()))return null;{const ot=function(ft){return(ft.visible||et)&&(!a||!~a.indexOf(ft.writeId))&&(pathContains(ft.path,i)||pathContains(i,ft.path))},dt=writeTreeLayerTree_(o.allWrites,ot,i),ht=s||ChildrenNode.EMPTY_NODE;return compoundWriteApply(dt,ht)}}}function writeTreeCalcCompleteEventChildren(o,i,s){let a=ChildrenNode.EMPTY_NODE;const et=compoundWriteGetCompleteNode(o.visibleWrites,i);if(et)return et.isLeafNode()||et.forEachChild(PRIORITY_INDEX,(tt,ot)=>{a=a.updateImmediateChild(tt,ot)}),a;if(s){const tt=compoundWriteChildCompoundWrite(o.visibleWrites,i);return s.forEachChild(PRIORITY_INDEX,(ot,dt)=>{const ht=compoundWriteApply(compoundWriteChildCompoundWrite(tt,new Path(ot)),dt);a=a.updateImmediateChild(ot,ht)}),compoundWriteGetCompleteChildren(tt).forEach(ot=>{a=a.updateImmediateChild(ot.name,ot.node)}),a}else{const tt=compoundWriteChildCompoundWrite(o.visibleWrites,i);return compoundWriteGetCompleteChildren(tt).forEach(ot=>{a=a.updateImmediateChild(ot.name,ot.node)}),a}}function writeTreeCalcEventCacheAfterServerOverwrite(o,i,s,a,et){assert(a||et,"Either existingEventSnap or existingServerSnap must exist");const tt=pathChild(i,s);if(compoundWriteHasCompleteWrite(o.visibleWrites,tt))return null;{const ot=compoundWriteChildCompoundWrite(o.visibleWrites,tt);return compoundWriteIsEmpty(ot)?et.getChild(s):compoundWriteApply(ot,et.getChild(s))}}function writeTreeCalcCompleteChild(o,i,s,a){const et=pathChild(i,s),tt=compoundWriteGetCompleteNode(o.visibleWrites,et);if(tt!=null)return tt;if(a.isCompleteForChild(s)){const ot=compoundWriteChildCompoundWrite(o.visibleWrites,et);return compoundWriteApply(ot,a.getNode().getImmediateChild(s))}else return null}function writeTreeShadowingWrite(o,i){return compoundWriteGetCompleteNode(o.visibleWrites,i)}function writeTreeCalcIndexedSlice(o,i,s,a,et,tt,ot){let dt;const ht=compoundWriteChildCompoundWrite(o.visibleWrites,i),ft=compoundWriteGetCompleteNode(ht,newEmptyPath());if(ft!=null)dt=ft;else if(s!=null)dt=compoundWriteApply(ht,s);else return[];if(dt=dt.withIndex(ot),!dt.isEmpty()&&!dt.isLeafNode()){const pt=[],mt=ot.getCompare(),gt=tt?dt.getReverseIteratorFrom(a,ot):dt.getIteratorFrom(a,ot);let _t=gt.getNext();for(;_t&&pt.length<et;)mt(_t,a)!==0&&pt.push(_t),_t=gt.getNext();return pt}else return[]}function newWriteTree(){return{visibleWrites:CompoundWrite.empty(),allWrites:[],lastWriteId:-1}}function writeTreeRefCalcCompleteEventCache(o,i,s,a){return writeTreeCalcCompleteEventCache(o.writeTree,o.treePath,i,s,a)}function writeTreeRefCalcCompleteEventChildren(o,i){return writeTreeCalcCompleteEventChildren(o.writeTree,o.treePath,i)}function writeTreeRefCalcEventCacheAfterServerOverwrite(o,i,s,a){return writeTreeCalcEventCacheAfterServerOverwrite(o.writeTree,o.treePath,i,s,a)}function writeTreeRefShadowingWrite(o,i){return writeTreeShadowingWrite(o.writeTree,pathChild(o.treePath,i))}function writeTreeRefCalcIndexedSlice(o,i,s,a,et,tt){return writeTreeCalcIndexedSlice(o.writeTree,o.treePath,i,s,a,et,tt)}function writeTreeRefCalcCompleteChild(o,i,s){return writeTreeCalcCompleteChild(o.writeTree,o.treePath,i,s)}function writeTreeRefChild(o,i){return newWriteTreeRef(pathChild(o.treePath,i),o.writeTree)}function newWriteTreeRef(o,i){return{treePath:o,writeTree:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ChildChangeAccumulator{constructor(){this.changeMap=new Map}trackChildChange(i){const s=i.type,a=i.childName;assert(s==="child_added"||s==="child_changed"||s==="child_removed","Only child changes supported for tracking"),assert(a!==".priority","Only non-priority child changes can be tracked.");const et=this.changeMap.get(a);if(et){const tt=et.type;if(s==="child_added"&&tt==="child_removed")this.changeMap.set(a,changeChildChanged(a,i.snapshotNode,et.snapshotNode));else if(s==="child_removed"&&tt==="child_added")this.changeMap.delete(a);else if(s==="child_removed"&&tt==="child_changed")this.changeMap.set(a,changeChildRemoved(a,et.oldSnap));else if(s==="child_changed"&&tt==="child_added")this.changeMap.set(a,changeChildAdded(a,i.snapshotNode));else if(s==="child_changed"&&tt==="child_changed")this.changeMap.set(a,changeChildChanged(a,i.snapshotNode,et.oldSnap));else throw assertionError("Illegal combination of changes: "+i+" occurred after "+et)}else this.changeMap.set(a,i)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NoCompleteChildSource_{getCompleteChild(i){return null}getChildAfterChild(i,s,a){return null}}const NO_COMPLETE_CHILD_SOURCE=new NoCompleteChildSource_;class WriteTreeCompleteChildSource{constructor(i,s,a=null){this.writes_=i,this.viewCache_=s,this.optCompleteServerCache_=a}getCompleteChild(i){const s=this.viewCache_.eventCache;if(s.isCompleteForChild(i))return s.getNode().getImmediateChild(i);{const a=this.optCompleteServerCache_!=null?new CacheNode(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return writeTreeRefCalcCompleteChild(this.writes_,i,a)}}getChildAfterChild(i,s,a){const et=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:viewCacheGetCompleteServerSnap(this.viewCache_),tt=writeTreeRefCalcIndexedSlice(this.writes_,et,s,1,a,i);return tt.length===0?null:tt[0]}}function viewProcessorAssertIndexed(o,i){assert(i.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),assert(i.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed")}function viewProcessorApplyOperation(o,i,s,a,et){const tt=new ChildChangeAccumulator;let ot,dt;if(s.type===OperationType.OVERWRITE){const ft=s;ft.source.fromUser?ot=viewProcessorApplyUserOverwrite(o,i,ft.path,ft.snap,a,et,tt):(assert(ft.source.fromServer,"Unknown source."),dt=ft.source.tagged||i.serverCache.isFiltered()&&!pathIsEmpty(ft.path),ot=viewProcessorApplyServerOverwrite(o,i,ft.path,ft.snap,a,et,dt,tt))}else if(s.type===OperationType.MERGE){const ft=s;ft.source.fromUser?ot=viewProcessorApplyUserMerge(o,i,ft.path,ft.children,a,et,tt):(assert(ft.source.fromServer,"Unknown source."),dt=ft.source.tagged||i.serverCache.isFiltered(),ot=viewProcessorApplyServerMerge(o,i,ft.path,ft.children,a,et,dt,tt))}else if(s.type===OperationType.ACK_USER_WRITE){const ft=s;ft.revert?ot=viewProcessorRevertUserWrite(o,i,ft.path,a,et,tt):ot=viewProcessorAckUserWrite(o,i,ft.path,ft.affectedTree,a,et,tt)}else if(s.type===OperationType.LISTEN_COMPLETE)ot=viewProcessorListenComplete(o,i,s.path,a,tt);else throw assertionError("Unknown operation type: "+s.type);const ht=tt.getChanges();return viewProcessorMaybeAddValueEvent(i,ot,ht),{viewCache:ot,changes:ht}}function viewProcessorMaybeAddValueEvent(o,i,s){const a=i.eventCache;if(a.isFullyInitialized()){const et=a.getNode().isLeafNode()||a.getNode().isEmpty(),tt=viewCacheGetCompleteEventSnap(o);(s.length>0||!o.eventCache.isFullyInitialized()||et&&!a.getNode().equals(tt)||!a.getNode().getPriority().equals(tt.getPriority()))&&s.push(changeValue(viewCacheGetCompleteEventSnap(i)))}}function viewProcessorGenerateEventCacheAfterServerEvent(o,i,s,a,et,tt){const ot=i.eventCache;if(writeTreeRefShadowingWrite(a,s)!=null)return i;{let dt,ht;if(pathIsEmpty(s))if(assert(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const ft=viewCacheGetCompleteServerSnap(i),pt=ft instanceof ChildrenNode?ft:ChildrenNode.EMPTY_NODE,mt=writeTreeRefCalcCompleteEventChildren(a,pt);dt=o.filter.updateFullNode(i.eventCache.getNode(),mt,tt)}else{const ft=writeTreeRefCalcCompleteEventCache(a,viewCacheGetCompleteServerSnap(i));dt=o.filter.updateFullNode(i.eventCache.getNode(),ft,tt)}else{const ft=pathGetFront(s);if(ft===".priority"){assert(pathGetLength(s)===1,"Can't have a priority with additional path components");const pt=ot.getNode();ht=i.serverCache.getNode();const mt=writeTreeRefCalcEventCacheAfterServerOverwrite(a,s,pt,ht);mt!=null?dt=o.filter.updatePriority(pt,mt):dt=ot.getNode()}else{const pt=pathPopFront(s);let mt;if(ot.isCompleteForChild(ft)){ht=i.serverCache.getNode();const gt=writeTreeRefCalcEventCacheAfterServerOverwrite(a,s,ot.getNode(),ht);gt!=null?mt=ot.getNode().getImmediateChild(ft).updateChild(pt,gt):mt=ot.getNode().getImmediateChild(ft)}else mt=writeTreeRefCalcCompleteChild(a,ft,i.serverCache);mt!=null?dt=o.filter.updateChild(ot.getNode(),ft,mt,pt,et,tt):dt=ot.getNode()}}return viewCacheUpdateEventSnap(i,dt,ot.isFullyInitialized()||pathIsEmpty(s),o.filter.filtersNodes())}}function viewProcessorApplyServerOverwrite(o,i,s,a,et,tt,ot,dt){const ht=i.serverCache;let ft;const pt=ot?o.filter:o.filter.getIndexedFilter();if(pathIsEmpty(s))ft=pt.updateFullNode(ht.getNode(),a,null);else if(pt.filtersNodes()&&!ht.isFiltered()){const _t=ht.getNode().updateChild(s,a);ft=pt.updateFullNode(ht.getNode(),_t,null)}else{const _t=pathGetFront(s);if(!ht.isCompleteForPath(s)&&pathGetLength(s)>1)return i;const yt=pathPopFront(s),Et=ht.getNode().getImmediateChild(_t).updateChild(yt,a);_t===".priority"?ft=pt.updatePriority(ht.getNode(),Et):ft=pt.updateChild(ht.getNode(),_t,Et,yt,NO_COMPLETE_CHILD_SOURCE,null)}const mt=viewCacheUpdateServerSnap(i,ft,ht.isFullyInitialized()||pathIsEmpty(s),pt.filtersNodes()),gt=new WriteTreeCompleteChildSource(et,mt,tt);return viewProcessorGenerateEventCacheAfterServerEvent(o,mt,s,et,gt,dt)}function viewProcessorApplyUserOverwrite(o,i,s,a,et,tt,ot){const dt=i.eventCache;let ht,ft;const pt=new WriteTreeCompleteChildSource(et,i,tt);if(pathIsEmpty(s))ft=o.filter.updateFullNode(i.eventCache.getNode(),a,ot),ht=viewCacheUpdateEventSnap(i,ft,!0,o.filter.filtersNodes());else{const mt=pathGetFront(s);if(mt===".priority")ft=o.filter.updatePriority(i.eventCache.getNode(),a),ht=viewCacheUpdateEventSnap(i,ft,dt.isFullyInitialized(),dt.isFiltered());else{const gt=pathPopFront(s),_t=dt.getNode().getImmediateChild(mt);let yt;if(pathIsEmpty(gt))yt=a;else{const St=pt.getCompleteChild(mt);St!=null?pathGetBack(gt)===".priority"&&St.getChild(pathParent(gt)).isEmpty()?yt=St:yt=St.updateChild(gt,a):yt=ChildrenNode.EMPTY_NODE}if(_t.equals(yt))ht=i;else{const St=o.filter.updateChild(dt.getNode(),mt,yt,gt,pt,ot);ht=viewCacheUpdateEventSnap(i,St,dt.isFullyInitialized(),o.filter.filtersNodes())}}}return ht}function viewProcessorCacheHasChild(o,i){return o.eventCache.isCompleteForChild(i)}function viewProcessorApplyUserMerge(o,i,s,a,et,tt,ot){let dt=i;return a.foreach((ht,ft)=>{const pt=pathChild(s,ht);viewProcessorCacheHasChild(i,pathGetFront(pt))&&(dt=viewProcessorApplyUserOverwrite(o,dt,pt,ft,et,tt,ot))}),a.foreach((ht,ft)=>{const pt=pathChild(s,ht);viewProcessorCacheHasChild(i,pathGetFront(pt))||(dt=viewProcessorApplyUserOverwrite(o,dt,pt,ft,et,tt,ot))}),dt}function viewProcessorApplyMerge(o,i,s){return s.foreach((a,et)=>{i=i.updateChild(a,et)}),i}function viewProcessorApplyServerMerge(o,i,s,a,et,tt,ot,dt){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let ht=i,ft;pathIsEmpty(s)?ft=a:ft=new ImmutableTree(null).setTree(s,a);const pt=i.serverCache.getNode();return ft.children.inorderTraversal((mt,gt)=>{if(pt.hasChild(mt)){const _t=i.serverCache.getNode().getImmediateChild(mt),yt=viewProcessorApplyMerge(o,_t,gt);ht=viewProcessorApplyServerOverwrite(o,ht,new Path(mt),yt,et,tt,ot,dt)}}),ft.children.inorderTraversal((mt,gt)=>{const _t=!i.serverCache.isCompleteForChild(mt)&&gt.value===null;if(!pt.hasChild(mt)&&!_t){const yt=i.serverCache.getNode().getImmediateChild(mt),St=viewProcessorApplyMerge(o,yt,gt);ht=viewProcessorApplyServerOverwrite(o,ht,new Path(mt),St,et,tt,ot,dt)}}),ht}function viewProcessorAckUserWrite(o,i,s,a,et,tt,ot){if(writeTreeRefShadowingWrite(et,s)!=null)return i;const dt=i.serverCache.isFiltered(),ht=i.serverCache;if(a.value!=null){if(pathIsEmpty(s)&&ht.isFullyInitialized()||ht.isCompleteForPath(s))return viewProcessorApplyServerOverwrite(o,i,s,ht.getNode().getChild(s),et,tt,dt,ot);if(pathIsEmpty(s)){let ft=new ImmutableTree(null);return ht.getNode().forEachChild(KEY_INDEX,(pt,mt)=>{ft=ft.set(new Path(pt),mt)}),viewProcessorApplyServerMerge(o,i,s,ft,et,tt,dt,ot)}else return i}else{let ft=new ImmutableTree(null);return a.foreach((pt,mt)=>{const gt=pathChild(s,pt);ht.isCompleteForPath(gt)&&(ft=ft.set(pt,ht.getNode().getChild(gt)))}),viewProcessorApplyServerMerge(o,i,s,ft,et,tt,dt,ot)}}function viewProcessorListenComplete(o,i,s,a,et){const tt=i.serverCache,ot=viewCacheUpdateServerSnap(i,tt.getNode(),tt.isFullyInitialized()||pathIsEmpty(s),tt.isFiltered());return viewProcessorGenerateEventCacheAfterServerEvent(o,ot,s,a,NO_COMPLETE_CHILD_SOURCE,et)}function viewProcessorRevertUserWrite(o,i,s,a,et,tt){let ot;if(writeTreeRefShadowingWrite(a,s)!=null)return i;{const dt=new WriteTreeCompleteChildSource(a,i,et),ht=i.eventCache.getNode();let ft;if(pathIsEmpty(s)||pathGetFront(s)===".priority"){let pt;if(i.serverCache.isFullyInitialized())pt=writeTreeRefCalcCompleteEventCache(a,viewCacheGetCompleteServerSnap(i));else{const mt=i.serverCache.getNode();assert(mt instanceof ChildrenNode,"serverChildren would be complete if leaf node"),pt=writeTreeRefCalcCompleteEventChildren(a,mt)}pt=pt,ft=o.filter.updateFullNode(ht,pt,tt)}else{const pt=pathGetFront(s);let mt=writeTreeRefCalcCompleteChild(a,pt,i.serverCache);mt==null&&i.serverCache.isCompleteForChild(pt)&&(mt=ht.getImmediateChild(pt)),mt!=null?ft=o.filter.updateChild(ht,pt,mt,pathPopFront(s),dt,tt):i.eventCache.getNode().hasChild(pt)?ft=o.filter.updateChild(ht,pt,ChildrenNode.EMPTY_NODE,pathPopFront(s),dt,tt):ft=ht,ft.isEmpty()&&i.serverCache.isFullyInitialized()&&(ot=writeTreeRefCalcCompleteEventCache(a,viewCacheGetCompleteServerSnap(i)),ot.isLeafNode()&&(ft=o.filter.updateFullNode(ft,ot,tt)))}return ot=i.serverCache.isFullyInitialized()||writeTreeRefShadowingWrite(a,newEmptyPath())!=null,viewCacheUpdateEventSnap(i,ft,ot,o.filter.filtersNodes())}}function viewGetCompleteServerCache(o,i){const s=viewCacheGetCompleteServerSnap(o.viewCache_);return s&&(o.query._queryParams.loadsAllData()||!pathIsEmpty(i)&&!s.getImmediateChild(pathGetFront(i)).isEmpty())?s.getChild(i):null}function viewApplyOperation(o,i,s,a){i.type===OperationType.MERGE&&i.source.queryId!==null&&(assert(viewCacheGetCompleteServerSnap(o.viewCache_),"We should always have a full cache before handling merges"),assert(viewCacheGetCompleteEventSnap(o.viewCache_),"Missing event cache, even though we have a server cache"));const et=o.viewCache_,tt=viewProcessorApplyOperation(o.processor_,et,i,s,a);return viewProcessorAssertIndexed(o.processor_,tt.viewCache),assert(tt.viewCache.serverCache.isFullyInitialized()||!et.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),o.viewCache_=tt.viewCache,viewGenerateEventsForChanges_(o,tt.changes,tt.viewCache.eventCache.getNode(),null)}function viewGenerateEventsForChanges_(o,i,s,a){const et=a?[a]:o.eventRegistrations_;return eventGeneratorGenerateEventsForChanges(o.eventGenerator_,i,s,et)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor$1;function syncPointSetReferenceConstructor(o){assert(!referenceConstructor$1,"__referenceConstructor has already been defined"),referenceConstructor$1=o}function syncPointApplyOperation(o,i,s,a){const et=i.source.queryId;if(et!==null){const tt=o.views.get(et);return assert(tt!=null,"SyncTree gave us an op for an invalid query."),viewApplyOperation(tt,i,s,a)}else{let tt=[];for(const ot of o.views.values())tt=tt.concat(viewApplyOperation(ot,i,s,a));return tt}}function syncPointGetCompleteServerCache(o,i){let s=null;for(const a of o.views.values())s=s||viewGetCompleteServerCache(a,i);return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let referenceConstructor;function syncTreeSetReferenceConstructor(o){assert(!referenceConstructor,"__referenceConstructor has already been defined"),referenceConstructor=o}class SyncTree{constructor(i){this.listenProvider_=i,this.syncPointTree_=new ImmutableTree(null),this.pendingWriteTree_=newWriteTree(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function syncTreeApplyUserOverwrite(o,i,s,a,et){return writeTreeAddOverwrite(o.pendingWriteTree_,i,s,a,et),et?syncTreeApplyOperationToSyncPoints_(o,new Overwrite(newOperationSourceUser(),i,s)):[]}function syncTreeAckUserWrite(o,i,s=!1){const a=writeTreeGetWrite(o.pendingWriteTree_,i);if(writeTreeRemoveWrite(o.pendingWriteTree_,i)){let tt=new ImmutableTree(null);return a.snap!=null?tt=tt.set(newEmptyPath(),!0):each(a.children,ot=>{tt=tt.set(new Path(ot),!0)}),syncTreeApplyOperationToSyncPoints_(o,new AckUserWrite(a.path,tt,s))}else return[]}function syncTreeApplyServerOverwrite(o,i,s){return syncTreeApplyOperationToSyncPoints_(o,new Overwrite(newOperationSourceServer(),i,s))}function syncTreeApplyServerMerge(o,i,s){const a=ImmutableTree.fromObject(s);return syncTreeApplyOperationToSyncPoints_(o,new Merge(newOperationSourceServer(),i,a))}function syncTreeApplyTaggedQueryOverwrite(o,i,s,a){const et=syncTreeQueryKeyForTag_(o,a);if(et!=null){const tt=syncTreeParseQueryKey_(et),ot=tt.path,dt=tt.queryId,ht=newRelativePath(ot,i),ft=new Overwrite(newOperationSourceServerTaggedQuery(dt),ht,s);return syncTreeApplyTaggedOperation_(o,ot,ft)}else return[]}function syncTreeApplyTaggedQueryMerge(o,i,s,a){const et=syncTreeQueryKeyForTag_(o,a);if(et){const tt=syncTreeParseQueryKey_(et),ot=tt.path,dt=tt.queryId,ht=newRelativePath(ot,i),ft=ImmutableTree.fromObject(s),pt=new Merge(newOperationSourceServerTaggedQuery(dt),ht,ft);return syncTreeApplyTaggedOperation_(o,ot,pt)}else return[]}function syncTreeCalcCompleteEventCache(o,i,s){const et=o.pendingWriteTree_,tt=o.syncPointTree_.findOnPath(i,(ot,dt)=>{const ht=newRelativePath(ot,i),ft=syncPointGetCompleteServerCache(dt,ht);if(ft)return ft});return writeTreeCalcCompleteEventCache(et,i,tt,s,!0)}function syncTreeApplyOperationToSyncPoints_(o,i){return syncTreeApplyOperationHelper_(i,o.syncPointTree_,null,writeTreeChildWrites(o.pendingWriteTree_,newEmptyPath()))}function syncTreeApplyOperationHelper_(o,i,s,a){if(pathIsEmpty(o.path))return syncTreeApplyOperationDescendantsHelper_(o,i,s,a);{const et=i.get(newEmptyPath());s==null&&et!=null&&(s=syncPointGetCompleteServerCache(et,newEmptyPath()));let tt=[];const ot=pathGetFront(o.path),dt=o.operationForChild(ot),ht=i.children.get(ot);if(ht&&dt){const ft=s?s.getImmediateChild(ot):null,pt=writeTreeRefChild(a,ot);tt=tt.concat(syncTreeApplyOperationHelper_(dt,ht,ft,pt))}return et&&(tt=tt.concat(syncPointApplyOperation(et,o,a,s))),tt}}function syncTreeApplyOperationDescendantsHelper_(o,i,s,a){const et=i.get(newEmptyPath());s==null&&et!=null&&(s=syncPointGetCompleteServerCache(et,newEmptyPath()));let tt=[];return i.children.inorderTraversal((ot,dt)=>{const ht=s?s.getImmediateChild(ot):null,ft=writeTreeRefChild(a,ot),pt=o.operationForChild(ot);pt&&(tt=tt.concat(syncTreeApplyOperationDescendantsHelper_(pt,dt,ht,ft)))}),et&&(tt=tt.concat(syncPointApplyOperation(et,o,a,s))),tt}function syncTreeQueryKeyForTag_(o,i){return o.tagToQueryMap.get(i)}function syncTreeParseQueryKey_(o){const i=o.indexOf("$");return assert(i!==-1&&i<o.length-1,"Bad queryKey."),{queryId:o.substr(i+1),path:new Path(o.substr(0,i))}}function syncTreeApplyTaggedOperation_(o,i,s){const a=o.syncPointTree_.get(i);assert(a,"Missing sync point for query tag that we're tracking");const et=writeTreeChildWrites(o.pendingWriteTree_,i);return syncPointApplyOperation(a,s,et,null)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistingValueProvider{constructor(i){this.node_=i}getImmediateChild(i){const s=this.node_.getImmediateChild(i);return new ExistingValueProvider(s)}node(){return this.node_}}class DeferredValueProvider{constructor(i,s){this.syncTree_=i,this.path_=s}getImmediateChild(i){const s=pathChild(this.path_,i);return new DeferredValueProvider(this.syncTree_,s)}node(){return syncTreeCalcCompleteEventCache(this.syncTree_,this.path_)}}const generateWithValues=function(o){return o=o||{},o.timestamp=o.timestamp||new Date().getTime(),o},resolveDeferredLeafValue=function(o,i,s){if(!o||typeof o!="object")return o;if(assert(".sv"in o,"Unexpected leaf node or priority contents"),typeof o[".sv"]=="string")return resolveScalarDeferredValue(o[".sv"],i,s);if(typeof o[".sv"]=="object")return resolveComplexDeferredValue(o[".sv"],i);assert(!1,"Unexpected server value: "+JSON.stringify(o,null,2))},resolveScalarDeferredValue=function(o,i,s){switch(o){case"timestamp":return s.timestamp;default:assert(!1,"Unexpected server value: "+o)}},resolveComplexDeferredValue=function(o,i,s){o.hasOwnProperty("increment")||assert(!1,"Unexpected server value: "+JSON.stringify(o,null,2));const a=o.increment;typeof a!="number"&&assert(!1,"Unexpected increment value: "+a);const et=i.node();if(assert(et!==null&&typeof et<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!et.isLeafNode())return a;const ot=et.getValue();return typeof ot!="number"?a:ot+a},resolveDeferredValueTree=function(o,i,s,a){return resolveDeferredValue(i,new DeferredValueProvider(s,o),a)},resolveDeferredValueSnapshot=function(o,i,s){return resolveDeferredValue(o,new ExistingValueProvider(i),s)};function resolveDeferredValue(o,i,s){const a=o.getPriority().val(),et=resolveDeferredLeafValue(a,i.getImmediateChild(".priority"),s);let tt;if(o.isLeafNode()){const ot=o,dt=resolveDeferredLeafValue(ot.getValue(),i,s);return dt!==ot.getValue()||et!==ot.getPriority().val()?new LeafNode(dt,nodeFromJSON(et)):o}else{const ot=o;return tt=ot,et!==ot.getPriority().val()&&(tt=tt.updatePriority(new LeafNode(et))),ot.forEachChild(PRIORITY_INDEX,(dt,ht)=>{const ft=resolveDeferredValue(ht,i.getImmediateChild(dt),s);ft!==ht&&(tt=tt.updateImmediateChild(dt,ft))}),tt}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tree{constructor(i="",s=null,a={children:{},childCount:0}){this.name=i,this.parent=s,this.node=a}}function treeSubTree(o,i){let s=i instanceof Path?i:new Path(i),a=o,et=pathGetFront(s);for(;et!==null;){const tt=safeGet(a.node.children,et)||{children:{},childCount:0};a=new Tree(et,a,tt),s=pathPopFront(s),et=pathGetFront(s)}return a}function treeGetValue(o){return o.node.value}function treeSetValue(o,i){o.node.value=i,treeUpdateParents(o)}function treeHasChildren(o){return o.node.childCount>0}function treeIsEmpty(o){return treeGetValue(o)===void 0&&!treeHasChildren(o)}function treeForEachChild(o,i){each(o.node.children,(s,a)=>{i(new Tree(s,o,a))})}function treeForEachDescendant(o,i,s,a){s&&!a&&i(o),treeForEachChild(o,et=>{treeForEachDescendant(et,i,!0,a)}),s&&a&&i(o)}function treeForEachAncestor(o,i,s){let a=s?o:o.parent;for(;a!==null;){if(i(a))return!0;a=a.parent}return!1}function treeGetPath(o){return new Path(o.parent===null?o.name:treeGetPath(o.parent)+"/"+o.name)}function treeUpdateParents(o){o.parent!==null&&treeUpdateChild(o.parent,o.name,o)}function treeUpdateChild(o,i,s){const a=treeIsEmpty(s),et=contains$1(o.node.children,i);a&&et?(delete o.node.children[i],o.node.childCount--,treeUpdateParents(o)):!a&&!et&&(o.node.children[i]=s.node,o.node.childCount++,treeUpdateParents(o))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INVALID_KEY_REGEX_=/[\[\].#$\/\u0000-\u001F\u007F]/,INVALID_PATH_REGEX_=/[\[\].#$\u0000-\u001F\u007F]/,MAX_LEAF_SIZE_=10*1024*1024,isValidKey=function(o){return typeof o=="string"&&o.length!==0&&!INVALID_KEY_REGEX_.test(o)},isValidPathString=function(o){return typeof o=="string"&&o.length!==0&&!INVALID_PATH_REGEX_.test(o)},isValidRootPathString=function(o){return o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),isValidPathString(o)},validateFirebaseData=function(o,i,s){const a=s instanceof Path?new ValidationPath(s,o):s;if(i===void 0)throw new Error(o+"contains undefined "+validationPathToErrorString(a));if(typeof i=="function")throw new Error(o+"contains a function "+validationPathToErrorString(a)+" with contents = "+i.toString());if(isInvalidJSONNumber(i))throw new Error(o+"contains "+i.toString()+" "+validationPathToErrorString(a));if(typeof i=="string"&&i.length>MAX_LEAF_SIZE_/3&&stringLength(i)>MAX_LEAF_SIZE_)throw new Error(o+"contains a string greater than "+MAX_LEAF_SIZE_+" utf8 bytes "+validationPathToErrorString(a)+" ('"+i.substring(0,50)+"...')");if(i&&typeof i=="object"){let et=!1,tt=!1;if(each(i,(ot,dt)=>{if(ot===".value")et=!0;else if(ot!==".priority"&&ot!==".sv"&&(tt=!0,!isValidKey(ot)))throw new Error(o+" contains an invalid key ("+ot+") "+validationPathToErrorString(a)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);validationPathPush(a,ot),validateFirebaseData(o,dt,a),validationPathPop(a)}),et&&tt)throw new Error(o+' contains ".value" child '+validationPathToErrorString(a)+" in addition to actual children.")}},validateUrl=function(o,i){const s=i.path.toString();if(typeof i.repoInfo.host!="string"||i.repoInfo.host.length===0||!isValidKey(i.repoInfo.namespace)&&i.repoInfo.host.split(":")[0]!=="localhost"||s.length!==0&&!isValidRootPathString(s))throw new Error(errorPrefix(o,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EventQueue{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function eventQueueQueueEvents(o,i){let s=null;for(let a=0;a<i.length;a++){const et=i[a],tt=et.getPath();s!==null&&!pathEquals(tt,s.path)&&(o.eventLists_.push(s),s=null),s===null&&(s={events:[],path:tt}),s.events.push(et)}s&&o.eventLists_.push(s)}function eventQueueRaiseEventsForChangedPath(o,i,s){eventQueueQueueEvents(o,s),eventQueueRaiseQueuedEventsMatchingPredicate(o,a=>pathContains(a,i)||pathContains(i,a))}function eventQueueRaiseQueuedEventsMatchingPredicate(o,i){o.recursionDepth_++;let s=!0;for(let a=0;a<o.eventLists_.length;a++){const et=o.eventLists_[a];if(et){const tt=et.path;i(tt)?(eventListRaise(o.eventLists_[a]),o.eventLists_[a]=null):s=!1}}s&&(o.eventLists_=[]),o.recursionDepth_--}function eventListRaise(o){for(let i=0;i<o.events.length;i++){const s=o.events[i];if(s!==null){o.events[i]=null;const a=s.getEventRunner();logger&&log$1("event: "+s.toString()),exceptionGuard(a)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const INTERRUPT_REASON="repo_interrupt",MAX_TRANSACTION_RETRIES=25;class Repo{constructor(i,s,a,et){this.repoInfo_=i,this.forceRestClient_=s,this.authTokenProvider_=a,this.appCheckProvider_=et,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new EventQueue,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=newSparseSnapshotTree(),this.transactionQueueTree_=new Tree,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function repoStart(o,i,s){if(o.stats_=statsManagerGetCollection(o.repoInfo_),o.forceRestClient_||beingCrawled())o.server_=new ReadonlyRestClient(o.repoInfo_,(a,et,tt,ot)=>{repoOnDataUpdate(o,a,et,tt,ot)},o.authTokenProvider_,o.appCheckProvider_),setTimeout(()=>repoOnConnectStatus(o,!0),0);else{if(typeof s<"u"&&s!==null){if(typeof s!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{stringify(s)}catch(a){throw new Error("Invalid authOverride provided: "+a)}}o.persistentConnection_=new PersistentConnection(o.repoInfo_,i,(a,et,tt,ot)=>{repoOnDataUpdate(o,a,et,tt,ot)},a=>{repoOnConnectStatus(o,a)},a=>{repoOnServerInfoUpdate(o,a)},o.authTokenProvider_,o.appCheckProvider_,s),o.server_=o.persistentConnection_}o.authTokenProvider_.addTokenChangeListener(a=>{o.server_.refreshAuthToken(a)}),o.appCheckProvider_.addTokenChangeListener(a=>{o.server_.refreshAppCheckToken(a.token)}),o.statsReporter_=statsManagerGetOrCreateReporter(o.repoInfo_,()=>new StatsReporter(o.stats_,o.server_)),o.infoData_=new SnapshotHolder,o.infoSyncTree_=new SyncTree({startListening:(a,et,tt,ot)=>{let dt=[];const ht=o.infoData_.getNode(a._path);return ht.isEmpty()||(dt=syncTreeApplyServerOverwrite(o.infoSyncTree_,a._path,ht),setTimeout(()=>{ot("ok")},0)),dt},stopListening:()=>{}}),repoUpdateInfo(o,"connected",!1),o.serverSyncTree_=new SyncTree({startListening:(a,et,tt,ot)=>(o.server_.listen(a,tt,et,(dt,ht)=>{const ft=ot(dt,ht);eventQueueRaiseEventsForChangedPath(o.eventQueue_,a._path,ft)}),[]),stopListening:(a,et)=>{o.server_.unlisten(a,et)}})}function repoServerTime(o){const s=o.infoData_.getNode(new Path(".info/serverTimeOffset")).val()||0;return new Date().getTime()+s}function repoGenerateServerValues(o){return generateWithValues({timestamp:repoServerTime(o)})}function repoOnDataUpdate(o,i,s,a,et){o.dataUpdateCount++;const tt=new Path(i);s=o.interceptServerDataCallback_?o.interceptServerDataCallback_(i,s):s;let ot=[];if(et)if(a){const ht=map(s,ft=>nodeFromJSON(ft));ot=syncTreeApplyTaggedQueryMerge(o.serverSyncTree_,tt,ht,et)}else{const ht=nodeFromJSON(s);ot=syncTreeApplyTaggedQueryOverwrite(o.serverSyncTree_,tt,ht,et)}else if(a){const ht=map(s,ft=>nodeFromJSON(ft));ot=syncTreeApplyServerMerge(o.serverSyncTree_,tt,ht)}else{const ht=nodeFromJSON(s);ot=syncTreeApplyServerOverwrite(o.serverSyncTree_,tt,ht)}let dt=tt;ot.length>0&&(dt=repoRerunTransactions(o,tt)),eventQueueRaiseEventsForChangedPath(o.eventQueue_,dt,ot)}function repoOnConnectStatus(o,i){repoUpdateInfo(o,"connected",i),i===!1&&repoRunOnDisconnectEvents(o)}function repoOnServerInfoUpdate(o,i){each(i,(s,a)=>{repoUpdateInfo(o,s,a)})}function repoUpdateInfo(o,i,s){const a=new Path("/.info/"+i),et=nodeFromJSON(s);o.infoData_.updateSnapshot(a,et);const tt=syncTreeApplyServerOverwrite(o.infoSyncTree_,a,et);eventQueueRaiseEventsForChangedPath(o.eventQueue_,a,tt)}function repoGetNextWriteId(o){return o.nextWriteId_++}function repoRunOnDisconnectEvents(o){repoLog(o,"onDisconnectEvents");const i=repoGenerateServerValues(o),s=newSparseSnapshotTree();sparseSnapshotTreeForEachTree(o.onDisconnect_,newEmptyPath(),(et,tt)=>{const ot=resolveDeferredValueTree(et,tt,o.serverSyncTree_,i);sparseSnapshotTreeRemember(s,et,ot)});let a=[];sparseSnapshotTreeForEachTree(s,newEmptyPath(),(et,tt)=>{a=a.concat(syncTreeApplyServerOverwrite(o.serverSyncTree_,et,tt));const ot=repoAbortTransactions(o,et);repoRerunTransactions(o,ot)}),o.onDisconnect_=newSparseSnapshotTree(),eventQueueRaiseEventsForChangedPath(o.eventQueue_,newEmptyPath(),a)}function repoInterrupt(o){o.persistentConnection_&&o.persistentConnection_.interrupt(INTERRUPT_REASON)}function repoLog(o,...i){let s="";o.persistentConnection_&&(s=o.persistentConnection_.id+":"),log$1(s,...i)}function repoGetLatestState(o,i,s){return syncTreeCalcCompleteEventCache(o.serverSyncTree_,i,s)||ChildrenNode.EMPTY_NODE}function repoSendReadyTransactions(o,i=o.transactionQueueTree_){if(i||repoPruneCompletedTransactionsBelowNode(o,i),treeGetValue(i)){const s=repoBuildTransactionQueue(o,i);assert(s.length>0,"Sending zero length transaction queue"),s.every(et=>et.status===0)&&repoSendTransactionQueue(o,treeGetPath(i),s)}else treeHasChildren(i)&&treeForEachChild(i,s=>{repoSendReadyTransactions(o,s)})}function repoSendTransactionQueue(o,i,s){const a=s.map(ft=>ft.currentWriteId),et=repoGetLatestState(o,i,a);let tt=et;const ot=et.hash();for(let ft=0;ft<s.length;ft++){const pt=s[ft];assert(pt.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),pt.status=1,pt.retryCount++;const mt=newRelativePath(i,pt.path);tt=tt.updateChild(mt,pt.currentOutputSnapshotRaw)}const dt=tt.val(!0),ht=i;o.server_.put(ht.toString(),dt,ft=>{repoLog(o,"transaction put response",{path:ht.toString(),status:ft});let pt=[];if(ft==="ok"){const mt=[];for(let gt=0;gt<s.length;gt++)s[gt].status=2,pt=pt.concat(syncTreeAckUserWrite(o.serverSyncTree_,s[gt].currentWriteId)),s[gt].onComplete&&mt.push(()=>s[gt].onComplete(null,!0,s[gt].currentOutputSnapshotResolved)),s[gt].unwatcher();repoPruneCompletedTransactionsBelowNode(o,treeSubTree(o.transactionQueueTree_,i)),repoSendReadyTransactions(o,o.transactionQueueTree_),eventQueueRaiseEventsForChangedPath(o.eventQueue_,i,pt);for(let gt=0;gt<mt.length;gt++)exceptionGuard(mt[gt])}else{if(ft==="datastale")for(let mt=0;mt<s.length;mt++)s[mt].status===3?s[mt].status=4:s[mt].status=0;else{warn("transaction at "+ht.toString()+" failed: "+ft);for(let mt=0;mt<s.length;mt++)s[mt].status=4,s[mt].abortReason=ft}repoRerunTransactions(o,i)}},ot)}function repoRerunTransactions(o,i){const s=repoGetAncestorTransactionNode(o,i),a=treeGetPath(s),et=repoBuildTransactionQueue(o,s);return repoRerunTransactionQueue(o,et,a),a}function repoRerunTransactionQueue(o,i,s){if(i.length===0)return;const a=[];let et=[];const ot=i.filter(dt=>dt.status===0).map(dt=>dt.currentWriteId);for(let dt=0;dt<i.length;dt++){const ht=i[dt],ft=newRelativePath(s,ht.path);let pt=!1,mt;if(assert(ft!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),ht.status===4)pt=!0,mt=ht.abortReason,et=et.concat(syncTreeAckUserWrite(o.serverSyncTree_,ht.currentWriteId,!0));else if(ht.status===0)if(ht.retryCount>=MAX_TRANSACTION_RETRIES)pt=!0,mt="maxretry",et=et.concat(syncTreeAckUserWrite(o.serverSyncTree_,ht.currentWriteId,!0));else{const gt=repoGetLatestState(o,ht.path,ot);ht.currentInputSnapshot=gt;const _t=i[dt].update(gt.val());if(_t!==void 0){validateFirebaseData("transaction failed: Data returned ",_t,ht.path);let yt=nodeFromJSON(_t);typeof _t=="object"&&_t!=null&&contains$1(_t,".priority")||(yt=yt.updatePriority(gt.getPriority()));const Et=ht.currentWriteId,vt=repoGenerateServerValues(o),bt=resolveDeferredValueSnapshot(yt,gt,vt);ht.currentOutputSnapshotRaw=yt,ht.currentOutputSnapshotResolved=bt,ht.currentWriteId=repoGetNextWriteId(o),ot.splice(ot.indexOf(Et),1),et=et.concat(syncTreeApplyUserOverwrite(o.serverSyncTree_,ht.path,bt,ht.currentWriteId,ht.applyLocally)),et=et.concat(syncTreeAckUserWrite(o.serverSyncTree_,Et,!0))}else pt=!0,mt="nodata",et=et.concat(syncTreeAckUserWrite(o.serverSyncTree_,ht.currentWriteId,!0))}eventQueueRaiseEventsForChangedPath(o.eventQueue_,s,et),et=[],pt&&(i[dt].status=2,function(gt){setTimeout(gt,Math.floor(0))}(i[dt].unwatcher),i[dt].onComplete&&(mt==="nodata"?a.push(()=>i[dt].onComplete(null,!1,i[dt].currentInputSnapshot)):a.push(()=>i[dt].onComplete(new Error(mt),!1,null))))}repoPruneCompletedTransactionsBelowNode(o,o.transactionQueueTree_);for(let dt=0;dt<a.length;dt++)exceptionGuard(a[dt]);repoSendReadyTransactions(o,o.transactionQueueTree_)}function repoGetAncestorTransactionNode(o,i){let s,a=o.transactionQueueTree_;for(s=pathGetFront(i);s!==null&&treeGetValue(a)===void 0;)a=treeSubTree(a,s),i=pathPopFront(i),s=pathGetFront(i);return a}function repoBuildTransactionQueue(o,i){const s=[];return repoAggregateTransactionQueuesForNode(o,i,s),s.sort((a,et)=>a.order-et.order),s}function repoAggregateTransactionQueuesForNode(o,i,s){const a=treeGetValue(i);if(a)for(let et=0;et<a.length;et++)s.push(a[et]);treeForEachChild(i,et=>{repoAggregateTransactionQueuesForNode(o,et,s)})}function repoPruneCompletedTransactionsBelowNode(o,i){const s=treeGetValue(i);if(s){let a=0;for(let et=0;et<s.length;et++)s[et].status!==2&&(s[a]=s[et],a++);s.length=a,treeSetValue(i,s.length>0?s:void 0)}treeForEachChild(i,a=>{repoPruneCompletedTransactionsBelowNode(o,a)})}function repoAbortTransactions(o,i){const s=treeGetPath(repoGetAncestorTransactionNode(o,i)),a=treeSubTree(o.transactionQueueTree_,i);return treeForEachAncestor(a,et=>{repoAbortTransactionsOnNode(o,et)}),repoAbortTransactionsOnNode(o,a),treeForEachDescendant(a,et=>{repoAbortTransactionsOnNode(o,et)}),s}function repoAbortTransactionsOnNode(o,i){const s=treeGetValue(i);if(s){const a=[];let et=[],tt=-1;for(let ot=0;ot<s.length;ot++)s[ot].status===3||(s[ot].status===1?(assert(tt===ot-1,"All SENT items should be at beginning of queue."),tt=ot,s[ot].status=3,s[ot].abortReason="set"):(assert(s[ot].status===0,"Unexpected transaction status in abort"),s[ot].unwatcher(),et=et.concat(syncTreeAckUserWrite(o.serverSyncTree_,s[ot].currentWriteId,!0)),s[ot].onComplete&&a.push(s[ot].onComplete.bind(null,new Error("set"),!1,null))));tt===-1?treeSetValue(i,void 0):s.length=tt+1,eventQueueRaiseEventsForChangedPath(o.eventQueue_,treeGetPath(i),et);for(let ot=0;ot<a.length;ot++)exceptionGuard(a[ot])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodePath(o){let i="";const s=o.split("/");for(let a=0;a<s.length;a++)if(s[a].length>0){let et=s[a];try{et=decodeURIComponent(et.replace(/\+/g," "))}catch{}i+="/"+et}return i}function decodeQuery(o){const i={};o.charAt(0)==="?"&&(o=o.substring(1));for(const s of o.split("&")){if(s.length===0)continue;const a=s.split("=");a.length===2?i[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):warn(`Invalid query segment '${s}' in query '${o}'`)}return i}const parseRepoInfo=function(o,i){const s=parseDatabaseURL(o),a=s.namespace;s.domain==="firebase.com"&&fatal(s.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!a||a==="undefined")&&s.domain!=="localhost"&&fatal("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),s.secure||warnIfPageIsSecure();const et=s.scheme==="ws"||s.scheme==="wss";return{repoInfo:new RepoInfo(s.host,s.secure,a,et,i,"",a!==s.subdomain),path:new Path(s.pathString)}},parseDatabaseURL=function(o){let i="",s="",a="",et="",tt="",ot=!0,dt="https",ht=443;if(typeof o=="string"){let ft=o.indexOf("//");ft>=0&&(dt=o.substring(0,ft-1),o=o.substring(ft+2));let pt=o.indexOf("/");pt===-1&&(pt=o.length);let mt=o.indexOf("?");mt===-1&&(mt=o.length),i=o.substring(0,Math.min(pt,mt)),pt<mt&&(et=decodePath(o.substring(pt,mt)));const gt=decodeQuery(o.substring(Math.min(o.length,mt)));ft=i.indexOf(":"),ft>=0?(ot=dt==="https"||dt==="wss",ht=parseInt(i.substring(ft+1),10)):ft=i.length;const _t=i.slice(0,ft);if(_t.toLowerCase()==="localhost")s="localhost";else if(_t.split(".").length<=2)s=_t;else{const yt=i.indexOf(".");a=i.substring(0,yt).toLowerCase(),s=i.substring(yt+1),tt=a}"ns"in gt&&(tt=gt.ns)}return{host:i,port:ht,domain:s,subdomain:a,secure:ot,scheme:dt,pathString:et,namespace:tt}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryImpl{constructor(i,s,a,et){this._repo=i,this._path=s,this._queryParams=a,this._orderByCalled=et}get key(){return pathIsEmpty(this._path)?null:pathGetBack(this._path)}get ref(){return new ReferenceImpl(this._repo,this._path)}get _queryIdentifier(){const i=queryParamsGetQueryObject(this._queryParams),s=ObjectToUniqueKey(i);return s==="{}"?"default":s}get _queryObject(){return queryParamsGetQueryObject(this._queryParams)}isEqual(i){if(i=getModularInstance(i),!(i instanceof QueryImpl))return!1;const s=this._repo===i._repo,a=pathEquals(this._path,i._path),et=this._queryIdentifier===i._queryIdentifier;return s&&a&&et}toJSON(){return this.toString()}toString(){return this._repo.toString()+pathToUrlEncodedString(this._path)}}class ReferenceImpl extends QueryImpl{constructor(i,s){super(i,s,new QueryParams,!1)}get parent(){const i=pathParent(this._path);return i===null?null:new ReferenceImpl(this._repo,i)}get root(){let i=this;for(;i.parent!==null;)i=i.parent;return i}}syncPointSetReferenceConstructor(ReferenceImpl);syncTreeSetReferenceConstructor(ReferenceImpl);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FIREBASE_DATABASE_EMULATOR_HOST_VAR="FIREBASE_DATABASE_EMULATOR_HOST",repos={};let useRestClient=!1;function repoManagerDatabaseFromApp(o,i,s,a,et){let tt=a||o.options.databaseURL;tt===void 0&&(o.options.projectId||fatal("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),log$1("Using default host for project ",o.options.projectId),tt=`${o.options.projectId}-default-rtdb.firebaseio.com`);let ot=parseRepoInfo(tt,et),dt=ot.repoInfo,ht,ft;typeof process<"u"&&define_process_env_default&&(ft=define_process_env_default[FIREBASE_DATABASE_EMULATOR_HOST_VAR]),ft?(ht=!0,tt=`http://${ft}?ns=${dt.namespace}`,ot=parseRepoInfo(tt,et),dt=ot.repoInfo):ht=!ot.repoInfo.secure;const pt=et&&ht?new EmulatorTokenProvider(EmulatorTokenProvider.OWNER):new FirebaseAuthTokenProvider(o.name,o.options,i);validateUrl("Invalid Firebase Database URL",ot),pathIsEmpty(ot.path)||fatal("Database URL must point to the root of a Firebase Database (not including a child path).");const mt=repoManagerCreateRepo(dt,o,pt,new AppCheckTokenProvider(o.name,s));return new Database(mt,o)}function repoManagerDeleteRepo(o,i){const s=repos[i];(!s||s[o.key]!==o)&&fatal(`Database ${i}(${o.repoInfo_}) has already been deleted.`),repoInterrupt(o),delete s[o.key]}function repoManagerCreateRepo(o,i,s,a){let et=repos[i.name];et||(et={},repos[i.name]=et);let tt=et[o.toURLString()];return tt&&fatal("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),tt=new Repo(o,useRestClient,s,a),et[o.toURLString()]=tt,tt}class Database{constructor(i,s){this._repoInternal=i,this.app=s,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(repoStart(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new ReferenceImpl(this._repo,newEmptyPath())),this._rootInternal}_delete(){return this._rootInternal!==null&&(repoManagerDeleteRepo(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){this._rootInternal===null&&fatal("Cannot call "+i+" on a deleted database.")}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerDatabase(o){setSDKVersion(SDK_VERSION$1),_registerComponent(new Component("database",(i,{instanceIdentifier:s})=>{const a=i.getProvider("app").getImmediate(),et=i.getProvider("auth-internal"),tt=i.getProvider("app-check-internal");return repoManagerDatabaseFromApp(a,et,tt,s)},"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version$2,o),registerVersion(name,version$2,"esm2017")}PersistentConnection.prototype.simpleListen=function(o,i){this.sendRequest("q",{p:o},i)};PersistentConnection.prototype.echo=function(o,i){this.sendRequest("echo",{d:o},i)};registerDatabase();const firebaseConfig={apiKey:"AIzaSyC2Vd--TSqhn_v7VJSfJYfANAy0Gqh17Ro",authDomain:"chat-8d7b2.firebaseapp.com",projectId:"chat-8d7b2",storageBucket:"chat-8d7b2.appspot.com",messagingSenderId:"1000952675894",appId:"1:1000952675894:web:a0e4c94b53387db5b3a297"},app=initializeApp(firebaseConfig),auth=getAuth(app),db=getFirestore(app);new GoogleAuthProvider;const AuthContext=reactExports.createContext(),AuthProvider=({children:o})=>{const[i,s]=reactExports.useState(null),a=tt=>{s(tt)},et=()=>{s(null)};return jsxRuntimeExports.jsx(AuthContext.Provider,{value:{user:i,login:a,logout:et},children:o})},useAuth=()=>reactExports.useContext(AuthContext);var IconContext=reactExports.createContext({});const IconContext$1=IconContext;function _extends$x(){return _extends$x=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$x.apply(this,arguments)}function _arrayWithHoles$8(o){if(Array.isArray(o))return o}function _iterableToArrayLimit$8(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayLikeToArray$8(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _unsupportedIterableToArray$8(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$8(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$8(o,i)}}function _nonIterableRest$8(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _slicedToArray$8(o,i){return _arrayWithHoles$8(o)||_iterableToArrayLimit$8(o,i)||_unsupportedIterableToArray$8(o,i)||_nonIterableRest$8()}function _typeof$i(o){"@babel/helpers - typeof";return _typeof$i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$i(o)}function toPrimitive(o,i){if(_typeof$i(o)!="object"||!o)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$i(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function toPropertyKey(o){var i=toPrimitive(o,"string");return _typeof$i(i)=="symbol"?i:String(i)}function _defineProperty$g(o,i,s){return i=toPropertyKey(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _objectWithoutPropertiesLoose$y(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function _objectWithoutProperties$y(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$y(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}var classnames={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(o){(function(){var i={}.hasOwnProperty;function s(){for(var tt="",ot=0;ot<arguments.length;ot++){var dt=arguments[ot];dt&&(tt=et(tt,a(dt)))}return tt}function a(tt){if(typeof tt=="string"||typeof tt=="number")return tt;if(typeof tt!="object")return"";if(Array.isArray(tt))return s.apply(null,tt);if(tt.toString!==Object.prototype.toString&&!tt.toString.toString().includes("[native code]"))return tt.toString();var ot="";for(var dt in tt)i.call(tt,dt)&&tt[dt]&&(ot=et(ot,dt));return ot}function et(tt,ot){return ot?tt?tt+" "+ot:tt+ot:tt}o.exports?(s.default=s,o.exports=s):window.classNames=s})()})(classnames);var classnamesExports=classnames.exports;const classNames=getDefaultExportFromCjs(classnamesExports);function bound01(o,i){isOnePointZero(o)&&(o="100%");var s=isPercentage(o);return o=i===360?o:Math.min(i,Math.max(0,parseFloat(o))),s&&(o=parseInt(String(o*i),10)/100),Math.abs(o-i)<1e-6?1:(i===360?o=(o<0?o%i+i:o%i)/parseFloat(String(i)):o=o%i/parseFloat(String(i)),o)}function clamp01(o){return Math.min(1,Math.max(0,o))}function isOnePointZero(o){return typeof o=="string"&&o.indexOf(".")!==-1&&parseFloat(o)===1}function isPercentage(o){return typeof o=="string"&&o.indexOf("%")!==-1}function boundAlpha(o){return o=parseFloat(o),(isNaN(o)||o<0||o>1)&&(o=1),o}function convertToPercentage(o){return o<=1?"".concat(Number(o)*100,"%"):o}function pad2(o){return o.length===1?"0"+o:String(o)}function rgbToRgb(o,i,s){return{r:bound01(o,255)*255,g:bound01(i,255)*255,b:bound01(s,255)*255}}function rgbToHsl(o,i,s){o=bound01(o,255),i=bound01(i,255),s=bound01(s,255);var a=Math.max(o,i,s),et=Math.min(o,i,s),tt=0,ot=0,dt=(a+et)/2;if(a===et)ot=0,tt=0;else{var ht=a-et;switch(ot=dt>.5?ht/(2-a-et):ht/(a+et),a){case o:tt=(i-s)/ht+(i<s?6:0);break;case i:tt=(s-o)/ht+2;break;case s:tt=(o-i)/ht+4;break}tt/=6}return{h:tt,s:ot,l:dt}}function hue2rgb(o,i,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?o+(i-o)*(6*s):s<1/2?i:s<2/3?o+(i-o)*(2/3-s)*6:o}function hslToRgb(o,i,s){var a,et,tt;if(o=bound01(o,360),i=bound01(i,100),s=bound01(s,100),i===0)et=s,tt=s,a=s;else{var ot=s<.5?s*(1+i):s+i-s*i,dt=2*s-ot;a=hue2rgb(dt,ot,o+1/3),et=hue2rgb(dt,ot,o),tt=hue2rgb(dt,ot,o-1/3)}return{r:a*255,g:et*255,b:tt*255}}function rgbToHsv(o,i,s){o=bound01(o,255),i=bound01(i,255),s=bound01(s,255);var a=Math.max(o,i,s),et=Math.min(o,i,s),tt=0,ot=a,dt=a-et,ht=a===0?0:dt/a;if(a===et)tt=0;else{switch(a){case o:tt=(i-s)/dt+(i<s?6:0);break;case i:tt=(s-o)/dt+2;break;case s:tt=(o-i)/dt+4;break}tt/=6}return{h:tt,s:ht,v:ot}}function hsvToRgb(o,i,s){o=bound01(o,360)*6,i=bound01(i,100),s=bound01(s,100);var a=Math.floor(o),et=o-a,tt=s*(1-i),ot=s*(1-et*i),dt=s*(1-(1-et)*i),ht=a%6,ft=[s,ot,tt,tt,dt,s][ht],pt=[dt,s,s,ot,tt,tt][ht],mt=[tt,tt,dt,s,s,ot][ht];return{r:ft*255,g:pt*255,b:mt*255}}function rgbToHex(o,i,s,a){var et=[pad2(Math.round(o).toString(16)),pad2(Math.round(i).toString(16)),pad2(Math.round(s).toString(16))];return a&&et[0].startsWith(et[0].charAt(1))&&et[1].startsWith(et[1].charAt(1))&&et[2].startsWith(et[2].charAt(1))?et[0].charAt(0)+et[1].charAt(0)+et[2].charAt(0):et.join("")}function rgbaToHex(o,i,s,a,et){var tt=[pad2(Math.round(o).toString(16)),pad2(Math.round(i).toString(16)),pad2(Math.round(s).toString(16)),pad2(convertDecimalToHex(a))];return et&&tt[0].startsWith(tt[0].charAt(1))&&tt[1].startsWith(tt[1].charAt(1))&&tt[2].startsWith(tt[2].charAt(1))&&tt[3].startsWith(tt[3].charAt(1))?tt[0].charAt(0)+tt[1].charAt(0)+tt[2].charAt(0)+tt[3].charAt(0):tt.join("")}function convertDecimalToHex(o){return Math.round(parseFloat(o)*255).toString(16)}function convertHexToDecimal(o){return parseIntFromHex(o)/255}function parseIntFromHex(o){return parseInt(o,16)}function numberInputToObject(o){return{r:o>>16,g:(o&65280)>>8,b:o&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(o){var i={r:0,g:0,b:0},s=1,a=null,et=null,tt=null,ot=!1,dt=!1;return typeof o=="string"&&(o=stringInputToObject(o)),typeof o=="object"&&(isValidCSSUnit(o.r)&&isValidCSSUnit(o.g)&&isValidCSSUnit(o.b)?(i=rgbToRgb(o.r,o.g,o.b),ot=!0,dt=String(o.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(o.h)&&isValidCSSUnit(o.s)&&isValidCSSUnit(o.v)?(a=convertToPercentage(o.s),et=convertToPercentage(o.v),i=hsvToRgb(o.h,a,et),ot=!0,dt="hsv"):isValidCSSUnit(o.h)&&isValidCSSUnit(o.s)&&isValidCSSUnit(o.l)&&(a=convertToPercentage(o.s),tt=convertToPercentage(o.l),i=hslToRgb(o.h,a,tt),ot=!0,dt="hsl"),Object.prototype.hasOwnProperty.call(o,"a")&&(s=o.a)),s=boundAlpha(s),{ok:ot,format:o.format||dt,r:Math.min(255,Math.max(i.r,0)),g:Math.min(255,Math.max(i.g,0)),b:Math.min(255,Math.max(i.b,0)),a:s}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(o){if(o=o.trim().toLowerCase(),o.length===0)return!1;var i=!1;if(names[o])o=names[o],i=!0;else if(o==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var s=matchers.rgb.exec(o);return s?{r:s[1],g:s[2],b:s[3]}:(s=matchers.rgba.exec(o),s?{r:s[1],g:s[2],b:s[3],a:s[4]}:(s=matchers.hsl.exec(o),s?{h:s[1],s:s[2],l:s[3]}:(s=matchers.hsla.exec(o),s?{h:s[1],s:s[2],l:s[3],a:s[4]}:(s=matchers.hsv.exec(o),s?{h:s[1],s:s[2],v:s[3]}:(s=matchers.hsva.exec(o),s?{h:s[1],s:s[2],v:s[3],a:s[4]}:(s=matchers.hex8.exec(o),s?{r:parseIntFromHex(s[1]),g:parseIntFromHex(s[2]),b:parseIntFromHex(s[3]),a:convertHexToDecimal(s[4]),format:i?"name":"hex8"}:(s=matchers.hex6.exec(o),s?{r:parseIntFromHex(s[1]),g:parseIntFromHex(s[2]),b:parseIntFromHex(s[3]),format:i?"name":"hex"}:(s=matchers.hex4.exec(o),s?{r:parseIntFromHex(s[1]+s[1]),g:parseIntFromHex(s[2]+s[2]),b:parseIntFromHex(s[3]+s[3]),a:convertHexToDecimal(s[4]+s[4]),format:i?"name":"hex8"}:(s=matchers.hex3.exec(o),s?{r:parseIntFromHex(s[1]+s[1]),g:parseIntFromHex(s[2]+s[2]),b:parseIntFromHex(s[3]+s[3]),format:i?"name":"hex"}:!1)))))))))}function isValidCSSUnit(o){return!!matchers.CSS_UNIT.exec(String(o))}var TinyColor=function(){function o(i,s){i===void 0&&(i=""),s===void 0&&(s={});var a;if(i instanceof o)return i;typeof i=="number"&&(i=numberInputToObject(i)),this.originalInput=i;var et=inputToRGB(i);this.originalInput=i,this.r=et.r,this.g=et.g,this.b=et.b,this.a=et.a,this.roundA=Math.round(100*this.a)/100,this.format=(a=s.format)!==null&&a!==void 0?a:et.format,this.gradientType=s.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=et.ok}return o.prototype.isDark=function(){return this.getBrightness()<128},o.prototype.isLight=function(){return!this.isDark()},o.prototype.getBrightness=function(){var i=this.toRgb();return(i.r*299+i.g*587+i.b*114)/1e3},o.prototype.getLuminance=function(){var i=this.toRgb(),s,a,et,tt=i.r/255,ot=i.g/255,dt=i.b/255;return tt<=.03928?s=tt/12.92:s=Math.pow((tt+.055)/1.055,2.4),ot<=.03928?a=ot/12.92:a=Math.pow((ot+.055)/1.055,2.4),dt<=.03928?et=dt/12.92:et=Math.pow((dt+.055)/1.055,2.4),.2126*s+.7152*a+.0722*et},o.prototype.getAlpha=function(){return this.a},o.prototype.setAlpha=function(i){return this.a=boundAlpha(i),this.roundA=Math.round(100*this.a)/100,this},o.prototype.isMonochrome=function(){var i=this.toHsl().s;return i===0},o.prototype.toHsv=function(){var i=rgbToHsv(this.r,this.g,this.b);return{h:i.h*360,s:i.s,v:i.v,a:this.a}},o.prototype.toHsvString=function(){var i=rgbToHsv(this.r,this.g,this.b),s=Math.round(i.h*360),a=Math.round(i.s*100),et=Math.round(i.v*100);return this.a===1?"hsv(".concat(s,", ").concat(a,"%, ").concat(et,"%)"):"hsva(".concat(s,", ").concat(a,"%, ").concat(et,"%, ").concat(this.roundA,")")},o.prototype.toHsl=function(){var i=rgbToHsl(this.r,this.g,this.b);return{h:i.h*360,s:i.s,l:i.l,a:this.a}},o.prototype.toHslString=function(){var i=rgbToHsl(this.r,this.g,this.b),s=Math.round(i.h*360),a=Math.round(i.s*100),et=Math.round(i.l*100);return this.a===1?"hsl(".concat(s,", ").concat(a,"%, ").concat(et,"%)"):"hsla(".concat(s,", ").concat(a,"%, ").concat(et,"%, ").concat(this.roundA,")")},o.prototype.toHex=function(i){return i===void 0&&(i=!1),rgbToHex(this.r,this.g,this.b,i)},o.prototype.toHexString=function(i){return i===void 0&&(i=!1),"#"+this.toHex(i)},o.prototype.toHex8=function(i){return i===void 0&&(i=!1),rgbaToHex(this.r,this.g,this.b,this.a,i)},o.prototype.toHex8String=function(i){return i===void 0&&(i=!1),"#"+this.toHex8(i)},o.prototype.toHexShortString=function(i){return i===void 0&&(i=!1),this.a===1?this.toHexString(i):this.toHex8String(i)},o.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},o.prototype.toRgbString=function(){var i=Math.round(this.r),s=Math.round(this.g),a=Math.round(this.b);return this.a===1?"rgb(".concat(i,", ").concat(s,", ").concat(a,")"):"rgba(".concat(i,", ").concat(s,", ").concat(a,", ").concat(this.roundA,")")},o.prototype.toPercentageRgb=function(){var i=function(s){return"".concat(Math.round(bound01(s,255)*100),"%")};return{r:i(this.r),g:i(this.g),b:i(this.b),a:this.a}},o.prototype.toPercentageRgbString=function(){var i=function(s){return Math.round(bound01(s,255)*100)};return this.a===1?"rgb(".concat(i(this.r),"%, ").concat(i(this.g),"%, ").concat(i(this.b),"%)"):"rgba(".concat(i(this.r),"%, ").concat(i(this.g),"%, ").concat(i(this.b),"%, ").concat(this.roundA,")")},o.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var i="#"+rgbToHex(this.r,this.g,this.b,!1),s=0,a=Object.entries(names);s<a.length;s++){var et=a[s],tt=et[0],ot=et[1];if(i===ot)return tt}return!1},o.prototype.toString=function(i){var s=!!i;i=i??this.format;var a=!1,et=this.a<1&&this.a>=0,tt=!s&&et&&(i.startsWith("hex")||i==="name");return tt?i==="name"&&this.a===0?this.toName():this.toRgbString():(i==="rgb"&&(a=this.toRgbString()),i==="prgb"&&(a=this.toPercentageRgbString()),(i==="hex"||i==="hex6")&&(a=this.toHexString()),i==="hex3"&&(a=this.toHexString(!0)),i==="hex4"&&(a=this.toHex8String(!0)),i==="hex8"&&(a=this.toHex8String()),i==="name"&&(a=this.toName()),i==="hsl"&&(a=this.toHslString()),i==="hsv"&&(a=this.toHsvString()),a||this.toHexString())},o.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},o.prototype.clone=function(){return new o(this.toString())},o.prototype.lighten=function(i){i===void 0&&(i=10);var s=this.toHsl();return s.l+=i/100,s.l=clamp01(s.l),new o(s)},o.prototype.brighten=function(i){i===void 0&&(i=10);var s=this.toRgb();return s.r=Math.max(0,Math.min(255,s.r-Math.round(255*-(i/100)))),s.g=Math.max(0,Math.min(255,s.g-Math.round(255*-(i/100)))),s.b=Math.max(0,Math.min(255,s.b-Math.round(255*-(i/100)))),new o(s)},o.prototype.darken=function(i){i===void 0&&(i=10);var s=this.toHsl();return s.l-=i/100,s.l=clamp01(s.l),new o(s)},o.prototype.tint=function(i){return i===void 0&&(i=10),this.mix("white",i)},o.prototype.shade=function(i){return i===void 0&&(i=10),this.mix("black",i)},o.prototype.desaturate=function(i){i===void 0&&(i=10);var s=this.toHsl();return s.s-=i/100,s.s=clamp01(s.s),new o(s)},o.prototype.saturate=function(i){i===void 0&&(i=10);var s=this.toHsl();return s.s+=i/100,s.s=clamp01(s.s),new o(s)},o.prototype.greyscale=function(){return this.desaturate(100)},o.prototype.spin=function(i){var s=this.toHsl(),a=(s.h+i)%360;return s.h=a<0?360+a:a,new o(s)},o.prototype.mix=function(i,s){s===void 0&&(s=50);var a=this.toRgb(),et=new o(i).toRgb(),tt=s/100,ot={r:(et.r-a.r)*tt+a.r,g:(et.g-a.g)*tt+a.g,b:(et.b-a.b)*tt+a.b,a:(et.a-a.a)*tt+a.a};return new o(ot)},o.prototype.analogous=function(i,s){i===void 0&&(i=6),s===void 0&&(s=30);var a=this.toHsl(),et=360/s,tt=[this];for(a.h=(a.h-(et*i>>1)+720)%360;--i;)a.h=(a.h+et)%360,tt.push(new o(a));return tt},o.prototype.complement=function(){var i=this.toHsl();return i.h=(i.h+180)%360,new o(i)},o.prototype.monochromatic=function(i){i===void 0&&(i=6);for(var s=this.toHsv(),a=s.h,et=s.s,tt=s.v,ot=[],dt=1/i;i--;)ot.push(new o({h:a,s:et,v:tt})),tt=(tt+dt)%1;return ot},o.prototype.splitcomplement=function(){var i=this.toHsl(),s=i.h;return[this,new o({h:(s+72)%360,s:i.s,l:i.l}),new o({h:(s+216)%360,s:i.s,l:i.l})]},o.prototype.onBackground=function(i){var s=this.toRgb(),a=new o(i).toRgb(),et=s.a+a.a*(1-s.a);return new o({r:(s.r*s.a+a.r*a.a*(1-s.a))/et,g:(s.g*s.a+a.g*a.a*(1-s.a))/et,b:(s.b*s.a+a.b*a.a*(1-s.a))/et,a:et})},o.prototype.triad=function(){return this.polyad(3)},o.prototype.tetrad=function(){return this.polyad(4)},o.prototype.polyad=function(i){for(var s=this.toHsl(),a=s.h,et=[this],tt=360/i,ot=1;ot<i;ot++)et.push(new o({h:(a+ot*tt)%360,s:s.s,l:s.l}));return et},o.prototype.equals=function(i){return this.toRgbString()===new o(i).toRgbString()},o}(),hueStep=2,saturationStep=.16,saturationStep2=.05,brightnessStep1=.05,brightnessStep2=.15,lightColorCount=5,darkColorCount=4,darkColorMap=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function toHsv(o){var i=o.r,s=o.g,a=o.b,et=rgbToHsv(i,s,a);return{h:et.h*360,s:et.s,v:et.v}}function toHex(o){var i=o.r,s=o.g,a=o.b;return"#".concat(rgbToHex(i,s,a,!1))}function mix(o,i,s){var a=s/100,et={r:(i.r-o.r)*a+o.r,g:(i.g-o.g)*a+o.g,b:(i.b-o.b)*a+o.b};return et}function getHue(o,i,s){var a;return Math.round(o.h)>=60&&Math.round(o.h)<=240?a=s?Math.round(o.h)-hueStep*i:Math.round(o.h)+hueStep*i:a=s?Math.round(o.h)+hueStep*i:Math.round(o.h)-hueStep*i,a<0?a+=360:a>=360&&(a-=360),a}function getSaturation(o,i,s){if(o.h===0&&o.s===0)return o.s;var a;return s?a=o.s-saturationStep*i:i===darkColorCount?a=o.s+saturationStep:a=o.s+saturationStep2*i,a>1&&(a=1),s&&i===lightColorCount&&a>.1&&(a=.1),a<.06&&(a=.06),Number(a.toFixed(2))}function getValue(o,i,s){var a;return s?a=o.v+brightnessStep1*i:a=o.v-brightnessStep2*i,a>1&&(a=1),Number(a.toFixed(2))}function generate$1(o){for(var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=[],a=inputToRGB(o),et=lightColorCount;et>0;et-=1){var tt=toHsv(a),ot=toHex(inputToRGB({h:getHue(tt,et,!0),s:getSaturation(tt,et,!0),v:getValue(tt,et,!0)}));s.push(ot)}s.push(toHex(a));for(var dt=1;dt<=darkColorCount;dt+=1){var ht=toHsv(a),ft=toHex(inputToRGB({h:getHue(ht,dt),s:getSaturation(ht,dt),v:getValue(ht,dt)}));s.push(ft)}return i.theme==="dark"?darkColorMap.map(function(pt){var mt=pt.index,gt=pt.opacity,_t=toHex(mix(inputToRGB(i.backgroundColor||"#141414"),inputToRGB(s[mt]),gt*100));return _t}):s}var presetPrimaryColors={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},presetPalettes={},presetDarkPalettes={};Object.keys(presetPrimaryColors).forEach(function(o){presetPalettes[o]=generate$1(presetPrimaryColors[o]),presetPalettes[o].primary=presetPalettes[o][5],presetDarkPalettes[o]=generate$1(presetPrimaryColors[o],{theme:"dark",backgroundColor:"#141414"}),presetDarkPalettes[o].primary=presetDarkPalettes[o][5]});var blue=presetPalettes.blue;function ownKeys$2(o,i){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);i&&(a=a.filter(function(et){return Object.getOwnPropertyDescriptor(o,et).enumerable})),s.push.apply(s,a)}return s}function _objectSpread2$1(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$2(Object(s),!0).forEach(function(a){_defineProperty$g(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):ownKeys$2(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}function canUseDom(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function contains(o,i){if(!o)return!1;if(o.contains)return o.contains(i);for(var s=i;s;){if(s===o)return!0;s=s.parentNode}return!1}var APPEND_ORDER="data-rc-order",APPEND_PRIORITY="data-rc-priority",MARK_KEY="rc-util-key",containerCache=new Map;function getMark(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=o.mark;return i?i.startsWith("data-")?i:"data-".concat(i):MARK_KEY}function getContainer(o){if(o.attachTo)return o.attachTo;var i=document.querySelector("head");return i||document.body}function getOrder(o){return o==="queue"?"prependQueue":o?"prepend":"append"}function findStyles(o){return Array.from((containerCache.get(o)||o).children).filter(function(i){return i.tagName==="STYLE"})}function injectCSS(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!canUseDom())return null;var s=i.csp,a=i.prepend,et=i.priority,tt=et===void 0?0:et,ot=getOrder(a),dt=ot==="prependQueue",ht=document.createElement("style");ht.setAttribute(APPEND_ORDER,ot),dt&&tt&&ht.setAttribute(APPEND_PRIORITY,"".concat(tt)),s!=null&&s.nonce&&(ht.nonce=s==null?void 0:s.nonce),ht.innerHTML=o;var ft=getContainer(i),pt=ft.firstChild;if(a){if(dt){var mt=findStyles(ft).filter(function(gt){if(!["prepend","prependQueue"].includes(gt.getAttribute(APPEND_ORDER)))return!1;var _t=Number(gt.getAttribute(APPEND_PRIORITY)||0);return tt>=_t});if(mt.length)return ft.insertBefore(ht,mt[mt.length-1].nextSibling),ht}ft.insertBefore(ht,pt)}else ft.appendChild(ht);return ht}function findExistNode(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=getContainer(i);return findStyles(s).find(function(a){return a.getAttribute(getMark(i))===o})}function removeCSS(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=findExistNode(o,i);if(s){var a=getContainer(i);a.removeChild(s)}}function syncRealContainer(o,i){var s=containerCache.get(o);if(!s||!contains(document,s)){var a=injectCSS("",i),et=a.parentNode;containerCache.set(o,et),o.removeChild(a)}}function updateCSS(o,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=getContainer(s);syncRealContainer(a,s);var et=findExistNode(i,s);if(et){var tt,ot;if((tt=s.csp)!==null&&tt!==void 0&&tt.nonce&&et.nonce!==((ot=s.csp)===null||ot===void 0?void 0:ot.nonce)){var dt;et.nonce=(dt=s.csp)===null||dt===void 0?void 0:dt.nonce}return et.innerHTML!==o&&(et.innerHTML=o),et}var ht=injectCSS(o,s);return ht.setAttribute(getMark(s),i),ht}function getRoot(o){var i;return o==null||(i=o.getRootNode)===null||i===void 0?void 0:i.call(o)}function inShadow(o){return getRoot(o)instanceof ShadowRoot}function getShadowRoot(o){return inShadow(o)?getRoot(o):null}var warned={},preMessage=function(i){};function warning$3(o,i){}function note(o,i){}function resetWarned(){warned={}}function call(o,i,s){!i&&!warned[s]&&(o(!1,s),warned[s]=!0)}function warningOnce(o,i){call(warning$3,o,i)}function noteOnce(o,i){call(note,o,i)}warningOnce.preMessage=preMessage;warningOnce.resetWarned=resetWarned;warningOnce.noteOnce=noteOnce;function camelCase(o){return o.replace(/-(.)/g,function(i,s){return s.toUpperCase()})}function warning$2(o,i){warningOnce(o,"[@ant-design/icons] ".concat(i))}function isIconDefinition(o){return _typeof$i(o)==="object"&&typeof o.name=="string"&&typeof o.theme=="string"&&(_typeof$i(o.icon)==="object"||typeof o.icon=="function")}function normalizeAttrs(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(o).reduce(function(i,s){var a=o[s];switch(s){case"class":i.className=a,delete i.class;break;default:delete i[s],i[camelCase(s)]=a}return i},{})}function generate(o,i,s){return s?React.createElement(o.tag,_objectSpread2$1(_objectSpread2$1({key:i},normalizeAttrs(o.attrs)),s),(o.children||[]).map(function(a,et){return generate(a,"".concat(i,"-").concat(o.tag,"-").concat(et))})):React.createElement(o.tag,_objectSpread2$1({key:i},normalizeAttrs(o.attrs)),(o.children||[]).map(function(a,et){return generate(a,"".concat(i,"-").concat(o.tag,"-").concat(et))}))}function getSecondaryColor(o){return generate$1(o)[0]}function normalizeTwoToneColors(o){return o?Array.isArray(o)?o:[o]:[]}var iconStyles=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,useInsertStyles=function(i){var s=reactExports.useContext(IconContext$1),a=s.csp,et=s.prefixCls,tt=iconStyles;et&&(tt=tt.replace(/anticon/g,et)),reactExports.useEffect(function(){var ot=i.current,dt=getShadowRoot(ot);updateCSS(tt,"@ant-design-icons",{prepend:!0,csp:a,attachTo:dt})},[])},_excluded$H=["icon","className","onClick","style","primaryColor","secondaryColor"],twoToneColorPalette={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function setTwoToneColors(o){var i=o.primaryColor,s=o.secondaryColor;twoToneColorPalette.primaryColor=i,twoToneColorPalette.secondaryColor=s||getSecondaryColor(i),twoToneColorPalette.calculated=!!s}function getTwoToneColors(){return _objectSpread2$1({},twoToneColorPalette)}var IconBase=function(i){var s=i.icon,a=i.className,et=i.onClick,tt=i.style,ot=i.primaryColor,dt=i.secondaryColor,ht=_objectWithoutProperties$y(i,_excluded$H),ft=reactExports.useRef(),pt=twoToneColorPalette;if(ot&&(pt={primaryColor:ot,secondaryColor:dt||getSecondaryColor(ot)}),useInsertStyles(ft),warning$2(isIconDefinition(s),"icon should be icon definiton, but got ".concat(s)),!isIconDefinition(s))return null;var mt=s;return mt&&typeof mt.icon=="function"&&(mt=_objectSpread2$1(_objectSpread2$1({},mt),{},{icon:mt.icon(pt.primaryColor,pt.secondaryColor)})),generate(mt.icon,"svg-".concat(mt.name),_objectSpread2$1(_objectSpread2$1({className:a,onClick:et,style:tt,"data-icon":mt.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},ht),{},{ref:ft}))};IconBase.displayName="IconReact";IconBase.getTwoToneColors=getTwoToneColors;IconBase.setTwoToneColors=setTwoToneColors;const ReactIcon=IconBase;function setTwoToneColor(o){var i=normalizeTwoToneColors(o),s=_slicedToArray$8(i,2),a=s[0],et=s[1];return ReactIcon.setTwoToneColors({primaryColor:a,secondaryColor:et})}function getTwoToneColor(){var o=ReactIcon.getTwoToneColors();return o.calculated?[o.primaryColor,o.secondaryColor]:o.primaryColor}var _excluded$G=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];setTwoToneColor(blue.primary);var Icon=reactExports.forwardRef(function(o,i){var s,a=o.className,et=o.icon,tt=o.spin,ot=o.rotate,dt=o.tabIndex,ht=o.onClick,ft=o.twoToneColor,pt=_objectWithoutProperties$y(o,_excluded$G),mt=reactExports.useContext(IconContext$1),gt=mt.prefixCls,_t=gt===void 0?"anticon":gt,yt=mt.rootClassName,St=classNames(yt,_t,(s={},_defineProperty$g(s,"".concat(_t,"-").concat(et.name),!!et.name),_defineProperty$g(s,"".concat(_t,"-spin"),!!tt||et.name==="loading"),s),a),Et=dt;Et===void 0&&ht&&(Et=-1);var vt=ot?{msTransform:"rotate(".concat(ot,"deg)"),transform:"rotate(".concat(ot,"deg)")}:void 0,bt=normalizeTwoToneColors(ft),Tt=_slicedToArray$8(bt,2),wt=Tt[0],Pt=Tt[1];return reactExports.createElement("span",_extends$x({role:"img","aria-label":et.name},pt,{ref:i,tabIndex:Et,onClick:ht,className:St}),reactExports.createElement(ReactIcon,{icon:et,primaryColor:wt,secondaryColor:Pt,style:vt}))});Icon.displayName="AntdIcon";Icon.getTwoToneColor=getTwoToneColor;Icon.setTwoToneColor=setTwoToneColor;const AntdIcon=Icon;var CheckCircleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};const CheckCircleFilledSvg=CheckCircleFilled$2;var CheckCircleFilled=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:CheckCircleFilledSvg}))};const CheckCircleFilled$1=reactExports.forwardRef(CheckCircleFilled);var CheckOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M912 190h-69.9c-9.8 0-19.1 4.5-25.1 12.2L404.7 724.5 207 474a32 32 0 00-25.1-12.2H112c-6.7 0-10.4 7.7-6.3 12.9l273.9 347c12.8 16.2 37.4 16.2 50.3 0l488.4-618.9c4.1-5.1.4-12.8-6.3-12.8z"}}]},name:"check",theme:"outlined"};const CheckOutlinedSvg=CheckOutlined$2;var CheckOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:CheckOutlinedSvg}))};const CheckOutlined$1=reactExports.forwardRef(CheckOutlined);var CloseCircleFilled$2={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"};const CloseCircleFilledSvg=CloseCircleFilled$2;var CloseCircleFilled=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:CloseCircleFilledSvg}))};const CloseCircleFilled$1=reactExports.forwardRef(CloseCircleFilled);var CloseOutlined$2={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"};const CloseOutlinedSvg=CloseOutlined$2;var CloseOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:CloseOutlinedSvg}))};const CloseOutlined$1=reactExports.forwardRef(CloseOutlined);var DeleteOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M360 184h-8c4.4 0 8-3.6 8-8v8h304v-8c0 4.4 3.6 8 8 8h-8v72h72v-80c0-35.3-28.7-64-64-64H352c-35.3 0-64 28.7-64 64v80h72v-72zm504 72H160c-17.7 0-32 14.3-32 32v32c0 4.4 3.6 8 8 8h60.4l24.7 523c1.6 34.1 29.8 61 63.9 61h454c34.2 0 62.3-26.8 63.9-61l24.7-523H888c4.4 0 8-3.6 8-8v-32c0-17.7-14.3-32-32-32zM731.3 840H292.7l-24.2-512h487l-24.2 512z"}}]},name:"delete",theme:"outlined"};const DeleteOutlinedSvg=DeleteOutlined$2;var DeleteOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:DeleteOutlinedSvg}))};const DeleteOutlined$1=reactExports.forwardRef(DeleteOutlined);var DownloadOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M505.7 661a8 8 0 0012.6 0l112-141.7c4.1-5.2.4-12.9-6.3-12.9h-74.1V168c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v338.3H400c-6.7 0-10.4 7.7-6.3 12.9l112 141.8zM878 626h-60c-4.4 0-8 3.6-8 8v154H214V634c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v198c0 17.7 14.3 32 32 32h684c17.7 0 32-14.3 32-32V634c0-4.4-3.6-8-8-8z"}}]},name:"download",theme:"outlined"};const DownloadOutlinedSvg=DownloadOutlined$2;var DownloadOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:DownloadOutlinedSvg}))};const DownloadOutlined$1=reactExports.forwardRef(DownloadOutlined);var ExclamationCircleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"};const ExclamationCircleFilledSvg=ExclamationCircleFilled$2;var ExclamationCircleFilled=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:ExclamationCircleFilledSvg}))};const ExclamationCircleFilled$1=reactExports.forwardRef(ExclamationCircleFilled);var EyeOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"};const EyeOutlinedSvg=EyeOutlined$2;var EyeOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:EyeOutlinedSvg}))};const EyeOutlined$1=reactExports.forwardRef(EyeOutlined);var FileTwoTone$2={icon:function(i,s){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M534 352V136H232v752h560V394H576a42 42 0 01-42-42z",fill:s}},{tag:"path",attrs:{d:"M854.6 288.6L639.4 73.4c-6-6-14.1-9.4-22.6-9.4H192c-17.7 0-32 14.3-32 32v832c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V311.3c0-8.5-3.4-16.7-9.4-22.7zM602 137.8L790.2 326H602V137.8zM792 888H232V136h302v216a42 42 0 0042 42h216v494z",fill:i}}]}},name:"file",theme:"twotone"};const FileTwoToneSvg=FileTwoTone$2;var FileTwoTone=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:FileTwoToneSvg}))};const FileTwoTone$1=reactExports.forwardRef(FileTwoTone);var InboxOutlined$2={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M885.2 446.3l-.2-.8-112.2-285.1c-5-16.1-19.9-27.2-36.8-27.2H281.2c-17 0-32.1 11.3-36.9 27.6L139.4 443l-.3.7-.2.8c-1.3 4.9-1.7 9.9-1 14.8-.1 1.6-.2 3.2-.2 4.8V830a60.9 60.9 0 0060.8 60.8h627.2c33.5 0 60.8-27.3 60.9-60.8V464.1c0-1.3 0-2.6-.1-3.7.4-4.9 0-9.6-1.3-14.1zm-295.8-43l-.3 15.7c-.8 44.9-31.8 75.1-77.1 75.1-22.1 0-41.1-7.1-54.8-20.6S436 441.2 435.6 419l-.3-15.7H229.5L309 210h399.2l81.7 193.3H589.4zm-375 76.8h157.3c24.3 57.1 76 90.8 140.4 90.8 33.7 0 65-9.4 90.3-27.2 22.2-15.6 39.5-37.4 50.7-63.6h156.5V814H214.4V480.1z"}}]},name:"inbox",theme:"outlined"};const InboxOutlinedSvg=InboxOutlined$2;var InboxOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:InboxOutlinedSvg}))};const InboxOutlined$1=reactExports.forwardRef(InboxOutlined);var InfoCircleFilled$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"};const InfoCircleFilledSvg=InfoCircleFilled$2;var InfoCircleFilled=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:InfoCircleFilledSvg}))};const InfoCircleFilled$1=reactExports.forwardRef(InfoCircleFilled);var LoadingOutlined$2={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"};const LoadingOutlinedSvg=LoadingOutlined$2;var LoadingOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:LoadingOutlinedSvg}))};const LoadingOutlined$1=reactExports.forwardRef(LoadingOutlined);var PaperClipOutlined$2={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M779.3 196.6c-94.2-94.2-247.6-94.2-341.7 0l-261 260.8c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l261-260.8c32.4-32.4 75.5-50.2 121.3-50.2s88.9 17.8 121.2 50.2c32.4 32.4 50.2 75.5 50.2 121.2 0 45.8-17.8 88.8-50.2 121.2l-266 265.9-43.1 43.1c-40.3 40.3-105.8 40.3-146.1 0-19.5-19.5-30.2-45.4-30.2-73s10.7-53.5 30.2-73l263.9-263.8c6.7-6.6 15.5-10.3 24.9-10.3h.1c9.4 0 18.1 3.7 24.7 10.3 6.7 6.7 10.3 15.5 10.3 24.9 0 9.3-3.7 18.1-10.3 24.7L372.4 653c-1.7 1.7-2.6 4-2.6 6.4s.9 4.7 2.6 6.4l36.9 36.9a9 9 0 0012.7 0l215.6-215.6c19.9-19.9 30.8-46.3 30.8-74.4s-11-54.6-30.8-74.4c-41.1-41.1-107.9-41-149 0L463 364 224.8 602.1A172.22 172.22 0 00174 724.8c0 46.3 18.1 89.8 50.8 122.5 33.9 33.8 78.3 50.7 122.7 50.7 44.4 0 88.8-16.9 122.6-50.7l309.2-309C824.8 492.7 850 432 850 367.5c.1-64.6-25.1-125.3-70.7-170.9z"}}]},name:"paper-clip",theme:"outlined"};const PaperClipOutlinedSvg=PaperClipOutlined$2;var PaperClipOutlined=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:PaperClipOutlinedSvg}))};const PaperClipOutlined$1=reactExports.forwardRef(PaperClipOutlined);var PictureTwoTone$2={icon:function(i,s){return{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M928 160H96c-17.7 0-32 14.3-32 32v640c0 17.7 14.3 32 32 32h832c17.7 0 32-14.3 32-32V192c0-17.7-14.3-32-32-32zm-40 632H136v-39.9l138.5-164.3 150.1 178L658.1 489 888 761.6V792zm0-129.8L664.2 396.8c-3.2-3.8-9-3.8-12.2 0L424.6 666.4l-144-170.7c-3.2-3.8-9-3.8-12.2 0L136 652.7V232h752v430.2z",fill:i}},{tag:"path",attrs:{d:"M424.6 765.8l-150.1-178L136 752.1V792h752v-30.4L658.1 489z",fill:s}},{tag:"path",attrs:{d:"M136 652.7l132.4-157c3.2-3.8 9-3.8 12.2 0l144 170.7L652 396.8c3.2-3.8 9-3.8 12.2 0L888 662.2V232H136v420.7zM304 280a88 88 0 110 176 88 88 0 010-176z",fill:s}},{tag:"path",attrs:{d:"M276 368a28 28 0 1056 0 28 28 0 10-56 0z",fill:s}},{tag:"path",attrs:{d:"M304 456a88 88 0 100-176 88 88 0 000 176zm0-116c15.5 0 28 12.5 28 28s-12.5 28-28 28-28-12.5-28-28 12.5-28 28-28z",fill:i}}]}},name:"picture",theme:"twotone"};const PictureTwoToneSvg=PictureTwoTone$2;var PictureTwoTone=function(i,s){return reactExports.createElement(AntdIcon,_extends$x({},i,{ref:s,icon:PictureTwoToneSvg}))};const PictureTwoTone$1=reactExports.forwardRef(PictureTwoTone);var reactIs={exports:{}},reactIs_production_min={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var b=Symbol.for("react.element"),c=Symbol.for("react.portal"),d=Symbol.for("react.fragment"),e=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),h=Symbol.for("react.context"),k=Symbol.for("react.server_context"),l=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),n=Symbol.for("react.suspense_list"),p=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),t=Symbol.for("react.offscreen"),u;u=Symbol.for("react.module.reference");function v(o){if(typeof o=="object"&&o!==null){var i=o.$$typeof;switch(i){case b:switch(o=o.type,o){case d:case f:case e:case m:case n:return o;default:switch(o=o&&o.$$typeof,o){case k:case h:case l:case q:case p:case g:return o;default:return i}}case c:return i}}}reactIs_production_min.ContextConsumer=h;reactIs_production_min.ContextProvider=g;reactIs_production_min.Element=b;reactIs_production_min.ForwardRef=l;reactIs_production_min.Fragment=d;reactIs_production_min.Lazy=q;reactIs_production_min.Memo=p;reactIs_production_min.Portal=c;reactIs_production_min.Profiler=f;reactIs_production_min.StrictMode=e;reactIs_production_min.Suspense=m;reactIs_production_min.SuspenseList=n;reactIs_production_min.isAsyncMode=function(){return!1};reactIs_production_min.isConcurrentMode=function(){return!1};reactIs_production_min.isContextConsumer=function(o){return v(o)===h};reactIs_production_min.isContextProvider=function(o){return v(o)===g};reactIs_production_min.isElement=function(o){return typeof o=="object"&&o!==null&&o.$$typeof===b};reactIs_production_min.isForwardRef=function(o){return v(o)===l};reactIs_production_min.isFragment=function(o){return v(o)===d};reactIs_production_min.isLazy=function(o){return v(o)===q};reactIs_production_min.isMemo=function(o){return v(o)===p};reactIs_production_min.isPortal=function(o){return v(o)===c};reactIs_production_min.isProfiler=function(o){return v(o)===f};reactIs_production_min.isStrictMode=function(o){return v(o)===e};reactIs_production_min.isSuspense=function(o){return v(o)===m};reactIs_production_min.isSuspenseList=function(o){return v(o)===n};reactIs_production_min.isValidElementType=function(o){return typeof o=="string"||typeof o=="function"||o===d||o===f||o===e||o===m||o===n||o===t||typeof o=="object"&&o!==null&&(o.$$typeof===q||o.$$typeof===p||o.$$typeof===g||o.$$typeof===h||o.$$typeof===l||o.$$typeof===u||o.getModuleId!==void 0)};reactIs_production_min.typeOf=v;reactIs.exports=reactIs_production_min;var reactIsExports=reactIs.exports;function useMemo(o,i,s){var a=reactExports.useRef({});return(!("value"in a.current)||s(a.current.condition,i))&&(a.current.value=o(),a.current.condition=i),a.current.value}function fillRef(o,i){typeof o=="function"?o(i):_typeof$i(o)==="object"&&o&&"current"in o&&(o.current=i)}function composeRef(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var a=i.filter(function(et){return et});return a.length<=1?a[0]:function(et){i.forEach(function(tt){fillRef(tt,et)})}}function useComposeRef(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];return useMemo(function(){return composeRef.apply(void 0,i)},i,function(a,et){return a.length!==et.length||a.every(function(tt,ot){return tt!==et[ot]})})}function supportRef(o){var i,s,a=reactIsExports.isMemo(o)?o.type.type:o.type;return!(typeof a=="function"&&!((i=a.prototype)!==null&&i!==void 0&&i.render)||typeof o=="function"&&!((s=o.prototype)!==null&&s!==void 0&&s.render))}function toArray$2(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=[];return React.Children.forEach(o,function(a){a==null&&!i.keepEmpty||(Array.isArray(a)?s=s.concat(toArray$2(a)):reactIsExports.isFragment(a)&&a.props?s=s.concat(toArray$2(a.props.children,i)):s.push(a))}),s}function isDOM(o){return o instanceof HTMLElement||o instanceof SVGElement}function findDOMNode(o){return isDOM(o)?o:o instanceof React.Component?ReactDOM.findDOMNode(o):null}var CollectionContext=reactExports.createContext(null);function Collection(o){var i=o.children,s=o.onBatchResize,a=reactExports.useRef(0),et=reactExports.useRef([]),tt=reactExports.useContext(CollectionContext),ot=reactExports.useCallback(function(dt,ht,ft){a.current+=1;var pt=a.current;et.current.push({size:dt,element:ht,data:ft}),Promise.resolve().then(function(){pt===a.current&&(s==null||s(et.current),et.current=[])}),tt==null||tt(dt,ht,ft)},[s,tt]);return reactExports.createElement(CollectionContext.Provider,{value:ot},i)}var MapShim=function(){if(typeof Map<"u")return Map;function o(i,s){var a=-1;return i.some(function(et,tt){return et[0]===s?(a=tt,!0):!1}),a}return function(){function i(){this.__entries__=[]}return Object.defineProperty(i.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),i.prototype.get=function(s){var a=o(this.__entries__,s),et=this.__entries__[a];return et&&et[1]},i.prototype.set=function(s,a){var et=o(this.__entries__,s);~et?this.__entries__[et][1]=a:this.__entries__.push([s,a])},i.prototype.delete=function(s){var a=this.__entries__,et=o(a,s);~et&&a.splice(et,1)},i.prototype.has=function(s){return!!~o(this.__entries__,s)},i.prototype.clear=function(){this.__entries__.splice(0)},i.prototype.forEach=function(s,a){a===void 0&&(a=null);for(var et=0,tt=this.__entries__;et<tt.length;et++){var ot=tt[et];s.call(a,ot[1],ot[0])}},i}()}(),isBrowser$1=typeof window<"u"&&typeof document<"u"&&window.document===document,global$1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1):function(o){return setTimeout(function(){return o(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle(o,i){var s=!1,a=!1,et=0;function tt(){s&&(s=!1,o()),a&&dt()}function ot(){requestAnimationFrame$1(tt)}function dt(){var ht=Date.now();if(s){if(ht-et<trailingTimeout)return;a=!0}else s=!0,a=!1,setTimeout(ot,i);et=ht}return dt}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver<"u",ResizeObserverController=function(){function o(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}return o.prototype.addObserver=function(i){~this.observers_.indexOf(i)||this.observers_.push(i),this.connected_||this.connect_()},o.prototype.removeObserver=function(i){var s=this.observers_,a=s.indexOf(i);~a&&s.splice(a,1),!s.length&&this.connected_&&this.disconnect_()},o.prototype.refresh=function(){var i=this.updateObservers_();i&&this.refresh()},o.prototype.updateObservers_=function(){var i=this.observers_.filter(function(s){return s.gatherActive(),s.hasActive()});return i.forEach(function(s){return s.broadcastActive()}),i.length>0},o.prototype.connect_=function(){!isBrowser$1||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},o.prototype.disconnect_=function(){!isBrowser$1||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},o.prototype.onTransitionEnd_=function(i){var s=i.propertyName,a=s===void 0?"":s,et=transitionKeys.some(function(tt){return!!~a.indexOf(tt)});et&&this.refresh()},o.getInstance=function(){return this.instance_||(this.instance_=new o),this.instance_},o.instance_=null,o}(),defineConfigurable=function(o,i){for(var s=0,a=Object.keys(i);s<a.length;s++){var et=a[s];Object.defineProperty(o,et,{value:i[et],enumerable:!1,writable:!1,configurable:!0})}return o},getWindowOf=function(o){var i=o&&o.ownerDocument&&o.ownerDocument.defaultView;return i||global$1},emptyRect=createRectInit(0,0,0,0);function toFloat(o){return parseFloat(o)||0}function getBordersSize(o){for(var i=[],s=1;s<arguments.length;s++)i[s-1]=arguments[s];return i.reduce(function(a,et){var tt=o["border-"+et+"-width"];return a+toFloat(tt)},0)}function getPaddings(o){for(var i=["top","right","bottom","left"],s={},a=0,et=i;a<et.length;a++){var tt=et[a],ot=o["padding-"+tt];s[tt]=toFloat(ot)}return s}function getSVGContentRect(o){var i=o.getBBox();return createRectInit(0,0,i.width,i.height)}function getHTMLElementContentRect(o){var i=o.clientWidth,s=o.clientHeight;if(!i&&!s)return emptyRect;var a=getWindowOf(o).getComputedStyle(o),et=getPaddings(a),tt=et.left+et.right,ot=et.top+et.bottom,dt=toFloat(a.width),ht=toFloat(a.height);if(a.boxSizing==="border-box"&&(Math.round(dt+tt)!==i&&(dt-=getBordersSize(a,"left","right")+tt),Math.round(ht+ot)!==s&&(ht-=getBordersSize(a,"top","bottom")+ot)),!isDocumentElement(o)){var ft=Math.round(dt+tt)-i,pt=Math.round(ht+ot)-s;Math.abs(ft)!==1&&(dt-=ft),Math.abs(pt)!==1&&(ht-=pt)}return createRectInit(et.left,et.top,dt,ht)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement<"u"?function(o){return o instanceof getWindowOf(o).SVGGraphicsElement}:function(o){return o instanceof getWindowOf(o).SVGElement&&typeof o.getBBox=="function"}}();function isDocumentElement(o){return o===getWindowOf(o).document.documentElement}function getContentRect(o){return isBrowser$1?isSVGGraphicsElement(o)?getSVGContentRect(o):getHTMLElementContentRect(o):emptyRect}function createReadOnlyRect(o){var i=o.x,s=o.y,a=o.width,et=o.height,tt=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,ot=Object.create(tt.prototype);return defineConfigurable(ot,{x:i,y:s,width:a,height:et,top:s,right:i+a,bottom:et+s,left:i}),ot}function createRectInit(o,i,s,a){return{x:o,y:i,width:s,height:a}}var ResizeObservation=function(){function o(i){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=i}return o.prototype.isActive=function(){var i=getContentRect(this.target);return this.contentRect_=i,i.width!==this.broadcastWidth||i.height!==this.broadcastHeight},o.prototype.broadcastRect=function(){var i=this.contentRect_;return this.broadcastWidth=i.width,this.broadcastHeight=i.height,i},o}(),ResizeObserverEntry=function(){function o(i,s){var a=createReadOnlyRect(s);defineConfigurable(this,{target:i,contentRect:a})}return o}(),ResizeObserverSPI=function(){function o(i,s,a){if(this.activeObservations_=[],this.observations_=new MapShim,typeof i!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=i,this.controller_=s,this.callbackCtx_=a}return o.prototype.observe=function(i){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(i instanceof getWindowOf(i).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(i)||(s.set(i,new ResizeObservation(i)),this.controller_.addObserver(this),this.controller_.refresh())}},o.prototype.unobserve=function(i){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(i instanceof getWindowOf(i).Element))throw new TypeError('parameter 1 is not of type "Element".');var s=this.observations_;s.has(i)&&(s.delete(i),s.size||this.controller_.removeObserver(this))}},o.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},o.prototype.gatherActive=function(){var i=this;this.clearActive(),this.observations_.forEach(function(s){s.isActive()&&i.activeObservations_.push(s)})},o.prototype.broadcastActive=function(){if(this.hasActive()){var i=this.callbackCtx_,s=this.activeObservations_.map(function(a){return new ResizeObserverEntry(a.target,a.broadcastRect())});this.callback_.call(i,s,i),this.clearActive()}},o.prototype.clearActive=function(){this.activeObservations_.splice(0)},o.prototype.hasActive=function(){return this.activeObservations_.length>0},o}(),observers=typeof WeakMap<"u"?new WeakMap:new MapShim,ResizeObserver$2=function(){function o(i){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var s=ResizeObserverController.getInstance(),a=new ResizeObserverSPI(i,s,this);observers.set(this,a)}return o}();["observe","unobserve","disconnect"].forEach(function(o){ResizeObserver$2.prototype[o]=function(){var i;return(i=observers.get(this))[o].apply(i,arguments)}});var index$1=function(){return typeof global$1.ResizeObserver<"u"?global$1.ResizeObserver:ResizeObserver$2}(),elementListeners=new Map;function onResize(o){o.forEach(function(i){var s,a=i.target;(s=elementListeners.get(a))===null||s===void 0||s.forEach(function(et){return et(a)})})}var resizeObserver=new index$1(onResize);function observe(o,i){elementListeners.has(o)||(elementListeners.set(o,new Set),resizeObserver.observe(o)),elementListeners.get(o).add(i)}function unobserve(o,i){elementListeners.has(o)&&(elementListeners.get(o).delete(i),elementListeners.get(o).size||(resizeObserver.unobserve(o),elementListeners.delete(o)))}function _classCallCheck$5(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties$5(o,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,toPropertyKey(a.key),a)}}function _createClass$5(o,i,s){return i&&_defineProperties$5(o.prototype,i),s&&_defineProperties$5(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function _setPrototypeOf$4(o,i){return _setPrototypeOf$4=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,et){return a.__proto__=et,a},_setPrototypeOf$4(o,i)}function _inherits$4(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),i&&_setPrototypeOf$4(o,i)}function _getPrototypeOf$4(o){return _getPrototypeOf$4=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf$4(o)}function _isNativeReflectConstruct$4(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _assertThisInitialized$4(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _possibleConstructorReturn$4(o,i){if(i&&(_typeof$i(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$4(o)}function _createSuper$4(o){var i=_isNativeReflectConstruct$4();return function(){var a=_getPrototypeOf$4(o),et;if(i){var tt=_getPrototypeOf$4(this).constructor;et=Reflect.construct(a,arguments,tt)}else et=a.apply(this,arguments);return _possibleConstructorReturn$4(this,et)}}var DomWrapper$1=function(o){_inherits$4(s,o);var i=_createSuper$4(s);function s(){return _classCallCheck$5(this,s),i.apply(this,arguments)}return _createClass$5(s,[{key:"render",value:function(){return this.props.children}}]),s}(reactExports.Component);function SingleObserver(o,i){var s=o.children,a=o.disabled,et=reactExports.useRef(null),tt=reactExports.useRef(null),ot=reactExports.useContext(CollectionContext),dt=typeof s=="function",ht=dt?s(et):s,ft=reactExports.useRef({width:-1,height:-1,offsetWidth:-1,offsetHeight:-1}),pt=!dt&&reactExports.isValidElement(ht)&&supportRef(ht),mt=pt?ht.ref:null,gt=useComposeRef(mt,et),_t=function(){var vt;return findDOMNode(et.current)||(et.current&&_typeof$i(et.current)==="object"?findDOMNode((vt=et.current)===null||vt===void 0?void 0:vt.nativeElement):null)||findDOMNode(tt.current)};reactExports.useImperativeHandle(i,function(){return _t()});var yt=reactExports.useRef(o);yt.current=o;var St=reactExports.useCallback(function(Et){var vt=yt.current,bt=vt.onResize,Tt=vt.data,wt=Et.getBoundingClientRect(),Pt=wt.width,At=wt.height,xt=Et.offsetWidth,Ot=Et.offsetHeight,Rt=Math.floor(Pt),Dt=Math.floor(At);if(ft.current.width!==Rt||ft.current.height!==Dt||ft.current.offsetWidth!==xt||ft.current.offsetHeight!==Ot){var Nt={width:Rt,height:Dt,offsetWidth:xt,offsetHeight:Ot};ft.current=Nt;var Kt=xt===Math.round(Pt)?Pt:xt,qt=Ot===Math.round(At)?At:Ot,jt=_objectSpread2$1(_objectSpread2$1({},Nt),{},{offsetWidth:Kt,offsetHeight:qt});ot==null||ot(jt,Et,Tt),bt&&Promise.resolve().then(function(){bt(jt,Et)})}},[]);return reactExports.useEffect(function(){var Et=_t();return Et&&!a&&observe(Et,St),function(){return unobserve(Et,St)}},[et.current,a]),reactExports.createElement(DomWrapper$1,{ref:tt},pt?reactExports.cloneElement(ht,{ref:gt}):ht)}var RefSingleObserver=reactExports.forwardRef(SingleObserver),INTERNAL_PREFIX_KEY="rc-observer-key";function ResizeObserver$1(o,i){var s=o.children,a=typeof s=="function"?[s]:toArray$2(s);return a.map(function(et,tt){var ot=(et==null?void 0:et.key)||"".concat(INTERNAL_PREFIX_KEY,"-").concat(tt);return reactExports.createElement(RefSingleObserver,_extends$x({},o,{key:ot,ref:tt===0?i:void 0}),et)})}var RefResizeObserver=reactExports.forwardRef(ResizeObserver$1);RefResizeObserver.Collection=Collection;function omit(o,i){var s=_objectSpread2$1({},o);return Array.isArray(i)&&i.forEach(function(a){delete s[a]}),s}function _arrayWithoutHoles$1(o){if(Array.isArray(o))return _arrayLikeToArray$8(o)}function _iterableToArray$1(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function _nonIterableSpread$1(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _toConsumableArray$1(o){return _arrayWithoutHoles$1(o)||_iterableToArray$1(o)||_unsupportedIterableToArray$8(o)||_nonIterableSpread$1()}var raf=function(i){return+setTimeout(i,16)},caf=function(i){return clearTimeout(i)};typeof window<"u"&&"requestAnimationFrame"in window&&(raf=function(i){return window.requestAnimationFrame(i)},caf=function(i){return window.cancelAnimationFrame(i)});var rafUUID=0,rafIds=new Map;function cleanup(o){rafIds.delete(o)}var wrapperRaf=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;rafUUID+=1;var a=rafUUID;function et(tt){if(tt===0)cleanup(a),i();else{var ot=raf(function(){et(tt-1)});rafIds.set(a,ot)}}return et(s),a};wrapperRaf.cancel=function(o){var i=rafIds.get(o);return cleanup(o),caf(i)};function murmur2(o){for(var i=0,s,a=0,et=o.length;et>=4;++a,et-=4)s=o.charCodeAt(a)&255|(o.charCodeAt(++a)&255)<<8|(o.charCodeAt(++a)&255)<<16|(o.charCodeAt(++a)&255)<<24,s=(s&65535)*1540483477+((s>>>16)*59797<<16),s^=s>>>24,i=(s&65535)*1540483477+((s>>>16)*59797<<16)^(i&65535)*1540483477+((i>>>16)*59797<<16);switch(et){case 3:i^=(o.charCodeAt(a+2)&255)<<16;case 2:i^=(o.charCodeAt(a+1)&255)<<8;case 1:i^=o.charCodeAt(a)&255,i=(i&65535)*1540483477+((i>>>16)*59797<<16)}return i^=i>>>13,i=(i&65535)*1540483477+((i>>>16)*59797<<16),((i^i>>>15)>>>0).toString(36)}function isEqual(o,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function et(tt,ot){var dt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ht=a.has(tt);if(warningOnce(!ht,"Warning: There may be circular references"),ht)return!1;if(tt===ot)return!0;if(s&&dt>1)return!1;a.add(tt);var ft=dt+1;if(Array.isArray(tt)){if(!Array.isArray(ot)||tt.length!==ot.length)return!1;for(var pt=0;pt<tt.length;pt++)if(!et(tt[pt],ot[pt],ft))return!1;return!0}if(tt&&ot&&_typeof$i(tt)==="object"&&_typeof$i(ot)==="object"){var mt=Object.keys(tt);return mt.length!==Object.keys(ot).length?!1:mt.every(function(gt){return et(tt[gt],ot[gt],ft)})}return!1}return et(o,i)}var SPLIT="%",Entity=function(){function o(i){_classCallCheck$5(this,o),_defineProperty$g(this,"instanceId",void 0),_defineProperty$g(this,"cache",new Map),this.instanceId=i}return _createClass$5(o,[{key:"get",value:function(s){return this.cache.get(s.join(SPLIT))||null}},{key:"update",value:function(s,a){var et=s.join(SPLIT),tt=this.cache.get(et),ot=a(tt);ot===null?this.cache.delete(et):this.cache.set(et,ot)}}]),o}(),ATTR_TOKEN="data-token-hash",ATTR_MARK="data-css-hash",CSS_IN_JS_INSTANCE="__cssinjs_instance__";function createCache(){var o=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var i=document.body.querySelectorAll("style[".concat(ATTR_MARK,"]"))||[],s=document.head.firstChild;Array.from(i).forEach(function(et){et[CSS_IN_JS_INSTANCE]=et[CSS_IN_JS_INSTANCE]||o,et[CSS_IN_JS_INSTANCE]===o&&document.head.insertBefore(et,s)});var a={};Array.from(document.querySelectorAll("style[".concat(ATTR_MARK,"]"))).forEach(function(et){var tt=et.getAttribute(ATTR_MARK);if(a[tt]){if(et[CSS_IN_JS_INSTANCE]===o){var ot;(ot=et.parentNode)===null||ot===void 0||ot.removeChild(et)}}else a[tt]=!0})}return new Entity(o)}var StyleContext=reactExports.createContext({hashPriority:"low",cache:createCache(),defaultCache:!0});function sameDerivativeOption(o,i){if(o.length!==i.length)return!1;for(var s=0;s<o.length;s++)if(o[s]!==i[s])return!1;return!0}var ThemeCache=function(){function o(){_classCallCheck$5(this,o),_defineProperty$g(this,"cache",void 0),_defineProperty$g(this,"keys",void 0),_defineProperty$g(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return _createClass$5(o,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(s){var a,et,tt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,ot={map:this.cache};return s.forEach(function(dt){if(!ot)ot=void 0;else{var ht;ot=(ht=ot)===null||ht===void 0||(ht=ht.map)===null||ht===void 0?void 0:ht.get(dt)}}),(a=ot)!==null&&a!==void 0&&a.value&&tt&&(ot.value[1]=this.cacheCallTimes++),(et=ot)===null||et===void 0?void 0:et.value}},{key:"get",value:function(s){var a;return(a=this.internalGet(s,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(s){return!!this.internalGet(s)}},{key:"set",value:function(s,a){var et=this;if(!this.has(s)){if(this.size()+1>o.MAX_CACHE_SIZE+o.MAX_CACHE_OFFSET){var tt=this.keys.reduce(function(ft,pt){var mt=_slicedToArray$8(ft,2),gt=mt[1];return et.internalGet(pt)[1]<gt?[pt,et.internalGet(pt)[1]]:ft},[this.keys[0],this.cacheCallTimes]),ot=_slicedToArray$8(tt,1),dt=ot[0];this.delete(dt)}this.keys.push(s)}var ht=this.cache;s.forEach(function(ft,pt){if(pt===s.length-1)ht.set(ft,{value:[a,et.cacheCallTimes++]});else{var mt=ht.get(ft);mt?mt.map||(mt.map=new Map):ht.set(ft,{map:new Map}),ht=ht.get(ft).map}})}},{key:"deleteByPath",value:function(s,a){var et=s.get(a[0]);if(a.length===1){var tt;return et.map?s.set(a[0],{map:et.map}):s.delete(a[0]),(tt=et.value)===null||tt===void 0?void 0:tt[0]}var ot=this.deleteByPath(et.map,a.slice(1));return(!et.map||et.map.size===0)&&!et.value&&s.delete(a[0]),ot}},{key:"delete",value:function(s){if(this.has(s))return this.keys=this.keys.filter(function(a){return!sameDerivativeOption(a,s)}),this.deleteByPath(this.cache,s)}}]),o}();_defineProperty$g(ThemeCache,"MAX_CACHE_SIZE",20);_defineProperty$g(ThemeCache,"MAX_CACHE_OFFSET",5);var uuid$3=0,Theme=function(){function o(i){_classCallCheck$5(this,o),_defineProperty$g(this,"derivatives",void 0),_defineProperty$g(this,"id",void 0),this.derivatives=Array.isArray(i)?i:[i],this.id=uuid$3,i.length===0&&(i.length>0,void 0),uuid$3+=1}return _createClass$5(o,[{key:"getDerivativeToken",value:function(s){return this.derivatives.reduce(function(a,et){return et(s,a)},void 0)}}]),o}(),cacheThemes=new ThemeCache;function createTheme(o){var i=Array.isArray(o)?o:[o];return cacheThemes.has(i)||cacheThemes.set(i,new Theme(i)),cacheThemes.get(i)}var resultCache=new WeakMap,RESULT_VALUE={};function memoResult(o,i){for(var s=resultCache,a=0;a<i.length;a+=1){var et=i[a];s.has(et)||s.set(et,new WeakMap),s=s.get(et)}return s.has(RESULT_VALUE)||s.set(RESULT_VALUE,o()),s.get(RESULT_VALUE)}var flattenTokenCache=new WeakMap;function flattenToken(o){var i=flattenTokenCache.get(o)||"";return i||(Object.keys(o).forEach(function(s){var a=o[s];i+=s,a instanceof Theme?i+=a.id:a&&_typeof$i(a)==="object"?i+=flattenToken(a):i+=a}),flattenTokenCache.set(o,i)),i}function token2key(o,i){return murmur2("".concat(i,"_").concat(flattenToken(o)))}var randomSelectorKey="random-".concat(Date.now(),"-").concat(Math.random()).replace(/\./g,""),checkContent="_bAmBoO_";function supportSelector(o,i,s){if(canUseDom()){var a,et;updateCSS(o,randomSelectorKey);var tt=document.createElement("div");tt.style.position="fixed",tt.style.left="0",tt.style.top="0",i==null||i(tt),document.body.appendChild(tt);var ot=s?s(tt):(a=getComputedStyle(tt).content)===null||a===void 0?void 0:a.includes(checkContent);return(et=tt.parentNode)===null||et===void 0||et.removeChild(tt),removeCSS(randomSelectorKey),ot}return!1}var canLayer=void 0;function supportLayer(){return canLayer===void 0&&(canLayer=supportSelector("@layer ".concat(randomSelectorKey," { .").concat(randomSelectorKey,' { content: "').concat(checkContent,'"!important; } }'),function(o){o.className=randomSelectorKey})),canLayer}var isClientSide=canUseDom();function unit$1(o){return typeof o=="number"?"".concat(o,"px"):o}function toStyleStr(o,i,s){var a,et=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},tt=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(tt)return o;var ot=_objectSpread2$1(_objectSpread2$1({},et),{},(a={},_defineProperty$g(a,ATTR_TOKEN,i),_defineProperty$g(a,ATTR_MARK,s),a)),dt=Object.keys(ot).map(function(ht){var ft=ot[ht];return ft?"".concat(ht,'="').concat(ft,'"'):null}).filter(function(ht){return ht}).join(" ");return"<style ".concat(dt,">").concat(o,"</style>")}var token2CSSVar=function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(s?"".concat(s,"-"):"").concat(i).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},serializeCSSVar=function(i,s,a){return Object.keys(i).length?".".concat(s).concat(a!=null&&a.scope?".".concat(a.scope):"","{").concat(Object.entries(i).map(function(et){var tt=_slicedToArray$8(et,2),ot=tt[0],dt=tt[1];return"".concat(ot,":").concat(dt,";")}).join(""),"}"):""},transformToken=function(i,s,a){var et={},tt={};return Object.entries(i).forEach(function(ot){var dt,ht,ft=_slicedToArray$8(ot,2),pt=ft[0],mt=ft[1];if(a!=null&&(dt=a.preserve)!==null&&dt!==void 0&&dt[pt])tt[pt]=mt;else if((typeof mt=="string"||typeof mt=="number")&&!(a!=null&&(ht=a.ignore)!==null&&ht!==void 0&&ht[pt])){var gt,_t=token2CSSVar(pt,a==null?void 0:a.prefix);et[_t]=typeof mt=="number"&&!(a!=null&&(gt=a.unitless)!==null&&gt!==void 0&&gt[pt])?"".concat(mt,"px"):String(mt),tt[pt]="var(".concat(_t,")")}}),[tt,serializeCSSVar(et,s,{scope:a==null?void 0:a.scope})]},useInternalLayoutEffect=canUseDom()?reactExports.useLayoutEffect:reactExports.useEffect,useLayoutEffect=function(i,s){var a=reactExports.useRef(!0);useInternalLayoutEffect(function(){return i(a.current)},s),useInternalLayoutEffect(function(){return a.current=!1,function(){a.current=!0}},[])},useLayoutUpdateEffect=function(i,s){useLayoutEffect(function(a){if(!a)return i()},s)},fullClone$3=_objectSpread2$1({},React$1),useInsertionEffect$1=fullClone$3.useInsertionEffect,useInsertionEffectPolyfill=function(i,s,a){reactExports.useMemo(i,a),useLayoutEffect(function(){return s(!0)},a)},useCompatibleInsertionEffect=useInsertionEffect$1?function(o,i,s){return useInsertionEffect$1(function(){return o(),i()},s)}:useInsertionEffectPolyfill,fullClone$2=_objectSpread2$1({},React$1),useInsertionEffect=fullClone$2.useInsertionEffect,useCleanupRegister=function(i){var s=[],a=!1;function et(tt){a||s.push(tt)}return reactExports.useEffect(function(){return a=!1,function(){a=!0,s.length&&s.forEach(function(tt){return tt()})}},i),et},useRun=function(){return function(i){i()}},useEffectCleanupRegister=typeof useInsertionEffect<"u"?useCleanupRegister:useRun;function useGlobalCache(o,i,s,a,et){var tt=reactExports.useContext(StyleContext),ot=tt.cache,dt=[o].concat(_toConsumableArray$1(i)),ht=dt.join("_"),ft=useEffectCleanupRegister([ht]),pt=function(yt){ot.update(dt,function(St){var Et=St||[void 0,void 0],vt=_slicedToArray$8(Et,2),bt=vt[0],Tt=bt===void 0?0:bt,wt=vt[1],Pt=wt,At=Pt||s(),xt=[Tt,At];return yt?yt(xt):xt})};reactExports.useMemo(function(){pt()},[ht]);var mt=ot.get(dt),gt=mt[1];return useCompatibleInsertionEffect(function(){et==null||et(gt)},function(_t){return pt(function(yt){var St=_slicedToArray$8(yt,2),Et=St[0],vt=St[1];return _t&&Et===0&&(et==null||et(gt)),[Et+1,vt]}),function(){ot.update(dt,function(yt){var St=yt||[],Et=_slicedToArray$8(St,2),vt=Et[0],bt=vt===void 0?0:vt,Tt=Et[1],wt=bt-1;return wt===0?(ft(function(){(_t||!ot.get(dt))&&(a==null||a(Tt,!1))}),null):[bt-1,Tt]})}},[ht]),gt}var EMPTY_OVERRIDE={},hashPrefix="css",tokenKeys=new Map;function recordCleanToken(o){tokenKeys.set(o,(tokenKeys.get(o)||0)+1)}function removeStyleTags(o,i){if(typeof document<"u"){var s=document.querySelectorAll("style[".concat(ATTR_TOKEN,'="').concat(o,'"]'));s.forEach(function(a){if(a[CSS_IN_JS_INSTANCE]===i){var et;(et=a.parentNode)===null||et===void 0||et.removeChild(a)}})}}var TOKEN_THRESHOLD=0;function cleanTokenStyle(o,i){tokenKeys.set(o,(tokenKeys.get(o)||0)-1);var s=Array.from(tokenKeys.keys()),a=s.filter(function(et){var tt=tokenKeys.get(et)||0;return tt<=0});s.length-a.length>TOKEN_THRESHOLD&&a.forEach(function(et){removeStyleTags(et,i),tokenKeys.delete(et)})}var getComputedToken$1=function(i,s,a,et){var tt=a.getDerivativeToken(i),ot=_objectSpread2$1(_objectSpread2$1({},tt),s);return et&&(ot=et(ot)),ot},TOKEN_PREFIX="token";function useCacheToken(o,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=reactExports.useContext(StyleContext),et=a.cache.instanceId,tt=a.container,ot=s.salt,dt=ot===void 0?"":ot,ht=s.override,ft=ht===void 0?EMPTY_OVERRIDE:ht,pt=s.formatToken,mt=s.getComputedToken,gt=s.cssVar,_t=memoResult(function(){return Object.assign.apply(Object,[{}].concat(_toConsumableArray$1(i)))},i),yt=flattenToken(_t),St=flattenToken(ft),Et=gt?flattenToken(gt):"",vt=useGlobalCache(TOKEN_PREFIX,[dt,o.id,yt,St,Et],function(){var bt,Tt=mt?mt(_t,ft,o):getComputedToken$1(_t,ft,o,pt),wt=_objectSpread2$1({},Tt),Pt="";if(gt){var At=transformToken(Tt,gt.key,{prefix:gt.prefix,ignore:gt.ignore,unitless:gt.unitless,preserve:gt.preserve}),xt=_slicedToArray$8(At,2);Tt=xt[0],Pt=xt[1]}var Ot=token2key(Tt,dt);Tt._tokenKey=Ot,wt._tokenKey=token2key(wt,dt);var Rt=(bt=gt==null?void 0:gt.key)!==null&&bt!==void 0?bt:Ot;Tt._themeKey=Rt,recordCleanToken(Rt);var Dt="".concat(hashPrefix,"-").concat(murmur2(Ot));return Tt._hashId=Dt,[Tt,Dt,wt,Pt,(gt==null?void 0:gt.key)||""]},function(bt){cleanTokenStyle(bt[0]._themeKey,et)},function(bt){var Tt=_slicedToArray$8(bt,4),wt=Tt[0],Pt=Tt[3];if(gt&&Pt){var At=updateCSS(Pt,murmur2("css-variables-".concat(wt._themeKey)),{mark:ATTR_MARK,prepend:"queue",attachTo:tt,priority:-999});At[CSS_IN_JS_INSTANCE]=et,At.setAttribute(ATTR_TOKEN,wt._themeKey)}});return vt}var extract$2=function(i,s,a){var et=_slicedToArray$8(i,5),tt=et[2],ot=et[3],dt=et[4],ht=a||{},ft=ht.plain;if(!ot)return null;var pt=tt._tokenKey,mt=-999,gt={"data-rc-order":"prependQueue","data-rc-priority":"".concat(mt)},_t=toStyleStr(ot,dt,pt,gt,ft);return[mt,pt,_t]},unitlessKeys={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ATTR_CACHE_MAP="data-ant-cssinjs-cache-path",CSS_FILE_STYLE="_FILE_STYLE__",cachePathMap,fromCSSFile=!0;function prepare(){if(!cachePathMap&&(cachePathMap={},canUseDom())){var o=document.createElement("div");o.className=ATTR_CACHE_MAP,o.style.position="fixed",o.style.visibility="hidden",o.style.top="-9999px",document.body.appendChild(o);var i=getComputedStyle(o).content||"";i=i.replace(/^"/,"").replace(/"$/,""),i.split(";").forEach(function(et){var tt=et.split(":"),ot=_slicedToArray$8(tt,2),dt=ot[0],ht=ot[1];cachePathMap[dt]=ht});var s=document.querySelector("style[".concat(ATTR_CACHE_MAP,"]"));if(s){var a;fromCSSFile=!1,(a=s.parentNode)===null||a===void 0||a.removeChild(s)}document.body.removeChild(o)}}function existPath(o){return prepare(),!!cachePathMap[o]}function getStyleAndHash(o){var i=cachePathMap[o],s=null;if(i&&canUseDom())if(fromCSSFile)s=CSS_FILE_STYLE;else{var a=document.querySelector("style[".concat(ATTR_MARK,'="').concat(cachePathMap[o],'"]'));a?s=a.innerHTML:delete cachePathMap[o]}return[s,i]}var SKIP_CHECK="_skip_check_",MULTI_VALUE="_multi_value_";function normalizeStyle(o){var i=serialize(compile(o),stringify$1);return i.replace(/\{%%%\:[^;];}/g,";")}function isCompoundCSSProperty(o){return _typeof$i(o)==="object"&&o&&(SKIP_CHECK in o||MULTI_VALUE in o)}function injectSelectorHash(o,i,s){if(!i)return o;var a=".".concat(i),et=s==="low"?":where(".concat(a,")"):a,tt=o.split(",").map(function(ot){var dt,ht=ot.trim().split(/\s+/),ft=ht[0]||"",pt=((dt=ft.match(/^\w+/))===null||dt===void 0?void 0:dt[0])||"";return ft="".concat(pt).concat(et).concat(ft.slice(pt.length)),[ft].concat(_toConsumableArray$1(ht.slice(1))).join(" ")});return tt.join(",")}var parseStyle=function o(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},et=a.root,tt=a.injectHash,ot=a.parentSelectors,dt=s.hashId,ht=s.layer;s.path;var ft=s.hashPriority,pt=s.transformers,mt=pt===void 0?[]:pt;s.linters;var gt="",_t={};function yt(Tt){var wt=Tt.getName(dt);if(!_t[wt]){var Pt=o(Tt.style,s,{root:!1,parentSelectors:ot}),At=_slicedToArray$8(Pt,1),xt=At[0];_t[wt]="@keyframes ".concat(Tt.getName(dt)).concat(xt)}}function St(Tt){var wt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return Tt.forEach(function(Pt){Array.isArray(Pt)?St(Pt,wt):Pt&&wt.push(Pt)}),wt}var Et=St(Array.isArray(i)?i:[i]);if(Et.forEach(function(Tt){var wt=typeof Tt=="string"&&!et?{}:Tt;if(typeof wt=="string")gt+="".concat(wt,`
`);else if(wt._keyframe)yt(wt);else{var Pt=mt.reduce(function(At,xt){var Ot;return(xt==null||(Ot=xt.visit)===null||Ot===void 0?void 0:Ot.call(xt,At))||At},wt);Object.keys(Pt).forEach(function(At){var xt=Pt[At];if(_typeof$i(xt)==="object"&&xt&&(At!=="animationName"||!xt._keyframe)&&!isCompoundCSSProperty(xt)){var Ot=!1,Rt=At.trim(),Dt=!1;(et||tt)&&dt?Rt.startsWith("@")?Ot=!0:Rt=injectSelectorHash(At,dt,ft):et&&!dt&&(Rt==="&"||Rt==="")&&(Rt="",Dt=!0);var Nt=o(xt,s,{root:Dt,injectHash:Ot,parentSelectors:[].concat(_toConsumableArray$1(ot),[Rt])}),Kt=_slicedToArray$8(Nt,2),qt=Kt[0],jt=Kt[1];_t=_objectSpread2$1(_objectSpread2$1({},_t),jt),gt+="".concat(Rt).concat(qt)}else{let Wt=function(Ft,Gt){var Jt=Ft.replace(/[A-Z]/g,function(bn){return"-".concat(bn.toLowerCase())}),on=Gt;!unitlessKeys[Ft]&&typeof on=="number"&&on!==0&&(on="".concat(on,"px")),Ft==="animationName"&&Gt!==null&&Gt!==void 0&&Gt._keyframe&&(yt(Gt),on=Gt.getName(dt)),gt+="".concat(Jt,":").concat(on,";")};var Zt,Ht=(Zt=xt==null?void 0:xt.value)!==null&&Zt!==void 0?Zt:xt;_typeof$i(xt)==="object"&&xt!==null&&xt!==void 0&&xt[MULTI_VALUE]&&Array.isArray(Ht)?Ht.forEach(function(Ft){Wt(At,Ft)}):Wt(At,Ht)}})}}),!et)gt="{".concat(gt,"}");else if(ht&&supportLayer()){var vt=ht.split(","),bt=vt[vt.length-1].trim();gt="@layer ".concat(bt," {").concat(gt,"}"),vt.length>1&&(gt="@layer ".concat(ht,"{%%%:%}").concat(gt))}return[gt,_t]};function uniqueHash(o,i){return murmur2("".concat(o.join("%")).concat(i))}function Empty(){return null}var STYLE_PREFIX="style";function useStyleRegister(o,i){var s=o.token,a=o.path,et=o.hashId,tt=o.layer,ot=o.nonce,dt=o.clientOnly,ht=o.order,ft=ht===void 0?0:ht,pt=reactExports.useContext(StyleContext),mt=pt.autoClear;pt.mock;var gt=pt.defaultCache,_t=pt.hashPriority,yt=pt.container,St=pt.ssrInline,Et=pt.transformers,vt=pt.linters,bt=pt.cache,Tt=s._tokenKey,wt=[Tt].concat(_toConsumableArray$1(a)),Pt=isClientSide,At=useGlobalCache(STYLE_PREFIX,wt,function(){var Nt=wt.join("|");if(existPath(Nt)){var Kt=getStyleAndHash(Nt),qt=_slicedToArray$8(Kt,2),jt=qt[0],Zt=qt[1];if(jt)return[jt,Tt,Zt,{},dt,ft]}var Ht=i(),Wt=parseStyle(Ht,{hashId:et,hashPriority:_t,layer:tt,path:a.join("-"),transformers:Et,linters:vt}),Ft=_slicedToArray$8(Wt,2),Gt=Ft[0],Jt=Ft[1],on=normalizeStyle(Gt),bn=uniqueHash(wt,on);return[on,Tt,bn,Jt,dt,ft]},function(Nt,Kt){var qt=_slicedToArray$8(Nt,3),jt=qt[2];(Kt||mt)&&isClientSide&&removeCSS(jt,{mark:ATTR_MARK})},function(Nt){var Kt=_slicedToArray$8(Nt,4),qt=Kt[0];Kt[1];var jt=Kt[2],Zt=Kt[3];if(Pt&&qt!==CSS_FILE_STYLE){var Ht={mark:ATTR_MARK,prepend:"queue",attachTo:yt,priority:ft},Wt=typeof ot=="function"?ot():ot;Wt&&(Ht.csp={nonce:Wt});var Ft=updateCSS(qt,jt,Ht);Ft[CSS_IN_JS_INSTANCE]=bt.instanceId,Ft.setAttribute(ATTR_TOKEN,Tt),Object.keys(Zt).forEach(function(Gt){updateCSS(normalizeStyle(Zt[Gt]),"_effect-".concat(Gt),Ht)})}}),xt=_slicedToArray$8(At,3),Ot=xt[0],Rt=xt[1],Dt=xt[2];return function(Nt){var Kt;if(!St||Pt||!gt)Kt=reactExports.createElement(Empty,null);else{var qt;Kt=reactExports.createElement("style",_extends$x({},(qt={},_defineProperty$g(qt,ATTR_TOKEN,Rt),_defineProperty$g(qt,ATTR_MARK,Dt),qt),{dangerouslySetInnerHTML:{__html:Ot}}))}return reactExports.createElement(reactExports.Fragment,null,Kt,Nt)}}var extract$1=function(i,s,a){var et=_slicedToArray$8(i,6),tt=et[0],ot=et[1],dt=et[2],ht=et[3],ft=et[4],pt=et[5],mt=a||{},gt=mt.plain;if(ft)return null;var _t=tt,yt={"data-rc-order":"prependQueue","data-rc-priority":"".concat(pt)};return _t=toStyleStr(tt,ot,dt,yt,gt),ht&&Object.keys(ht).forEach(function(St){if(!s[St]){s[St]=!0;var Et=normalizeStyle(ht[St]);_t+=toStyleStr(Et,ot,"_effect-".concat(St),yt,gt)}}),[pt,dt,_t]},CSS_VAR_PREFIX="cssVar",useCSSVarRegister=function(i,s){var a=i.key,et=i.prefix,tt=i.unitless,ot=i.ignore,dt=i.token,ht=i.scope,ft=ht===void 0?"":ht,pt=reactExports.useContext(StyleContext),mt=pt.cache.instanceId,gt=pt.container,_t=dt._tokenKey,yt=[].concat(_toConsumableArray$1(i.path),[a,ft,_t]),St=useGlobalCache(CSS_VAR_PREFIX,yt,function(){var Et=s(),vt=transformToken(Et,a,{prefix:et,unitless:tt,ignore:ot,scope:ft}),bt=_slicedToArray$8(vt,2),Tt=bt[0],wt=bt[1],Pt=uniqueHash(yt,wt);return[Tt,wt,Pt,a]},function(Et){var vt=_slicedToArray$8(Et,3),bt=vt[2];isClientSide&&removeCSS(bt,{mark:ATTR_MARK})},function(Et){var vt=_slicedToArray$8(Et,3),bt=vt[1],Tt=vt[2];if(bt){var wt=updateCSS(bt,Tt,{mark:ATTR_MARK,prepend:"queue",attachTo:gt,priority:-999});wt[CSS_IN_JS_INSTANCE]=mt,wt.setAttribute(ATTR_TOKEN,a)}});return St},extract=function(i,s,a){var et=_slicedToArray$8(i,4),tt=et[1],ot=et[2],dt=et[3],ht=a||{},ft=ht.plain;if(!tt)return null;var pt=-999,mt={"data-rc-order":"prependQueue","data-rc-priority":"".concat(pt)},gt=toStyleStr(tt,dt,ot,mt,ft);return[pt,ot,gt]},_ExtractStyleFns;_ExtractStyleFns={},_defineProperty$g(_ExtractStyleFns,STYLE_PREFIX,extract$1),_defineProperty$g(_ExtractStyleFns,TOKEN_PREFIX,extract$2),_defineProperty$g(_ExtractStyleFns,CSS_VAR_PREFIX,extract);var Keyframe=function(){function o(i,s){_classCallCheck$5(this,o),_defineProperty$g(this,"name",void 0),_defineProperty$g(this,"style",void 0),_defineProperty$g(this,"_keyframe",!0),this.name=i,this.style=s}return _createClass$5(o,[{key:"getName",value:function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return s?"".concat(s,"-").concat(this.name):this.name}}]),o}();function noSplit(o){return o.notSplit=!0,o}noSplit(["borderTop","borderBottom"]),noSplit(["borderTop"]),noSplit(["borderBottom"]),noSplit(["borderLeft","borderRight"]),noSplit(["borderLeft"]),noSplit(["borderRight"]);function _toArray(o){return _arrayWithHoles$8(o)||_iterableToArray$1(o)||_unsupportedIterableToArray$8(o)||_nonIterableRest$8()}function get$1(o,i){for(var s=o,a=0;a<i.length;a+=1){if(s==null)return;s=s[i[a]]}return s}function internalSet(o,i,s,a){if(!i.length)return s;var et=_toArray(i),tt=et[0],ot=et.slice(1),dt;return!o&&typeof tt=="number"?dt=[]:Array.isArray(o)?dt=_toConsumableArray$1(o):dt=_objectSpread2$1({},o),a&&s===void 0&&ot.length===1?delete dt[tt][ot[0]]:dt[tt]=internalSet(dt[tt],ot,s,a),dt}function set$1(o,i,s){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return i.length&&a&&s===void 0&&!get$1(o,i.slice(0,-1))?o:internalSet(o,i,s,a)}function isObject(o){return _typeof$i(o)==="object"&&o!==null&&Object.getPrototypeOf(o)===Object.prototype}function createEmpty(o){return Array.isArray(o)?[]:{}}var keys=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function merge$1(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];var a=createEmpty(i[0]);return i.forEach(function(et){function tt(ot,dt){var ht=new Set(dt),ft=get$1(et,ot),pt=Array.isArray(ft);if(pt||isObject(ft)){if(!ht.has(ft)){ht.add(ft);var mt=get$1(a,ot);pt?a=set$1(a,ot,[]):(!mt||_typeof$i(mt)!=="object")&&(a=set$1(a,ot,createEmpty(ft))),keys(ft).forEach(function(gt){tt([].concat(_toConsumableArray$1(ot),[gt]),ht)})}}else a=set$1(a,ot,ft)}tt([])}),a}function noop$4(){}const WarningContext=reactExports.createContext({}),devUseWarning=()=>{const o=()=>{};return o.deprecated=noop$4,o},ValidateMessagesContext=reactExports.createContext(void 0);var locale$3={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},locale$2={locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",yearFormat:"YYYY",dateFormat:"M/D/YYYY",dayFormat:"D",dateTimeFormat:"M/D/YYYY HH:mm:ss",monthBeforeYear:!0,previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"};const locale$1={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},TimePicker=locale$1,locale={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},locale$2),timePickerLocale:Object.assign({},TimePicker)},enUS=locale,typeTemplate="${label} is not a valid ${type}",localeValues={locale:"en",Pagination:locale$3,DatePicker:enUS,TimePicker,Calendar:enUS,global:{placeholder:"Please select"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckall:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand"},PageHeader:{back:"Back"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:typeTemplate,method:typeTemplate,array:typeTemplate,object:typeTemplate,number:typeTemplate,date:typeTemplate,boolean:typeTemplate,integer:typeTemplate,float:typeTemplate,regexp:typeTemplate,email:typeTemplate,url:typeTemplate,hex:typeTemplate},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh"},ColorPicker:{presetEmpty:"Empty"}},defaultLocale=localeValues;Object.assign({},defaultLocale.Modal);let localeList=[];const generateLocale=()=>localeList.reduce((o,i)=>Object.assign(Object.assign({},o),i),defaultLocale.Modal);function changeConfirmLocale(o){if(o){const i=Object.assign({},o);return localeList.push(i),generateLocale(),()=>{localeList=localeList.filter(s=>s!==i),generateLocale()}}Object.assign({},defaultLocale.Modal)}const LocaleContext=reactExports.createContext(void 0),LocaleContext$1=LocaleContext,useLocale=(o,i)=>{const s=reactExports.useContext(LocaleContext$1),a=reactExports.useMemo(()=>{var tt;const ot=i||defaultLocale[o],dt=(tt=s==null?void 0:s[o])!==null&&tt!==void 0?tt:{};return Object.assign(Object.assign({},typeof ot=="function"?ot():ot),dt||{})},[o,i,s]),et=reactExports.useMemo(()=>{const tt=s==null?void 0:s.locale;return s!=null&&s.exist&&!tt?defaultLocale.locale:tt},[s]);return[a,et]},useLocale$1=useLocale,ANT_MARK="internalMark",LocaleProvider=o=>{const{locale:i={},children:s,_ANT_MARK__:a}=o;reactExports.useEffect(()=>changeConfirmLocale(i&&i.Modal),[i]);const et=reactExports.useMemo(()=>Object.assign(Object.assign({},i),{exist:!0}),[i]);return reactExports.createElement(LocaleContext$1.Provider,{value:et},s)},LocaleProvider$1=LocaleProvider,genControlHeight=o=>{const{controlHeight:i}=o;return{controlHeightSM:i*.75,controlHeightXS:i*.5,controlHeightLG:i*1.25}},genControlHeight$1=genControlHeight;function genSizeMapToken(o){const{sizeUnit:i,sizeStep:s}=o;return{sizeXXL:i*(s+8),sizeXL:i*(s+4),sizeLG:i*(s+2),sizeMD:i*(s+1),sizeMS:i*s,size:i*s,sizeSM:i*(s-1),sizeXS:i*(s-2),sizeXXS:i*(s-3)}}const defaultPresetColors={blue:"#1677ff",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#eb2f96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},seedToken=Object.assign(Object.assign({},defaultPresetColors),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),seedToken$1=seedToken;function genColorMapToken(o,i){let{generateColorPalettes:s,generateNeutralColorPalettes:a}=i;const{colorSuccess:et,colorWarning:tt,colorError:ot,colorInfo:dt,colorPrimary:ht,colorBgBase:ft,colorTextBase:pt}=o,mt=s(ht),gt=s(et),_t=s(tt),yt=s(ot),St=s(dt),Et=a(ft,pt),vt=o.colorLink||o.colorInfo,bt=s(vt);return Object.assign(Object.assign({},Et),{colorPrimaryBg:mt[1],colorPrimaryBgHover:mt[2],colorPrimaryBorder:mt[3],colorPrimaryBorderHover:mt[4],colorPrimaryHover:mt[5],colorPrimary:mt[6],colorPrimaryActive:mt[7],colorPrimaryTextHover:mt[8],colorPrimaryText:mt[9],colorPrimaryTextActive:mt[10],colorSuccessBg:gt[1],colorSuccessBgHover:gt[2],colorSuccessBorder:gt[3],colorSuccessBorderHover:gt[4],colorSuccessHover:gt[4],colorSuccess:gt[6],colorSuccessActive:gt[7],colorSuccessTextHover:gt[8],colorSuccessText:gt[9],colorSuccessTextActive:gt[10],colorErrorBg:yt[1],colorErrorBgHover:yt[2],colorErrorBorder:yt[3],colorErrorBorderHover:yt[4],colorErrorHover:yt[5],colorError:yt[6],colorErrorActive:yt[7],colorErrorTextHover:yt[8],colorErrorText:yt[9],colorErrorTextActive:yt[10],colorWarningBg:_t[1],colorWarningBgHover:_t[2],colorWarningBorder:_t[3],colorWarningBorderHover:_t[4],colorWarningHover:_t[4],colorWarning:_t[6],colorWarningActive:_t[7],colorWarningTextHover:_t[8],colorWarningText:_t[9],colorWarningTextActive:_t[10],colorInfoBg:St[1],colorInfoBgHover:St[2],colorInfoBorder:St[3],colorInfoBorderHover:St[4],colorInfoHover:St[4],colorInfo:St[6],colorInfoActive:St[7],colorInfoTextHover:St[8],colorInfoText:St[9],colorInfoTextActive:St[10],colorLinkHover:bt[4],colorLink:bt[6],colorLinkActive:bt[7],colorBgMask:new TinyColor("#000").setAlpha(.45).toRgbString(),colorWhite:"#fff"})}const genRadius=o=>{let i=o,s=o,a=o,et=o;return o<6&&o>=5?i=o+1:o<16&&o>=6?i=o+2:o>=16&&(i=16),o<7&&o>=5?s=4:o<8&&o>=7?s=5:o<14&&o>=8?s=6:o<16&&o>=14?s=7:o>=16&&(s=8),o<6&&o>=2?a=1:o>=6&&(a=2),o>4&&o<8?et=4:o>=8&&(et=6),{borderRadius:o,borderRadiusXS:a,borderRadiusSM:s,borderRadiusLG:i,borderRadiusOuter:et}},genRadius$1=genRadius;function genCommonMapToken(o){const{motionUnit:i,motionBase:s,borderRadius:a,lineWidth:et}=o;return Object.assign({motionDurationFast:`${(s+i).toFixed(1)}s`,motionDurationMid:`${(s+i*2).toFixed(1)}s`,motionDurationSlow:`${(s+i*3).toFixed(1)}s`,lineWidthBold:et+1},genRadius$1(a))}const getAlphaColor$1=(o,i)=>new TinyColor(o).setAlpha(i).toRgbString(),getSolidColor=(o,i)=>new TinyColor(o).darken(i).toHexString(),generateColorPalettes=o=>{const i=generate$1(o);return{1:i[0],2:i[1],3:i[2],4:i[3],5:i[4],6:i[5],7:i[6],8:i[4],9:i[5],10:i[6]}},generateNeutralColorPalettes=(o,i)=>{const s=o||"#fff",a=i||"#000";return{colorBgBase:s,colorTextBase:a,colorText:getAlphaColor$1(a,.88),colorTextSecondary:getAlphaColor$1(a,.65),colorTextTertiary:getAlphaColor$1(a,.45),colorTextQuaternary:getAlphaColor$1(a,.25),colorFill:getAlphaColor$1(a,.15),colorFillSecondary:getAlphaColor$1(a,.06),colorFillTertiary:getAlphaColor$1(a,.04),colorFillQuaternary:getAlphaColor$1(a,.02),colorBgLayout:getSolidColor(s,4),colorBgContainer:getSolidColor(s,0),colorBgElevated:getSolidColor(s,0),colorBgSpotlight:getAlphaColor$1(a,.85),colorBgBlur:"transparent",colorBorder:getSolidColor(s,15),colorBorderSecondary:getSolidColor(s,6)}};function getFontSizes(o){const i=new Array(10).fill(null).map((s,a)=>{const et=a-1,tt=o*Math.pow(2.71828,et/5),ot=a>1?Math.floor(tt):Math.ceil(tt);return Math.floor(ot/2)*2});return i[1]=o,i.map(s=>{const a=s+8;return{size:s,lineHeight:a/s}})}const genFontMapToken=o=>{const i=getFontSizes(o),s=i.map(pt=>pt.size),a=i.map(pt=>pt.lineHeight),et=s[1],tt=s[0],ot=s[2],dt=a[1],ht=a[0],ft=a[2];return{fontSizeSM:tt,fontSize:et,fontSizeLG:ot,fontSizeXL:s[3],fontSizeHeading1:s[6],fontSizeHeading2:s[5],fontSizeHeading3:s[4],fontSizeHeading4:s[3],fontSizeHeading5:s[2],lineHeight:dt,lineHeightLG:ft,lineHeightSM:ht,fontHeight:Math.round(dt*et),fontHeightLG:Math.round(ft*ot),fontHeightSM:Math.round(ht*tt),lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}},genFontMapToken$1=genFontMapToken;function derivative(o){const i=Object.keys(defaultPresetColors).map(s=>{const a=generate$1(o[s]);return new Array(10).fill(1).reduce((et,tt,ot)=>(et[`${s}-${ot+1}`]=a[ot],et[`${s}${ot+1}`]=a[ot],et),{})}).reduce((s,a)=>(s=Object.assign(Object.assign({},s),a),s),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},o),i),genColorMapToken(o,{generateColorPalettes,generateNeutralColorPalettes})),genFontMapToken$1(o.fontSize)),genSizeMapToken(o)),genControlHeight$1(o)),genCommonMapToken(o))}const defaultTheme=createTheme(derivative),defaultConfig={token:seedToken$1,override:{override:seedToken$1},hashed:!0},DesignTokenContext=React.createContext(defaultConfig),defaultIconPrefixCls="anticon",defaultGetPrefixCls=(o,i)=>i||(o?`ant-${o}`:"ant"),ConfigContext=reactExports.createContext({getPrefixCls:defaultGetPrefixCls,iconPrefixCls:defaultIconPrefixCls}),dynamicStyleMark=`-ant-${Date.now()}-${Math.random()}`;function getStyle(o,i){const s={},a=(ot,dt)=>{let ht=ot.clone();return ht=(dt==null?void 0:dt(ht))||ht,ht.toRgbString()},et=(ot,dt)=>{const ht=new TinyColor(ot),ft=generate$1(ht.toRgbString());s[`${dt}-color`]=a(ht),s[`${dt}-color-disabled`]=ft[1],s[`${dt}-color-hover`]=ft[4],s[`${dt}-color-active`]=ft[6],s[`${dt}-color-outline`]=ht.clone().setAlpha(.2).toRgbString(),s[`${dt}-color-deprecated-bg`]=ft[0],s[`${dt}-color-deprecated-border`]=ft[2]};if(i.primaryColor){et(i.primaryColor,"primary");const ot=new TinyColor(i.primaryColor),dt=generate$1(ot.toRgbString());dt.forEach((ft,pt)=>{s[`primary-${pt+1}`]=ft}),s["primary-color-deprecated-l-35"]=a(ot,ft=>ft.lighten(35)),s["primary-color-deprecated-l-20"]=a(ot,ft=>ft.lighten(20)),s["primary-color-deprecated-t-20"]=a(ot,ft=>ft.tint(20)),s["primary-color-deprecated-t-50"]=a(ot,ft=>ft.tint(50)),s["primary-color-deprecated-f-12"]=a(ot,ft=>ft.setAlpha(ft.getAlpha()*.12));const ht=new TinyColor(dt[0]);s["primary-color-active-deprecated-f-30"]=a(ht,ft=>ft.setAlpha(ft.getAlpha()*.3)),s["primary-color-active-deprecated-d-02"]=a(ht,ft=>ft.darken(2))}return i.successColor&&et(i.successColor,"success"),i.warningColor&&et(i.warningColor,"warning"),i.errorColor&&et(i.errorColor,"error"),i.infoColor&&et(i.infoColor,"info"),`
  :root {
    ${Object.keys(s).map(ot=>`--${o}-${ot}: ${s[ot]};`).join(`
`)}
  }
  `.trim()}function registerTheme(o,i){const s=getStyle(o,i);canUseDom()&&updateCSS(s,`${dynamicStyleMark}-dynamic-theme`)}const DisabledContext=reactExports.createContext(!1),DisabledContextProvider=o=>{let{children:i,disabled:s}=o;const a=reactExports.useContext(DisabledContext);return reactExports.createElement(DisabledContext.Provider,{value:s??a},i)},DisabledContext$1=DisabledContext,SizeContext=reactExports.createContext(void 0),SizeContextProvider=o=>{let{children:i,size:s}=o;const a=reactExports.useContext(SizeContext);return reactExports.createElement(SizeContext.Provider,{value:s||a},i)},SizeContext$1=SizeContext;function useConfig(){const o=reactExports.useContext(DisabledContext$1),i=reactExports.useContext(SizeContext$1);return{componentDisabled:o,componentSize:i}}const PresetColors=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],version$1="5.12.5";function isStableColor(o){return o>=0&&o<=255}function getAlphaColor(o,i){const{r:s,g:a,b:et,a:tt}=new TinyColor(o).toRgb();if(tt<1)return o;const{r:ot,g:dt,b:ht}=new TinyColor(i).toRgb();for(let ft=.01;ft<=1;ft+=.01){const pt=Math.round((s-ot*(1-ft))/ft),mt=Math.round((a-dt*(1-ft))/ft),gt=Math.round((et-ht*(1-ft))/ft);if(isStableColor(pt)&&isStableColor(mt)&&isStableColor(gt))return new TinyColor({r:pt,g:mt,b:gt,a:Math.round(ft*100)/100}).toRgbString()}return new TinyColor({r:s,g:a,b:et,a:1}).toRgbString()}var __rest$c=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};function formatToken(o){const{override:i}=o,s=__rest$c(o,["override"]),a=Object.assign({},i);Object.keys(seedToken$1).forEach(gt=>{delete a[gt]});const et=Object.assign(Object.assign({},s),a),tt=480,ot=576,dt=768,ht=992,ft=1200,pt=1600;if(et.motion===!1){const gt="0s";et.motionDurationFast=gt,et.motionDurationMid=gt,et.motionDurationSlow=gt}return Object.assign(Object.assign(Object.assign({},et),{colorFillContent:et.colorFillSecondary,colorFillContentHover:et.colorFill,colorFillAlter:et.colorFillQuaternary,colorBgContainerDisabled:et.colorFillTertiary,colorBorderBg:et.colorBgContainer,colorSplit:getAlphaColor(et.colorBorderSecondary,et.colorBgContainer),colorTextPlaceholder:et.colorTextQuaternary,colorTextDisabled:et.colorTextQuaternary,colorTextHeading:et.colorText,colorTextLabel:et.colorTextSecondary,colorTextDescription:et.colorTextTertiary,colorTextLightSolid:et.colorWhite,colorHighlight:et.colorError,colorBgTextHover:et.colorFillSecondary,colorBgTextActive:et.colorFill,colorIcon:et.colorTextTertiary,colorIconHover:et.colorText,colorErrorOutline:getAlphaColor(et.colorErrorBg,et.colorBgContainer),colorWarningOutline:getAlphaColor(et.colorWarningBg,et.colorBgContainer),fontSizeIcon:et.fontSizeSM,lineWidthFocus:et.lineWidth*4,lineWidth:et.lineWidth,controlOutlineWidth:et.lineWidth*2,controlInteractiveSize:et.controlHeight/2,controlItemBgHover:et.colorFillTertiary,controlItemBgActive:et.colorPrimaryBg,controlItemBgActiveHover:et.colorPrimaryBgHover,controlItemBgActiveDisabled:et.colorFill,controlTmpOutline:et.colorFillQuaternary,controlOutline:getAlphaColor(et.colorPrimaryBg,et.colorBgContainer),lineType:et.lineType,borderRadius:et.borderRadius,borderRadiusXS:et.borderRadiusXS,borderRadiusSM:et.borderRadiusSM,borderRadiusLG:et.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:et.sizeXXS,paddingXS:et.sizeXS,paddingSM:et.sizeSM,padding:et.size,paddingMD:et.sizeMD,paddingLG:et.sizeLG,paddingXL:et.sizeXL,paddingContentHorizontalLG:et.sizeLG,paddingContentVerticalLG:et.sizeMS,paddingContentHorizontal:et.sizeMS,paddingContentVertical:et.sizeSM,paddingContentHorizontalSM:et.size,paddingContentVerticalSM:et.sizeXS,marginXXS:et.sizeXXS,marginXS:et.sizeXS,marginSM:et.sizeSM,margin:et.size,marginMD:et.sizeMD,marginLG:et.sizeLG,marginXL:et.sizeXL,marginXXL:et.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:tt,screenXSMin:tt,screenXSMax:ot-1,screenSM:ot,screenSMMin:ot,screenSMMax:dt-1,screenMD:dt,screenMDMin:dt,screenMDMax:ht-1,screenLG:ht,screenLGMin:ht,screenLGMax:ft-1,screenXL:ft,screenXLMin:ft,screenXLMax:pt-1,screenXXL:pt,screenXXLMin:pt,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new TinyColor("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new TinyColor("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new TinyColor("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var __rest$b=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const unitless={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0},ignore={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},preserve={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},getComputedToken=(o,i,s)=>{const a=s.getDerivativeToken(o),{override:et}=i,tt=__rest$b(i,["override"]);let ot=Object.assign(Object.assign({},a),{override:et});return ot=formatToken(ot),tt&&Object.entries(tt).forEach(dt=>{let[ht,ft]=dt;const{theme:pt}=ft,mt=__rest$b(ft,["theme"]);let gt=mt;pt&&(gt=getComputedToken(Object.assign(Object.assign({},ot),mt),{override:mt},pt)),ot[ht]=gt}),ot};function useToken(){const{token:o,hashed:i,theme:s,override:a,cssVar:et}=React.useContext(DesignTokenContext),tt=`${version$1}-${i||""}`,ot=s||defaultTheme,[dt,ht,ft]=useCacheToken(ot,[seedToken$1,o],{salt:tt,override:a,getComputedToken,formatToken,cssVar:et&&{prefix:et.prefix,key:et.key,unitless,ignore,preserve}});return[ot,ft,i?ht:"",dt,et]}function useEvent(o){var i=reactExports.useRef();i.current=o;var s=reactExports.useCallback(function(){for(var a,et=arguments.length,tt=new Array(et),ot=0;ot<et;ot++)tt[ot]=arguments[ot];return(a=i.current)===null||a===void 0?void 0:a.call.apply(a,[i].concat(tt))},[]);return s}function useSafeState(o){var i=reactExports.useRef(!1),s=reactExports.useState(o),a=_slicedToArray$8(s,2),et=a[0],tt=a[1];reactExports.useEffect(function(){return i.current=!1,function(){i.current=!0}},[]);function ot(dt,ht){ht&&i.current||tt(dt)}return[et,ot]}function hasValue(o){return o!==void 0}function useMergedState(o,i){var s=i||{},a=s.defaultValue,et=s.value,tt=s.onChange,ot=s.postState,dt=useSafeState(function(){return hasValue(et)?et:hasValue(a)?typeof a=="function"?a():a:typeof o=="function"?o():o}),ht=_slicedToArray$8(dt,2),ft=ht[0],pt=ht[1],mt=et!==void 0?et:ft,gt=ot?ot(mt):mt,_t=useEvent(tt),yt=useSafeState([mt]),St=_slicedToArray$8(yt,2),Et=St[0],vt=St[1];useLayoutUpdateEffect(function(){var Tt=Et[0];ft!==Tt&&_t(ft,Tt)},[Et]),useLayoutUpdateEffect(function(){hasValue(et)||pt(et)},[et]);var bt=useEvent(function(Tt,wt){pt(Tt,wt),vt([mt],wt)});return[gt,bt]}const textEllipsis={overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis"},resetComponent=function(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return{boxSizing:"border-box",margin:0,padding:0,color:o.colorText,fontSize:o.fontSize,lineHeight:o.lineHeight,listStyle:"none",fontFamily:i?"inherit":o.fontFamily}},resetIcon=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),clearFix=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),genLinkStyle=o=>({a:{color:o.colorLink,textDecoration:o.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${o.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:o.colorLinkHover},"&:active":{color:o.colorLinkActive},"&:active,\n  &:hover":{textDecoration:o.linkHoverDecoration,outline:0},"&:focus":{textDecoration:o.linkFocusDecoration,outline:0},"&[disabled]":{color:o.colorTextDisabled,cursor:"not-allowed"}}}),genCommonStyle=(o,i)=>{const{fontFamily:s,fontSize:a}=o,et=`[class^="${i}"], [class*=" ${i}"]`;return{[et]:{fontFamily:s,fontSize:a,boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"},[et]:{boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}}}}},genFocusOutline=o=>({outline:`${unit$1(o.lineWidthFocus)} solid ${o.colorPrimaryBorder}`,outlineOffset:1,transition:"outline-offset 0s, outline 0s"}),genFocusStyle=o=>({"&:focus-visible":Object.assign({},genFocusOutline(o))});let AbstractCalculator=_createClass$5(function o(){_classCallCheck$5(this,o)});const AbstractCalculator$1=AbstractCalculator;let NumCalculator=function(o){_inherits$4(s,o);var i=_createSuper$4(s);function s(a){var et;return _classCallCheck$5(this,s),et=i.call(this),et.result=0,a instanceof s?et.result=a.result:typeof a=="number"&&(et.result=a),et}return _createClass$5(s,[{key:"add",value:function(et){return et instanceof s?this.result+=et.result:typeof et=="number"&&(this.result+=et),this}},{key:"sub",value:function(et){return et instanceof s?this.result-=et.result:typeof et=="number"&&(this.result-=et),this}},{key:"mul",value:function(et){return et instanceof s?this.result*=et.result:typeof et=="number"&&(this.result*=et),this}},{key:"div",value:function(et){return et instanceof s?this.result/=et.result:typeof et=="number"&&(this.result/=et),this}},{key:"equal",value:function(){return this.result}}]),s}(AbstractCalculator$1);const CALC_UNIT="CALC_UNIT";function unit(o){return typeof o=="number"?`${o}${CALC_UNIT}`:o}let CSSCalculator=function(o){_inherits$4(s,o);var i=_createSuper$4(s);function s(a){var et;return _classCallCheck$5(this,s),et=i.call(this),et.result="",a instanceof s?et.result=`(${a.result})`:typeof a=="number"?et.result=unit(a):typeof a=="string"&&(et.result=a),et}return _createClass$5(s,[{key:"add",value:function(et){return et instanceof s?this.result=`${this.result} + ${et.getResult()}`:(typeof et=="number"||typeof et=="string")&&(this.result=`${this.result} + ${unit(et)}`),this.lowPriority=!0,this}},{key:"sub",value:function(et){return et instanceof s?this.result=`${this.result} - ${et.getResult()}`:(typeof et=="number"||typeof et=="string")&&(this.result=`${this.result} - ${unit(et)}`),this.lowPriority=!0,this}},{key:"mul",value:function(et){return this.lowPriority&&(this.result=`(${this.result})`),et instanceof s?this.result=`${this.result} * ${et.getResult(!0)}`:(typeof et=="number"||typeof et=="string")&&(this.result=`${this.result} * ${et}`),this.lowPriority=!1,this}},{key:"div",value:function(et){return this.lowPriority&&(this.result=`(${this.result})`),et instanceof s?this.result=`${this.result} / ${et.getResult(!0)}`:(typeof et=="number"||typeof et=="string")&&(this.result=`${this.result} / ${et}`),this.lowPriority=!1,this}},{key:"getResult",value:function(et){return this.lowPriority||et?`(${this.result})`:this.result}},{key:"equal",value:function(et){const{unit:tt=!0}=et||{},ot=new RegExp(`${CALC_UNIT}`,"g");return this.result=this.result.replace(ot,tt?"px":""),typeof this.lowPriority<"u"?`calc(${this.result})`:this.result}}]),s}(AbstractCalculator$1);const genCalc=o=>{const i=o==="css"?CSSCalculator:NumCalculator;return s=>new i(s)},genCalc$1=genCalc;function genMaxMin(o){return o==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return`max(${s.map(et=>unit$1(et)).join(",")})`},min:function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return`min(${s.map(et=>unit$1(et)).join(",")})`}}}const enableStatistic=typeof CSSINJS_STATISTIC<"u";let recording=!0;function merge(){for(var o=arguments.length,i=new Array(o),s=0;s<o;s++)i[s]=arguments[s];if(!enableStatistic)return Object.assign.apply(Object,[{}].concat(i));recording=!1;const a={};return i.forEach(et=>{Object.keys(et).forEach(ot=>{Object.defineProperty(a,ot,{configurable:!0,enumerable:!0,get:()=>et[ot]})})}),recording=!0,a}const statistic={};function noop$3(){}function statisticToken(o){let i,s=o,a=noop$3;return enableStatistic&&typeof Proxy<"u"&&(i=new Set,s=new Proxy(o,{get(et,tt){return recording&&i.add(tt),et[tt]}}),a=(et,tt)=>{var ot;statistic[et]={global:Array.from(i),component:Object.assign(Object.assign({},(ot=statistic[et])===null||ot===void 0?void 0:ot.component),tt)}}),{token:s,keys:i,flush:a}}const useResetIconStyle=(o,i)=>{const[s,a]=useToken();return useStyleRegister({theme:s,token:a,hashId:"",path:["ant-design-icons",o],nonce:()=>i==null?void 0:i.nonce},()=>[{[`.${o}`]:Object.assign(Object.assign({},resetIcon()),{[`.${o} .${o}-icon`]:{display:"block"}})}])},useStyle$6=useResetIconStyle,getDefaultComponentToken=(o,i,s)=>{var a;return typeof s=="function"?s(merge(i,(a=i[o])!==null&&a!==void 0?a:{})):s??{}},getComponentToken=(o,i,s,a)=>{const et=Object.assign({},i[o]);if(a!=null&&a.deprecatedTokens){const{deprecatedTokens:ot}=a;ot.forEach(dt=>{let[ht,ft]=dt;var pt;(et!=null&&et[ht]||et!=null&&et[ft])&&((pt=et[ft])!==null&&pt!==void 0||(et[ft]=et==null?void 0:et[ht]))})}let tt=Object.assign(Object.assign({},s),et);return a!=null&&a.format&&(tt=a.format(tt)),Object.keys(tt).forEach(ot=>{tt[ot]===i[ot]&&delete tt[ot]}),tt},getCompVarPrefix=(o,i)=>`${[i,o.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-")}`;function genComponentStyleHook(o,i,s){let a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const et=Array.isArray(o)?o:[o,o],[tt]=et,ot=et.join("-");return dt=>{const[ht,ft,pt,mt,gt]=useToken(),{getPrefixCls:_t,iconPrefixCls:yt,csp:St}=reactExports.useContext(ConfigContext),Et=_t(),vt=gt?"css":"js",bt=genCalc$1(vt),{max:Tt,min:wt}=genMaxMin(vt),Pt={theme:ht,token:mt,hashId:pt,nonce:()=>St==null?void 0:St.nonce,clientOnly:a.clientOnly,order:a.order||-999};return useStyleRegister(Object.assign(Object.assign({},Pt),{clientOnly:!1,path:["Shared",Et]}),()=>[{"&":genLinkStyle(mt)}]),useStyle$6(yt,St),[useStyleRegister(Object.assign(Object.assign({},Pt),{path:[ot,dt,yt]}),()=>{if(a.injectStyle===!1)return[];const{token:xt,flush:Ot}=statisticToken(mt),Rt=getDefaultComponentToken(tt,ft,s),Dt=`.${dt}`,Nt=getComponentToken(tt,ft,Rt,{deprecatedTokens:a.deprecatedTokens,format:a.format});gt&&Object.keys(Rt).forEach(jt=>{Rt[jt]=`var(${token2CSSVar(jt,getCompVarPrefix(tt,gt.prefix))})`});const Kt=merge(xt,{componentCls:Dt,prefixCls:dt,iconCls:`.${yt}`,antCls:`.${Et}`,calc:bt,max:Tt,min:wt},gt?Rt:Nt),qt=i(Kt,{hashId:pt,prefixCls:dt,rootPrefixCls:Et,iconPrefixCls:yt});return Ot(tt,Nt),[a.resetStyle===!1?null:genCommonStyle(Kt,dt),qt]}),pt]}}const genSubStyleComponent=(o,i,s,a)=>{const et=genComponentStyleHook(o,i,s,Object.assign({resetStyle:!1,order:-998},a));return ot=>{let{prefixCls:dt}=ot;return et(dt),null}},genCSSVarRegister=(o,i,s)=>{function a(ft){return`${o}${ft.slice(0,1).toUpperCase()}${ft.slice(1)}`}const{unitless:et={},injectStyle:tt=!0}=s??{},ot={[a("zIndexPopup")]:!0};Object.keys(et).forEach(ft=>{ot[a(ft)]=et[ft]});const dt=ft=>{let{rootCls:pt,cssVar:mt}=ft;const[,gt]=useToken();return useCSSVarRegister({path:[o],prefix:mt.prefix,key:mt==null?void 0:mt.key,unitless:Object.assign(Object.assign({},unitless),ot),ignore,token:gt,scope:pt},()=>{const _t=getDefaultComponentToken(o,gt,i),yt=getComponentToken(o,gt,_t,{format:s==null?void 0:s.format,deprecatedTokens:s==null?void 0:s.deprecatedTokens});return Object.keys(_t).forEach(St=>{yt[a(St)]=yt[St],delete yt[St]}),yt}),null};return ft=>{const[,,,,pt]=useToken();return[mt=>tt&&pt?React.createElement(React.Fragment,null,React.createElement(dt,{rootCls:ft,cssVar:pt,component:o}),mt):mt,pt==null?void 0:pt.key]}},genStyleHooks=(o,i,s,a)=>{const et=genComponentStyleHook(o,i,s,a),tt=genCSSVarRegister(Array.isArray(o)?o[0]:o,s,a);return function(ot){let dt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ot;const[,ht]=et(ot),[ft,pt]=tt(dt);return[ft,ht,pt]}};function genPresetColor(o,i){return PresetColors.reduce((s,a)=>{const et=o[`${a}1`],tt=o[`${a}3`],ot=o[`${a}6`],dt=o[`${a}7`];return Object.assign(Object.assign({},s),i(a,{lightColor:et,lightBorderColor:tt,darkColor:ot,textColor:dt}))},{})}const fullClone$1=Object.assign({},React$1),{useId:useId$2}=fullClone$1,useEmptyId=()=>"",useThemeKey=typeof useId$2>"u"?useEmptyId:useId$2,useThemeKey$1=useThemeKey;function useTheme(o,i){devUseWarning();const s=o||{},a=s.inherit===!1||!i?defaultConfig:i,et=useThemeKey$1();return useMemo(()=>{var tt,ot;if(!o)return i;const dt=Object.assign({},a.components);Object.keys(o.components||{}).forEach(pt=>{dt[pt]=Object.assign(Object.assign({},dt[pt]),o.components[pt])});const ht=`css-var-${et.replace(/:/g,"")}`,ft=((tt=s.cssVar)!==null&&tt!==void 0?tt:a.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:"ant"},typeof a.cssVar=="object"?a.cssVar:{}),typeof s.cssVar=="object"?s.cssVar:{}),{key:typeof s.cssVar=="object"&&((ot=s.cssVar)===null||ot===void 0?void 0:ot.key)||ht});return Object.assign(Object.assign(Object.assign({},a),s),{token:Object.assign(Object.assign({},a.token),s.token),components:dt,cssVar:ft})},[s,a],(tt,ot)=>tt.some((dt,ht)=>{const ft=ot[ht];return!isEqual(dt,ft,!0)}))}var _excluded$F=["children"],Context=reactExports.createContext({});function MotionProvider(o){var i=o.children,s=_objectWithoutProperties$y(o,_excluded$F);return reactExports.createElement(Context.Provider,{value:s},i)}var DomWrapper=function(o){_inherits$4(s,o);var i=_createSuper$4(s);function s(){return _classCallCheck$5(this,s),i.apply(this,arguments)}return _createClass$5(s,[{key:"render",value:function(){return this.props.children}}]),s}(reactExports.Component),STATUS_NONE="none",STATUS_APPEAR="appear",STATUS_ENTER="enter",STATUS_LEAVE="leave",STEP_NONE="none",STEP_PREPARE="prepare",STEP_START="start",STEP_ACTIVE="active",STEP_ACTIVATED="end",STEP_PREPARED="prepared";function makePrefixMap(o,i){var s={};return s[o.toLowerCase()]=i.toLowerCase(),s["Webkit".concat(o)]="webkit".concat(i),s["Moz".concat(o)]="moz".concat(i),s["ms".concat(o)]="MS".concat(i),s["O".concat(o)]="o".concat(i.toLowerCase()),s}function getVendorPrefixes(o,i){var s={animationend:makePrefixMap("Animation","AnimationEnd"),transitionend:makePrefixMap("Transition","TransitionEnd")};return o&&("AnimationEvent"in i||delete s.animationend.animation,"TransitionEvent"in i||delete s.transitionend.transition),s}var vendorPrefixes=getVendorPrefixes(canUseDom(),typeof window<"u"?window:{}),style={};if(canUseDom()){var _document$createEleme=document.createElement("div");style=_document$createEleme.style}var prefixedEventNames={};function getVendorPrefixedEventName(o){if(prefixedEventNames[o])return prefixedEventNames[o];var i=vendorPrefixes[o];if(i)for(var s=Object.keys(i),a=s.length,et=0;et<a;et+=1){var tt=s[et];if(Object.prototype.hasOwnProperty.call(i,tt)&&tt in style)return prefixedEventNames[o]=i[tt],prefixedEventNames[o]}return""}var internalAnimationEndName=getVendorPrefixedEventName("animationend"),internalTransitionEndName=getVendorPrefixedEventName("transitionend"),supportTransition=!!(internalAnimationEndName&&internalTransitionEndName),animationEndName=internalAnimationEndName||"animationend",transitionEndName=internalTransitionEndName||"transitionend";function getTransitionName$1(o,i){if(!o)return null;if(_typeof$i(o)==="object"){var s=i.replace(/-\w/g,function(a){return a[1].toUpperCase()});return o[s]}return"".concat(o,"-").concat(i)}const useDomMotionEvents=function(o){var i=reactExports.useRef(),s=reactExports.useRef(o);s.current=o;var a=reactExports.useCallback(function(ot){s.current(ot)},[]);function et(ot){ot&&(ot.removeEventListener(transitionEndName,a),ot.removeEventListener(animationEndName,a))}function tt(ot){i.current&&i.current!==ot&&et(i.current),ot&&ot!==i.current&&(ot.addEventListener(transitionEndName,a),ot.addEventListener(animationEndName,a),i.current=ot)}return reactExports.useEffect(function(){return function(){et(i.current)}},[]),[tt,et]};var useIsomorphicLayoutEffect=canUseDom()?reactExports.useLayoutEffect:reactExports.useEffect;const useNextFrame=function(){var o=reactExports.useRef(null);function i(){wrapperRaf.cancel(o.current)}function s(a){var et=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;i();var tt=wrapperRaf(function(){et<=1?a({isCanceled:function(){return tt!==o.current}}):s(a,et-1)});o.current=tt}return reactExports.useEffect(function(){return function(){i()}},[]),[s,i]};var FULL_STEP_QUEUE=[STEP_PREPARE,STEP_START,STEP_ACTIVE,STEP_ACTIVATED],SIMPLE_STEP_QUEUE=[STEP_PREPARE,STEP_PREPARED],SkipStep=!1,DoStep=!0;function isActive(o){return o===STEP_ACTIVE||o===STEP_ACTIVATED}const useStepQueue=function(o,i,s){var a=useSafeState(STEP_NONE),et=_slicedToArray$8(a,2),tt=et[0],ot=et[1],dt=useNextFrame(),ht=_slicedToArray$8(dt,2),ft=ht[0],pt=ht[1];function mt(){ot(STEP_PREPARE,!0)}var gt=i?SIMPLE_STEP_QUEUE:FULL_STEP_QUEUE;return useIsomorphicLayoutEffect(function(){if(tt!==STEP_NONE&&tt!==STEP_ACTIVATED){var _t=gt.indexOf(tt),yt=gt[_t+1],St=s(tt);St===SkipStep?ot(yt,!0):yt&&ft(function(Et){function vt(){Et.isCanceled()||ot(yt,!0)}St===!0?vt():Promise.resolve(St).then(vt)})}},[o,tt]),reactExports.useEffect(function(){return function(){pt()}},[]),[mt,tt]};function useStatus(o,i,s,a){var et=a.motionEnter,tt=et===void 0?!0:et,ot=a.motionAppear,dt=ot===void 0?!0:ot,ht=a.motionLeave,ft=ht===void 0?!0:ht,pt=a.motionDeadline,mt=a.motionLeaveImmediately,gt=a.onAppearPrepare,_t=a.onEnterPrepare,yt=a.onLeavePrepare,St=a.onAppearStart,Et=a.onEnterStart,vt=a.onLeaveStart,bt=a.onAppearActive,Tt=a.onEnterActive,wt=a.onLeaveActive,Pt=a.onAppearEnd,At=a.onEnterEnd,xt=a.onLeaveEnd,Ot=a.onVisibleChanged,Rt=useSafeState(),Dt=_slicedToArray$8(Rt,2),Nt=Dt[0],Kt=Dt[1],qt=useSafeState(STATUS_NONE),jt=_slicedToArray$8(qt,2),Zt=jt[0],Ht=jt[1],Wt=useSafeState(null),Ft=_slicedToArray$8(Wt,2),Gt=Ft[0],Jt=Ft[1],on=reactExports.useRef(!1),bn=reactExports.useRef(null);function Ut(){return s()}var It=reactExports.useRef(!1);function Mt(){Ht(STATUS_NONE,!0),Jt(null,!0)}function $t(Dn){var xn=Ut();if(!(Dn&&!Dn.deadline&&Dn.target!==xn)){var On=It.current,wn;Zt===STATUS_APPEAR&&On?wn=Pt==null?void 0:Pt(xn,Dn):Zt===STATUS_ENTER&&On?wn=At==null?void 0:At(xn,Dn):Zt===STATUS_LEAVE&&On&&(wn=xt==null?void 0:xt(xn,Dn)),Zt!==STATUS_NONE&&On&&wn!==!1&&Mt()}}var Lt=useDomMotionEvents($t),Vt=_slicedToArray$8(Lt,1),zt=Vt[0],Xt=function(xn){var On,wn,fn;switch(xn){case STATUS_APPEAR:return On={},_defineProperty$g(On,STEP_PREPARE,gt),_defineProperty$g(On,STEP_START,St),_defineProperty$g(On,STEP_ACTIVE,bt),On;case STATUS_ENTER:return wn={},_defineProperty$g(wn,STEP_PREPARE,_t),_defineProperty$g(wn,STEP_START,Et),_defineProperty$g(wn,STEP_ACTIVE,Tt),wn;case STATUS_LEAVE:return fn={},_defineProperty$g(fn,STEP_PREPARE,yt),_defineProperty$g(fn,STEP_START,vt),_defineProperty$g(fn,STEP_ACTIVE,wt),fn;default:return{}}},Yt=reactExports.useMemo(function(){return Xt(Zt)},[Zt]),un=useStepQueue(Zt,!o,function(Dn){if(Dn===STEP_PREPARE){var xn=Yt[STEP_PREPARE];return xn?xn(Ut()):SkipStep}if(Tn in Yt){var On;Jt(((On=Yt[Tn])===null||On===void 0?void 0:On.call(Yt,Ut(),null))||null)}return Tn===STEP_ACTIVE&&(zt(Ut()),pt>0&&(clearTimeout(bn.current),bn.current=setTimeout(function(){$t({deadline:!0})},pt))),Tn===STEP_PREPARED&&Mt(),DoStep}),gn=_slicedToArray$8(un,2),yn=gn[0],Tn=gn[1],Rn=isActive(Tn);It.current=Rn,useIsomorphicLayoutEffect(function(){Kt(i);var Dn=on.current;on.current=!0;var xn;!Dn&&i&&dt&&(xn=STATUS_APPEAR),Dn&&i&&tt&&(xn=STATUS_ENTER),(Dn&&!i&&ft||!Dn&&mt&&!i&&ft)&&(xn=STATUS_LEAVE);var On=Xt(xn);xn&&(o||On[STEP_PREPARE])?(Ht(xn),yn()):Ht(STATUS_NONE)},[i]),reactExports.useEffect(function(){(Zt===STATUS_APPEAR&&!dt||Zt===STATUS_ENTER&&!tt||Zt===STATUS_LEAVE&&!ft)&&Ht(STATUS_NONE)},[dt,tt,ft]),reactExports.useEffect(function(){return function(){on.current=!1,clearTimeout(bn.current)}},[]);var Sn=reactExports.useRef(!1);reactExports.useEffect(function(){Nt&&(Sn.current=!0),Nt!==void 0&&Zt===STATUS_NONE&&((Sn.current||Nt)&&(Ot==null||Ot(Nt)),Sn.current=!0)},[Nt,Zt]);var Fn=Gt;return Yt[STEP_PREPARE]&&Tn===STEP_START&&(Fn=_objectSpread2$1({transition:"none"},Fn)),[Zt,Tn,Fn,Nt??i]}function genCSSMotion(o){var i=o;_typeof$i(o)==="object"&&(i=o.transitionSupport);function s(et,tt){return!!(et.motionName&&i&&tt!==!1)}var a=reactExports.forwardRef(function(et,tt){var ot=et.visible,dt=ot===void 0?!0:ot,ht=et.removeOnLeave,ft=ht===void 0?!0:ht,pt=et.forceRender,mt=et.children,gt=et.motionName,_t=et.leavedClassName,yt=et.eventProps,St=reactExports.useContext(Context),Et=St.motion,vt=s(et,Et),bt=reactExports.useRef(),Tt=reactExports.useRef();function wt(){try{return bt.current instanceof HTMLElement?bt.current:findDOMNode(Tt.current)}catch{return null}}var Pt=useStatus(vt,dt,wt,et),At=_slicedToArray$8(Pt,4),xt=At[0],Ot=At[1],Rt=At[2],Dt=At[3],Nt=reactExports.useRef(Dt);Dt&&(Nt.current=!0);var Kt=reactExports.useCallback(function(Jt){bt.current=Jt,fillRef(tt,Jt)},[tt]),qt,jt=_objectSpread2$1(_objectSpread2$1({},yt),{},{visible:dt});if(!mt)qt=null;else if(xt===STATUS_NONE)Dt?qt=mt(_objectSpread2$1({},jt),Kt):!ft&&Nt.current&&_t?qt=mt(_objectSpread2$1(_objectSpread2$1({},jt),{},{className:_t}),Kt):pt||!ft&&!_t?qt=mt(_objectSpread2$1(_objectSpread2$1({},jt),{},{style:{display:"none"}}),Kt):qt=null;else{var Zt,Ht;Ot===STEP_PREPARE?Ht="prepare":isActive(Ot)?Ht="active":Ot===STEP_START&&(Ht="start");var Wt=getTransitionName$1(gt,"".concat(xt,"-").concat(Ht));qt=mt(_objectSpread2$1(_objectSpread2$1({},jt),{},{className:classNames(getTransitionName$1(gt,xt),(Zt={},_defineProperty$g(Zt,Wt,Wt&&Ht),_defineProperty$g(Zt,gt,typeof gt=="string"),Zt)),style:Rt}),Kt)}if(reactExports.isValidElement(qt)&&supportRef(qt)){var Ft=qt,Gt=Ft.ref;Gt||(qt=reactExports.cloneElement(qt,{ref:Kt}))}return reactExports.createElement(DomWrapper,{ref:Tt},qt)});return a.displayName="CSSMotion",a}const CSSMotion=genCSSMotion(supportTransition);var STATUS_ADD="add",STATUS_KEEP="keep",STATUS_REMOVE="remove",STATUS_REMOVED="removed";function wrapKeyToObject(o){var i;return o&&_typeof$i(o)==="object"&&"key"in o?i=o:i={key:o},_objectSpread2$1(_objectSpread2$1({},i),{},{key:String(i.key)})}function parseKeys(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return o.map(wrapKeyToObject)}function diffKeys(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=[],a=0,et=i.length,tt=parseKeys(o),ot=parseKeys(i);tt.forEach(function(ft){for(var pt=!1,mt=a;mt<et;mt+=1){var gt=ot[mt];if(gt.key===ft.key){a<mt&&(s=s.concat(ot.slice(a,mt).map(function(_t){return _objectSpread2$1(_objectSpread2$1({},_t),{},{status:STATUS_ADD})})),a=mt),s.push(_objectSpread2$1(_objectSpread2$1({},gt),{},{status:STATUS_KEEP})),a+=1,pt=!0;break}}pt||s.push(_objectSpread2$1(_objectSpread2$1({},ft),{},{status:STATUS_REMOVE}))}),a<et&&(s=s.concat(ot.slice(a).map(function(ft){return _objectSpread2$1(_objectSpread2$1({},ft),{},{status:STATUS_ADD})})));var dt={};s.forEach(function(ft){var pt=ft.key;dt[pt]=(dt[pt]||0)+1});var ht=Object.keys(dt).filter(function(ft){return dt[ft]>1});return ht.forEach(function(ft){s=s.filter(function(pt){var mt=pt.key,gt=pt.status;return mt!==ft||gt!==STATUS_REMOVE}),s.forEach(function(pt){pt.key===ft&&(pt.status=STATUS_KEEP)})}),s}var _excluded$E=["component","children","onVisibleChanged","onAllRemoved"],_excluded2$1=["status"],MOTION_PROP_NAMES=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function genCSSMotionList(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:CSSMotion,s=function(a){_inherits$4(tt,a);var et=_createSuper$4(tt);function tt(){var ot;_classCallCheck$5(this,tt);for(var dt=arguments.length,ht=new Array(dt),ft=0;ft<dt;ft++)ht[ft]=arguments[ft];return ot=et.call.apply(et,[this].concat(ht)),_defineProperty$g(_assertThisInitialized$4(ot),"state",{keyEntities:[]}),_defineProperty$g(_assertThisInitialized$4(ot),"removeKey",function(pt){var mt=ot.state.keyEntities,gt=mt.map(function(_t){return _t.key!==pt?_t:_objectSpread2$1(_objectSpread2$1({},_t),{},{status:STATUS_REMOVED})});return ot.setState({keyEntities:gt}),gt.filter(function(_t){var yt=_t.status;return yt!==STATUS_REMOVED}).length}),ot}return _createClass$5(tt,[{key:"render",value:function(){var dt=this,ht=this.state.keyEntities,ft=this.props,pt=ft.component,mt=ft.children,gt=ft.onVisibleChanged,_t=ft.onAllRemoved,yt=_objectWithoutProperties$y(ft,_excluded$E),St=pt||reactExports.Fragment,Et={};return MOTION_PROP_NAMES.forEach(function(vt){Et[vt]=yt[vt],delete yt[vt]}),delete yt.keys,reactExports.createElement(St,yt,ht.map(function(vt,bt){var Tt=vt.status,wt=_objectWithoutProperties$y(vt,_excluded2$1),Pt=Tt===STATUS_ADD||Tt===STATUS_KEEP;return reactExports.createElement(i,_extends$x({},Et,{key:wt.key,visible:Pt,eventProps:wt,onVisibleChanged:function(xt){if(gt==null||gt(xt,{key:wt.key}),!xt){var Ot=dt.removeKey(wt.key);Ot===0&&_t&&_t()}}}),function(At,xt){return mt(_objectSpread2$1(_objectSpread2$1({},At),{},{index:bt}),xt)})}))}}],[{key:"getDerivedStateFromProps",value:function(dt,ht){var ft=dt.keys,pt=ht.keyEntities,mt=parseKeys(ft),gt=diffKeys(pt,mt);return{keyEntities:gt.filter(function(_t){var yt=pt.find(function(St){var Et=St.key;return _t.key===Et});return!(yt&&yt.status===STATUS_REMOVED&&_t.status===STATUS_REMOVE)})}}}]),tt}(reactExports.Component);return _defineProperty$g(s,"defaultProps",{component:"div"}),s}const CSSMotionList=genCSSMotionList(supportTransition);function MotionWrapper(o){const{children:i}=o,[,s]=useToken(),{motion:a}=s,et=reactExports.useRef(!1);return et.current=et.current||a===!1,et.current?reactExports.createElement(MotionProvider,{motion:a},i):i}const PropWarning=()=>null;var __rest$a=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const PASSED_PROPS=["getTargetContainer","getPopupContainer","renderEmpty","pageHeader","input","pagination","form","select","button"],defaultPrefixCls="ant";let globalPrefixCls,globalIconPrefixCls,globalTheme;function getGlobalPrefixCls(){return globalPrefixCls||defaultPrefixCls}function getGlobalIconPrefixCls(){return globalIconPrefixCls||defaultIconPrefixCls}function isLegacyTheme(o){return Object.keys(o).some(i=>i.endsWith("Color"))}const setGlobalConfig=o=>{let{prefixCls:i,iconPrefixCls:s,theme:a}=o;i!==void 0&&(globalPrefixCls=i),s!==void 0&&(globalIconPrefixCls=s),a&&(isLegacyTheme(a)?registerTheme(getGlobalPrefixCls(),a):globalTheme=a)},globalConfig=()=>({getPrefixCls:(o,i)=>i||(o?`${getGlobalPrefixCls()}-${o}`:getGlobalPrefixCls()),getIconPrefixCls:getGlobalIconPrefixCls,getRootPrefixCls:()=>globalPrefixCls||getGlobalPrefixCls(),getTheme:()=>globalTheme}),ProviderChildren=o=>{const{children:i,csp:s,autoInsertSpaceInButton:a,alert:et,anchor:tt,form:ot,locale:dt,componentSize:ht,direction:ft,space:pt,virtual:mt,dropdownMatchSelectWidth:gt,popupMatchSelectWidth:_t,popupOverflow:yt,legacyLocale:St,parentContext:Et,iconPrefixCls:vt,theme:bt,componentDisabled:Tt,segmented:wt,statistic:Pt,spin:At,calendar:xt,carousel:Ot,cascader:Rt,collapse:Dt,typography:Nt,checkbox:Kt,descriptions:qt,divider:jt,drawer:Zt,skeleton:Ht,steps:Wt,image:Ft,layout:Gt,list:Jt,mentions:on,modal:bn,progress:Ut,result:It,slider:Mt,breadcrumb:$t,menu:Lt,pagination:Vt,input:zt,empty:Xt,badge:Yt,radio:un,rate:gn,switch:yn,transfer:Tn,avatar:Rn,message:Sn,tag:Fn,table:Dn,card:xn,tabs:On,timeline:wn,timePicker:fn,upload:_n,notification:Cn,tree:Ln,colorPicker:Vn,datePicker:Jn,rangePicker:Xn,flex:Yn,wave:Qn,dropdown:jn,warning:zn}=o,qn=reactExports.useCallback((rn,An)=>{const{prefixCls:In}=o;if(An)return An;const Hn=In||Et.getPrefixCls("");return rn?`${Hn}-${rn}`:Hn},[Et.getPrefixCls,o.prefixCls]),vn=vt||Et.iconPrefixCls||defaultIconPrefixCls,cn=s||Et.csp;useStyle$6(vn,cn);const ln=useTheme(bt,Et.theme),Mn={csp:cn,autoInsertSpaceInButton:a,alert:et,anchor:tt,locale:dt||St,direction:ft,space:pt,virtual:mt,popupMatchSelectWidth:_t??gt,popupOverflow:yt,getPrefixCls:qn,iconPrefixCls:vn,theme:ln,segmented:wt,statistic:Pt,spin:At,calendar:xt,carousel:Ot,cascader:Rt,collapse:Dt,typography:Nt,checkbox:Kt,descriptions:qt,divider:jt,drawer:Zt,skeleton:Ht,steps:Wt,image:Ft,input:zt,layout:Gt,list:Jt,mentions:on,modal:bn,progress:Ut,result:It,slider:Mt,breadcrumb:$t,menu:Lt,pagination:Vt,empty:Xt,badge:Yt,radio:un,rate:gn,switch:yn,transfer:Tn,avatar:Rn,message:Sn,tag:Fn,table:Dn,card:xn,tabs:On,timeline:wn,timePicker:fn,upload:_n,notification:Cn,tree:Ln,colorPicker:Vn,datePicker:Jn,rangePicker:Xn,flex:Yn,wave:Qn,dropdown:jn,warning:zn},$n=Object.assign({},Et);Object.keys(Mn).forEach(rn=>{Mn[rn]!==void 0&&($n[rn]=Mn[rn])}),PASSED_PROPS.forEach(rn=>{const An=o[rn];An&&($n[rn]=An)});const rr=useMemo(()=>$n,$n,(rn,An)=>{const In=Object.keys(rn),Hn=Object.keys(An);return In.length!==Hn.length||In.some(Pn=>rn[Pn]!==An[Pn])}),cr=reactExports.useMemo(()=>({prefixCls:vn,csp:cn}),[vn,cn]);let mn=reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(PropWarning,{dropdownMatchSelectWidth:gt}),i);const nn=reactExports.useMemo(()=>{var rn,An,In,Hn;return merge$1(((rn=defaultLocale.Form)===null||rn===void 0?void 0:rn.defaultValidateMessages)||{},((In=(An=rr.locale)===null||An===void 0?void 0:An.Form)===null||In===void 0?void 0:In.defaultValidateMessages)||{},((Hn=rr.form)===null||Hn===void 0?void 0:Hn.validateMessages)||{},(ot==null?void 0:ot.validateMessages)||{})},[rr,ot==null?void 0:ot.validateMessages]);Object.keys(nn).length>0&&(mn=reactExports.createElement(ValidateMessagesContext.Provider,{value:nn},mn)),dt&&(mn=reactExports.createElement(LocaleProvider$1,{locale:dt,_ANT_MARK__:ANT_MARK},mn)),(vn||cn)&&(mn=reactExports.createElement(IconContext$1.Provider,{value:cr},mn)),ht&&(mn=reactExports.createElement(SizeContextProvider,{size:ht},mn)),mn=reactExports.createElement(MotionWrapper,null,mn);const an=reactExports.useMemo(()=>{const rn=ln||{},{algorithm:An,token:In,components:Hn,cssVar:Pn}=rn,Wn=__rest$a(rn,["algorithm","token","components","cssVar"]),kn=An&&(!Array.isArray(An)||An.length>0)?createTheme(An):defaultTheme,Qt={};Object.entries(Hn||{}).forEach(Bt=>{let[en,sn]=Bt;const hn=Object.assign({},sn);"algorithm"in hn&&(hn.algorithm===!0?hn.theme=kn:(Array.isArray(hn.algorithm)||typeof hn.algorithm=="function")&&(hn.theme=createTheme(hn.algorithm)),delete hn.algorithm),Qt[en]=hn});const kt=Object.assign(Object.assign({},seedToken$1),In);return Object.assign(Object.assign({},Wn),{theme:kn,token:kt,components:Qt,override:Object.assign({override:kt},Qt),cssVar:Pn})},[ln]);return bt&&(mn=reactExports.createElement(DesignTokenContext.Provider,{value:an},mn)),rr.warning&&(mn=reactExports.createElement(WarningContext.Provider,{value:rr.warning},mn)),Tt!==void 0&&(mn=reactExports.createElement(DisabledContextProvider,{disabled:Tt},mn)),reactExports.createElement(ConfigContext.Provider,{value:rr},mn)},ConfigProvider=o=>{const i=reactExports.useContext(ConfigContext),s=reactExports.useContext(LocaleContext$1);return reactExports.createElement(ProviderChildren,Object.assign({parentContext:i,legacyLocale:s},o))};ConfigProvider.ConfigContext=ConfigContext;ConfigProvider.SizeContext=SizeContext$1;ConfigProvider.config=setGlobalConfig;ConfigProvider.useConfig=useConfig;Object.defineProperty(ConfigProvider,"SizeContext",{get:()=>SizeContext$1});var attributes=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,eventsName=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,propList="".concat(attributes," ").concat(eventsName).split(/[\s\n]+/),ariaPrefix="aria-",dataPrefix="data-";function match(o,i){return o.indexOf(i)===0}function pickAttrs(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,s;i===!1?s={aria:!0,data:!0,attr:!0}:i===!0?s={aria:!0}:s=_objectSpread2$1({},i);var a={};return Object.keys(o).forEach(function(et){(s.aria&&(et==="role"||match(et,ariaPrefix))||s.data&&match(et,dataPrefix)||s.attr&&propList.includes(et))&&(a[et]=o[et])}),a}const{isValidElement}=React$1;function isFragment(o){return o&&isValidElement(o)&&o.type===reactExports.Fragment}function replaceElement(o,i,s){return isValidElement(o)?reactExports.cloneElement(o,typeof s=="function"?s(o.props||{}):s):i}function cloneElement(o,i){return replaceElement(o,o,i)}const useCSSVarCls=o=>{const[,,,,i]=useToken();return i?`${o}-css-var`:""},useCSSVarCls$1=useCSSVarCls;var KeyCode={MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,QUESTION_MARK:63,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,WIN_IME:229,isTextModifyingKeyEvent:function(i){var s=i.keyCode;if(i.altKey&&!i.ctrlKey||i.metaKey||s>=KeyCode.F1&&s<=KeyCode.F12)return!1;switch(s){case KeyCode.ALT:case KeyCode.CAPS_LOCK:case KeyCode.CONTEXT_MENU:case KeyCode.CTRL:case KeyCode.DOWN:case KeyCode.END:case KeyCode.ESC:case KeyCode.HOME:case KeyCode.INSERT:case KeyCode.LEFT:case KeyCode.MAC_FF_META:case KeyCode.META:case KeyCode.NUMLOCK:case KeyCode.NUM_CENTER:case KeyCode.PAGE_DOWN:case KeyCode.PAGE_UP:case KeyCode.PAUSE:case KeyCode.PRINT_SCREEN:case KeyCode.RIGHT:case KeyCode.SHIFT:case KeyCode.UP:case KeyCode.WIN_KEY:case KeyCode.WIN_KEY_RIGHT:return!1;default:return!0}},isCharacterKey:function(i){if(i>=KeyCode.ZERO&&i<=KeyCode.NINE||i>=KeyCode.NUM_ZERO&&i<=KeyCode.NUM_MULTIPLY||i>=KeyCode.A&&i<=KeyCode.Z||window.navigator.userAgent.indexOf("WebKit")!==-1&&i===0)return!0;switch(i){case KeyCode.SPACE:case KeyCode.QUESTION_MARK:case KeyCode.NUM_PLUS:case KeyCode.NUM_MINUS:case KeyCode.NUM_PERIOD:case KeyCode.NUM_DIVISION:case KeyCode.SEMICOLON:case KeyCode.DASH:case KeyCode.EQUALS:case KeyCode.COMMA:case KeyCode.PERIOD:case KeyCode.SLASH:case KeyCode.APOSTROPHE:case KeyCode.SINGLE_QUOTE:case KeyCode.OPEN_SQUARE_BRACKET:case KeyCode.BACKSLASH:case KeyCode.CLOSE_SQUARE_BRACKET:return!0;default:return!1}}},Notify=reactExports.forwardRef(function(o,i){var s=o.prefixCls,a=o.style,et=o.className,tt=o.duration,ot=tt===void 0?4.5:tt,dt=o.eventKey,ht=o.content,ft=o.closable,pt=o.closeIcon,mt=pt===void 0?"x":pt,gt=o.props,_t=o.onClick,yt=o.onNoticeClose,St=o.times,Et=o.hovering,vt=reactExports.useState(!1),bt=_slicedToArray$8(vt,2),Tt=bt[0],wt=bt[1],Pt=Et||Tt,At=function(){yt(dt)},xt=function(Dt){(Dt.key==="Enter"||Dt.code==="Enter"||Dt.keyCode===KeyCode.ENTER)&&At()};reactExports.useEffect(function(){if(!Pt&&ot>0){var Rt=setTimeout(function(){At()},ot*1e3);return function(){clearTimeout(Rt)}}},[ot,Pt,St]);var Ot="".concat(s,"-notice");return reactExports.createElement("div",_extends$x({},gt,{ref:i,className:classNames(Ot,et,_defineProperty$g({},"".concat(Ot,"-closable"),ft)),style:a,onMouseEnter:function(Dt){var Nt;wt(!0),gt==null||(Nt=gt.onMouseEnter)===null||Nt===void 0||Nt.call(gt,Dt)},onMouseLeave:function(Dt){var Nt;wt(!1),gt==null||(Nt=gt.onMouseLeave)===null||Nt===void 0||Nt.call(gt,Dt)},onClick:_t}),reactExports.createElement("div",{className:"".concat(Ot,"-content")},ht),ft&&reactExports.createElement("a",{tabIndex:0,className:"".concat(Ot,"-close"),onKeyDown:xt,onClick:function(Dt){Dt.preventDefault(),Dt.stopPropagation(),At()}},mt))}),NotificationContext=React.createContext({}),NotificationProvider=function(i){var s=i.children,a=i.classNames;return React.createElement(NotificationContext.Provider,{value:{classNames:a}},s)},DEFAULT_OFFSET$1=8,DEFAULT_THRESHOLD=3,DEFAULT_GAP=16,useStack=function(i){var s={offset:DEFAULT_OFFSET$1,threshold:DEFAULT_THRESHOLD,gap:DEFAULT_GAP};if(i&&_typeof$i(i)==="object"){var a,et,tt;s.offset=(a=i.offset)!==null&&a!==void 0?a:DEFAULT_OFFSET$1,s.threshold=(et=i.threshold)!==null&&et!==void 0?et:DEFAULT_THRESHOLD,s.gap=(tt=i.gap)!==null&&tt!==void 0?tt:DEFAULT_GAP}return[!!i,s]},_excluded$D=["className","style","classNames","styles"],NoticeList=function(i){var s,a=i.configList,et=i.placement,tt=i.prefixCls,ot=i.className,dt=i.style,ht=i.motion,ft=i.onAllNoticeRemoved,pt=i.onNoticeClose,mt=i.stack,gt=reactExports.useContext(NotificationContext),_t=gt.classNames,yt=reactExports.useRef({}),St=reactExports.useState(null),Et=_slicedToArray$8(St,2),vt=Et[0],bt=Et[1],Tt=reactExports.useState([]),wt=_slicedToArray$8(Tt,2),Pt=wt[0],At=wt[1],xt=a.map(function(Wt){return{config:Wt,key:String(Wt.key)}}),Ot=useStack(mt),Rt=_slicedToArray$8(Ot,2),Dt=Rt[0],Nt=Rt[1],Kt=Nt.offset,qt=Nt.threshold,jt=Nt.gap,Zt=Dt&&(Pt.length>0||xt.length<=qt),Ht=typeof ht=="function"?ht(et):ht;return reactExports.useEffect(function(){Dt&&Pt.length>1&&At(function(Wt){return Wt.filter(function(Ft){return xt.some(function(Gt){var Jt=Gt.key;return Ft===Jt})})})},[Pt,xt,Dt]),reactExports.useEffect(function(){var Wt;if(Dt&&yt.current[(Wt=xt[xt.length-1])===null||Wt===void 0?void 0:Wt.key]){var Ft;bt(yt.current[(Ft=xt[xt.length-1])===null||Ft===void 0?void 0:Ft.key])}},[xt,Dt]),React.createElement(CSSMotionList,_extends$x({key:et,className:classNames(tt,"".concat(tt,"-").concat(et),_t==null?void 0:_t.list,ot,(s={},_defineProperty$g(s,"".concat(tt,"-stack"),!!Dt),_defineProperty$g(s,"".concat(tt,"-stack-expanded"),Zt),s)),style:dt,keys:xt,motionAppear:!0},Ht,{onAllRemoved:function(){ft(et)}}),function(Wt,Ft){var Gt=Wt.config,Jt=Wt.className,on=Wt.style,bn=Wt.index,Ut=Gt,It=Ut.key,Mt=Ut.times,$t=String(It),Lt=Gt,Vt=Lt.className,zt=Lt.style,Xt=Lt.classNames,Yt=Lt.styles,un=_objectWithoutProperties$y(Lt,_excluded$D),gn=xt.findIndex(function(Cn){return Cn.key===$t}),yn={};if(Dt){var Tn=xt.length-1-(gn>-1?gn:bn-1),Rn=et==="top"||et==="bottom"?"-50%":"0";if(Tn>0){var Sn,Fn,Dn;yn.height=Zt?(Sn=yt.current[$t])===null||Sn===void 0?void 0:Sn.offsetHeight:vt==null?void 0:vt.offsetHeight;for(var xn=0,On=0;On<Tn;On++){var wn;xn+=((wn=yt.current[xt[xt.length-1-On].key])===null||wn===void 0?void 0:wn.offsetHeight)+jt}var fn=(Zt?xn:Tn*Kt)*(et.startsWith("top")?1:-1),_n=!Zt&&vt!==null&&vt!==void 0&&vt.offsetWidth&&(Fn=yt.current[$t])!==null&&Fn!==void 0&&Fn.offsetWidth?((vt==null?void 0:vt.offsetWidth)-Kt*2*(Tn<3?Tn:3))/((Dn=yt.current[$t])===null||Dn===void 0?void 0:Dn.offsetWidth):1;yn.transform="translate3d(".concat(Rn,", ").concat(fn,"px, 0) scaleX(").concat(_n,")")}else yn.transform="translate3d(".concat(Rn,", 0, 0)")}return React.createElement("div",{ref:Ft,className:classNames("".concat(tt,"-notice-wrapper"),Jt,Xt==null?void 0:Xt.wrapper),style:_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({},on),yn),Yt==null?void 0:Yt.wrapper),onMouseEnter:function(){return At(function(Ln){return Ln.includes($t)?Ln:[].concat(_toConsumableArray$1(Ln),[$t])})},onMouseLeave:function(){return At(function(Ln){return Ln.filter(function(Vn){return Vn!==$t})})}},React.createElement(Notify,_extends$x({},un,{ref:function(Ln){gn>-1?yt.current[$t]=Ln:delete yt.current[$t]},prefixCls:tt,classNames:Xt,styles:Yt,className:classNames(Vt,_t==null?void 0:_t.notice),style:zt,times:Mt,key:It,eventKey:It,onNoticeClose:pt,hovering:Dt&&Pt.length>0})))})},Notifications=reactExports.forwardRef(function(o,i){var s=o.prefixCls,a=s===void 0?"rc-notification":s,et=o.container,tt=o.motion,ot=o.maxCount,dt=o.className,ht=o.style,ft=o.onAllRemoved,pt=o.stack,mt=o.renderNotifications,gt=reactExports.useState([]),_t=_slicedToArray$8(gt,2),yt=_t[0],St=_t[1],Et=function(Rt){var Dt,Nt=yt.find(function(Kt){return Kt.key===Rt});Nt==null||(Dt=Nt.onClose)===null||Dt===void 0||Dt.call(Nt),St(function(Kt){return Kt.filter(function(qt){return qt.key!==Rt})})};reactExports.useImperativeHandle(i,function(){return{open:function(Rt){St(function(Dt){var Nt=_toConsumableArray$1(Dt),Kt=Nt.findIndex(function(Zt){return Zt.key===Rt.key}),qt=_objectSpread2$1({},Rt);if(Kt>=0){var jt;qt.times=(((jt=Dt[Kt])===null||jt===void 0?void 0:jt.times)||0)+1,Nt[Kt]=qt}else qt.times=0,Nt.push(qt);return ot>0&&Nt.length>ot&&(Nt=Nt.slice(-ot)),Nt})},close:function(Rt){Et(Rt)},destroy:function(){St([])}}});var vt=reactExports.useState({}),bt=_slicedToArray$8(vt,2),Tt=bt[0],wt=bt[1];reactExports.useEffect(function(){var Ot={};yt.forEach(function(Rt){var Dt=Rt.placement,Nt=Dt===void 0?"topRight":Dt;Nt&&(Ot[Nt]=Ot[Nt]||[],Ot[Nt].push(Rt))}),Object.keys(Tt).forEach(function(Rt){Ot[Rt]=Ot[Rt]||[]}),wt(Ot)},[yt]);var Pt=function(Rt){wt(function(Dt){var Nt=_objectSpread2$1({},Dt),Kt=Nt[Rt]||[];return Kt.length||delete Nt[Rt],Nt})},At=reactExports.useRef(!1);if(reactExports.useEffect(function(){Object.keys(Tt).length>0?At.current=!0:At.current&&(ft==null||ft(),At.current=!1)},[Tt]),!et)return null;var xt=Object.keys(Tt);return reactDomExports.createPortal(reactExports.createElement(reactExports.Fragment,null,xt.map(function(Ot){var Rt=Tt[Ot],Dt=reactExports.createElement(NoticeList,{key:Ot,configList:Rt,placement:Ot,prefixCls:a,className:dt==null?void 0:dt(Ot),style:ht==null?void 0:ht(Ot),motion:tt,onNoticeClose:Et,onAllNoticeRemoved:Pt,stack:pt});return mt?mt(Dt,{prefixCls:a,key:Ot}):Dt})),et)}),_excluded$C=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],defaultGetContainer=function(){return document.body},uniqueKey=0;function mergeConfig(){for(var o={},i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return s.forEach(function(et){et&&Object.keys(et).forEach(function(tt){var ot=et[tt];ot!==void 0&&(o[tt]=ot)})}),o}function useNotification(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=o.getContainer,s=i===void 0?defaultGetContainer:i,a=o.motion,et=o.prefixCls,tt=o.maxCount,ot=o.className,dt=o.style,ht=o.onAllRemoved,ft=o.stack,pt=o.renderNotifications,mt=_objectWithoutProperties$y(o,_excluded$C),gt=reactExports.useState(),_t=_slicedToArray$8(gt,2),yt=_t[0],St=_t[1],Et=reactExports.useRef(),vt=reactExports.createElement(Notifications,{container:yt,ref:Et,prefixCls:et,motion:a,maxCount:tt,className:ot,style:dt,onAllRemoved:ht,stack:ft,renderNotifications:pt}),bt=reactExports.useState([]),Tt=_slicedToArray$8(bt,2),wt=Tt[0],Pt=Tt[1],At=reactExports.useMemo(function(){return{open:function(Ot){var Rt=mergeConfig(mt,Ot);(Rt.key===null||Rt.key===void 0)&&(Rt.key="rc-notification-".concat(uniqueKey),uniqueKey+=1),Pt(function(Dt){return[].concat(_toConsumableArray$1(Dt),[{type:"open",config:Rt}])})},close:function(Ot){Pt(function(Rt){return[].concat(_toConsumableArray$1(Rt),[{type:"close",key:Ot}])})},destroy:function(){Pt(function(Ot){return[].concat(_toConsumableArray$1(Ot),[{type:"destroy"}])})}}},[]);return reactExports.useEffect(function(){St(s())}),reactExports.useEffect(function(){Et.current&&wt.length&&(wt.forEach(function(xt){switch(xt.type){case"open":Et.current.open(xt.config);break;case"close":Et.current.close(xt.key);break;case"destroy":Et.current.destroy();break}}),Pt(function(xt){return xt.filter(function(Ot){return!wt.includes(Ot)})}))},[wt]),[At,vt]}const zIndexContext=React.createContext(void 0),zIndexContext$1=zIndexContext,CONTAINER_OFFSET=100,CONTAINER_OFFSET_MAX_COUNT=10,CONTAINER_MAX_OFFSET=CONTAINER_OFFSET*CONTAINER_OFFSET_MAX_COUNT,containerBaseZIndexOffset={Modal:CONTAINER_OFFSET,Drawer:CONTAINER_OFFSET,Popover:CONTAINER_OFFSET,Popconfirm:CONTAINER_OFFSET,Tooltip:CONTAINER_OFFSET,Tour:CONTAINER_OFFSET},consumerBaseZIndexOffset={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function isContainerType(o){return o in containerBaseZIndexOffset}function useZIndex(o,i){const[,s]=useToken(),a=React.useContext(zIndexContext$1),et=isContainerType(o);if(i!==void 0)return[i,i];let tt=a??0;return et?(tt+=(a?0:s.zIndexPopupBase)+containerBaseZIndexOffset[o],tt=Math.min(tt,s.zIndexPopupBase+CONTAINER_MAX_OFFSET)):tt+=consumerBaseZIndexOffset[o],[a===void 0?i:tt,tt]}const genMessageStyle=o=>{const{componentCls:i,iconCls:s,boxShadow:a,colorText:et,colorSuccess:tt,colorError:ot,colorWarning:dt,colorInfo:ht,fontSizeLG:ft,motionEaseInOutCirc:pt,motionDurationSlow:mt,marginXS:gt,paddingXS:_t,borderRadiusLG:yt,zIndexPopup:St,contentPadding:Et,contentBg:vt}=o,bt=`${i}-notice`,Tt=new Keyframe("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:_t,transform:"translateY(0)",opacity:1}}),wt=new Keyframe("MessageMoveOut",{"0%":{maxHeight:o.height,padding:_t,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),Pt={padding:_t,textAlign:"center",[`${i}-custom-content > ${s}`]:{verticalAlign:"text-bottom",marginInlineEnd:gt,fontSize:ft},[`${bt}-content`]:{display:"inline-block",padding:Et,background:vt,borderRadius:yt,boxShadow:a,pointerEvents:"all"},[`${i}-success > ${s}`]:{color:tt},[`${i}-error > ${s}`]:{color:ot},[`${i}-warning > ${s}`]:{color:dt},[`${i}-info > ${s},
      ${i}-loading > ${s}`]:{color:ht}};return[{[i]:Object.assign(Object.assign({},resetComponent(o)),{color:et,position:"fixed",top:gt,width:"100%",pointerEvents:"none",zIndex:St,[`${i}-move-up`]:{animationFillMode:"forwards"},[`
        ${i}-move-up-appear,
        ${i}-move-up-enter
      `]:{animationName:Tt,animationDuration:mt,animationPlayState:"paused",animationTimingFunction:pt},[`
        ${i}-move-up-appear${i}-move-up-appear-active,
        ${i}-move-up-enter${i}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${i}-move-up-leave`]:{animationName:wt,animationDuration:mt,animationPlayState:"paused",animationTimingFunction:pt},[`${i}-move-up-leave${i}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[i]:{[`${bt}-wrapper`]:Object.assign({},Pt)}},{[`${i}-notice-pure-panel`]:Object.assign(Object.assign({},Pt),{padding:0,textAlign:"start"})}]},prepareComponentToken$4=o=>({zIndexPopup:o.zIndexPopupBase+CONTAINER_MAX_OFFSET+10,contentBg:o.colorBgElevated,contentPadding:`${(o.controlHeightLG-o.fontSize*o.lineHeight)/2}px ${o.paddingSM}px`}),useStyle$5=genStyleHooks("Message",o=>{const i=merge(o,{height:150});return[genMessageStyle(i)]},prepareComponentToken$4);var __rest$9=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const TypeIcon={info:reactExports.createElement(InfoCircleFilled$1,null),success:reactExports.createElement(CheckCircleFilled$1,null),error:reactExports.createElement(CloseCircleFilled$1,null),warning:reactExports.createElement(ExclamationCircleFilled$1,null),loading:reactExports.createElement(LoadingOutlined$1,null)},PureContent=o=>{let{prefixCls:i,type:s,icon:a,children:et}=o;return reactExports.createElement("div",{className:classNames(`${i}-custom-content`,`${i}-${s}`)},a||TypeIcon[s],reactExports.createElement("span",null,et))},PurePanel$2=o=>{const{prefixCls:i,className:s,type:a,icon:et,content:tt}=o,ot=__rest$9(o,["prefixCls","className","type","icon","content"]),{getPrefixCls:dt}=reactExports.useContext(ConfigContext),ht=i||dt("message"),ft=useCSSVarCls$1(ht),[pt,mt,gt]=useStyle$5(ht,ft);return pt(reactExports.createElement(Notify,Object.assign({},ot,{prefixCls:ht,className:classNames(s,mt,`${ht}-notice-pure-panel`,gt,ft),eventKey:"pure",duration:null,content:reactExports.createElement(PureContent,{prefixCls:ht,type:a,icon:et},tt)})))},PurePanel$3=PurePanel$2;function getMotion$1(o,i){return{motionName:i??`${o}-move-up`}}function wrapPromiseFn(o){let i;const s=new Promise(et=>{i=o(()=>{et(!0)})}),a=()=>{i==null||i()};return a.then=(et,tt)=>s.then(et,tt),a.promise=s,a}var __rest$8=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const DEFAULT_OFFSET=8,DEFAULT_DURATION=3,Wrapper$4=o=>{let{children:i,prefixCls:s}=o;const a=useCSSVarCls$1(s),[et,tt,ot]=useStyle$5(s,a);return et(reactExports.createElement(NotificationProvider,{classNames:{list:classNames(tt,ot,a)}},i))},renderNotifications=(o,i)=>{let{prefixCls:s,key:a}=i;return reactExports.createElement(Wrapper$4,{prefixCls:s,key:a},o)},Holder=reactExports.forwardRef((o,i)=>{const{top:s,prefixCls:a,getContainer:et,maxCount:tt,duration:ot=DEFAULT_DURATION,rtl:dt,transitionName:ht,onAllRemoved:ft}=o,{getPrefixCls:pt,getPopupContainer:mt,message:gt}=reactExports.useContext(ConfigContext),_t=a||pt("message"),yt=()=>({left:"50%",transform:"translateX(-50%)",top:s??DEFAULT_OFFSET}),St=()=>classNames({[`${_t}-rtl`]:dt}),Et=()=>getMotion$1(_t,ht),vt=reactExports.createElement("span",{className:`${_t}-close-x`},reactExports.createElement(CloseOutlined$1,{className:`${_t}-close-icon`})),[bt,Tt]=useNotification({prefixCls:_t,style:yt,className:St,motion:Et,closable:!1,closeIcon:vt,duration:ot,getContainer:()=>(et==null?void 0:et())||(mt==null?void 0:mt())||document.body,maxCount:tt,onAllRemoved:ft,renderNotifications});return reactExports.useImperativeHandle(i,()=>Object.assign(Object.assign({},bt),{prefixCls:_t,message:gt})),Tt});let keyIndex=0;function useInternalMessage(o){const i=reactExports.useRef(null);return devUseWarning(),[reactExports.useMemo(()=>{const a=ht=>{var ft;(ft=i.current)===null||ft===void 0||ft.close(ht)},et=ht=>{if(!i.current){const At=()=>{};return At.then=()=>{},At}const{open:ft,prefixCls:pt,message:mt}=i.current,gt=`${pt}-notice`,{content:_t,icon:yt,type:St,key:Et,className:vt,style:bt,onClose:Tt}=ht,wt=__rest$8(ht,["content","icon","type","key","className","style","onClose"]);let Pt=Et;return Pt==null&&(keyIndex+=1,Pt=`antd-message-${keyIndex}`),wrapPromiseFn(At=>(ft(Object.assign(Object.assign({},wt),{key:Pt,content:reactExports.createElement(PureContent,{prefixCls:pt,type:St,icon:yt},_t),placement:"top",className:classNames(St&&`${gt}-${St}`,vt,mt==null?void 0:mt.className),style:Object.assign(Object.assign({},mt==null?void 0:mt.style),bt),onClose:()=>{Tt==null||Tt(),At()}})),()=>{a(Pt)}))},ot={open:et,destroy:ht=>{var ft;ht!==void 0?a(ht):(ft=i.current)===null||ft===void 0||ft.destroy()}};return["info","success","warning","error","loading"].forEach(ht=>{const ft=(pt,mt,gt)=>{let _t;pt&&typeof pt=="object"&&"content"in pt?_t=pt:_t={content:pt};let yt,St;typeof mt=="function"?St=mt:(yt=mt,St=gt);const Et=Object.assign(Object.assign({onClose:St,duration:yt},_t),{type:ht});return et(Et)};ot[ht]=ft}),ot},[]),reactExports.createElement(Holder,Object.assign({key:"message-holder"},o,{ref:i}))]}function useMessage(o){return useInternalMessage(o)}function _regeneratorRuntime(){_regeneratorRuntime=function(){return i};var o,i={},s=Object.prototype,a=s.hasOwnProperty,et=Object.defineProperty||function(Ht,Wt,Ft){Ht[Wt]=Ft.value},tt=typeof Symbol=="function"?Symbol:{},ot=tt.iterator||"@@iterator",dt=tt.asyncIterator||"@@asyncIterator",ht=tt.toStringTag||"@@toStringTag";function ft(Ht,Wt,Ft){return Object.defineProperty(Ht,Wt,{value:Ft,enumerable:!0,configurable:!0,writable:!0}),Ht[Wt]}try{ft({},"")}catch{ft=function(Ft,Gt,Jt){return Ft[Gt]=Jt}}function pt(Ht,Wt,Ft,Gt){var Jt=Wt&&Wt.prototype instanceof vt?Wt:vt,on=Object.create(Jt.prototype),bn=new jt(Gt||[]);return et(on,"_invoke",{value:Dt(Ht,Ft,bn)}),on}function mt(Ht,Wt,Ft){try{return{type:"normal",arg:Ht.call(Wt,Ft)}}catch(Gt){return{type:"throw",arg:Gt}}}i.wrap=pt;var gt="suspendedStart",_t="suspendedYield",yt="executing",St="completed",Et={};function vt(){}function bt(){}function Tt(){}var wt={};ft(wt,ot,function(){return this});var Pt=Object.getPrototypeOf,At=Pt&&Pt(Pt(Zt([])));At&&At!==s&&a.call(At,ot)&&(wt=At);var xt=Tt.prototype=vt.prototype=Object.create(wt);function Ot(Ht){["next","throw","return"].forEach(function(Wt){ft(Ht,Wt,function(Ft){return this._invoke(Wt,Ft)})})}function Rt(Ht,Wt){function Ft(Jt,on,bn,Ut){var It=mt(Ht[Jt],Ht,on);if(It.type!=="throw"){var Mt=It.arg,$t=Mt.value;return $t&&_typeof$i($t)=="object"&&a.call($t,"__await")?Wt.resolve($t.__await).then(function(Lt){Ft("next",Lt,bn,Ut)},function(Lt){Ft("throw",Lt,bn,Ut)}):Wt.resolve($t).then(function(Lt){Mt.value=Lt,bn(Mt)},function(Lt){return Ft("throw",Lt,bn,Ut)})}Ut(It.arg)}var Gt;et(this,"_invoke",{value:function(on,bn){function Ut(){return new Wt(function(It,Mt){Ft(on,bn,It,Mt)})}return Gt=Gt?Gt.then(Ut,Ut):Ut()}})}function Dt(Ht,Wt,Ft){var Gt=gt;return function(Jt,on){if(Gt===yt)throw new Error("Generator is already running");if(Gt===St){if(Jt==="throw")throw on;return{value:o,done:!0}}for(Ft.method=Jt,Ft.arg=on;;){var bn=Ft.delegate;if(bn){var Ut=Nt(bn,Ft);if(Ut){if(Ut===Et)continue;return Ut}}if(Ft.method==="next")Ft.sent=Ft._sent=Ft.arg;else if(Ft.method==="throw"){if(Gt===gt)throw Gt=St,Ft.arg;Ft.dispatchException(Ft.arg)}else Ft.method==="return"&&Ft.abrupt("return",Ft.arg);Gt=yt;var It=mt(Ht,Wt,Ft);if(It.type==="normal"){if(Gt=Ft.done?St:_t,It.arg===Et)continue;return{value:It.arg,done:Ft.done}}It.type==="throw"&&(Gt=St,Ft.method="throw",Ft.arg=It.arg)}}}function Nt(Ht,Wt){var Ft=Wt.method,Gt=Ht.iterator[Ft];if(Gt===o)return Wt.delegate=null,Ft==="throw"&&Ht.iterator.return&&(Wt.method="return",Wt.arg=o,Nt(Ht,Wt),Wt.method==="throw")||Ft!=="return"&&(Wt.method="throw",Wt.arg=new TypeError("The iterator does not provide a '"+Ft+"' method")),Et;var Jt=mt(Gt,Ht.iterator,Wt.arg);if(Jt.type==="throw")return Wt.method="throw",Wt.arg=Jt.arg,Wt.delegate=null,Et;var on=Jt.arg;return on?on.done?(Wt[Ht.resultName]=on.value,Wt.next=Ht.nextLoc,Wt.method!=="return"&&(Wt.method="next",Wt.arg=o),Wt.delegate=null,Et):on:(Wt.method="throw",Wt.arg=new TypeError("iterator result is not an object"),Wt.delegate=null,Et)}function Kt(Ht){var Wt={tryLoc:Ht[0]};1 in Ht&&(Wt.catchLoc=Ht[1]),2 in Ht&&(Wt.finallyLoc=Ht[2],Wt.afterLoc=Ht[3]),this.tryEntries.push(Wt)}function qt(Ht){var Wt=Ht.completion||{};Wt.type="normal",delete Wt.arg,Ht.completion=Wt}function jt(Ht){this.tryEntries=[{tryLoc:"root"}],Ht.forEach(Kt,this),this.reset(!0)}function Zt(Ht){if(Ht||Ht===""){var Wt=Ht[ot];if(Wt)return Wt.call(Ht);if(typeof Ht.next=="function")return Ht;if(!isNaN(Ht.length)){var Ft=-1,Gt=function Jt(){for(;++Ft<Ht.length;)if(a.call(Ht,Ft))return Jt.value=Ht[Ft],Jt.done=!1,Jt;return Jt.value=o,Jt.done=!0,Jt};return Gt.next=Gt}}throw new TypeError(_typeof$i(Ht)+" is not iterable")}return bt.prototype=Tt,et(xt,"constructor",{value:Tt,configurable:!0}),et(Tt,"constructor",{value:bt,configurable:!0}),bt.displayName=ft(Tt,ht,"GeneratorFunction"),i.isGeneratorFunction=function(Ht){var Wt=typeof Ht=="function"&&Ht.constructor;return!!Wt&&(Wt===bt||(Wt.displayName||Wt.name)==="GeneratorFunction")},i.mark=function(Ht){return Object.setPrototypeOf?Object.setPrototypeOf(Ht,Tt):(Ht.__proto__=Tt,ft(Ht,ht,"GeneratorFunction")),Ht.prototype=Object.create(xt),Ht},i.awrap=function(Ht){return{__await:Ht}},Ot(Rt.prototype),ft(Rt.prototype,dt,function(){return this}),i.AsyncIterator=Rt,i.async=function(Ht,Wt,Ft,Gt,Jt){Jt===void 0&&(Jt=Promise);var on=new Rt(pt(Ht,Wt,Ft,Gt),Jt);return i.isGeneratorFunction(Wt)?on:on.next().then(function(bn){return bn.done?bn.value:on.next()})},Ot(xt),ft(xt,ht,"Generator"),ft(xt,ot,function(){return this}),ft(xt,"toString",function(){return"[object Generator]"}),i.keys=function(Ht){var Wt=Object(Ht),Ft=[];for(var Gt in Wt)Ft.push(Gt);return Ft.reverse(),function Jt(){for(;Ft.length;){var on=Ft.pop();if(on in Wt)return Jt.value=on,Jt.done=!1,Jt}return Jt.done=!0,Jt}},i.values=Zt,jt.prototype={constructor:jt,reset:function(Wt){if(this.prev=0,this.next=0,this.sent=this._sent=o,this.done=!1,this.delegate=null,this.method="next",this.arg=o,this.tryEntries.forEach(qt),!Wt)for(var Ft in this)Ft.charAt(0)==="t"&&a.call(this,Ft)&&!isNaN(+Ft.slice(1))&&(this[Ft]=o)},stop:function(){this.done=!0;var Wt=this.tryEntries[0].completion;if(Wt.type==="throw")throw Wt.arg;return this.rval},dispatchException:function(Wt){if(this.done)throw Wt;var Ft=this;function Gt(Mt,$t){return bn.type="throw",bn.arg=Wt,Ft.next=Mt,$t&&(Ft.method="next",Ft.arg=o),!!$t}for(var Jt=this.tryEntries.length-1;Jt>=0;--Jt){var on=this.tryEntries[Jt],bn=on.completion;if(on.tryLoc==="root")return Gt("end");if(on.tryLoc<=this.prev){var Ut=a.call(on,"catchLoc"),It=a.call(on,"finallyLoc");if(Ut&&It){if(this.prev<on.catchLoc)return Gt(on.catchLoc,!0);if(this.prev<on.finallyLoc)return Gt(on.finallyLoc)}else if(Ut){if(this.prev<on.catchLoc)return Gt(on.catchLoc,!0)}else{if(!It)throw new Error("try statement without catch or finally");if(this.prev<on.finallyLoc)return Gt(on.finallyLoc)}}}},abrupt:function(Wt,Ft){for(var Gt=this.tryEntries.length-1;Gt>=0;--Gt){var Jt=this.tryEntries[Gt];if(Jt.tryLoc<=this.prev&&a.call(Jt,"finallyLoc")&&this.prev<Jt.finallyLoc){var on=Jt;break}}on&&(Wt==="break"||Wt==="continue")&&on.tryLoc<=Ft&&Ft<=on.finallyLoc&&(on=null);var bn=on?on.completion:{};return bn.type=Wt,bn.arg=Ft,on?(this.method="next",this.next=on.finallyLoc,Et):this.complete(bn)},complete:function(Wt,Ft){if(Wt.type==="throw")throw Wt.arg;return Wt.type==="break"||Wt.type==="continue"?this.next=Wt.arg:Wt.type==="return"?(this.rval=this.arg=Wt.arg,this.method="return",this.next="end"):Wt.type==="normal"&&Ft&&(this.next=Ft),Et},finish:function(Wt){for(var Ft=this.tryEntries.length-1;Ft>=0;--Ft){var Gt=this.tryEntries[Ft];if(Gt.finallyLoc===Wt)return this.complete(Gt.completion,Gt.afterLoc),qt(Gt),Et}},catch:function(Wt){for(var Ft=this.tryEntries.length-1;Ft>=0;--Ft){var Gt=this.tryEntries[Ft];if(Gt.tryLoc===Wt){var Jt=Gt.completion;if(Jt.type==="throw"){var on=Jt.arg;qt(Gt)}return on}}throw new Error("illegal catch attempt")},delegateYield:function(Wt,Ft,Gt){return this.delegate={iterator:Zt(Wt),resultName:Ft,nextLoc:Gt},this.method==="next"&&(this.arg=o),Et}},i}function asyncGeneratorStep(o,i,s,a,et,tt,ot){try{var dt=o[tt](ot),ht=dt.value}catch(ft){s(ft);return}dt.done?i(ht):Promise.resolve(ht).then(a,et)}function _asyncToGenerator(o){return function(){var i=this,s=arguments;return new Promise(function(a,et){var tt=o.apply(i,s);function ot(ht){asyncGeneratorStep(tt,a,et,ot,dt,"next",ht)}function dt(ht){asyncGeneratorStep(tt,a,et,ot,dt,"throw",ht)}ot(void 0)})}}var fullClone=_objectSpread2$1({},ReactDOM$1),version=fullClone.version,reactRender=fullClone.render,unmountComponentAtNode=fullClone.unmountComponentAtNode,createRoot;try{var mainVersion=Number((version||"").split(".")[0]);mainVersion>=18&&(createRoot=fullClone.createRoot)}catch{}function toggleWarning(o){var i=fullClone.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;i&&_typeof$i(i)==="object"&&(i.usingClientEntryPoint=o)}var MARK="__rc_react_root__";function modernRender(o,i){toggleWarning(!0);var s=i[MARK]||createRoot(i);toggleWarning(!1),s.render(o),i[MARK]=s}function legacyRender(o,i){reactRender(o,i)}function render(o,i){if(createRoot){modernRender(o,i);return}legacyRender(o,i)}function modernUnmount(o){return _modernUnmount.apply(this,arguments)}function _modernUnmount(){return _modernUnmount=_asyncToGenerator(_regeneratorRuntime().mark(function o(i){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var et;(et=i[MARK])===null||et===void 0||et.unmount(),delete i[MARK]}));case 1:case"end":return a.stop()}},o)})),_modernUnmount.apply(this,arguments)}function legacyUnmount(o){unmountComponentAtNode(o)}function unmount(o){return _unmount.apply(this,arguments)}function _unmount(){return _unmount=_asyncToGenerator(_regeneratorRuntime().mark(function o(i){return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(createRoot===void 0){a.next=2;break}return a.abrupt("return",modernUnmount(i));case 2:legacyUnmount(i);case 3:case"end":return a.stop()}},o)})),_unmount.apply(this,arguments)}const getCollapsedHeight=()=>({height:0,opacity:0}),getRealHeight=o=>{const{scrollHeight:i}=o;return{height:i,opacity:1}},getCurrentHeight=o=>({height:o?o.offsetHeight:0}),skipOpacityTransition=(o,i)=>(i==null?void 0:i.deadline)===!0||i.propertyName==="height",initCollapseMotion=function(){return{motionName:`${arguments.length>0&&arguments[0]!==void 0?arguments[0]:"ant"}-motion-collapse`,onAppearStart:getCollapsedHeight,onEnterStart:getCollapsedHeight,onAppearActive:getRealHeight,onEnterActive:getRealHeight,onLeaveStart:getCurrentHeight,onLeaveActive:getCollapsedHeight,onAppearEnd:skipOpacityTransition,onEnterEnd:skipOpacityTransition,onLeaveEnd:skipOpacityTransition,motionDeadline:500}},getTransitionName=(o,i,s)=>s!==void 0?s:`${o}-${i}`,initCollapseMotion$1=initCollapseMotion,isVisible=function(o){if(!o)return!1;if(o instanceof Element){if(o.offsetParent)return!0;if(o.getBBox){var i=o.getBBox(),s=i.width,a=i.height;if(s||a)return!0}if(o.getBoundingClientRect){var et=o.getBoundingClientRect(),tt=et.width,ot=et.height;if(tt||ot)return!0}}return!1},genWaveStyle=o=>{const{componentCls:i,colorPrimary:s}=o;return{[i]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${s})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${o.motionEaseOutCirc}`,`opacity 2s ${o.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow 0.3s ${o.motionEaseInOut}`,`opacity 0.35s ${o.motionEaseInOut}`].join(",")}}}}},useStyle$4=genComponentStyleHook("Wave",o=>[genWaveStyle(o)]);function isNotGrey(o){const i=(o||"").match(/rgba?\((\d*), (\d*), (\d*)(, [\d.]*)?\)/);return i&&i[1]&&i[2]&&i[3]?!(i[1]===i[2]&&i[2]===i[3]):!0}function isValidWaveColor(o){return o&&o!=="#fff"&&o!=="#ffffff"&&o!=="rgb(255, 255, 255)"&&o!=="rgba(255, 255, 255, 1)"&&isNotGrey(o)&&!/rgba\((?:\d*, ){3}0\)/.test(o)&&o!=="transparent"}function getTargetWaveColor(o){const{borderTopColor:i,borderColor:s,backgroundColor:a}=getComputedStyle(o);return isValidWaveColor(i)?i:isValidWaveColor(s)?s:isValidWaveColor(a)?a:null}const TARGET_CLS="ant-wave-target";function validateNum(o){return Number.isNaN(o)?0:o}const WaveEffect=o=>{const{className:i,target:s,component:a}=o,et=reactExports.useRef(null),[tt,ot]=reactExports.useState(null),[dt,ht]=reactExports.useState([]),[ft,pt]=reactExports.useState(0),[mt,gt]=reactExports.useState(0),[_t,yt]=reactExports.useState(0),[St,Et]=reactExports.useState(0),[vt,bt]=reactExports.useState(!1),Tt={left:ft,top:mt,width:_t,height:St,borderRadius:dt.map(At=>`${At}px`).join(" ")};tt&&(Tt["--wave-color"]=tt);function wt(){const At=getComputedStyle(s);ot(getTargetWaveColor(s));const xt=At.position==="static",{borderLeftWidth:Ot,borderTopWidth:Rt}=At;pt(xt?s.offsetLeft:validateNum(-parseFloat(Ot))),gt(xt?s.offsetTop:validateNum(-parseFloat(Rt))),yt(s.offsetWidth),Et(s.offsetHeight);const{borderTopLeftRadius:Dt,borderTopRightRadius:Nt,borderBottomLeftRadius:Kt,borderBottomRightRadius:qt}=At;ht([Dt,Nt,qt,Kt].map(jt=>validateNum(parseFloat(jt))))}if(reactExports.useEffect(()=>{if(s){const At=wrapperRaf(()=>{wt(),bt(!0)});let xt;return typeof ResizeObserver<"u"&&(xt=new ResizeObserver(wt),xt.observe(s)),()=>{wrapperRaf.cancel(At),xt==null||xt.disconnect()}}},[]),!vt)return null;const Pt=(a==="Checkbox"||a==="Radio")&&(s==null?void 0:s.classList.contains(TARGET_CLS));return reactExports.createElement(CSSMotion,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(At,xt)=>{var Ot;if(xt.deadline||xt.propertyName==="opacity"){const Rt=(Ot=et.current)===null||Ot===void 0?void 0:Ot.parentElement;unmount(Rt).then(()=>{Rt==null||Rt.remove()})}return!1}},At=>{let{className:xt}=At;return reactExports.createElement("div",{ref:et,className:classNames(i,{"wave-quick":Pt},xt),style:Tt})})},showWaveEffect=(o,i)=>{var s;const{component:a}=i;if(a==="Checkbox"&&!(!((s=o.querySelector("input"))===null||s===void 0)&&s.checked))return;const et=document.createElement("div");et.style.position="absolute",et.style.left="0px",et.style.top="0px",o==null||o.insertBefore(et,o==null?void 0:o.firstChild),render(reactExports.createElement(WaveEffect,Object.assign({},i,{target:o})),et)},showWaveEffect$1=showWaveEffect;function useWave(o,i,s){const{wave:a}=reactExports.useContext(ConfigContext),[,et,tt]=useToken(),ot=useEvent(ft=>{const pt=o.current;if(a!=null&&a.disabled||!pt)return;const mt=pt.querySelector(`.${TARGET_CLS}`)||pt,{showEffect:gt}=a||{};(gt||showWaveEffect$1)(mt,{className:i,token:et,component:s,event:ft,hashId:tt})}),dt=reactExports.useRef();return ft=>{wrapperRaf.cancel(dt.current),dt.current=wrapperRaf(()=>{ot(ft)})}}const Wave=o=>{const{children:i,disabled:s,component:a}=o,{getPrefixCls:et}=reactExports.useContext(ConfigContext),tt=reactExports.useRef(null),ot=et("wave"),[,dt]=useStyle$4(ot),ht=useWave(tt,classNames(ot,dt),a);if(React.useEffect(()=>{const pt=tt.current;if(!pt||pt.nodeType!==1||s)return;const mt=gt=>{!isVisible(gt.target)||!pt.getAttribute||pt.getAttribute("disabled")||pt.disabled||pt.className.includes("disabled")||pt.className.includes("-leave")||ht(gt)};return pt.addEventListener("click",mt,!0),()=>{pt.removeEventListener("click",mt,!0)}},[s]),!React.isValidElement(i))return i??null;const ft=supportRef(i)?composeRef(i.ref,tt):tt;return cloneElement(i,{ref:ft})},Wave$1=Wave,useSize=o=>{const i=React.useContext(SizeContext$1);return React.useMemo(()=>o?typeof o=="string"?o??i:o instanceof Function?o(i):i:i,[o,i])},useSize$1=useSize,SpaceCompactItemContext=reactExports.createContext(null),useCompactItemContext=(o,i)=>{const s=reactExports.useContext(SpaceCompactItemContext),a=reactExports.useMemo(()=>{if(!s)return"";const{compactDirection:et,isFirstItem:tt,isLastItem:ot}=s,dt=et==="vertical"?"-vertical-":"-";return classNames(`${o}-compact${dt}item`,{[`${o}-compact${dt}first-item`]:tt,[`${o}-compact${dt}last-item`]:ot,[`${o}-compact${dt}item-rtl`]:i==="rtl"})},[o,i,s]);return{compactSize:s==null?void 0:s.compactSize,compactDirection:s==null?void 0:s.compactDirection,compactItemClassnames:a}},NoCompactStyle=o=>{let{children:i}=o;return reactExports.createElement(SpaceCompactItemContext.Provider,{value:null},i)};var __rest$7=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const GroupSizeContext=reactExports.createContext(void 0),ButtonGroup=o=>{const{getPrefixCls:i,direction:s}=reactExports.useContext(ConfigContext),{prefixCls:a,size:et,className:tt}=o,ot=__rest$7(o,["prefixCls","size","className"]),dt=i("btn-group",a),[,,ht]=useToken();let ft="";switch(et){case"large":ft="lg";break;case"small":ft="sm";break}const pt=classNames(dt,{[`${dt}-${ft}`]:ft,[`${dt}-rtl`]:s==="rtl"},tt,ht);return reactExports.createElement(GroupSizeContext.Provider,{value:et},reactExports.createElement("div",Object.assign({},ot,{className:pt})))},Group=ButtonGroup,rxTwoCNChar=/^[\u4e00-\u9fa5]{2}$/,isTwoCNChar=rxTwoCNChar.test.bind(rxTwoCNChar);function isString$1(o){return typeof o=="string"}function isUnBorderedButtonType(o){return o==="text"||o==="link"}function splitCNCharsBySpace(o,i){if(o==null)return;const s=i?" ":"";return typeof o!="string"&&typeof o!="number"&&isString$1(o.type)&&isTwoCNChar(o.props.children)?cloneElement(o,{children:o.props.children.split("").join(s)}):isString$1(o)?isTwoCNChar(o)?React.createElement("span",null,o.split("").join(s)):React.createElement("span",null,o):isFragment(o)?React.createElement("span",null,o):o}function spaceChildren(o,i){let s=!1;const a=[];return React.Children.forEach(o,et=>{const tt=typeof et,ot=tt==="string"||tt==="number";if(s&&ot){const dt=a.length-1,ht=a[dt];a[dt]=`${ht}${et}`}else a.push(et);s=ot}),React.Children.map(a,et=>splitCNCharsBySpace(et,i))}const IconWrapper=reactExports.forwardRef((o,i)=>{const{className:s,style:a,children:et,prefixCls:tt}=o,ot=classNames(`${tt}-icon`,s);return React.createElement("span",{ref:i,className:ot,style:a},et)}),IconWrapper$1=IconWrapper,InnerLoadingIcon=reactExports.forwardRef((o,i)=>{let{prefixCls:s,className:a,style:et,iconClassName:tt}=o;const ot=classNames(`${s}-loading-icon`,a);return React.createElement(IconWrapper$1,{prefixCls:s,className:ot,style:et,ref:i},React.createElement(LoadingOutlined$1,{className:tt}))}),getCollapsedWidth=()=>({width:0,opacity:0,transform:"scale(0)"}),getRealWidth=o=>({width:o.scrollWidth,opacity:1,transform:"scale(1)"}),LoadingIcon=o=>{const{prefixCls:i,loading:s,existIcon:a,className:et,style:tt}=o,ot=!!s;return a?React.createElement(InnerLoadingIcon,{prefixCls:i,className:et,style:tt}):React.createElement(CSSMotion,{visible:ot,motionName:`${i}-loading-icon-motion`,motionLeave:ot,removeOnLeave:!0,onAppearStart:getCollapsedWidth,onAppearActive:getRealWidth,onEnterStart:getCollapsedWidth,onEnterActive:getRealWidth,onLeaveStart:getRealWidth,onLeaveActive:getCollapsedWidth},(dt,ht)=>{let{className:ft,style:pt}=dt;return React.createElement(InnerLoadingIcon,{prefixCls:i,className:et,style:Object.assign(Object.assign({},tt),pt),ref:ht,iconClassName:ft})})},LoadingIcon$1=LoadingIcon,genButtonBorderStyle=(o,i)=>({[`> span, > ${o}`]:{"&:not(:last-child)":{[`&, & > ${o}`]:{"&:not(:disabled)":{borderInlineEndColor:i}}},"&:not(:first-child)":{[`&, & > ${o}`]:{"&:not(:disabled)":{borderInlineStartColor:i}}}}}),genGroupStyle=o=>{const{componentCls:i,fontSize:s,lineWidth:a,groupBorderColor:et,colorErrorHover:tt}=o;return{[`${i}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${i}`]:{"&:not(:last-child)":{[`&, & > ${i}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:o.calc(a).mul(-1).equal(),[`&, & > ${i}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[i]:{position:"relative",zIndex:1,"&:hover,\n          &:focus,\n          &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${i}-icon-only`]:{fontSize:s}},genButtonBorderStyle(`${i}-primary`,et),genButtonBorderStyle(`${i}-danger`,tt)]}},genGroupStyle$1=genGroupStyle,genSharedButtonStyle=o=>{const{componentCls:i,iconCls:s,fontWeight:a}=o;return{[i]:{outline:"none",position:"relative",display:"inline-block",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${unit$1(o.lineWidth)} ${o.lineType} transparent`,cursor:"pointer",transition:`all ${o.motionDurationMid} ${o.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",lineHeight:o.lineHeight,color:o.colorText,"&:disabled > *":{pointerEvents:"none"},"> span":{display:"inline-block"},[`${i}-icon`]:{lineHeight:0},[`> ${s} + span, > span + ${s}`]:{marginInlineStart:o.marginXS},[`&:not(${i}-icon-only) > ${i}-icon`]:{[`&${i}-loading-icon, &:not(:last-child)`]:{marginInlineEnd:o.marginXS}},"> a":{color:"currentColor"},"&:not(:disabled)":Object.assign({},genFocusStyle(o)),[`&${i}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${i}-two-chinese-chars > *:not(${s})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&-icon-only${i}-compact-item`]:{flex:"none"}}}},genHoverActiveButtonStyle=(o,i,s)=>({[`&:not(:disabled):not(${o}-disabled)`]:{"&:hover":i,"&:active":s}}),genCircleButtonStyle=o=>({minWidth:o.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),genRoundButtonStyle=o=>({borderRadius:o.controlHeight,paddingInlineStart:o.calc(o.controlHeight).div(2).equal(),paddingInlineEnd:o.calc(o.controlHeight).div(2).equal()}),genDisabledStyle=o=>({cursor:"not-allowed",borderColor:o.borderColorDisabled,color:o.colorTextDisabled,background:o.colorBgContainerDisabled,boxShadow:"none"}),genGhostButtonStyle=(o,i,s,a,et,tt,ot,dt)=>({[`&${o}-background-ghost`]:Object.assign(Object.assign({color:s||void 0,background:i,borderColor:a||void 0,boxShadow:"none"},genHoverActiveButtonStyle(o,Object.assign({background:i},ot),Object.assign({background:i},dt))),{"&:disabled":{cursor:"not-allowed",color:et||void 0,borderColor:tt||void 0}})}),genSolidDisabledButtonStyle=o=>({[`&:disabled, &${o.componentCls}-disabled`]:Object.assign({},genDisabledStyle(o))}),genSolidButtonStyle=o=>Object.assign({},genSolidDisabledButtonStyle(o)),genPureDisabledButtonStyle=o=>({[`&:disabled, &${o.componentCls}-disabled`]:{cursor:"not-allowed",color:o.colorTextDisabled}}),genDefaultButtonStyle=o=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genSolidButtonStyle(o)),{background:o.defaultBg,borderColor:o.defaultBorderColor,color:o.defaultColor,boxShadow:o.defaultShadow}),genHoverActiveButtonStyle(o.componentCls,{color:o.colorPrimaryHover,borderColor:o.colorPrimaryHover},{color:o.colorPrimaryActive,borderColor:o.colorPrimaryActive})),genGhostButtonStyle(o.componentCls,o.ghostBg,o.defaultGhostColor,o.defaultGhostBorderColor,o.colorTextDisabled,o.colorBorder)),{[`&${o.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({color:o.colorError,borderColor:o.colorError},genHoverActiveButtonStyle(o.componentCls,{color:o.colorErrorHover,borderColor:o.colorErrorBorderHover},{color:o.colorErrorActive,borderColor:o.colorErrorActive})),genGhostButtonStyle(o.componentCls,o.ghostBg,o.colorError,o.colorError,o.colorTextDisabled,o.colorBorder)),genSolidDisabledButtonStyle(o))}),genPrimaryButtonStyle=o=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},genSolidButtonStyle(o)),{color:o.primaryColor,background:o.colorPrimary,boxShadow:o.primaryShadow}),genHoverActiveButtonStyle(o.componentCls,{color:o.colorTextLightSolid,background:o.colorPrimaryHover},{color:o.colorTextLightSolid,background:o.colorPrimaryActive})),genGhostButtonStyle(o.componentCls,o.ghostBg,o.colorPrimary,o.colorPrimary,o.colorTextDisabled,o.colorBorder,{color:o.colorPrimaryHover,borderColor:o.colorPrimaryHover},{color:o.colorPrimaryActive,borderColor:o.colorPrimaryActive})),{[`&${o.componentCls}-dangerous`]:Object.assign(Object.assign(Object.assign({background:o.colorError,boxShadow:o.dangerShadow,color:o.dangerColor},genHoverActiveButtonStyle(o.componentCls,{background:o.colorErrorHover},{background:o.colorErrorActive})),genGhostButtonStyle(o.componentCls,o.ghostBg,o.colorError,o.colorError,o.colorTextDisabled,o.colorBorder,{color:o.colorErrorHover,borderColor:o.colorErrorHover},{color:o.colorErrorActive,borderColor:o.colorErrorActive})),genSolidDisabledButtonStyle(o))}),genDashedButtonStyle=o=>Object.assign(Object.assign({},genDefaultButtonStyle(o)),{borderStyle:"dashed"}),genLinkButtonStyle=o=>Object.assign(Object.assign(Object.assign({color:o.colorLink},genHoverActiveButtonStyle(o.componentCls,{color:o.colorLinkHover,background:o.linkHoverBg},{color:o.colorLinkActive})),genPureDisabledButtonStyle(o)),{[`&${o.componentCls}-dangerous`]:Object.assign(Object.assign({color:o.colorError},genHoverActiveButtonStyle(o.componentCls,{color:o.colorErrorHover},{color:o.colorErrorActive})),genPureDisabledButtonStyle(o))}),genTextButtonStyle=o=>Object.assign(Object.assign(Object.assign({},genHoverActiveButtonStyle(o.componentCls,{color:o.colorText,background:o.textHoverBg},{color:o.colorText,background:o.colorBgTextActive})),genPureDisabledButtonStyle(o)),{[`&${o.componentCls}-dangerous`]:Object.assign(Object.assign({color:o.colorError},genPureDisabledButtonStyle(o)),genHoverActiveButtonStyle(o.componentCls,{color:o.colorErrorHover,background:o.colorErrorBg},{color:o.colorErrorHover,background:o.colorErrorBg}))}),genTypeButtonStyle=o=>{const{componentCls:i}=o;return{[`${i}-default`]:genDefaultButtonStyle(o),[`${i}-primary`]:genPrimaryButtonStyle(o),[`${i}-dashed`]:genDashedButtonStyle(o),[`${i}-link`]:genLinkButtonStyle(o),[`${i}-text`]:genTextButtonStyle(o),[`${i}-ghost`]:genGhostButtonStyle(o.componentCls,o.ghostBg,o.colorBgContainer,o.colorBgContainer,o.colorTextDisabled,o.colorBorder)}},genSizeButtonStyle=function(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const{componentCls:s,controlHeight:a,fontSize:et,borderRadius:tt,buttonPaddingHorizontal:ot,iconCls:dt,buttonPaddingVertical:ht}=o,ft=`${s}-icon-only`;return[{[`${s}${i}`]:{fontSize:et,height:a,padding:`${unit$1(ht)} ${unit$1(ot)}`,borderRadius:tt,[`&${ft}`]:{width:a,paddingInlineStart:0,paddingInlineEnd:0,[`&${s}-round`]:{width:"auto"},[dt]:{fontSize:o.buttonIconOnlyFontSize}},[`&${s}-loading`]:{opacity:o.opacityLoading,cursor:"default"},[`${s}-loading-icon`]:{transition:`width ${o.motionDurationSlow} ${o.motionEaseInOut}, opacity ${o.motionDurationSlow} ${o.motionEaseInOut}`}}},{[`${s}${s}-circle${i}`]:genCircleButtonStyle(o)},{[`${s}${s}-round${i}`]:genRoundButtonStyle(o)}]},genSizeBaseButtonStyle=o=>genSizeButtonStyle(merge(o,{fontSize:o.contentFontSize})),genSizeSmallButtonStyle=o=>{const i=merge(o,{controlHeight:o.controlHeightSM,fontSize:o.contentFontSizeSM,padding:o.paddingXS,buttonPaddingHorizontal:o.paddingInlineSM,buttonPaddingVertical:o.paddingBlockSM,borderRadius:o.borderRadiusSM,buttonIconOnlyFontSize:o.onlyIconSizeSM});return genSizeButtonStyle(i,`${o.componentCls}-sm`)},genSizeLargeButtonStyle=o=>{const i=merge(o,{controlHeight:o.controlHeightLG,fontSize:o.contentFontSizeLG,buttonPaddingHorizontal:o.paddingInlineLG,buttonPaddingVertical:o.paddingBlockLG,borderRadius:o.borderRadiusLG,buttonIconOnlyFontSize:o.onlyIconSizeLG});return genSizeButtonStyle(i,`${o.componentCls}-lg`)},genBlockButtonStyle=o=>{const{componentCls:i}=o;return{[i]:{[`&${i}-block`]:{width:"100%"}}}},prepareToken=o=>{const{paddingInline:i,onlyIconSize:s,paddingBlock:a}=o;return merge(o,{buttonPaddingHorizontal:i,buttonPaddingVertical:a,buttonIconOnlyFontSize:s})},prepareComponentToken$3=o=>{const i=o.fontSize,s=o.fontSize,a=o.fontSizeLG;return{fontWeight:400,defaultShadow:`0 ${o.controlOutlineWidth}px 0 ${o.controlTmpOutline}`,primaryShadow:`0 ${o.controlOutlineWidth}px 0 ${o.controlOutline}`,dangerShadow:`0 ${o.controlOutlineWidth}px 0 ${o.colorErrorOutline}`,primaryColor:o.colorTextLightSolid,dangerColor:o.colorTextLightSolid,borderColorDisabled:o.colorBorder,defaultGhostColor:o.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:o.colorBgContainer,paddingInline:o.paddingContentHorizontal-o.lineWidth,paddingInlineLG:o.paddingContentHorizontal-o.lineWidth,paddingInlineSM:8-o.lineWidth,paddingBlock:Math.max((o.controlHeight-i*o.lineHeight)/2-o.lineWidth,0),paddingBlockSM:Math.max((o.controlHeightSM-s*o.lineHeight)/2-o.lineWidth,0),paddingBlockLG:Math.max((o.controlHeightLG-a*o.lineHeight)/2-o.lineWidth,0),onlyIconSize:o.fontSizeLG,onlyIconSizeSM:o.fontSizeLG-2,onlyIconSizeLG:o.fontSizeLG+2,groupBorderColor:o.colorPrimaryHover,linkHoverBg:"transparent",textHoverBg:o.colorBgTextHover,defaultColor:o.colorText,defaultBg:o.colorBgContainer,defaultBorderColor:o.colorBorder,defaultBorderColorDisabled:o.colorBorder,contentFontSize:i,contentFontSizeSM:s,contentFontSizeLG:a}},useStyle$3=genStyleHooks("Button",o=>{const i=prepareToken(o);return[genSharedButtonStyle(i),genSizeSmallButtonStyle(i),genSizeBaseButtonStyle(i),genSizeLargeButtonStyle(i),genBlockButtonStyle(i),genTypeButtonStyle(i),genGroupStyle$1(i)]},prepareComponentToken$3,{unitless:{fontWeight:!0}});function compactItemBorder(o,i,s){const{focusElCls:a,focus:et,borderElCls:tt}=s,ot=tt?"> *":"",dt=["hover",et?"focus":null,"active"].filter(Boolean).map(ht=>`&:${ht} ${ot}`).join(",");return{[`&-item:not(${i}-last-item)`]:{marginInlineEnd:o.calc(o.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[dt]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${ot}`]:{zIndex:0}})}}function compactItemBorderRadius(o,i,s){const{borderElCls:a}=s,et=a?`> ${a}`:"";return{[`&-item:not(${i}-first-item):not(${i}-last-item) ${et}`]:{borderRadius:0},[`&-item:not(${i}-last-item)${i}-first-item`]:{[`& ${et}, &${o}-sm ${et}, &${o}-lg ${et}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${i}-first-item)${i}-last-item`]:{[`& ${et}, &${o}-sm ${et}, &${o}-lg ${et}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function genCompactItemStyle(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{focus:!0};const{componentCls:s}=o,a=`${s}-compact`;return{[a]:Object.assign(Object.assign({},compactItemBorder(o,a,i)),compactItemBorderRadius(s,a,i))}}function compactItemVerticalBorder(o,i){return{[`&-item:not(${i}-last-item)`]:{marginBottom:o.calc(o.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function compactItemBorderVerticalRadius(o,i){return{[`&-item:not(${i}-first-item):not(${i}-last-item)`]:{borderRadius:0},[`&-item${i}-first-item:not(${i}-last-item)`]:{[`&, &${o}-sm, &${o}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${i}-last-item:not(${i}-first-item)`]:{[`&, &${o}-sm, &${o}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function genCompactItemVerticalStyle(o){const i=`${o.componentCls}-compact-vertical`;return{[i]:Object.assign(Object.assign({},compactItemVerticalBorder(o,i)),compactItemBorderVerticalRadius(o.componentCls,i))}}const genButtonCompactStyle=o=>{const{componentCls:i,calc:s}=o;return{[i]:{[`&-compact-item${i}-primary`]:{[`&:not([disabled]) + ${i}-compact-item${i}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:s(o.lineWidth).mul(-1).equal(),insetInlineStart:s(o.lineWidth).mul(-1).equal(),display:"inline-block",width:o.lineWidth,height:`calc(100% + ${unit$1(o.lineWidth)} * 2)`,backgroundColor:o.colorPrimaryHover,content:'""'}}},"&-compact-vertical-item":{[`&${i}-primary`]:{[`&:not([disabled]) + ${i}-compact-vertical-item${i}-primary:not([disabled])`]:{position:"relative","&:before":{position:"absolute",top:s(o.lineWidth).mul(-1).equal(),insetInlineStart:s(o.lineWidth).mul(-1).equal(),display:"inline-block",width:`calc(100% + ${unit$1(o.lineWidth)} * 2)`,height:o.lineWidth,backgroundColor:o.colorPrimaryHover,content:'""'}}}}}}},CompactCmp=genSubStyleComponent(["Button","compact"],o=>{const i=prepareToken(o);return[genCompactItemStyle(i),genCompactItemVerticalStyle(i),genButtonCompactStyle(i)]},prepareComponentToken$3);var __rest$6=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};function getLoadingConfig(o){if(typeof o=="object"&&o){let i=o==null?void 0:o.delay;return i=!Number.isNaN(i)&&typeof i=="number"?i:0,{loading:i<=0,delay:i}}return{loading:!!o,delay:0}}const InternalButton=(o,i)=>{var s,a;const{loading:et=!1,prefixCls:tt,type:ot="default",danger:dt,shape:ht="default",size:ft,styles:pt,disabled:mt,className:gt,rootClassName:_t,children:yt,icon:St,ghost:Et=!1,block:vt=!1,htmlType:bt="button",classNames:Tt,style:wt={}}=o,Pt=__rest$6(o,["loading","prefixCls","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","ghost","block","htmlType","classNames","style"]),{getPrefixCls:At,autoInsertSpaceInButton:xt,direction:Ot,button:Rt}=reactExports.useContext(ConfigContext),Dt=At("btn",tt),[Nt,Kt,qt]=useStyle$3(Dt),jt=reactExports.useContext(DisabledContext$1),Zt=mt??jt,Ht=reactExports.useContext(GroupSizeContext),Wt=reactExports.useMemo(()=>getLoadingConfig(et),[et]),[Ft,Gt]=reactExports.useState(Wt.loading),[Jt,on]=reactExports.useState(!1),Ut=composeRef(i,reactExports.createRef()),It=reactExports.Children.count(yt)===1&&!St&&!isUnBorderedButtonType(ot);reactExports.useEffect(()=>{let On=null;Wt.delay>0?On=setTimeout(()=>{On=null,Gt(!0)},Wt.delay):Gt(Wt.loading);function wn(){On&&(clearTimeout(On),On=null)}return wn},[Wt]),reactExports.useEffect(()=>{if(!Ut||!Ut.current||xt===!1)return;const On=Ut.current.textContent;It&&isTwoCNChar(On)?Jt||on(!0):Jt&&on(!1)},[Ut]);const Mt=On=>{const{onClick:wn}=o;if(Ft||Zt){On.preventDefault();return}wn==null||wn(On)},$t=xt!==!1,{compactSize:Lt,compactItemClassnames:Vt}=useCompactItemContext(Dt,Ot),zt={large:"lg",small:"sm",middle:void 0},Xt=useSize$1(On=>{var wn,fn;return(fn=(wn=ft??Lt)!==null&&wn!==void 0?wn:Ht)!==null&&fn!==void 0?fn:On}),Yt=Xt&&zt[Xt]||"",un=Ft?"loading":St,gn=omit(Pt,["navigate"]),yn=classNames(Dt,Kt,qt,{[`${Dt}-${ht}`]:ht!=="default"&&ht,[`${Dt}-${ot}`]:ot,[`${Dt}-${Yt}`]:Yt,[`${Dt}-icon-only`]:!yt&&yt!==0&&!!un,[`${Dt}-background-ghost`]:Et&&!isUnBorderedButtonType(ot),[`${Dt}-loading`]:Ft,[`${Dt}-two-chinese-chars`]:Jt&&$t&&!Ft,[`${Dt}-block`]:vt,[`${Dt}-dangerous`]:!!dt,[`${Dt}-rtl`]:Ot==="rtl"},Vt,gt,_t,Rt==null?void 0:Rt.className),Tn=Object.assign(Object.assign({},Rt==null?void 0:Rt.style),wt),Rn=classNames(Tt==null?void 0:Tt.icon,(s=Rt==null?void 0:Rt.classNames)===null||s===void 0?void 0:s.icon),Sn=Object.assign(Object.assign({},(pt==null?void 0:pt.icon)||{}),((a=Rt==null?void 0:Rt.styles)===null||a===void 0?void 0:a.icon)||{}),Fn=St&&!Ft?React.createElement(IconWrapper$1,{prefixCls:Dt,className:Rn,style:Sn},St):React.createElement(LoadingIcon$1,{existIcon:!!St,prefixCls:Dt,loading:!!Ft}),Dn=yt||yt===0?spaceChildren(yt,It&&$t):null;if(gn.href!==void 0)return Nt(React.createElement("a",Object.assign({},gn,{className:classNames(yn,{[`${Dt}-disabled`]:Zt}),href:Zt?void 0:gn.href,style:Tn,onClick:Mt,ref:Ut,tabIndex:Zt?-1:0}),Fn,Dn));let xn=React.createElement("button",Object.assign({},Pt,{type:bt,className:yn,style:Tn,onClick:Mt,disabled:Zt,ref:Ut}),Fn,Dn,Vt&&React.createElement(CompactCmp,{key:"compact",prefixCls:Dt}));return isUnBorderedButtonType(ot)||(xn=React.createElement(Wave$1,{component:"Button",disabled:!!Ft},xn)),Nt(xn)},Button$1=reactExports.forwardRef(InternalButton);Button$1.Group=Group;Button$1.__ANT_BUTTON=!0;const Button$2=Button$1;var OrderContext=reactExports.createContext(null),EMPTY_LIST=[];function useDom(o,i){var s=reactExports.useState(function(){if(!canUseDom())return null;var yt=document.createElement("div");return yt}),a=_slicedToArray$8(s,1),et=a[0],tt=reactExports.useRef(!1),ot=reactExports.useContext(OrderContext),dt=reactExports.useState(EMPTY_LIST),ht=_slicedToArray$8(dt,2),ft=ht[0],pt=ht[1],mt=ot||(tt.current?void 0:function(yt){pt(function(St){var Et=[yt].concat(_toConsumableArray$1(St));return Et})});function gt(){et.parentElement||document.body.appendChild(et),tt.current=!0}function _t(){var yt;(yt=et.parentElement)===null||yt===void 0||yt.removeChild(et),tt.current=!1}return useLayoutEffect(function(){return o?ot?ot(gt):gt():_t(),_t},[o]),useLayoutEffect(function(){ft.length&&(ft.forEach(function(yt){return yt()}),pt(EMPTY_LIST))},[ft]),[et,mt]}var cached;function getScrollBarSize(o){if(typeof document>"u")return 0;if(o||cached===void 0){var i=document.createElement("div");i.style.width="100%",i.style.height="200px";var s=document.createElement("div"),a=s.style;a.position="absolute",a.top="0",a.left="0",a.pointerEvents="none",a.visibility="hidden",a.width="200px",a.height="150px",a.overflow="hidden",s.appendChild(i),document.body.appendChild(s);var et=i.offsetWidth;s.style.overflow="scroll";var tt=i.offsetWidth;et===tt&&(tt=s.clientWidth),document.body.removeChild(s),cached=et-tt}return cached}function ensureSize(o){var i=o.match(/^(.*)px$/),s=Number(i==null?void 0:i[1]);return Number.isNaN(s)?getScrollBarSize():s}function getTargetScrollBarSize(o){if(typeof document>"u"||!o||!(o instanceof Element))return{width:0,height:0};var i=getComputedStyle(o,"::-webkit-scrollbar"),s=i.width,a=i.height;return{width:ensureSize(s),height:ensureSize(a)}}function isBodyOverflowing(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var UNIQUE_ID="rc-util-locker-".concat(Date.now()),uuid$2=0;function useScrollLocker(o){var i=!!o,s=reactExports.useState(function(){return uuid$2+=1,"".concat(UNIQUE_ID,"_").concat(uuid$2)}),a=_slicedToArray$8(s,1),et=a[0];useLayoutEffect(function(){if(i){var tt=getTargetScrollBarSize(document.body).width,ot=isBodyOverflowing();updateCSS(`
html body {
  overflow-y: hidden;
  `.concat(ot?"width: calc(100% - ".concat(tt,"px);"):"",`
}`),et)}else removeCSS(et);return function(){removeCSS(et)}},[i,et])}var inline=!1;function inlineMock(o){return typeof o=="boolean"&&(inline=o),inline}var getPortalContainer=function(i){return i===!1?!1:!canUseDom()||!i?null:typeof i=="string"?document.querySelector(i):typeof i=="function"?i():i},Portal=reactExports.forwardRef(function(o,i){var s=o.open,a=o.autoLock,et=o.getContainer;o.debug;var tt=o.autoDestroy,ot=tt===void 0?!0:tt,dt=o.children,ht=reactExports.useState(s),ft=_slicedToArray$8(ht,2),pt=ft[0],mt=ft[1],gt=pt||s;reactExports.useEffect(function(){(ot||s)&&mt(s)},[s,ot]);var _t=reactExports.useState(function(){return getPortalContainer(et)}),yt=_slicedToArray$8(_t,2),St=yt[0],Et=yt[1];reactExports.useEffect(function(){var Nt=getPortalContainer(et);Et(Nt??null)});var vt=useDom(gt&&!St),bt=_slicedToArray$8(vt,2),Tt=bt[0],wt=bt[1],Pt=St??Tt;useScrollLocker(a&&s&&canUseDom()&&(Pt===Tt||Pt===document.body));var At=null;if(dt&&supportRef(dt)&&i){var xt=dt;At=xt.ref}var Ot=useComposeRef(At,i);if(!gt||!canUseDom()||St===void 0)return null;var Rt=Pt===!1||inlineMock(),Dt=dt;return i&&(Dt=reactExports.cloneElement(dt,{ref:Ot})),reactExports.createElement(OrderContext.Provider,{value:wt},Rt?Dt:reactDomExports.createPortal(Dt,Pt))});function getUseId(){var o=_objectSpread2$1({},React$1);return o.useId}var uuid$1=0,useOriginId=getUseId();const useId$1=useOriginId?function(i){var s=useOriginId();return i||s}:function(i){var s=reactExports.useState("ssr-id"),a=_slicedToArray$8(s,2),et=a[0],tt=a[1];return reactExports.useEffect(function(){var ot=uuid$1;uuid$1+=1,tt("rc_unique_".concat(ot))},[]),i||et},initMotionCommon=o=>({animationDuration:o,animationFillMode:"both"}),initMotionCommonLeave=o=>({animationDuration:o,animationFillMode:"both"}),initMotion=function(o,i,s,a){const tt=(arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1)?"&":"";return{[`
      ${tt}${o}-enter,
      ${tt}${o}-appear
    `]:Object.assign(Object.assign({},initMotionCommon(a)),{animationPlayState:"paused"}),[`${tt}${o}-leave`]:Object.assign(Object.assign({},initMotionCommonLeave(a)),{animationPlayState:"paused"}),[`
      ${tt}${o}-enter${o}-enter-active,
      ${tt}${o}-appear${o}-appear-active
    `]:{animationName:i,animationPlayState:"running"},[`${tt}${o}-leave${o}-leave-active`]:{animationName:s,animationPlayState:"running",pointerEvents:"none"}}},fadeIn=new Keyframe("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),fadeOut=new Keyframe("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),initFadeMotion=function(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;const{antCls:s}=o,a=`${s}-fade`,et=i?"&":"";return[initMotion(a,fadeIn,fadeOut,o.motionDurationMid,i),{[`
        ${et}${a}-enter,
        ${et}${a}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${et}${a}-leave`]:{animationTimingFunction:"linear"}}]},zoomIn=new Keyframe("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoomOut=new Keyframe("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),zoomBigIn=new Keyframe("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),zoomBigOut=new Keyframe("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),zoomUpIn=new Keyframe("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),zoomUpOut=new Keyframe("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),zoomLeftIn=new Keyframe("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),zoomLeftOut=new Keyframe("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),zoomRightIn=new Keyframe("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),zoomRightOut=new Keyframe("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),zoomDownIn=new Keyframe("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),zoomDownOut=new Keyframe("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),zoomMotion={zoom:{inKeyframes:zoomIn,outKeyframes:zoomOut},"zoom-big":{inKeyframes:zoomBigIn,outKeyframes:zoomBigOut},"zoom-big-fast":{inKeyframes:zoomBigIn,outKeyframes:zoomBigOut},"zoom-left":{inKeyframes:zoomLeftIn,outKeyframes:zoomLeftOut},"zoom-right":{inKeyframes:zoomRightIn,outKeyframes:zoomRightOut},"zoom-up":{inKeyframes:zoomUpIn,outKeyframes:zoomUpOut},"zoom-down":{inKeyframes:zoomDownIn,outKeyframes:zoomDownOut}},initZoomMotion=(o,i)=>{const{antCls:s}=o,a=`${s}-${i}`,{inKeyframes:et,outKeyframes:tt}=zoomMotion[i];return[initMotion(a,et,tt,i==="zoom-big-fast"?o.motionDurationFast:o.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:o.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:o.motionEaseInOutCirc}}]},genCollapseMotion=o=>({[o.componentCls]:{[`${o.antCls}-motion-collapse-legacy`]:{overflow:"hidden","&-active":{transition:`height ${o.motionDurationMid} ${o.motionEaseInOut},
        opacity ${o.motionDurationMid} ${o.motionEaseInOut} !important`}},[`${o.antCls}-motion-collapse`]:{overflow:"hidden",transition:`height ${o.motionDurationMid} ${o.motionEaseInOut},
        opacity ${o.motionDurationMid} ${o.motionEaseInOut} !important`}}}),genCollapseMotion$1=genCollapseMotion,isMobile=function(){if(typeof navigator>"u"||typeof window>"u")return!1;var o=navigator.userAgent||navigator.vendor||window.opera;return/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(o)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw-(n|u)|c55\/|capi|ccwa|cdm-|cell|chtm|cldc|cmd-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc-s|devi|dica|dmob|do(c|p)o|ds(12|-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(-|_)|g1 u|g560|gene|gf-5|g-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd-(m|p|t)|hei-|hi(pt|ta)|hp( i|ip)|hs-c|ht(c(-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i-(20|go|ma)|i230|iac( |-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|-[a-w])|libw|lynx|m1-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|-([1-8]|c))|phil|pire|pl(ay|uc)|pn-2|po(ck|rt|se)|prox|psio|pt-g|qa-a|qc(07|12|21|32|60|-[2-7]|i-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h-|oo|p-)|sdk\/|se(c(-|0|1)|47|mc|nd|ri)|sgh-|shar|sie(-|m)|sk-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h-|v-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl-|tdg-|tel(i|m)|tim-|t-mo|to(pl|sh)|ts(70|m-|m3|m5)|tx-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas-|your|zeto|zte-/i.test(o==null?void 0:o.substr(0,4))};function Arrow(o){var i=o.prefixCls,s=o.align,a=o.arrow,et=o.arrowPos,tt=a||{},ot=tt.className,dt=tt.content,ht=et.x,ft=ht===void 0?0:ht,pt=et.y,mt=pt===void 0?0:pt,gt=reactExports.useRef();if(!s||!s.points)return null;var _t={position:"absolute"};if(s.autoArrow!==!1){var yt=s.points[0],St=s.points[1],Et=yt[0],vt=yt[1],bt=St[0],Tt=St[1];Et===bt||!["t","b"].includes(Et)?_t.top=mt:Et==="t"?_t.top=0:_t.bottom=0,vt===Tt||!["l","r"].includes(vt)?_t.left=ft:vt==="l"?_t.left=0:_t.right=0}return reactExports.createElement("div",{ref:gt,className:classNames("".concat(i,"-arrow"),ot),style:_t},dt)}function Mask(o){var i=o.prefixCls,s=o.open,a=o.zIndex,et=o.mask,tt=o.motion;return et?reactExports.createElement(CSSMotion,_extends$x({},tt,{motionAppear:!0,visible:s,removeOnLeave:!0}),function(ot){var dt=ot.className;return reactExports.createElement("div",{style:{zIndex:a},className:classNames("".concat(i,"-mask"),dt)})}):null}var PopupContent=reactExports.memo(function(o){var i=o.children;return i},function(o,i){return i.cache}),Popup$1=reactExports.forwardRef(function(o,i){var s=o.popup,a=o.className,et=o.prefixCls,tt=o.style,ot=o.target,dt=o.onVisibleChanged,ht=o.open,ft=o.keepDom,pt=o.fresh,mt=o.onClick,gt=o.mask,_t=o.arrow,yt=o.arrowPos,St=o.align,Et=o.motion,vt=o.maskMotion,bt=o.forceRender,Tt=o.getPopupContainer,wt=o.autoDestroy,Pt=o.portal,At=o.zIndex,xt=o.onMouseEnter,Ot=o.onMouseLeave,Rt=o.onPointerEnter,Dt=o.ready,Nt=o.offsetX,Kt=o.offsetY,qt=o.offsetR,jt=o.offsetB,Zt=o.onAlign,Ht=o.onPrepare,Wt=o.stretch,Ft=o.targetWidth,Gt=o.targetHeight,Jt=typeof s=="function"?s():s,on=ht||ft,bn=(Tt==null?void 0:Tt.length)>0,Ut=reactExports.useState(!Tt||!bn),It=_slicedToArray$8(Ut,2),Mt=It[0],$t=It[1];if(useLayoutEffect(function(){!Mt&&bn&&ot&&$t(!0)},[Mt,bn,ot]),!Mt)return null;var Lt="auto",Vt={left:"-1000vw",top:"-1000vh",right:Lt,bottom:Lt};if(Dt||!ht){var zt,Xt=St.points,Yt=St.dynamicInset||((zt=St._experimental)===null||zt===void 0?void 0:zt.dynamicInset),un=Yt&&Xt[0][1]==="r",gn=Yt&&Xt[0][0]==="b";un?(Vt.right=qt,Vt.left=Lt):(Vt.left=Nt,Vt.right=Lt),gn?(Vt.bottom=jt,Vt.top=Lt):(Vt.top=Kt,Vt.bottom=Lt)}var yn={};return Wt&&(Wt.includes("height")&&Gt?yn.height=Gt:Wt.includes("minHeight")&&Gt&&(yn.minHeight=Gt),Wt.includes("width")&&Ft?yn.width=Ft:Wt.includes("minWidth")&&Ft&&(yn.minWidth=Ft)),ht||(yn.pointerEvents="none"),reactExports.createElement(Pt,{open:bt||on,getContainer:Tt&&function(){return Tt(ot)},autoDestroy:wt},reactExports.createElement(Mask,{prefixCls:et,open:ht,zIndex:At,mask:gt,motion:vt}),reactExports.createElement(RefResizeObserver,{onResize:Zt,disabled:!ht},function(Tn){return reactExports.createElement(CSSMotion,_extends$x({motionAppear:!0,motionEnter:!0,motionLeave:!0,removeOnLeave:!1,forceRender:bt,leavedClassName:"".concat(et,"-hidden")},Et,{onAppearPrepare:Ht,onEnterPrepare:Ht,visible:ht,onVisibleChanged:function(Sn){var Fn;Et==null||(Fn=Et.onVisibleChanged)===null||Fn===void 0||Fn.call(Et,Sn),dt(Sn)}}),function(Rn,Sn){var Fn=Rn.className,Dn=Rn.style,xn=classNames(et,Fn,a);return reactExports.createElement("div",{ref:composeRef(Tn,i,Sn),className:xn,style:_objectSpread2$1(_objectSpread2$1(_objectSpread2$1(_objectSpread2$1({"--arrow-x":"".concat(yt.x||0,"px"),"--arrow-y":"".concat(yt.y||0,"px")},Vt),yn),Dn),{},{boxSizing:"border-box",zIndex:At},tt),onMouseEnter:xt,onMouseLeave:Ot,onPointerEnter:Rt,onClick:mt},_t&&reactExports.createElement(Arrow,{prefixCls:et,arrow:_t,arrowPos:yt,align:St}),reactExports.createElement(PopupContent,{cache:!ht&&!pt},Jt))})}))}),TriggerWrapper=reactExports.forwardRef(function(o,i){var s=o.children,a=o.getTriggerDOMNode,et=supportRef(s),tt=reactExports.useCallback(function(dt){fillRef(i,a?a(dt):dt)},[a]),ot=useComposeRef(tt,s.ref);return et?reactExports.cloneElement(s,{ref:ot}):s}),TriggerContext=reactExports.createContext(null);function toArray$1(o){return o?Array.isArray(o)?o:[o]:[]}function useAction(o,i,s,a){return reactExports.useMemo(function(){var et=toArray$1(s??i),tt=toArray$1(a??i),ot=new Set(et),dt=new Set(tt);return o&&(ot.has("hover")&&(ot.delete("hover"),ot.add("click")),dt.has("hover")&&(dt.delete("hover"),dt.add("click"))),[ot,dt]},[o,i,s,a])}function isPointsEq(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0;return s?o[0]===i[0]:o[0]===i[0]&&o[1]===i[1]}function getAlignPopupClassName(o,i,s,a){for(var et=s.points,tt=Object.keys(o),ot=0;ot<tt.length;ot+=1){var dt,ht=tt[ot];if(isPointsEq((dt=o[ht])===null||dt===void 0?void 0:dt.points,et,a))return"".concat(i,"-placement-").concat(ht)}return""}function getMotion(o,i,s,a){return i||(s?{motionName:"".concat(o,"-").concat(s)}:a?{motionName:a}:null)}function getWin(o){return o.ownerDocument.defaultView}function collectScroller(o){for(var i=[],s=o==null?void 0:o.parentElement,a=["hidden","scroll","clip","auto"];s;){var et=getWin(s).getComputedStyle(s),tt=et.overflowX,ot=et.overflowY,dt=et.overflow;[tt,ot,dt].some(function(ht){return a.includes(ht)})&&i.push(s),s=s.parentElement}return i}function toNum(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return Number.isNaN(o)?i:o}function getPxValue(o){return toNum(parseFloat(o),0)}function getVisibleArea(o,i){var s=_objectSpread2$1({},o);return(i||[]).forEach(function(a){if(!(a instanceof HTMLBodyElement||a instanceof HTMLHtmlElement)){var et=getWin(a).getComputedStyle(a),tt=et.overflow,ot=et.overflowClipMargin,dt=et.borderTopWidth,ht=et.borderBottomWidth,ft=et.borderLeftWidth,pt=et.borderRightWidth,mt=a.getBoundingClientRect(),gt=a.offsetHeight,_t=a.clientHeight,yt=a.offsetWidth,St=a.clientWidth,Et=getPxValue(dt),vt=getPxValue(ht),bt=getPxValue(ft),Tt=getPxValue(pt),wt=toNum(Math.round(mt.width/yt*1e3)/1e3),Pt=toNum(Math.round(mt.height/gt*1e3)/1e3),At=(yt-St-bt-Tt)*wt,xt=(gt-_t-Et-vt)*Pt,Ot=Et*Pt,Rt=vt*Pt,Dt=bt*wt,Nt=Tt*wt,Kt=0,qt=0;if(tt==="clip"){var jt=getPxValue(ot);Kt=jt*wt,qt=jt*Pt}var Zt=mt.x+Dt-Kt,Ht=mt.y+Ot-qt,Wt=Zt+mt.width+2*Kt-Dt-Nt-At,Ft=Ht+mt.height+2*qt-Ot-Rt-xt;s.left=Math.max(s.left,Zt),s.top=Math.max(s.top,Ht),s.right=Math.min(s.right,Wt),s.bottom=Math.min(s.bottom,Ft)}}),s}function getUnitOffset(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s="".concat(i),a=s.match(/^(.*)\%$/);return a?o*(parseFloat(a[1])/100):parseFloat(s)}function getNumberOffset(o,i){var s=i||[],a=_slicedToArray$8(s,2),et=a[0],tt=a[1];return[getUnitOffset(o.width,et),getUnitOffset(o.height,tt)]}function splitPoints(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return[o[0],o[1]]}function getAlignPoint(o,i){var s=i[0],a=i[1],et,tt;return s==="t"?tt=o.y:s==="b"?tt=o.y+o.height:tt=o.y+o.height/2,a==="l"?et=o.x:a==="r"?et=o.x+o.width:et=o.x+o.width/2,{x:et,y:tt}}function reversePoints(o,i){var s={t:"b",b:"t",l:"r",r:"l"};return o.map(function(a,et){return et===i?s[a]||"c":a}).join("")}function useAlign(o,i,s,a,et,tt,ot){var dt=reactExports.useState({ready:!1,offsetX:0,offsetY:0,offsetR:0,offsetB:0,arrowX:0,arrowY:0,scaleX:1,scaleY:1,align:et[a]||{}}),ht=_slicedToArray$8(dt,2),ft=ht[0],pt=ht[1],mt=reactExports.useRef(0),gt=reactExports.useMemo(function(){return i?collectScroller(i):[]},[i]),_t=reactExports.useRef({}),yt=function(){_t.current={}};o||yt();var St=useEvent(function(){if(i&&s&&o){let _r=function(Fo,$r){var Kr=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xn,no=Jt.x+Fo,bo=Jt.y+$r,us=no+zt,ds=bo+Vt,hs=Math.max(no,Kr.left),fs=Math.max(bo,Kr.top),nr=Math.min(us,Kr.right),lr=Math.min(ds,Kr.bottom);return Math.max(0,(nr-hs)*(lr-fs))},Eo=function(){En=Jt.y+rn,Nn=En+Vt,Bn=Jt.x+an,Un=Bn+zt};var Qs=_r,Js=Eo,bt,Tt,wt=i,Pt=wt.ownerDocument,At=getWin(wt),xt=At.getComputedStyle(wt),Ot=xt.width,Rt=xt.height,Dt=xt.position,Nt=wt.style.left,Kt=wt.style.top,qt=wt.style.right,jt=wt.style.bottom,Zt=wt.style.overflow,Ht=_objectSpread2$1(_objectSpread2$1({},et[a]),tt),Wt=Pt.createElement("div");(bt=wt.parentElement)===null||bt===void 0||bt.appendChild(Wt),Wt.style.left="".concat(wt.offsetLeft,"px"),Wt.style.top="".concat(wt.offsetTop,"px"),Wt.style.position=Dt,Wt.style.height="".concat(wt.offsetHeight,"px"),Wt.style.width="".concat(wt.offsetWidth,"px"),wt.style.left="0",wt.style.top="0",wt.style.right="auto",wt.style.bottom="auto",wt.style.overflow="hidden";var Ft;if(Array.isArray(s))Ft={x:s[0],y:s[1],width:0,height:0};else{var Gt=s.getBoundingClientRect();Ft={x:Gt.x,y:Gt.y,width:Gt.width,height:Gt.height}}var Jt=wt.getBoundingClientRect(),on=Pt.documentElement,bn=on.clientWidth,Ut=on.clientHeight,It=on.scrollWidth,Mt=on.scrollHeight,$t=on.scrollTop,Lt=on.scrollLeft,Vt=Jt.height,zt=Jt.width,Xt=Ft.height,Yt=Ft.width,un={left:0,top:0,right:bn,bottom:Ut},gn={left:-Lt,top:-$t,right:It-Lt,bottom:Mt-$t},yn=Ht.htmlRegion,Tn="visible",Rn="visibleFirst";yn!=="scroll"&&yn!==Rn&&(yn=Tn);var Sn=yn===Rn,Fn=getVisibleArea(gn,gt),Dn=getVisibleArea(un,gt),xn=yn===Tn?Dn:Fn,On=Sn?Dn:xn;wt.style.left="auto",wt.style.top="auto",wt.style.right="0",wt.style.bottom="0";var wn=wt.getBoundingClientRect();wt.style.left=Nt,wt.style.top=Kt,wt.style.right=qt,wt.style.bottom=jt,wt.style.overflow=Zt,(Tt=wt.parentElement)===null||Tt===void 0||Tt.removeChild(Wt);var fn=toNum(Math.round(zt/parseFloat(Ot)*1e3)/1e3),_n=toNum(Math.round(Vt/parseFloat(Rt)*1e3)/1e3);if(fn===0||_n===0||isDOM(s)&&!isVisible(s))return;var Cn=Ht.offset,Ln=Ht.targetOffset,Vn=getNumberOffset(Jt,Cn),Jn=_slicedToArray$8(Vn,2),Xn=Jn[0],Yn=Jn[1],Qn=getNumberOffset(Ft,Ln),jn=_slicedToArray$8(Qn,2),zn=jn[0],qn=jn[1];Ft.x-=zn,Ft.y-=qn;var vn=Ht.points||[],cn=_slicedToArray$8(vn,2),ln=cn[0],Mn=cn[1],$n=splitPoints(Mn),rr=splitPoints(ln),cr=getAlignPoint(Ft,$n),mn=getAlignPoint(Jt,rr),nn=_objectSpread2$1({},Ht),an=cr.x-mn.x+Xn,rn=cr.y-mn.y+Yn,An=_r(an,rn),In=_r(an,rn,Dn),Hn=getAlignPoint(Ft,["t","l"]),Pn=getAlignPoint(Jt,["t","l"]),Wn=getAlignPoint(Ft,["b","r"]),kn=getAlignPoint(Jt,["b","r"]),Qt=Ht.overflow||{},kt=Qt.adjustX,Bt=Qt.adjustY,en=Qt.shiftX,sn=Qt.shiftY,hn=function($r){return typeof $r=="boolean"?$r:$r>=0},En,Nn,Bn,Un;Eo();var er=hn(Bt),Gn=rr[0]===$n[0];if(er&&rr[0]==="t"&&(Nn>On.bottom||_t.current.bt)){var Kn=rn;Gn?Kn-=Vt-Xt:Kn=Hn.y-kn.y-Yn;var Zn=_r(an,Kn),ir=_r(an,Kn,Dn);Zn>An||Zn===An&&(!Sn||ir>=In)?(_t.current.bt=!0,rn=Kn,Yn=-Yn,nn.points=[reversePoints(rr,0),reversePoints($n,0)]):_t.current.bt=!1}if(er&&rr[0]==="b"&&(En<On.top||_t.current.tb)){var tr=rn;Gn?tr+=Vt-Xt:tr=Wn.y-Pn.y-Yn;var ar=_r(an,tr),sr=_r(an,tr,Dn);ar>An||ar===An&&(!Sn||sr>=In)?(_t.current.tb=!0,rn=tr,Yn=-Yn,nn.points=[reversePoints(rr,0),reversePoints($n,0)]):_t.current.tb=!1}var or=hn(kt),dr=rr[1]===$n[1];if(or&&rr[1]==="l"&&(Un>On.right||_t.current.rl)){var pr=an;dr?pr-=zt-Yt:pr=Hn.x-kn.x-Xn;var vr=_r(pr,rn),Zr=_r(pr,rn,Dn);vr>An||vr===An&&(!Sn||Zr>=In)?(_t.current.rl=!0,an=pr,Xn=-Xn,nn.points=[reversePoints(rr,1),reversePoints($n,1)]):_t.current.rl=!1}if(or&&rr[1]==="r"&&(Bn<On.left||_t.current.lr)){var zr=an;dr?zr+=zt-Yt:zr=Wn.x-Pn.x-Xn;var Oo=_r(zr,rn),_i=_r(zr,rn,Dn);Oo>An||Oo===An&&(!Sn||_i>=In)?(_t.current.lr=!0,an=zr,Xn=-Xn,nn.points=[reversePoints(rr,1),reversePoints($n,1)]):_t.current.lr=!1}Eo();var Ir=en===!0?0:en;typeof Ir=="number"&&(Bn<Dn.left&&(an-=Bn-Dn.left-Xn,Ft.x+Yt<Dn.left+Ir&&(an+=Ft.x-Dn.left+Yt-Ir)),Un>Dn.right&&(an-=Un-Dn.right-Xn,Ft.x>Dn.right-Ir&&(an+=Ft.x-Dn.right+Ir)));var Hr=sn===!0?0:sn;typeof Hr=="number"&&(En<Dn.top&&(rn-=En-Dn.top-Yn,Ft.y+Xt<Dn.top+Hr&&(rn+=Ft.y-Dn.top+Xt-Hr)),Nn>Dn.bottom&&(rn-=Nn-Dn.bottom-Yn,Ft.y>Dn.bottom-Hr&&(rn+=Ft.y-Dn.bottom+Hr)));var eo=Jt.x+an,to=eo+zt,xr=Jt.y+rn,ko=xr+Vt,Gr=Ft.x,Nr=Gr+Yt,Mo=Ft.y,ns=Mo+Xt,rs=Math.max(eo,Gr),No=Math.min(to,Nr),is=(rs+No)/2,os=is-eo,ss=Math.max(xr,Mo),Do=Math.min(ko,ns),as=(ss+Do)/2,ls=as-xr;ot==null||ot(i,nn);var Lo=wn.right-Jt.x-(an+Jt.width),cs=wn.bottom-Jt.y-(rn+Jt.height);pt({ready:!0,offsetX:an/fn,offsetY:rn/_n,offsetR:Lo/fn,offsetB:cs/_n,arrowX:os/fn,arrowY:ls/_n,scaleX:fn,scaleY:_n,align:nn})}}),Et=function(){mt.current+=1;var Tt=mt.current;Promise.resolve().then(function(){mt.current===Tt&&St()})},vt=function(){pt(function(Tt){return _objectSpread2$1(_objectSpread2$1({},Tt),{},{ready:!1})})};return useLayoutEffect(vt,[a]),useLayoutEffect(function(){o||vt()},[o]),[ft.ready,ft.offsetX,ft.offsetY,ft.offsetR,ft.offsetB,ft.arrowX,ft.arrowY,ft.scaleX,ft.scaleY,ft.align,Et]}function useWatch(o,i,s,a,et){useLayoutEffect(function(){if(o&&i&&s){let gt=function(){a(),et()};var mt=gt,tt=i,ot=s,dt=collectScroller(tt),ht=collectScroller(ot),ft=getWin(ot),pt=new Set([ft].concat(_toConsumableArray$1(dt),_toConsumableArray$1(ht)));return pt.forEach(function(_t){_t.addEventListener("scroll",gt,{passive:!0})}),ft.addEventListener("resize",gt,{passive:!0}),a(),function(){pt.forEach(function(_t){_t.removeEventListener("scroll",gt),ft.removeEventListener("resize",gt)})}}},[o,i,s])}function useWinClick(o,i,s,a,et,tt,ot,dt){var ht=reactExports.useRef(o),ft=reactExports.useRef(!1);ht.current!==o&&(ft.current=!0,ht.current=o),reactExports.useEffect(function(){var pt=wrapperRaf(function(){ft.current=!1});return function(){wrapperRaf.cancel(pt)}},[o]),reactExports.useEffect(function(){if(i&&a&&(!et||tt)){var pt=function(){var At=!1,xt=function(Dt){var Nt=Dt.target;At=ot(Nt)},Ot=function(Dt){var Nt=Dt.target;!ft.current&&ht.current&&!At&&!ot(Nt)&&dt(!1)};return[xt,Ot]},mt=pt(),gt=_slicedToArray$8(mt,2),_t=gt[0],yt=gt[1],St=pt(),Et=_slicedToArray$8(St,2),vt=Et[0],bt=Et[1],Tt=getWin(a);Tt.addEventListener("mousedown",_t,!0),Tt.addEventListener("click",yt,!0),Tt.addEventListener("contextmenu",yt,!0);var wt=getShadowRoot(s);return wt&&(wt.addEventListener("mousedown",vt,!0),wt.addEventListener("click",bt,!0),wt.addEventListener("contextmenu",bt,!0)),function(){Tt.removeEventListener("mousedown",_t,!0),Tt.removeEventListener("click",yt,!0),Tt.removeEventListener("contextmenu",yt,!0),wt&&(wt.removeEventListener("mousedown",vt,!0),wt.removeEventListener("click",bt,!0),wt.removeEventListener("contextmenu",bt,!0))}}},[i,s,a,et,tt])}var _excluded$B=["prefixCls","children","action","showAction","hideAction","popupVisible","defaultPopupVisible","onPopupVisibleChange","afterPopupVisibleChange","mouseEnterDelay","mouseLeaveDelay","focusDelay","blurDelay","mask","maskClosable","getPopupContainer","forceRender","autoDestroy","destroyPopupOnHide","popup","popupClassName","popupStyle","popupPlacement","builtinPlacements","popupAlign","zIndex","stretch","getPopupClassNameFromAlign","fresh","alignPoint","onPopupClick","onPopupAlign","arrow","popupMotion","maskMotion","popupTransitionName","popupAnimation","maskTransitionName","maskAnimation","className","getTriggerDOMNode"];function generateTrigger(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Portal,i=reactExports.forwardRef(function(s,a){var et=s.prefixCls,tt=et===void 0?"rc-trigger-popup":et,ot=s.children,dt=s.action,ht=dt===void 0?"hover":dt,ft=s.showAction,pt=s.hideAction,mt=s.popupVisible,gt=s.defaultPopupVisible,_t=s.onPopupVisibleChange,yt=s.afterPopupVisibleChange,St=s.mouseEnterDelay,Et=s.mouseLeaveDelay,vt=Et===void 0?.1:Et,bt=s.focusDelay,Tt=s.blurDelay,wt=s.mask,Pt=s.maskClosable,At=Pt===void 0?!0:Pt,xt=s.getPopupContainer,Ot=s.forceRender,Rt=s.autoDestroy,Dt=s.destroyPopupOnHide,Nt=s.popup,Kt=s.popupClassName,qt=s.popupStyle,jt=s.popupPlacement,Zt=s.builtinPlacements,Ht=Zt===void 0?{}:Zt,Wt=s.popupAlign,Ft=s.zIndex,Gt=s.stretch,Jt=s.getPopupClassNameFromAlign,on=s.fresh,bn=s.alignPoint,Ut=s.onPopupClick,It=s.onPopupAlign,Mt=s.arrow,$t=s.popupMotion,Lt=s.maskMotion,Vt=s.popupTransitionName,zt=s.popupAnimation,Xt=s.maskTransitionName,Yt=s.maskAnimation,un=s.className,gn=s.getTriggerDOMNode,yn=_objectWithoutProperties$y(s,_excluded$B),Tn=Rt||Dt||!1,Rn=reactExports.useState(!1),Sn=_slicedToArray$8(Rn,2),Fn=Sn[0],Dn=Sn[1];useLayoutEffect(function(){Dn(isMobile())},[]);var xn=reactExports.useRef({}),On=reactExports.useContext(TriggerContext),wn=reactExports.useMemo(function(){return{registerSubPopup:function(lr,hr){xn.current[lr]=hr,On==null||On.registerSubPopup(lr,hr)}}},[On]),fn=useId$1(),_n=reactExports.useState(null),Cn=_slicedToArray$8(_n,2),Ln=Cn[0],Vn=Cn[1],Jn=useEvent(function(nr){isDOM(nr)&&Ln!==nr&&Vn(nr),On==null||On.registerSubPopup(fn,nr)}),Xn=reactExports.useState(null),Yn=_slicedToArray$8(Xn,2),Qn=Yn[0],jn=Yn[1],zn=reactExports.useRef(null),qn=useEvent(function(nr){isDOM(nr)&&Qn!==nr&&(jn(nr),zn.current=nr)}),vn=reactExports.Children.only(ot),cn=(vn==null?void 0:vn.props)||{},ln={},Mn=useEvent(function(nr){var lr,hr,mr=Qn;return(mr==null?void 0:mr.contains(nr))||((lr=getShadowRoot(mr))===null||lr===void 0?void 0:lr.host)===nr||nr===mr||(Ln==null?void 0:Ln.contains(nr))||((hr=getShadowRoot(Ln))===null||hr===void 0?void 0:hr.host)===nr||nr===Ln||Object.values(xn.current).some(function(fr){return(fr==null?void 0:fr.contains(nr))||nr===fr})}),$n=getMotion(tt,$t,zt,Vt),rr=getMotion(tt,Lt,Yt,Xt),cr=reactExports.useState(gt||!1),mn=_slicedToArray$8(cr,2),nn=mn[0],an=mn[1],rn=mt??nn,An=useEvent(function(nr){mt===void 0&&an(nr)});useLayoutEffect(function(){an(mt||!1)},[mt]);var In=reactExports.useRef(rn);In.current=rn;var Hn=reactExports.useRef([]);Hn.current=[];var Pn=useEvent(function(nr){var lr;An(nr),((lr=Hn.current[Hn.current.length-1])!==null&&lr!==void 0?lr:rn)!==nr&&(Hn.current.push(nr),_t==null||_t(nr))}),Wn=reactExports.useRef(),kn=function(){clearTimeout(Wn.current)},Qt=function(lr){var hr=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;kn(),hr===0?Pn(lr):Wn.current=setTimeout(function(){Pn(lr)},hr*1e3)};reactExports.useEffect(function(){return kn},[]);var kt=reactExports.useState(!1),Bt=_slicedToArray$8(kt,2),en=Bt[0],sn=Bt[1];useLayoutEffect(function(nr){(!nr||rn)&&sn(!0)},[rn]);var hn=reactExports.useState(null),En=_slicedToArray$8(hn,2),Nn=En[0],Bn=En[1],Un=reactExports.useState([0,0]),er=_slicedToArray$8(Un,2),Gn=er[0],Kn=er[1],Zn=function(lr){Kn([lr.clientX,lr.clientY])},ir=useAlign(rn,Ln,bn?Gn:Qn,jt,Ht,Wt,It),tr=_slicedToArray$8(ir,11),ar=tr[0],sr=tr[1],or=tr[2],dr=tr[3],pr=tr[4],vr=tr[5],Zr=tr[6],zr=tr[7],Oo=tr[8],_i=tr[9],Ir=tr[10],Hr=useAction(Fn,ht,ft,pt),eo=_slicedToArray$8(Hr,2),to=eo[0],xr=eo[1],ko=to.has("click"),Gr=xr.has("click")||xr.has("contextMenu"),Nr=useEvent(function(){en||Ir()}),Mo=function(){In.current&&bn&&Gr&&Qt(!1)};useWatch(rn,Qn,Ln,Nr,Mo),useLayoutEffect(function(){Nr()},[Gn,jt]),useLayoutEffect(function(){rn&&!(Ht!=null&&Ht[jt])&&Nr()},[JSON.stringify(Wt)]);var ns=reactExports.useMemo(function(){var nr=getAlignPopupClassName(Ht,tt,_i,bn);return classNames(nr,Jt==null?void 0:Jt(_i))},[_i,Jt,Ht,tt,bn]);reactExports.useImperativeHandle(a,function(){return{nativeElement:zn.current,forceAlign:Nr}});var rs=reactExports.useState(0),No=_slicedToArray$8(rs,2),is=No[0],os=No[1],ss=reactExports.useState(0),Do=_slicedToArray$8(ss,2),as=Do[0],ls=Do[1],Lo=function(){if(Gt&&Qn){var lr=Qn.getBoundingClientRect();os(lr.width),ls(lr.height)}},cs=function(){Lo(),Nr()},Qs=function(lr){sn(!1),Ir(),yt==null||yt(lr)},Js=function(){return new Promise(function(lr){Lo(),Bn(function(){return lr})})};useLayoutEffect(function(){Nn&&(Ir(),Nn(),Bn(null))},[Nn]);function _r(nr,lr,hr,mr){ln[nr]=function(fr){var Vo;mr==null||mr(fr),Qt(lr,hr);for(var ps=arguments.length,Zs=new Array(ps>1?ps-1:0),jo=1;jo<ps;jo++)Zs[jo-1]=arguments[jo];(Vo=cn[nr])===null||Vo===void 0||Vo.call.apply(Vo,[cn,fr].concat(Zs))}}(ko||Gr)&&(ln.onClick=function(nr){var lr;In.current&&Gr?Qt(!1):!In.current&&ko&&(Zn(nr),Qt(!0));for(var hr=arguments.length,mr=new Array(hr>1?hr-1:0),fr=1;fr<hr;fr++)mr[fr-1]=arguments[fr];(lr=cn.onClick)===null||lr===void 0||lr.call.apply(lr,[cn,nr].concat(mr))}),useWinClick(rn,Gr,Qn,Ln,wt,At,Mn,Qt);var Eo=to.has("hover"),Fo=xr.has("hover"),$r,Kr;Eo&&(_r("onMouseEnter",!0,St,function(nr){Zn(nr)}),_r("onPointerEnter",!0,St,function(nr){Zn(nr)}),$r=function(){(rn||en)&&Qt(!0,St)},bn&&(ln.onMouseMove=function(nr){var lr;(lr=cn.onMouseMove)===null||lr===void 0||lr.call(cn,nr)})),Fo&&(_r("onMouseLeave",!1,vt),_r("onPointerLeave",!1,vt),Kr=function(){Qt(!1,vt)}),to.has("focus")&&_r("onFocus",!0,bt),xr.has("focus")&&_r("onBlur",!1,Tt),to.has("contextMenu")&&(ln.onContextMenu=function(nr){var lr;In.current&&xr.has("contextMenu")?Qt(!1):(Zn(nr),Qt(!0)),nr.preventDefault();for(var hr=arguments.length,mr=new Array(hr>1?hr-1:0),fr=1;fr<hr;fr++)mr[fr-1]=arguments[fr];(lr=cn.onContextMenu)===null||lr===void 0||lr.call.apply(lr,[cn,nr].concat(mr))}),un&&(ln.className=classNames(cn.className,un));var no=_objectSpread2$1(_objectSpread2$1({},cn),ln),bo={},us=["onContextMenu","onClick","onMouseDown","onTouchStart","onMouseEnter","onMouseLeave","onFocus","onBlur"];us.forEach(function(nr){yn[nr]&&(bo[nr]=function(){for(var lr,hr=arguments.length,mr=new Array(hr),fr=0;fr<hr;fr++)mr[fr]=arguments[fr];(lr=no[nr])===null||lr===void 0||lr.call.apply(lr,[no].concat(mr)),yn[nr].apply(yn,mr)})});var ds=reactExports.cloneElement(vn,_objectSpread2$1(_objectSpread2$1({},no),bo)),hs={x:vr,y:Zr},fs=Mt?_objectSpread2$1({},Mt!==!0?Mt:{}):null;return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(RefResizeObserver,{disabled:!rn,ref:qn,onResize:cs},reactExports.createElement(TriggerWrapper,{getTriggerDOMNode:gn},ds)),reactExports.createElement(TriggerContext.Provider,{value:wn},reactExports.createElement(Popup$1,{portal:o,ref:Jn,prefixCls:tt,popup:Nt,className:classNames(Kt,ns),style:qt,target:Qn,onMouseEnter:$r,onMouseLeave:Kr,onPointerEnter:$r,zIndex:Ft,open:rn,keepDom:en,fresh:on,onClick:Ut,mask:wt,motion:$n,maskMotion:rr,onVisibleChanged:Qs,onPrepare:Js,forceRender:Ot,autoDestroy:Tn,getPopupContainer:xt,align:_i,arrow:fs,arrowPos:hs,ready:ar,offsetX:sr,offsetY:or,offsetR:dr,offsetB:pr,onAlign:Nr,stretch:Gt,targetWidth:is/zr,targetHeight:as/Oo})))});return i}const Trigger=generateTrigger(Portal);function useForceUpdate(){const[,o]=reactExports.useReducer(i=>i+1,0);return o}function Popup(o){var i=o.children,s=o.prefixCls,a=o.id,et=o.overlayInnerStyle,tt=o.className,ot=o.style;return reactExports.createElement("div",{className:classNames("".concat(s,"-content"),tt),style:ot},reactExports.createElement("div",{className:"".concat(s,"-inner"),id:a,role:"tooltip",style:et},typeof i=="function"?i():i))}var autoAdjustOverflowTopBottom={shiftX:64,adjustY:1},autoAdjustOverflowLeftRight={adjustX:1,shiftY:!0},targetOffset=[0,0],placements={left:{points:["cr","cl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset},right:{points:["cl","cr"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},top:{points:["bc","tc"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},bottom:{points:["tc","bc"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},topLeft:{points:["bl","tl"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},leftTop:{points:["tr","tl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset},topRight:{points:["br","tr"],overflow:autoAdjustOverflowTopBottom,offset:[0,-4],targetOffset},rightTop:{points:["tl","tr"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},bottomRight:{points:["tr","br"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},rightBottom:{points:["bl","br"],overflow:autoAdjustOverflowLeftRight,offset:[4,0],targetOffset},bottomLeft:{points:["tl","bl"],overflow:autoAdjustOverflowTopBottom,offset:[0,4],targetOffset},leftBottom:{points:["br","bl"],overflow:autoAdjustOverflowLeftRight,offset:[-4,0],targetOffset}},_excluded$A=["overlayClassName","trigger","mouseEnterDelay","mouseLeaveDelay","overlayStyle","prefixCls","children","onVisibleChange","afterVisibleChange","transitionName","animation","motion","placement","align","destroyTooltipOnHide","defaultVisible","getTooltipContainer","overlayInnerStyle","arrowContent","overlay","id","showArrow"],Tooltip$2=function(i,s){var a=i.overlayClassName,et=i.trigger,tt=et===void 0?["hover"]:et,ot=i.mouseEnterDelay,dt=ot===void 0?0:ot,ht=i.mouseLeaveDelay,ft=ht===void 0?.1:ht,pt=i.overlayStyle,mt=i.prefixCls,gt=mt===void 0?"rc-tooltip":mt,_t=i.children,yt=i.onVisibleChange,St=i.afterVisibleChange,Et=i.transitionName,vt=i.animation,bt=i.motion,Tt=i.placement,wt=Tt===void 0?"right":Tt,Pt=i.align,At=Pt===void 0?{}:Pt,xt=i.destroyTooltipOnHide,Ot=xt===void 0?!1:xt,Rt=i.defaultVisible,Dt=i.getTooltipContainer,Nt=i.overlayInnerStyle;i.arrowContent;var Kt=i.overlay,qt=i.id,jt=i.showArrow,Zt=jt===void 0?!0:jt,Ht=_objectWithoutProperties$y(i,_excluded$A),Wt=reactExports.useRef(null);reactExports.useImperativeHandle(s,function(){return Wt.current});var Ft=_objectSpread2$1({},Ht);"visible"in i&&(Ft.popupVisible=i.visible);var Gt=function(){return reactExports.createElement(Popup,{key:"content",prefixCls:gt,id:qt,overlayInnerStyle:Nt},Kt)};return reactExports.createElement(Trigger,_extends$x({popupClassName:a,prefixCls:gt,popup:Gt,action:tt,builtinPlacements:placements,popupPlacement:wt,ref:Wt,popupAlign:At,getPopupContainer:Dt,onPopupVisibleChange:yt,afterPopupVisibleChange:St,popupTransitionName:Et,popupAnimation:vt,popupMotion:bt,defaultPopupVisible:Rt,autoDestroy:Ot,mouseLeaveDelay:ft,popupStyle:pt,mouseEnterDelay:dt,arrow:Zt},Ft),_t)};const Tooltip$3=reactExports.forwardRef(Tooltip$2);function getArrowToken(o){const{sizePopupArrow:i,borderRadiusXS:s,borderRadiusOuter:a}=o,et=i/2,tt=0,ot=et,dt=a*1/Math.sqrt(2),ht=et-a*(1-1/Math.sqrt(2)),ft=et-s*(1/Math.sqrt(2)),pt=a*(Math.sqrt(2)-1)+s*(1/Math.sqrt(2)),mt=2*et-ft,gt=pt,_t=2*et-dt,yt=ht,St=2*et-tt,Et=ot,vt=et*Math.sqrt(2)+a*(Math.sqrt(2)-2),bt=a*(Math.sqrt(2)-1),Tt=`polygon(${bt}px 100%, 50% ${bt}px, ${2*et-bt}px 100%, ${bt}px 100%)`,wt=`path('M ${tt} ${ot} A ${a} ${a} 0 0 0 ${dt} ${ht} L ${ft} ${pt} A ${s} ${s} 0 0 1 ${mt} ${gt} L ${_t} ${yt} A ${a} ${a} 0 0 0 ${St} ${Et} Z')`;return{arrowShadowWidth:vt,arrowPath:wt,arrowPolygon:Tt}}const genRoundedArrow=(o,i,s)=>{const{sizePopupArrow:a,arrowPolygon:et,arrowPath:tt,arrowShadowWidth:ot,borderRadiusXS:dt,calc:ht}=o;return{pointerEvents:"none",width:a,height:a,overflow:"hidden","&::before":{position:"absolute",bottom:0,insetInlineStart:0,width:a,height:ht(a).div(2).equal(),background:i,clipPath:{_multi_value_:!0,value:[et,tt]},content:'""'},"&::after":{content:'""',position:"absolute",width:ot,height:ot,bottom:0,insetInline:0,margin:"auto",borderRadius:{_skip_check_:!0,value:`0 0 ${unit$1(dt)} 0`},transform:"translateY(50%) rotate(-135deg)",boxShadow:s,zIndex:0,background:"transparent"}}},MAX_VERTICAL_CONTENT_RADIUS=8;function getArrowOffsetToken(o){const{contentRadius:i,limitVerticalRadius:s}=o,a=i>12?i+2:12;return{arrowOffsetHorizontal:a,arrowOffsetVertical:s?MAX_VERTICAL_CONTENT_RADIUS:a}}function isInject(o,i){return o?i:{}}function getArrowStyle(o,i,s){const{componentCls:a,boxShadowPopoverArrow:et,arrowOffsetVertical:tt,arrowOffsetHorizontal:ot}=o,{arrowDistance:dt=0,arrowPlacement:ht={left:!0,right:!0,top:!0,bottom:!0}}=s||{};return{[a]:Object.assign(Object.assign(Object.assign(Object.assign({[`${a}-arrow`]:[Object.assign(Object.assign({position:"absolute",zIndex:1,display:"block"},genRoundedArrow(o,i,et)),{"&:before":{background:i}})]},isInject(!!ht.top,{[[`&-placement-top ${a}-arrow`,`&-placement-topLeft ${a}-arrow`,`&-placement-topRight ${a}-arrow`].join(",")]:{bottom:dt,transform:"translateY(100%) rotate(180deg)"},[`&-placement-top ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(100%) rotate(180deg)"},[`&-placement-topLeft ${a}-arrow`]:{left:{_skip_check_:!0,value:ot}},[`&-placement-topRight ${a}-arrow`]:{right:{_skip_check_:!0,value:ot}}})),isInject(!!ht.bottom,{[[`&-placement-bottom ${a}-arrow`,`&-placement-bottomLeft ${a}-arrow`,`&-placement-bottomRight ${a}-arrow`].join(",")]:{top:dt,transform:"translateY(-100%)"},[`&-placement-bottom ${a}-arrow`]:{left:{_skip_check_:!0,value:"50%"},transform:"translateX(-50%) translateY(-100%)"},[`&-placement-bottomLeft ${a}-arrow`]:{left:{_skip_check_:!0,value:ot}},[`&-placement-bottomRight ${a}-arrow`]:{right:{_skip_check_:!0,value:ot}}})),isInject(!!ht.left,{[[`&-placement-left ${a}-arrow`,`&-placement-leftTop ${a}-arrow`,`&-placement-leftBottom ${a}-arrow`].join(",")]:{right:{_skip_check_:!0,value:dt},transform:"translateX(100%) rotate(90deg)"},[`&-placement-left ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(100%) rotate(90deg)"},[`&-placement-leftTop ${a}-arrow`]:{top:tt},[`&-placement-leftBottom ${a}-arrow`]:{bottom:tt}})),isInject(!!ht.right,{[[`&-placement-right ${a}-arrow`,`&-placement-rightTop ${a}-arrow`,`&-placement-rightBottom ${a}-arrow`].join(",")]:{left:{_skip_check_:!0,value:dt},transform:"translateX(-100%) rotate(-90deg)"},[`&-placement-right ${a}-arrow`]:{top:{_skip_check_:!0,value:"50%"},transform:"translateY(-50%) translateX(-100%) rotate(-90deg)"},[`&-placement-rightTop ${a}-arrow`]:{top:tt},[`&-placement-rightBottom ${a}-arrow`]:{bottom:tt}}))}}function getOverflowOptions(o,i,s,a){if(a===!1)return{adjustX:!1,adjustY:!1};const et=a&&typeof a=="object"?a:{},tt={};switch(o){case"top":case"bottom":tt.shiftX=i.arrowOffsetHorizontal*2+s,tt.shiftY=!0,tt.adjustY=!0;break;case"left":case"right":tt.shiftY=i.arrowOffsetVertical*2+s,tt.shiftX=!0,tt.adjustX=!0;break}const ot=Object.assign(Object.assign({},tt),et);return ot.shiftX||(ot.adjustX=!0),ot.shiftY||(ot.adjustY=!0),ot}const PlacementAlignMap={left:{points:["cr","cl"]},right:{points:["cl","cr"]},top:{points:["bc","tc"]},bottom:{points:["tc","bc"]},topLeft:{points:["bl","tl"]},leftTop:{points:["tr","tl"]},topRight:{points:["br","tr"]},rightTop:{points:["tl","tr"]},bottomRight:{points:["tr","br"]},rightBottom:{points:["bl","br"]},bottomLeft:{points:["tl","bl"]},leftBottom:{points:["br","bl"]}},ArrowCenterPlacementAlignMap={topLeft:{points:["bl","tc"]},leftTop:{points:["tr","cl"]},topRight:{points:["br","tc"]},rightTop:{points:["tl","cr"]},bottomRight:{points:["tr","bc"]},rightBottom:{points:["bl","cr"]},bottomLeft:{points:["tl","bc"]},leftBottom:{points:["br","cl"]}},DisableAutoArrowList=new Set(["topLeft","topRight","bottomLeft","bottomRight","leftTop","leftBottom","rightTop","rightBottom"]);function getPlacements(o){const{arrowWidth:i,autoAdjustOverflow:s,arrowPointAtCenter:a,offset:et,borderRadius:tt,visibleFirst:ot}=o,dt=i/2,ht={};return Object.keys(PlacementAlignMap).forEach(ft=>{const pt=a&&ArrowCenterPlacementAlignMap[ft]||PlacementAlignMap[ft],mt=Object.assign(Object.assign({},pt),{offset:[0,0],dynamicInset:!0});switch(ht[ft]=mt,DisableAutoArrowList.has(ft)&&(mt.autoArrow=!1),ft){case"top":case"topLeft":case"topRight":mt.offset[1]=-dt-et;break;case"bottom":case"bottomLeft":case"bottomRight":mt.offset[1]=dt+et;break;case"left":case"leftTop":case"leftBottom":mt.offset[0]=-dt-et;break;case"right":case"rightTop":case"rightBottom":mt.offset[0]=dt+et;break}const gt=getArrowOffsetToken({contentRadius:tt,limitVerticalRadius:!0});if(a)switch(ft){case"topLeft":case"bottomLeft":mt.offset[0]=-gt.arrowOffsetHorizontal-dt;break;case"topRight":case"bottomRight":mt.offset[0]=gt.arrowOffsetHorizontal+dt;break;case"leftTop":case"rightTop":mt.offset[1]=-gt.arrowOffsetHorizontal-dt;break;case"leftBottom":case"rightBottom":mt.offset[1]=gt.arrowOffsetHorizontal+dt;break}mt.overflow=getOverflowOptions(ft,gt,i,s),ot&&(mt.htmlRegion="visibleFirst")}),ht}const genTooltipStyle=o=>{const{componentCls:i,tooltipMaxWidth:s,tooltipColor:a,tooltipBg:et,tooltipBorderRadius:tt,zIndexPopup:ot,controlHeight:dt,boxShadowSecondary:ht,paddingSM:ft,paddingXS:pt}=o;return[{[i]:Object.assign(Object.assign(Object.assign(Object.assign({},resetComponent(o)),{position:"absolute",zIndex:ot,display:"block",width:"max-content",maxWidth:s,visibility:"visible",transformOrigin:"var(--arrow-x, 50%) var(--arrow-y, 50%)","&-hidden":{display:"none"},"--antd-arrow-background-color":et,[`${i}-inner`]:{minWidth:dt,minHeight:dt,padding:`${unit$1(o.calc(ft).div(2).equal())} ${unit$1(pt)}`,color:a,textAlign:"start",textDecoration:"none",wordWrap:"break-word",backgroundColor:et,borderRadius:tt,boxShadow:ht,boxSizing:"border-box"},[["&-placement-left","&-placement-leftTop","&-placement-leftBottom","&-placement-right","&-placement-rightTop","&-placement-rightBottom"].join(",")]:{[`${i}-inner`]:{borderRadius:o.min(tt,MAX_VERTICAL_CONTENT_RADIUS)}},[`${i}-content`]:{position:"relative"}}),genPresetColor(o,(mt,gt)=>{let{darkColor:_t}=gt;return{[`&${i}-${mt}`]:{[`${i}-inner`]:{backgroundColor:_t},[`${i}-arrow`]:{"--antd-arrow-background-color":_t}}}})),{"&-rtl":{direction:"rtl"}})},getArrowStyle(o,"var(--antd-arrow-background-color)"),{[`${i}-pure`]:{position:"relative",maxWidth:"none",margin:o.sizePopupArrow}}]},prepareComponentToken$2=o=>Object.assign(Object.assign({zIndexPopup:o.zIndexPopupBase+70},getArrowOffsetToken({contentRadius:o.borderRadius,limitVerticalRadius:!0})),getArrowToken(merge(o,{borderRadiusOuter:Math.min(o.borderRadiusOuter,4)}))),useStyle$2=function(o){let i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return genStyleHooks("Tooltip",a=>{const{borderRadius:et,colorTextLightSolid:tt,colorBgSpotlight:ot}=a,dt=merge(a,{tooltipMaxWidth:250,tooltipColor:tt,tooltipBorderRadius:et,tooltipBg:ot});return[genTooltipStyle(dt),initZoomMotion(a,"zoom-big-fast")]},prepareComponentToken$2,{resetStyle:!1,injectStyle:i})(o)},inverseColors=PresetColors.map(o=>`${o}-inverse`);function isPresetColor(o){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0)?[].concat(_toConsumableArray$1(inverseColors),_toConsumableArray$1(PresetColors)).includes(o):PresetColors.includes(o)}function parseColor(o,i){const s=isPresetColor(i),a=classNames({[`${o}-${i}`]:i&&s}),et={},tt={};return i&&!s&&(et.background=i,tt["--antd-arrow-background-color"]=i),{className:a,overlayStyle:et,arrowStyle:tt}}const PurePanel=o=>{const{prefixCls:i,className:s,placement:a="top",title:et,color:tt,overlayInnerStyle:ot}=o,{getPrefixCls:dt}=reactExports.useContext(ConfigContext),ht=dt("tooltip",i),[ft,pt,mt]=useStyle$2(ht),gt=parseColor(ht,tt),_t=gt.arrowStyle,yt=Object.assign(Object.assign({},ot),gt.overlayStyle),St=classNames(pt,mt,ht,`${ht}-pure`,`${ht}-placement-${a}`,s,gt.className);return ft(reactExports.createElement("div",{className:St,style:_t},reactExports.createElement("div",{className:`${ht}-arrow`}),reactExports.createElement(Popup,Object.assign({},o,{className:pt,prefixCls:ht,overlayInnerStyle:yt}),et)))},PurePanel$1=PurePanel;var __rest$5=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const Tooltip=reactExports.forwardRef((o,i)=>{var s,a;const{prefixCls:et,openClassName:tt,getTooltipContainer:ot,overlayClassName:dt,color:ht,overlayInnerStyle:ft,children:pt,afterOpenChange:mt,afterVisibleChange:gt,destroyTooltipOnHide:_t,arrow:yt=!0,title:St,overlay:Et,builtinPlacements:vt,arrowPointAtCenter:bt=!1,autoAdjustOverflow:Tt=!0}=o,wt=!!yt,[,Pt]=useToken(),{getPopupContainer:At,getPrefixCls:xt,direction:Ot}=reactExports.useContext(ConfigContext),Rt=devUseWarning(),Dt=reactExports.useRef(null),Nt=()=>{var fn;(fn=Dt.current)===null||fn===void 0||fn.forceAlign()};reactExports.useImperativeHandle(i,()=>({forceAlign:Nt,forcePopupAlign:()=>{Rt.deprecated(!1,"forcePopupAlign","forceAlign"),Nt()}}));const[Kt,qt]=useMergedState(!1,{value:(s=o.open)!==null&&s!==void 0?s:o.visible,defaultValue:(a=o.defaultOpen)!==null&&a!==void 0?a:o.defaultVisible}),jt=!St&&!Et&&St!==0,Zt=fn=>{var _n,Cn;qt(jt?!1:fn),jt||((_n=o.onOpenChange)===null||_n===void 0||_n.call(o,fn),(Cn=o.onVisibleChange)===null||Cn===void 0||Cn.call(o,fn))},Ht=reactExports.useMemo(()=>{var fn,_n;let Cn=bt;return typeof yt=="object"&&(Cn=(_n=(fn=yt.pointAtCenter)!==null&&fn!==void 0?fn:yt.arrowPointAtCenter)!==null&&_n!==void 0?_n:bt),vt||getPlacements({arrowPointAtCenter:Cn,autoAdjustOverflow:Tt,arrowWidth:wt?Pt.sizePopupArrow:0,borderRadius:Pt.borderRadius,offset:Pt.marginXXS,visibleFirst:!0})},[bt,yt,vt,Pt]),Wt=reactExports.useMemo(()=>St===0?St:Et||St||"",[Et,St]),Ft=reactExports.createElement(NoCompactStyle,null,typeof Wt=="function"?Wt():Wt),{getPopupContainer:Gt,placement:Jt="top",mouseEnterDelay:on=.1,mouseLeaveDelay:bn=.1,overlayStyle:Ut,rootClassName:It}=o,Mt=__rest$5(o,["getPopupContainer","placement","mouseEnterDelay","mouseLeaveDelay","overlayStyle","rootClassName"]),$t=xt("tooltip",et),Lt=xt(),Vt=o["data-popover-inject"];let zt=Kt;!("open"in o)&&!("visible"in o)&&jt&&(zt=!1);const Xt=isValidElement(pt)&&!isFragment(pt)?pt:reactExports.createElement("span",null,pt),Yt=Xt.props,un=!Yt.className||typeof Yt.className=="string"?classNames(Yt.className,tt||`${$t}-open`):Yt.className,[gn,yn,Tn]=useStyle$2($t,!Vt),Rn=parseColor($t,ht),Sn=Rn.arrowStyle,Fn=Object.assign(Object.assign({},ft),Rn.overlayStyle),Dn=classNames(dt,{[`${$t}-rtl`]:Ot==="rtl"},Rn.className,It,yn,Tn),[xn,On]=useZIndex("Tooltip",Mt.zIndex),wn=reactExports.createElement(Tooltip$3,Object.assign({},Mt,{zIndex:xn,showArrow:wt,placement:Jt,mouseEnterDelay:on,mouseLeaveDelay:bn,prefixCls:$t,overlayClassName:Dn,overlayStyle:Object.assign(Object.assign({},Sn),Ut),getTooltipContainer:Gt||ot||At,ref:Dt,builtinPlacements:Ht,overlay:Ft,visible:zt,onVisibleChange:Zt,afterVisibleChange:mt??gt,overlayInnerStyle:Fn,arrowContent:reactExports.createElement("span",{className:`${$t}-arrow-content`}),motion:{motionName:getTransitionName(Lt,"zoom-big-fast",o.transitionName),motionDeadline:1e3},destroyTooltipOnHide:!!_t}),zt?cloneElement(Xt,{className:un}):Xt);return gn(reactExports.createElement(zIndexContext$1.Provider,{value:On},wn))});Tooltip._InternalPanelDoNotUseOrYouWillBeFired=PurePanel$1;const Tooltip$1=Tooltip;let message=null,act=o=>o(),taskQueue=[],defaultGlobalConfig={};function getGlobalContext(){const{prefixCls:o,getContainer:i,duration:s,rtl:a,maxCount:et,top:tt}=defaultGlobalConfig,ot=o??globalConfig().getPrefixCls("message"),dt=(i==null?void 0:i())||document.body;return{prefixCls:ot,getContainer:()=>dt,duration:s,rtl:a,maxCount:et,top:tt}}const GlobalHolder=reactExports.forwardRef((o,i)=>{const[s,a]=reactExports.useState(getGlobalContext),[et,tt]=useInternalMessage(s),ot=globalConfig(),dt=ot.getRootPrefixCls(),ht=ot.getIconPrefixCls(),ft=ot.getTheme(),pt=()=>{a(getGlobalContext)};return reactExports.useEffect(pt,[]),reactExports.useImperativeHandle(i,()=>{const mt=Object.assign({},et);return Object.keys(mt).forEach(gt=>{mt[gt]=function(){return pt(),et[gt].apply(et,arguments)}}),{instance:mt,sync:pt}}),reactExports.createElement(ConfigProvider,{prefixCls:dt,iconPrefixCls:ht,theme:ft},tt)});function flushNotice(){if(!message){const o=document.createDocumentFragment(),i={fragment:o};message=i,act(()=>{render(reactExports.createElement(GlobalHolder,{ref:s=>{const{instance:a,sync:et}=s||{};Promise.resolve().then(()=>{!i.instance&&a&&(i.instance=a,i.sync=et,flushNotice())})}}),o)});return}message.instance&&(taskQueue.forEach(o=>{const{type:i,skipped:s}=o;if(!s)switch(i){case"open":{act(()=>{const a=message.instance.open(Object.assign(Object.assign({},defaultGlobalConfig),o.config));a==null||a.then(o.resolve),o.setCloseFn(a)});break}case"destroy":act(()=>{message==null||message.instance.destroy(o.key)});break;default:act(()=>{var a;const et=(a=message.instance)[i].apply(a,_toConsumableArray$1(o.args));et==null||et.then(o.resolve),o.setCloseFn(et)})}}),taskQueue=[])}function setMessageGlobalConfig(o){defaultGlobalConfig=Object.assign(Object.assign({},defaultGlobalConfig),o),act(()=>{var i;(i=message==null?void 0:message.sync)===null||i===void 0||i.call(message)})}function open(o){const i=wrapPromiseFn(s=>{let a;const et={type:"open",config:o,resolve:s,setCloseFn:tt=>{a=tt}};return taskQueue.push(et),()=>{a?act(()=>{a()}):et.skipped=!0}});return flushNotice(),i}function typeOpen(o,i){const s=wrapPromiseFn(a=>{let et;const tt={type:o,args:i,resolve:a,setCloseFn:ot=>{et=ot}};return taskQueue.push(tt),()=>{et?act(()=>{et()}):tt.skipped=!0}});return flushNotice(),s}function destroy(o){taskQueue.push({type:"destroy",key:o}),flushNotice()}const methods=["success","info","warning","error","loading"],baseStaticMethods={open,destroy,config:setMessageGlobalConfig,useMessage,_InternalPanelDoNotUseOrYouWillBeFired:PurePanel$3},staticMethods=baseStaticMethods;methods.forEach(o=>{staticMethods[o]=function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];return typeOpen(o,s)}});const message$1=staticMethods;var defaultProps={percent:0,prefixCls:"rc-progress",strokeColor:"#2db7f5",strokeLinecap:"round",strokeWidth:1,trailColor:"#D9D9D9",trailWidth:1,gapPosition:"bottom"},useTransitionDuration=function(){var i=reactExports.useRef([]),s=reactExports.useRef(null);return reactExports.useEffect(function(){var a=Date.now(),et=!1;i.current.forEach(function(tt){if(tt){et=!0;var ot=tt.style;ot.transitionDuration=".3s, .3s, .3s, .06s",s.current&&a-s.current<100&&(ot.transitionDuration="0s, 0s")}}),et&&(s.current=Date.now())}),i.current},uuid=0,isBrowserClient=canUseDom();function getUUID(){var o;return isBrowserClient?(o=uuid,uuid+=1):o="TEST_OR_SSR",o}const useId=function(o){var i=reactExports.useState(),s=_slicedToArray$8(i,2),a=s[0],et=s[1];return reactExports.useEffect(function(){et("rc_progress_".concat(getUUID()))},[]),o||a};var Block=function(i){var s=i.bg,a=i.children;return reactExports.createElement("div",{style:{width:"100%",height:"100%",background:s}},a)};function getPtgColors(o,i){return Object.keys(o).map(function(s){var a=parseFloat(s),et="".concat(Math.floor(a*i),"%");return"".concat(o[s]," ").concat(et)})}var PtgCircle=reactExports.forwardRef(function(o,i){var s=o.prefixCls,a=o.color,et=o.gradientId,tt=o.radius,ot=o.style,dt=o.ptg,ht=o.strokeLinecap,ft=o.strokeWidth,pt=o.size,mt=o.gapDegree,gt=a&&_typeof$i(a)==="object",_t=gt?"#FFF":void 0,yt=pt/2,St=reactExports.createElement("circle",{className:"".concat(s,"-circle-path"),r:tt,cx:yt,cy:yt,stroke:_t,strokeLinecap:ht,strokeWidth:ft,opacity:dt===0?0:1,style:ot,ref:i});if(!gt)return St;var Et="".concat(et,"-conic"),vt=mt?"".concat(180+mt/2,"deg"):"0deg",bt=getPtgColors(a,(360-mt)/360),Tt=getPtgColors(a,1),wt="conic-gradient(from ".concat(vt,", ").concat(bt.join(", "),")"),Pt="linear-gradient(to ".concat(mt?"bottom":"top",", ").concat(Tt.join(", "),")");return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("mask",{id:Et},St),reactExports.createElement("foreignObject",{x:0,y:0,width:pt,height:pt,mask:"url(#".concat(Et,")")},reactExports.createElement(Block,{bg:Pt},reactExports.createElement(Block,{bg:wt}))))}),VIEW_BOX_SIZE=100,getCircleStyle=function(i,s,a,et,tt,ot,dt,ht,ft,pt){var mt=arguments.length>10&&arguments[10]!==void 0?arguments[10]:0,gt=a/100*360*((360-ot)/360),_t=ot===0?0:{bottom:0,top:180,left:90,right:-90}[dt],yt=(100-et)/100*s;ft==="round"&&et!==100&&(yt+=pt/2,yt>=s&&(yt=s-.01));var St=VIEW_BOX_SIZE/2;return{stroke:typeof ht=="string"?ht:void 0,strokeDasharray:"".concat(s,"px ").concat(i),strokeDashoffset:yt+mt,transform:"rotate(".concat(tt+gt+_t,"deg)"),transformOrigin:"".concat(St,"px ").concat(St,"px"),transition:"stroke-dashoffset .3s ease 0s, stroke-dasharray .3s ease 0s, stroke .3s, stroke-width .06s ease .3s, opacity .3s ease 0s",fillOpacity:0}},_excluded$z=["id","prefixCls","steps","strokeWidth","trailWidth","gapDegree","gapPosition","trailColor","strokeLinecap","style","className","strokeColor","percent"];function toArray(o){var i=o??[];return Array.isArray(i)?i:[i]}var Circle$2=function(i){var s=_objectSpread2$1(_objectSpread2$1({},defaultProps),i),a=s.id,et=s.prefixCls,tt=s.steps,ot=s.strokeWidth,dt=s.trailWidth,ht=s.gapDegree,ft=ht===void 0?0:ht,pt=s.gapPosition,mt=s.trailColor,gt=s.strokeLinecap,_t=s.style,yt=s.className,St=s.strokeColor,Et=s.percent,vt=_objectWithoutProperties$y(s,_excluded$z),bt=VIEW_BOX_SIZE/2,Tt=useId(a),wt="".concat(Tt,"-gradient"),Pt=bt-ot/2,At=Math.PI*2*Pt,xt=ft>0?90+ft/2:-90,Ot=At*((360-ft)/360),Rt=_typeof$i(tt)==="object"?tt:{count:tt,space:2},Dt=Rt.count,Nt=Rt.space,Kt=toArray(Et),qt=toArray(St),jt=qt.find(function(on){return on&&_typeof$i(on)==="object"}),Zt=jt&&_typeof$i(jt)==="object",Ht=Zt?"butt":gt,Wt=getCircleStyle(At,Ot,0,100,xt,ft,pt,mt,Ht,ot),Ft=useTransitionDuration(),Gt=function(){var bn=0;return Kt.map(function(Ut,It){var Mt=qt[It]||qt[qt.length-1],$t=getCircleStyle(At,Ot,bn,Ut,xt,ft,pt,Mt,Ht,ot);return bn+=Ut,reactExports.createElement(PtgCircle,{key:It,color:Mt,ptg:Ut,radius:Pt,prefixCls:et,gradientId:wt,style:$t,strokeLinecap:Ht,strokeWidth:ot,gapDegree:ft,ref:function(Vt){Ft[It]=Vt},size:VIEW_BOX_SIZE})}).reverse()},Jt=function(){var bn=Math.round(Dt*(Kt[0]/100)),Ut=100/Dt,It=0;return new Array(Dt).fill(null).map(function(Mt,$t){var Lt=$t<=bn-1?qt[0]:mt,Vt=Lt&&_typeof$i(Lt)==="object"?"url(#".concat(wt,")"):void 0,zt=getCircleStyle(At,Ot,It,Ut,xt,ft,pt,Lt,"butt",ot,Nt);return It+=(Ot-zt.strokeDashoffset+Nt)*100/Ot,reactExports.createElement("circle",{key:$t,className:"".concat(et,"-circle-path"),r:Pt,cx:bt,cy:bt,stroke:Vt,strokeWidth:ot,opacity:1,style:zt,ref:function(Yt){Ft[$t]=Yt}})})};return reactExports.createElement("svg",_extends$x({className:classNames("".concat(et,"-circle"),yt),viewBox:"0 0 ".concat(VIEW_BOX_SIZE," ").concat(VIEW_BOX_SIZE),style:_t,id:a,role:"presentation"},vt),!Dt&&reactExports.createElement("circle",{className:"".concat(et,"-circle-trail"),r:Pt,cx:bt,cy:bt,stroke:mt,strokeLinecap:Ht,strokeWidth:dt||ot,style:Wt}),Dt?Jt():Gt())};function validProgress(o){return!o||o<0?0:o>100?100:o}function getSuccessPercent(o){let{success:i,successPercent:s}=o,a=s;return i&&"progress"in i&&(a=i.progress),i&&"percent"in i&&(a=i.percent),a}const getPercentage=o=>{let{percent:i,success:s,successPercent:a}=o;const et=validProgress(getSuccessPercent({success:s,successPercent:a}));return[et,validProgress(validProgress(i)-et)]},getStrokeColor=o=>{let{success:i={},strokeColor:s}=o;const{strokeColor:a}=i;return[a||presetPrimaryColors.green,s||null]},getSize=(o,i,s)=>{var a,et,tt,ot;let dt=-1,ht=-1;if(i==="step"){const ft=s.steps,pt=s.strokeWidth;typeof o=="string"||typeof o>"u"?(dt=o==="small"?2:14,ht=pt??8):typeof o=="number"?[dt,ht]=[o,o]:[dt=14,ht=8]=o,dt*=ft}else if(i==="line"){const ft=s==null?void 0:s.strokeWidth;typeof o=="string"||typeof o>"u"?ht=ft||(o==="small"?6:8):typeof o=="number"?[dt,ht]=[o,o]:[dt=-1,ht=8]=o}else(i==="circle"||i==="dashboard")&&(typeof o=="string"||typeof o>"u"?[dt,ht]=o==="small"?[60,60]:[120,120]:typeof o=="number"?[dt,ht]=[o,o]:(dt=(et=(a=o[0])!==null&&a!==void 0?a:o[1])!==null&&et!==void 0?et:120,ht=(ot=(tt=o[0])!==null&&tt!==void 0?tt:o[1])!==null&&ot!==void 0?ot:120));return[dt,ht]},CIRCLE_MIN_STROKE_WIDTH=3,getMinPercent=o=>CIRCLE_MIN_STROKE_WIDTH/o*100,Circle=o=>{const{prefixCls:i,trailColor:s=null,strokeLinecap:a="round",gapPosition:et,gapDegree:tt,width:ot=120,type:dt,children:ht,success:ft,size:pt=ot}=o,[mt,gt]=getSize(pt,"circle");let{strokeWidth:_t}=o;_t===void 0&&(_t=Math.max(getMinPercent(mt),6));const yt={width:mt,height:gt,fontSize:mt*.15+6},St=reactExports.useMemo(()=>{if(tt||tt===0)return tt;if(dt==="dashboard")return 75},[tt,dt]),Et=et||dt==="dashboard"&&"bottom"||void 0,vt=Object.prototype.toString.call(o.strokeColor)==="[object Object]",bt=getStrokeColor({success:ft,strokeColor:o.strokeColor}),Tt=classNames(`${i}-inner`,{[`${i}-circle-gradient`]:vt}),wt=reactExports.createElement(Circle$2,{percent:getPercentage(o),strokeWidth:_t,trailWidth:_t,strokeColor:bt,strokeLinecap:a,trailColor:s,prefixCls:i,gapDegree:St,gapPosition:Et});return reactExports.createElement("div",{className:Tt,style:yt},mt<=20?reactExports.createElement(Tooltip$1,{title:ht},reactExports.createElement("span",null,wt)):reactExports.createElement(reactExports.Fragment,null,wt,ht))},Circle$1=Circle;var __rest$4=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const sortGradient=o=>{let i=[];return Object.keys(o).forEach(s=>{const a=parseFloat(s.replace(/%/g,""));isNaN(a)||i.push({key:a,value:o[s]})}),i=i.sort((s,a)=>s.key-a.key),i.map(s=>{let{key:a,value:et}=s;return`${et} ${a}%`}).join(", ")},handleGradient=(o,i)=>{const{from:s=presetPrimaryColors.blue,to:a=presetPrimaryColors.blue,direction:et=i==="rtl"?"to left":"to right"}=o,tt=__rest$4(o,["from","to","direction"]);if(Object.keys(tt).length!==0){const ot=sortGradient(tt);return{backgroundImage:`linear-gradient(${et}, ${ot})`}}return{backgroundImage:`linear-gradient(${et}, ${s}, ${a})`}},Line=o=>{const{prefixCls:i,direction:s,percent:a,size:et,strokeWidth:tt,strokeColor:ot,strokeLinecap:dt="round",children:ht,trailColor:ft=null,success:pt}=o,{direction:mt}=reactExports.useContext(ConfigContext),gt=ot&&typeof ot!="string"?handleGradient(ot,s):{backgroundColor:ot},_t=dt==="square"||dt==="butt"?0:void 0,yt={backgroundColor:ft||void 0,borderRadius:_t},St=et??[-1,tt||(et==="small"?6:8)],[Et,vt]=getSize(St,"line",{strokeWidth:tt}),bt=dt==="square"||dt==="butt"?0:"100px",Tt=Object.assign({width:"100%",height:vt,borderRadius:_t,clipPath:mt==="rtl"?`inset(0 0 0 ${100-validProgress(a)}% round ${bt})`:`inset(0 ${100-validProgress(a)}% 0 0 round ${bt})`},gt),wt=getSuccessPercent(o),Pt={width:"100%",height:vt,borderRadius:_t,clipPath:mt==="rtl"?`inset(0 0 0 ${100-validProgress(wt)}% round ${bt})`:`inset(0 ${100-validProgress(wt)}% 0 0 round ${bt})`,backgroundColor:pt==null?void 0:pt.strokeColor},At={width:Et<0?"100%":Et,height:vt};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("div",{className:`${i}-outer`,style:At},reactExports.createElement("div",{className:`${i}-inner`,style:yt},reactExports.createElement("div",{className:`${i}-bg`,style:Tt}),wt!==void 0?reactExports.createElement("div",{className:`${i}-success-bg`,style:Pt}):null)),ht)},Line$1=Line,Steps=o=>{const{size:i,steps:s,percent:a=0,strokeWidth:et=8,strokeColor:tt,trailColor:ot=null,prefixCls:dt,children:ht}=o,ft=Math.round(s*(a/100)),mt=i??[i==="small"?2:14,et],[gt,_t]=getSize(mt,"step",{steps:s,strokeWidth:et}),yt=gt/s,St=new Array(s);for(let Et=0;Et<s;Et++){const vt=Array.isArray(tt)?tt[Et]:tt;St[Et]=reactExports.createElement("div",{key:Et,className:classNames(`${dt}-steps-item`,{[`${dt}-steps-item-active`]:Et<=ft-1}),style:{backgroundColor:Et<=ft-1?vt:ot,width:yt,height:_t}})}return reactExports.createElement("div",{className:`${dt}-steps-outer`},St,ht)},Steps$1=Steps,genAntProgressActive=o=>{const i=o?"100%":"-100%";return new Keyframe(`antProgress${o?"RTL":"LTR"}Active`,{"0%":{transform:`translateX(${i}) scaleX(0)`,opacity:.1},"20%":{transform:`translateX(${i}) scaleX(0)`,opacity:.5},to:{transform:"translateX(0) scaleX(1)",opacity:0}})},genBaseStyle$1=o=>{const{componentCls:i,iconCls:s}=o;return{[i]:Object.assign(Object.assign({},resetComponent(o)),{display:"inline-block","&-rtl":{direction:"rtl"},"&-line":{position:"relative",width:"100%",fontSize:o.fontSize,marginInlineEnd:o.marginXS,marginBottom:o.marginXS},[`${i}-outer`]:{display:"inline-block",width:"100%"},[`&${i}-show-info`]:{[`${i}-outer`]:{marginInlineEnd:`calc(-2em - ${unit$1(o.marginXS)})`,paddingInlineEnd:`calc(2em + ${unit$1(o.paddingXS)})`}},[`${i}-inner`]:{position:"relative",display:"inline-block",width:"100%",overflow:"hidden",verticalAlign:"middle",backgroundColor:o.remainingColor,borderRadius:o.lineBorderRadius},[`${i}-inner:not(${i}-circle-gradient)`]:{[`${i}-circle-path`]:{stroke:o.defaultColor}},[`${i}-success-bg, ${i}-bg`]:{position:"relative",backgroundColor:o.defaultColor,borderRadius:o.lineBorderRadius,transition:`all ${o.motionDurationSlow} ${o.motionEaseInOutCirc}`},[`${i}-success-bg`]:{position:"absolute",insetBlockStart:0,insetInlineStart:0,backgroundColor:o.colorSuccess},[`${i}-text`]:{display:"inline-block",width:"2em",marginInlineStart:o.marginXS,color:o.colorText,lineHeight:1,whiteSpace:"nowrap",textAlign:"start",verticalAlign:"middle",wordBreak:"normal",[s]:{fontSize:o.fontSize}},[`&${i}-status-active`]:{[`${i}-bg::before`]:{position:"absolute",inset:0,backgroundColor:o.colorBgContainer,borderRadius:o.lineBorderRadius,opacity:0,animationName:genAntProgressActive(),animationDuration:o.progressActiveMotionDuration,animationTimingFunction:o.motionEaseOutQuint,animationIterationCount:"infinite",content:'""'}},[`&${i}-rtl${i}-status-active`]:{[`${i}-bg::before`]:{animationName:genAntProgressActive(!0)}},[`&${i}-status-exception`]:{[`${i}-bg`]:{backgroundColor:o.colorError},[`${i}-text`]:{color:o.colorError}},[`&${i}-status-exception ${i}-inner:not(${i}-circle-gradient)`]:{[`${i}-circle-path`]:{stroke:o.colorError}},[`&${i}-status-success`]:{[`${i}-bg`]:{backgroundColor:o.colorSuccess},[`${i}-text`]:{color:o.colorSuccess}},[`&${i}-status-success ${i}-inner:not(${i}-circle-gradient)`]:{[`${i}-circle-path`]:{stroke:o.colorSuccess}}})}},genCircleStyle=o=>{const{componentCls:i,iconCls:s}=o;return{[i]:{[`${i}-circle-trail`]:{stroke:o.remainingColor},[`&${i}-circle ${i}-inner`]:{position:"relative",lineHeight:1,backgroundColor:"transparent"},[`&${i}-circle ${i}-text`]:{position:"absolute",insetBlockStart:"50%",insetInlineStart:0,width:"100%",margin:0,padding:0,color:o.circleTextColor,fontSize:o.circleTextFontSize,lineHeight:1,whiteSpace:"normal",textAlign:"center",transform:"translateY(-50%)",[s]:{fontSize:o.circleIconFontSize}},[`${i}-circle&-status-exception`]:{[`${i}-text`]:{color:o.colorError}},[`${i}-circle&-status-success`]:{[`${i}-text`]:{color:o.colorSuccess}}},[`${i}-inline-circle`]:{lineHeight:1,[`${i}-inner`]:{verticalAlign:"bottom"}}}},genStepStyle=o=>{const{componentCls:i}=o;return{[i]:{[`${i}-steps`]:{display:"inline-block","&-outer":{display:"flex",flexDirection:"row",alignItems:"center"},"&-item":{flexShrink:0,minWidth:o.progressStepMinWidth,marginInlineEnd:o.progressStepMarginInlineEnd,backgroundColor:o.remainingColor,transition:`all ${o.motionDurationSlow}`,"&-active":{backgroundColor:o.defaultColor}}}}}},genSmallLine=o=>{const{componentCls:i,iconCls:s}=o;return{[i]:{[`${i}-small&-line, ${i}-small&-line ${i}-text ${s}`]:{fontSize:o.fontSizeSM}}}},prepareComponentToken$1=o=>({circleTextColor:o.colorText,defaultColor:o.colorInfo,remainingColor:o.colorFillSecondary,lineBorderRadius:100,circleTextFontSize:"1em",circleIconFontSize:`${o.fontSize/o.fontSizeSM}em`}),useStyle$1=genStyleHooks("Progress",o=>{const i=o.calc(o.marginXXS).div(2).equal(),s=merge(o,{progressStepMarginInlineEnd:i,progressStepMinWidth:i,progressActiveMotionDuration:"2.4s"});return[genBaseStyle$1(s),genCircleStyle(s),genStepStyle(s),genSmallLine(s)]},prepareComponentToken$1);var __rest$3=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const ProgressStatuses=["normal","exception","active","success"],Progress=reactExports.forwardRef((o,i)=>{const{prefixCls:s,className:a,rootClassName:et,steps:tt,strokeColor:ot,percent:dt=0,size:ht="default",showInfo:ft=!0,type:pt="line",status:mt,format:gt,style:_t}=o,yt=__rest$3(o,["prefixCls","className","rootClassName","steps","strokeColor","percent","size","showInfo","type","status","format","style"]),St=reactExports.useMemo(()=>{var qt,jt;const Zt=getSuccessPercent(o);return parseInt(Zt!==void 0?(qt=Zt??0)===null||qt===void 0?void 0:qt.toString():(jt=dt??0)===null||jt===void 0?void 0:jt.toString(),10)},[dt,o.success,o.successPercent]),Et=reactExports.useMemo(()=>!ProgressStatuses.includes(mt)&&St>=100?"success":mt||"normal",[mt,St]),{getPrefixCls:vt,direction:bt,progress:Tt}=reactExports.useContext(ConfigContext),wt=vt("progress",s),[Pt,At,xt]=useStyle$1(wt),Ot=reactExports.useMemo(()=>{if(!ft)return null;const qt=getSuccessPercent(o);let jt;const Zt=gt||(Wt=>`${Wt}%`),Ht=pt==="line";return gt||Et!=="exception"&&Et!=="success"?jt=Zt(validProgress(dt),validProgress(qt)):Et==="exception"?jt=Ht?reactExports.createElement(CloseCircleFilled$1,null):reactExports.createElement(CloseOutlined$1,null):Et==="success"&&(jt=Ht?reactExports.createElement(CheckCircleFilled$1,null):reactExports.createElement(CheckOutlined$1,null)),reactExports.createElement("span",{className:`${wt}-text`,title:typeof jt=="string"?jt:void 0},jt)},[ft,dt,St,Et,pt,wt,gt]),Rt=Array.isArray(ot)?ot[0]:ot,Dt=typeof ot=="string"||Array.isArray(ot)?ot:void 0;let Nt;pt==="line"?Nt=tt?reactExports.createElement(Steps$1,Object.assign({},o,{strokeColor:Dt,prefixCls:wt,steps:tt}),Ot):reactExports.createElement(Line$1,Object.assign({},o,{strokeColor:Rt,prefixCls:wt,direction:bt}),Ot):(pt==="circle"||pt==="dashboard")&&(Nt=reactExports.createElement(Circle$1,Object.assign({},o,{strokeColor:Rt,prefixCls:wt,progressStatus:Et}),Ot));const Kt=classNames(wt,`${wt}-status-${Et}`,`${wt}-${pt==="dashboard"&&"circle"||tt&&"steps"||pt}`,{[`${wt}-inline-circle`]:pt==="circle"&&getSize(ht,"circle")[0]<=20,[`${wt}-show-info`]:ft,[`${wt}-${ht}`]:typeof ht=="string",[`${wt}-rtl`]:bt==="rtl"},Tt==null?void 0:Tt.className,a,et,At,xt);return Pt(reactExports.createElement("div",Object.assign({ref:i,style:Object.assign(Object.assign({},Tt==null?void 0:Tt.style),_t),className:Kt,role:"progressbar","aria-valuenow":St},omit(yt,["trailColor","strokeWidth","width","gapDegree","gapPosition","strokeLinecap","success","successPercent"])),Nt))}),Progress$1=Progress;function getError(o,i){var s="cannot ".concat(o.method," ").concat(o.action," ").concat(i.status,"'"),a=new Error(s);return a.status=i.status,a.method=o.method,a.url=o.action,a}function getBody(o){var i=o.responseText||o.response;if(!i)return i;try{return JSON.parse(i)}catch{return i}}function upload(o){var i=new XMLHttpRequest;o.onProgress&&i.upload&&(i.upload.onprogress=function(tt){tt.total>0&&(tt.percent=tt.loaded/tt.total*100),o.onProgress(tt)});var s=new FormData;o.data&&Object.keys(o.data).forEach(function(et){var tt=o.data[et];if(Array.isArray(tt)){tt.forEach(function(ot){s.append("".concat(et,"[]"),ot)});return}s.append(et,tt)}),o.file instanceof Blob?s.append(o.filename,o.file,o.file.name):s.append(o.filename,o.file),i.onerror=function(tt){o.onError(tt)},i.onload=function(){return i.status<200||i.status>=300?o.onError(getError(o,i),getBody(i)):o.onSuccess(getBody(i),i)},i.open(o.method,o.action,!0),o.withCredentials&&"withCredentials"in i&&(i.withCredentials=!0);var a=o.headers||{};return a["X-Requested-With"]!==null&&i.setRequestHeader("X-Requested-With","XMLHttpRequest"),Object.keys(a).forEach(function(et){a[et]!==null&&i.setRequestHeader(et,a[et])}),i.send(s),{abort:function(){i.abort()}}}var now=+new Date,index=0;function uid(){return"rc-upload-".concat(now,"-").concat(++index)}const attrAccept=function(o,i){if(o&&i){var s=Array.isArray(i)?i:i.split(","),a=o.name||"",et=o.type||"",tt=et.replace(/\/.*$/,"");return s.some(function(ot){var dt=ot.trim();if(/^\*(\/\*)?$/.test(ot))return!0;if(dt.charAt(0)==="."){var ht=a.toLowerCase(),ft=dt.toLowerCase(),pt=[ft];return(ft===".jpg"||ft===".jpeg")&&(pt=[".jpg",".jpeg"]),pt.some(function(mt){return ht.endsWith(mt)})}return/\/\*$/.test(dt)?tt===dt.replace(/\/.*$/,""):et===dt?!0:/^\w+$/.test(dt)?(warningOnce(!1,"Upload takes an invalidate 'accept' type '".concat(dt,"'.Skip for check.")),!0):!1})}return!0};function loopFiles(o,i){var s=o.createReader(),a=[];function et(){s.readEntries(function(tt){var ot=Array.prototype.slice.apply(tt);a=a.concat(ot);var dt=!ot.length;dt?i(a):et()})}et()}var traverseFileTree=function(i,s,a){var et=function tt(ot,dt){ot&&(ot.path=dt||"",ot.isFile?ot.file(function(ht){a(ht)&&(ot.fullPath&&!ht.webkitRelativePath&&(Object.defineProperties(ht,{webkitRelativePath:{writable:!0}}),ht.webkitRelativePath=ot.fullPath.replace(/^\//,""),Object.defineProperties(ht,{webkitRelativePath:{writable:!1}})),s([ht]))}):ot.isDirectory&&loopFiles(ot,function(ht){ht.forEach(function(ft){tt(ft,"".concat(dt).concat(ot.name,"/"))})}))};i.forEach(function(tt){et(tt.webkitGetAsEntry())})},_excluded$y=["component","prefixCls","className","disabled","id","style","multiple","accept","capture","children","directory","openFileDialogOnClick","onMouseEnter","onMouseLeave"],AjaxUploader=function(o){_inherits$4(s,o);var i=_createSuper$4(s);function s(){var a;_classCallCheck$5(this,s);for(var et=arguments.length,tt=new Array(et),ot=0;ot<et;ot++)tt[ot]=arguments[ot];return a=i.call.apply(i,[this].concat(tt)),a.state={uid:uid()},a.reqs={},a.fileInput=void 0,a._isMounted=void 0,a.onChange=function(dt){var ht=a.props,ft=ht.accept,pt=ht.directory,mt=dt.target.files,gt=_toConsumableArray$1(mt).filter(function(_t){return!pt||attrAccept(_t,ft)});a.uploadFiles(gt),a.reset()},a.onClick=function(dt){var ht=a.fileInput;if(ht){var ft=dt.target,pt=a.props.onClick;if(ft&&ft.tagName==="BUTTON"){var mt=ht.parentNode;mt.focus(),ft.blur()}ht.click(),pt&&pt(dt)}},a.onKeyDown=function(dt){dt.key==="Enter"&&a.onClick(dt)},a.onFileDrop=function(dt){var ht=a.props.multiple;if(dt.preventDefault(),dt.type!=="dragover")if(a.props.directory)traverseFileTree(Array.prototype.slice.call(dt.dataTransfer.items),a.uploadFiles,function(pt){return attrAccept(pt,a.props.accept)});else{var ft=_toConsumableArray$1(dt.dataTransfer.files).filter(function(pt){return attrAccept(pt,a.props.accept)});ht===!1&&(ft=ft.slice(0,1)),a.uploadFiles(ft)}},a.uploadFiles=function(dt){var ht=_toConsumableArray$1(dt),ft=ht.map(function(pt){return pt.uid=uid(),a.processFile(pt,ht)});Promise.all(ft).then(function(pt){var mt=a.props.onBatchStart;mt==null||mt(pt.map(function(gt){var _t=gt.origin,yt=gt.parsedFile;return{file:_t,parsedFile:yt}})),pt.filter(function(gt){return gt.parsedFile!==null}).forEach(function(gt){a.post(gt)})})},a.processFile=function(){var dt=_asyncToGenerator(_regeneratorRuntime().mark(function ht(ft,pt){var mt,gt,_t,yt,St,Et,vt,bt,Tt;return _regeneratorRuntime().wrap(function(Pt){for(;;)switch(Pt.prev=Pt.next){case 0:if(mt=a.props.beforeUpload,gt=ft,!mt){Pt.next=14;break}return Pt.prev=3,Pt.next=6,mt(ft,pt);case 6:gt=Pt.sent,Pt.next=12;break;case 9:Pt.prev=9,Pt.t0=Pt.catch(3),gt=!1;case 12:if(gt!==!1){Pt.next=14;break}return Pt.abrupt("return",{origin:ft,parsedFile:null,action:null,data:null});case 14:if(_t=a.props.action,typeof _t!="function"){Pt.next=21;break}return Pt.next=18,_t(ft);case 18:yt=Pt.sent,Pt.next=22;break;case 21:yt=_t;case 22:if(St=a.props.data,typeof St!="function"){Pt.next=29;break}return Pt.next=26,St(ft);case 26:Et=Pt.sent,Pt.next=30;break;case 29:Et=St;case 30:return vt=(_typeof$i(gt)==="object"||typeof gt=="string")&&gt?gt:ft,vt instanceof File?bt=vt:bt=new File([vt],ft.name,{type:ft.type}),Tt=bt,Tt.uid=ft.uid,Pt.abrupt("return",{origin:ft,data:Et,parsedFile:Tt,action:yt});case 35:case"end":return Pt.stop()}},ht,null,[[3,9]])}));return function(ht,ft){return dt.apply(this,arguments)}}(),a.saveFileInput=function(dt){a.fileInput=dt},a}return _createClass$5(s,[{key:"componentDidMount",value:function(){this._isMounted=!0}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.abort()}},{key:"post",value:function(et){var tt=this,ot=et.data,dt=et.origin,ht=et.action,ft=et.parsedFile;if(this._isMounted){var pt=this.props,mt=pt.onStart,gt=pt.customRequest,_t=pt.name,yt=pt.headers,St=pt.withCredentials,Et=pt.method,vt=dt.uid,bt=gt||upload,Tt={action:ht,filename:_t,data:ot,file:ft,headers:yt,withCredentials:St,method:Et||"post",onProgress:function(Pt){var At=tt.props.onProgress;At==null||At(Pt,ft)},onSuccess:function(Pt,At){var xt=tt.props.onSuccess;xt==null||xt(Pt,ft,At),delete tt.reqs[vt]},onError:function(Pt,At){var xt=tt.props.onError;xt==null||xt(Pt,At,ft),delete tt.reqs[vt]}};mt(dt),this.reqs[vt]=bt(Tt)}}},{key:"reset",value:function(){this.setState({uid:uid()})}},{key:"abort",value:function(et){var tt=this.reqs;if(et){var ot=et.uid?et.uid:et;tt[ot]&&tt[ot].abort&&tt[ot].abort(),delete tt[ot]}else Object.keys(tt).forEach(function(dt){tt[dt]&&tt[dt].abort&&tt[dt].abort(),delete tt[dt]})}},{key:"render",value:function(){var et=this.props,tt=et.component,ot=et.prefixCls,dt=et.className,ht=et.disabled,ft=et.id,pt=et.style,mt=et.multiple,gt=et.accept,_t=et.capture,yt=et.children,St=et.directory,Et=et.openFileDialogOnClick,vt=et.onMouseEnter,bt=et.onMouseLeave,Tt=_objectWithoutProperties$y(et,_excluded$y),wt=classNames(_defineProperty$g(_defineProperty$g(_defineProperty$g({},ot,!0),"".concat(ot,"-disabled"),ht),dt,dt)),Pt=St?{directory:"directory",webkitdirectory:"webkitdirectory"}:{},At=ht?{}:{onClick:Et?this.onClick:function(){},onKeyDown:Et?this.onKeyDown:function(){},onMouseEnter:vt,onMouseLeave:bt,onDrop:this.onFileDrop,onDragOver:this.onFileDrop,tabIndex:"0"};return React.createElement(tt,_extends$x({},At,{className:wt,role:"button",style:pt}),React.createElement("input",_extends$x({},pickAttrs(Tt,{aria:!0,data:!0}),{id:ft,disabled:ht,type:"file",ref:this.saveFileInput,onClick:function(Ot){return Ot.stopPropagation()},key:this.state.uid,style:{display:"none"},accept:gt},Pt,{multiple:mt,onChange:this.onChange},_t!=null?{capture:_t}:{})),yt)}}]),s}(reactExports.Component);function empty(){}var Upload$3=function(o){_inherits$4(s,o);var i=_createSuper$4(s);function s(){var a;_classCallCheck$5(this,s);for(var et=arguments.length,tt=new Array(et),ot=0;ot<et;ot++)tt[ot]=arguments[ot];return a=i.call.apply(i,[this].concat(tt)),a.uploader=void 0,a.saveUploader=function(dt){a.uploader=dt},a}return _createClass$5(s,[{key:"abort",value:function(et){this.uploader.abort(et)}},{key:"render",value:function(){return React.createElement(AjaxUploader,_extends$x({},this.props,{ref:this.saveUploader}))}}]),s}(reactExports.Component);Upload$3.defaultProps={component:"span",prefixCls:"rc-upload",data:{},headers:{},name:"file",multipart:!1,onStart:empty,onError:empty,onSuccess:empty,multiple:!1,beforeUpload:null,customRequest:null,withCredentials:!1,openFileDialogOnClick:!0};const genDraggerStyle=o=>{const{componentCls:i,iconCls:s}=o;return{[`${i}-wrapper`]:{[`${i}-drag`]:{position:"relative",width:"100%",height:"100%",textAlign:"center",background:o.colorFillAlter,border:`${unit$1(o.lineWidth)} dashed ${o.colorBorder}`,borderRadius:o.borderRadiusLG,cursor:"pointer",transition:`border-color ${o.motionDurationSlow}`,[i]:{padding:o.padding},[`${i}-btn`]:{display:"table",width:"100%",height:"100%",outline:"none"},[`${i}-drag-container`]:{display:"table-cell",verticalAlign:"middle"},[`
          &:not(${i}-disabled):hover,
          &-hover:not(${i}-disabled)
        `]:{borderColor:o.colorPrimaryHover},[`p${i}-drag-icon`]:{marginBottom:o.margin,[s]:{color:o.colorPrimary,fontSize:o.uploadThumbnailSize}},[`p${i}-text`]:{margin:`0 0 ${unit$1(o.marginXXS)}`,color:o.colorTextHeading,fontSize:o.fontSizeLG},[`p${i}-hint`]:{color:o.colorTextDescription,fontSize:o.fontSize},[`&${i}-disabled`]:{[`p${i}-drag-icon ${s},
            p${i}-text,
            p${i}-hint
          `]:{color:o.colorTextDisabled}}}}}},genDraggerStyle$1=genDraggerStyle,genListStyle=o=>{const{componentCls:i,antCls:s,iconCls:a,fontSize:et,lineHeight:tt,calc:ot}=o,dt=`${i}-list-item`,ht=`${dt}-actions`,ft=`${dt}-action`,pt=o.fontHeightSM;return{[`${i}-wrapper`]:{[`${i}-list`]:Object.assign(Object.assign({},clearFix()),{lineHeight:o.lineHeight,[dt]:{position:"relative",height:ot(o.lineHeight).mul(et).equal(),marginTop:o.marginXS,fontSize:et,display:"flex",alignItems:"center",transition:`background-color ${o.motionDurationSlow}`,"&:hover":{backgroundColor:o.controlItemBgHover},[`${dt}-name`]:Object.assign(Object.assign({},textEllipsis),{padding:`0 ${unit$1(o.paddingXS)}`,lineHeight:tt,flex:"auto",transition:`all ${o.motionDurationSlow}`}),[ht]:{[ft]:{opacity:0},[a]:{color:o.actionsColor,transition:`all ${o.motionDurationSlow}`},[`
              ${ft}:focus-visible,
              &.picture ${ft}
            `]:{opacity:1},[`${ft}${s}-btn`]:{height:pt,border:0,lineHeight:1}},[`${i}-icon ${a}`]:{color:o.colorTextDescription,fontSize:et},[`${dt}-progress`]:{position:"absolute",bottom:o.calc(o.uploadProgressOffset).mul(-1).equal(),width:"100%",paddingInlineStart:ot(et).add(o.paddingXS).equal(),fontSize:et,lineHeight:0,pointerEvents:"none","> div":{margin:0}}},[`${dt}:hover ${ft}`]:{opacity:1},[`${dt}-error`]:{color:o.colorError,[`${dt}-name, ${i}-icon ${a}`]:{color:o.colorError},[ht]:{[`${a}, ${a}:hover`]:{color:o.colorError},[ft]:{opacity:1}}},[`${i}-list-item-container`]:{transition:`opacity ${o.motionDurationSlow}, height ${o.motionDurationSlow}`,"&::before":{display:"table",width:0,height:0,content:'""'}}})}}},genListStyle$1=genListStyle,uploadAnimateInlineIn=new Keyframe("uploadAnimateInlineIn",{from:{width:0,height:0,margin:0,padding:0,opacity:0}}),uploadAnimateInlineOut=new Keyframe("uploadAnimateInlineOut",{to:{width:0,height:0,margin:0,padding:0,opacity:0}}),genMotionStyle=o=>{const{componentCls:i}=o,s=`${i}-animate-inline`;return[{[`${i}-wrapper`]:{[`${s}-appear, ${s}-enter, ${s}-leave`]:{animationDuration:o.motionDurationSlow,animationTimingFunction:o.motionEaseInOutCirc,animationFillMode:"forwards"},[`${s}-appear, ${s}-enter`]:{animationName:uploadAnimateInlineIn},[`${s}-leave`]:{animationName:uploadAnimateInlineOut}}},{[`${i}-wrapper`]:initFadeMotion(o)},uploadAnimateInlineIn,uploadAnimateInlineOut]},genMotionStyle$1=genMotionStyle,genPictureStyle=o=>{const{componentCls:i,iconCls:s,uploadThumbnailSize:a,uploadProgressOffset:et,calc:tt}=o,ot=`${i}-list`,dt=`${ot}-item`;return{[`${i}-wrapper`]:{[`
        ${ot}${ot}-picture,
        ${ot}${ot}-picture-card,
        ${ot}${ot}-picture-circle
      `]:{[dt]:{position:"relative",height:tt(a).add(tt(o.lineWidth).mul(2)).add(tt(o.paddingXS).mul(2)).equal(),padding:o.paddingXS,border:`${unit$1(o.lineWidth)} ${o.lineType} ${o.colorBorder}`,borderRadius:o.borderRadiusLG,"&:hover":{background:"transparent"},[`${dt}-thumbnail`]:Object.assign(Object.assign({},textEllipsis),{width:a,height:a,lineHeight:unit$1(tt(a).add(o.paddingSM).equal()),textAlign:"center",flex:"none",[s]:{fontSize:o.fontSizeHeading2,color:o.colorPrimary},img:{display:"block",width:"100%",height:"100%",overflow:"hidden"}}),[`${dt}-progress`]:{bottom:et,width:`calc(100% - ${unit$1(tt(o.paddingSM).mul(2).equal())})`,marginTop:0,paddingInlineStart:tt(a).add(o.paddingXS).equal()}},[`${dt}-error`]:{borderColor:o.colorError,[`${dt}-thumbnail ${s}`]:{[`svg path[fill='${blue[0]}']`]:{fill:o.colorErrorBg},[`svg path[fill='${blue.primary}']`]:{fill:o.colorError}}},[`${dt}-uploading`]:{borderStyle:"dashed",[`${dt}-name`]:{marginBottom:et}}},[`${ot}${ot}-picture-circle ${dt}`]:{[`&, &::before, ${dt}-thumbnail`]:{borderRadius:"50%"}}}}},genPictureCardStyle=o=>{const{componentCls:i,iconCls:s,fontSizeLG:a,colorTextLightSolid:et,calc:tt}=o,ot=`${i}-list`,dt=`${ot}-item`,ht=o.uploadPicCardSize;return{[`
      ${i}-wrapper${i}-picture-card-wrapper,
      ${i}-wrapper${i}-picture-circle-wrapper
    `]:Object.assign(Object.assign({},clearFix()),{display:"inline-block",width:"100%",[`${i}${i}-select`]:{width:ht,height:ht,marginInlineEnd:o.marginXS,marginBottom:o.marginXS,textAlign:"center",verticalAlign:"top",backgroundColor:o.colorFillAlter,border:`${unit$1(o.lineWidth)} dashed ${o.colorBorder}`,borderRadius:o.borderRadiusLG,cursor:"pointer",transition:`border-color ${o.motionDurationSlow}`,[`> ${i}`]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%",textAlign:"center"},[`&:not(${i}-disabled):hover`]:{borderColor:o.colorPrimary}},[`${ot}${ot}-picture-card, ${ot}${ot}-picture-circle`]:{[`${ot}-item-container`]:{display:"inline-block",width:ht,height:ht,marginBlock:`0 ${unit$1(o.marginXS)}`,marginInline:`0 ${unit$1(o.marginXS)}`,verticalAlign:"top"},"&::after":{display:"none"},[dt]:{height:"100%",margin:0,"&::before":{position:"absolute",zIndex:1,width:`calc(100% - ${unit$1(tt(o.paddingXS).mul(2).equal())})`,height:`calc(100% - ${unit$1(tt(o.paddingXS).mul(2).equal())})`,backgroundColor:o.colorBgMask,opacity:0,transition:`all ${o.motionDurationSlow}`,content:'" "'}},[`${dt}:hover`]:{[`&::before, ${dt}-actions`]:{opacity:1}},[`${dt}-actions`]:{position:"absolute",insetInlineStart:0,zIndex:10,width:"100%",whiteSpace:"nowrap",textAlign:"center",opacity:0,transition:`all ${o.motionDurationSlow}`,[`
            ${s}-eye,
            ${s}-download,
            ${s}-delete
          `]:{zIndex:10,width:a,margin:`0 ${unit$1(o.marginXXS)}`,fontSize:a,cursor:"pointer",transition:`all ${o.motionDurationSlow}`,color:et,"&:hover":{color:et},svg:{verticalAlign:"baseline"}}},[`${dt}-thumbnail, ${dt}-thumbnail img`]:{position:"static",display:"block",width:"100%",height:"100%",objectFit:"contain"},[`${dt}-name`]:{display:"none",textAlign:"center"},[`${dt}-file + ${dt}-name`]:{position:"absolute",bottom:o.margin,display:"block",width:`calc(100% - ${unit$1(tt(o.paddingXS).mul(2).equal())})`},[`${dt}-uploading`]:{[`&${dt}`]:{backgroundColor:o.colorFillAlter},[`&::before, ${s}-eye, ${s}-download, ${s}-delete`]:{display:"none"}},[`${dt}-progress`]:{bottom:o.marginXL,width:`calc(100% - ${unit$1(tt(o.paddingXS).mul(2).equal())})`,paddingInlineStart:0}}}),[`${i}-wrapper${i}-picture-circle-wrapper`]:{[`${i}${i}-select`]:{borderRadius:"50%"}}}},genRtlStyle=o=>{const{componentCls:i}=o;return{[`${i}-rtl`]:{direction:"rtl"}}},genRtlStyle$1=genRtlStyle,genBaseStyle=o=>{const{componentCls:i,colorTextDisabled:s}=o;return{[`${i}-wrapper`]:Object.assign(Object.assign({},resetComponent(o)),{[i]:{outline:0,"input[type='file']":{cursor:"pointer"}},[`${i}-select`]:{display:"inline-block"},[`${i}-disabled`]:{color:s,cursor:"not-allowed"}})}},prepareComponentToken=o=>({actionsColor:o.colorTextDescription}),useStyle=genStyleHooks("Upload",o=>{const{fontSizeHeading3:i,fontHeight:s,lineWidth:a,controlHeightLG:et,calc:tt}=o,ot=merge(o,{uploadThumbnailSize:tt(i).mul(2).equal(),uploadProgressOffset:tt(tt(s).div(2)).add(a).equal(),uploadPicCardSize:tt(et).mul(2.55).equal()});return[genBaseStyle(ot),genDraggerStyle$1(ot),genPictureStyle(ot),genPictureCardStyle(ot),genListStyle$1(ot),genMotionStyle$1(ot),genRtlStyle$1(ot),genCollapseMotion$1(ot)]},prepareComponentToken);function file2Obj(o){return Object.assign(Object.assign({},o),{lastModified:o.lastModified,lastModifiedDate:o.lastModifiedDate,name:o.name,size:o.size,type:o.type,uid:o.uid,percent:0,originFileObj:o})}function updateFileList(o,i){const s=_toConsumableArray$1(i),a=s.findIndex(et=>{let{uid:tt}=et;return tt===o.uid});return a===-1?s.push(o):s[a]=o,s}function getFileItem(o,i){const s=o.uid!==void 0?"uid":"name";return i.filter(a=>a[s]===o[s])[0]}function removeFileItem(o,i){const s=o.uid!==void 0?"uid":"name",a=i.filter(et=>et[s]!==o[s]);return a.length===i.length?null:a}const extname=function(){const i=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:"").split("/"),a=i[i.length-1].split(/#|\?/)[0];return(/\.[^./\\]*$/.exec(a)||[""])[0]},isImageFileType=o=>o.indexOf("image/")===0,isImageUrl=o=>{if(o.type&&!o.thumbUrl)return isImageFileType(o.type);const i=o.thumbUrl||o.url||"",s=extname(i);return/^data:image\//.test(i)||/(webp|svg|png|gif|jpg|jpeg|jfif|bmp|dpg|ico|heic|heif)$/i.test(s)?!0:!(/^data:/.test(i)||s)},MEASURE_SIZE=200;function previewImage(o){return new Promise(i=>{if(!o.type||!isImageFileType(o.type)){i("");return}const s=document.createElement("canvas");s.width=MEASURE_SIZE,s.height=MEASURE_SIZE,s.style.cssText=`position: fixed; left: 0; top: 0; width: ${MEASURE_SIZE}px; height: ${MEASURE_SIZE}px; z-index: 9999; display: none;`,document.body.appendChild(s);const a=s.getContext("2d"),et=new Image;if(et.onload=()=>{const{width:tt,height:ot}=et;let dt=MEASURE_SIZE,ht=MEASURE_SIZE,ft=0,pt=0;tt>ot?(ht=ot*(MEASURE_SIZE/tt),pt=-(ht-dt)/2):(dt=tt*(MEASURE_SIZE/ot),ft=-(dt-ht)/2),a.drawImage(et,ft,pt,dt,ht);const mt=s.toDataURL();document.body.removeChild(s),window.URL.revokeObjectURL(et.src),i(mt)},et.crossOrigin="anonymous",o.type.startsWith("image/svg+xml")){const tt=new FileReader;tt.onload=()=>{tt.result&&(et.src=tt.result)},tt.readAsDataURL(o)}else if(o.type.startsWith("image/gif")){const tt=new FileReader;tt.onload=()=>{tt.result&&i(tt.result)},tt.readAsDataURL(o)}else et.src=window.URL.createObjectURL(o)})}const ListItem=reactExports.forwardRef((o,i)=>{let{prefixCls:s,className:a,style:et,locale:tt,listType:ot,file:dt,items:ht,progress:ft,iconRender:pt,actionIconRender:mt,itemRender:gt,isImgUrl:_t,showPreviewIcon:yt,showRemoveIcon:St,showDownloadIcon:Et,previewIcon:vt,removeIcon:bt,downloadIcon:Tt,onPreview:wt,onDownload:Pt,onClose:At}=o;var xt,Ot;const{status:Rt}=dt,[Dt,Nt]=reactExports.useState(Rt);reactExports.useEffect(()=>{Rt!=="removed"&&Nt(Rt)},[Rt]);const[Kt,qt]=reactExports.useState(!1);reactExports.useEffect(()=>{const Xt=setTimeout(()=>{qt(!0)},300);return()=>{clearTimeout(Xt)}},[]);const jt=pt(dt);let Zt=reactExports.createElement("div",{className:`${s}-icon`},jt);if(ot==="picture"||ot==="picture-card"||ot==="picture-circle")if(Dt==="uploading"||!dt.thumbUrl&&!dt.url){const Xt=classNames(`${s}-list-item-thumbnail`,{[`${s}-list-item-file`]:Dt!=="uploading"});Zt=reactExports.createElement("div",{className:Xt},jt)}else{const Xt=_t!=null&&_t(dt)?reactExports.createElement("img",{src:dt.thumbUrl||dt.url,alt:dt.name,className:`${s}-list-item-image`,crossOrigin:dt.crossOrigin}):jt,Yt=classNames(`${s}-list-item-thumbnail`,{[`${s}-list-item-file`]:_t&&!_t(dt)});Zt=reactExports.createElement("a",{className:Yt,onClick:un=>wt(dt,un),href:dt.url||dt.thumbUrl,target:"_blank",rel:"noopener noreferrer"},Xt)}const Ht=classNames(`${s}-list-item`,`${s}-list-item-${Dt}`),Wt=typeof dt.linkProps=="string"?JSON.parse(dt.linkProps):dt.linkProps,Ft=St?mt((typeof bt=="function"?bt(dt):bt)||reactExports.createElement(DeleteOutlined$1,null),()=>At(dt),s,tt.removeFile,!0):null,Gt=Et&&Dt==="done"?mt((typeof Tt=="function"?Tt(dt):Tt)||reactExports.createElement(DownloadOutlined$1,null),()=>Pt(dt),s,tt.downloadFile):null,Jt=ot!=="picture-card"&&ot!=="picture-circle"&&reactExports.createElement("span",{key:"download-delete",className:classNames(`${s}-list-item-actions`,{picture:ot==="picture"})},Gt,Ft),on=classNames(`${s}-list-item-name`),bn=dt.url?[reactExports.createElement("a",Object.assign({key:"view",target:"_blank",rel:"noopener noreferrer",className:on,title:dt.name},Wt,{href:dt.url,onClick:Xt=>wt(dt,Xt)}),dt.name),Jt]:[reactExports.createElement("span",{key:"view",className:on,onClick:Xt=>wt(dt,Xt),title:dt.name},dt.name),Jt],Ut=yt&&(dt.url||dt.thumbUrl)?reactExports.createElement("a",{href:dt.url||dt.thumbUrl,target:"_blank",rel:"noopener noreferrer",onClick:Xt=>wt(dt,Xt),title:tt.previewFile},typeof vt=="function"?vt(dt):vt||reactExports.createElement(EyeOutlined$1,null)):null,It=(ot==="picture-card"||ot==="picture-circle")&&Dt!=="uploading"&&reactExports.createElement("span",{className:`${s}-list-item-actions`},Ut,Dt==="done"&&Gt,Ft),{getPrefixCls:Mt}=reactExports.useContext(ConfigContext),$t=Mt(),Lt=reactExports.createElement("div",{className:Ht},Zt,bn,It,Kt&&reactExports.createElement(CSSMotion,{motionName:`${$t}-fade`,visible:Dt==="uploading",motionDeadline:2e3},Xt=>{let{className:Yt}=Xt;const un="percent"in dt?reactExports.createElement(Progress$1,Object.assign({},ft,{type:"line",percent:dt.percent,"aria-label":dt["aria-label"],"aria-labelledby":dt["aria-labelledby"]})):null;return reactExports.createElement("div",{className:classNames(`${s}-list-item-progress`,Yt)},un)})),Vt=dt.response&&typeof dt.response=="string"?dt.response:((xt=dt.error)===null||xt===void 0?void 0:xt.statusText)||((Ot=dt.error)===null||Ot===void 0?void 0:Ot.message)||tt.uploadError,zt=Dt==="error"?reactExports.createElement(Tooltip$1,{title:Vt,getPopupContainer:Xt=>Xt.parentNode},Lt):Lt;return reactExports.createElement("div",{className:classNames(`${s}-list-item-container`,a),style:et,ref:i},gt?gt(zt,dt,ht,{download:Pt.bind(null,dt),preview:wt.bind(null,dt),remove:At.bind(null,dt)}):zt)}),ListItem$1=ListItem,InternalUploadList=(o,i)=>{const{listType:s="text",previewFile:a=previewImage,onPreview:et,onDownload:tt,onRemove:ot,locale:dt,iconRender:ht,isImageUrl:ft=isImageUrl,prefixCls:pt,items:mt=[],showPreviewIcon:gt=!0,showRemoveIcon:_t=!0,showDownloadIcon:yt=!1,removeIcon:St,previewIcon:Et,downloadIcon:vt,progress:bt={size:[-1,2],showInfo:!1},appendAction:Tt,appendActionVisible:wt=!0,itemRender:Pt,disabled:At}=o,xt=useForceUpdate(),[Ot,Rt]=reactExports.useState(!1);reactExports.useEffect(()=>{s!=="picture"&&s!=="picture-card"&&s!=="picture-circle"||(mt||[]).forEach(Ut=>{typeof document>"u"||typeof window>"u"||!window.FileReader||!window.File||!(Ut.originFileObj instanceof File||Ut.originFileObj instanceof Blob)||Ut.thumbUrl!==void 0||(Ut.thumbUrl="",a&&a(Ut.originFileObj).then(It=>{Ut.thumbUrl=It||"",xt()}))})},[s,mt,a]),reactExports.useEffect(()=>{Rt(!0)},[]);const Dt=(Ut,It)=>{if(et)return It==null||It.preventDefault(),et(Ut)},Nt=Ut=>{typeof tt=="function"?tt(Ut):Ut.url&&window.open(Ut.url)},Kt=Ut=>{ot==null||ot(Ut)},qt=Ut=>{if(ht)return ht(Ut,s);const It=Ut.status==="uploading",Mt=ft&&ft(Ut)?reactExports.createElement(PictureTwoTone$1,null):reactExports.createElement(FileTwoTone$1,null);let $t=It?reactExports.createElement(LoadingOutlined$1,null):reactExports.createElement(PaperClipOutlined$1,null);return s==="picture"?$t=It?reactExports.createElement(LoadingOutlined$1,null):Mt:(s==="picture-card"||s==="picture-circle")&&($t=It?dt.uploading:Mt),$t},jt=(Ut,It,Mt,$t,Lt)=>{const Vt={type:"text",size:"small",title:$t,onClick:zt=>{It(),isValidElement(Ut)&&Ut.props.onClick&&Ut.props.onClick(zt)},className:`${Mt}-list-item-action`};if(Lt&&(Vt.disabled=At),isValidElement(Ut)){const zt=cloneElement(Ut,Object.assign(Object.assign({},Ut.props),{onClick:()=>{}}));return reactExports.createElement(Button$2,Object.assign({},Vt,{icon:zt}))}return reactExports.createElement(Button$2,Object.assign({},Vt),reactExports.createElement("span",null,Ut))};reactExports.useImperativeHandle(i,()=>({handlePreview:Dt,handleDownload:Nt}));const{getPrefixCls:Zt}=reactExports.useContext(ConfigContext),Ht=Zt("upload",pt),Wt=Zt(),Ft=classNames(`${Ht}-list`,`${Ht}-list-${s}`),Gt=_toConsumableArray$1(mt.map(Ut=>({key:Ut.uid,file:Ut})));let on={motionDeadline:2e3,motionName:`${Ht}-${s==="picture-card"||s==="picture-circle"?"animate-inline":"animate"}`,keys:Gt,motionAppear:Ot};const bn=reactExports.useMemo(()=>{const Ut=Object.assign({},initCollapseMotion$1(Wt));return delete Ut.onAppearEnd,delete Ut.onEnterEnd,delete Ut.onLeaveEnd,Ut},[Wt]);return s!=="picture-card"&&s!=="picture-circle"&&(on=Object.assign(Object.assign({},bn),on)),reactExports.createElement("div",{className:Ft},reactExports.createElement(CSSMotionList,Object.assign({},on,{component:!1}),Ut=>{let{key:It,file:Mt,className:$t,style:Lt}=Ut;return reactExports.createElement(ListItem$1,{key:It,locale:dt,prefixCls:Ht,className:$t,style:Lt,file:Mt,items:mt,progress:bt,listType:s,isImgUrl:ft,showPreviewIcon:gt,showRemoveIcon:_t,showDownloadIcon:yt,removeIcon:St,previewIcon:Et,downloadIcon:vt,iconRender:qt,actionIconRender:jt,itemRender:Pt,onPreview:Dt,onDownload:Nt,onClose:Kt})}),Tt&&reactExports.createElement(CSSMotion,Object.assign({},on,{visible:wt,forceRender:!0}),Ut=>{let{className:It,style:Mt}=Ut;return cloneElement(Tt,$t=>({className:classNames($t.className,It),style:Object.assign(Object.assign(Object.assign({},Mt),{pointerEvents:It?"none":void 0}),$t.style)}))}))},UploadList=reactExports.forwardRef(InternalUploadList),UploadList$1=UploadList;var __awaiter$1=function(o,i,s,a){function et(tt){return tt instanceof s?tt:new s(function(ot){ot(tt)})}return new(s||(s=Promise))(function(tt,ot){function dt(pt){try{ft(a.next(pt))}catch(mt){ot(mt)}}function ht(pt){try{ft(a.throw(pt))}catch(mt){ot(mt)}}function ft(pt){pt.done?tt(pt.value):et(pt.value).then(dt,ht)}ft((a=a.apply(o,i||[])).next())})};const LIST_IGNORE=`__LIST_IGNORE_${Date.now()}__`,InternalUpload=(o,i)=>{const{fileList:s,defaultFileList:a,onRemove:et,showUploadList:tt=!0,listType:ot="text",onPreview:dt,onDownload:ht,onChange:ft,onDrop:pt,previewFile:mt,disabled:gt,locale:_t,iconRender:yt,isImageUrl:St,progress:Et,prefixCls:vt,className:bt,type:Tt="select",children:wt,style:Pt,itemRender:At,maxCount:xt,data:Ot={},multiple:Rt=!1,action:Dt="",accept:Nt="",supportServerRender:Kt=!0,rootClassName:qt}=o,jt=reactExports.useContext(DisabledContext$1),Zt=gt??jt,[Ht,Wt]=useMergedState(a||[],{value:s,postState:jn=>jn??[]}),[Ft,Gt]=reactExports.useState("drop"),Jt=reactExports.useRef(null);reactExports.useMemo(()=>{const jn=Date.now();(s||[]).forEach((zn,qn)=>{!zn.uid&&!Object.isFrozen(zn)&&(zn.uid=`__AUTO__${jn}_${qn}__`)})},[s]);const on=(jn,zn,qn)=>{let vn=_toConsumableArray$1(zn),cn=!1;xt===1?vn=vn.slice(-1):xt&&(cn=vn.length>xt,vn=vn.slice(0,xt)),reactDomExports.flushSync(()=>{Wt(vn)});const ln={file:jn,fileList:vn};qn&&(ln.event=qn),(!cn||vn.some(Mn=>Mn.uid===jn.uid))&&reactDomExports.flushSync(()=>{ft==null||ft(ln)})},bn=(jn,zn)=>__awaiter$1(void 0,void 0,void 0,function*(){const{beforeUpload:qn,transformFile:vn}=o;let cn=jn;if(qn){const ln=yield qn(jn,zn);if(ln===!1)return!1;if(delete jn[LIST_IGNORE],ln===LIST_IGNORE)return Object.defineProperty(jn,LIST_IGNORE,{value:!0,configurable:!0}),!1;typeof ln=="object"&&ln&&(cn=ln)}return vn&&(cn=yield vn(cn)),cn}),Ut=jn=>{const zn=jn.filter(cn=>!cn.file[LIST_IGNORE]);if(!zn.length)return;const qn=zn.map(cn=>file2Obj(cn.file));let vn=_toConsumableArray$1(Ht);qn.forEach(cn=>{vn=updateFileList(cn,vn)}),qn.forEach((cn,ln)=>{let Mn=cn;if(zn[ln].parsedFile)cn.status="uploading";else{const{originFileObj:$n}=cn;let rr;try{rr=new File([$n],$n.name,{type:$n.type})}catch{rr=new Blob([$n],{type:$n.type}),rr.name=$n.name,rr.lastModifiedDate=new Date,rr.lastModified=new Date().getTime()}rr.uid=cn.uid,Mn=rr}on(Mn,vn)})},It=(jn,zn,qn)=>{try{typeof jn=="string"&&(jn=JSON.parse(jn))}catch{}if(!getFileItem(zn,Ht))return;const vn=file2Obj(zn);vn.status="done",vn.percent=100,vn.response=jn,vn.xhr=qn;const cn=updateFileList(vn,Ht);on(vn,cn)},Mt=(jn,zn)=>{if(!getFileItem(zn,Ht))return;const qn=file2Obj(zn);qn.status="uploading",qn.percent=jn.percent;const vn=updateFileList(qn,Ht);on(qn,vn,jn)},$t=(jn,zn,qn)=>{if(!getFileItem(qn,Ht))return;const vn=file2Obj(qn);vn.error=jn,vn.response=zn,vn.status="error";const cn=updateFileList(vn,Ht);on(vn,cn)},Lt=jn=>{let zn;Promise.resolve(typeof et=="function"?et(jn):et).then(qn=>{var vn;if(qn===!1)return;const cn=removeFileItem(jn,Ht);cn&&(zn=Object.assign(Object.assign({},jn),{status:"removed"}),Ht==null||Ht.forEach(ln=>{const Mn=zn.uid!==void 0?"uid":"name";ln[Mn]===zn[Mn]&&!Object.isFrozen(ln)&&(ln.status="removed")}),(vn=Jt.current)===null||vn===void 0||vn.abort(zn),on(zn,cn))})},Vt=jn=>{Gt(jn.type),jn.type==="drop"&&(pt==null||pt(jn))};reactExports.useImperativeHandle(i,()=>({onBatchStart:Ut,onSuccess:It,onProgress:Mt,onError:$t,fileList:Ht,upload:Jt.current}));const{getPrefixCls:zt,direction:Xt,upload:Yt}=reactExports.useContext(ConfigContext),un=zt("upload",vt),gn=Object.assign(Object.assign({onBatchStart:Ut,onError:$t,onProgress:Mt,onSuccess:It},o),{data:Ot,multiple:Rt,action:Dt,accept:Nt,supportServerRender:Kt,prefixCls:un,disabled:Zt,beforeUpload:bn,onChange:void 0});delete gn.className,delete gn.style,(!wt||Zt)&&delete gn.id;const yn=`${un}-wrapper`,[Tn,Rn,Sn]=useStyle(un,yn),[Fn]=useLocale$1("Upload",defaultLocale.Upload),{showRemoveIcon:Dn,showPreviewIcon:xn,showDownloadIcon:On,removeIcon:wn,previewIcon:fn,downloadIcon:_n}=typeof tt=="boolean"?{}:tt,Cn=typeof Dn>"u"?!Zt:!!Dn,Ln=(jn,zn)=>tt?reactExports.createElement(UploadList$1,{prefixCls:un,listType:ot,items:Ht,previewFile:mt,onPreview:dt,onDownload:ht,onRemove:Lt,showRemoveIcon:Cn,showPreviewIcon:xn,showDownloadIcon:On,removeIcon:wn,previewIcon:fn,downloadIcon:_n,iconRender:yt,locale:Object.assign(Object.assign({},Fn),_t),isImageUrl:St,progress:Et,appendAction:jn,appendActionVisible:zn,itemRender:At,disabled:Zt}):jn,Vn=classNames(yn,bt,qt,Rn,Sn,Yt==null?void 0:Yt.className,{[`${un}-rtl`]:Xt==="rtl",[`${un}-picture-card-wrapper`]:ot==="picture-card",[`${un}-picture-circle-wrapper`]:ot==="picture-circle"}),Jn=Object.assign(Object.assign({},Yt==null?void 0:Yt.style),Pt);if(Tt==="drag"){const jn=classNames(Rn,un,`${un}-drag`,{[`${un}-drag-uploading`]:Ht.some(zn=>zn.status==="uploading"),[`${un}-drag-hover`]:Ft==="dragover",[`${un}-disabled`]:Zt,[`${un}-rtl`]:Xt==="rtl"});return Tn(reactExports.createElement("span",{className:Vn},reactExports.createElement("div",{className:jn,style:Jn,onDrop:Vt,onDragOver:Vt,onDragLeave:Vt},reactExports.createElement(Upload$3,Object.assign({},gn,{ref:Jt,className:`${un}-btn`}),reactExports.createElement("div",{className:`${un}-drag-container`},wt))),Ln()))}const Xn=classNames(un,`${un}-select`,{[`${un}-disabled`]:Zt}),Qn=(jn=>reactExports.createElement("div",{className:Xn,style:jn},reactExports.createElement(Upload$3,Object.assign({},gn,{ref:Jt}))))(wt?void 0:{display:"none"});return Tn(ot==="picture-card"||ot==="picture-circle"?reactExports.createElement("span",{className:Vn},Ln(Qn,!!wt)):reactExports.createElement("span",{className:Vn},Qn,Ln()))},Upload$2=reactExports.forwardRef(InternalUpload),InternalUpload$1=Upload$2;var __rest$2=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const Dragger$1=reactExports.forwardRef((o,i)=>{var{style:s,height:a}=o,et=__rest$2(o,["style","height"]);return reactExports.createElement(InternalUpload$1,Object.assign({ref:i},et,{type:"drag",style:Object.assign(Object.assign({},s),{height:a})}))}),Dragger$2=Dragger$1,Upload=InternalUpload$1;Upload.Dragger=Dragger$2;Upload.LIST_IGNORE=LIST_IGNORE;const Upload$1=Upload;function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(i,s){module.exports=i.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(o,i)=>{var qn;Object.defineProperty(i,"__esModule",{value:!0}),i.VerbosityLevel=i.Util=i.UnknownErrorException=i.UnexpectedResponseException=i.TextRenderingMode=i.RenderingIntentFlag=i.PromiseCapability=i.PermissionFlag=i.PasswordResponses=i.PasswordException=i.PageActionEventType=i.OPS=i.MissingPDFException=i.MAX_IMAGE_SIZE_TO_CACHE=i.LINE_FACTOR=i.LINE_DESCENT_FACTOR=i.InvalidPDFException=i.ImageKind=i.IDENTITY_MATRIX=i.FormatError=i.FeatureTest=i.FONT_IDENTITY_MATRIX=i.DocumentActionEventType=i.CMapCompressionType=i.BaseException=i.BASELINE_FACTOR=i.AnnotationType=i.AnnotationReplyType=i.AnnotationPrefix=i.AnnotationMode=i.AnnotationFlag=i.AnnotationFieldFlag=i.AnnotationEditorType=i.AnnotationEditorPrefix=i.AnnotationEditorParamsType=i.AnnotationBorderStyleType=i.AnnotationActionEventType=i.AbortException=void 0,i.assert=Gt,i.bytesToString=Yt,i.createValidAbsoluteUrl=on,i.getModificationDate=Vn,i.getUuid=jn,i.getVerbosityLevel=Zt,i.info=Ht,i.isArrayBuffer=Cn,i.isArrayEqual=Ln,i.isNodeJS=void 0,i.normalizeUnicode=Qn,i.objectFromMap=Tn,i.objectSize=yn,i.setVerbosityLevel=jt,i.shadow=bn,i.string32=gn,i.stringToBytes=un,i.stringToPDFString=wn,i.stringToUTF8String=fn,i.unreachable=Ft,i.utf8StringToString=_n,i.warn=Wt;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");i.isNodeJS=s;const a=[1,0,0,1,0,0];i.IDENTITY_MATRIX=a;const et=[.001,0,0,.001,0,0];i.FONT_IDENTITY_MATRIX=et;const tt=1e7;i.MAX_IMAGE_SIZE_TO_CACHE=tt;const ot=1.35;i.LINE_FACTOR=ot;const dt=.35;i.LINE_DESCENT_FACTOR=dt;const ht=dt/ot;i.BASELINE_FACTOR=ht;const ft={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};i.RenderingIntentFlag=ft;const pt={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};i.AnnotationMode=pt;const mt="pdfjs_internal_editor_";i.AnnotationEditorPrefix=mt;const gt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};i.AnnotationEditorType=gt;const _t={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};i.AnnotationEditorParamsType=_t;const yt={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};i.PermissionFlag=yt;const St={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};i.TextRenderingMode=St;const Et={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};i.ImageKind=Et;const vt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};i.AnnotationType=vt;const bt={GROUP:"Group",REPLY:"R"};i.AnnotationReplyType=bt;const Tt={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};i.AnnotationFlag=Tt;const wt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};i.AnnotationFieldFlag=wt;const Pt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};i.AnnotationBorderStyleType=Pt;const At={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};i.AnnotationActionEventType=At;const xt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};i.DocumentActionEventType=xt;const Ot={O:"PageOpen",C:"PageClose"};i.PageActionEventType=Ot;const Rt={ERRORS:0,WARNINGS:1,INFOS:5};i.VerbosityLevel=Rt;const Dt={NONE:0,BINARY:1};i.CMapCompressionType=Dt;const Nt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};i.OPS=Nt;const Kt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};i.PasswordResponses=Kt;let qt=Rt.WARNINGS;function jt(vn){Number.isInteger(vn)&&(qt=vn)}function Zt(){return qt}function Ht(vn){qt>=Rt.INFOS&&console.log(`Info: ${vn}`)}function Wt(vn){qt>=Rt.WARNINGS&&console.log(`Warning: ${vn}`)}function Ft(vn){throw new Error(vn)}function Gt(vn,cn){vn||Ft(cn)}function Jt(vn){switch(vn==null?void 0:vn.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function on(vn,cn=null,ln=null){if(!vn)return null;try{if(ln&&typeof vn=="string"){if(ln.addDefaultProtocol&&vn.startsWith("www.")){const $n=vn.match(/\./g);($n==null?void 0:$n.length)>=2&&(vn=`http://${vn}`)}if(ln.tryConvertEncoding)try{vn=fn(vn)}catch{}}const Mn=cn?new URL(vn,cn):new URL(vn);if(Jt(Mn))return Mn}catch{}return null}function bn(vn,cn,ln,Mn=!1){return Object.defineProperty(vn,cn,{value:ln,enumerable:!Mn,configurable:!0,writable:!1}),ln}const Ut=function(){function cn(ln,Mn){this.constructor===cn&&Ft("Cannot initialize BaseException."),this.message=ln,this.name=Mn}return cn.prototype=new Error,cn.constructor=cn,cn}();i.BaseException=Ut;class It extends Ut{constructor(cn,ln){super(cn,"PasswordException"),this.code=ln}}i.PasswordException=It;class Mt extends Ut{constructor(cn,ln){super(cn,"UnknownErrorException"),this.details=ln}}i.UnknownErrorException=Mt;class $t extends Ut{constructor(cn){super(cn,"InvalidPDFException")}}i.InvalidPDFException=$t;class Lt extends Ut{constructor(cn){super(cn,"MissingPDFException")}}i.MissingPDFException=Lt;class Vt extends Ut{constructor(cn,ln){super(cn,"UnexpectedResponseException"),this.status=ln}}i.UnexpectedResponseException=Vt;class zt extends Ut{constructor(cn){super(cn,"FormatError")}}i.FormatError=zt;class Xt extends Ut{constructor(cn){super(cn,"AbortException")}}i.AbortException=Xt;function Yt(vn){(typeof vn!="object"||(vn==null?void 0:vn.length)===void 0)&&Ft("Invalid argument for bytesToString");const cn=vn.length,ln=8192;if(cn<ln)return String.fromCharCode.apply(null,vn);const Mn=[];for(let $n=0;$n<cn;$n+=ln){const rr=Math.min($n+ln,cn),cr=vn.subarray($n,rr);Mn.push(String.fromCharCode.apply(null,cr))}return Mn.join("")}function un(vn){typeof vn!="string"&&Ft("Invalid argument for stringToBytes");const cn=vn.length,ln=new Uint8Array(cn);for(let Mn=0;Mn<cn;++Mn)ln[Mn]=vn.charCodeAt(Mn)&255;return ln}function gn(vn){return String.fromCharCode(vn>>24&255,vn>>16&255,vn>>8&255,vn&255)}function yn(vn){return Object.keys(vn).length}function Tn(vn){const cn=Object.create(null);for(const[ln,Mn]of vn)cn[ln]=Mn;return cn}function Rn(){const vn=new Uint8Array(4);return vn[0]=1,new Uint32Array(vn.buffer,0,1)[0]===1}function Sn(){try{return new Function(""),!0}catch{return!1}}class Fn{static get isLittleEndian(){return bn(this,"isLittleEndian",Rn())}static get isEvalSupported(){return bn(this,"isEvalSupported",Sn())}static get isOffscreenCanvasSupported(){return bn(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?bn(this,"platform",{isWin:!1,isMac:!1}):bn(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){var cn,ln;return bn(this,"isCSSRoundSupported",(ln=(cn=globalThis.CSS)==null?void 0:cn.supports)==null?void 0:ln.call(cn,"width: round(1.5px, 1px)"))}}i.FeatureTest=Fn;const Dn=[...Array(256).keys()].map(vn=>vn.toString(16).padStart(2,"0"));class xn{static makeHexColor(cn,ln,Mn){return`#${Dn[cn]}${Dn[ln]}${Dn[Mn]}`}static scaleMinMax(cn,ln){let Mn;cn[0]?(cn[0]<0&&(Mn=ln[0],ln[0]=ln[1],ln[1]=Mn),ln[0]*=cn[0],ln[1]*=cn[0],cn[3]<0&&(Mn=ln[2],ln[2]=ln[3],ln[3]=Mn),ln[2]*=cn[3],ln[3]*=cn[3]):(Mn=ln[0],ln[0]=ln[2],ln[2]=Mn,Mn=ln[1],ln[1]=ln[3],ln[3]=Mn,cn[1]<0&&(Mn=ln[2],ln[2]=ln[3],ln[3]=Mn),ln[2]*=cn[1],ln[3]*=cn[1],cn[2]<0&&(Mn=ln[0],ln[0]=ln[1],ln[1]=Mn),ln[0]*=cn[2],ln[1]*=cn[2]),ln[0]+=cn[4],ln[1]+=cn[4],ln[2]+=cn[5],ln[3]+=cn[5]}static transform(cn,ln){return[cn[0]*ln[0]+cn[2]*ln[1],cn[1]*ln[0]+cn[3]*ln[1],cn[0]*ln[2]+cn[2]*ln[3],cn[1]*ln[2]+cn[3]*ln[3],cn[0]*ln[4]+cn[2]*ln[5]+cn[4],cn[1]*ln[4]+cn[3]*ln[5]+cn[5]]}static applyTransform(cn,ln){const Mn=cn[0]*ln[0]+cn[1]*ln[2]+ln[4],$n=cn[0]*ln[1]+cn[1]*ln[3]+ln[5];return[Mn,$n]}static applyInverseTransform(cn,ln){const Mn=ln[0]*ln[3]-ln[1]*ln[2],$n=(cn[0]*ln[3]-cn[1]*ln[2]+ln[2]*ln[5]-ln[4]*ln[3])/Mn,rr=(-cn[0]*ln[1]+cn[1]*ln[0]+ln[4]*ln[1]-ln[5]*ln[0])/Mn;return[$n,rr]}static getAxialAlignedBoundingBox(cn,ln){const Mn=this.applyTransform(cn,ln),$n=this.applyTransform(cn.slice(2,4),ln),rr=this.applyTransform([cn[0],cn[3]],ln),cr=this.applyTransform([cn[2],cn[1]],ln);return[Math.min(Mn[0],$n[0],rr[0],cr[0]),Math.min(Mn[1],$n[1],rr[1],cr[1]),Math.max(Mn[0],$n[0],rr[0],cr[0]),Math.max(Mn[1],$n[1],rr[1],cr[1])]}static inverseTransform(cn){const ln=cn[0]*cn[3]-cn[1]*cn[2];return[cn[3]/ln,-cn[1]/ln,-cn[2]/ln,cn[0]/ln,(cn[2]*cn[5]-cn[4]*cn[3])/ln,(cn[4]*cn[1]-cn[5]*cn[0])/ln]}static singularValueDecompose2dScale(cn){const ln=[cn[0],cn[2],cn[1],cn[3]],Mn=cn[0]*ln[0]+cn[1]*ln[2],$n=cn[0]*ln[1]+cn[1]*ln[3],rr=cn[2]*ln[0]+cn[3]*ln[2],cr=cn[2]*ln[1]+cn[3]*ln[3],mn=(Mn+cr)/2,nn=Math.sqrt((Mn+cr)**2-4*(Mn*cr-rr*$n))/2,an=mn+nn||1,rn=mn-nn||1;return[Math.sqrt(an),Math.sqrt(rn)]}static normalizeRect(cn){const ln=cn.slice(0);return cn[0]>cn[2]&&(ln[0]=cn[2],ln[2]=cn[0]),cn[1]>cn[3]&&(ln[1]=cn[3],ln[3]=cn[1]),ln}static intersect(cn,ln){const Mn=Math.max(Math.min(cn[0],cn[2]),Math.min(ln[0],ln[2])),$n=Math.min(Math.max(cn[0],cn[2]),Math.max(ln[0],ln[2]));if(Mn>$n)return null;const rr=Math.max(Math.min(cn[1],cn[3]),Math.min(ln[1],ln[3])),cr=Math.min(Math.max(cn[1],cn[3]),Math.max(ln[1],ln[3]));return rr>cr?null:[Mn,rr,$n,cr]}static bezierBoundingBox(cn,ln,Mn,$n,rr,cr,mn,nn){const an=[],rn=[[],[]];let An,In,Hn,Pn,Wn,kn,Qt,kt;for(let hn=0;hn<2;++hn){if(hn===0?(In=6*cn-12*Mn+6*rr,An=-3*cn+9*Mn-9*rr+3*mn,Hn=3*Mn-3*cn):(In=6*ln-12*$n+6*cr,An=-3*ln+9*$n-9*cr+3*nn,Hn=3*$n-3*ln),Math.abs(An)<1e-12){if(Math.abs(In)<1e-12)continue;Pn=-Hn/In,0<Pn&&Pn<1&&an.push(Pn);continue}Qt=In*In-4*Hn*An,kt=Math.sqrt(Qt),!(Qt<0)&&(Wn=(-In+kt)/(2*An),0<Wn&&Wn<1&&an.push(Wn),kn=(-In-kt)/(2*An),0<kn&&kn<1&&an.push(kn))}let Bt=an.length,en;const sn=Bt;for(;Bt--;)Pn=an[Bt],en=1-Pn,rn[0][Bt]=en*en*en*cn+3*en*en*Pn*Mn+3*en*Pn*Pn*rr+Pn*Pn*Pn*mn,rn[1][Bt]=en*en*en*ln+3*en*en*Pn*$n+3*en*Pn*Pn*cr+Pn*Pn*Pn*nn;return rn[0][sn]=cn,rn[1][sn]=ln,rn[0][sn+1]=mn,rn[1][sn+1]=nn,rn[0].length=rn[1].length=sn+2,[Math.min(...rn[0]),Math.min(...rn[1]),Math.max(...rn[0]),Math.max(...rn[1])]}}i.Util=xn;const On=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function wn(vn){if(vn[0]>="ï"){let ln;if(vn[0]==="þ"&&vn[1]==="ÿ"?ln="utf-16be":vn[0]==="ÿ"&&vn[1]==="þ"?ln="utf-16le":vn[0]==="ï"&&vn[1]==="»"&&vn[2]==="¿"&&(ln="utf-8"),ln)try{const Mn=new TextDecoder(ln,{fatal:!0}),$n=un(vn);return Mn.decode($n)}catch(Mn){Wt(`stringToPDFString: "${Mn}".`)}}const cn=[];for(let ln=0,Mn=vn.length;ln<Mn;ln++){const $n=On[vn.charCodeAt(ln)];cn.push($n?String.fromCharCode($n):vn.charAt(ln))}return cn.join("")}function fn(vn){return decodeURIComponent(escape(vn))}function _n(vn){return unescape(encodeURIComponent(vn))}function Cn(vn){return typeof vn=="object"&&(vn==null?void 0:vn.byteLength)!==void 0}function Ln(vn,cn){if(vn.length!==cn.length)return!1;for(let ln=0,Mn=vn.length;ln<Mn;ln++)if(vn[ln]!==cn[ln])return!1;return!0}function Vn(vn=new Date){return[vn.getUTCFullYear().toString(),(vn.getUTCMonth()+1).toString().padStart(2,"0"),vn.getUTCDate().toString().padStart(2,"0"),vn.getUTCHours().toString().padStart(2,"0"),vn.getUTCMinutes().toString().padStart(2,"0"),vn.getUTCSeconds().toString().padStart(2,"0")].join("")}class Jn{constructor(){tn(this,qn,!1);this.promise=new Promise((cn,ln)=>{this.resolve=Mn=>{pn(this,qn,!0),cn(Mn)},this.reject=Mn=>{pn(this,qn,!0),ln(Mn)}})}get settled(){return Ct(this,qn)}}qn=new WeakMap,i.PromiseCapability=Jn;let Xn=null,Yn=null;function Qn(vn){return Xn||(Xn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Yn=new Map([["ﬅ","ſt"]])),vn.replaceAll(Xn,(cn,ln,Mn)=>ln?ln.normalize("NFKC"):Yn.get(Mn))}function jn(){if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.randomUUID)=="function")return crypto.randomUUID();const vn=new Uint8Array(32);if(typeof crypto<"u"&&typeof(crypto==null?void 0:crypto.getRandomValues)=="function")crypto.getRandomValues(vn);else for(let cn=0;cn<32;cn++)vn[cn]=Math.floor(Math.random()*255);return Yt(vn)}const zn="pdfjs_internal_id_";i.AnnotationPrefix=zn},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{var o,s,a,et,ro,ot,Bo,ht,ft,pt,mt,gt,_t,yt,St,Et,Wo,bt,Tt,_s,Pt,At;Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(Ot){if(typeof Ot=="string"||Ot instanceof URL?Ot={url:Ot}:(0,_util.isArrayBuffer)(Ot)&&(Ot={data:Ot}),typeof Ot!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!Ot.url&&!Ot.data&&!Ot.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const Rt=new PDFDocumentLoadingTask,{docId:Dt}=Rt,Nt=Ot.url?getUrlProp(Ot.url):null,Kt=Ot.data?getDataProp(Ot.data):null,qt=Ot.httpHeaders||null,jt=Ot.withCredentials===!0,Zt=Ot.password??null,Ht=Ot.range instanceof PDFDataRangeTransport?Ot.range:null,Wt=Number.isInteger(Ot.rangeChunkSize)&&Ot.rangeChunkSize>0?Ot.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let Ft=Ot.worker instanceof PDFWorker?Ot.worker:null;const Gt=Ot.verbosity,Jt=typeof Ot.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(Ot.docBaseUrl)?Ot.docBaseUrl:null,on=typeof Ot.cMapUrl=="string"?Ot.cMapUrl:null,bn=Ot.cMapPacked!==!1,Ut=Ot.CMapReaderFactory||DefaultCMapReaderFactory,It=typeof Ot.standardFontDataUrl=="string"?Ot.standardFontDataUrl:null,Mt=Ot.StandardFontDataFactory||DefaultStandardFontDataFactory,$t=Ot.stopAtErrors!==!0,Lt=Number.isInteger(Ot.maxImageSize)&&Ot.maxImageSize>-1?Ot.maxImageSize:-1,Vt=Ot.isEvalSupported!==!1,zt=typeof Ot.isOffscreenCanvasSupported=="boolean"?Ot.isOffscreenCanvasSupported:!_util.isNodeJS,Xt=Number.isInteger(Ot.canvasMaxAreaInBytes)?Ot.canvasMaxAreaInBytes:-1,Yt=typeof Ot.disableFontFace=="boolean"?Ot.disableFontFace:_util.isNodeJS,un=Ot.fontExtraProperties===!0,gn=Ot.enableXfa===!0,yn=Ot.ownerDocument||globalThis.document,Tn=Ot.disableRange===!0,Rn=Ot.disableStream===!0,Sn=Ot.disableAutoFetch===!0,Fn=Ot.pdfBug===!0,Dn=Ht?Ht.length:Ot.length??NaN,xn=typeof Ot.useSystemFonts=="boolean"?Ot.useSystemFonts:!_util.isNodeJS&&!Yt,On=typeof Ot.useWorkerFetch=="boolean"?Ot.useWorkerFetch:Ut===_display_utils.DOMCMapReaderFactory&&Mt===_display_utils.DOMStandardFontDataFactory&&on&&It&&(0,_display_utils.isValidFetchUrl)(on,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(It,document.baseURI),wn=Ot.canvasFactory||new DefaultCanvasFactory({ownerDocument:yn}),fn=Ot.filterFactory||new DefaultFilterFactory({docId:Dt,ownerDocument:yn}),_n=null;(0,_util.setVerbosityLevel)(Gt);const Cn={canvasFactory:wn,filterFactory:fn};if(On||(Cn.cMapReaderFactory=new Ut({baseUrl:on,isCompressed:bn}),Cn.standardFontDataFactory=new Mt({baseUrl:It})),!Ft){const Jn={verbosity:Gt,port:_worker_options.GlobalWorkerOptions.workerPort};Ft=Jn.port?PDFWorker.fromPort(Jn):new PDFWorker(Jn),Rt._worker=Ft}const Ln={docId:Dt,apiVersion:"3.11.174",data:Kt,password:Zt,disableAutoFetch:Sn,rangeChunkSize:Wt,length:Dn,docBaseUrl:Jt,enableXfa:gn,evaluatorOptions:{maxImageSize:Lt,disableFontFace:Yt,ignoreErrors:$t,isEvalSupported:Vt,isOffscreenCanvasSupported:zt,canvasMaxAreaInBytes:Xt,fontExtraProperties:un,useSystemFonts:xn,cMapUrl:On?on:null,standardFontDataUrl:On?It:null}},Vn={ignoreErrors:$t,isEvalSupported:Vt,disableFontFace:Yt,fontExtraProperties:un,enableXfa:gn,ownerDocument:yn,disableAutoFetch:Sn,pdfBug:Fn,styleElement:_n};return Ft.promise.then(function(){if(Rt.destroyed)throw new Error("Loading aborted");const Jn=_fetchDocument(Ft,Ln),Xn=new Promise(function(Yn){let Qn;Ht?Qn=new _transport_stream.PDFDataTransportStream({length:Dn,initialData:Ht.initialData,progressiveDone:Ht.progressiveDone,contentDispositionFilename:Ht.contentDispositionFilename,disableRange:Tn,disableStream:Rn},Ht):Kt||(Qn=(zn=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(zn):(0,_display_utils.isValidFetchUrl)(zn.url)?new _displayFetch_stream.PDFFetchStream(zn):new _displayNetwork.PDFNetworkStream(zn))({url:Nt,length:Dn,httpHeaders:qt,withCredentials:jt,rangeChunkSize:Wt,disableRange:Tn,disableStream:Rn})),Yn(Qn)});return Promise.all([Jn,Xn]).then(function([Yn,Qn]){if(Rt.destroyed)throw new Error("Loading aborted");const jn=new _message_handler.MessageHandler(Dt,Yn,Ft.port),zn=new WorkerTransport(jn,Rt,Qn,Vn,Cn);Rt._transport=zn,jn.send("Ready",null)})}).catch(Rt._capability.reject),Rt}async function _fetchDocument(Ot,Rt){if(Ot.destroyed)throw new Error("Worker was destroyed");const Dt=await Ot.messageHandler.sendWithPromise("GetDocRequest",Rt,Rt.data?[Rt.data.buffer]:null);if(Ot.destroyed)throw new Error("Worker was destroyed");return Dt}function getUrlProp(Ot){if(Ot instanceof URL)return Ot.href;try{return new URL(Ot,window.location).href}catch{if(_util.isNodeJS&&typeof Ot=="string")return Ot}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(Ot){if(_util.isNodeJS&&typeof Buffer<"u"&&Ot instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(Ot instanceof Uint8Array&&Ot.byteLength===Ot.buffer.byteLength)return Ot;if(typeof Ot=="string")return(0,_util.stringToBytes)(Ot);if(typeof Ot=="object"&&!isNaN(Ot==null?void 0:Ot.length)||(0,_util.isArrayBuffer)(Ot))return new Uint8Array(Ot);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}const i=class i{constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${Dr(i,o)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var Rt,Dt,Nt;this.destroyed=!0;try{(Rt=this._worker)!=null&&Rt.port&&(this._worker._pendingDestroy=!0),await((Dt=this._transport)==null?void 0:Dt.destroy())}catch(Kt){throw(Nt=this._worker)!=null&&Nt.port&&delete this._worker._pendingDestroy,Kt}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}};o=new WeakMap,tn(i,o,0);let PDFDocumentLoadingTask=i;exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(Rt,Dt,Nt=!1,Kt=null){this.length=Rt,this.initialData=Dt,this.progressiveDone=Nt,this.contentDispositionFilename=Kt,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(Rt){this._rangeListeners.push(Rt)}addProgressListener(Rt){this._progressListeners.push(Rt)}addProgressiveReadListener(Rt){this._progressiveReadListeners.push(Rt)}addProgressiveDoneListener(Rt){this._progressiveDoneListeners.push(Rt)}onDataRange(Rt,Dt){for(const Nt of this._rangeListeners)Nt(Rt,Dt)}onDataProgress(Rt,Dt){this._readyCapability.promise.then(()=>{for(const Nt of this._progressListeners)Nt(Rt,Dt)})}onDataProgressiveRead(Rt){this._readyCapability.promise.then(()=>{for(const Dt of this._progressiveReadListeners)Dt(Rt)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const Rt of this._progressiveDoneListeners)Rt()})}transportReady(){this._readyCapability.resolve()}requestDataRange(Rt,Dt){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(Rt,Dt){this._pdfInfo=Rt,this._transport=Dt,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(Nt=>{if(!Nt)return Nt;const Kt=[];for(const qt in Nt)Kt.push(...Nt[qt]);return Kt}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(Rt){return this._transport.getPage(Rt)}getPageIndex(Rt){return this._transport.getPageIndex(Rt)}getDestinations(){return this._transport.getDestinations()}getDestination(Rt){return this._transport.getDestination(Rt)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(Rt=!1){return this._transport.startCleanup(Rt||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{constructor(Rt,Dt,Nt,Kt=!1){tn(this,et);tn(this,ot);tn(this,s,null);tn(this,a,!1);this._pageIndex=Rt,this._pageInfo=Dt,this._transport=Nt,this._stats=Kt?new _display_utils.StatTimer:null,this._pdfBug=Kt,this.commonObjs=Nt.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:Rt,rotation:Dt=this.rotate,offsetX:Nt=0,offsetY:Kt=0,dontFlip:qt=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:Rt,rotation:Dt,offsetX:Nt,offsetY:Kt,dontFlip:qt})}getAnnotations({intent:Rt="display"}={}){const Dt=this._transport.getRenderingIntent(Rt);return this._transport.getAnnotations(this._pageIndex,Dt.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var Rt;return((Rt=this._transport._htmlForXfa)==null?void 0:Rt.children[this._pageIndex])||null}render({canvasContext:Rt,viewport:Dt,intent:Nt="display",annotationMode:Kt=_util.AnnotationMode.ENABLE,transform:qt=null,background:jt=null,optionalContentConfigPromise:Zt=null,annotationCanvasMap:Ht=null,pageColors:Wt=null,printAnnotationStorage:Ft=null}){var Mt,$t;(Mt=this._stats)==null||Mt.time("Overall");const Gt=this._transport.getRenderingIntent(Nt,Kt,Ft);pn(this,a,!1),dn(this,ot,Bo).call(this),Zt||(Zt=this._transport.getOptionalContentConfig());let Jt=this._intentStates.get(Gt.cacheKey);Jt||(Jt=Object.create(null),this._intentStates.set(Gt.cacheKey,Jt)),Jt.streamReaderCancelTimeout&&(clearTimeout(Jt.streamReaderCancelTimeout),Jt.streamReaderCancelTimeout=null);const on=!!(Gt.renderingIntent&_util.RenderingIntentFlag.PRINT);Jt.displayReadyCapability||(Jt.displayReadyCapability=new _util.PromiseCapability,Jt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},($t=this._stats)==null||$t.time("Page Request"),this._pumpOperatorList(Gt));const bn=Lt=>{var Vt,zt;Jt.renderTasks.delete(Ut),(this._maybeCleanupAfterRender||on)&&pn(this,a,!0),dn(this,et,ro).call(this,!on),Lt?(Ut.capability.reject(Lt),this._abortOperatorList({intentState:Jt,reason:Lt instanceof Error?Lt:new Error(Lt)})):Ut.capability.resolve(),(Vt=this._stats)==null||Vt.timeEnd("Rendering"),(zt=this._stats)==null||zt.timeEnd("Overall")},Ut=new InternalRenderTask({callback:bn,params:{canvasContext:Rt,viewport:Dt,transform:qt,background:jt},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:Ht,operatorList:Jt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!on,pdfBug:this._pdfBug,pageColors:Wt});(Jt.renderTasks||(Jt.renderTasks=new Set)).add(Ut);const It=Ut.task;return Promise.all([Jt.displayReadyCapability.promise,Zt]).then(([Lt,Vt])=>{var zt;if(this.destroyed){bn();return}(zt=this._stats)==null||zt.time("Rendering"),Ut.initializeGraphics({transparency:Lt,optionalContentConfig:Vt}),Ut.operatorListChanged()}).catch(bn),It}getOperatorList({intent:Rt="display",annotationMode:Dt=_util.AnnotationMode.ENABLE,printAnnotationStorage:Nt=null}={}){var Ht;function Kt(){jt.operatorList.lastChunk&&(jt.opListReadCapability.resolve(jt.operatorList),jt.renderTasks.delete(Zt))}const qt=this._transport.getRenderingIntent(Rt,Dt,Nt,!0);let jt=this._intentStates.get(qt.cacheKey);jt||(jt=Object.create(null),this._intentStates.set(qt.cacheKey,jt));let Zt;return jt.opListReadCapability||(Zt=Object.create(null),Zt.operatorListChanged=Kt,jt.opListReadCapability=new _util.PromiseCapability,(jt.renderTasks||(jt.renderTasks=new Set)).add(Zt),jt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(Ht=this._stats)==null||Ht.time("Page Request"),this._pumpOperatorList(qt)),jt.opListReadCapability.promise}streamTextContent({includeMarkedContent:Rt=!1,disableNormalization:Dt=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:Rt===!0,disableNormalization:Dt===!0},{highWaterMark:100,size(Kt){return Kt.items.length}})}getTextContent(Rt={}){if(this._transport._htmlForXfa)return this.getXfa().then(Nt=>_xfa_text.XfaText.textContent(Nt));const Dt=this.streamTextContent(Rt);return new Promise(function(Nt,Kt){function qt(){jt.read().then(function({value:Ht,done:Wt}){if(Wt){Nt(Zt);return}Object.assign(Zt.styles,Ht.styles),Zt.items.push(...Ht.items),qt()},Kt)}const jt=Dt.getReader(),Zt={items:[],styles:Object.create(null)};qt()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const Rt=[];for(const Dt of this._intentStates.values())if(this._abortOperatorList({intentState:Dt,reason:new Error("Page was destroyed."),force:!0}),!Dt.opListReadCapability)for(const Nt of Dt.renderTasks)Rt.push(Nt.completed),Nt.cancel();return this.objs.clear(),pn(this,a,!1),dn(this,ot,Bo).call(this),Promise.all(Rt)}cleanup(Rt=!1){pn(this,a,!0);const Dt=dn(this,et,ro).call(this,!1);return Rt&&Dt&&this._stats&&(this._stats=new _display_utils.StatTimer),Dt}_startRenderPage(Rt,Dt){var Kt,qt;const Nt=this._intentStates.get(Dt);Nt&&((Kt=this._stats)==null||Kt.timeEnd("Page Request"),(qt=Nt.displayReadyCapability)==null||qt.resolve(Rt))}_renderPageChunk(Rt,Dt){for(let Nt=0,Kt=Rt.length;Nt<Kt;Nt++)Dt.operatorList.fnArray.push(Rt.fnArray[Nt]),Dt.operatorList.argsArray.push(Rt.argsArray[Nt]);Dt.operatorList.lastChunk=Rt.lastChunk,Dt.operatorList.separateAnnots=Rt.separateAnnots;for(const Nt of Dt.renderTasks)Nt.operatorListChanged();Rt.lastChunk&&dn(this,et,ro).call(this,!0)}_pumpOperatorList({renderingIntent:Rt,cacheKey:Dt,annotationStorageSerializable:Nt}){const{map:Kt,transfers:qt}=Nt,Zt=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:Rt,cacheKey:Dt,annotationStorage:Kt},qt).getReader(),Ht=this._intentStates.get(Dt);Ht.streamReader=Zt;const Wt=()=>{Zt.read().then(({value:Ft,done:Gt})=>{if(Gt){Ht.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(Ft,Ht),Wt())},Ft=>{if(Ht.streamReader=null,!this._transport.destroyed){if(Ht.operatorList){Ht.operatorList.lastChunk=!0;for(const Gt of Ht.renderTasks)Gt.operatorListChanged();dn(this,et,ro).call(this,!0)}if(Ht.displayReadyCapability)Ht.displayReadyCapability.reject(Ft);else if(Ht.opListReadCapability)Ht.opListReadCapability.reject(Ft);else throw Ft}})};Wt()}_abortOperatorList({intentState:Rt,reason:Dt,force:Nt=!1}){if(Rt.streamReader){if(Rt.streamReaderCancelTimeout&&(clearTimeout(Rt.streamReaderCancelTimeout),Rt.streamReaderCancelTimeout=null),!Nt){if(Rt.renderTasks.size>0)return;if(Dt instanceof _display_utils.RenderingCancelledException){let Kt=RENDERING_CANCELLED_TIMEOUT;Dt.extraDelay>0&&Dt.extraDelay<1e3&&(Kt+=Dt.extraDelay),Rt.streamReaderCancelTimeout=setTimeout(()=>{Rt.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:Rt,reason:Dt,force:!0})},Kt);return}}if(Rt.streamReader.cancel(new _util.AbortException(Dt.message)).catch(()=>{}),Rt.streamReader=null,!this._transport.destroyed){for(const[Kt,qt]of this._intentStates)if(qt===Rt){this._intentStates.delete(Kt);break}this.cleanup()}}}get stats(){return this._stats}}s=new WeakMap,a=new WeakMap,et=new WeakSet,ro=function(Rt=!1){if(dn(this,ot,Bo).call(this),!Ct(this,a)||this.destroyed)return!1;if(Rt)return pn(this,s,setTimeout(()=>{pn(this,s,null),dn(this,et,ro).call(this,!1)},DELAYED_CLEANUP_TIMEOUT)),!1;for(const{renderTasks:Dt,operatorList:Nt}of this._intentStates.values())if(Dt.size>0||!Nt.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),pn(this,a,!1),!0},ot=new WeakSet,Bo=function(){Ct(this,s)&&(clearTimeout(Ct(this,s)),pn(this,s,null))},exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{constructor(){tn(this,ht,new Set);tn(this,ft,Promise.resolve())}postMessage(Rt,Dt){const Nt={data:structuredClone(Rt,Dt?{transfer:Dt}:null)};Ct(this,ft).then(()=>{for(const Kt of Ct(this,ht))Kt.call(this,Nt)})}addEventListener(Rt,Dt){Ct(this,ht).add(Dt)}removeEventListener(Rt,Dt){Ct(this,ht).delete(Dt)}terminate(){Ct(this,ht).clear()}}ht=new WeakMap,ft=new WeakMap,exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const Ot=(pt=document==null?void 0:document.currentScript)==null?void 0:pt.src;Ot&&(PDFWorkerUtil.fallbackWorkerSrc=Ot.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(Ot,Rt){let Dt;try{if(Dt=new URL(Ot),!Dt.origin||Dt.origin==="null")return!1}catch{return!1}const Nt=new URL(Rt,Dt);return Dt.origin===Nt.origin},PDFWorkerUtil.createCDNWrapper=function(Ot){const Rt=`importScripts("${Ot}");`;return URL.createObjectURL(new Blob([Rt]))}}const _PDFWorker=class _PDFWorker{constructor({name:Ot=null,port:Rt=null,verbosity:Dt=(0,_util.getVerbosityLevel)()}={}){var Nt;if(this.name=Ot,this.destroyed=!1,this.verbosity=Dt,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,Rt){if((Nt=Ct(_PDFWorker,mt))!=null&&Nt.has(Rt))throw new Error("Cannot use more than one PDFWorker per port.");(Ct(_PDFWorker,mt)||pn(_PDFWorker,mt,new WeakMap)).set(Rt,this),this._initializeFromPort(Rt);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(Ot){this._port=Ot,this._messageHandler=new _message_handler.MessageHandler("main","worker",Ot),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!_PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:Ot}=_PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,Ot)||(Ot=PDFWorkerUtil.createCDNWrapper(new URL(Ot,window.location).href));const Rt=new Worker(Ot),Dt=new _message_handler.MessageHandler("main","worker",Rt),Nt=()=>{Rt.removeEventListener("error",Kt),Dt.destroy(),Rt.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},Kt=()=>{this._webWorker||Nt()};Rt.addEventListener("error",Kt),Dt.on("test",jt=>{if(Rt.removeEventListener("error",Kt),this.destroyed){Nt();return}jt?(this._messageHandler=Dt,this._port=Rt,this._webWorker=Rt,this._readyCapability.resolve(),Dt.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),Dt.destroy(),Rt.terminate())}),Dt.on("ready",jt=>{if(Rt.removeEventListener("error",Kt),this.destroyed){Nt();return}try{qt()}catch{this._setupFakeWorker()}});const qt=()=>{const jt=new Uint8Array;Dt.send("test",jt,[jt.buffer])};qt();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),_PDFWorker._setupFakeWorkerGlobal.then(Ot=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const Rt=new LoopbackPort;this._port=Rt;const Dt=`fake${PDFWorkerUtil.fakeWorkerId++}`,Nt=new _message_handler.MessageHandler(Dt+"_worker",Dt,Rt);Ot.setup(Nt,Rt);const Kt=new _message_handler.MessageHandler(Dt,Dt+"_worker",Rt);this._messageHandler=Kt,this._readyCapability.resolve(),Kt.send("configure",{verbosity:this.verbosity})}).catch(Ot=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${Ot.message}".`))})}destroy(){var Ot;this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),(Ot=Ct(_PDFWorker,mt))==null||Ot.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(Ot){var Dt;if(!(Ot!=null&&Ot.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const Rt=(Dt=Ct(this,mt))==null?void 0:Dt.get(Ot.port);if(Rt){if(Rt._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return Rt}return new _PDFWorker(Ot)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){var Ot;try{return((Ot=globalThis.pdfjsWorker)==null?void 0:Ot.WorkerMessageHandler)||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}};mt=new WeakMap,tn(_PDFWorker,mt,void 0);let PDFWorker=_PDFWorker;exports.PDFWorker=PDFWorker;class WorkerTransport{constructor(Rt,Dt,Nt,Kt,qt){tn(this,Et);tn(this,gt,new Map);tn(this,_t,new Map);tn(this,yt,new Map);tn(this,St,null);this.messageHandler=Rt,this.loadingTask=Dt,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:Kt.ownerDocument,styleElement:Kt.styleElement}),this._params=Kt,this.canvasFactory=qt.canvasFactory,this.filterFactory=qt.filterFactory,this.cMapReaderFactory=qt.cMapReaderFactory,this.standardFontDataFactory=qt.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=Nt,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(Rt,Dt=_util.AnnotationMode.ENABLE,Nt=null,Kt=!1){let qt=_util.RenderingIntentFlag.DISPLAY,jt=_annotation_storage.SerializableEmpty;switch(Rt){case"any":qt=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":qt=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${Rt}`)}switch(Dt){case _util.AnnotationMode.DISABLE:qt+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:qt+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:qt+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,jt=(qt&_util.RenderingIntentFlag.PRINT&&Nt instanceof _annotation_storage.PrintAnnotationStorage?Nt:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${Dt}`)}return Kt&&(qt+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:qt,cacheKey:`${qt}_${jt.hash}`,annotationStorageSerializable:jt}}destroy(){var Nt;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,(Nt=Ct(this,St))==null||Nt.reject(new Error("Worker was destroyed during onPassword callback"));const Rt=[];for(const Kt of Ct(this,_t).values())Rt.push(Kt._destroy());Ct(this,_t).clear(),Ct(this,yt).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const Dt=this.messageHandler.sendWithPromise("Terminate",null);return Rt.push(Dt),Promise.all(Rt).then(()=>{var Kt;this.commonObjs.clear(),this.fontLoader.clear(),Ct(this,gt).clear(),this.filterFactory.destroy(),(Kt=this._networkStream)==null||Kt.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:Rt,loadingTask:Dt}=this;Rt.on("GetReader",(Nt,Kt)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=qt=>{this._lastProgress={loaded:qt.loaded,total:qt.total}},Kt.onPull=()=>{this._fullReader.read().then(function({value:qt,done:jt}){if(jt){Kt.close();return}(0,_util.assert)(qt instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),Kt.enqueue(new Uint8Array(qt),1,[qt])}).catch(qt=>{Kt.error(qt)})},Kt.onCancel=qt=>{this._fullReader.cancel(qt),Kt.ready.catch(jt=>{if(!this.destroyed)throw jt})}}),Rt.on("ReaderHeadersReady",Nt=>{const Kt=new _util.PromiseCapability,qt=this._fullReader;return qt.headersReady.then(()=>{var jt;(!qt.isStreamingSupported||!qt.isRangeSupported)&&(this._lastProgress&&((jt=Dt.onProgress)==null||jt.call(Dt,this._lastProgress)),qt.onProgress=Zt=>{var Ht;(Ht=Dt.onProgress)==null||Ht.call(Dt,{loaded:Zt.loaded,total:Zt.total})}),Kt.resolve({isStreamingSupported:qt.isStreamingSupported,isRangeSupported:qt.isRangeSupported,contentLength:qt.contentLength})},Kt.reject),Kt.promise}),Rt.on("GetRangeReader",(Nt,Kt)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const qt=this._networkStream.getRangeReader(Nt.begin,Nt.end);if(!qt){Kt.close();return}Kt.onPull=()=>{qt.read().then(function({value:jt,done:Zt}){if(Zt){Kt.close();return}(0,_util.assert)(jt instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),Kt.enqueue(new Uint8Array(jt),1,[jt])}).catch(jt=>{Kt.error(jt)})},Kt.onCancel=jt=>{qt.cancel(jt),Kt.ready.catch(Zt=>{if(!this.destroyed)throw Zt})}}),Rt.on("GetDoc",({pdfInfo:Nt})=>{this._numPages=Nt.numPages,this._htmlForXfa=Nt.htmlForXfa,delete Nt.htmlForXfa,Dt._capability.resolve(new PDFDocumentProxy(Nt,this))}),Rt.on("DocException",function(Nt){let Kt;switch(Nt.name){case"PasswordException":Kt=new _util.PasswordException(Nt.message,Nt.code);break;case"InvalidPDFException":Kt=new _util.InvalidPDFException(Nt.message);break;case"MissingPDFException":Kt=new _util.MissingPDFException(Nt.message);break;case"UnexpectedResponseException":Kt=new _util.UnexpectedResponseException(Nt.message,Nt.status);break;case"UnknownErrorException":Kt=new _util.UnknownErrorException(Nt.message,Nt.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}Dt._capability.reject(Kt)}),Rt.on("PasswordRequest",Nt=>{if(pn(this,St,new _util.PromiseCapability),Dt.onPassword){const Kt=qt=>{qt instanceof Error?Ct(this,St).reject(qt):Ct(this,St).resolve({password:qt})};try{Dt.onPassword(Kt,Nt.code)}catch(qt){Ct(this,St).reject(qt)}}else Ct(this,St).reject(new _util.PasswordException(Nt.message,Nt.code));return Ct(this,St).promise}),Rt.on("DataLoaded",Nt=>{var Kt;(Kt=Dt.onProgress)==null||Kt.call(Dt,{loaded:Nt.length,total:Nt.length}),this.downloadInfoCapability.resolve(Nt)}),Rt.on("StartRenderPage",Nt=>{if(this.destroyed)return;Ct(this,_t).get(Nt.pageIndex)._startRenderPage(Nt.transparency,Nt.cacheKey)}),Rt.on("commonobj",([Nt,Kt,qt])=>{var jt;if(!this.destroyed&&!this.commonObjs.has(Nt))switch(Kt){case"Font":const Zt=this._params;if("error"in qt){const Ft=qt.error;(0,_util.warn)(`Error during font loading: ${Ft}`),this.commonObjs.resolve(Nt,Ft);break}const Ht=Zt.pdfBug&&((jt=globalThis.FontInspector)!=null&&jt.enabled)?(Ft,Gt)=>globalThis.FontInspector.fontAdded(Ft,Gt):null,Wt=new _font_loader.FontFaceObject(qt,{isEvalSupported:Zt.isEvalSupported,disableFontFace:Zt.disableFontFace,ignoreErrors:Zt.ignoreErrors,inspectFont:Ht});this.fontLoader.bind(Wt).catch(Ft=>Rt.sendWithPromise("FontFallback",{id:Nt})).finally(()=>{!Zt.fontExtraProperties&&Wt.data&&(Wt.data=null),this.commonObjs.resolve(Nt,Wt)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(Nt,qt);break;default:throw new Error(`Got unknown common object type ${Kt}`)}}),Rt.on("obj",([Nt,Kt,qt,jt])=>{var Ht;if(this.destroyed)return;const Zt=Ct(this,_t).get(Kt);if(!Zt.objs.has(Nt))switch(qt){case"Image":if(Zt.objs.resolve(Nt,jt),jt){let Wt;if(jt.bitmap){const{width:Ft,height:Gt}=jt;Wt=Ft*Gt*4}else Wt=((Ht=jt.data)==null?void 0:Ht.length)||0;Wt>_util.MAX_IMAGE_SIZE_TO_CACHE&&(Zt._maybeCleanupAfterRender=!0)}break;case"Pattern":Zt.objs.resolve(Nt,jt);break;default:throw new Error(`Got unknown object type ${qt}`)}}),Rt.on("DocProgress",Nt=>{var Kt;this.destroyed||(Kt=Dt.onProgress)==null||Kt.call(Dt,{loaded:Nt.loaded,total:Nt.total})}),Rt.on("FetchBuiltInCMap",Nt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(Nt):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),Rt.on("FetchStandardFontData",Nt=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(Nt):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var Nt;this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:Rt,transfers:Dt}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:Rt,filename:((Nt=this._fullReader)==null?void 0:Nt.filename)??null},Dt).finally(()=>{this.annotationStorage.resetModified()})}getPage(Rt){if(!Number.isInteger(Rt)||Rt<=0||Rt>this._numPages)return Promise.reject(new Error("Invalid page request."));const Dt=Rt-1,Nt=Ct(this,yt).get(Dt);if(Nt)return Nt;const Kt=this.messageHandler.sendWithPromise("GetPage",{pageIndex:Dt}).then(qt=>{if(this.destroyed)throw new Error("Transport destroyed");const jt=new PDFPageProxy(Dt,qt,this,this._params.pdfBug);return Ct(this,_t).set(Dt,jt),jt});return Ct(this,yt).set(Dt,Kt),Kt}getPageIndex(Rt){return typeof Rt!="object"||Rt===null||!Number.isInteger(Rt.num)||Rt.num<0||!Number.isInteger(Rt.gen)||Rt.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:Rt.num,gen:Rt.gen})}getAnnotations(Rt,Dt){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:Rt,intent:Dt})}getFieldObjects(){return dn(this,Et,Wo).call(this,"GetFieldObjects")}hasJSActions(){return dn(this,Et,Wo).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(Rt){return typeof Rt!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:Rt})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return dn(this,Et,Wo).call(this,"GetDocJSActions")}getPageJSActions(Rt){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:Rt})}getStructTree(Rt){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:Rt})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(Rt=>new _optional_content_config.OptionalContentConfig(Rt))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const Rt="GetMetadata",Dt=Ct(this,gt).get(Rt);if(Dt)return Dt;const Nt=this.messageHandler.sendWithPromise(Rt,null).then(Kt=>{var qt,jt;return{info:Kt[0],metadata:Kt[1]?new _metadata.Metadata(Kt[1]):null,contentDispositionFilename:((qt=this._fullReader)==null?void 0:qt.filename)??null,contentLength:((jt=this._fullReader)==null?void 0:jt.contentLength)??null}});return Ct(this,gt).set(Rt,Nt),Nt}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(Rt=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const Dt of Ct(this,_t).values())if(!Dt.cleanup())throw new Error(`startCleanup: Page ${Dt.pageNumber} is currently rendering.`);this.commonObjs.clear(),Rt||this.fontLoader.clear(),Ct(this,gt).clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:Rt,enableXfa:Dt}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:Rt,enableXfa:Dt})}}gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,St=new WeakMap,Et=new WeakSet,Wo=function(Rt,Dt=null){const Nt=Ct(this,gt).get(Rt);if(Nt)return Nt;const Kt=this.messageHandler.sendWithPromise(Rt,Dt);return Ct(this,gt).set(Rt,Kt),Kt};class PDFObjects{constructor(){tn(this,Tt);tn(this,bt,Object.create(null))}get(Rt,Dt=null){if(Dt){const Kt=dn(this,Tt,_s).call(this,Rt);return Kt.capability.promise.then(()=>Dt(Kt.data)),null}const Nt=Ct(this,bt)[Rt];if(!(Nt!=null&&Nt.capability.settled))throw new Error(`Requesting object that isn't resolved yet ${Rt}.`);return Nt.data}has(Rt){const Dt=Ct(this,bt)[Rt];return(Dt==null?void 0:Dt.capability.settled)||!1}resolve(Rt,Dt=null){const Nt=dn(this,Tt,_s).call(this,Rt);Nt.data=Dt,Nt.capability.resolve()}clear(){var Rt;for(const Dt in Ct(this,bt)){const{data:Nt}=Ct(this,bt)[Dt];(Rt=Nt==null?void 0:Nt.bitmap)==null||Rt.close()}pn(this,bt,Object.create(null))}}bt=new WeakMap,Tt=new WeakSet,_s=function(Rt){var Dt;return(Dt=Ct(this,bt))[Rt]||(Dt[Rt]={capability:new _util.PromiseCapability,data:null})};class RenderTask{constructor(Rt){tn(this,Pt,null);pn(this,Pt,Rt),this.onContinue=null}get promise(){return Ct(this,Pt).capability.promise}cancel(Rt=0){Ct(this,Pt).cancel(null,Rt)}get separateAnnots(){const{separateAnnots:Rt}=Ct(this,Pt).operatorList;if(!Rt)return!1;const{annotationCanvasMap:Dt}=Ct(this,Pt);return Rt.form||Rt.canvas&&(Dt==null?void 0:Dt.size)>0}}Pt=new WeakMap,exports.RenderTask=RenderTask;const xt=class xt{constructor({callback:Rt,params:Dt,objs:Nt,commonObjs:Kt,annotationCanvasMap:qt,operatorList:jt,pageIndex:Zt,canvasFactory:Ht,filterFactory:Wt,useRequestAnimationFrame:Ft=!1,pdfBug:Gt=!1,pageColors:Jt=null}){this.callback=Rt,this.params=Dt,this.objs=Nt,this.commonObjs=Kt,this.annotationCanvasMap=qt,this.operatorListIdx=null,this.operatorList=jt,this._pageIndex=Zt,this.canvasFactory=Ht,this.filterFactory=Wt,this._pdfBug=Gt,this.pageColors=Jt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=Ft===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=Dt.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:Rt=!1,optionalContentConfig:Dt}){var Zt,Ht;if(this.cancelled)return;if(this._canvas){if(Ct(xt,At).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");Ct(xt,At).add(this._canvas)}this._pdfBug&&((Zt=globalThis.StepperManager)!=null&&Zt.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:Nt,viewport:Kt,transform:qt,background:jt}=this.params;this.gfx=new _canvas.CanvasGraphics(Nt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:Dt},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:qt,viewport:Kt,transparency:Rt,background:jt}),this.operatorListIdx=0,this.graphicsReady=!0,(Ht=this.graphicsReadyCallback)==null||Ht.call(this)}cancel(Rt=null,Dt=0){var Nt;this.running=!1,this.cancelled=!0,(Nt=this.gfx)==null||Nt.endDrawing(),Ct(xt,At).delete(this._canvas),this.callback(Rt||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,Dt))}operatorListChanged(){var Rt;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(Rt=this.stepper)==null||Rt.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),Ct(xt,At).delete(this._canvas),this.callback())))}};At=new WeakMap,tn(xt,At,new WeakSet);let InternalRenderTask=xt;const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(o,i,s)=>{var ft,pt,mt,Pl,_t;Object.defineProperty(i,"__esModule",{value:!0}),i.SerializableEmpty=i.PrintAnnotationStorage=i.AnnotationStorage=void 0;var a=s(1),et=s(4),tt=s(8);const ot=Object.freeze({map:null,hash:"",transfers:void 0});i.SerializableEmpty=ot;class dt{constructor(){tn(this,mt);tn(this,ft,!1);tn(this,pt,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(St,Et){const vt=Ct(this,pt).get(St);return vt===void 0?Et:Object.assign(Et,vt)}getRawValue(St){return Ct(this,pt).get(St)}remove(St){if(Ct(this,pt).delete(St),Ct(this,pt).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const Et of Ct(this,pt).values())if(Et instanceof et.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(St,Et){const vt=Ct(this,pt).get(St);let bt=!1;if(vt!==void 0)for(const[Tt,wt]of Object.entries(Et))vt[Tt]!==wt&&(bt=!0,vt[Tt]=wt);else bt=!0,Ct(this,pt).set(St,Et);bt&&dn(this,mt,Pl).call(this),Et instanceof et.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(Et.constructor._type)}has(St){return Ct(this,pt).has(St)}getAll(){return Ct(this,pt).size>0?(0,a.objectFromMap)(Ct(this,pt)):null}setAll(St){for(const[Et,vt]of Object.entries(St))this.setValue(Et,vt)}get size(){return Ct(this,pt).size}resetModified(){Ct(this,ft)&&(pn(this,ft,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new ht(this)}get serializable(){if(Ct(this,pt).size===0)return ot;const St=new Map,Et=new tt.MurmurHash3_64,vt=[],bt=Object.create(null);let Tt=!1;for(const[wt,Pt]of Ct(this,pt)){const At=Pt instanceof et.AnnotationEditor?Pt.serialize(!1,bt):Pt;At&&(St.set(wt,At),Et.update(`${wt}:${JSON.stringify(At)}`),Tt||(Tt=!!At.bitmap))}if(Tt)for(const wt of St.values())wt.bitmap&&vt.push(wt.bitmap);return St.size>0?{map:St,hash:Et.hexdigest(),transfers:vt}:ot}}ft=new WeakMap,pt=new WeakMap,mt=new WeakSet,Pl=function(){Ct(this,ft)||(pn(this,ft,!0),typeof this.onSetModified=="function"&&this.onSetModified())},i.AnnotationStorage=dt;class ht extends dt{constructor(Et){super();tn(this,_t,void 0);const{map:vt,hash:bt,transfers:Tt}=Et.serializable,wt=structuredClone(vt,Tt?{transfer:Tt}:null);pn(this,_t,{map:wt,hash:bt,transfers:Tt})}get print(){(0,a.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return Ct(this,_t)}}_t=new WeakMap,i.PrintAnnotationStorage=ht},(o,i,s)=>{var ht,ft,pt,mt,gt,_t,yt,St,Et,vt,bt,Tt,wt,Pt,At,ys,Ot,vs,Dt,Es,Kt,bs,jt,Cl,Ht,Rl,Ft,Il,Jt,Ss,bn,xl;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditor=void 0;var a=s(5),et=s(1),tt=s(6);const It=class It{constructor($t){tn(this,At);tn(this,Ot);tn(this,Kt);tn(this,jt);tn(this,Ht);tn(this,Ft);tn(this,Jt);tn(this,bn);tn(this,ht,"");tn(this,ft,!1);tn(this,pt,null);tn(this,mt,null);tn(this,gt,null);tn(this,_t,!1);tn(this,yt,null);tn(this,St,this.focusin.bind(this));tn(this,Et,this.focusout.bind(this));tn(this,vt,!1);tn(this,bt,!1);tn(this,Tt,!1);ur(this,"_initialOptions",Object.create(null));ur(this,"_uiManager",null);ur(this,"_focusEventsAllowed",!0);ur(this,"_l10nPromise",null);tn(this,wt,!1);tn(this,Pt,It._zIndex++);this.constructor===It&&(0,et.unreachable)("Cannot initialize AnnotationEditor."),this.parent=$t.parent,this.id=$t.id,this.width=this.height=null,this.pageIndex=$t.parent.pageIndex,this.name=$t.name,this.div=null,this._uiManager=$t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=$t.isCentered,this._structTreeParentId=null;const{rotation:Lt,rawDims:{pageWidth:Vt,pageHeight:zt,pageX:Xt,pageY:Yt}}=this.parent.viewport;this.rotation=Lt,this.pageRotation=(360+Lt-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[Vt,zt],this.pageTranslation=[Xt,Yt];const[un,gn]=this.parentDimensions;this.x=$t.x/un,this.y=$t.y/gn,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,et.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement($t){const Lt=new dt({id:$t.parent.getNextId(),parent:$t.parent,uiManager:$t._uiManager});Lt.annotationElementId=$t.annotationElementId,Lt.deleted=!0,Lt._uiManager.addToAnnotationStorage(Lt)}static initialize($t,Lt=null){if(It._l10nPromise||(It._l10nPromise=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(zt=>[zt,$t.get(zt)]))),Lt!=null&&Lt.strings)for(const zt of Lt.strings)It._l10nPromise.set(zt,$t.get(zt));if(It._borderLineWidth!==-1)return;const Vt=getComputedStyle(document.documentElement);It._borderLineWidth=parseFloat(Vt.getPropertyValue("--outline-width"))||0}static updateDefaultParams($t,Lt){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting($t){return!1}static paste($t,Lt){(0,et.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return Ct(this,wt)}set _isDraggable($t){var Lt;pn(this,wt,$t),(Lt=this.div)==null||Lt.classList.toggle("draggable",$t)}center(){const[$t,Lt]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*Lt/($t*2),this.y+=this.width*$t/(Lt*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*Lt/($t*2),this.y-=this.width*$t/(Lt*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands($t){this._uiManager.addCommands($t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=Ct(this,Pt)}setParent($t){$t!==null&&(this.pageIndex=$t.pageIndex,this.pageDimensions=$t.pageDimensions),this.parent=$t}focusin($t){this._focusEventsAllowed&&(Ct(this,vt)?pn(this,vt,!1):this.parent.setSelected(this))}focusout($t){var Vt;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const Lt=$t.relatedTarget;Lt!=null&&Lt.closest(`#${this.id}`)||($t.preventDefault(),(Vt=this.parent)!=null&&Vt.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt($t,Lt,Vt,zt){const[Xt,Yt]=this.parentDimensions;[Vt,zt]=this.screenToPageTranslation(Vt,zt),this.x=($t+Vt)/Xt,this.y=(Lt+zt)/Yt,this.fixAndSetPosition()}translate($t,Lt){dn(this,At,ys).call(this,this.parentDimensions,$t,Lt)}translateInPage($t,Lt){dn(this,At,ys).call(this,this.pageDimensions,$t,Lt),this.div.scrollIntoView({block:"nearest"})}drag($t,Lt){const[Vt,zt]=this.parentDimensions;if(this.x+=$t/Vt,this.y+=Lt/zt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:yn,y:Tn}=this.div.getBoundingClientRect();this.parent.findNewParent(this,yn,Tn)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:Xt,y:Yt}=this;const[un,gn]=dn(this,Ot,vs).call(this);Xt+=un,Yt+=gn,this.div.style.left=`${(100*Xt).toFixed(2)}%`,this.div.style.top=`${(100*Yt).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}fixAndSetPosition(){const[$t,Lt]=this.pageDimensions;let{x:Vt,y:zt,width:Xt,height:Yt}=this;switch(Xt*=$t,Yt*=Lt,Vt*=$t,zt*=Lt,this.rotation){case 0:Vt=Math.max(0,Math.min($t-Xt,Vt)),zt=Math.max(0,Math.min(Lt-Yt,zt));break;case 90:Vt=Math.max(0,Math.min($t-Yt,Vt)),zt=Math.min(Lt,Math.max(Xt,zt));break;case 180:Vt=Math.min($t,Math.max(Xt,Vt)),zt=Math.min(Lt,Math.max(Yt,zt));break;case 270:Vt=Math.min($t,Math.max(Yt,Vt)),zt=Math.max(0,Math.min(Lt-Xt,zt));break}this.x=Vt/=$t,this.y=zt/=Lt;const[un,gn]=dn(this,Ot,vs).call(this);Vt+=un,zt+=gn;const{style:yn}=this.div;yn.left=`${(100*Vt).toFixed(2)}%`,yn.top=`${(100*zt).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation($t,Lt){var Vt;return dn(Vt=It,Dt,Es).call(Vt,$t,Lt,this.parentRotation)}pageTranslationToScreen($t,Lt){var Vt;return dn(Vt=It,Dt,Es).call(Vt,$t,Lt,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:$t,pageDimensions:[Lt,Vt]}=this,zt=Lt*$t,Xt=Vt*$t;return et.FeatureTest.isCSSRoundSupported?[Math.round(zt),Math.round(Xt)]:[zt,Xt]}setDims($t,Lt){var Xt;const[Vt,zt]=this.parentDimensions;this.div.style.width=`${(100*$t/Vt).toFixed(2)}%`,Ct(this,_t)||(this.div.style.height=`${(100*Lt/zt).toFixed(2)}%`),(Xt=Ct(this,pt))==null||Xt.classList.toggle("small",$t<It.SMALL_EDITOR_SIZE||Lt<It.SMALL_EDITOR_SIZE)}fixDims(){const{style:$t}=this.div,{height:Lt,width:Vt}=$t,zt=Vt.endsWith("%"),Xt=!Ct(this,_t)&&Lt.endsWith("%");if(zt&&Xt)return;const[Yt,un]=this.parentDimensions;zt||($t.width=`${(100*parseFloat(Vt)/Yt).toFixed(2)}%`),!Ct(this,_t)&&!Xt&&($t.height=`${(100*parseFloat(Lt)/un).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}async addAltTextButton(){if(Ct(this,pt))return;const $t=pn(this,pt,document.createElement("button"));$t.className="altText";const Lt=await It._l10nPromise.get("editor_alt_text_button_label");$t.textContent=Lt,$t.setAttribute("aria-label",Lt),$t.tabIndex="0",$t.addEventListener("contextmenu",tt.noContextMenu),$t.addEventListener("pointerdown",Vt=>Vt.stopPropagation()),$t.addEventListener("click",Vt=>{Vt.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),$t.addEventListener("keydown",Vt=>{Vt.target===$t&&Vt.key==="Enter"&&(Vt.preventDefault(),this._uiManager.editAltText(this))}),dn(this,Jt,Ss).call(this),this.div.append($t),It.SMALL_EDITOR_SIZE||(It.SMALL_EDITOR_SIZE=Math.min(128,Math.round($t.getBoundingClientRect().width*1.4)))}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:Ct(this,ht),decorative:Ct(this,ft)}}set altTextData({altText:$t,decorative:Lt}){Ct(this,ht)===$t&&Ct(this,ft)===Lt||(pn(this,ht,$t),pn(this,ft,Lt),dn(this,Jt,Ss).call(this))}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",Ct(this,St)),this.div.addEventListener("focusout",Ct(this,Et));const[$t,Lt]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*Lt/$t).toFixed(2)}%`,this.div.style.maxHeight=`${(100*$t/Lt).toFixed(2)}%`);const[Vt,zt]=this.getInitialTranslation();return this.translate(Vt,zt),(0,a.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown($t){const{isMac:Lt}=et.FeatureTest.platform;if($t.button!==0||$t.ctrlKey&&Lt){$t.preventDefault();return}pn(this,vt,!0),dn(this,bn,xl).call(this,$t)}moveInDOM(){var $t;($t=this.parent)==null||$t.moveEditorInDOM(this)}_setParentAndPosition($t,Lt,Vt){$t.changeParent(this),this.x=Lt,this.y=Vt,this.fixAndSetPosition()}getRect($t,Lt){const Vt=this.parentScale,[zt,Xt]=this.pageDimensions,[Yt,un]=this.pageTranslation,gn=$t/Vt,yn=Lt/Vt,Tn=this.x*zt,Rn=this.y*Xt,Sn=this.width*zt,Fn=this.height*Xt;switch(this.rotation){case 0:return[Tn+gn+Yt,Xt-Rn-yn-Fn+un,Tn+gn+Sn+Yt,Xt-Rn-yn+un];case 90:return[Tn+yn+Yt,Xt-Rn+gn+un,Tn+yn+Fn+Yt,Xt-Rn+gn+Sn+un];case 180:return[Tn-gn-Sn+Yt,Xt-Rn+yn+un,Tn-gn+Yt,Xt-Rn+yn+Fn+un];case 270:return[Tn-yn-Fn+Yt,Xt-Rn-gn-Sn+un,Tn-yn+Yt,Xt-Rn-gn+un];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords($t,Lt){const[Vt,zt,Xt,Yt]=$t,un=Xt-Vt,gn=Yt-zt;switch(this.rotation){case 0:return[Vt,Lt-Yt,un,gn];case 90:return[Vt,Lt-zt,gn,un];case 180:return[Xt,Lt-zt,un,gn];case 270:return[Xt,Lt-Yt,gn,un];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){pn(this,Tt,!0)}disableEditMode(){pn(this,Tt,!1)}isInEditMode(){return Ct(this,Tt)}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){var $t,Lt;($t=this.div)==null||$t.addEventListener("focusin",Ct(this,St)),(Lt=this.div)==null||Lt.addEventListener("focusout",Ct(this,Et))}serialize($t=!1,Lt=null){(0,et.unreachable)("An editor must be serializable")}static deserialize($t,Lt,Vt){const zt=new this.prototype.constructor({parent:Lt,id:Lt.getNextId(),uiManager:Vt});zt.rotation=$t.rotation;const[Xt,Yt]=zt.pageDimensions,[un,gn,yn,Tn]=zt.getRectInCurrentCoords($t.rect,Yt);return zt.x=un/Xt,zt.y=gn/Yt,zt.width=yn/Xt,zt.height=Tn/Yt,zt}remove(){var $t;this.div.removeEventListener("focusin",Ct(this,St)),this.div.removeEventListener("focusout",Ct(this,Et)),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),($t=Ct(this,pt))==null||$t.remove(),pn(this,pt,null),pn(this,mt,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(dn(this,jt,Cl).call(this),Ct(this,yt).classList.remove("hidden"))}select(){var $t;this.makeResizable(),($t=this.div)==null||$t.classList.add("selectedEditor")}unselect(){var $t,Lt,Vt;($t=Ct(this,yt))==null||$t.classList.add("hidden"),(Lt=this.div)==null||Lt.classList.remove("selectedEditor"),(Vt=this.div)!=null&&Vt.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams($t,Lt){}disableEditing(){Ct(this,pt)&&(Ct(this,pt).hidden=!0)}enableEditing(){Ct(this,pt)&&(Ct(this,pt).hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return Ct(this,bt)}set isEditing($t){pn(this,bt,$t),this.parent&&($t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio($t,Lt){pn(this,_t,!0);const Vt=$t/Lt,{style:zt}=this.div;zt.aspectRatio=Vt,zt.height="auto"}static get MIN_SIZE(){return 16}};ht=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,St=new WeakMap,Et=new WeakMap,vt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,wt=new WeakMap,Pt=new WeakMap,At=new WeakSet,ys=function([$t,Lt],Vt,zt){[Vt,zt]=this.screenToPageTranslation(Vt,zt),this.x+=Vt/$t,this.y+=zt/Lt,this.fixAndSetPosition()},Ot=new WeakSet,vs=function(){const[$t,Lt]=this.parentDimensions,{_borderLineWidth:Vt}=It,zt=Vt/$t,Xt=Vt/Lt;switch(this.rotation){case 90:return[-zt,Xt];case 180:return[zt,Xt];case 270:return[zt,-Xt];default:return[-zt,-Xt]}},Dt=new WeakSet,Es=function($t,Lt,Vt){switch(Vt){case 90:return[Lt,-$t];case 180:return[-$t,-Lt];case 270:return[-Lt,$t];default:return[$t,Lt]}},Kt=new WeakSet,bs=function($t){switch($t){case 90:{const[Lt,Vt]=this.pageDimensions;return[0,-Lt/Vt,Vt/Lt,0]}case 180:return[-1,0,0,-1];case 270:{const[Lt,Vt]=this.pageDimensions;return[0,Lt/Vt,-Vt/Lt,0]}default:return[1,0,0,1]}},jt=new WeakSet,Cl=function(){if(Ct(this,yt))return;pn(this,yt,document.createElement("div")),Ct(this,yt).classList.add("resizers");const $t=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||$t.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const Lt of $t){const Vt=document.createElement("div");Ct(this,yt).append(Vt),Vt.classList.add("resizer",Lt),Vt.addEventListener("pointerdown",dn(this,Ht,Rl).bind(this,Lt)),Vt.addEventListener("contextmenu",tt.noContextMenu)}this.div.prepend(Ct(this,yt))},Ht=new WeakSet,Rl=function($t,Lt){Lt.preventDefault();const{isMac:Vt}=et.FeatureTest.platform;if(Lt.button!==0||Lt.ctrlKey&&Vt)return;const zt=dn(this,Ft,Il).bind(this,$t),Xt=this._isDraggable;this._isDraggable=!1;const Yt={passive:!0,capture:!0};window.addEventListener("pointermove",zt,Yt);const un=this.x,gn=this.y,yn=this.width,Tn=this.height,Rn=this.parent.div.style.cursor,Sn=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(Lt.target).cursor;const Fn=()=>{this._isDraggable=Xt,window.removeEventListener("pointerup",Fn),window.removeEventListener("blur",Fn),window.removeEventListener("pointermove",zt,Yt),this.parent.div.style.cursor=Rn,this.div.style.cursor=Sn;const Dn=this.x,xn=this.y,On=this.width,wn=this.height;Dn===un&&xn===gn&&On===yn&&wn===Tn||this.addCommands({cmd:()=>{this.width=On,this.height=wn,this.x=Dn,this.y=xn;const[fn,_n]=this.parentDimensions;this.setDims(fn*On,_n*wn),this.fixAndSetPosition()},undo:()=>{this.width=yn,this.height=Tn,this.x=un,this.y=gn;const[fn,_n]=this.parentDimensions;this.setDims(fn*yn,_n*Tn),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",Fn),window.addEventListener("blur",Fn)},Ft=new WeakSet,Il=function($t,Lt){const[Vt,zt]=this.parentDimensions,Xt=this.x,Yt=this.y,un=this.width,gn=this.height,yn=It.MIN_SIZE/Vt,Tn=It.MIN_SIZE/zt,Rn=Mn=>Math.round(Mn*1e4)/1e4,Sn=dn(this,Kt,bs).call(this,this.rotation),Fn=(Mn,$n)=>[Sn[0]*Mn+Sn[2]*$n,Sn[1]*Mn+Sn[3]*$n],Dn=dn(this,Kt,bs).call(this,360-this.rotation),xn=(Mn,$n)=>[Dn[0]*Mn+Dn[2]*$n,Dn[1]*Mn+Dn[3]*$n];let On,wn,fn=!1,_n=!1;switch($t){case"topLeft":fn=!0,On=(Mn,$n)=>[0,0],wn=(Mn,$n)=>[Mn,$n];break;case"topMiddle":On=(Mn,$n)=>[Mn/2,0],wn=(Mn,$n)=>[Mn/2,$n];break;case"topRight":fn=!0,On=(Mn,$n)=>[Mn,0],wn=(Mn,$n)=>[0,$n];break;case"middleRight":_n=!0,On=(Mn,$n)=>[Mn,$n/2],wn=(Mn,$n)=>[0,$n/2];break;case"bottomRight":fn=!0,On=(Mn,$n)=>[Mn,$n],wn=(Mn,$n)=>[0,0];break;case"bottomMiddle":On=(Mn,$n)=>[Mn/2,$n],wn=(Mn,$n)=>[Mn/2,0];break;case"bottomLeft":fn=!0,On=(Mn,$n)=>[0,$n],wn=(Mn,$n)=>[Mn,0];break;case"middleLeft":_n=!0,On=(Mn,$n)=>[0,$n/2],wn=(Mn,$n)=>[Mn,$n/2];break}const Cn=On(un,gn),Ln=wn(un,gn);let Vn=Fn(...Ln);const Jn=Rn(Xt+Vn[0]),Xn=Rn(Yt+Vn[1]);let Yn=1,Qn=1,[jn,zn]=this.screenToPageTranslation(Lt.movementX,Lt.movementY);if([jn,zn]=xn(jn/Vt,zn/zt),fn){const Mn=Math.hypot(un,gn);Yn=Qn=Math.max(Math.min(Math.hypot(Ln[0]-Cn[0]-jn,Ln[1]-Cn[1]-zn)/Mn,1/un,1/gn),yn/un,Tn/gn)}else _n?Yn=Math.max(yn,Math.min(1,Math.abs(Ln[0]-Cn[0]-jn)))/un:Qn=Math.max(Tn,Math.min(1,Math.abs(Ln[1]-Cn[1]-zn)))/gn;const qn=Rn(un*Yn),vn=Rn(gn*Qn);Vn=Fn(...wn(qn,vn));const cn=Jn-Vn[0],ln=Xn-Vn[1];this.width=qn,this.height=vn,this.x=cn,this.y=ln,this.setDims(Vt*qn,zt*vn),this.fixAndSetPosition()},Jt=new WeakSet,Ss=async function(){var Vt;const $t=Ct(this,pt);if(!$t)return;if(!Ct(this,ht)&&!Ct(this,ft)){$t.classList.remove("done"),(Vt=Ct(this,mt))==null||Vt.remove();return}It._l10nPromise.get("editor_alt_text_edit_button_label").then(zt=>{$t.setAttribute("aria-label",zt)});let Lt=Ct(this,mt);if(!Lt){pn(this,mt,Lt=document.createElement("span")),Lt.className="tooltip",Lt.setAttribute("role","tooltip");const zt=Lt.id=`alt-text-tooltip-${this.id}`;$t.setAttribute("aria-describedby",zt);const Xt=100;$t.addEventListener("mouseenter",()=>{pn(this,gt,setTimeout(()=>{pn(this,gt,null),Ct(this,mt).classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},Xt))}),$t.addEventListener("mouseleave",()=>{var Yt;clearTimeout(Ct(this,gt)),pn(this,gt,null),(Yt=Ct(this,mt))==null||Yt.classList.remove("show")})}$t.classList.add("done"),Lt.innerText=Ct(this,ft)?await It._l10nPromise.get("editor_alt_text_decorative_tooltip"):Ct(this,ht),Lt.parentNode||$t.append(Lt)},bn=new WeakSet,xl=function($t){if(!this._isDraggable)return;const Lt=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let Vt,zt;Lt&&(Vt={passive:!0,capture:!0},zt=Yt=>{const[un,gn]=this.screenToPageTranslation(Yt.movementX,Yt.movementY);this._uiManager.dragSelectedEditors(un,gn)},window.addEventListener("pointermove",zt,Vt));const Xt=()=>{if(window.removeEventListener("pointerup",Xt),window.removeEventListener("blur",Xt),Lt&&window.removeEventListener("pointermove",zt,Vt),pn(this,vt,!1),!this._uiManager.endDragSession()){const{isMac:Yt}=et.FeatureTest.platform;$t.ctrlKey&&!Yt||$t.shiftKey||$t.metaKey&&Yt?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",Xt),window.addEventListener("blur",Xt)},tn(It,Dt),ur(It,"_borderLineWidth",-1),ur(It,"_colorManager",new a.ColorManager),ur(It,"_zIndex",1),ur(It,"SMALL_EDITOR_SIZE",0);let ot=It;i.AnnotationEditor=ot;class dt extends ot{constructor($t){super($t),this.annotationElementId=$t.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(o,i,s)=>{var _t,yt,St,Et,vt,Ts,wt,Pt,At,xt,Ot,$l,Nt,Kt,qt,jt,Zt,Ht,Wt,Ft,Gt,Jt,on,bn,Ut,It,Mt,$t,Lt,Vt,zt,Xt,Yt,un,gn,yn,Tn,Rn,Sn,Fn,Dn,xn,On,wn,fn,_n,Cn,Ol,Vn,As,Xn,Ps,Qn,zo,zn,Cs,vn,ws,ln,br,$n,So,cr,Ml,nn,Nl,rn,Rs,In,To,Pn,Is;Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardManager=i.CommandManager=i.ColorManager=i.AnnotationEditorUIManager=void 0,i.bindEvents=tt,i.opacityToHex=ot;var a=s(1),et=s(6);function tt(Qt,kt,Bt){for(const en of Bt)kt.addEventListener(en,Qt[en].bind(Qt))}function ot(Qt){return Math.round(Math.min(255,Math.max(1,255*Qt))).toString(16).padStart(2,"0")}class dt{constructor(){tn(this,_t,0)}getId(){return`${a.AnnotationEditorPrefix}${Dr(this,_t)._++}`}}_t=new WeakMap;const Tt=class Tt{constructor(){tn(this,vt);tn(this,yt,(0,a.getUuid)());tn(this,St,0);tn(this,Et,null)}static get _isSVGFittingCanvas(){const kt='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',en=new OffscreenCanvas(1,3).getContext("2d"),sn=new Image;sn.src=kt;const hn=sn.decode().then(()=>(en.drawImage(sn,0,0,1,1,0,0,1,3),new Uint32Array(en.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,a.shadow)(this,"_isSVGFittingCanvas",hn)}async getFromFile(kt){const{lastModified:Bt,name:en,size:sn,type:hn}=kt;return dn(this,vt,Ts).call(this,`${Bt}_${en}_${sn}_${hn}`,kt)}async getFromUrl(kt){return dn(this,vt,Ts).call(this,kt,kt)}async getFromId(kt){Ct(this,Et)||pn(this,Et,new Map);const Bt=Ct(this,Et).get(kt);return Bt?Bt.bitmap?(Bt.refCounter+=1,Bt):Bt.file?this.getFromFile(Bt.file):this.getFromUrl(Bt.url):null}getSvgUrl(kt){const Bt=Ct(this,Et).get(kt);return Bt!=null&&Bt.isSvg?Bt.svgUrl:null}deleteId(kt){Ct(this,Et)||pn(this,Et,new Map);const Bt=Ct(this,Et).get(kt);Bt&&(Bt.refCounter-=1,Bt.refCounter===0&&(Bt.bitmap=null))}isValidId(kt){return kt.startsWith(`image_${Ct(this,yt)}_`)}};yt=new WeakMap,St=new WeakMap,Et=new WeakMap,vt=new WeakSet,Ts=async function(kt,Bt){Ct(this,Et)||pn(this,Et,new Map);let en=Ct(this,Et).get(kt);if(en===null)return null;if(en!=null&&en.bitmap)return en.refCounter+=1,en;try{en||(en={bitmap:null,id:`image_${Ct(this,yt)}_${Dr(this,St)._++}`,refCounter:0,isSvg:!1});let sn;if(typeof Bt=="string"){en.url=Bt;const hn=await fetch(Bt);if(!hn.ok)throw new Error(hn.statusText);sn=await hn.blob()}else sn=en.file=Bt;if(sn.type==="image/svg+xml"){const hn=Tt._isSVGFittingCanvas,En=new FileReader,Nn=new Image,Bn=new Promise((Un,er)=>{Nn.onload=()=>{en.bitmap=Nn,en.isSvg=!0,Un()},En.onload=async()=>{const Gn=en.svgUrl=En.result;Nn.src=await hn?`${Gn}#svgView(preserveAspectRatio(none))`:Gn},Nn.onerror=En.onerror=er});En.readAsDataURL(sn),await Bn}else en.bitmap=await createImageBitmap(sn);en.refCounter=1}catch(sn){console.error(sn),en=null}return Ct(this,Et).set(kt,en),en&&Ct(this,Et).set(en.id,en),en};let ht=Tt;class ft{constructor(kt=128){tn(this,wt,[]);tn(this,Pt,!1);tn(this,At,void 0);tn(this,xt,-1);pn(this,At,kt)}add({cmd:kt,undo:Bt,mustExec:en,type:sn=NaN,overwriteIfSameType:hn=!1,keepUndo:En=!1}){if(en&&kt(),Ct(this,Pt))return;const Nn={cmd:kt,undo:Bt,type:sn};if(Ct(this,xt)===-1){Ct(this,wt).length>0&&(Ct(this,wt).length=0),pn(this,xt,0),Ct(this,wt).push(Nn);return}if(hn&&Ct(this,wt)[Ct(this,xt)].type===sn){En&&(Nn.undo=Ct(this,wt)[Ct(this,xt)].undo),Ct(this,wt)[Ct(this,xt)]=Nn;return}const Bn=Ct(this,xt)+1;Bn===Ct(this,At)?Ct(this,wt).splice(0,1):(pn(this,xt,Bn),Bn<Ct(this,wt).length&&Ct(this,wt).splice(Bn)),Ct(this,wt).push(Nn)}undo(){Ct(this,xt)!==-1&&(pn(this,Pt,!0),Ct(this,wt)[Ct(this,xt)].undo(),pn(this,Pt,!1),pn(this,xt,Ct(this,xt)-1))}redo(){Ct(this,xt)<Ct(this,wt).length-1&&(pn(this,xt,Ct(this,xt)+1),pn(this,Pt,!0),Ct(this,wt)[Ct(this,xt)].cmd(),pn(this,Pt,!1))}hasSomethingToUndo(){return Ct(this,xt)!==-1}hasSomethingToRedo(){return Ct(this,xt)<Ct(this,wt).length-1}destroy(){pn(this,wt,null)}}wt=new WeakMap,Pt=new WeakMap,At=new WeakMap,xt=new WeakMap,i.CommandManager=ft;class pt{constructor(kt){tn(this,Ot);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:Bt}=a.FeatureTest.platform;for(const[en,sn,hn={}]of kt)for(const En of en){const Nn=En.startsWith("mac+");Bt&&Nn?(this.callbacks.set(En.slice(4),{callback:sn,options:hn}),this.allKeys.add(En.split("+").at(-1))):!Bt&&!Nn&&(this.callbacks.set(En,{callback:sn,options:hn}),this.allKeys.add(En.split("+").at(-1)))}}exec(kt,Bt){if(!this.allKeys.has(Bt.key))return;const en=this.callbacks.get(dn(this,Ot,$l).call(this,Bt));if(!en)return;const{callback:sn,options:{bubbles:hn=!1,args:En=[],checker:Nn=null}}=en;Nn&&!Nn(kt,Bt)||(sn.bind(kt,...En)(),hn||(Bt.stopPropagation(),Bt.preventDefault()))}}Ot=new WeakSet,$l=function(kt){kt.altKey&&this.buffer.push("alt"),kt.ctrlKey&&this.buffer.push("ctrl"),kt.metaKey&&this.buffer.push("meta"),kt.shiftKey&&this.buffer.push("shift"),this.buffer.push(kt.key);const Bt=this.buffer.join("+");return this.buffer.length=0,Bt},i.KeyboardManager=pt;const Dt=class Dt{get _colors(){const kt=new Map([["CanvasText",null],["Canvas",null]]);return(0,et.getColorValues)(kt),(0,a.shadow)(this,"_colors",kt)}convert(kt){const Bt=(0,et.getRGB)(kt);if(!window.matchMedia("(forced-colors: active)").matches)return Bt;for(const[en,sn]of this._colors)if(sn.every((hn,En)=>hn===Bt[En]))return Dt._colorsMapping.get(en);return Bt}getHexCode(kt){const Bt=this._colors.get(kt);return Bt?a.Util.makeHexColor(...Bt):kt}};ur(Dt,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let mt=Dt;i.ColorManager=mt;const kn=class kn{constructor(kt,Bt,en,sn,hn,En){tn(this,Cn);tn(this,Vn);tn(this,Xn);tn(this,Qn);tn(this,zn);tn(this,vn);tn(this,ln);tn(this,$n);tn(this,cr);tn(this,nn);tn(this,rn);tn(this,In);tn(this,Pn);tn(this,Nt,null);tn(this,Kt,new Map);tn(this,qt,new Map);tn(this,jt,null);tn(this,Zt,null);tn(this,Ht,new ft);tn(this,Wt,0);tn(this,Ft,new Set);tn(this,Gt,null);tn(this,Jt,null);tn(this,on,new Set);tn(this,bn,null);tn(this,Ut,new dt);tn(this,It,!1);tn(this,Mt,!1);tn(this,$t,null);tn(this,Lt,a.AnnotationEditorType.NONE);tn(this,Vt,new Set);tn(this,zt,null);tn(this,Xt,this.blur.bind(this));tn(this,Yt,this.focus.bind(this));tn(this,un,this.copy.bind(this));tn(this,gn,this.cut.bind(this));tn(this,yn,this.paste.bind(this));tn(this,Tn,this.keydown.bind(this));tn(this,Rn,this.onEditingAction.bind(this));tn(this,Sn,this.onPageChanging.bind(this));tn(this,Fn,this.onScaleChanging.bind(this));tn(this,Dn,this.onRotationChanging.bind(this));tn(this,xn,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1});tn(this,On,[0,0]);tn(this,wn,null);tn(this,fn,null);tn(this,_n,null);pn(this,fn,kt),pn(this,_n,Bt),pn(this,jt,en),this._eventBus=sn,this._eventBus._on("editingaction",Ct(this,Rn)),this._eventBus._on("pagechanging",Ct(this,Sn)),this._eventBus._on("scalechanging",Ct(this,Fn)),this._eventBus._on("rotationchanging",Ct(this,Dn)),pn(this,Zt,hn.annotationStorage),pn(this,bn,hn.filterFactory),pn(this,zt,En),this.viewParameters={realScale:et.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}static get _keyboardManager(){const kt=kn.prototype,Bt=hn=>{const{activeElement:En}=document;return En&&Ct(hn,fn).contains(En)&&hn.hasSomethingToControl()},en=this.TRANSLATE_SMALL,sn=this.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new pt([[["ctrl+a","mac+meta+a"],kt.selectAll],[["ctrl+z","mac+meta+z"],kt.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],kt.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],kt.delete],[["Escape","mac+Escape"],kt.unselectAll],[["ArrowLeft","mac+ArrowLeft"],kt.translateSelectedEditors,{args:[-en,0],checker:Bt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],kt.translateSelectedEditors,{args:[-sn,0],checker:Bt}],[["ArrowRight","mac+ArrowRight"],kt.translateSelectedEditors,{args:[en,0],checker:Bt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],kt.translateSelectedEditors,{args:[sn,0],checker:Bt}],[["ArrowUp","mac+ArrowUp"],kt.translateSelectedEditors,{args:[0,-en],checker:Bt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],kt.translateSelectedEditors,{args:[0,-sn],checker:Bt}],[["ArrowDown","mac+ArrowDown"],kt.translateSelectedEditors,{args:[0,en],checker:Bt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],kt.translateSelectedEditors,{args:[0,sn],checker:Bt}]]))}destroy(){dn(this,Qn,zo).call(this),dn(this,Vn,As).call(this),this._eventBus._off("editingaction",Ct(this,Rn)),this._eventBus._off("pagechanging",Ct(this,Sn)),this._eventBus._off("scalechanging",Ct(this,Fn)),this._eventBus._off("rotationchanging",Ct(this,Dn));for(const kt of Ct(this,qt).values())kt.destroy();Ct(this,qt).clear(),Ct(this,Kt).clear(),Ct(this,on).clear(),pn(this,Nt,null),Ct(this,Vt).clear(),Ct(this,Ht).destroy(),Ct(this,jt).destroy()}get hcmFilter(){return(0,a.shadow)(this,"hcmFilter",Ct(this,zt)?Ct(this,bn).addHCMFilter(Ct(this,zt).foreground,Ct(this,zt).background):"none")}get direction(){return(0,a.shadow)(this,"direction",getComputedStyle(Ct(this,fn)).direction)}editAltText(kt){var Bt;(Bt=Ct(this,jt))==null||Bt.editAltText(this,kt)}onPageChanging({pageNumber:kt}){pn(this,Wt,kt-1)}focusMainContainer(){Ct(this,fn).focus()}findParent(kt,Bt){for(const en of Ct(this,qt).values()){const{x:sn,y:hn,width:En,height:Nn}=en.div.getBoundingClientRect();if(kt>=sn&&kt<=sn+En&&Bt>=hn&&Bt<=hn+Nn)return en}return null}disableUserSelect(kt=!1){Ct(this,_n).classList.toggle("noUserSelect",kt)}addShouldRescale(kt){Ct(this,on).add(kt)}removeShouldRescale(kt){Ct(this,on).delete(kt)}onScaleChanging({scale:kt}){this.commitOrRemove(),this.viewParameters.realScale=kt*et.PixelsPerInch.PDF_TO_CSS_UNITS;for(const Bt of Ct(this,on))Bt.onScaleChanging()}onRotationChanging({pagesRotation:kt}){this.commitOrRemove(),this.viewParameters.rotation=kt}addToAnnotationStorage(kt){!kt.isEmpty()&&Ct(this,Zt)&&!Ct(this,Zt).has(kt.id)&&Ct(this,Zt).setValue(kt.id,kt)}blur(){if(!this.hasSelection)return;const{activeElement:kt}=document;for(const Bt of Ct(this,Vt))if(Bt.div.contains(kt)){pn(this,$t,[Bt,kt]),Bt._focusEventsAllowed=!1;break}}focus(){if(!Ct(this,$t))return;const[kt,Bt]=Ct(this,$t);pn(this,$t,null),Bt.addEventListener("focusin",()=>{kt._focusEventsAllowed=!0},{once:!0}),Bt.focus()}addEditListeners(){dn(this,Xn,Ps).call(this),dn(this,zn,Cs).call(this)}removeEditListeners(){dn(this,Qn,zo).call(this),dn(this,vn,ws).call(this)}copy(kt){var en;if(kt.preventDefault(),(en=Ct(this,Nt))==null||en.commitOrRemove(),!this.hasSelection)return;const Bt=[];for(const sn of Ct(this,Vt)){const hn=sn.serialize(!0);hn&&Bt.push(hn)}Bt.length!==0&&kt.clipboardData.setData("application/pdfjs",JSON.stringify(Bt))}cut(kt){this.copy(kt),this.delete()}paste(kt){kt.preventDefault();const{clipboardData:Bt}=kt;for(const hn of Bt.items)for(const En of Ct(this,Jt))if(En.isHandlingMimeForPasting(hn.type)){En.paste(hn,this.currentLayer);return}let en=Bt.getData("application/pdfjs");if(!en)return;try{en=JSON.parse(en)}catch(hn){(0,a.warn)(`paste: "${hn.message}".`);return}if(!Array.isArray(en))return;this.unselectAll();const sn=this.currentLayer;try{const hn=[];for(const Bn of en){const Un=sn.deserialize(Bn);if(!Un)return;hn.push(Un)}const En=()=>{for(const Bn of hn)dn(this,rn,Rs).call(this,Bn);dn(this,Pn,Is).call(this,hn)},Nn=()=>{for(const Bn of hn)Bn.remove()};this.addCommands({cmd:En,undo:Nn,mustExec:!0})}catch(hn){(0,a.warn)(`paste: "${hn.message}".`)}}keydown(kt){var Bt;(Bt=this.getActive())!=null&&Bt.shouldGetKeyboardEvents()||kn._keyboardManager.exec(this,kt)}onEditingAction(kt){["undo","redo","delete","selectAll"].includes(kt.name)&&this[kt.name]()}setEditingState(kt){kt?(dn(this,Cn,Ol).call(this),dn(this,Xn,Ps).call(this),dn(this,zn,Cs).call(this),dn(this,ln,br).call(this,{isEditing:Ct(this,Lt)!==a.AnnotationEditorType.NONE,isEmpty:dn(this,In,To).call(this),hasSomethingToUndo:Ct(this,Ht).hasSomethingToUndo(),hasSomethingToRedo:Ct(this,Ht).hasSomethingToRedo(),hasSelectedEditor:!1})):(dn(this,Vn,As).call(this),dn(this,Qn,zo).call(this),dn(this,vn,ws).call(this),dn(this,ln,br).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(kt){if(!Ct(this,Jt)){pn(this,Jt,kt);for(const Bt of Ct(this,Jt))dn(this,$n,So).call(this,Bt.defaultPropertiesToUpdate)}}getId(){return Ct(this,Ut).getId()}get currentLayer(){return Ct(this,qt).get(Ct(this,Wt))}getLayer(kt){return Ct(this,qt).get(kt)}get currentPageIndex(){return Ct(this,Wt)}addLayer(kt){Ct(this,qt).set(kt.pageIndex,kt),Ct(this,It)?kt.enable():kt.disable()}removeLayer(kt){Ct(this,qt).delete(kt.pageIndex)}updateMode(kt,Bt=null){if(Ct(this,Lt)!==kt){if(pn(this,Lt,kt),kt===a.AnnotationEditorType.NONE){this.setEditingState(!1),dn(this,nn,Nl).call(this);return}this.setEditingState(!0),dn(this,cr,Ml).call(this),this.unselectAll();for(const en of Ct(this,qt).values())en.updateMode(kt);if(Bt){for(const en of Ct(this,Kt).values())if(en.annotationElementId===Bt){this.setSelected(en),en.enterInEditMode();break}}}}updateToolbar(kt){kt!==Ct(this,Lt)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:kt})}updateParams(kt,Bt){if(Ct(this,Jt)){if(kt===a.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(kt);return}for(const en of Ct(this,Vt))en.updateParams(kt,Bt);for(const en of Ct(this,Jt))en.updateDefaultParams(kt,Bt)}}enableWaiting(kt=!1){if(Ct(this,Mt)!==kt){pn(this,Mt,kt);for(const Bt of Ct(this,qt).values())kt?Bt.disableClick():Bt.enableClick(),Bt.div.classList.toggle("waiting",kt)}}getEditors(kt){const Bt=[];for(const en of Ct(this,Kt).values())en.pageIndex===kt&&Bt.push(en);return Bt}getEditor(kt){return Ct(this,Kt).get(kt)}addEditor(kt){Ct(this,Kt).set(kt.id,kt)}removeEditor(kt){var Bt;Ct(this,Kt).delete(kt.id),this.unselect(kt),(!kt.annotationElementId||!Ct(this,Ft).has(kt.annotationElementId))&&((Bt=Ct(this,Zt))==null||Bt.remove(kt.id))}addDeletedAnnotationElement(kt){Ct(this,Ft).add(kt.annotationElementId),kt.deleted=!0}isDeletedAnnotationElement(kt){return Ct(this,Ft).has(kt)}removeDeletedAnnotationElement(kt){Ct(this,Ft).delete(kt.annotationElementId),kt.deleted=!1}setActiveEditor(kt){Ct(this,Nt)!==kt&&(pn(this,Nt,kt),kt&&dn(this,$n,So).call(this,kt.propertiesToUpdate))}toggleSelected(kt){if(Ct(this,Vt).has(kt)){Ct(this,Vt).delete(kt),kt.unselect(),dn(this,ln,br).call(this,{hasSelectedEditor:this.hasSelection});return}Ct(this,Vt).add(kt),kt.select(),dn(this,$n,So).call(this,kt.propertiesToUpdate),dn(this,ln,br).call(this,{hasSelectedEditor:!0})}setSelected(kt){for(const Bt of Ct(this,Vt))Bt!==kt&&Bt.unselect();Ct(this,Vt).clear(),Ct(this,Vt).add(kt),kt.select(),dn(this,$n,So).call(this,kt.propertiesToUpdate),dn(this,ln,br).call(this,{hasSelectedEditor:!0})}isSelected(kt){return Ct(this,Vt).has(kt)}unselect(kt){kt.unselect(),Ct(this,Vt).delete(kt),dn(this,ln,br).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return Ct(this,Vt).size!==0}undo(){Ct(this,Ht).undo(),dn(this,ln,br).call(this,{hasSomethingToUndo:Ct(this,Ht).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:dn(this,In,To).call(this)})}redo(){Ct(this,Ht).redo(),dn(this,ln,br).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:Ct(this,Ht).hasSomethingToRedo(),isEmpty:dn(this,In,To).call(this)})}addCommands(kt){Ct(this,Ht).add(kt),dn(this,ln,br).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:dn(this,In,To).call(this)})}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const kt=[...Ct(this,Vt)],Bt=()=>{for(const sn of kt)sn.remove()},en=()=>{for(const sn of kt)dn(this,rn,Rs).call(this,sn)};this.addCommands({cmd:Bt,undo:en,mustExec:!0})}commitOrRemove(){var kt;(kt=Ct(this,Nt))==null||kt.commitOrRemove()}hasSomethingToControl(){return Ct(this,Nt)||this.hasSelection}selectAll(){for(const kt of Ct(this,Vt))kt.commit();dn(this,Pn,Is).call(this,Ct(this,Kt).values())}unselectAll(){if(Ct(this,Nt)){Ct(this,Nt).commitOrRemove();return}if(this.hasSelection){for(const kt of Ct(this,Vt))kt.unselect();Ct(this,Vt).clear(),dn(this,ln,br).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(kt,Bt,en=!1){if(en||this.commitOrRemove(),!this.hasSelection)return;Ct(this,On)[0]+=kt,Ct(this,On)[1]+=Bt;const[sn,hn]=Ct(this,On),En=[...Ct(this,Vt)],Nn=1e3;Ct(this,wn)&&clearTimeout(Ct(this,wn)),pn(this,wn,setTimeout(()=>{pn(this,wn,null),Ct(this,On)[0]=Ct(this,On)[1]=0,this.addCommands({cmd:()=>{for(const Bn of En)Ct(this,Kt).has(Bn.id)&&Bn.translateInPage(sn,hn)},undo:()=>{for(const Bn of En)Ct(this,Kt).has(Bn.id)&&Bn.translateInPage(-sn,-hn)},mustExec:!1})},Nn));for(const Bn of En)Bn.translateInPage(kt,Bt)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),pn(this,Gt,new Map);for(const kt of Ct(this,Vt))Ct(this,Gt).set(kt,{savedX:kt.x,savedY:kt.y,savedPageIndex:kt.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!Ct(this,Gt))return!1;this.disableUserSelect(!1);const kt=Ct(this,Gt);pn(this,Gt,null);let Bt=!1;for(const[{x:sn,y:hn,pageIndex:En},Nn]of kt)Nn.newX=sn,Nn.newY=hn,Nn.newPageIndex=En,Bt||(Bt=sn!==Nn.savedX||hn!==Nn.savedY||En!==Nn.savedPageIndex);if(!Bt)return!1;const en=(sn,hn,En,Nn)=>{if(Ct(this,Kt).has(sn.id)){const Bn=Ct(this,qt).get(Nn);Bn?sn._setParentAndPosition(Bn,hn,En):(sn.pageIndex=Nn,sn.x=hn,sn.y=En)}};return this.addCommands({cmd:()=>{for(const[sn,{newX:hn,newY:En,newPageIndex:Nn}]of kt)en(sn,hn,En,Nn)},undo:()=>{for(const[sn,{savedX:hn,savedY:En,savedPageIndex:Nn}]of kt)en(sn,hn,En,Nn)},mustExec:!0}),!0}dragSelectedEditors(kt,Bt){if(Ct(this,Gt))for(const en of Ct(this,Gt).keys())en.drag(kt,Bt)}rebuild(kt){if(kt.parent===null){const Bt=this.getLayer(kt.pageIndex);Bt?(Bt.changeParent(kt),Bt.addOrRebuild(kt)):(this.addEditor(kt),this.addToAnnotationStorage(kt),kt.rebuild())}else kt.parent.addOrRebuild(kt)}isActive(kt){return Ct(this,Nt)===kt}getActive(){return Ct(this,Nt)}getMode(){return Ct(this,Lt)}get imageManager(){return(0,a.shadow)(this,"imageManager",new ht)}};Nt=new WeakMap,Kt=new WeakMap,qt=new WeakMap,jt=new WeakMap,Zt=new WeakMap,Ht=new WeakMap,Wt=new WeakMap,Ft=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,on=new WeakMap,bn=new WeakMap,Ut=new WeakMap,It=new WeakMap,Mt=new WeakMap,$t=new WeakMap,Lt=new WeakMap,Vt=new WeakMap,zt=new WeakMap,Xt=new WeakMap,Yt=new WeakMap,un=new WeakMap,gn=new WeakMap,yn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,Sn=new WeakMap,Fn=new WeakMap,Dn=new WeakMap,xn=new WeakMap,On=new WeakMap,wn=new WeakMap,fn=new WeakMap,_n=new WeakMap,Cn=new WeakSet,Ol=function(){window.addEventListener("focus",Ct(this,Yt)),window.addEventListener("blur",Ct(this,Xt))},Vn=new WeakSet,As=function(){window.removeEventListener("focus",Ct(this,Yt)),window.removeEventListener("blur",Ct(this,Xt))},Xn=new WeakSet,Ps=function(){window.addEventListener("keydown",Ct(this,Tn),{capture:!0})},Qn=new WeakSet,zo=function(){window.removeEventListener("keydown",Ct(this,Tn),{capture:!0})},zn=new WeakSet,Cs=function(){document.addEventListener("copy",Ct(this,un)),document.addEventListener("cut",Ct(this,gn)),document.addEventListener("paste",Ct(this,yn))},vn=new WeakSet,ws=function(){document.removeEventListener("copy",Ct(this,un)),document.removeEventListener("cut",Ct(this,gn)),document.removeEventListener("paste",Ct(this,yn))},ln=new WeakSet,br=function(kt){Object.entries(kt).some(([en,sn])=>Ct(this,xn)[en]!==sn)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(Ct(this,xn),kt)})},$n=new WeakSet,So=function(kt){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:kt})},cr=new WeakSet,Ml=function(){if(!Ct(this,It)){pn(this,It,!0);for(const kt of Ct(this,qt).values())kt.enable()}},nn=new WeakSet,Nl=function(){if(this.unselectAll(),Ct(this,It)){pn(this,It,!1);for(const kt of Ct(this,qt).values())kt.disable()}},rn=new WeakSet,Rs=function(kt){const Bt=Ct(this,qt).get(kt.pageIndex);Bt?Bt.addOrRebuild(kt):this.addEditor(kt)},In=new WeakSet,To=function(){if(Ct(this,Kt).size===0)return!0;if(Ct(this,Kt).size===1)for(const kt of Ct(this,Kt).values())return kt.isEmpty();return!1},Pn=new WeakSet,Is=function(kt){Ct(this,Vt).clear();for(const Bt of kt)Bt.isEmpty()||(Ct(this,Vt).add(Bt),Bt.select());dn(this,ln,br).call(this,{hasSelectedEditor:!0})},ur(kn,"TRANSLATE_SMALL",1),ur(kn,"TRANSLATE_BIG",10);let gt=kn;i.AnnotationEditorUIManager=gt},(o,i,s)=>{var Wt,Ft,Gt,Jt,on,bn,Ut,It,Mt,$t,Lt,Vt,io,Xt,oo,un,xs,yn,Ho,Rn,Go,Fn,Ao,xn,Po;Object.defineProperty(i,"__esModule",{value:!0}),i.StatTimer=i.RenderingCancelledException=i.PixelsPerInch=i.PageViewport=i.PDFDateString=i.DOMStandardFontDataFactory=i.DOMSVGFactory=i.DOMFilterFactory=i.DOMCanvasFactory=i.DOMCMapReaderFactory=void 0,i.deprecated=xt,i.getColorValues=Kt,i.getCurrentTransform=qt,i.getCurrentTransformInverse=jt,i.getFilenameFromUrl=vt,i.getPdfFilenameFromUrl=bt,i.getRGB=Nt,i.getXfaPageViewport=Dt,i.isDataScheme=St,i.isPdfFile=Et,i.isValidFetchUrl=wt,i.loadScript=At,i.noContextMenu=Pt,i.setLayerDimensions=Zt;var a=s(7),et=s(1);const tt="http://www.w3.org/2000/svg",Ht=class Ht{};ur(Ht,"CSS",96),ur(Ht,"PDF",72),ur(Ht,"PDF_TO_CSS_UNITS",Ht.CSS/Ht.PDF);let ot=Ht;i.PixelsPerInch=ot;class dt extends a.BaseFilterFactory{constructor({docId:_n,ownerDocument:Cn=globalThis.document}={}){super();tn(this,Vt);tn(this,Xt);tn(this,un);tn(this,yn);tn(this,Rn);tn(this,Fn);tn(this,xn);tn(this,Wt,void 0);tn(this,Ft,void 0);tn(this,Gt,void 0);tn(this,Jt,void 0);tn(this,on,void 0);tn(this,bn,void 0);tn(this,Ut,void 0);tn(this,It,void 0);tn(this,Mt,void 0);tn(this,$t,void 0);tn(this,Lt,0);pn(this,Gt,_n),pn(this,Jt,Cn)}addFilter(_n){if(!_n)return"none";let Cn=Ct(this,Vt,io).get(_n);if(Cn)return Cn;let Ln,Vn,Jn,Xn;if(_n.length===1){const zn=_n[0],qn=new Array(256);for(let vn=0;vn<256;vn++)qn[vn]=zn[vn]/255;Xn=Ln=Vn=Jn=qn.join(",")}else{const[zn,qn,vn]=_n,cn=new Array(256),ln=new Array(256),Mn=new Array(256);for(let $n=0;$n<256;$n++)cn[$n]=zn[$n]/255,ln[$n]=qn[$n]/255,Mn[$n]=vn[$n]/255;Ln=cn.join(","),Vn=ln.join(","),Jn=Mn.join(","),Xn=`${Ln}${Vn}${Jn}`}if(Cn=Ct(this,Vt,io).get(Xn),Cn)return Ct(this,Vt,io).set(_n,Cn),Cn;const Yn=`g_${Ct(this,Gt)}_transfer_map_${Dr(this,Lt)._++}`,Qn=`url(#${Yn})`;Ct(this,Vt,io).set(_n,Qn),Ct(this,Vt,io).set(Xn,Qn);const jn=dn(this,yn,Ho).call(this,Yn);return dn(this,Fn,Ao).call(this,Ln,Vn,Jn,jn),Qn}addHCMFilter(_n,Cn){var qn;const Ln=`${_n}-${Cn}`;if(Ct(this,bn)===Ln)return Ct(this,Ut);if(pn(this,bn,Ln),pn(this,Ut,"none"),(qn=Ct(this,on))==null||qn.remove(),!_n||!Cn)return Ct(this,Ut);const Vn=dn(this,xn,Po).call(this,_n);_n=et.Util.makeHexColor(...Vn);const Jn=dn(this,xn,Po).call(this,Cn);if(Cn=et.Util.makeHexColor(...Jn),Ct(this,Xt,oo).style.color="",_n==="#000000"&&Cn==="#ffffff"||_n===Cn)return Ct(this,Ut);const Xn=new Array(256);for(let vn=0;vn<=255;vn++){const cn=vn/255;Xn[vn]=cn<=.03928?cn/12.92:((cn+.055)/1.055)**2.4}const Yn=Xn.join(","),Qn=`g_${Ct(this,Gt)}_hcm_filter`,jn=pn(this,It,dn(this,yn,Ho).call(this,Qn));dn(this,Fn,Ao).call(this,Yn,Yn,Yn,jn),dn(this,un,xs).call(this,jn);const zn=(vn,cn)=>{const ln=Vn[vn]/255,Mn=Jn[vn]/255,$n=new Array(cn+1);for(let rr=0;rr<=cn;rr++)$n[rr]=ln+rr/cn*(Mn-ln);return $n.join(",")};return dn(this,Fn,Ao).call(this,zn(0,5),zn(1,5),zn(2,5),jn),pn(this,Ut,`url(#${Qn})`),Ct(this,Ut)}addHighlightHCMFilter(_n,Cn,Ln,Vn){var Mn;const Jn=`${_n}-${Cn}-${Ln}-${Vn}`;if(Ct(this,Mt)===Jn)return Ct(this,$t);if(pn(this,Mt,Jn),pn(this,$t,"none"),(Mn=Ct(this,It))==null||Mn.remove(),!_n||!Cn)return Ct(this,$t);const[Xn,Yn]=[_n,Cn].map(dn(this,xn,Po).bind(this));let Qn=Math.round(.2126*Xn[0]+.7152*Xn[1]+.0722*Xn[2]),jn=Math.round(.2126*Yn[0]+.7152*Yn[1]+.0722*Yn[2]),[zn,qn]=[Ln,Vn].map(dn(this,xn,Po).bind(this));jn<Qn&&([Qn,jn,zn,qn]=[jn,Qn,qn,zn]),Ct(this,Xt,oo).style.color="";const vn=($n,rr,cr)=>{const mn=new Array(256),nn=(jn-Qn)/cr,an=$n/255,rn=(rr-$n)/(255*cr);let An=0;for(let In=0;In<=cr;In++){const Hn=Math.round(Qn+In*nn),Pn=an+In*rn;for(let Wn=An;Wn<=Hn;Wn++)mn[Wn]=Pn;An=Hn+1}for(let In=An;In<256;In++)mn[In]=mn[An-1];return mn.join(",")},cn=`g_${Ct(this,Gt)}_hcm_highlight_filter`,ln=pn(this,It,dn(this,yn,Ho).call(this,cn));return dn(this,un,xs).call(this,ln),dn(this,Fn,Ao).call(this,vn(zn[0],qn[0],5),vn(zn[1],qn[1],5),vn(zn[2],qn[2],5),ln),pn(this,$t,`url(#${cn})`),Ct(this,$t)}destroy(_n=!1){_n&&(Ct(this,Ut)||Ct(this,$t))||(Ct(this,Ft)&&(Ct(this,Ft).parentNode.parentNode.remove(),pn(this,Ft,null)),Ct(this,Wt)&&(Ct(this,Wt).clear(),pn(this,Wt,null)),pn(this,Lt,0))}}Wt=new WeakMap,Ft=new WeakMap,Gt=new WeakMap,Jt=new WeakMap,on=new WeakMap,bn=new WeakMap,Ut=new WeakMap,It=new WeakMap,Mt=new WeakMap,$t=new WeakMap,Lt=new WeakMap,Vt=new WeakSet,io=function(){return Ct(this,Wt)||pn(this,Wt,new Map)},Xt=new WeakSet,oo=function(){if(!Ct(this,Ft)){const _n=Ct(this,Jt).createElement("div"),{style:Cn}=_n;Cn.visibility="hidden",Cn.contain="strict",Cn.width=Cn.height=0,Cn.position="absolute",Cn.top=Cn.left=0,Cn.zIndex=-1;const Ln=Ct(this,Jt).createElementNS(tt,"svg");Ln.setAttribute("width",0),Ln.setAttribute("height",0),pn(this,Ft,Ct(this,Jt).createElementNS(tt,"defs")),_n.append(Ln),Ln.append(Ct(this,Ft)),Ct(this,Jt).body.append(_n)}return Ct(this,Ft)},un=new WeakSet,xs=function(_n){const Cn=Ct(this,Jt).createElementNS(tt,"feColorMatrix");Cn.setAttribute("type","matrix"),Cn.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),_n.append(Cn)},yn=new WeakSet,Ho=function(_n){const Cn=Ct(this,Jt).createElementNS(tt,"filter");return Cn.setAttribute("color-interpolation-filters","sRGB"),Cn.setAttribute("id",_n),Ct(this,Xt,oo).append(Cn),Cn},Rn=new WeakSet,Go=function(_n,Cn,Ln){const Vn=Ct(this,Jt).createElementNS(tt,Cn);Vn.setAttribute("type","discrete"),Vn.setAttribute("tableValues",Ln),_n.append(Vn)},Fn=new WeakSet,Ao=function(_n,Cn,Ln,Vn){const Jn=Ct(this,Jt).createElementNS(tt,"feComponentTransfer");Vn.append(Jn),dn(this,Rn,Go).call(this,Jn,"feFuncR",_n),dn(this,Rn,Go).call(this,Jn,"feFuncG",Cn),dn(this,Rn,Go).call(this,Jn,"feFuncB",Ln)},xn=new WeakSet,Po=function(_n){return Ct(this,Xt,oo).style.color=_n,Nt(getComputedStyle(Ct(this,Xt,oo)).getPropertyValue("color"))},i.DOMFilterFactory=dt;class ht extends a.BaseCanvasFactory{constructor({ownerDocument:fn=globalThis.document}={}){super(),this._document=fn}_createCanvas(fn,_n){const Cn=this._document.createElement("canvas");return Cn.width=fn,Cn.height=_n,Cn}}i.DOMCanvasFactory=ht;async function ft(wn,fn=!1){if(wt(wn,document.baseURI)){const _n=await fetch(wn);if(!_n.ok)throw new Error(_n.statusText);return fn?new Uint8Array(await _n.arrayBuffer()):(0,et.stringToBytes)(await _n.text())}return new Promise((_n,Cn)=>{const Ln=new XMLHttpRequest;Ln.open("GET",wn,!0),fn&&(Ln.responseType="arraybuffer"),Ln.onreadystatechange=()=>{if(Ln.readyState===XMLHttpRequest.DONE){if(Ln.status===200||Ln.status===0){let Vn;if(fn&&Ln.response?Vn=new Uint8Array(Ln.response):!fn&&Ln.responseText&&(Vn=(0,et.stringToBytes)(Ln.responseText)),Vn){_n(Vn);return}}Cn(new Error(Ln.statusText))}},Ln.send(null)})}class pt extends a.BaseCMapReaderFactory{_fetchData(fn,_n){return ft(fn,this.isCompressed).then(Cn=>({cMapData:Cn,compressionType:_n}))}}i.DOMCMapReaderFactory=pt;class mt extends a.BaseStandardFontDataFactory{_fetchData(fn){return ft(fn,!0)}}i.DOMStandardFontDataFactory=mt;class gt extends a.BaseSVGFactory{_createSVG(fn){return document.createElementNS(tt,fn)}}i.DOMSVGFactory=gt;class _t{constructor({viewBox:fn,scale:_n,rotation:Cn,offsetX:Ln=0,offsetY:Vn=0,dontFlip:Jn=!1}){this.viewBox=fn,this.scale=_n,this.rotation=Cn,this.offsetX=Ln,this.offsetY=Vn;const Xn=(fn[2]+fn[0])/2,Yn=(fn[3]+fn[1])/2;let Qn,jn,zn,qn;switch(Cn%=360,Cn<0&&(Cn+=360),Cn){case 180:Qn=-1,jn=0,zn=0,qn=1;break;case 90:Qn=0,jn=1,zn=1,qn=0;break;case 270:Qn=0,jn=-1,zn=-1,qn=0;break;case 0:Qn=1,jn=0,zn=0,qn=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Jn&&(zn=-zn,qn=-qn);let vn,cn,ln,Mn;Qn===0?(vn=Math.abs(Yn-fn[1])*_n+Ln,cn=Math.abs(Xn-fn[0])*_n+Vn,ln=(fn[3]-fn[1])*_n,Mn=(fn[2]-fn[0])*_n):(vn=Math.abs(Xn-fn[0])*_n+Ln,cn=Math.abs(Yn-fn[1])*_n+Vn,ln=(fn[2]-fn[0])*_n,Mn=(fn[3]-fn[1])*_n),this.transform=[Qn*_n,jn*_n,zn*_n,qn*_n,vn-Qn*_n*Xn-zn*_n*Yn,cn-jn*_n*Xn-qn*_n*Yn],this.width=ln,this.height=Mn}get rawDims(){const{viewBox:fn}=this;return(0,et.shadow)(this,"rawDims",{pageWidth:fn[2]-fn[0],pageHeight:fn[3]-fn[1],pageX:fn[0],pageY:fn[1]})}clone({scale:fn=this.scale,rotation:_n=this.rotation,offsetX:Cn=this.offsetX,offsetY:Ln=this.offsetY,dontFlip:Vn=!1}={}){return new _t({viewBox:this.viewBox.slice(),scale:fn,rotation:_n,offsetX:Cn,offsetY:Ln,dontFlip:Vn})}convertToViewportPoint(fn,_n){return et.Util.applyTransform([fn,_n],this.transform)}convertToViewportRectangle(fn){const _n=et.Util.applyTransform([fn[0],fn[1]],this.transform),Cn=et.Util.applyTransform([fn[2],fn[3]],this.transform);return[_n[0],_n[1],Cn[0],Cn[1]]}convertToPdfPoint(fn,_n){return et.Util.applyInverseTransform([fn,_n],this.transform)}}i.PageViewport=_t;class yt extends et.BaseException{constructor(fn,_n=0){super(fn,"RenderingCancelledException"),this.extraDelay=_n}}i.RenderingCancelledException=yt;function St(wn){const fn=wn.length;let _n=0;for(;_n<fn&&wn[_n].trim()==="";)_n++;return wn.substring(_n,_n+5).toLowerCase()==="data:"}function Et(wn){return typeof wn=="string"&&/\.pdf$/i.test(wn)}function vt(wn,fn=!1){return fn||([wn]=wn.split(/[#?]/,1)),wn.substring(wn.lastIndexOf("/")+1)}function bt(wn,fn="document.pdf"){if(typeof wn!="string")return fn;if(St(wn))return(0,et.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),fn;const _n=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,Cn=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,Ln=_n.exec(wn);let Vn=Cn.exec(Ln[1])||Cn.exec(Ln[2])||Cn.exec(Ln[3]);if(Vn&&(Vn=Vn[0],Vn.includes("%")))try{Vn=Cn.exec(decodeURIComponent(Vn))[0]}catch{}return Vn||fn}class Tt{constructor(){ur(this,"started",Object.create(null));ur(this,"times",[])}time(fn){fn in this.started&&(0,et.warn)(`Timer is already running for ${fn}`),this.started[fn]=Date.now()}timeEnd(fn){fn in this.started||(0,et.warn)(`Timer has not been started for ${fn}`),this.times.push({name:fn,start:this.started[fn],end:Date.now()}),delete this.started[fn]}toString(){const fn=[];let _n=0;for(const{name:Cn}of this.times)_n=Math.max(Cn.length,_n);for(const{name:Cn,start:Ln,end:Vn}of this.times)fn.push(`${Cn.padEnd(_n)} ${Vn-Ln}ms
`);return fn.join("")}}i.StatTimer=Tt;function wt(wn,fn){try{const{protocol:_n}=fn?new URL(wn,fn):new URL(wn);return _n==="http:"||_n==="https:"}catch{return!1}}function Pt(wn){wn.preventDefault()}function At(wn,fn=!1){return new Promise((_n,Cn)=>{const Ln=document.createElement("script");Ln.src=wn,Ln.onload=function(Vn){fn&&Ln.remove(),_n(Vn)},Ln.onerror=function(){Cn(new Error(`Cannot load script at: ${Ln.src}`))},(document.head||document.documentElement).append(Ln)})}function xt(wn){console.log("Deprecated API usage: "+wn)}let Ot;class Rt{static toDateObject(fn){if(!fn||typeof fn!="string")return null;Ot||(Ot=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const _n=Ot.exec(fn);if(!_n)return null;const Cn=parseInt(_n[1],10);let Ln=parseInt(_n[2],10);Ln=Ln>=1&&Ln<=12?Ln-1:0;let Vn=parseInt(_n[3],10);Vn=Vn>=1&&Vn<=31?Vn:1;let Jn=parseInt(_n[4],10);Jn=Jn>=0&&Jn<=23?Jn:0;let Xn=parseInt(_n[5],10);Xn=Xn>=0&&Xn<=59?Xn:0;let Yn=parseInt(_n[6],10);Yn=Yn>=0&&Yn<=59?Yn:0;const Qn=_n[7]||"Z";let jn=parseInt(_n[8],10);jn=jn>=0&&jn<=23?jn:0;let zn=parseInt(_n[9],10)||0;return zn=zn>=0&&zn<=59?zn:0,Qn==="-"?(Jn+=jn,Xn+=zn):Qn==="+"&&(Jn-=jn,Xn-=zn),new Date(Date.UTC(Cn,Ln,Vn,Jn,Xn,Yn))}}i.PDFDateString=Rt;function Dt(wn,{scale:fn=1,rotation:_n=0}){const{width:Cn,height:Ln}=wn.attributes.style,Vn=[0,0,parseInt(Cn),parseInt(Ln)];return new _t({viewBox:Vn,scale:fn,rotation:_n})}function Nt(wn){if(wn.startsWith("#")){const fn=parseInt(wn.slice(1),16);return[(fn&16711680)>>16,(fn&65280)>>8,fn&255]}return wn.startsWith("rgb(")?wn.slice(4,-1).split(",").map(fn=>parseInt(fn)):wn.startsWith("rgba(")?wn.slice(5,-1).split(",").map(fn=>parseInt(fn)).slice(0,3):((0,et.warn)(`Not a valid color format: "${wn}"`),[0,0,0])}function Kt(wn){const fn=document.createElement("span");fn.style.visibility="hidden",document.body.append(fn);for(const _n of wn.keys()){fn.style.color=_n;const Cn=window.getComputedStyle(fn).color;wn.set(_n,Nt(Cn))}fn.remove()}function qt(wn){const{a:fn,b:_n,c:Cn,d:Ln,e:Vn,f:Jn}=wn.getTransform();return[fn,_n,Cn,Ln,Vn,Jn]}function jt(wn){const{a:fn,b:_n,c:Cn,d:Ln,e:Vn,f:Jn}=wn.getTransform().invertSelf();return[fn,_n,Cn,Ln,Vn,Jn]}function Zt(wn,fn,_n=!1,Cn=!0){if(fn instanceof _t){const{pageWidth:Ln,pageHeight:Vn}=fn.rawDims,{style:Jn}=wn,Xn=et.FeatureTest.isCSSRoundSupported,Yn=`var(--scale-factor) * ${Ln}px`,Qn=`var(--scale-factor) * ${Vn}px`,jn=Xn?`round(${Yn}, 1px)`:`calc(${Yn})`,zn=Xn?`round(${Qn}, 1px)`:`calc(${Qn})`;!_n||fn.rotation%180===0?(Jn.width=jn,Jn.height=zn):(Jn.width=zn,Jn.height=jn)}Cn&&wn.setAttribute("data-main-rotation",fn.rotation)}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.BaseStandardFontDataFactory=i.BaseSVGFactory=i.BaseFilterFactory=i.BaseCanvasFactory=i.BaseCMapReaderFactory=void 0;var a=s(1);class et{constructor(){this.constructor===et&&(0,a.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(pt){return"none"}addHCMFilter(pt,mt){return"none"}addHighlightHCMFilter(pt,mt,gt,_t){return"none"}destroy(pt=!1){}}i.BaseFilterFactory=et;class tt{constructor(){this.constructor===tt&&(0,a.unreachable)("Cannot initialize BaseCanvasFactory.")}create(pt,mt){if(pt<=0||mt<=0)throw new Error("Invalid canvas size");const gt=this._createCanvas(pt,mt);return{canvas:gt,context:gt.getContext("2d")}}reset(pt,mt,gt){if(!pt.canvas)throw new Error("Canvas is not specified");if(mt<=0||gt<=0)throw new Error("Invalid canvas size");pt.canvas.width=mt,pt.canvas.height=gt}destroy(pt){if(!pt.canvas)throw new Error("Canvas is not specified");pt.canvas.width=0,pt.canvas.height=0,pt.canvas=null,pt.context=null}_createCanvas(pt,mt){(0,a.unreachable)("Abstract method `_createCanvas` called.")}}i.BaseCanvasFactory=tt;class ot{constructor({baseUrl:pt=null,isCompressed:mt=!0}){this.constructor===ot&&(0,a.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=pt,this.isCompressed=mt}async fetch({name:pt}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!pt)throw new Error("CMap name must be specified.");const mt=this.baseUrl+pt+(this.isCompressed?".bcmap":""),gt=this.isCompressed?a.CMapCompressionType.BINARY:a.CMapCompressionType.NONE;return this._fetchData(mt,gt).catch(_t=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${mt}`)})}_fetchData(pt,mt){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseCMapReaderFactory=ot;class dt{constructor({baseUrl:pt=null}){this.constructor===dt&&(0,a.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=pt}async fetch({filename:pt}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!pt)throw new Error("Font filename must be specified.");const mt=`${this.baseUrl}${pt}`;return this._fetchData(mt).catch(gt=>{throw new Error(`Unable to load font data at: ${mt}`)})}_fetchData(pt){(0,a.unreachable)("Abstract method `_fetchData` called.")}}i.BaseStandardFontDataFactory=dt;class ht{constructor(){this.constructor===ht&&(0,a.unreachable)("Cannot initialize BaseSVGFactory.")}create(pt,mt,gt=!1){if(pt<=0||mt<=0)throw new Error("Invalid SVG dimensions");const _t=this._createSVG("svg:svg");return _t.setAttribute("version","1.1"),gt||(_t.setAttribute("width",`${pt}px`),_t.setAttribute("height",`${mt}px`)),_t.setAttribute("preserveAspectRatio","none"),_t.setAttribute("viewBox",`0 0 ${pt} ${mt}`),_t}createElement(pt){if(typeof pt!="string")throw new Error("Invalid SVG element type");return this._createSVG(pt)}_createSVG(pt){(0,a.unreachable)("Abstract method `_createSVG` called.")}}i.BaseSVGFactory=ht},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.MurmurHash3_64=void 0;var a=s(1);const et=3285377520,tt=4294901760,ot=65535;class dt{constructor(ft){this.h1=ft?ft&4294967295:et,this.h2=ft?ft&4294967295:et}update(ft){let pt,mt;if(typeof ft=="string"){pt=new Uint8Array(ft.length*2),mt=0;for(let xt=0,Ot=ft.length;xt<Ot;xt++){const Rt=ft.charCodeAt(xt);Rt<=255?pt[mt++]=Rt:(pt[mt++]=Rt>>>8,pt[mt++]=Rt&255)}}else if((0,a.isArrayBuffer)(ft))pt=ft.slice(),mt=pt.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const gt=mt>>2,_t=mt-gt*4,yt=new Uint32Array(pt.buffer,0,gt);let St=0,Et=0,vt=this.h1,bt=this.h2;const Tt=3432918353,wt=461845907,Pt=Tt&ot,At=wt&ot;for(let xt=0;xt<gt;xt++)xt&1?(St=yt[xt],St=St*Tt&tt|St*Pt&ot,St=St<<15|St>>>17,St=St*wt&tt|St*At&ot,vt^=St,vt=vt<<13|vt>>>19,vt=vt*5+3864292196):(Et=yt[xt],Et=Et*Tt&tt|Et*Pt&ot,Et=Et<<15|Et>>>17,Et=Et*wt&tt|Et*At&ot,bt^=Et,bt=bt<<13|bt>>>19,bt=bt*5+3864292196);switch(St=0,_t){case 3:St^=pt[gt*4+2]<<16;case 2:St^=pt[gt*4+1]<<8;case 1:St^=pt[gt*4],St=St*Tt&tt|St*Pt&ot,St=St<<15|St>>>17,St=St*wt&tt|St*At&ot,gt&1?vt^=St:bt^=St}this.h1=vt,this.h2=bt}hexdigest(){let ft=this.h1,pt=this.h2;return ft^=pt>>>1,ft=ft*3981806797&tt|ft*36045&ot,pt=pt*4283543511&tt|((pt<<16|ft>>>16)*2950163797&tt)>>>16,ft^=pt>>>1,ft=ft*444984403&tt|ft*60499&ot,pt=pt*3301882366&tt|((pt<<16|ft>>>16)*3120437893&tt)>>>16,ft^=pt>>>1,(ft>>>0).toString(16).padStart(8,"0")+(pt>>>0).toString(16).padStart(8,"0")}}i.MurmurHash3_64=dt},(o,i,s)=>{var ot;Object.defineProperty(i,"__esModule",{value:!0}),i.FontLoader=i.FontFaceObject=void 0;var a=s(1);class et{constructor({ownerDocument:ht=globalThis.document,styleElement:ft=null}){tn(this,ot,new Set);this._document=ht,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(ht){this.nativeFontFaces.add(ht),this._document.fonts.add(ht)}removeNativeFontFace(ht){this.nativeFontFaces.delete(ht),this._document.fonts.delete(ht)}insertRule(ht){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const ft=this.styleElement.sheet;ft.insertRule(ht,ft.cssRules.length)}clear(){for(const ht of this.nativeFontFaces)this._document.fonts.delete(ht);this.nativeFontFaces.clear(),Ct(this,ot).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(ht){if(!(!ht||Ct(this,ot).has(ht.loadedName))){if((0,a.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:ft,src:pt,style:mt}=ht,gt=new FontFace(ft,pt,mt);this.addNativeFontFace(gt);try{await gt.load(),Ct(this,ot).add(ft)}catch{(0,a.warn)(`Cannot load system font: ${ht.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(gt)}return}(0,a.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(ht){if(ht.attached||ht.missingFile&&!ht.systemFontInfo)return;if(ht.attached=!0,ht.systemFontInfo){await this.loadSystemFont(ht.systemFontInfo);return}if(this.isFontLoadingAPISupported){const pt=ht.createNativeFontFace();if(pt){this.addNativeFontFace(pt);try{await pt.loaded}catch(mt){throw(0,a.warn)(`Failed to load font '${pt.family}': '${mt}'.`),ht.disableFontFace=!0,mt}}return}const ft=ht.createFontFaceRule();if(ft){if(this.insertRule(ft),this.isSyncFontLoadingSupported)return;await new Promise(pt=>{const mt=this._queueLoadingCallback(pt);this._prepareFontLoadEvent(ht,mt)})}}get isFontLoadingAPISupported(){var ft;const ht=!!((ft=this._document)!=null&&ft.fonts);return(0,a.shadow)(this,"isFontLoadingAPISupported",ht)}get isSyncFontLoadingSupported(){let ht=!1;return(a.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(ht=!0),(0,a.shadow)(this,"isSyncFontLoadingSupported",ht)}_queueLoadingCallback(ht){function ft(){for((0,a.assert)(!mt.done,"completeRequest() cannot be called twice."),mt.done=!0;pt.length>0&&pt[0].done;){const gt=pt.shift();setTimeout(gt.callback,0)}}const{loadingRequests:pt}=this,mt={done:!1,complete:ft,callback:ht};return pt.push(mt),mt}get _loadTestFont(){const ht=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,a.shadow)(this,"_loadTestFont",ht)}_prepareFontLoadEvent(ht,ft){function pt(Nt,Kt){return Nt.charCodeAt(Kt)<<24|Nt.charCodeAt(Kt+1)<<16|Nt.charCodeAt(Kt+2)<<8|Nt.charCodeAt(Kt+3)&255}function mt(Nt,Kt,qt,jt){const Zt=Nt.substring(0,Kt),Ht=Nt.substring(Kt+qt);return Zt+jt+Ht}let gt,_t;const yt=this._document.createElement("canvas");yt.width=1,yt.height=1;const St=yt.getContext("2d");let Et=0;function vt(Nt,Kt){if(++Et>30){(0,a.warn)("Load test font never loaded."),Kt();return}if(St.font="30px "+Nt,St.fillText(".",0,20),St.getImageData(0,0,1,1).data[3]>0){Kt();return}setTimeout(vt.bind(null,Nt,Kt))}const bt=`lt${Date.now()}${this.loadTestFontId++}`;let Tt=this._loadTestFont;Tt=mt(Tt,976,bt.length,bt);const Pt=16,At=1482184792;let xt=pt(Tt,Pt);for(gt=0,_t=bt.length-3;gt<_t;gt+=4)xt=xt-At+pt(bt,gt)|0;gt<bt.length&&(xt=xt-At+pt(bt+"XXX",gt)|0),Tt=mt(Tt,Pt,4,(0,a.string32)(xt));const Ot=`url(data:font/opentype;base64,${btoa(Tt)});`,Rt=`@font-face {font-family:"${bt}";src:${Ot}}`;this.insertRule(Rt);const Dt=this._document.createElement("div");Dt.style.visibility="hidden",Dt.style.width=Dt.style.height="10px",Dt.style.position="absolute",Dt.style.top=Dt.style.left="0px";for(const Nt of[ht.loadedName,bt]){const Kt=this._document.createElement("span");Kt.textContent="Hi",Kt.style.fontFamily=Nt,Dt.append(Kt)}this._document.body.append(Dt),vt(bt,()=>{Dt.remove(),ft.complete()})}}ot=new WeakMap,i.FontLoader=et;class tt{constructor(ht,{isEvalSupported:ft=!0,disableFontFace:pt=!1,ignoreErrors:mt=!1,inspectFont:gt=null}){this.compiledGlyphs=Object.create(null);for(const _t in ht)this[_t]=ht[_t];this.isEvalSupported=ft!==!1,this.disableFontFace=pt===!0,this.ignoreErrors=mt===!0,this._inspectFont=gt}createNativeFontFace(){var ft;if(!this.data||this.disableFontFace)return null;let ht;if(!this.cssFontInfo)ht=new FontFace(this.loadedName,this.data,{});else{const pt={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(pt.style=`oblique ${this.cssFontInfo.italicAngle}deg`),ht=new FontFace(this.cssFontInfo.fontFamily,this.data,pt)}return(ft=this._inspectFont)==null||ft.call(this,this),ht}createFontFaceRule(){var mt;if(!this.data||this.disableFontFace)return null;const ht=(0,a.bytesToString)(this.data),ft=`url(data:${this.mimetype};base64,${btoa(ht)});`;let pt;if(!this.cssFontInfo)pt=`@font-face {font-family:"${this.loadedName}";src:${ft}}`;else{let gt=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(gt+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),pt=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${gt}src:${ft}}`}return(mt=this._inspectFont)==null||mt.call(this,this,ft),pt}getPathGenerator(ht,ft){if(this.compiledGlyphs[ft]!==void 0)return this.compiledGlyphs[ft];let pt;try{pt=ht.get(this.loadedName+"_path_"+ft)}catch(mt){if(!this.ignoreErrors)throw mt;return(0,a.warn)(`getPathGenerator - ignoring character: "${mt}".`),this.compiledGlyphs[ft]=function(gt,_t){}}if(this.isEvalSupported&&a.FeatureTest.isEvalSupported){const mt=[];for(const gt of pt){const _t=gt.args!==void 0?gt.args.join(","):"";mt.push("c.",gt.cmd,"(",_t,`);
`)}return this.compiledGlyphs[ft]=new Function("c","size",mt.join(""))}return this.compiledGlyphs[ft]=function(mt,gt){for(const _t of pt)_t.cmd==="scale"&&(_t.args=[gt,-gt]),mt[_t.cmd].apply(mt,_t.args)}}}i.FontFaceObject=tt},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NodeStandardFontDataFactory=i.NodeFilterFactory=i.NodeCanvasFactory=i.NodeCMapReaderFactory=void 0;var a=s(7);s(1);const et=function(ft){return new Promise((pt,mt)=>{require$$5.readFile(ft,(_t,yt)=>{if(_t||!yt){mt(new Error(_t));return}pt(new Uint8Array(yt))})})};class tt extends a.BaseFilterFactory{}i.NodeFilterFactory=tt;class ot extends a.BaseCanvasFactory{_createCanvas(pt,mt){return require$$5.createCanvas(pt,mt)}}i.NodeCanvasFactory=ot;class dt extends a.BaseCMapReaderFactory{_fetchData(pt,mt){return et(pt).then(gt=>({cMapData:gt,compressionType:mt}))}}i.NodeCMapReaderFactory=dt;class ht extends a.BaseStandardFontDataFactory{_fetchData(pt){return et(pt)}}i.NodeStandardFontDataFactory=ht},(o,i,s)=>{var Ft,$s,Jt,Os;Object.defineProperty(i,"__esModule",{value:!0}),i.CanvasGraphics=void 0;var a=s(1),et=s(6),tt=s(12),ot=s(13);const dt=16,ht=100,ft=4096,pt=15,mt=10,gt=1e3,_t=16;function yt(Ut,It){if(Ut._removeMirroring)throw new Error("Context is already forwarding operations.");Ut.__originalSave=Ut.save,Ut.__originalRestore=Ut.restore,Ut.__originalRotate=Ut.rotate,Ut.__originalScale=Ut.scale,Ut.__originalTranslate=Ut.translate,Ut.__originalTransform=Ut.transform,Ut.__originalSetTransform=Ut.setTransform,Ut.__originalResetTransform=Ut.resetTransform,Ut.__originalClip=Ut.clip,Ut.__originalMoveTo=Ut.moveTo,Ut.__originalLineTo=Ut.lineTo,Ut.__originalBezierCurveTo=Ut.bezierCurveTo,Ut.__originalRect=Ut.rect,Ut.__originalClosePath=Ut.closePath,Ut.__originalBeginPath=Ut.beginPath,Ut._removeMirroring=()=>{Ut.save=Ut.__originalSave,Ut.restore=Ut.__originalRestore,Ut.rotate=Ut.__originalRotate,Ut.scale=Ut.__originalScale,Ut.translate=Ut.__originalTranslate,Ut.transform=Ut.__originalTransform,Ut.setTransform=Ut.__originalSetTransform,Ut.resetTransform=Ut.__originalResetTransform,Ut.clip=Ut.__originalClip,Ut.moveTo=Ut.__originalMoveTo,Ut.lineTo=Ut.__originalLineTo,Ut.bezierCurveTo=Ut.__originalBezierCurveTo,Ut.rect=Ut.__originalRect,Ut.closePath=Ut.__originalClosePath,Ut.beginPath=Ut.__originalBeginPath,delete Ut._removeMirroring},Ut.save=function(){It.save(),this.__originalSave()},Ut.restore=function(){It.restore(),this.__originalRestore()},Ut.translate=function($t,Lt){It.translate($t,Lt),this.__originalTranslate($t,Lt)},Ut.scale=function($t,Lt){It.scale($t,Lt),this.__originalScale($t,Lt)},Ut.transform=function($t,Lt,Vt,zt,Xt,Yt){It.transform($t,Lt,Vt,zt,Xt,Yt),this.__originalTransform($t,Lt,Vt,zt,Xt,Yt)},Ut.setTransform=function($t,Lt,Vt,zt,Xt,Yt){It.setTransform($t,Lt,Vt,zt,Xt,Yt),this.__originalSetTransform($t,Lt,Vt,zt,Xt,Yt)},Ut.resetTransform=function(){It.resetTransform(),this.__originalResetTransform()},Ut.rotate=function($t){It.rotate($t),this.__originalRotate($t)},Ut.clip=function($t){It.clip($t),this.__originalClip($t)},Ut.moveTo=function(Mt,$t){It.moveTo(Mt,$t),this.__originalMoveTo(Mt,$t)},Ut.lineTo=function(Mt,$t){It.lineTo(Mt,$t),this.__originalLineTo(Mt,$t)},Ut.bezierCurveTo=function(Mt,$t,Lt,Vt,zt,Xt){It.bezierCurveTo(Mt,$t,Lt,Vt,zt,Xt),this.__originalBezierCurveTo(Mt,$t,Lt,Vt,zt,Xt)},Ut.rect=function(Mt,$t,Lt,Vt){It.rect(Mt,$t,Lt,Vt),this.__originalRect(Mt,$t,Lt,Vt)},Ut.closePath=function(){It.closePath(),this.__originalClosePath()},Ut.beginPath=function(){It.beginPath(),this.__originalBeginPath()}}class St{constructor(It){this.canvasFactory=It,this.cache=Object.create(null)}getCanvas(It,Mt,$t){let Lt;return this.cache[It]!==void 0?(Lt=this.cache[It],this.canvasFactory.reset(Lt,Mt,$t)):(Lt=this.canvasFactory.create(Mt,$t),this.cache[It]=Lt),Lt}delete(It){delete this.cache[It]}clear(){for(const It in this.cache){const Mt=this.cache[It];this.canvasFactory.destroy(Mt),delete this.cache[It]}}}function Et(Ut,It,Mt,$t,Lt,Vt,zt,Xt,Yt,un){const[gn,yn,Tn,Rn,Sn,Fn]=(0,et.getCurrentTransform)(Ut);if(yn===0&&Tn===0){const On=zt*gn+Sn,wn=Math.round(On),fn=Xt*Rn+Fn,_n=Math.round(fn),Cn=(zt+Yt)*gn+Sn,Ln=Math.abs(Math.round(Cn)-wn)||1,Vn=(Xt+un)*Rn+Fn,Jn=Math.abs(Math.round(Vn)-_n)||1;return Ut.setTransform(Math.sign(gn),0,0,Math.sign(Rn),wn,_n),Ut.drawImage(It,Mt,$t,Lt,Vt,0,0,Ln,Jn),Ut.setTransform(gn,yn,Tn,Rn,Sn,Fn),[Ln,Jn]}if(gn===0&&Rn===0){const On=Xt*Tn+Sn,wn=Math.round(On),fn=zt*yn+Fn,_n=Math.round(fn),Cn=(Xt+un)*Tn+Sn,Ln=Math.abs(Math.round(Cn)-wn)||1,Vn=(zt+Yt)*yn+Fn,Jn=Math.abs(Math.round(Vn)-_n)||1;return Ut.setTransform(0,Math.sign(yn),Math.sign(Tn),0,wn,_n),Ut.drawImage(It,Mt,$t,Lt,Vt,0,0,Jn,Ln),Ut.setTransform(gn,yn,Tn,Rn,Sn,Fn),[Jn,Ln]}Ut.drawImage(It,Mt,$t,Lt,Vt,zt,Xt,Yt,un);const Dn=Math.hypot(gn,yn),xn=Math.hypot(Tn,Rn);return[Dn*Yt,xn*un]}function vt(Ut){const{width:It,height:Mt}=Ut;if(It>gt||Mt>gt)return null;const $t=1e3,Lt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),Vt=It+1;let zt=new Uint8Array(Vt*(Mt+1)),Xt,Yt,un;const gn=It+7&-8;let yn=new Uint8Array(gn*Mt),Tn=0;for(const xn of Ut.data){let On=128;for(;On>0;)yn[Tn++]=xn&On?0:255,On>>=1}let Rn=0;for(Tn=0,yn[Tn]!==0&&(zt[0]=1,++Rn),Yt=1;Yt<It;Yt++)yn[Tn]!==yn[Tn+1]&&(zt[Yt]=yn[Tn]?2:1,++Rn),Tn++;for(yn[Tn]!==0&&(zt[Yt]=2,++Rn),Xt=1;Xt<Mt;Xt++){Tn=Xt*gn,un=Xt*Vt,yn[Tn-gn]!==yn[Tn]&&(zt[un]=yn[Tn]?1:8,++Rn);let xn=(yn[Tn]?4:0)+(yn[Tn-gn]?8:0);for(Yt=1;Yt<It;Yt++)xn=(xn>>2)+(yn[Tn+1]?4:0)+(yn[Tn-gn+1]?8:0),Lt[xn]&&(zt[un+Yt]=Lt[xn],++Rn),Tn++;if(yn[Tn-gn]!==yn[Tn]&&(zt[un+Yt]=yn[Tn]?2:4,++Rn),Rn>$t)return null}for(Tn=gn*(Mt-1),un=Xt*Vt,yn[Tn]!==0&&(zt[un]=8,++Rn),Yt=1;Yt<It;Yt++)yn[Tn]!==yn[Tn+1]&&(zt[un+Yt]=yn[Tn]?4:8,++Rn),Tn++;if(yn[Tn]!==0&&(zt[un+Yt]=4,++Rn),Rn>$t)return null;const Sn=new Int32Array([0,Vt,-1,0,-Vt,0,0,0,1]),Fn=new Path2D;for(Xt=0;Rn&&Xt<=Mt;Xt++){let xn=Xt*Vt;const On=xn+It;for(;xn<On&&!zt[xn];)xn++;if(xn===On)continue;Fn.moveTo(xn%Vt,Xt);const wn=xn;let fn=zt[xn];do{const _n=Sn[fn];do xn+=_n;while(!zt[xn]);const Cn=zt[xn];Cn!==5&&Cn!==10?(fn=Cn,zt[xn]=0):(fn=Cn&51*fn>>4,zt[xn]&=fn>>2|fn<<2),Fn.lineTo(xn%Vt,xn/Vt|0),zt[xn]||--Rn}while(wn!==xn);--Xt}return yn=null,zt=null,function(xn){xn.save(),xn.scale(1/It,-1/Mt),xn.translate(0,-Mt),xn.fill(Fn),xn.beginPath(),xn.restore()}}class bt{constructor(It,Mt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=a.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=a.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,It,Mt])}clone(){const It=Object.create(this);return It.clipBox=this.clipBox.slice(),It}setCurrentPoint(It,Mt){this.x=It,this.y=Mt}updatePathMinMax(It,Mt,$t){[Mt,$t]=a.Util.applyTransform([Mt,$t],It),this.minX=Math.min(this.minX,Mt),this.minY=Math.min(this.minY,$t),this.maxX=Math.max(this.maxX,Mt),this.maxY=Math.max(this.maxY,$t)}updateRectMinMax(It,Mt){const $t=a.Util.applyTransform(Mt,It),Lt=a.Util.applyTransform(Mt.slice(2),It);this.minX=Math.min(this.minX,$t[0],Lt[0]),this.minY=Math.min(this.minY,$t[1],Lt[1]),this.maxX=Math.max(this.maxX,$t[0],Lt[0]),this.maxY=Math.max(this.maxY,$t[1],Lt[1])}updateScalingPathMinMax(It,Mt){a.Util.scaleMinMax(It,Mt),this.minX=Math.min(this.minX,Mt[0]),this.maxX=Math.max(this.maxX,Mt[1]),this.minY=Math.min(this.minY,Mt[2]),this.maxY=Math.max(this.maxY,Mt[3])}updateCurvePathMinMax(It,Mt,$t,Lt,Vt,zt,Xt,Yt,un,gn){const yn=a.Util.bezierBoundingBox(Mt,$t,Lt,Vt,zt,Xt,Yt,un);if(gn){gn[0]=Math.min(gn[0],yn[0],yn[2]),gn[1]=Math.max(gn[1],yn[0],yn[2]),gn[2]=Math.min(gn[2],yn[1],yn[3]),gn[3]=Math.max(gn[3],yn[1],yn[3]);return}this.updateRectMinMax(It,yn)}getPathBoundingBox(It=tt.PathType.FILL,Mt=null){const $t=[this.minX,this.minY,this.maxX,this.maxY];if(It===tt.PathType.STROKE){Mt||(0,a.unreachable)("Stroke bounding box must include transform.");const Lt=a.Util.singularValueDecompose2dScale(Mt),Vt=Lt[0]*this.lineWidth/2,zt=Lt[1]*this.lineWidth/2;$t[0]-=Vt,$t[1]-=zt,$t[2]+=Vt,$t[3]+=zt}return $t}updateClipFromPath(){const It=a.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(It||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(It){this.clipBox=It,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(It=tt.PathType.FILL,Mt=null){return a.Util.intersect(this.clipBox,this.getPathBoundingBox(It,Mt))}}function Tt(Ut,It){if(typeof ImageData<"u"&&It instanceof ImageData){Ut.putImageData(It,0,0);return}const Mt=It.height,$t=It.width,Lt=Mt%_t,Vt=(Mt-Lt)/_t,zt=Lt===0?Vt:Vt+1,Xt=Ut.createImageData($t,_t);let Yt=0,un;const gn=It.data,yn=Xt.data;let Tn,Rn,Sn,Fn;if(It.kind===a.ImageKind.GRAYSCALE_1BPP){const Dn=gn.byteLength,xn=new Uint32Array(yn.buffer,0,yn.byteLength>>2),On=xn.length,wn=$t+7>>3,fn=4294967295,_n=a.FeatureTest.isLittleEndian?4278190080:255;for(Tn=0;Tn<zt;Tn++){for(Sn=Tn<Vt?_t:Lt,un=0,Rn=0;Rn<Sn;Rn++){const Cn=Dn-Yt;let Ln=0;const Vn=Cn>wn?$t:Cn*8-7,Jn=Vn&-8;let Xn=0,Yn=0;for(;Ln<Jn;Ln+=8)Yn=gn[Yt++],xn[un++]=Yn&128?fn:_n,xn[un++]=Yn&64?fn:_n,xn[un++]=Yn&32?fn:_n,xn[un++]=Yn&16?fn:_n,xn[un++]=Yn&8?fn:_n,xn[un++]=Yn&4?fn:_n,xn[un++]=Yn&2?fn:_n,xn[un++]=Yn&1?fn:_n;for(;Ln<Vn;Ln++)Xn===0&&(Yn=gn[Yt++],Xn=128),xn[un++]=Yn&Xn?fn:_n,Xn>>=1}for(;un<On;)xn[un++]=0;Ut.putImageData(Xt,0,Tn*_t)}}else if(It.kind===a.ImageKind.RGBA_32BPP){for(Rn=0,Fn=$t*_t*4,Tn=0;Tn<Vt;Tn++)yn.set(gn.subarray(Yt,Yt+Fn)),Yt+=Fn,Ut.putImageData(Xt,0,Rn),Rn+=_t;Tn<zt&&(Fn=$t*Lt*4,yn.set(gn.subarray(Yt,Yt+Fn)),Ut.putImageData(Xt,0,Rn))}else if(It.kind===a.ImageKind.RGB_24BPP)for(Sn=_t,Fn=$t*Sn,Tn=0;Tn<zt;Tn++){for(Tn>=Vt&&(Sn=Lt,Fn=$t*Sn),un=0,Rn=Fn;Rn--;)yn[un++]=gn[Yt++],yn[un++]=gn[Yt++],yn[un++]=gn[Yt++],yn[un++]=255;Ut.putImageData(Xt,0,Tn*_t)}else throw new Error(`bad image kind: ${It.kind}`)}function wt(Ut,It){if(It.bitmap){Ut.drawImage(It.bitmap,0,0);return}const Mt=It.height,$t=It.width,Lt=Mt%_t,Vt=(Mt-Lt)/_t,zt=Lt===0?Vt:Vt+1,Xt=Ut.createImageData($t,_t);let Yt=0;const un=It.data,gn=Xt.data;for(let yn=0;yn<zt;yn++){const Tn=yn<Vt?_t:Lt;({srcPos:Yt}=(0,ot.convertBlackAndWhiteToRGBA)({src:un,srcPos:Yt,dest:gn,width:$t,height:Tn,nonBlackColor:0})),Ut.putImageData(Xt,0,yn*_t)}}function Pt(Ut,It){const Mt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const $t of Mt)Ut[$t]!==void 0&&(It[$t]=Ut[$t]);Ut.setLineDash!==void 0&&(It.setLineDash(Ut.getLineDash()),It.lineDashOffset=Ut.lineDashOffset)}function At(Ut){if(Ut.strokeStyle=Ut.fillStyle="#000000",Ut.fillRule="nonzero",Ut.globalAlpha=1,Ut.lineWidth=1,Ut.lineCap="butt",Ut.lineJoin="miter",Ut.miterLimit=10,Ut.globalCompositeOperation="source-over",Ut.font="10px sans-serif",Ut.setLineDash!==void 0&&(Ut.setLineDash([]),Ut.lineDashOffset=0),!a.isNodeJS){const{filter:It}=Ut;It!=="none"&&It!==""&&(Ut.filter="none")}}function xt(Ut,It,Mt,$t){const Lt=Ut.length;for(let Vt=3;Vt<Lt;Vt+=4){const zt=Ut[Vt];if(zt===0)Ut[Vt-3]=It,Ut[Vt-2]=Mt,Ut[Vt-1]=$t;else if(zt<255){const Xt=255-zt;Ut[Vt-3]=Ut[Vt-3]*zt+It*Xt>>8,Ut[Vt-2]=Ut[Vt-2]*zt+Mt*Xt>>8,Ut[Vt-1]=Ut[Vt-1]*zt+$t*Xt>>8}}}function Ot(Ut,It,Mt){const $t=Ut.length,Lt=1/255;for(let Vt=3;Vt<$t;Vt+=4){const zt=Mt?Mt[Ut[Vt]]:Ut[Vt];It[Vt]=It[Vt]*zt*Lt|0}}function Rt(Ut,It,Mt){const $t=Ut.length;for(let Lt=3;Lt<$t;Lt+=4){const Vt=Ut[Lt-3]*77+Ut[Lt-2]*152+Ut[Lt-1]*28;It[Lt]=Mt?It[Lt]*Mt[Vt>>8]>>8:It[Lt]*Vt>>16}}function Dt(Ut,It,Mt,$t,Lt,Vt,zt,Xt,Yt,un,gn){const yn=!!Vt,Tn=yn?Vt[0]:0,Rn=yn?Vt[1]:0,Sn=yn?Vt[2]:0,Fn=Lt==="Luminosity"?Rt:Ot,xn=Math.min($t,Math.ceil(1048576/Mt));for(let On=0;On<$t;On+=xn){const wn=Math.min(xn,$t-On),fn=Ut.getImageData(Xt-un,On+(Yt-gn),Mt,wn),_n=It.getImageData(Xt,On+Yt,Mt,wn);yn&&xt(fn.data,Tn,Rn,Sn),Fn(fn.data,_n.data,zt),It.putImageData(_n,Xt,On+Yt)}}function Nt(Ut,It,Mt,$t){const Lt=$t[0],Vt=$t[1],zt=$t[2]-Lt,Xt=$t[3]-Vt;zt===0||Xt===0||(Dt(It.context,Mt,zt,Xt,It.subtype,It.backdrop,It.transferMap,Lt,Vt,It.offsetX,It.offsetY),Ut.save(),Ut.globalAlpha=1,Ut.globalCompositeOperation="source-over",Ut.setTransform(1,0,0,1,0,0),Ut.drawImage(Mt.canvas,0,0),Ut.restore())}function Kt(Ut,It){const Mt=a.Util.singularValueDecompose2dScale(Ut);Mt[0]=Math.fround(Mt[0]),Mt[1]=Math.fround(Mt[1]);const $t=Math.fround((globalThis.devicePixelRatio||1)*et.PixelsPerInch.PDF_TO_CSS_UNITS);return It!==void 0?It:Mt[0]<=$t||Mt[1]<=$t}const qt=["butt","round","square"],jt=["miter","round","bevel"],Zt={},Ht={},bn=class bn{constructor(It,Mt,$t,Lt,Vt,{optionalContentConfig:zt,markedContentStack:Xt=null},Yt,un){tn(this,Ft);tn(this,Jt);this.ctx=It,this.current=new bt(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=Mt,this.objs=$t,this.canvasFactory=Lt,this.filterFactory=Vt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=Xt||[],this.optionalContentConfig=zt,this.cachedCanvases=new St(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=Yt,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=un,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(It,Mt=null){return typeof It=="string"?It.startsWith("g_")?this.commonObjs.get(It):this.objs.get(It):Mt}beginDrawing({transform:It,viewport:Mt,transparency:$t=!1,background:Lt=null}){const Vt=this.ctx.canvas.width,zt=this.ctx.canvas.height,Xt=this.ctx.fillStyle;if(this.ctx.fillStyle=Lt||"#ffffff",this.ctx.fillRect(0,0,Vt,zt),this.ctx.fillStyle=Xt,$t){const Yt=this.cachedCanvases.getCanvas("transparent",Vt,zt);this.compositeCtx=this.ctx,this.transparentCanvas=Yt.canvas,this.ctx=Yt.context,this.ctx.save(),this.ctx.transform(...(0,et.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),At(this.ctx),It&&(this.ctx.transform(...It),this.outputScaleX=It[0],this.outputScaleY=It[0]),this.ctx.transform(...Mt.transform),this.viewportScale=Mt.scale,this.baseTransform=(0,et.getCurrentTransform)(this.ctx)}executeOperatorList(It,Mt,$t,Lt){const Vt=It.argsArray,zt=It.fnArray;let Xt=Mt||0;const Yt=Vt.length;if(Yt===Xt)return Xt;const un=Yt-Xt>mt&&typeof $t=="function",gn=un?Date.now()+pt:0;let yn=0;const Tn=this.commonObjs,Rn=this.objs;let Sn;for(;;){if(Lt!==void 0&&Xt===Lt.nextBreakPoint)return Lt.breakIt(Xt,$t),Xt;if(Sn=zt[Xt],Sn!==a.OPS.dependency)this[Sn].apply(this,Vt[Xt]);else for(const Fn of Vt[Xt]){const Dn=Fn.startsWith("g_")?Tn:Rn;if(!Dn.has(Fn))return Dn.get(Fn,$t),Xt}if(Xt++,Xt===Yt)return Xt;if(un&&++yn>mt){if(Date.now()>gn)return $t(),Xt;yn=0}}}endDrawing(){dn(this,Ft,$s).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const It of this._cachedBitmapsMap.values()){for(const Mt of It.values())typeof HTMLCanvasElement<"u"&&Mt instanceof HTMLCanvasElement&&(Mt.width=Mt.height=0);It.clear()}this._cachedBitmapsMap.clear(),dn(this,Jt,Os).call(this)}_scaleImage(It,Mt){const $t=It.width,Lt=It.height;let Vt=Math.max(Math.hypot(Mt[0],Mt[1]),1),zt=Math.max(Math.hypot(Mt[2],Mt[3]),1),Xt=$t,Yt=Lt,un="prescale1",gn,yn;for(;Vt>2&&Xt>1||zt>2&&Yt>1;){let Tn=Xt,Rn=Yt;Vt>2&&Xt>1&&(Tn=Xt>=16384?Math.floor(Xt/2)-1||1:Math.ceil(Xt/2),Vt/=Xt/Tn),zt>2&&Yt>1&&(Rn=Yt>=16384?Math.floor(Yt/2)-1||1:Math.ceil(Yt)/2,zt/=Yt/Rn),gn=this.cachedCanvases.getCanvas(un,Tn,Rn),yn=gn.context,yn.clearRect(0,0,Tn,Rn),yn.drawImage(It,0,0,Xt,Yt,0,0,Tn,Rn),It=gn.canvas,Xt=Tn,Yt=Rn,un=un==="prescale1"?"prescale2":"prescale1"}return{img:It,paintWidth:Xt,paintHeight:Yt}}_createMaskCanvas(It){const Mt=this.ctx,{width:$t,height:Lt}=It,Vt=this.current.fillColor,zt=this.current.patternFill,Xt=(0,et.getCurrentTransform)(Mt);let Yt,un,gn,yn;if((It.bitmap||It.data)&&It.count>1){const Ln=It.bitmap||It.data.buffer;un=JSON.stringify(zt?Xt:[Xt.slice(0,4),Vt]),Yt=this._cachedBitmapsMap.get(Ln),Yt||(Yt=new Map,this._cachedBitmapsMap.set(Ln,Yt));const Vn=Yt.get(un);if(Vn&&!zt){const Jn=Math.round(Math.min(Xt[0],Xt[2])+Xt[4]),Xn=Math.round(Math.min(Xt[1],Xt[3])+Xt[5]);return{canvas:Vn,offsetX:Jn,offsetY:Xn}}gn=Vn}gn||(yn=this.cachedCanvases.getCanvas("maskCanvas",$t,Lt),wt(yn.context,It));let Tn=a.Util.transform(Xt,[1/$t,0,0,-1/Lt,0,0]);Tn=a.Util.transform(Tn,[1,0,0,1,0,-Lt]);const Rn=a.Util.applyTransform([0,0],Tn),Sn=a.Util.applyTransform([$t,Lt],Tn),Fn=a.Util.normalizeRect([Rn[0],Rn[1],Sn[0],Sn[1]]),Dn=Math.round(Fn[2]-Fn[0])||1,xn=Math.round(Fn[3]-Fn[1])||1,On=this.cachedCanvases.getCanvas("fillCanvas",Dn,xn),wn=On.context,fn=Math.min(Rn[0],Sn[0]),_n=Math.min(Rn[1],Sn[1]);wn.translate(-fn,-_n),wn.transform(...Tn),gn||(gn=this._scaleImage(yn.canvas,(0,et.getCurrentTransformInverse)(wn)),gn=gn.img,Yt&&zt&&Yt.set(un,gn)),wn.imageSmoothingEnabled=Kt((0,et.getCurrentTransform)(wn),It.interpolate),Et(wn,gn,0,0,gn.width,gn.height,0,0,$t,Lt),wn.globalCompositeOperation="source-in";const Cn=a.Util.transform((0,et.getCurrentTransformInverse)(wn),[1,0,0,1,-fn,-_n]);return wn.fillStyle=zt?Vt.getPattern(Mt,this,Cn,tt.PathType.FILL):Vt,wn.fillRect(0,0,$t,Lt),Yt&&!zt&&(this.cachedCanvases.delete("fillCanvas"),Yt.set(un,On.canvas)),{canvas:On.canvas,offsetX:Math.round(fn),offsetY:Math.round(_n)}}setLineWidth(It){It!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=It,this.ctx.lineWidth=It}setLineCap(It){this.ctx.lineCap=qt[It]}setLineJoin(It){this.ctx.lineJoin=jt[It]}setMiterLimit(It){this.ctx.miterLimit=It}setDash(It,Mt){const $t=this.ctx;$t.setLineDash!==void 0&&($t.setLineDash(It),$t.lineDashOffset=Mt)}setRenderingIntent(It){}setFlatness(It){}setGState(It){for(const[Mt,$t]of It)switch(Mt){case"LW":this.setLineWidth($t);break;case"LC":this.setLineCap($t);break;case"LJ":this.setLineJoin($t);break;case"ML":this.setMiterLimit($t);break;case"D":this.setDash($t[0],$t[1]);break;case"RI":this.setRenderingIntent($t);break;case"FL":this.setFlatness($t);break;case"Font":this.setFont($t[0],$t[1]);break;case"CA":this.current.strokeAlpha=$t;break;case"ca":this.current.fillAlpha=$t,this.ctx.globalAlpha=$t;break;case"BM":this.ctx.globalCompositeOperation=$t;break;case"SMask":this.current.activeSMask=$t?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter($t);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const It=this.inSMaskMode;this.current.activeSMask&&!It?this.beginSMaskMode():!this.current.activeSMask&&It&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const It=this.ctx.canvas.width,Mt=this.ctx.canvas.height,$t="smaskGroupAt"+this.groupLevel,Lt=this.cachedCanvases.getCanvas($t,It,Mt);this.suspendedCtx=this.ctx,this.ctx=Lt.context;const Vt=this.ctx;Vt.setTransform(...(0,et.getCurrentTransform)(this.suspendedCtx)),Pt(this.suspendedCtx,Vt),yt(Vt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Pt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(It){if(!this.current.activeSMask)return;It?(It[0]=Math.floor(It[0]),It[1]=Math.floor(It[1]),It[2]=Math.ceil(It[2]),It[3]=Math.ceil(It[3])):It=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const Mt=this.current.activeSMask,$t=this.suspendedCtx;Nt($t,Mt,this.ctx,It),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(Pt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const It=this.current;this.stateStack.push(It),this.current=It.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),Pt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(It,Mt,$t,Lt,Vt,zt){this.ctx.transform(It,Mt,$t,Lt,Vt,zt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(It,Mt,$t){const Lt=this.ctx,Vt=this.current;let zt=Vt.x,Xt=Vt.y,Yt,un;const gn=(0,et.getCurrentTransform)(Lt),yn=gn[0]===0&&gn[3]===0||gn[1]===0&&gn[2]===0,Tn=yn?$t.slice(0):null;for(let Rn=0,Sn=0,Fn=It.length;Rn<Fn;Rn++)switch(It[Rn]|0){case a.OPS.rectangle:zt=Mt[Sn++],Xt=Mt[Sn++];const Dn=Mt[Sn++],xn=Mt[Sn++],On=zt+Dn,wn=Xt+xn;Lt.moveTo(zt,Xt),Dn===0||xn===0?Lt.lineTo(On,wn):(Lt.lineTo(On,Xt),Lt.lineTo(On,wn),Lt.lineTo(zt,wn)),yn||Vt.updateRectMinMax(gn,[zt,Xt,On,wn]),Lt.closePath();break;case a.OPS.moveTo:zt=Mt[Sn++],Xt=Mt[Sn++],Lt.moveTo(zt,Xt),yn||Vt.updatePathMinMax(gn,zt,Xt);break;case a.OPS.lineTo:zt=Mt[Sn++],Xt=Mt[Sn++],Lt.lineTo(zt,Xt),yn||Vt.updatePathMinMax(gn,zt,Xt);break;case a.OPS.curveTo:Yt=zt,un=Xt,zt=Mt[Sn+4],Xt=Mt[Sn+5],Lt.bezierCurveTo(Mt[Sn],Mt[Sn+1],Mt[Sn+2],Mt[Sn+3],zt,Xt),Vt.updateCurvePathMinMax(gn,Yt,un,Mt[Sn],Mt[Sn+1],Mt[Sn+2],Mt[Sn+3],zt,Xt,Tn),Sn+=6;break;case a.OPS.curveTo2:Yt=zt,un=Xt,Lt.bezierCurveTo(zt,Xt,Mt[Sn],Mt[Sn+1],Mt[Sn+2],Mt[Sn+3]),Vt.updateCurvePathMinMax(gn,Yt,un,zt,Xt,Mt[Sn],Mt[Sn+1],Mt[Sn+2],Mt[Sn+3],Tn),zt=Mt[Sn+2],Xt=Mt[Sn+3],Sn+=4;break;case a.OPS.curveTo3:Yt=zt,un=Xt,zt=Mt[Sn+2],Xt=Mt[Sn+3],Lt.bezierCurveTo(Mt[Sn],Mt[Sn+1],zt,Xt,zt,Xt),Vt.updateCurvePathMinMax(gn,Yt,un,Mt[Sn],Mt[Sn+1],zt,Xt,zt,Xt,Tn),Sn+=4;break;case a.OPS.closePath:Lt.closePath();break}yn&&Vt.updateScalingPathMinMax(gn,Tn),Vt.setCurrentPoint(zt,Xt)}closePath(){this.ctx.closePath()}stroke(It=!0){const Mt=this.ctx,$t=this.current.strokeColor;Mt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof $t=="object"&&($t!=null&&$t.getPattern)?(Mt.save(),Mt.strokeStyle=$t.getPattern(Mt,this,(0,et.getCurrentTransformInverse)(Mt),tt.PathType.STROKE),this.rescaleAndStroke(!1),Mt.restore()):this.rescaleAndStroke(!0)),It&&this.consumePath(this.current.getClippedPathBoundingBox()),Mt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(It=!0){const Mt=this.ctx,$t=this.current.fillColor,Lt=this.current.patternFill;let Vt=!1;Lt&&(Mt.save(),Mt.fillStyle=$t.getPattern(Mt,this,(0,et.getCurrentTransformInverse)(Mt),tt.PathType.FILL),Vt=!0);const zt=this.current.getClippedPathBoundingBox();this.contentVisible&&zt!==null&&(this.pendingEOFill?(Mt.fill("evenodd"),this.pendingEOFill=!1):Mt.fill()),Vt&&Mt.restore(),It&&this.consumePath(zt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=Zt}eoClip(){this.pendingClip=Ht}beginText(){this.current.textMatrix=a.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const It=this.pendingTextPaths,Mt=this.ctx;if(It===void 0){Mt.beginPath();return}Mt.save(),Mt.beginPath();for(const $t of It)Mt.setTransform(...$t.transform),Mt.translate($t.x,$t.y),$t.addToPath(Mt,$t.fontSize);Mt.restore(),Mt.clip(),Mt.beginPath(),delete this.pendingTextPaths}setCharSpacing(It){this.current.charSpacing=It}setWordSpacing(It){this.current.wordSpacing=It}setHScale(It){this.current.textHScale=It/100}setLeading(It){this.current.leading=-It}setFont(It,Mt){var gn;const $t=this.commonObjs.get(It),Lt=this.current;if(!$t)throw new Error(`Can't find font for ${It}`);if(Lt.fontMatrix=$t.fontMatrix||a.FONT_IDENTITY_MATRIX,(Lt.fontMatrix[0]===0||Lt.fontMatrix[3]===0)&&(0,a.warn)("Invalid font matrix for font "+It),Mt<0?(Mt=-Mt,Lt.fontDirection=-1):Lt.fontDirection=1,this.current.font=$t,this.current.fontSize=Mt,$t.isType3Font)return;const Vt=$t.loadedName||"sans-serif",zt=((gn=$t.systemFontInfo)==null?void 0:gn.css)||`"${Vt}", ${$t.fallbackName}`;let Xt="normal";$t.black?Xt="900":$t.bold&&(Xt="bold");const Yt=$t.italic?"italic":"normal";let un=Mt;Mt<dt?un=dt:Mt>ht&&(un=ht),this.current.fontSizeScale=Mt/un,this.ctx.font=`${Yt} ${Xt} ${un}px ${zt}`}setTextRenderingMode(It){this.current.textRenderingMode=It}setTextRise(It){this.current.textRise=It}moveText(It,Mt){this.current.x=this.current.lineX+=It,this.current.y=this.current.lineY+=Mt}setLeadingMoveText(It,Mt){this.setLeading(-Mt),this.moveText(It,Mt)}setTextMatrix(It,Mt,$t,Lt,Vt,zt){this.current.textMatrix=[It,Mt,$t,Lt,Vt,zt],this.current.textMatrixScale=Math.hypot(It,Mt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(It,Mt,$t,Lt){const Vt=this.ctx,zt=this.current,Xt=zt.font,Yt=zt.textRenderingMode,un=zt.fontSize/zt.fontSizeScale,gn=Yt&a.TextRenderingMode.FILL_STROKE_MASK,yn=!!(Yt&a.TextRenderingMode.ADD_TO_PATH_FLAG),Tn=zt.patternFill&&!Xt.missingFile;let Rn;(Xt.disableFontFace||yn||Tn)&&(Rn=Xt.getPathGenerator(this.commonObjs,It)),Xt.disableFontFace||Tn?(Vt.save(),Vt.translate(Mt,$t),Vt.beginPath(),Rn(Vt,un),Lt&&Vt.setTransform(...Lt),(gn===a.TextRenderingMode.FILL||gn===a.TextRenderingMode.FILL_STROKE)&&Vt.fill(),(gn===a.TextRenderingMode.STROKE||gn===a.TextRenderingMode.FILL_STROKE)&&Vt.stroke(),Vt.restore()):((gn===a.TextRenderingMode.FILL||gn===a.TextRenderingMode.FILL_STROKE)&&Vt.fillText(It,Mt,$t),(gn===a.TextRenderingMode.STROKE||gn===a.TextRenderingMode.FILL_STROKE)&&Vt.strokeText(It,Mt,$t)),yn&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:(0,et.getCurrentTransform)(Vt),x:Mt,y:$t,fontSize:un,addToPath:Rn})}get isFontSubpixelAAEnabled(){const{context:It}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);It.scale(1.5,1),It.fillText("I",0,10);const Mt=It.getImageData(0,0,10,10).data;let $t=!1;for(let Lt=3;Lt<Mt.length;Lt+=4)if(Mt[Lt]>0&&Mt[Lt]<255){$t=!0;break}return(0,a.shadow)(this,"isFontSubpixelAAEnabled",$t)}showText(It){const Mt=this.current,$t=Mt.font;if($t.isType3Font)return this.showType3Text(It);const Lt=Mt.fontSize;if(Lt===0)return;const Vt=this.ctx,zt=Mt.fontSizeScale,Xt=Mt.charSpacing,Yt=Mt.wordSpacing,un=Mt.fontDirection,gn=Mt.textHScale*un,yn=It.length,Tn=$t.vertical,Rn=Tn?1:-1,Sn=$t.defaultVMetrics,Fn=Lt*Mt.fontMatrix[0],Dn=Mt.textRenderingMode===a.TextRenderingMode.FILL&&!$t.disableFontFace&&!Mt.patternFill;Vt.save(),Vt.transform(...Mt.textMatrix),Vt.translate(Mt.x,Mt.y+Mt.textRise),un>0?Vt.scale(gn,-1):Vt.scale(gn,1);let xn;if(Mt.patternFill){Vt.save();const Cn=Mt.fillColor.getPattern(Vt,this,(0,et.getCurrentTransformInverse)(Vt),tt.PathType.FILL);xn=(0,et.getCurrentTransform)(Vt),Vt.restore(),Vt.fillStyle=Cn}let On=Mt.lineWidth;const wn=Mt.textMatrixScale;if(wn===0||On===0){const Cn=Mt.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;(Cn===a.TextRenderingMode.STROKE||Cn===a.TextRenderingMode.FILL_STROKE)&&(On=this.getSinglePixelWidth())}else On/=wn;if(zt!==1&&(Vt.scale(zt,zt),On/=zt),Vt.lineWidth=On,$t.isInvalidPDFjsFont){const Cn=[];let Ln=0;for(const Vn of It)Cn.push(Vn.unicode),Ln+=Vn.width;Vt.fillText(Cn.join(""),0,0),Mt.x+=Ln*Fn*gn,Vt.restore(),this.compose();return}let fn=0,_n;for(_n=0;_n<yn;++_n){const Cn=It[_n];if(typeof Cn=="number"){fn+=Rn*Cn*Lt/1e3;continue}let Ln=!1;const Vn=(Cn.isSpace?Yt:0)+Xt,Jn=Cn.fontChar,Xn=Cn.accent;let Yn,Qn,jn=Cn.width;if(Tn){const qn=Cn.vmetric||Sn,vn=-(Cn.vmetric?qn[1]:jn*.5)*Fn,cn=qn[2]*Fn;jn=qn?-qn[0]:jn,Yn=vn/zt,Qn=(fn+cn)/zt}else Yn=fn/zt,Qn=0;if($t.remeasure&&jn>0){const qn=Vt.measureText(Jn).width*1e3/Lt*zt;if(jn<qn&&this.isFontSubpixelAAEnabled){const vn=jn/qn;Ln=!0,Vt.save(),Vt.scale(vn,1),Yn/=vn}else jn!==qn&&(Yn+=(jn-qn)/2e3*Lt/zt)}if(this.contentVisible&&(Cn.isInFont||$t.missingFile)){if(Dn&&!Xn)Vt.fillText(Jn,Yn,Qn);else if(this.paintChar(Jn,Yn,Qn,xn),Xn){const qn=Yn+Lt*Xn.offset.x/zt,vn=Qn-Lt*Xn.offset.y/zt;this.paintChar(Xn.fontChar,qn,vn,xn)}}const zn=Tn?jn*Fn-Vn*un:jn*Fn+Vn*un;fn+=zn,Ln&&Vt.restore()}Tn?Mt.y-=fn:Mt.x+=fn*gn,Vt.restore(),this.compose()}showType3Text(It){const Mt=this.ctx,$t=this.current,Lt=$t.font,Vt=$t.fontSize,zt=$t.fontDirection,Xt=Lt.vertical?1:-1,Yt=$t.charSpacing,un=$t.wordSpacing,gn=$t.textHScale*zt,yn=$t.fontMatrix||a.FONT_IDENTITY_MATRIX,Tn=It.length,Rn=$t.textRenderingMode===a.TextRenderingMode.INVISIBLE;let Sn,Fn,Dn,xn;if(!(Rn||Vt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,Mt.save(),Mt.transform(...$t.textMatrix),Mt.translate($t.x,$t.y),Mt.scale(gn,zt),Sn=0;Sn<Tn;++Sn){if(Fn=It[Sn],typeof Fn=="number"){xn=Xt*Fn*Vt/1e3,this.ctx.translate(xn,0),$t.x+=xn*gn;continue}const On=(Fn.isSpace?un:0)+Yt,wn=Lt.charProcOperatorList[Fn.operatorListId];if(!wn){(0,a.warn)(`Type3 character "${Fn.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Fn,this.save(),Mt.scale(Vt,Vt),Mt.transform(...yn),this.executeOperatorList(wn),this.restore()),Dn=a.Util.applyTransform([Fn.width,0],yn)[0]*Vt+On,Mt.translate(Dn,0),$t.x+=Dn*gn}Mt.restore(),this.processingType3=null}}setCharWidth(It,Mt){}setCharWidthAndBounds(It,Mt,$t,Lt,Vt,zt){this.ctx.rect($t,Lt,Vt-$t,zt-Lt),this.ctx.clip(),this.endPath()}getColorN_Pattern(It){let Mt;if(It[0]==="TilingPattern"){const $t=It[1],Lt=this.baseTransform||(0,et.getCurrentTransform)(this.ctx),Vt={createCanvasGraphics:zt=>new bn(zt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};Mt=new tt.TilingPattern(It,$t,this.ctx,Vt,Lt)}else Mt=this._getPattern(It[1],It[2]);return Mt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(It,Mt,$t){const Lt=a.Util.makeHexColor(It,Mt,$t);this.ctx.strokeStyle=Lt,this.current.strokeColor=Lt}setFillRGBColor(It,Mt,$t){const Lt=a.Util.makeHexColor(It,Mt,$t);this.ctx.fillStyle=Lt,this.current.fillColor=Lt,this.current.patternFill=!1}_getPattern(It,Mt=null){let $t;return this.cachedPatterns.has(It)?$t=this.cachedPatterns.get(It):($t=(0,tt.getShadingPattern)(this.getObject(It)),this.cachedPatterns.set(It,$t)),Mt&&($t.matrix=Mt),$t}shadingFill(It){if(!this.contentVisible)return;const Mt=this.ctx;this.save();const $t=this._getPattern(It);Mt.fillStyle=$t.getPattern(Mt,this,(0,et.getCurrentTransformInverse)(Mt),tt.PathType.SHADING);const Lt=(0,et.getCurrentTransformInverse)(Mt);if(Lt){const{width:Vt,height:zt}=Mt.canvas,[Xt,Yt,un,gn]=a.Util.getAxialAlignedBoundingBox([0,0,Vt,zt],Lt);this.ctx.fillRect(Xt,Yt,un-Xt,gn-Yt)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,a.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,a.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(It,Mt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(It)&&It.length===6&&this.transform(...It),this.baseTransform=(0,et.getCurrentTransform)(this.ctx),Mt)){const $t=Mt[2]-Mt[0],Lt=Mt[3]-Mt[1];this.ctx.rect(Mt[0],Mt[1],$t,Lt),this.current.updateRectMinMax((0,et.getCurrentTransform)(this.ctx),Mt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(It){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const Mt=this.ctx;It.isolated||(0,a.info)("TODO: Support non-isolated groups."),It.knockout&&(0,a.warn)("Knockout groups not supported.");const $t=(0,et.getCurrentTransform)(Mt);if(It.matrix&&Mt.transform(...It.matrix),!It.bbox)throw new Error("Bounding box is required.");let Lt=a.Util.getAxialAlignedBoundingBox(It.bbox,(0,et.getCurrentTransform)(Mt));const Vt=[0,0,Mt.canvas.width,Mt.canvas.height];Lt=a.Util.intersect(Lt,Vt)||[0,0,0,0];const zt=Math.floor(Lt[0]),Xt=Math.floor(Lt[1]);let Yt=Math.max(Math.ceil(Lt[2])-zt,1),un=Math.max(Math.ceil(Lt[3])-Xt,1),gn=1,yn=1;Yt>ft&&(gn=Yt/ft,Yt=ft),un>ft&&(yn=un/ft,un=ft),this.current.startNewPathAndClipBox([0,0,Yt,un]);let Tn="groupAt"+this.groupLevel;It.smask&&(Tn+="_smask_"+this.smaskCounter++%2);const Rn=this.cachedCanvases.getCanvas(Tn,Yt,un),Sn=Rn.context;Sn.scale(1/gn,1/yn),Sn.translate(-zt,-Xt),Sn.transform(...$t),It.smask?this.smaskStack.push({canvas:Rn.canvas,context:Sn,offsetX:zt,offsetY:Xt,scaleX:gn,scaleY:yn,subtype:It.smask.subtype,backdrop:It.smask.backdrop,transferMap:It.smask.transferMap||null,startTransformInverse:null}):(Mt.setTransform(1,0,0,1,0,0),Mt.translate(zt,Xt),Mt.scale(gn,yn),Mt.save()),Pt(Mt,Sn),this.ctx=Sn,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(Mt),this.groupLevel++}endGroup(It){if(!this.contentVisible)return;this.groupLevel--;const Mt=this.ctx,$t=this.groupStack.pop();if(this.ctx=$t,this.ctx.imageSmoothingEnabled=!1,It.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Lt=(0,et.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Lt);const Vt=a.Util.getAxialAlignedBoundingBox([0,0,Mt.canvas.width,Mt.canvas.height],Lt);this.ctx.drawImage(Mt.canvas,0,0),this.ctx.restore(),this.compose(Vt)}}beginAnnotation(It,Mt,$t,Lt,Vt){if(dn(this,Ft,$s).call(this),At(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(Mt)&&Mt.length===4){const zt=Mt[2]-Mt[0],Xt=Mt[3]-Mt[1];if(Vt&&this.annotationCanvasMap){$t=$t.slice(),$t[4]-=Mt[0],$t[5]-=Mt[1],Mt=Mt.slice(),Mt[0]=Mt[1]=0,Mt[2]=zt,Mt[3]=Xt;const[Yt,un]=a.Util.singularValueDecompose2dScale((0,et.getCurrentTransform)(this.ctx)),{viewportScale:gn}=this,yn=Math.ceil(zt*this.outputScaleX*gn),Tn=Math.ceil(Xt*this.outputScaleY*gn);this.annotationCanvas=this.canvasFactory.create(yn,Tn);const{canvas:Rn,context:Sn}=this.annotationCanvas;this.annotationCanvasMap.set(It,Rn),this.annotationCanvas.savedCtx=this.ctx,this.ctx=Sn,this.ctx.save(),this.ctx.setTransform(Yt,0,0,-un,0,Xt*un),At(this.ctx)}else At(this.ctx),this.ctx.rect(Mt[0],Mt[1],zt,Xt),this.ctx.clip(),this.endPath()}this.current=new bt(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...$t),this.transform(...Lt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),dn(this,Jt,Os).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(It){if(!this.contentVisible)return;const Mt=It.count;It=this.getObject(It.data,It),It.count=Mt;const $t=this.ctx,Lt=this.processingType3;if(Lt&&(Lt.compiled===void 0&&(Lt.compiled=vt(It)),Lt.compiled)){Lt.compiled($t);return}const Vt=this._createMaskCanvas(It),zt=Vt.canvas;$t.save(),$t.setTransform(1,0,0,1,0,0),$t.drawImage(zt,Vt.offsetX,Vt.offsetY),$t.restore(),this.compose()}paintImageMaskXObjectRepeat(It,Mt,$t=0,Lt=0,Vt,zt){if(!this.contentVisible)return;It=this.getObject(It.data,It);const Xt=this.ctx;Xt.save();const Yt=(0,et.getCurrentTransform)(Xt);Xt.transform(Mt,$t,Lt,Vt,0,0);const un=this._createMaskCanvas(It);Xt.setTransform(1,0,0,1,un.offsetX-Yt[4],un.offsetY-Yt[5]);for(let gn=0,yn=zt.length;gn<yn;gn+=2){const Tn=a.Util.transform(Yt,[Mt,$t,Lt,Vt,zt[gn],zt[gn+1]]),[Rn,Sn]=a.Util.applyTransform([0,0],Tn);Xt.drawImage(un.canvas,Rn,Sn)}Xt.restore(),this.compose()}paintImageMaskXObjectGroup(It){if(!this.contentVisible)return;const Mt=this.ctx,$t=this.current.fillColor,Lt=this.current.patternFill;for(const Vt of It){const{data:zt,width:Xt,height:Yt,transform:un}=Vt,gn=this.cachedCanvases.getCanvas("maskCanvas",Xt,Yt),yn=gn.context;yn.save();const Tn=this.getObject(zt,Vt);wt(yn,Tn),yn.globalCompositeOperation="source-in",yn.fillStyle=Lt?$t.getPattern(yn,this,(0,et.getCurrentTransformInverse)(Mt),tt.PathType.FILL):$t,yn.fillRect(0,0,Xt,Yt),yn.restore(),Mt.save(),Mt.transform(...un),Mt.scale(1,-1),Et(Mt,gn.canvas,0,0,Xt,Yt,0,-1,1,1),Mt.restore()}this.compose()}paintImageXObject(It){if(!this.contentVisible)return;const Mt=this.getObject(It);if(!Mt){(0,a.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(Mt)}paintImageXObjectRepeat(It,Mt,$t,Lt){if(!this.contentVisible)return;const Vt=this.getObject(It);if(!Vt){(0,a.warn)("Dependent image isn't ready yet");return}const zt=Vt.width,Xt=Vt.height,Yt=[];for(let un=0,gn=Lt.length;un<gn;un+=2)Yt.push({transform:[Mt,0,0,$t,Lt[un],Lt[un+1]],x:0,y:0,w:zt,h:Xt});this.paintInlineImageXObjectGroup(Vt,Yt)}applyTransferMapsToCanvas(It){return this.current.transferMaps!=="none"&&(It.filter=this.current.transferMaps,It.drawImage(It.canvas,0,0),It.filter="none"),It.canvas}applyTransferMapsToBitmap(It){if(this.current.transferMaps==="none")return It.bitmap;const{bitmap:Mt,width:$t,height:Lt}=It,Vt=this.cachedCanvases.getCanvas("inlineImage",$t,Lt),zt=Vt.context;return zt.filter=this.current.transferMaps,zt.drawImage(Mt,0,0),zt.filter="none",Vt.canvas}paintInlineImageXObject(It){if(!this.contentVisible)return;const Mt=It.width,$t=It.height,Lt=this.ctx;if(this.save(),!a.isNodeJS){const{filter:Xt}=Lt;Xt!=="none"&&Xt!==""&&(Lt.filter="none")}Lt.scale(1/Mt,-1/$t);let Vt;if(It.bitmap)Vt=this.applyTransferMapsToBitmap(It);else if(typeof HTMLElement=="function"&&It instanceof HTMLElement||!It.data)Vt=It;else{const Yt=this.cachedCanvases.getCanvas("inlineImage",Mt,$t).context;Tt(Yt,It),Vt=this.applyTransferMapsToCanvas(Yt)}const zt=this._scaleImage(Vt,(0,et.getCurrentTransformInverse)(Lt));Lt.imageSmoothingEnabled=Kt((0,et.getCurrentTransform)(Lt),It.interpolate),Et(Lt,zt.img,0,0,zt.paintWidth,zt.paintHeight,0,-$t,Mt,$t),this.compose(),this.restore()}paintInlineImageXObjectGroup(It,Mt){if(!this.contentVisible)return;const $t=this.ctx;let Lt;if(It.bitmap)Lt=It.bitmap;else{const Vt=It.width,zt=It.height,Yt=this.cachedCanvases.getCanvas("inlineImage",Vt,zt).context;Tt(Yt,It),Lt=this.applyTransferMapsToCanvas(Yt)}for(const Vt of Mt)$t.save(),$t.transform(...Vt.transform),$t.scale(1,-1),Et($t,Lt,Vt.x,Vt.y,Vt.w,Vt.h,0,-1,1,1),$t.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(It){}markPointProps(It,Mt){}beginMarkedContent(It){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(It,Mt){It==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(Mt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(It){const Mt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(It);const $t=this.ctx;this.pendingClip&&(Mt||(this.pendingClip===Ht?$t.clip("evenodd"):$t.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),$t.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const It=(0,et.getCurrentTransform)(this.ctx);if(It[1]===0&&It[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(It[0]),Math.abs(It[3]));else{const Mt=Math.abs(It[0]*It[3]-It[2]*It[1]),$t=Math.hypot(It[0],It[2]),Lt=Math.hypot(It[1],It[3]);this._cachedGetSinglePixelWidth=Math.max($t,Lt)/Mt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:It}=this.current,{a:Mt,b:$t,c:Lt,d:Vt}=this.ctx.getTransform();let zt,Xt;if($t===0&&Lt===0){const Yt=Math.abs(Mt),un=Math.abs(Vt);if(Yt===un)if(It===0)zt=Xt=1/Yt;else{const gn=Yt*It;zt=Xt=gn<1?1/gn:1}else if(It===0)zt=1/Yt,Xt=1/un;else{const gn=Yt*It,yn=un*It;zt=gn<1?1/gn:1,Xt=yn<1?1/yn:1}}else{const Yt=Math.abs(Mt*Vt-$t*Lt),un=Math.hypot(Mt,$t),gn=Math.hypot(Lt,Vt);if(It===0)zt=gn/Yt,Xt=un/Yt;else{const yn=It*Yt;zt=gn>yn?gn/yn:1,Xt=un>yn?un/yn:1}}this._cachedScaleForStroking[0]=zt,this._cachedScaleForStroking[1]=Xt}return this._cachedScaleForStroking}rescaleAndStroke(It){const{ctx:Mt}=this,{lineWidth:$t}=this.current,[Lt,Vt]=this.getScaleForStroking();if(Mt.lineWidth=$t||1,Lt===1&&Vt===1){Mt.stroke();return}const zt=Mt.getLineDash();if(It&&Mt.save(),Mt.scale(Lt,Vt),zt.length>0){const Xt=Math.max(Lt,Vt);Mt.setLineDash(zt.map(Yt=>Yt/Xt)),Mt.lineDashOffset/=Xt}Mt.stroke(),It&&Mt.restore()}isContentVisible(){for(let It=this.markedContentStack.length-1;It>=0;It--)if(!this.markedContentStack[It].visible)return!1;return!0}};Ft=new WeakSet,$s=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},Jt=new WeakSet,Os=function(){if(this.pageColors){const It=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(It!=="none"){const Mt=this.ctx.filter;this.ctx.filter=It,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=Mt}}};let Wt=bn;i.CanvasGraphics=Wt;for(const Ut in a.OPS)Wt.prototype[Ut]!==void 0&&(Wt.prototype[a.OPS[Ut]]=Wt.prototype[Ut])},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TilingPattern=i.PathType=void 0,i.getShadingPattern=_t;var a=s(1),et=s(6);const tt={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};i.PathType=tt;function ot(vt,bt){if(!bt)return;const Tt=bt[2]-bt[0],wt=bt[3]-bt[1],Pt=new Path2D;Pt.rect(bt[0],bt[1],Tt,wt),vt.clip(Pt)}class dt{constructor(){this.constructor===dt&&(0,a.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,a.unreachable)("Abstract method `getPattern` called.")}}class ht extends dt{constructor(bt){super(),this._type=bt[1],this._bbox=bt[2],this._colorStops=bt[3],this._p0=bt[4],this._p1=bt[5],this._r0=bt[6],this._r1=bt[7],this.matrix=null}_createGradient(bt){let Tt;this._type==="axial"?Tt=bt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(Tt=bt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const wt of this._colorStops)Tt.addColorStop(wt[0],wt[1]);return Tt}getPattern(bt,Tt,wt,Pt){let At;if(Pt===tt.STROKE||Pt===tt.FILL){const xt=Tt.current.getClippedPathBoundingBox(Pt,(0,et.getCurrentTransform)(bt))||[0,0,0,0],Ot=Math.ceil(xt[2]-xt[0])||1,Rt=Math.ceil(xt[3]-xt[1])||1,Dt=Tt.cachedCanvases.getCanvas("pattern",Ot,Rt,!0),Nt=Dt.context;Nt.clearRect(0,0,Nt.canvas.width,Nt.canvas.height),Nt.beginPath(),Nt.rect(0,0,Nt.canvas.width,Nt.canvas.height),Nt.translate(-xt[0],-xt[1]),wt=a.Util.transform(wt,[1,0,0,1,xt[0],xt[1]]),Nt.transform(...Tt.baseTransform),this.matrix&&Nt.transform(...this.matrix),ot(Nt,this._bbox),Nt.fillStyle=this._createGradient(Nt),Nt.fill(),At=bt.createPattern(Dt.canvas,"no-repeat");const Kt=new DOMMatrix(wt);At.setTransform(Kt)}else ot(bt,this._bbox),At=this._createGradient(bt);return At}}function ft(vt,bt,Tt,wt,Pt,At,xt,Ot){const Rt=bt.coords,Dt=bt.colors,Nt=vt.data,Kt=vt.width*4;let qt;Rt[Tt+1]>Rt[wt+1]&&(qt=Tt,Tt=wt,wt=qt,qt=At,At=xt,xt=qt),Rt[wt+1]>Rt[Pt+1]&&(qt=wt,wt=Pt,Pt=qt,qt=xt,xt=Ot,Ot=qt),Rt[Tt+1]>Rt[wt+1]&&(qt=Tt,Tt=wt,wt=qt,qt=At,At=xt,xt=qt);const jt=(Rt[Tt]+bt.offsetX)*bt.scaleX,Zt=(Rt[Tt+1]+bt.offsetY)*bt.scaleY,Ht=(Rt[wt]+bt.offsetX)*bt.scaleX,Wt=(Rt[wt+1]+bt.offsetY)*bt.scaleY,Ft=(Rt[Pt]+bt.offsetX)*bt.scaleX,Gt=(Rt[Pt+1]+bt.offsetY)*bt.scaleY;if(Zt>=Gt)return;const Jt=Dt[At],on=Dt[At+1],bn=Dt[At+2],Ut=Dt[xt],It=Dt[xt+1],Mt=Dt[xt+2],$t=Dt[Ot],Lt=Dt[Ot+1],Vt=Dt[Ot+2],zt=Math.round(Zt),Xt=Math.round(Gt);let Yt,un,gn,yn,Tn,Rn,Sn,Fn;for(let Dn=zt;Dn<=Xt;Dn++){if(Dn<Wt){const _n=Dn<Zt?0:(Zt-Dn)/(Zt-Wt);Yt=jt-(jt-Ht)*_n,un=Jt-(Jt-Ut)*_n,gn=on-(on-It)*_n,yn=bn-(bn-Mt)*_n}else{let _n;Dn>Gt?_n=1:Wt===Gt?_n=0:_n=(Wt-Dn)/(Wt-Gt),Yt=Ht-(Ht-Ft)*_n,un=Ut-(Ut-$t)*_n,gn=It-(It-Lt)*_n,yn=Mt-(Mt-Vt)*_n}let xn;Dn<Zt?xn=0:Dn>Gt?xn=1:xn=(Zt-Dn)/(Zt-Gt),Tn=jt-(jt-Ft)*xn,Rn=Jt-(Jt-$t)*xn,Sn=on-(on-Lt)*xn,Fn=bn-(bn-Vt)*xn;const On=Math.round(Math.min(Yt,Tn)),wn=Math.round(Math.max(Yt,Tn));let fn=Kt*Dn+On*4;for(let _n=On;_n<=wn;_n++)xn=(Yt-_n)/(Yt-Tn),xn<0?xn=0:xn>1&&(xn=1),Nt[fn++]=un-(un-Rn)*xn|0,Nt[fn++]=gn-(gn-Sn)*xn|0,Nt[fn++]=yn-(yn-Fn)*xn|0,Nt[fn++]=255}}function pt(vt,bt,Tt){const wt=bt.coords,Pt=bt.colors;let At,xt;switch(bt.type){case"lattice":const Ot=bt.verticesPerRow,Rt=Math.floor(wt.length/Ot)-1,Dt=Ot-1;for(At=0;At<Rt;At++){let Nt=At*Ot;for(let Kt=0;Kt<Dt;Kt++,Nt++)ft(vt,Tt,wt[Nt],wt[Nt+1],wt[Nt+Ot],Pt[Nt],Pt[Nt+1],Pt[Nt+Ot]),ft(vt,Tt,wt[Nt+Ot+1],wt[Nt+1],wt[Nt+Ot],Pt[Nt+Ot+1],Pt[Nt+1],Pt[Nt+Ot])}break;case"triangles":for(At=0,xt=wt.length;At<xt;At+=3)ft(vt,Tt,wt[At],wt[At+1],wt[At+2],Pt[At],Pt[At+1],Pt[At+2]);break;default:throw new Error("illegal figure")}}class mt extends dt{constructor(bt){super(),this._coords=bt[2],this._colors=bt[3],this._figures=bt[4],this._bounds=bt[5],this._bbox=bt[7],this._background=bt[8],this.matrix=null}_createMeshCanvas(bt,Tt,wt){const Ot=Math.floor(this._bounds[0]),Rt=Math.floor(this._bounds[1]),Dt=Math.ceil(this._bounds[2])-Ot,Nt=Math.ceil(this._bounds[3])-Rt,Kt=Math.min(Math.ceil(Math.abs(Dt*bt[0]*1.1)),3e3),qt=Math.min(Math.ceil(Math.abs(Nt*bt[1]*1.1)),3e3),jt=Dt/Kt,Zt=Nt/qt,Ht={coords:this._coords,colors:this._colors,offsetX:-Ot,offsetY:-Rt,scaleX:1/jt,scaleY:1/Zt},Wt=Kt+2*2,Ft=qt+2*2,Gt=wt.getCanvas("mesh",Wt,Ft,!1),Jt=Gt.context,on=Jt.createImageData(Kt,qt);if(Tt){const Ut=on.data;for(let It=0,Mt=Ut.length;It<Mt;It+=4)Ut[It]=Tt[0],Ut[It+1]=Tt[1],Ut[It+2]=Tt[2],Ut[It+3]=255}for(const Ut of this._figures)pt(on,Ut,Ht);return Jt.putImageData(on,2,2),{canvas:Gt.canvas,offsetX:Ot-2*jt,offsetY:Rt-2*Zt,scaleX:jt,scaleY:Zt}}getPattern(bt,Tt,wt,Pt){ot(bt,this._bbox);let At;if(Pt===tt.SHADING)At=a.Util.singularValueDecompose2dScale((0,et.getCurrentTransform)(bt));else if(At=a.Util.singularValueDecompose2dScale(Tt.baseTransform),this.matrix){const Ot=a.Util.singularValueDecompose2dScale(this.matrix);At=[At[0]*Ot[0],At[1]*Ot[1]]}const xt=this._createMeshCanvas(At,Pt===tt.SHADING?null:this._background,Tt.cachedCanvases);return Pt!==tt.SHADING&&(bt.setTransform(...Tt.baseTransform),this.matrix&&bt.transform(...this.matrix)),bt.translate(xt.offsetX,xt.offsetY),bt.scale(xt.scaleX,xt.scaleY),bt.createPattern(xt.canvas,"no-repeat")}}class gt extends dt{getPattern(){return"hotpink"}}function _t(vt){switch(vt[0]){case"RadialAxial":return new ht(vt);case"Mesh":return new mt(vt);case"Dummy":return new gt}throw new Error(`Unknown IR type: ${vt[0]}`)}const yt={COLORED:1,UNCOLORED:2},Et=class Et{constructor(bt,Tt,wt,Pt,At){this.operatorList=bt[2],this.matrix=bt[3]||[1,0,0,1,0,0],this.bbox=bt[4],this.xstep=bt[5],this.ystep=bt[6],this.paintType=bt[7],this.tilingType=bt[8],this.color=Tt,this.ctx=wt,this.canvasGraphicsFactory=Pt,this.baseTransform=At}createPatternCanvas(bt){const Tt=this.operatorList,wt=this.bbox,Pt=this.xstep,At=this.ystep,xt=this.paintType,Ot=this.tilingType,Rt=this.color,Dt=this.canvasGraphicsFactory;(0,a.info)("TilingType: "+Ot);const Nt=wt[0],Kt=wt[1],qt=wt[2],jt=wt[3],Zt=a.Util.singularValueDecompose2dScale(this.matrix),Ht=a.Util.singularValueDecompose2dScale(this.baseTransform),Wt=[Zt[0]*Ht[0],Zt[1]*Ht[1]],Ft=this.getSizeAndScale(Pt,this.ctx.canvas.width,Wt[0]),Gt=this.getSizeAndScale(At,this.ctx.canvas.height,Wt[1]),Jt=bt.cachedCanvases.getCanvas("pattern",Ft.size,Gt.size,!0),on=Jt.context,bn=Dt.createCanvasGraphics(on);bn.groupLevel=bt.groupLevel,this.setFillAndStrokeStyleToContext(bn,xt,Rt);let Ut=Nt,It=Kt,Mt=qt,$t=jt;return Nt<0&&(Ut=0,Mt+=Math.abs(Nt)),Kt<0&&(It=0,$t+=Math.abs(Kt)),on.translate(-(Ft.scale*Ut),-(Gt.scale*It)),bn.transform(Ft.scale,0,0,Gt.scale,0,0),on.save(),this.clipBbox(bn,Ut,It,Mt,$t),bn.baseTransform=(0,et.getCurrentTransform)(bn.ctx),bn.executeOperatorList(Tt),bn.endDrawing(),{canvas:Jt.canvas,scaleX:Ft.scale,scaleY:Gt.scale,offsetX:Ut,offsetY:It}}getSizeAndScale(bt,Tt,wt){bt=Math.abs(bt);const Pt=Math.max(Et.MAX_PATTERN_SIZE,Tt);let At=Math.ceil(bt*wt);return At>=Pt?At=Pt:wt=At/bt,{scale:wt,size:At}}clipBbox(bt,Tt,wt,Pt,At){const xt=Pt-Tt,Ot=At-wt;bt.ctx.rect(Tt,wt,xt,Ot),bt.current.updateRectMinMax((0,et.getCurrentTransform)(bt.ctx),[Tt,wt,Pt,At]),bt.clip(),bt.endPath()}setFillAndStrokeStyleToContext(bt,Tt,wt){const Pt=bt.ctx,At=bt.current;switch(Tt){case yt.COLORED:const xt=this.ctx;Pt.fillStyle=xt.fillStyle,Pt.strokeStyle=xt.strokeStyle,At.fillColor=xt.fillStyle,At.strokeColor=xt.strokeStyle;break;case yt.UNCOLORED:const Ot=a.Util.makeHexColor(wt[0],wt[1],wt[2]);Pt.fillStyle=Ot,Pt.strokeStyle=Ot,At.fillColor=Ot,At.strokeColor=Ot;break;default:throw new a.FormatError(`Unsupported paint type: ${Tt}`)}}getPattern(bt,Tt,wt,Pt){let At=wt;Pt!==tt.SHADING&&(At=a.Util.transform(At,Tt.baseTransform),this.matrix&&(At=a.Util.transform(At,this.matrix)));const xt=this.createPatternCanvas(Tt);let Ot=new DOMMatrix(At);Ot=Ot.translate(xt.offsetX,xt.offsetY),Ot=Ot.scale(1/xt.scaleX,1/xt.scaleY);const Rt=bt.createPattern(xt.canvas,"repeat");return Rt.setTransform(Ot),Rt}};ur(Et,"MAX_PATTERN_SIZE",3e3);let St=Et;i.TilingPattern=St},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.convertBlackAndWhiteToRGBA=tt,i.convertToRGBA=et,i.grayToRGBA=dt;var a=s(1);function et(ht){switch(ht.kind){case a.ImageKind.GRAYSCALE_1BPP:return tt(ht);case a.ImageKind.RGB_24BPP:return ot(ht)}return null}function tt({src:ht,srcPos:ft=0,dest:pt,width:mt,height:gt,nonBlackColor:_t=4294967295,inverseDecode:yt=!1}){const St=a.FeatureTest.isLittleEndian?4278190080:255,[Et,vt]=yt?[_t,St]:[St,_t],bt=mt>>3,Tt=mt&7,wt=ht.length;pt=new Uint32Array(pt.buffer);let Pt=0;for(let At=0;At<gt;At++){for(const Ot=ft+bt;ft<Ot;ft++){const Rt=ft<wt?ht[ft]:255;pt[Pt++]=Rt&128?vt:Et,pt[Pt++]=Rt&64?vt:Et,pt[Pt++]=Rt&32?vt:Et,pt[Pt++]=Rt&16?vt:Et,pt[Pt++]=Rt&8?vt:Et,pt[Pt++]=Rt&4?vt:Et,pt[Pt++]=Rt&2?vt:Et,pt[Pt++]=Rt&1?vt:Et}if(Tt===0)continue;const xt=ft<wt?ht[ft++]:255;for(let Ot=0;Ot<Tt;Ot++)pt[Pt++]=xt&1<<7-Ot?vt:Et}return{srcPos:ft,destPos:Pt}}function ot({src:ht,srcPos:ft=0,dest:pt,destPos:mt=0,width:gt,height:_t}){let yt=0;const St=ht.length>>2,Et=new Uint32Array(ht.buffer,ft,St);if(a.FeatureTest.isLittleEndian){for(;yt<St-2;yt+=3,mt+=4){const vt=Et[yt],bt=Et[yt+1],Tt=Et[yt+2];pt[mt]=vt|4278190080,pt[mt+1]=vt>>>24|bt<<8|4278190080,pt[mt+2]=bt>>>16|Tt<<16|4278190080,pt[mt+3]=Tt>>>8|4278190080}for(let vt=yt*4,bt=ht.length;vt<bt;vt+=3)pt[mt++]=ht[vt]|ht[vt+1]<<8|ht[vt+2]<<16|4278190080}else{for(;yt<St-2;yt+=3,mt+=4){const vt=Et[yt],bt=Et[yt+1],Tt=Et[yt+2];pt[mt]=vt|255,pt[mt+1]=vt<<24|bt>>>8|255,pt[mt+2]=bt<<16|Tt>>>16|255,pt[mt+3]=Tt<<8|255}for(let vt=yt*4,bt=ht.length;vt<bt;vt+=3)pt[mt++]=ht[vt]<<24|ht[vt+1]<<16|ht[vt+2]<<8|255}return{srcPos:ft,destPos:mt}}function dt(ht,ft){if(a.FeatureTest.isLittleEndian)for(let pt=0,mt=ht.length;pt<mt;pt++)ft[pt]=ht[pt]*65793|4278190080;else for(let pt=0,mt=ht.length;pt<mt;pt++)ft[pt]=ht[pt]*16843008|255}},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.GlobalWorkerOptions=void 0;const s=Object.create(null);i.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(o,i,s)=>{var ht,Dl,pt,Ll,gt,Ko;Object.defineProperty(i,"__esModule",{value:!0}),i.MessageHandler=void 0;var a=s(1);const et={UNKNOWN:0,DATA:1,ERROR:2},tt={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function ot(yt){switch(yt instanceof Error||typeof yt=="object"&&yt!==null||(0,a.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),yt.name){case"AbortException":return new a.AbortException(yt.message);case"MissingPDFException":return new a.MissingPDFException(yt.message);case"PasswordException":return new a.PasswordException(yt.message,yt.code);case"UnexpectedResponseException":return new a.UnexpectedResponseException(yt.message,yt.status);case"UnknownErrorException":return new a.UnknownErrorException(yt.message,yt.details);default:return new a.UnknownErrorException(yt.message,yt.toString())}}class dt{constructor(St,Et,vt){tn(this,ht);tn(this,pt);tn(this,gt);this.sourceName=St,this.targetName=Et,this.comObj=vt,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=bt=>{const Tt=bt.data;if(Tt.targetName!==this.sourceName)return;if(Tt.stream){dn(this,pt,Ll).call(this,Tt);return}if(Tt.callback){const Pt=Tt.callbackId,At=this.callbackCapabilities[Pt];if(!At)throw new Error(`Cannot resolve callback ${Pt}`);if(delete this.callbackCapabilities[Pt],Tt.callback===et.DATA)At.resolve(Tt.data);else if(Tt.callback===et.ERROR)At.reject(ot(Tt.reason));else throw new Error("Unexpected callback case");return}const wt=this.actionHandler[Tt.action];if(!wt)throw new Error(`Unknown action from worker: ${Tt.action}`);if(Tt.callbackId){const Pt=this.sourceName,At=Tt.sourceName;new Promise(function(xt){xt(wt(Tt.data))}).then(function(xt){vt.postMessage({sourceName:Pt,targetName:At,callback:et.DATA,callbackId:Tt.callbackId,data:xt})},function(xt){vt.postMessage({sourceName:Pt,targetName:At,callback:et.ERROR,callbackId:Tt.callbackId,reason:ot(xt)})});return}if(Tt.streamId){dn(this,ht,Dl).call(this,Tt);return}wt(Tt.data)},vt.addEventListener("message",this._onComObjOnMessage)}on(St,Et){const vt=this.actionHandler;if(vt[St])throw new Error(`There is already an actionName called "${St}"`);vt[St]=Et}send(St,Et,vt){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:St,data:Et},vt)}sendWithPromise(St,Et,vt){const bt=this.callbackId++,Tt=new a.PromiseCapability;this.callbackCapabilities[bt]=Tt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:St,callbackId:bt,data:Et},vt)}catch(wt){Tt.reject(wt)}return Tt.promise}sendWithStream(St,Et,vt,bt){const Tt=this.streamId++,wt=this.sourceName,Pt=this.targetName,At=this.comObj;return new ReadableStream({start:xt=>{const Ot=new a.PromiseCapability;return this.streamControllers[Tt]={controller:xt,startCall:Ot,pullCall:null,cancelCall:null,isClosed:!1},At.postMessage({sourceName:wt,targetName:Pt,action:St,streamId:Tt,data:Et,desiredSize:xt.desiredSize},bt),Ot.promise},pull:xt=>{const Ot=new a.PromiseCapability;return this.streamControllers[Tt].pullCall=Ot,At.postMessage({sourceName:wt,targetName:Pt,stream:tt.PULL,streamId:Tt,desiredSize:xt.desiredSize}),Ot.promise},cancel:xt=>{(0,a.assert)(xt instanceof Error,"cancel must have a valid reason");const Ot=new a.PromiseCapability;return this.streamControllers[Tt].cancelCall=Ot,this.streamControllers[Tt].isClosed=!0,At.postMessage({sourceName:wt,targetName:Pt,stream:tt.CANCEL,streamId:Tt,reason:ot(xt)}),Ot.promise}},vt)}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}ht=new WeakSet,Dl=function(St){const Et=St.streamId,vt=this.sourceName,bt=St.sourceName,Tt=this.comObj,wt=this,Pt=this.actionHandler[St.action],At={enqueue(xt,Ot=1,Rt){if(this.isCancelled)return;const Dt=this.desiredSize;this.desiredSize-=Ot,Dt>0&&this.desiredSize<=0&&(this.sinkCapability=new a.PromiseCapability,this.ready=this.sinkCapability.promise),Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.ENQUEUE,streamId:Et,chunk:xt},Rt)},close(){this.isCancelled||(this.isCancelled=!0,Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.CLOSE,streamId:Et}),delete wt.streamSinks[Et])},error(xt){(0,a.assert)(xt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.ERROR,streamId:Et,reason:ot(xt)}))},sinkCapability:new a.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:St.desiredSize,ready:null};At.sinkCapability.resolve(),At.ready=At.sinkCapability.promise,this.streamSinks[Et]=At,new Promise(function(xt){xt(Pt(St.data,At))}).then(function(){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.START_COMPLETE,streamId:Et,success:!0})},function(xt){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.START_COMPLETE,streamId:Et,reason:ot(xt)})})},pt=new WeakSet,Ll=function(St){const Et=St.streamId,vt=this.sourceName,bt=St.sourceName,Tt=this.comObj,wt=this.streamControllers[Et],Pt=this.streamSinks[Et];switch(St.stream){case tt.START_COMPLETE:St.success?wt.startCall.resolve():wt.startCall.reject(ot(St.reason));break;case tt.PULL_COMPLETE:St.success?wt.pullCall.resolve():wt.pullCall.reject(ot(St.reason));break;case tt.PULL:if(!Pt){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.PULL_COMPLETE,streamId:Et,success:!0});break}Pt.desiredSize<=0&&St.desiredSize>0&&Pt.sinkCapability.resolve(),Pt.desiredSize=St.desiredSize,new Promise(function(At){var xt;At((xt=Pt.onPull)==null?void 0:xt.call(Pt))}).then(function(){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.PULL_COMPLETE,streamId:Et,success:!0})},function(At){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.PULL_COMPLETE,streamId:Et,reason:ot(At)})});break;case tt.ENQUEUE:if((0,a.assert)(wt,"enqueue should have stream controller"),wt.isClosed)break;wt.controller.enqueue(St.chunk);break;case tt.CLOSE:if((0,a.assert)(wt,"close should have stream controller"),wt.isClosed)break;wt.isClosed=!0,wt.controller.close(),dn(this,gt,Ko).call(this,wt,Et);break;case tt.ERROR:(0,a.assert)(wt,"error should have stream controller"),wt.controller.error(ot(St.reason)),dn(this,gt,Ko).call(this,wt,Et);break;case tt.CANCEL_COMPLETE:St.success?wt.cancelCall.resolve():wt.cancelCall.reject(ot(St.reason)),dn(this,gt,Ko).call(this,wt,Et);break;case tt.CANCEL:if(!Pt)break;new Promise(function(At){var xt;At((xt=Pt.onCancel)==null?void 0:xt.call(Pt,ot(St.reason)))}).then(function(){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.CANCEL_COMPLETE,streamId:Et,success:!0})},function(At){Tt.postMessage({sourceName:vt,targetName:bt,stream:tt.CANCEL_COMPLETE,streamId:Et,reason:ot(At)})}),Pt.sinkCapability.reject(ot(St.reason)),Pt.isCancelled=!0,delete this.streamSinks[Et];break;default:throw new Error("Unexpected stream case")}},gt=new WeakSet,Ko=async function(St,Et){var vt,bt,Tt;await Promise.allSettled([(vt=St.startCall)==null?void 0:vt.promise,(bt=St.pullCall)==null?void 0:bt.promise,(Tt=St.cancelCall)==null?void 0:Tt.promise]),delete this.streamControllers[Et]},i.MessageHandler=dt},(o,i,s)=>{var tt,ot;Object.defineProperty(i,"__esModule",{value:!0}),i.Metadata=void 0;var a=s(1);class et{constructor({parsedData:ht,rawData:ft}){tn(this,tt,void 0);tn(this,ot,void 0);pn(this,tt,ht),pn(this,ot,ft)}getRaw(){return Ct(this,ot)}get(ht){return Ct(this,tt).get(ht)??null}getAll(){return(0,a.objectFromMap)(Ct(this,tt))}has(ht){return Ct(this,tt).has(ht)}}tt=new WeakMap,ot=new WeakMap,i.Metadata=et},(o,i,s)=>{var ht,ft,pt,mt,gt,_t,ks;Object.defineProperty(i,"__esModule",{value:!0}),i.OptionalContentConfig=void 0;var a=s(1),et=s(8);const tt=Symbol("INTERNAL");class ot{constructor(Et,vt){tn(this,ht,!0);this.name=Et,this.intent=vt}get visible(){return Ct(this,ht)}_setVisible(Et,vt){Et!==tt&&(0,a.unreachable)("Internal method `_setVisible` called."),pn(this,ht,vt)}}ht=new WeakMap;class dt{constructor(Et){tn(this,_t);tn(this,ft,null);tn(this,pt,new Map);tn(this,mt,null);tn(this,gt,null);if(this.name=null,this.creator=null,Et!==null){this.name=Et.name,this.creator=Et.creator,pn(this,gt,Et.order);for(const vt of Et.groups)Ct(this,pt).set(vt.id,new ot(vt.name,vt.intent));if(Et.baseState==="OFF")for(const vt of Ct(this,pt).values())vt._setVisible(tt,!1);for(const vt of Et.on)Ct(this,pt).get(vt)._setVisible(tt,!0);for(const vt of Et.off)Ct(this,pt).get(vt)._setVisible(tt,!1);pn(this,mt,this.getHash())}}isVisible(Et){if(Ct(this,pt).size===0)return!0;if(!Et)return(0,a.warn)("Optional content group not defined."),!0;if(Et.type==="OCG")return Ct(this,pt).has(Et.id)?Ct(this,pt).get(Et.id).visible:((0,a.warn)(`Optional content group not found: ${Et.id}`),!0);if(Et.type==="OCMD"){if(Et.expression)return dn(this,_t,ks).call(this,Et.expression);if(!Et.policy||Et.policy==="AnyOn"){for(const vt of Et.ids){if(!Ct(this,pt).has(vt))return(0,a.warn)(`Optional content group not found: ${vt}`),!0;if(Ct(this,pt).get(vt).visible)return!0}return!1}else if(Et.policy==="AllOn"){for(const vt of Et.ids){if(!Ct(this,pt).has(vt))return(0,a.warn)(`Optional content group not found: ${vt}`),!0;if(!Ct(this,pt).get(vt).visible)return!1}return!0}else if(Et.policy==="AnyOff"){for(const vt of Et.ids){if(!Ct(this,pt).has(vt))return(0,a.warn)(`Optional content group not found: ${vt}`),!0;if(!Ct(this,pt).get(vt).visible)return!0}return!1}else if(Et.policy==="AllOff"){for(const vt of Et.ids){if(!Ct(this,pt).has(vt))return(0,a.warn)(`Optional content group not found: ${vt}`),!0;if(Ct(this,pt).get(vt).visible)return!1}return!0}return(0,a.warn)(`Unknown optional content policy ${Et.policy}.`),!0}return(0,a.warn)(`Unknown group type ${Et.type}.`),!0}setVisibility(Et,vt=!0){if(!Ct(this,pt).has(Et)){(0,a.warn)(`Optional content group not found: ${Et}`);return}Ct(this,pt).get(Et)._setVisible(tt,!!vt),pn(this,ft,null)}get hasInitialVisibility(){return Ct(this,mt)===null||this.getHash()===Ct(this,mt)}getOrder(){return Ct(this,pt).size?Ct(this,gt)?Ct(this,gt).slice():[...Ct(this,pt).keys()]:null}getGroups(){return Ct(this,pt).size>0?(0,a.objectFromMap)(Ct(this,pt)):null}getGroup(Et){return Ct(this,pt).get(Et)||null}getHash(){if(Ct(this,ft)!==null)return Ct(this,ft);const Et=new et.MurmurHash3_64;for(const[vt,bt]of Ct(this,pt))Et.update(`${vt}:${bt.visible}`);return pn(this,ft,Et.hexdigest())}}ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakSet,ks=function(Et){const vt=Et.length;if(vt<2)return!0;const bt=Et[0];for(let Tt=1;Tt<vt;Tt++){const wt=Et[Tt];let Pt;if(Array.isArray(wt))Pt=dn(this,_t,ks).call(this,wt);else if(Ct(this,pt).has(wt))Pt=Ct(this,pt).get(wt).visible;else return(0,a.warn)(`Optional content group not found: ${wt}`),!0;switch(bt){case"And":if(!Pt)return!1;break;case"Or":if(Pt)return!0;break;case"Not":return!Pt;default:return!0}}return bt==="And"},i.OptionalContentConfig=dt},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFDataTransportStream=void 0;var a=s(1),et=s(6);class tt{constructor({length:ft,initialData:pt,progressiveDone:mt=!1,contentDispositionFilename:gt=null,disableRange:_t=!1,disableStream:yt=!1},St){if((0,a.assert)(St,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=mt,this._contentDispositionFilename=gt,(pt==null?void 0:pt.length)>0){const Et=pt instanceof Uint8Array&&pt.byteLength===pt.buffer.byteLength?pt.buffer:new Uint8Array(pt).buffer;this._queuedChunks.push(Et)}this._pdfDataRangeTransport=St,this._isStreamingSupported=!yt,this._isRangeSupported=!_t,this._contentLength=ft,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((Et,vt)=>{this._onReceiveData({begin:Et,chunk:vt})}),this._pdfDataRangeTransport.addProgressListener((Et,vt)=>{this._onProgress({loaded:Et,total:vt})}),this._pdfDataRangeTransport.addProgressiveReadListener(Et=>{this._onReceiveData({chunk:Et})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:ft,chunk:pt}){const mt=pt instanceof Uint8Array&&pt.byteLength===pt.buffer.byteLength?pt.buffer:new Uint8Array(pt).buffer;if(ft===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(mt):this._queuedChunks.push(mt);else{const gt=this._rangeReaders.some(function(_t){return _t._begin!==ft?!1:(_t._enqueue(mt),!0)});(0,a.assert)(gt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var ft;return((ft=this._fullRequestReader)==null?void 0:ft._loaded)??0}_onProgress(ft){var pt,mt,gt,_t;ft.total===void 0?(mt=(pt=this._rangeReaders[0])==null?void 0:pt.onProgress)==null||mt.call(pt,{loaded:ft.loaded}):(_t=(gt=this._fullRequestReader)==null?void 0:gt.onProgress)==null||_t.call(gt,{loaded:ft.loaded,total:ft.total})}_onProgressiveDone(){var ft;(ft=this._fullRequestReader)==null||ft.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(ft){const pt=this._rangeReaders.indexOf(ft);pt>=0&&this._rangeReaders.splice(pt,1)}getFullReader(){(0,a.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const ft=this._queuedChunks;return this._queuedChunks=null,new ot(this,ft,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(ft,pt){if(pt<=this._progressiveDataLength)return null;const mt=new dt(this,ft,pt);return this._pdfDataRangeTransport.requestDataRange(ft,pt),this._rangeReaders.push(mt),mt}cancelAllRequests(ft){var pt;(pt=this._fullRequestReader)==null||pt.cancel(ft);for(const mt of this._rangeReaders.slice(0))mt.cancel(ft);this._pdfDataRangeTransport.abort()}}i.PDFDataTransportStream=tt;class ot{constructor(ft,pt,mt=!1,gt=null){this._stream=ft,this._done=mt||!1,this._filename=(0,et.isPdfFile)(gt)?gt:null,this._queuedChunks=pt||[],this._loaded=0;for(const _t of this._queuedChunks)this._loaded+=_t.byteLength;this._requests=[],this._headersReady=Promise.resolve(),ft._fullRequestReader=this,this.onProgress=null}_enqueue(ft){this._done||(this._requests.length>0?this._requests.shift().resolve({value:ft,done:!1}):this._queuedChunks.push(ft),this._loaded+=ft.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const ft=new a.PromiseCapability;return this._requests.push(ft),ft.promise}cancel(ft){this._done=!0;for(const pt of this._requests)pt.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class dt{constructor(ft,pt,mt){this._stream=ft,this._begin=pt,this._end=mt,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(ft){if(!this._done){if(this._requests.length===0)this._queuedChunk=ft;else{this._requests.shift().resolve({value:ft,done:!1});for(const mt of this._requests)mt.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const pt=this._queuedChunk;return this._queuedChunk=null,{value:pt,done:!1}}if(this._done)return{value:void 0,done:!0};const ft=new a.PromiseCapability;return this._requests.push(ft),ft.promise}cancel(ft){this._done=!0;for(const pt of this._requests)pt.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFFetchStream=void 0;var a=s(1),et=s(20);function tt(mt,gt,_t){return{method:"GET",headers:mt,signal:_t.signal,mode:"cors",credentials:gt?"include":"same-origin",redirect:"follow"}}function ot(mt){const gt=new Headers;for(const _t in mt){const yt=mt[_t];yt!==void 0&&gt.append(_t,yt)}return gt}function dt(mt){return mt instanceof Uint8Array?mt.buffer:mt instanceof ArrayBuffer?mt:((0,a.warn)(`getArrayBuffer - unexpected data format: ${mt}`),new Uint8Array(mt).buffer)}class ht{constructor(gt){this.source=gt,this.isHttp=/^https?:/i.test(gt.url),this.httpHeaders=this.isHttp&&gt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var gt;return((gt=this._fullRequestReader)==null?void 0:gt._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ft(this),this._fullRequestReader}getRangeReader(gt,_t){if(_t<=this._progressiveDataLength)return null;const yt=new pt(this,gt,_t);return this._rangeRequestReaders.push(yt),yt}cancelAllRequests(gt){var _t;(_t=this._fullRequestReader)==null||_t.cancel(gt);for(const yt of this._rangeRequestReaders.slice(0))yt.cancel(gt)}}i.PDFFetchStream=ht;class ft{constructor(gt){this._stream=gt,this._reader=null,this._loaded=0,this._filename=null;const _t=gt.source;this._withCredentials=_t.withCredentials||!1,this._contentLength=_t.length,this._headersCapability=new a.PromiseCapability,this._disableRange=_t.disableRange||!1,this._rangeChunkSize=_t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!_t.disableStream,this._isRangeSupported=!_t.disableRange,this._headers=ot(this._stream.httpHeaders);const yt=_t.url;fetch(yt,tt(this._headers,this._withCredentials,this._abortController)).then(St=>{if(!(0,et.validateResponseStatus)(St.status))throw(0,et.createResponseStatusError)(St.status,yt);this._reader=St.body.getReader(),this._headersCapability.resolve();const Et=Tt=>St.headers.get(Tt),{allowRangeRequests:vt,suggestedLength:bt}=(0,et.validateRangeRequestCapabilities)({getResponseHeader:Et,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=vt,this._contentLength=bt||this._contentLength,this._filename=(0,et.extractFilenameFromHeader)(Et),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new a.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var yt;await this._headersCapability.promise;const{value:gt,done:_t}=await this._reader.read();return _t?{value:gt,done:_t}:(this._loaded+=gt.byteLength,(yt=this.onProgress)==null||yt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:dt(gt),done:!1})}cancel(gt){var _t;(_t=this._reader)==null||_t.cancel(gt),this._abortController.abort()}}class pt{constructor(gt,_t,yt){this._stream=gt,this._reader=null,this._loaded=0;const St=gt.source;this._withCredentials=St.withCredentials||!1,this._readCapability=new a.PromiseCapability,this._isStreamingSupported=!St.disableStream,this._abortController=new AbortController,this._headers=ot(this._stream.httpHeaders),this._headers.append("Range",`bytes=${_t}-${yt-1}`);const Et=St.url;fetch(Et,tt(this._headers,this._withCredentials,this._abortController)).then(vt=>{if(!(0,et.validateResponseStatus)(vt.status))throw(0,et.createResponseStatusError)(vt.status,Et);this._readCapability.resolve(),this._reader=vt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var yt;await this._readCapability.promise;const{value:gt,done:_t}=await this._reader.read();return _t?{value:gt,done:_t}:(this._loaded+=gt.byteLength,(yt=this.onProgress)==null||yt.call(this,{loaded:this._loaded}),{value:dt(gt),done:!1})}cancel(gt){var _t;(_t=this._reader)==null||_t.cancel(gt),this._abortController.abort()}}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.createResponseStatusError=ht,i.extractFilenameFromHeader=dt,i.validateRangeRequestCapabilities=ot,i.validateResponseStatus=ft;var a=s(1),et=s(21),tt=s(6);function ot({getResponseHeader:pt,isHttp:mt,rangeChunkSize:gt,disableRange:_t}){const yt={allowRangeRequests:!1,suggestedLength:void 0},St=parseInt(pt("Content-Length"),10);return!Number.isInteger(St)||(yt.suggestedLength=St,St<=2*gt)||_t||!mt||pt("Accept-Ranges")!=="bytes"||(pt("Content-Encoding")||"identity")!=="identity"||(yt.allowRangeRequests=!0),yt}function dt(pt){const mt=pt("Content-Disposition");if(mt){let gt=(0,et.getFilenameFromContentDispositionHeader)(mt);if(gt.includes("%"))try{gt=decodeURIComponent(gt)}catch{}if((0,tt.isPdfFile)(gt))return gt}return null}function ht(pt,mt){return pt===404||pt===0&&mt.startsWith("file:")?new a.MissingPDFException('Missing PDF "'+mt+'".'):new a.UnexpectedResponseException(`Unexpected server response (${pt}) while retrieving PDF "${mt}".`,pt)}function ft(pt){return pt===200||pt===206}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.getFilenameFromContentDispositionHeader=et;var a=s(1);function et(tt){let ot=!0,dt=ht("filename\\*","i").exec(tt);if(dt){dt=dt[1];let St=gt(dt);return St=unescape(St),St=_t(St),St=yt(St),pt(St)}if(dt=mt(tt),dt){const St=yt(dt);return pt(St)}if(dt=ht("filename","i").exec(tt),dt){dt=dt[1];let St=gt(dt);return St=yt(St),pt(St)}function ht(St,Et){return new RegExp("(?:^|;)\\s*"+St+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',Et)}function ft(St,Et){if(St){if(!/^[\x00-\xFF]+$/.test(Et))return Et;try{const vt=new TextDecoder(St,{fatal:!0}),bt=(0,a.stringToBytes)(Et);Et=vt.decode(bt),ot=!1}catch{}}return Et}function pt(St){return ot&&/[\x80-\xff]/.test(St)&&(St=ft("utf-8",St),ot&&(St=ft("iso-8859-1",St))),St}function mt(St){const Et=[];let vt;const bt=ht("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(vt=bt.exec(St))!==null;){let[,wt,Pt,At]=vt;if(wt=parseInt(wt,10),wt in Et){if(wt===0)break;continue}Et[wt]=[Pt,At]}const Tt=[];for(let wt=0;wt<Et.length&&wt in Et;++wt){let[Pt,At]=Et[wt];At=gt(At),Pt&&(At=unescape(At),wt===0&&(At=_t(At))),Tt.push(At)}return Tt.join("")}function gt(St){if(St.startsWith('"')){const Et=St.slice(1).split('\\"');for(let vt=0;vt<Et.length;++vt){const bt=Et[vt].indexOf('"');bt!==-1&&(Et[vt]=Et[vt].slice(0,bt),Et.length=vt+1),Et[vt]=Et[vt].replaceAll(/\\(.)/g,"$1")}St=Et.join('"')}return St}function _t(St){const Et=St.indexOf("'");if(Et===-1)return St;const vt=St.slice(0,Et),Tt=St.slice(Et+1).replace(/^[^']*'/,"");return ft(vt,Tt)}function yt(St){return!St.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(St)?St:St.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(Et,vt,bt,Tt){if(bt==="q"||bt==="Q")return Tt=Tt.replaceAll("_"," "),Tt=Tt.replaceAll(/=([0-9a-fA-F]{2})/g,function(wt,Pt){return String.fromCharCode(parseInt(Pt,16))}),ft(vt,Tt);try{Tt=atob(Tt)}catch{}return ft(vt,Tt)})}return""}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNetworkStream=void 0;var a=s(1),et=s(20);const tt=200,ot=206;function dt(gt){const _t=gt.response;return typeof _t!="string"?_t:(0,a.stringToBytes)(_t).buffer}class ht{constructor(_t,yt={}){this.url=_t,this.isHttp=/^https?:/i.test(_t),this.httpHeaders=this.isHttp&&yt.httpHeaders||Object.create(null),this.withCredentials=yt.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(_t,yt,St){const Et={begin:_t,end:yt};for(const vt in St)Et[vt]=St[vt];return this.request(Et)}requestFull(_t){return this.request(_t)}request(_t){const yt=new XMLHttpRequest,St=this.currXhrId++,Et=this.pendingRequests[St]={xhr:yt};yt.open("GET",this.url),yt.withCredentials=this.withCredentials;for(const vt in this.httpHeaders){const bt=this.httpHeaders[vt];bt!==void 0&&yt.setRequestHeader(vt,bt)}return this.isHttp&&"begin"in _t&&"end"in _t?(yt.setRequestHeader("Range",`bytes=${_t.begin}-${_t.end-1}`),Et.expectedStatus=ot):Et.expectedStatus=tt,yt.responseType="arraybuffer",_t.onError&&(yt.onerror=function(vt){_t.onError(yt.status)}),yt.onreadystatechange=this.onStateChange.bind(this,St),yt.onprogress=this.onProgress.bind(this,St),Et.onHeadersReceived=_t.onHeadersReceived,Et.onDone=_t.onDone,Et.onError=_t.onError,Et.onProgress=_t.onProgress,yt.send(null),St}onProgress(_t,yt){var Et;const St=this.pendingRequests[_t];St&&((Et=St.onProgress)==null||Et.call(St,yt))}onStateChange(_t,yt){var wt,Pt,At;const St=this.pendingRequests[_t];if(!St)return;const Et=St.xhr;if(Et.readyState>=2&&St.onHeadersReceived&&(St.onHeadersReceived(),delete St.onHeadersReceived),Et.readyState!==4||!(_t in this.pendingRequests))return;if(delete this.pendingRequests[_t],Et.status===0&&this.isHttp){(wt=St.onError)==null||wt.call(St,Et.status);return}const vt=Et.status||tt;if(!(vt===tt&&St.expectedStatus===ot)&&vt!==St.expectedStatus){(Pt=St.onError)==null||Pt.call(St,Et.status);return}const Tt=dt(Et);if(vt===ot){const xt=Et.getResponseHeader("Content-Range"),Ot=/bytes (\d+)-(\d+)\/(\d+)/.exec(xt);St.onDone({begin:parseInt(Ot[1],10),chunk:Tt})}else Tt?St.onDone({begin:0,chunk:Tt}):(At=St.onError)==null||At.call(St,Et.status)}getRequestXhr(_t){return this.pendingRequests[_t].xhr}isPendingRequest(_t){return _t in this.pendingRequests}abortRequest(_t){const yt=this.pendingRequests[_t].xhr;delete this.pendingRequests[_t],yt.abort()}}class ft{constructor(_t){this._source=_t,this._manager=new ht(_t.url,{httpHeaders:_t.httpHeaders,withCredentials:_t.withCredentials}),this._rangeChunkSize=_t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(_t){const yt=this._rangeRequestReaders.indexOf(_t);yt>=0&&this._rangeRequestReaders.splice(yt,1)}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new pt(this._manager,this._source),this._fullRequestReader}getRangeReader(_t,yt){const St=new mt(this._manager,_t,yt);return St.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(St),St}cancelAllRequests(_t){var yt;(yt=this._fullRequestReader)==null||yt.cancel(_t);for(const St of this._rangeRequestReaders.slice(0))St.cancel(_t)}}i.PDFNetworkStream=ft;class pt{constructor(_t,yt){this._manager=_t;const St={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=yt.url,this._fullRequestId=_t.requestFull(St),this._headersReceivedCapability=new a.PromiseCapability,this._disableRange=yt.disableRange||!1,this._contentLength=yt.length,this._rangeChunkSize=yt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const _t=this._fullRequestId,yt=this._manager.getRequestXhr(_t),St=bt=>yt.getResponseHeader(bt),{allowRangeRequests:Et,suggestedLength:vt}=(0,et.validateRangeRequestCapabilities)({getResponseHeader:St,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});Et&&(this._isRangeSupported=!0),this._contentLength=vt||this._contentLength,this._filename=(0,et.extractFilenameFromHeader)(St),this._isRangeSupported&&this._manager.abortRequest(_t),this._headersReceivedCapability.resolve()}_onDone(_t){if(_t&&(this._requests.length>0?this._requests.shift().resolve({value:_t.chunk,done:!1}):this._cachedChunks.push(_t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const yt of this._requests)yt.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(_t){this._storedError=(0,et.createResponseStatusError)(_t,this._url),this._headersReceivedCapability.reject(this._storedError);for(const yt of this._requests)yt.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(_t){var yt;(yt=this.onProgress)==null||yt.call(this,{loaded:_t.loaded,total:_t.lengthComputable?_t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const _t=new a.PromiseCapability;return this._requests.push(_t),_t.promise}cancel(_t){this._done=!0,this._headersReceivedCapability.reject(_t);for(const yt of this._requests)yt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class mt{constructor(_t,yt,St){this._manager=_t;const Et={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=_t.url,this._requestId=_t.requestRange(yt,St,Et),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){var _t;(_t=this.onClosed)==null||_t.call(this,this)}_onDone(_t){const yt=_t.chunk;this._requests.length>0?this._requests.shift().resolve({value:yt,done:!1}):this._queuedChunk=yt,this._done=!0;for(const St of this._requests)St.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(_t){this._storedError=(0,et.createResponseStatusError)(_t,this._url);for(const yt of this._requests)yt.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(_t){var yt;this.isStreamingSupported||(yt=this.onProgress)==null||yt.call(this,{loaded:_t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const yt=this._queuedChunk;return this._queuedChunk=null,{value:yt,done:!1}}if(this._done)return{value:void 0,done:!0};const _t=new a.PromiseCapability;return this._requests.push(_t),_t.promise}cancel(_t){this._done=!0;for(const yt of this._requests)yt.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.PDFNodeStream=void 0;var a=s(1),et=s(20);const tt=/^file:\/\/\/[a-zA-Z]:\//;function ot(St){const Et=require$$5,vt=Et.parse(St);return vt.protocol==="file:"||vt.host?vt:/^[a-z]:[/\\]/i.test(St)?Et.parse(`file:///${St}`):(vt.host||(vt.protocol="file:"),vt)}class dt{constructor(Et){this.source=Et,this.url=ot(Et.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&Et.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var Et;return((Et=this._fullRequestReader)==null?void 0:Et._loaded)??0}getFullReader(){return(0,a.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new _t(this):new mt(this),this._fullRequestReader}getRangeReader(Et,vt){if(vt<=this._progressiveDataLength)return null;const bt=this.isFsUrl?new yt(this,Et,vt):new gt(this,Et,vt);return this._rangeRequestReaders.push(bt),bt}cancelAllRequests(Et){var vt;(vt=this._fullRequestReader)==null||vt.cancel(Et);for(const bt of this._rangeRequestReaders.slice(0))bt.cancel(Et)}}i.PDFNodeStream=dt;class ht{constructor(Et){this._url=Et.url,this._done=!1,this._storedError=null,this.onProgress=null;const vt=Et.source;this._contentLength=vt.length,this._loaded=0,this._filename=null,this._disableRange=vt.disableRange||!1,this._rangeChunkSize=vt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!vt.disableStream,this._isRangeSupported=!vt.disableRange,this._readableStream=null,this._readCapability=new a.PromiseCapability,this._headersCapability=new a.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var bt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Et=this._readableStream.read();return Et===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=Et.length,(bt=this.onProgress)==null||bt.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(Et).buffer,done:!1})}cancel(Et){if(!this._readableStream){this._error(Et);return}this._readableStream.destroy(Et)}_error(Et){this._storedError=Et,this._readCapability.resolve()}_setReadableStream(Et){this._readableStream=Et,Et.on("readable",()=>{this._readCapability.resolve()}),Et.on("end",()=>{Et.destroy(),this._done=!0,this._readCapability.resolve()}),Et.on("error",vt=>{this._error(vt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new a.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class ft{constructor(Et){this._url=Et.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new a.PromiseCapability;const vt=Et.source;this._isStreamingSupported=!vt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){var bt;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const Et=this._readableStream.read();return Et===null?(this._readCapability=new a.PromiseCapability,this.read()):(this._loaded+=Et.length,(bt=this.onProgress)==null||bt.call(this,{loaded:this._loaded}),{value:new Uint8Array(Et).buffer,done:!1})}cancel(Et){if(!this._readableStream){this._error(Et);return}this._readableStream.destroy(Et)}_error(Et){this._storedError=Et,this._readCapability.resolve()}_setReadableStream(Et){this._readableStream=Et,Et.on("readable",()=>{this._readCapability.resolve()}),Et.on("end",()=>{Et.destroy(),this._done=!0,this._readCapability.resolve()}),Et.on("error",vt=>{this._error(vt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function pt(St,Et){return{protocol:St.protocol,auth:St.auth,host:St.hostname,port:St.port,path:St.path,method:"GET",headers:Et}}class mt extends ht{constructor(Et){super(Et);const vt=bt=>{if(bt.statusCode===404){const At=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=At,this._headersCapability.reject(At);return}this._headersCapability.resolve(),this._setReadableStream(bt);const Tt=At=>this._readableStream.headers[At.toLowerCase()],{allowRangeRequests:wt,suggestedLength:Pt}=(0,et.validateRangeRequestCapabilities)({getResponseHeader:Tt,isHttp:Et.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=wt,this._contentLength=Pt||this._contentLength,this._filename=(0,et.extractFilenameFromHeader)(Tt)};if(this._request=null,this._url.protocol==="http:"){const bt=require$$5;this._request=bt.request(pt(this._url,Et.httpHeaders),vt)}else{const bt=require$$5;this._request=bt.request(pt(this._url,Et.httpHeaders),vt)}this._request.on("error",bt=>{this._storedError=bt,this._headersCapability.reject(bt)}),this._request.end()}}class gt extends ft{constructor(Et,vt,bt){super(Et),this._httpHeaders={};for(const wt in Et.httpHeaders){const Pt=Et.httpHeaders[wt];Pt!==void 0&&(this._httpHeaders[wt]=Pt)}this._httpHeaders.Range=`bytes=${vt}-${bt-1}`;const Tt=wt=>{if(wt.statusCode===404){const Pt=new a.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=Pt;return}this._setReadableStream(wt)};if(this._request=null,this._url.protocol==="http:"){const wt=require$$5;this._request=wt.request(pt(this._url,this._httpHeaders),Tt)}else{const wt=require$$5;this._request=wt.request(pt(this._url,this._httpHeaders),Tt)}this._request.on("error",wt=>{this._storedError=wt}),this._request.end()}}class _t extends ht{constructor(Et){super(Et);let vt=decodeURIComponent(this._url.path);tt.test(this._url.href)&&(vt=vt.replace(/^\//,""));const bt=require$$5;bt.lstat(vt,(Tt,wt)=>{if(Tt){Tt.code==="ENOENT"&&(Tt=new a.MissingPDFException(`Missing PDF "${vt}".`)),this._storedError=Tt,this._headersCapability.reject(Tt);return}this._contentLength=wt.size,this._setReadableStream(bt.createReadStream(vt)),this._headersCapability.resolve()})}}class yt extends ft{constructor(Et,vt,bt){super(Et);let Tt=decodeURIComponent(this._url.path);tt.test(this._url.href)&&(Tt=Tt.replace(/^\//,""));const wt=require$$5;this._setReadableStream(wt.createReadStream(Tt,{start:vt,end:bt-1}))}}},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.SVGGraphics=void 0;var a=s(6),et=s(1);const tt={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},ot="http://www.w3.org/XML/1998/namespace",dt="http://www.w3.org/1999/xlink",ht=["butt","round","square"],ft=["miter","round","bevel"],pt=function(wt,Pt="",At=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!At)return URL.createObjectURL(new Blob([wt],{type:Pt}));const xt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Ot=`data:${Pt};base64,`;for(let Rt=0,Dt=wt.length;Rt<Dt;Rt+=3){const Nt=wt[Rt]&255,Kt=wt[Rt+1]&255,qt=wt[Rt+2]&255,jt=Nt>>2,Zt=(Nt&3)<<4|Kt>>4,Ht=Rt+1<Dt?(Kt&15)<<2|qt>>6:64,Wt=Rt+2<Dt?qt&63:64;Ot+=xt[jt]+xt[Zt]+xt[Ht]+xt[Wt]}return Ot},mt=function(){const wt=new Uint8Array([137,80,78,71,13,10,26,10]),Pt=12,At=new Int32Array(256);for(let qt=0;qt<256;qt++){let jt=qt;for(let Zt=0;Zt<8;Zt++)jt=jt&1?3988292384^jt>>1&2147483647:jt>>1&2147483647;At[qt]=jt}function xt(qt,jt,Zt){let Ht=-1;for(let Wt=jt;Wt<Zt;Wt++){const Ft=(Ht^qt[Wt])&255,Gt=At[Ft];Ht=Ht>>>8^Gt}return Ht^-1}function Ot(qt,jt,Zt,Ht){let Wt=Ht;const Ft=jt.length;Zt[Wt]=Ft>>24&255,Zt[Wt+1]=Ft>>16&255,Zt[Wt+2]=Ft>>8&255,Zt[Wt+3]=Ft&255,Wt+=4,Zt[Wt]=qt.charCodeAt(0)&255,Zt[Wt+1]=qt.charCodeAt(1)&255,Zt[Wt+2]=qt.charCodeAt(2)&255,Zt[Wt+3]=qt.charCodeAt(3)&255,Wt+=4,Zt.set(jt,Wt),Wt+=jt.length;const Gt=xt(Zt,Ht+4,Wt);Zt[Wt]=Gt>>24&255,Zt[Wt+1]=Gt>>16&255,Zt[Wt+2]=Gt>>8&255,Zt[Wt+3]=Gt&255}function Rt(qt,jt,Zt){let Ht=1,Wt=0;for(let Ft=jt;Ft<Zt;++Ft)Ht=(Ht+(qt[Ft]&255))%65521,Wt=(Wt+Ht)%65521;return Wt<<16|Ht}function Dt(qt){if(!et.isNodeJS)return Nt(qt);try{const jt=parseInt(process.versions.node)>=8?qt:Buffer.from(qt),Zt=require$$5.deflateSync(jt,{level:9});return Zt instanceof Uint8Array?Zt:new Uint8Array(Zt)}catch(jt){(0,et.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+jt)}return Nt(qt)}function Nt(qt){let jt=qt.length;const Zt=65535,Ht=Math.ceil(jt/Zt),Wt=new Uint8Array(2+jt+Ht*5+4);let Ft=0;Wt[Ft++]=120,Wt[Ft++]=156;let Gt=0;for(;jt>Zt;)Wt[Ft++]=0,Wt[Ft++]=255,Wt[Ft++]=255,Wt[Ft++]=0,Wt[Ft++]=0,Wt.set(qt.subarray(Gt,Gt+Zt),Ft),Ft+=Zt,Gt+=Zt,jt-=Zt;Wt[Ft++]=1,Wt[Ft++]=jt&255,Wt[Ft++]=jt>>8&255,Wt[Ft++]=~jt&65535&255,Wt[Ft++]=(~jt&65535)>>8&255,Wt.set(qt.subarray(Gt),Ft),Ft+=qt.length-Gt;const Jt=Rt(qt,0,qt.length);return Wt[Ft++]=Jt>>24&255,Wt[Ft++]=Jt>>16&255,Wt[Ft++]=Jt>>8&255,Wt[Ft++]=Jt&255,Wt}function Kt(qt,jt,Zt,Ht){const Wt=qt.width,Ft=qt.height;let Gt,Jt,on;const bn=qt.data;switch(jt){case et.ImageKind.GRAYSCALE_1BPP:Jt=0,Gt=1,on=Wt+7>>3;break;case et.ImageKind.RGB_24BPP:Jt=2,Gt=8,on=Wt*3;break;case et.ImageKind.RGBA_32BPP:Jt=6,Gt=8,on=Wt*4;break;default:throw new Error("invalid format")}const Ut=new Uint8Array((1+on)*Ft);let It=0,Mt=0;for(let Yt=0;Yt<Ft;++Yt)Ut[It++]=0,Ut.set(bn.subarray(Mt,Mt+on),It),Mt+=on,It+=on;if(jt===et.ImageKind.GRAYSCALE_1BPP&&Ht){It=0;for(let Yt=0;Yt<Ft;Yt++){It++;for(let un=0;un<on;un++)Ut[It++]^=255}}const $t=new Uint8Array([Wt>>24&255,Wt>>16&255,Wt>>8&255,Wt&255,Ft>>24&255,Ft>>16&255,Ft>>8&255,Ft&255,Gt,Jt,0,0,0]),Lt=Dt(Ut),Vt=wt.length+Pt*3+$t.length+Lt.length,zt=new Uint8Array(Vt);let Xt=0;return zt.set(wt,Xt),Xt+=wt.length,Ot("IHDR",$t,zt,Xt),Xt+=Pt+$t.length,Ot("IDATA",Lt,zt,Xt),Xt+=Pt+Lt.length,Ot("IEND",new Uint8Array(0),zt,Xt),pt(zt,"image/png",Zt)}return function(jt,Zt,Ht){const Wt=jt.kind===void 0?et.ImageKind.GRAYSCALE_1BPP:jt.kind;return Kt(jt,Wt,Zt,Ht)}}();class gt{constructor(){this.fontSizeScale=1,this.fontWeight=tt.fontWeight,this.fontSize=0,this.textMatrix=et.IDENTITY_MATRIX,this.fontMatrix=et.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=et.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=tt.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(Pt,At){this.x=Pt,this.y=At}}function _t(wt){let Pt=[];const At=[];for(const xt of wt){if(xt.fn==="save"){Pt.push({fnId:92,fn:"group",items:[]}),At.push(Pt),Pt=Pt.at(-1).items;continue}xt.fn==="restore"?Pt=At.pop():Pt.push(xt)}return Pt}function yt(wt){if(Number.isInteger(wt))return wt.toString();const Pt=wt.toFixed(10);let At=Pt.length-1;if(Pt[At]!=="0")return Pt;do At--;while(Pt[At]==="0");return Pt.substring(0,Pt[At]==="."?At:At+1)}function St(wt){if(wt[4]===0&&wt[5]===0){if(wt[1]===0&&wt[2]===0)return wt[0]===1&&wt[3]===1?"":`scale(${yt(wt[0])} ${yt(wt[3])})`;if(wt[0]===wt[3]&&wt[1]===-wt[2]){const Pt=Math.acos(wt[0])*180/Math.PI;return`rotate(${yt(Pt)})`}}else if(wt[0]===1&&wt[1]===0&&wt[2]===0&&wt[3]===1)return`translate(${yt(wt[4])} ${yt(wt[5])})`;return`matrix(${yt(wt[0])} ${yt(wt[1])} ${yt(wt[2])} ${yt(wt[3])} ${yt(wt[4])} ${yt(wt[5])})`}let Et=0,vt=0,bt=0;class Tt{constructor(Pt,At,xt=!1){(0,a.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new a.DOMSVGFactory,this.current=new gt,this.transformMatrix=et.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=Pt,this.objs=At,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!xt,this._operatorIdMapping=[];for(const Ot in et.OPS)this._operatorIdMapping[et.OPS[Ot]]=Ot}getObject(Pt,At=null){return typeof Pt=="string"?Pt.startsWith("g_")?this.commonObjs.get(Pt):this.objs.get(Pt):At}save(){this.transformStack.push(this.transformMatrix);const Pt=this.current;this.extraStack.push(Pt),this.current=Pt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(Pt){this.save(),this.executeOpTree(Pt),this.restore()}loadDependencies(Pt){const At=Pt.fnArray,xt=Pt.argsArray;for(let Ot=0,Rt=At.length;Ot<Rt;Ot++)if(At[Ot]===et.OPS.dependency)for(const Dt of xt[Ot]){const Nt=Dt.startsWith("g_")?this.commonObjs:this.objs,Kt=new Promise(qt=>{Nt.get(Dt,qt)});this.current.dependencies.push(Kt)}return Promise.all(this.current.dependencies)}transform(Pt,At,xt,Ot,Rt,Dt){const Nt=[Pt,At,xt,Ot,Rt,Dt];this.transformMatrix=et.Util.transform(this.transformMatrix,Nt),this.tgrp=null}getSVG(Pt,At){this.viewport=At;const xt=this._initialize(At);return this.loadDependencies(Pt).then(()=>(this.transformMatrix=et.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(Pt)),xt))}convertOpList(Pt){const At=this._operatorIdMapping,xt=Pt.argsArray,Ot=Pt.fnArray,Rt=[];for(let Dt=0,Nt=Ot.length;Dt<Nt;Dt++){const Kt=Ot[Dt];Rt.push({fnId:Kt,fn:At[Kt],args:xt[Dt]})}return _t(Rt)}executeOpTree(Pt){for(const At of Pt){const xt=At.fn,Ot=At.fnId,Rt=At.args;switch(Ot|0){case et.OPS.beginText:this.beginText();break;case et.OPS.dependency:break;case et.OPS.setLeading:this.setLeading(Rt);break;case et.OPS.setLeadingMoveText:this.setLeadingMoveText(Rt[0],Rt[1]);break;case et.OPS.setFont:this.setFont(Rt);break;case et.OPS.showText:this.showText(Rt[0]);break;case et.OPS.showSpacedText:this.showText(Rt[0]);break;case et.OPS.endText:this.endText();break;case et.OPS.moveText:this.moveText(Rt[0],Rt[1]);break;case et.OPS.setCharSpacing:this.setCharSpacing(Rt[0]);break;case et.OPS.setWordSpacing:this.setWordSpacing(Rt[0]);break;case et.OPS.setHScale:this.setHScale(Rt[0]);break;case et.OPS.setTextMatrix:this.setTextMatrix(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]);break;case et.OPS.setTextRise:this.setTextRise(Rt[0]);break;case et.OPS.setTextRenderingMode:this.setTextRenderingMode(Rt[0]);break;case et.OPS.setLineWidth:this.setLineWidth(Rt[0]);break;case et.OPS.setLineJoin:this.setLineJoin(Rt[0]);break;case et.OPS.setLineCap:this.setLineCap(Rt[0]);break;case et.OPS.setMiterLimit:this.setMiterLimit(Rt[0]);break;case et.OPS.setFillRGBColor:this.setFillRGBColor(Rt[0],Rt[1],Rt[2]);break;case et.OPS.setStrokeRGBColor:this.setStrokeRGBColor(Rt[0],Rt[1],Rt[2]);break;case et.OPS.setStrokeColorN:this.setStrokeColorN(Rt);break;case et.OPS.setFillColorN:this.setFillColorN(Rt);break;case et.OPS.shadingFill:this.shadingFill(Rt[0]);break;case et.OPS.setDash:this.setDash(Rt[0],Rt[1]);break;case et.OPS.setRenderingIntent:this.setRenderingIntent(Rt[0]);break;case et.OPS.setFlatness:this.setFlatness(Rt[0]);break;case et.OPS.setGState:this.setGState(Rt[0]);break;case et.OPS.fill:this.fill();break;case et.OPS.eoFill:this.eoFill();break;case et.OPS.stroke:this.stroke();break;case et.OPS.fillStroke:this.fillStroke();break;case et.OPS.eoFillStroke:this.eoFillStroke();break;case et.OPS.clip:this.clip("nonzero");break;case et.OPS.eoClip:this.clip("evenodd");break;case et.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case et.OPS.paintImageXObject:this.paintImageXObject(Rt[0]);break;case et.OPS.paintInlineImageXObject:this.paintInlineImageXObject(Rt[0]);break;case et.OPS.paintImageMaskXObject:this.paintImageMaskXObject(Rt[0]);break;case et.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(Rt[0],Rt[1]);break;case et.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case et.OPS.closePath:this.closePath();break;case et.OPS.closeStroke:this.closeStroke();break;case et.OPS.closeFillStroke:this.closeFillStroke();break;case et.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case et.OPS.nextLine:this.nextLine();break;case et.OPS.transform:this.transform(Rt[0],Rt[1],Rt[2],Rt[3],Rt[4],Rt[5]);break;case et.OPS.constructPath:this.constructPath(Rt[0],Rt[1]);break;case et.OPS.endPath:this.endPath();break;case 92:this.group(At.items);break;default:(0,et.warn)(`Unimplemented operator ${xt}`);break}}}setWordSpacing(Pt){this.current.wordSpacing=Pt}setCharSpacing(Pt){this.current.charSpacing=Pt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(Pt,At,xt,Ot,Rt,Dt){const Nt=this.current;Nt.textMatrix=Nt.lineMatrix=[Pt,At,xt,Ot,Rt,Dt],Nt.textMatrixScale=Math.hypot(Pt,At),Nt.x=Nt.lineX=0,Nt.y=Nt.lineY=0,Nt.xcoords=[],Nt.ycoords=[],Nt.tspan=this.svgFactory.createElement("svg:tspan"),Nt.tspan.setAttributeNS(null,"font-family",Nt.fontFamily),Nt.tspan.setAttributeNS(null,"font-size",`${yt(Nt.fontSize)}px`),Nt.tspan.setAttributeNS(null,"y",yt(-Nt.y)),Nt.txtElement=this.svgFactory.createElement("svg:text"),Nt.txtElement.append(Nt.tspan)}beginText(){const Pt=this.current;Pt.x=Pt.lineX=0,Pt.y=Pt.lineY=0,Pt.textMatrix=et.IDENTITY_MATRIX,Pt.lineMatrix=et.IDENTITY_MATRIX,Pt.textMatrixScale=1,Pt.tspan=this.svgFactory.createElement("svg:tspan"),Pt.txtElement=this.svgFactory.createElement("svg:text"),Pt.txtgrp=this.svgFactory.createElement("svg:g"),Pt.xcoords=[],Pt.ycoords=[]}moveText(Pt,At){const xt=this.current;xt.x=xt.lineX+=Pt,xt.y=xt.lineY+=At,xt.xcoords=[],xt.ycoords=[],xt.tspan=this.svgFactory.createElement("svg:tspan"),xt.tspan.setAttributeNS(null,"font-family",xt.fontFamily),xt.tspan.setAttributeNS(null,"font-size",`${yt(xt.fontSize)}px`),xt.tspan.setAttributeNS(null,"y",yt(-xt.y))}showText(Pt){const At=this.current,xt=At.font,Ot=At.fontSize;if(Ot===0)return;const Rt=At.fontSizeScale,Dt=At.charSpacing,Nt=At.wordSpacing,Kt=At.fontDirection,qt=At.textHScale*Kt,jt=xt.vertical,Zt=jt?1:-1,Ht=xt.defaultVMetrics,Wt=Ot*At.fontMatrix[0];let Ft=0;for(const on of Pt){if(on===null){Ft+=Kt*Nt;continue}else if(typeof on=="number"){Ft+=Zt*on*Ot/1e3;continue}const bn=(on.isSpace?Nt:0)+Dt,Ut=on.fontChar;let It,Mt,$t=on.width;if(jt){let Vt;const zt=on.vmetric||Ht;Vt=on.vmetric?zt[1]:$t*.5,Vt=-Vt*Wt;const Xt=zt[2]*Wt;$t=zt?-zt[0]:$t,It=Vt/Rt,Mt=(Ft+Xt)/Rt}else It=Ft/Rt,Mt=0;(on.isInFont||xt.missingFile)&&(At.xcoords.push(At.x+It),jt&&At.ycoords.push(-At.y+Mt),At.tspan.textContent+=Ut);const Lt=jt?$t*Wt-bn*Kt:$t*Wt+bn*Kt;Ft+=Lt}At.tspan.setAttributeNS(null,"x",At.xcoords.map(yt).join(" ")),jt?At.tspan.setAttributeNS(null,"y",At.ycoords.map(yt).join(" ")):At.tspan.setAttributeNS(null,"y",yt(-At.y)),jt?At.y-=Ft:At.x+=Ft*qt,At.tspan.setAttributeNS(null,"font-family",At.fontFamily),At.tspan.setAttributeNS(null,"font-size",`${yt(At.fontSize)}px`),At.fontStyle!==tt.fontStyle&&At.tspan.setAttributeNS(null,"font-style",At.fontStyle),At.fontWeight!==tt.fontWeight&&At.tspan.setAttributeNS(null,"font-weight",At.fontWeight);const Gt=At.textRenderingMode&et.TextRenderingMode.FILL_STROKE_MASK;if(Gt===et.TextRenderingMode.FILL||Gt===et.TextRenderingMode.FILL_STROKE?(At.fillColor!==tt.fillColor&&At.tspan.setAttributeNS(null,"fill",At.fillColor),At.fillAlpha<1&&At.tspan.setAttributeNS(null,"fill-opacity",At.fillAlpha)):At.textRenderingMode===et.TextRenderingMode.ADD_TO_PATH?At.tspan.setAttributeNS(null,"fill","transparent"):At.tspan.setAttributeNS(null,"fill","none"),Gt===et.TextRenderingMode.STROKE||Gt===et.TextRenderingMode.FILL_STROKE){const on=1/(At.textMatrixScale||1);this._setStrokeAttributes(At.tspan,on)}let Jt=At.textMatrix;At.textRise!==0&&(Jt=Jt.slice(),Jt[5]+=At.textRise),At.txtElement.setAttributeNS(null,"transform",`${St(Jt)} scale(${yt(qt)}, -1)`),At.txtElement.setAttributeNS(ot,"xml:space","preserve"),At.txtElement.append(At.tspan),At.txtgrp.append(At.txtElement),this._ensureTransformGroup().append(At.txtElement)}setLeadingMoveText(Pt,At){this.setLeading(-At),this.moveText(Pt,At)}addFontStyle(Pt){if(!Pt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const At=pt(Pt.data,Pt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${Pt.loadedName}"; src: url(${At}); }
`}setFont(Pt){const At=this.current,xt=this.commonObjs.get(Pt[0]);let Ot=Pt[1];At.font=xt,this.embedFonts&&!xt.missingFile&&!this.embeddedFonts[xt.loadedName]&&(this.addFontStyle(xt),this.embeddedFonts[xt.loadedName]=xt),At.fontMatrix=xt.fontMatrix||et.FONT_IDENTITY_MATRIX;let Rt="normal";xt.black?Rt="900":xt.bold&&(Rt="bold");const Dt=xt.italic?"italic":"normal";Ot<0?(Ot=-Ot,At.fontDirection=-1):At.fontDirection=1,At.fontSize=Ot,At.fontFamily=xt.loadedName,At.fontWeight=Rt,At.fontStyle=Dt,At.tspan=this.svgFactory.createElement("svg:tspan"),At.tspan.setAttributeNS(null,"y",yt(-At.y)),At.xcoords=[],At.ycoords=[]}endText(){var At;const Pt=this.current;Pt.textRenderingMode&et.TextRenderingMode.ADD_TO_PATH_FLAG&&((At=Pt.txtElement)!=null&&At.hasChildNodes())&&(Pt.element=Pt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(Pt){Pt>0&&(this.current.lineWidth=Pt)}setLineCap(Pt){this.current.lineCap=ht[Pt]}setLineJoin(Pt){this.current.lineJoin=ft[Pt]}setMiterLimit(Pt){this.current.miterLimit=Pt}setStrokeAlpha(Pt){this.current.strokeAlpha=Pt}setStrokeRGBColor(Pt,At,xt){this.current.strokeColor=et.Util.makeHexColor(Pt,At,xt)}setFillAlpha(Pt){this.current.fillAlpha=Pt}setFillRGBColor(Pt,At,xt){this.current.fillColor=et.Util.makeHexColor(Pt,At,xt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(Pt){this.current.strokeColor=this._makeColorN_Pattern(Pt)}setFillColorN(Pt){this.current.fillColor=this._makeColorN_Pattern(Pt)}shadingFill(Pt){const{width:At,height:xt}=this.viewport,Ot=et.Util.inverseTransform(this.transformMatrix),[Rt,Dt,Nt,Kt]=et.Util.getAxialAlignedBoundingBox([0,0,At,xt],Ot),qt=this.svgFactory.createElement("svg:rect");qt.setAttributeNS(null,"x",Rt),qt.setAttributeNS(null,"y",Dt),qt.setAttributeNS(null,"width",Nt-Rt),qt.setAttributeNS(null,"height",Kt-Dt),qt.setAttributeNS(null,"fill",this._makeShadingPattern(Pt)),this.current.fillAlpha<1&&qt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(qt)}_makeColorN_Pattern(Pt){return Pt[0]==="TilingPattern"?this._makeTilingPattern(Pt):this._makeShadingPattern(Pt)}_makeTilingPattern(Pt){const At=Pt[1],xt=Pt[2],Ot=Pt[3]||et.IDENTITY_MATRIX,[Rt,Dt,Nt,Kt]=Pt[4],qt=Pt[5],jt=Pt[6],Zt=Pt[7],Ht=`shading${bt++}`,[Wt,Ft,Gt,Jt]=et.Util.normalizeRect([...et.Util.applyTransform([Rt,Dt],Ot),...et.Util.applyTransform([Nt,Kt],Ot)]),[on,bn]=et.Util.singularValueDecompose2dScale(Ot),Ut=qt*on,It=jt*bn,Mt=this.svgFactory.createElement("svg:pattern");Mt.setAttributeNS(null,"id",Ht),Mt.setAttributeNS(null,"patternUnits","userSpaceOnUse"),Mt.setAttributeNS(null,"width",Ut),Mt.setAttributeNS(null,"height",It),Mt.setAttributeNS(null,"x",`${Wt}`),Mt.setAttributeNS(null,"y",`${Ft}`);const $t=this.svg,Lt=this.transformMatrix,Vt=this.current.fillColor,zt=this.current.strokeColor,Xt=this.svgFactory.create(Gt-Wt,Jt-Ft);if(this.svg=Xt,this.transformMatrix=Ot,Zt===2){const Yt=et.Util.makeHexColor(...At);this.current.fillColor=Yt,this.current.strokeColor=Yt}return this.executeOpTree(this.convertOpList(xt)),this.svg=$t,this.transformMatrix=Lt,this.current.fillColor=Vt,this.current.strokeColor=zt,Mt.append(Xt.childNodes[0]),this.defs.append(Mt),`url(#${Ht})`}_makeShadingPattern(Pt){switch(typeof Pt=="string"&&(Pt=this.objs.get(Pt)),Pt[0]){case"RadialAxial":const At=`shading${bt++}`,xt=Pt[3];let Ot;switch(Pt[1]){case"axial":const Rt=Pt[4],Dt=Pt[5];Ot=this.svgFactory.createElement("svg:linearGradient"),Ot.setAttributeNS(null,"id",At),Ot.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ot.setAttributeNS(null,"x1",Rt[0]),Ot.setAttributeNS(null,"y1",Rt[1]),Ot.setAttributeNS(null,"x2",Dt[0]),Ot.setAttributeNS(null,"y2",Dt[1]);break;case"radial":const Nt=Pt[4],Kt=Pt[5],qt=Pt[6],jt=Pt[7];Ot=this.svgFactory.createElement("svg:radialGradient"),Ot.setAttributeNS(null,"id",At),Ot.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Ot.setAttributeNS(null,"cx",Kt[0]),Ot.setAttributeNS(null,"cy",Kt[1]),Ot.setAttributeNS(null,"r",jt),Ot.setAttributeNS(null,"fx",Nt[0]),Ot.setAttributeNS(null,"fy",Nt[1]),Ot.setAttributeNS(null,"fr",qt);break;default:throw new Error(`Unknown RadialAxial type: ${Pt[1]}`)}for(const Rt of xt){const Dt=this.svgFactory.createElement("svg:stop");Dt.setAttributeNS(null,"offset",Rt[0]),Dt.setAttributeNS(null,"stop-color",Rt[1]),Ot.append(Dt)}return this.defs.append(Ot),`url(#${At})`;case"Mesh":return(0,et.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${Pt[0]}`)}}setDash(Pt,At){this.current.dashArray=Pt,this.current.dashPhase=At}constructPath(Pt,At){const xt=this.current;let Ot=xt.x,Rt=xt.y,Dt=[],Nt=0;for(const Kt of Pt)switch(Kt|0){case et.OPS.rectangle:Ot=At[Nt++],Rt=At[Nt++];const qt=At[Nt++],jt=At[Nt++],Zt=Ot+qt,Ht=Rt+jt;Dt.push("M",yt(Ot),yt(Rt),"L",yt(Zt),yt(Rt),"L",yt(Zt),yt(Ht),"L",yt(Ot),yt(Ht),"Z");break;case et.OPS.moveTo:Ot=At[Nt++],Rt=At[Nt++],Dt.push("M",yt(Ot),yt(Rt));break;case et.OPS.lineTo:Ot=At[Nt++],Rt=At[Nt++],Dt.push("L",yt(Ot),yt(Rt));break;case et.OPS.curveTo:Ot=At[Nt+4],Rt=At[Nt+5],Dt.push("C",yt(At[Nt]),yt(At[Nt+1]),yt(At[Nt+2]),yt(At[Nt+3]),yt(Ot),yt(Rt)),Nt+=6;break;case et.OPS.curveTo2:Dt.push("C",yt(Ot),yt(Rt),yt(At[Nt]),yt(At[Nt+1]),yt(At[Nt+2]),yt(At[Nt+3])),Ot=At[Nt+2],Rt=At[Nt+3],Nt+=4;break;case et.OPS.curveTo3:Ot=At[Nt+2],Rt=At[Nt+3],Dt.push("C",yt(At[Nt]),yt(At[Nt+1]),yt(Ot),yt(Rt),yt(Ot),yt(Rt)),Nt+=4;break;case et.OPS.closePath:Dt.push("Z");break}Dt=Dt.join(" "),xt.path&&Pt.length>0&&Pt[0]!==et.OPS.rectangle&&Pt[0]!==et.OPS.moveTo?Dt=xt.path.getAttributeNS(null,"d")+Dt:(xt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(xt.path)),xt.path.setAttributeNS(null,"d",Dt),xt.path.setAttributeNS(null,"fill","none"),xt.element=xt.path,xt.setCurrentPoint(Ot,Rt)}endPath(){const Pt=this.current;if(Pt.path=null,!this.pendingClip)return;if(!Pt.element){this.pendingClip=null;return}const At=`clippath${Et++}`,xt=this.svgFactory.createElement("svg:clipPath");xt.setAttributeNS(null,"id",At),xt.setAttributeNS(null,"transform",St(this.transformMatrix));const Ot=Pt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Ot.setAttributeNS(null,"clip-rule","evenodd"):Ot.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,xt.append(Ot),this.defs.append(xt),Pt.activeClipUrl){Pt.clipGroup=null;for(const Rt of this.extraStack)Rt.clipGroup=null;xt.setAttributeNS(null,"clip-path",Pt.activeClipUrl)}Pt.activeClipUrl=`url(#${At})`,this.tgrp=null}clip(Pt){this.pendingClip=Pt}closePath(){const Pt=this.current;if(Pt.path){const At=`${Pt.path.getAttributeNS(null,"d")}Z`;Pt.path.setAttributeNS(null,"d",At)}}setLeading(Pt){this.current.leading=-Pt}setTextRise(Pt){this.current.textRise=Pt}setTextRenderingMode(Pt){this.current.textRenderingMode=Pt}setHScale(Pt){this.current.textHScale=Pt/100}setRenderingIntent(Pt){}setFlatness(Pt){}setGState(Pt){for(const[At,xt]of Pt)switch(At){case"LW":this.setLineWidth(xt);break;case"LC":this.setLineCap(xt);break;case"LJ":this.setLineJoin(xt);break;case"ML":this.setMiterLimit(xt);break;case"D":this.setDash(xt[0],xt[1]);break;case"RI":this.setRenderingIntent(xt);break;case"FL":this.setFlatness(xt);break;case"Font":this.setFont(xt);break;case"CA":this.setStrokeAlpha(xt);break;case"ca":this.setFillAlpha(xt);break;default:(0,et.warn)(`Unimplemented graphic state operator ${At}`);break}}fill(){const Pt=this.current;Pt.element&&(Pt.element.setAttributeNS(null,"fill",Pt.fillColor),Pt.element.setAttributeNS(null,"fill-opacity",Pt.fillAlpha),this.endPath())}stroke(){const Pt=this.current;Pt.element&&(this._setStrokeAttributes(Pt.element),Pt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(Pt,At=1){const xt=this.current;let Ot=xt.dashArray;At!==1&&Ot.length>0&&(Ot=Ot.map(function(Rt){return At*Rt})),Pt.setAttributeNS(null,"stroke",xt.strokeColor),Pt.setAttributeNS(null,"stroke-opacity",xt.strokeAlpha),Pt.setAttributeNS(null,"stroke-miterlimit",yt(xt.miterLimit)),Pt.setAttributeNS(null,"stroke-linecap",xt.lineCap),Pt.setAttributeNS(null,"stroke-linejoin",xt.lineJoin),Pt.setAttributeNS(null,"stroke-width",yt(At*xt.lineWidth)+"px"),Pt.setAttributeNS(null,"stroke-dasharray",Ot.map(yt).join(" ")),Pt.setAttributeNS(null,"stroke-dashoffset",yt(At*xt.dashPhase)+"px")}eoFill(){var Pt;(Pt=this.current.element)==null||Pt.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){var Pt;(Pt=this.current.element)==null||Pt.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const Pt=this.svgFactory.createElement("svg:rect");Pt.setAttributeNS(null,"x","0"),Pt.setAttributeNS(null,"y","0"),Pt.setAttributeNS(null,"width","1px"),Pt.setAttributeNS(null,"height","1px"),Pt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(Pt)}paintImageXObject(Pt){const At=this.getObject(Pt);if(!At){(0,et.warn)(`Dependent image with object ID ${Pt} is not ready yet`);return}this.paintInlineImageXObject(At)}paintInlineImageXObject(Pt,At){const xt=Pt.width,Ot=Pt.height,Rt=mt(Pt,this.forceDataSchema,!!At),Dt=this.svgFactory.createElement("svg:rect");Dt.setAttributeNS(null,"x","0"),Dt.setAttributeNS(null,"y","0"),Dt.setAttributeNS(null,"width",yt(xt)),Dt.setAttributeNS(null,"height",yt(Ot)),this.current.element=Dt,this.clip("nonzero");const Nt=this.svgFactory.createElement("svg:image");Nt.setAttributeNS(dt,"xlink:href",Rt),Nt.setAttributeNS(null,"x","0"),Nt.setAttributeNS(null,"y",yt(-Ot)),Nt.setAttributeNS(null,"width",yt(xt)+"px"),Nt.setAttributeNS(null,"height",yt(Ot)+"px"),Nt.setAttributeNS(null,"transform",`scale(${yt(1/xt)} ${yt(-1/Ot)})`),At?At.append(Nt):this._ensureTransformGroup().append(Nt)}paintImageMaskXObject(Pt){const At=this.getObject(Pt.data,Pt);if(At.bitmap){(0,et.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const xt=this.current,Ot=At.width,Rt=At.height,Dt=xt.fillColor;xt.maskId=`mask${vt++}`;const Nt=this.svgFactory.createElement("svg:mask");Nt.setAttributeNS(null,"id",xt.maskId);const Kt=this.svgFactory.createElement("svg:rect");Kt.setAttributeNS(null,"x","0"),Kt.setAttributeNS(null,"y","0"),Kt.setAttributeNS(null,"width",yt(Ot)),Kt.setAttributeNS(null,"height",yt(Rt)),Kt.setAttributeNS(null,"fill",Dt),Kt.setAttributeNS(null,"mask",`url(#${xt.maskId})`),this.defs.append(Nt),this._ensureTransformGroup().append(Kt),this.paintInlineImageXObject(At,Nt)}paintFormXObjectBegin(Pt,At){if(Array.isArray(Pt)&&Pt.length===6&&this.transform(Pt[0],Pt[1],Pt[2],Pt[3],Pt[4],Pt[5]),At){const xt=At[2]-At[0],Ot=At[3]-At[1],Rt=this.svgFactory.createElement("svg:rect");Rt.setAttributeNS(null,"x",At[0]),Rt.setAttributeNS(null,"y",At[1]),Rt.setAttributeNS(null,"width",yt(xt)),Rt.setAttributeNS(null,"height",yt(Ot)),this.current.element=Rt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(Pt){const At=this.svgFactory.create(Pt.width,Pt.height),xt=this.svgFactory.createElement("svg:defs");At.append(xt),this.defs=xt;const Ot=this.svgFactory.createElement("svg:g");return Ot.setAttributeNS(null,"transform",St(Pt.transform)),At.append(Ot),this.svg=Ot,At}_ensureClipGroup(){if(!this.current.clipGroup){const Pt=this.svgFactory.createElement("svg:g");Pt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(Pt),this.current.clipGroup=Pt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",St(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}i.SVGGraphics=Tt},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaText=void 0;class s{static textContent(et){const tt=[],ot={items:tt,styles:Object.create(null)};function dt(ht){var mt;if(!ht)return;let ft=null;const pt=ht.name;if(pt==="#text")ft=ht.value;else if(s.shouldBuildText(pt))(mt=ht==null?void 0:ht.attributes)!=null&&mt.textContent?ft=ht.attributes.textContent:ht.value&&(ft=ht.value);else return;if(ft!==null&&tt.push({str:ft}),!!ht.children)for(const gt of ht.children)dt(gt)}return dt(et),ot}static shouldBuildText(et){return!(et==="textarea"||et==="input"||et==="option"||et==="select")}}i.XfaText=s},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayerRenderTask=void 0,i.renderTextLayer=St,i.updateTextLayer=Et;var a=s(1),et=s(6);const tt=1e5,ot=30,dt=.8,ht=new Map;function ft(vt,bt){let Tt;if(bt&&a.FeatureTest.isOffscreenCanvasSupported)Tt=new OffscreenCanvas(vt,vt).getContext("2d",{alpha:!1});else{const wt=document.createElement("canvas");wt.width=wt.height=vt,Tt=wt.getContext("2d",{alpha:!1})}return Tt}function pt(vt,bt){const Tt=ht.get(vt);if(Tt)return Tt;const wt=ft(ot,bt);wt.font=`${ot}px ${vt}`;const Pt=wt.measureText("");let At=Pt.fontBoundingBoxAscent,xt=Math.abs(Pt.fontBoundingBoxDescent);if(At){const Rt=At/(At+xt);return ht.set(vt,Rt),wt.canvas.width=wt.canvas.height=0,Rt}wt.strokeStyle="red",wt.clearRect(0,0,ot,ot),wt.strokeText("g",0,0);let Ot=wt.getImageData(0,0,ot,ot).data;xt=0;for(let Rt=Ot.length-1-3;Rt>=0;Rt-=4)if(Ot[Rt]>0){xt=Math.ceil(Rt/4/ot);break}wt.clearRect(0,0,ot,ot),wt.strokeText("A",0,ot),Ot=wt.getImageData(0,0,ot,ot).data,At=0;for(let Rt=0,Dt=Ot.length;Rt<Dt;Rt+=4)if(Ot[Rt]>0){At=ot-Math.floor(Rt/4/ot);break}if(wt.canvas.width=wt.canvas.height=0,At){const Rt=At/(At+xt);return ht.set(vt,Rt),Rt}return ht.set(vt,dt),dt}function mt(vt,bt,Tt){const wt=document.createElement("span"),Pt={angle:0,canvasWidth:0,hasText:bt.str!=="",hasEOL:bt.hasEOL,fontSize:0};vt._textDivs.push(wt);const At=a.Util.transform(vt._transform,bt.transform);let xt=Math.atan2(At[1],At[0]);const Ot=Tt[bt.fontName];Ot.vertical&&(xt+=Math.PI/2);const Rt=Math.hypot(At[2],At[3]),Dt=Rt*pt(Ot.fontFamily,vt._isOffscreenCanvasSupported);let Nt,Kt;xt===0?(Nt=At[4],Kt=At[5]-Dt):(Nt=At[4]+Dt*Math.sin(xt),Kt=At[5]-Dt*Math.cos(xt));const qt="calc(var(--scale-factor)*",jt=wt.style;vt._container===vt._rootContainer?(jt.left=`${(100*Nt/vt._pageWidth).toFixed(2)}%`,jt.top=`${(100*Kt/vt._pageHeight).toFixed(2)}%`):(jt.left=`${qt}${Nt.toFixed(2)}px)`,jt.top=`${qt}${Kt.toFixed(2)}px)`),jt.fontSize=`${qt}${Rt.toFixed(2)}px)`,jt.fontFamily=Ot.fontFamily,Pt.fontSize=Rt,wt.setAttribute("role","presentation"),wt.textContent=bt.str,wt.dir=bt.dir,vt._fontInspectorEnabled&&(wt.dataset.fontName=bt.fontName),xt!==0&&(Pt.angle=xt*(180/Math.PI));let Zt=!1;if(bt.str.length>1)Zt=!0;else if(bt.str!==" "&&bt.transform[0]!==bt.transform[3]){const Ht=Math.abs(bt.transform[0]),Wt=Math.abs(bt.transform[3]);Ht!==Wt&&Math.max(Ht,Wt)/Math.min(Ht,Wt)>1.5&&(Zt=!0)}Zt&&(Pt.canvasWidth=Ot.vertical?bt.height:bt.width),vt._textDivProperties.set(wt,Pt),vt._isReadableStream&&vt._layoutText(wt)}function gt(vt){const{div:bt,scale:Tt,properties:wt,ctx:Pt,prevFontSize:At,prevFontFamily:xt}=vt,{style:Ot}=bt;let Rt="";if(wt.canvasWidth!==0&&wt.hasText){const{fontFamily:Dt}=Ot,{canvasWidth:Nt,fontSize:Kt}=wt;(At!==Kt||xt!==Dt)&&(Pt.font=`${Kt*Tt}px ${Dt}`,vt.prevFontSize=Kt,vt.prevFontFamily=Dt);const{width:qt}=Pt.measureText(bt.textContent);qt>0&&(Rt=`scaleX(${Nt*Tt/qt})`)}wt.angle!==0&&(Rt=`rotate(${wt.angle}deg) ${Rt}`),Rt.length>0&&(Ot.transform=Rt)}function _t(vt){if(vt._canceled)return;const bt=vt._textDivs,Tt=vt._capability;if(bt.length>tt){Tt.resolve();return}if(!vt._isReadableStream)for(const Pt of bt)vt._layoutText(Pt);Tt.resolve()}class yt{constructor({textContentSource:bt,container:Tt,viewport:wt,textDivs:Pt,textDivProperties:At,textContentItemsStr:xt,isOffscreenCanvasSupported:Ot}){var qt;this._textContentSource=bt,this._isReadableStream=bt instanceof ReadableStream,this._container=this._rootContainer=Tt,this._textDivs=Pt||[],this._textContentItemsStr=xt||[],this._isOffscreenCanvasSupported=Ot,this._fontInspectorEnabled=!!((qt=globalThis.FontInspector)!=null&&qt.enabled),this._reader=null,this._textDivProperties=At||new WeakMap,this._canceled=!1,this._capability=new a.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:wt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:ft(0,Ot)};const{pageWidth:Rt,pageHeight:Dt,pageX:Nt,pageY:Kt}=wt.rawDims;this._transform=[1,0,0,-1,-Nt,Kt+Dt],this._pageWidth=Rt,this._pageHeight=Dt,(0,et.setLayerDimensions)(Tt,wt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new a.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new a.AbortException("TextLayer task cancelled."))}_processItems(bt,Tt){for(const wt of bt){if(wt.str===void 0){if(wt.type==="beginMarkedContentProps"||wt.type==="beginMarkedContent"){const Pt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),wt.id!==null&&this._container.setAttribute("id",`${wt.id}`),Pt.append(this._container)}else wt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(wt.str),mt(this,wt,Tt)}}_layoutText(bt){const Tt=this._layoutTextParams.properties=this._textDivProperties.get(bt);if(this._layoutTextParams.div=bt,gt(this._layoutTextParams),Tt.hasText&&this._container.append(bt),Tt.hasEOL){const wt=document.createElement("br");wt.setAttribute("role","presentation"),this._container.append(wt)}}_render(){const bt=new a.PromiseCapability;let Tt=Object.create(null);if(this._isReadableStream){const wt=()=>{this._reader.read().then(({value:Pt,done:At})=>{if(At){bt.resolve();return}Object.assign(Tt,Pt.styles),this._processItems(Pt.items,Tt),wt()},bt.reject)};this._reader=this._textContentSource.getReader(),wt()}else if(this._textContentSource){const{items:wt,styles:Pt}=this._textContentSource;this._processItems(wt,Pt),bt.resolve()}else throw new Error('No "textContentSource" parameter specified.');bt.promise.then(()=>{Tt=null,_t(this)},this._capability.reject)}}i.TextLayerRenderTask=yt;function St(vt){!vt.textContentSource&&(vt.textContent||vt.textContentStream)&&((0,et.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),vt.textContentSource=vt.textContent||vt.textContentStream);const{container:bt,viewport:Tt}=vt,wt=getComputedStyle(bt),Pt=wt.getPropertyValue("visibility"),At=parseFloat(wt.getPropertyValue("--scale-factor"));Pt==="visible"&&(!At||Math.abs(At-Tt.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const xt=new yt(vt);return xt._render(),xt}function Et({container:vt,viewport:bt,textDivs:Tt,textDivProperties:wt,isOffscreenCanvasSupported:Pt,mustRotate:At=!0,mustRescale:xt=!0}){if(At&&(0,et.setLayerDimensions)(vt,{rotation:bt.rotation}),xt){const Ot=ft(0,Pt),Dt={prevFontSize:null,prevFontFamily:null,div:null,scale:bt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Ot};for(const Nt of Tt)Dt.properties=wt.get(Nt),Dt.div=Nt,gt(Dt)}}},(o,i,s)=>{var pt,mt,gt,_t,yt,St,Et,vt,bt,Tt,wt,Ms,At,qo,Ot,Ns,Dt,Ds;Object.defineProperty(i,"__esModule",{value:!0}),i.AnnotationEditorLayer=void 0;var a=s(1),et=s(4),tt=s(28),ot=s(33),dt=s(6),ht=s(34);const Kt=class Kt{constructor({uiManager:jt,pageIndex:Zt,div:Ht,accessibilityManager:Wt,annotationLayer:Ft,viewport:Gt,l10n:Jt}){tn(this,wt);tn(this,At);tn(this,Ot);tn(this,Dt);tn(this,pt,void 0);tn(this,mt,!1);tn(this,gt,null);tn(this,_t,this.pointerup.bind(this));tn(this,yt,this.pointerdown.bind(this));tn(this,St,new Map);tn(this,Et,!1);tn(this,vt,!1);tn(this,bt,!1);tn(this,Tt,void 0);const on=[tt.FreeTextEditor,ot.InkEditor,ht.StampEditor];if(!Kt._initialized){Kt._initialized=!0;for(const bn of on)bn.initialize(Jt)}jt.registerEditorTypes(on),pn(this,Tt,jt),this.pageIndex=Zt,this.div=Ht,pn(this,pt,Wt),pn(this,gt,Ft),this.viewport=Gt,Ct(this,Tt).addLayer(this)}get isEmpty(){return Ct(this,St).size===0}updateToolbar(jt){Ct(this,Tt).updateToolbar(jt)}updateMode(jt=Ct(this,Tt).getMode()){dn(this,Dt,Ds).call(this),jt===a.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),jt!==a.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",jt===a.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",jt===a.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",jt===a.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(jt){if(!jt&&Ct(this,Tt).getMode()!==a.AnnotationEditorType.INK)return;if(!jt){for(const Ht of Ct(this,St).values())if(Ht.isEmpty()){Ht.setInBackground();return}}dn(this,At,qo).call(this,{offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(jt){Ct(this,Tt).setEditingState(jt)}addCommands(jt){Ct(this,Tt).addCommands(jt)}enable(){this.div.style.pointerEvents="auto";const jt=new Set;for(const Ht of Ct(this,St).values())Ht.enableEditing(),Ht.annotationElementId&&jt.add(Ht.annotationElementId);if(!Ct(this,gt))return;const Zt=Ct(this,gt).getEditableAnnotations();for(const Ht of Zt){if(Ht.hide(),Ct(this,Tt).isDeletedAnnotationElement(Ht.data.id)||jt.has(Ht.data.id))continue;const Wt=this.deserialize(Ht);Wt&&(this.addOrRebuild(Wt),Wt.enableEditing())}}disable(){var Zt;pn(this,bt,!0),this.div.style.pointerEvents="none";const jt=new Set;for(const Ht of Ct(this,St).values()){if(Ht.disableEditing(),!Ht.annotationElementId||Ht.serialize()!==null){jt.add(Ht.annotationElementId);continue}(Zt=this.getEditableAnnotation(Ht.annotationElementId))==null||Zt.show(),Ht.remove()}if(Ct(this,gt)){const Ht=Ct(this,gt).getEditableAnnotations();for(const Wt of Ht){const{id:Ft}=Wt.data;jt.has(Ft)||Ct(this,Tt).isDeletedAnnotationElement(Ft)||Wt.show()}}dn(this,Dt,Ds).call(this),this.isEmpty&&(this.div.hidden=!0),pn(this,bt,!1)}getEditableAnnotation(jt){var Zt;return((Zt=Ct(this,gt))==null?void 0:Zt.getEditableAnnotation(jt))||null}setActiveEditor(jt){Ct(this,Tt).getActive()!==jt&&Ct(this,Tt).setActiveEditor(jt)}enableClick(){this.div.addEventListener("pointerdown",Ct(this,yt)),this.div.addEventListener("pointerup",Ct(this,_t))}disableClick(){this.div.removeEventListener("pointerdown",Ct(this,yt)),this.div.removeEventListener("pointerup",Ct(this,_t))}attach(jt){Ct(this,St).set(jt.id,jt);const{annotationElementId:Zt}=jt;Zt&&Ct(this,Tt).isDeletedAnnotationElement(Zt)&&Ct(this,Tt).removeDeletedAnnotationElement(jt)}detach(jt){var Zt;Ct(this,St).delete(jt.id),(Zt=Ct(this,pt))==null||Zt.removePointerInTextLayer(jt.contentDiv),!Ct(this,bt)&&jt.annotationElementId&&Ct(this,Tt).addDeletedAnnotationElement(jt)}remove(jt){this.detach(jt),Ct(this,Tt).removeEditor(jt),jt.div.contains(document.activeElement)&&setTimeout(()=>{Ct(this,Tt).focusMainContainer()},0),jt.div.remove(),jt.isAttachedToDOM=!1,Ct(this,vt)||this.addInkEditorIfNeeded(!1)}changeParent(jt){var Zt;jt.parent!==this&&(jt.annotationElementId&&(Ct(this,Tt).addDeletedAnnotationElement(jt.annotationElementId),et.AnnotationEditor.deleteAnnotationElement(jt),jt.annotationElementId=null),this.attach(jt),(Zt=jt.parent)==null||Zt.detach(jt),jt.setParent(this),jt.div&&jt.isAttachedToDOM&&(jt.div.remove(),this.div.append(jt.div)))}add(jt){if(this.changeParent(jt),Ct(this,Tt).addEditor(jt),this.attach(jt),!jt.isAttachedToDOM){const Zt=jt.render();this.div.append(Zt),jt.isAttachedToDOM=!0}jt.fixAndSetPosition(),jt.onceAdded(),Ct(this,Tt).addToAnnotationStorage(jt)}moveEditorInDOM(jt){var Ht;if(!jt.isAttachedToDOM)return;const{activeElement:Zt}=document;jt.div.contains(Zt)&&(jt._focusEventsAllowed=!1,setTimeout(()=>{jt.div.contains(document.activeElement)?jt._focusEventsAllowed=!0:(jt.div.addEventListener("focusin",()=>{jt._focusEventsAllowed=!0},{once:!0}),Zt.focus())},0)),jt._structTreeParentId=(Ht=Ct(this,pt))==null?void 0:Ht.moveElementInDOM(this.div,jt.div,jt.contentDiv,!0)}addOrRebuild(jt){jt.needsToBeRebuilt()?jt.rebuild():this.add(jt)}addUndoableEditor(jt){const Zt=()=>jt._uiManager.rebuild(jt),Ht=()=>{jt.remove()};this.addCommands({cmd:Zt,undo:Ht,mustExec:!1})}getNextId(){return Ct(this,Tt).getId()}pasteEditor(jt,Zt){Ct(this,Tt).updateToolbar(jt),Ct(this,Tt).updateMode(jt);const{offsetX:Ht,offsetY:Wt}=dn(this,Ot,Ns).call(this),Ft=this.getNextId(),Gt=dn(this,wt,Ms).call(this,{parent:this,id:Ft,x:Ht,y:Wt,uiManager:Ct(this,Tt),isCentered:!0,...Zt});Gt&&this.add(Gt)}deserialize(jt){switch(jt.annotationType??jt.annotationEditorType){case a.AnnotationEditorType.FREETEXT:return tt.FreeTextEditor.deserialize(jt,this,Ct(this,Tt));case a.AnnotationEditorType.INK:return ot.InkEditor.deserialize(jt,this,Ct(this,Tt));case a.AnnotationEditorType.STAMP:return ht.StampEditor.deserialize(jt,this,Ct(this,Tt))}return null}addNewEditor(){dn(this,At,qo).call(this,dn(this,Ot,Ns).call(this),!0)}setSelected(jt){Ct(this,Tt).setSelected(jt)}toggleSelected(jt){Ct(this,Tt).toggleSelected(jt)}isSelected(jt){return Ct(this,Tt).isSelected(jt)}unselect(jt){Ct(this,Tt).unselect(jt)}pointerup(jt){const{isMac:Zt}=a.FeatureTest.platform;if(!(jt.button!==0||jt.ctrlKey&&Zt)&&jt.target===this.div&&Ct(this,Et)){if(pn(this,Et,!1),!Ct(this,mt)){pn(this,mt,!0);return}if(Ct(this,Tt).getMode()===a.AnnotationEditorType.STAMP){Ct(this,Tt).unselectAll();return}dn(this,At,qo).call(this,jt,!1)}}pointerdown(jt){if(Ct(this,Et)){pn(this,Et,!1);return}const{isMac:Zt}=a.FeatureTest.platform;if(jt.button!==0||jt.ctrlKey&&Zt||jt.target!==this.div)return;pn(this,Et,!0);const Ht=Ct(this,Tt).getActive();pn(this,mt,!Ht||Ht.isEmpty())}findNewParent(jt,Zt,Ht){const Wt=Ct(this,Tt).findParent(Zt,Ht);return Wt===null||Wt===this?!1:(Wt.changeParent(jt),!0)}destroy(){var jt,Zt;((jt=Ct(this,Tt).getActive())==null?void 0:jt.parent)===this&&(Ct(this,Tt).commitOrRemove(),Ct(this,Tt).setActiveEditor(null));for(const Ht of Ct(this,St).values())(Zt=Ct(this,pt))==null||Zt.removePointerInTextLayer(Ht.contentDiv),Ht.setParent(null),Ht.isAttachedToDOM=!1,Ht.div.remove();this.div=null,Ct(this,St).clear(),Ct(this,Tt).removeLayer(this)}render({viewport:jt}){this.viewport=jt,(0,dt.setLayerDimensions)(this.div,jt);for(const Zt of Ct(this,Tt).getEditors(this.pageIndex))this.add(Zt);this.updateMode()}update({viewport:jt}){Ct(this,Tt).commitOrRemove(),this.viewport=jt,(0,dt.setLayerDimensions)(this.div,{rotation:jt.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:jt,pageHeight:Zt}=this.viewport.rawDims;return[jt,Zt]}};pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,St=new WeakMap,Et=new WeakMap,vt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,wt=new WeakSet,Ms=function(jt){switch(Ct(this,Tt).getMode()){case a.AnnotationEditorType.FREETEXT:return new tt.FreeTextEditor(jt);case a.AnnotationEditorType.INK:return new ot.InkEditor(jt);case a.AnnotationEditorType.STAMP:return new ht.StampEditor(jt)}return null},At=new WeakSet,qo=function(jt,Zt){const Ht=this.getNextId(),Wt=dn(this,wt,Ms).call(this,{parent:this,id:Ht,x:jt.offsetX,y:jt.offsetY,uiManager:Ct(this,Tt),isCentered:Zt});return Wt&&this.add(Wt),Wt},Ot=new WeakSet,Ns=function(){const{x:jt,y:Zt,width:Ht,height:Wt}=this.div.getBoundingClientRect(),Ft=Math.max(0,jt),Gt=Math.max(0,Zt),Jt=Math.min(window.innerWidth,jt+Ht),on=Math.min(window.innerHeight,Zt+Wt),bn=(Ft+Jt)/2-jt,Ut=(Gt+on)/2-Zt,[It,Mt]=this.viewport.rotation%180===0?[bn,Ut]:[Ut,bn];return{offsetX:It,offsetY:Mt}},Dt=new WeakSet,Ds=function(){pn(this,vt,!0);for(const jt of Ct(this,St).values())jt.isEmpty()&&jt.remove();pn(this,vt,!1)},ur(Kt,"_initialized",!1);let ft=Kt;i.AnnotationEditorLayer=ft},(o,i,s)=>{var ht,ft,pt,mt,gt,_t,yt,St,Et,vt,Fl,Tt,Vl,Pt,Ul,xt,Co,Rt,Ls,Nt,Bl,qt,Fs;Object.defineProperty(i,"__esModule",{value:!0}),i.FreeTextEditor=void 0;var a=s(1),et=s(5),tt=s(4),ot=s(29);const Zt=class Zt extends tt.AnnotationEditor{constructor(Ft){super({...Ft,name:"freeTextEditor"});tn(this,vt);tn(this,Tt);tn(this,Pt);tn(this,xt);tn(this,Rt);tn(this,Nt);tn(this,qt);tn(this,ht,this.editorDivBlur.bind(this));tn(this,ft,this.editorDivFocus.bind(this));tn(this,pt,this.editorDivInput.bind(this));tn(this,mt,this.editorDivKeydown.bind(this));tn(this,gt,void 0);tn(this,_t,"");tn(this,yt,`${this.id}-editor`);tn(this,St,void 0);tn(this,Et,null);pn(this,gt,Ft.color||Zt._defaultColor||tt.AnnotationEditor._defaultLineColor),pn(this,St,Ft.fontSize||Zt._defaultFontSize)}static get _keyboardManager(){const Ft=Zt.prototype,Gt=bn=>bn.isEmpty(),Jt=et.AnnotationEditorUIManager.TRANSLATE_SMALL,on=et.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,a.shadow)(this,"_keyboardManager",new et.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],Ft.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],Ft.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],Ft._translateEmpty,{args:[-Jt,0],checker:Gt}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],Ft._translateEmpty,{args:[-on,0],checker:Gt}],[["ArrowRight","mac+ArrowRight"],Ft._translateEmpty,{args:[Jt,0],checker:Gt}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],Ft._translateEmpty,{args:[on,0],checker:Gt}],[["ArrowUp","mac+ArrowUp"],Ft._translateEmpty,{args:[0,-Jt],checker:Gt}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],Ft._translateEmpty,{args:[0,-on],checker:Gt}],[["ArrowDown","mac+ArrowDown"],Ft._translateEmpty,{args:[0,Jt],checker:Gt}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],Ft._translateEmpty,{args:[0,on],checker:Gt}]]))}static initialize(Ft){tt.AnnotationEditor.initialize(Ft,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const Gt=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(Gt.getPropertyValue("--freetext-padding"))}static updateDefaultParams(Ft,Gt){switch(Ft){case a.AnnotationEditorParamsType.FREETEXT_SIZE:Zt._defaultFontSize=Gt;break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:Zt._defaultColor=Gt;break}}updateParams(Ft,Gt){switch(Ft){case a.AnnotationEditorParamsType.FREETEXT_SIZE:dn(this,vt,Fl).call(this,Gt);break;case a.AnnotationEditorParamsType.FREETEXT_COLOR:dn(this,Tt,Vl).call(this,Gt);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,Zt._defaultFontSize],[a.AnnotationEditorParamsType.FREETEXT_COLOR,Zt._defaultColor||tt.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.FREETEXT_SIZE,Ct(this,St)],[a.AnnotationEditorParamsType.FREETEXT_COLOR,Ct(this,gt)]]}_translateEmpty(Ft,Gt){this._uiManager.translateSelectedEditors(Ft,Gt,!0)}getInitialTranslation(){const Ft=this.parentScale;return[-Zt._internalPadding*Ft,-(Zt._internalPadding+Ct(this,St))*Ft]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(a.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",Ct(this,mt)),this.editorDiv.addEventListener("focus",Ct(this,ft)),this.editorDiv.addEventListener("blur",Ct(this,ht)),this.editorDiv.addEventListener("input",Ct(this,pt)))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",Ct(this,yt)),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",Ct(this,mt)),this.editorDiv.removeEventListener("focus",Ct(this,ft)),this.editorDiv.removeEventListener("blur",Ct(this,ht)),this.editorDiv.removeEventListener("input",Ct(this,pt)),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(Ft){this._focusEventsAllowed&&(super.focusin(Ft),Ft.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){var Ft;if(this.width){dn(this,qt,Fs).call(this);return}this.enableEditMode(),this.editorDiv.focus(),(Ft=this._initialOptions)!=null&&Ft.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const Ft=Ct(this,_t),Gt=pn(this,_t,dn(this,Pt,Ul).call(this).trimEnd());if(Ft===Gt)return;const Jt=on=>{if(pn(this,_t,on),!on){this.remove();return}dn(this,Rt,Ls).call(this),this._uiManager.rebuild(this),dn(this,xt,Co).call(this)};this.addCommands({cmd:()=>{Jt(Gt)},undo:()=>{Jt(Ft)},mustExec:!1}),dn(this,xt,Co).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(Ft){this.enterInEditMode()}keydown(Ft){Ft.target===this.div&&Ft.key==="Enter"&&(this.enterInEditMode(),Ft.preventDefault())}editorDivKeydown(Ft){Zt._keyboardManager.exec(this,Ft)}editorDivFocus(Ft){this.isEditing=!0}editorDivBlur(Ft){this.isEditing=!1}editorDivInput(Ft){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let Ft,Gt;this.width&&(Ft=this.x,Gt=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",Ct(this,yt)),this.enableEditing(),tt.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(on=>{var bn;return(bn=this.editorDiv)==null?void 0:bn.setAttribute("aria-label",on)}),tt.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(on=>{var bn;return(bn=this.editorDiv)==null?void 0:bn.setAttribute("default-content",on)}),this.editorDiv.contentEditable=!0;const{style:Jt}=this.editorDiv;if(Jt.fontSize=`calc(${Ct(this,St)}px * var(--scale-factor))`,Jt.color=Ct(this,gt),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,et.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[on,bn]=this.parentDimensions;if(this.annotationElementId){const{position:Ut}=Ct(this,Et);let[It,Mt]=this.getInitialTranslation();[It,Mt]=this.pageTranslationToScreen(It,Mt);const[$t,Lt]=this.pageDimensions,[Vt,zt]=this.pageTranslation;let Xt,Yt;switch(this.rotation){case 0:Xt=Ft+(Ut[0]-Vt)/$t,Yt=Gt+this.height-(Ut[1]-zt)/Lt;break;case 90:Xt=Ft+(Ut[0]-Vt)/$t,Yt=Gt-(Ut[1]-zt)/Lt,[It,Mt]=[Mt,-It];break;case 180:Xt=Ft-this.width+(Ut[0]-Vt)/$t,Yt=Gt-(Ut[1]-zt)/Lt,[It,Mt]=[-It,-Mt];break;case 270:Xt=Ft+(Ut[0]-Vt-this.height*Lt)/$t,Yt=Gt+(Ut[1]-zt-this.width*$t)/Lt,[It,Mt]=[-Mt,It];break}this.setAt(Xt*on,Yt*bn,It,Mt)}else this.setAt(Ft*on,Gt*bn,this.width*on,this.height*bn);dn(this,Rt,Ls).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}get contentDiv(){return this.editorDiv}static deserialize(Ft,Gt,Jt){let on=null;if(Ft instanceof ot.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:Ut,fontColor:It},rect:Mt,rotation:$t,id:Lt},textContent:Vt,textPosition:zt,parent:{page:{pageNumber:Xt}}}=Ft;if(!Vt||Vt.length===0)return null;on=Ft={annotationType:a.AnnotationEditorType.FREETEXT,color:Array.from(It),fontSize:Ut,value:Vt.join(`
`),position:zt,pageIndex:Xt-1,rect:Mt,rotation:$t,id:Lt,deleted:!1}}const bn=super.deserialize(Ft,Gt,Jt);return pn(bn,St,Ft.fontSize),pn(bn,gt,a.Util.makeHexColor(...Ft.color)),pn(bn,_t,Ft.value),bn.annotationElementId=Ft.id||null,pn(bn,Et,on),bn}serialize(Ft=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const Gt=Zt._internalPadding*this.parentScale,Jt=this.getRect(Gt,Gt),on=tt.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:Ct(this,gt)),bn={annotationType:a.AnnotationEditorType.FREETEXT,color:on,fontSize:Ct(this,St),value:Ct(this,_t),pageIndex:this.pageIndex,rect:Jt,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return Ft?bn:this.annotationElementId&&!dn(this,Nt,Bl).call(this,bn)?null:(bn.id=this.annotationElementId,bn)}};ht=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,St=new WeakMap,Et=new WeakMap,vt=new WeakSet,Fl=function(Ft){const Gt=on=>{this.editorDiv.style.fontSize=`calc(${on}px * var(--scale-factor))`,this.translate(0,-(on-Ct(this,St))*this.parentScale),pn(this,St,on),dn(this,xt,Co).call(this)},Jt=Ct(this,St);this.addCommands({cmd:()=>{Gt(Ft)},undo:()=>{Gt(Jt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},Tt=new WeakSet,Vl=function(Ft){const Gt=Ct(this,gt);this.addCommands({cmd:()=>{pn(this,gt,this.editorDiv.style.color=Ft)},undo:()=>{pn(this,gt,this.editorDiv.style.color=Gt)},mustExec:!0,type:a.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Pt=new WeakSet,Ul=function(){const Ft=this.editorDiv.getElementsByTagName("div");if(Ft.length===0)return this.editorDiv.innerText;const Gt=[];for(const Jt of Ft)Gt.push(Jt.innerText.replace(/\r\n?|\n/,""));return Gt.join(`
`)},xt=new WeakSet,Co=function(){const[Ft,Gt]=this.parentDimensions;let Jt;if(this.isAttachedToDOM)Jt=this.div.getBoundingClientRect();else{const{currentLayer:on,div:bn}=this,Ut=bn.style.display;bn.style.display="hidden",on.div.append(this.div),Jt=bn.getBoundingClientRect(),bn.remove(),bn.style.display=Ut}this.rotation%180===this.parentRotation%180?(this.width=Jt.width/Ft,this.height=Jt.height/Gt):(this.width=Jt.height/Ft,this.height=Jt.width/Gt),this.fixAndSetPosition()},Rt=new WeakSet,Ls=function(){if(this.editorDiv.replaceChildren(),!!Ct(this,_t))for(const Ft of Ct(this,_t).split(`
`)){const Gt=document.createElement("div");Gt.append(Ft?document.createTextNode(Ft):document.createElement("br")),this.editorDiv.append(Gt)}},Nt=new WeakSet,Bl=function(Ft){const{value:Gt,fontSize:Jt,color:on,rect:bn,pageIndex:Ut}=Ct(this,Et);return Ft.value!==Gt||Ft.fontSize!==Jt||Ft.rect.some((It,Mt)=>Math.abs(It-bn[Mt])>=1)||Ft.color.some((It,Mt)=>It!==on[Mt])||Ft.pageIndex!==Ut},qt=new WeakSet,Fs=function(Ft=!1){if(!this.annotationElementId)return;if(dn(this,xt,Co).call(this),!Ft&&(this.width===0||this.height===0)){setTimeout(()=>dn(this,qt,Fs).call(this,!0),0);return}const Gt=Zt._internalPadding*this.parentScale;Ct(this,Et).rect=this.getRect(Gt,Gt)},ur(Zt,"_freeTextDefaultContent",""),ur(Zt,"_internalPadding",0),ur(Zt,"_defaultColor",null),ur(Zt,"_defaultFontSize",10),ur(Zt,"_type","freetext");let dt=Zt;i.FreeTextEditor=dt},(o,i,s)=>{var Mt,Lt,qr,zt,Wl,Yt,un,gn,yn,Tn,Rn,Sn,Fn,Dn,xn,On,wn,fn,_n,Cn,Ln,Vn,Jn,zl,Yn,Xo,jn,Vs,qn,js,cn,ln,Mn,$n,rr,cr,mn,Us,an,rn,An,In,Hl,Pn,Bs;Object.defineProperty(i,"__esModule",{value:!0}),i.StampAnnotationElement=i.InkAnnotationElement=i.FreeTextAnnotationElement=i.AnnotationLayer=void 0;var a=s(1),et=s(6),tt=s(3),ot=s(30),dt=s(31),ht=s(32);const ft=1e3,pt=9,mt=new WeakSet;function gt(kn){return{width:kn[2]-kn[0],height:kn[3]-kn[1]}}class _t{static create(Qt){switch(Qt.data.annotationType){case a.AnnotationType.LINK:return new St(Qt);case a.AnnotationType.TEXT:return new Et(Qt);case a.AnnotationType.WIDGET:switch(Qt.data.fieldType){case"Tx":return new bt(Qt);case"Btn":return Qt.data.radioButton?new Pt(Qt):Qt.data.checkBox?new wt(Qt):new At(Qt);case"Ch":return new xt(Qt);case"Sig":return new Tt(Qt)}return new vt(Qt);case a.AnnotationType.POPUP:return new Ot(Qt);case a.AnnotationType.FREETEXT:return new Dt(Qt);case a.AnnotationType.LINE:return new Nt(Qt);case a.AnnotationType.SQUARE:return new Kt(Qt);case a.AnnotationType.CIRCLE:return new qt(Qt);case a.AnnotationType.POLYLINE:return new jt(Qt);case a.AnnotationType.CARET:return new Ht(Qt);case a.AnnotationType.INK:return new Wt(Qt);case a.AnnotationType.POLYGON:return new Zt(Qt);case a.AnnotationType.HIGHLIGHT:return new Ft(Qt);case a.AnnotationType.UNDERLINE:return new Gt(Qt);case a.AnnotationType.SQUIGGLY:return new Jt(Qt);case a.AnnotationType.STRIKEOUT:return new on(Qt);case a.AnnotationType.STAMP:return new bn(Qt);case a.AnnotationType.FILEATTACHMENT:return new Ut(Qt);default:return new yt(Qt)}}}const $t=class $t{constructor(Qt,{isRenderable:kt=!1,ignoreBorder:Bt=!1,createQuadrilaterals:en=!1}={}){tn(this,Mt,!1);this.isRenderable=kt,this.data=Qt.data,this.layer=Qt.layer,this.linkService=Qt.linkService,this.downloadManager=Qt.downloadManager,this.imageResourcesPath=Qt.imageResourcesPath,this.renderForms=Qt.renderForms,this.svgFactory=Qt.svgFactory,this.annotationStorage=Qt.annotationStorage,this.enableScripting=Qt.enableScripting,this.hasJSActions=Qt.hasJSActions,this._fieldObjects=Qt.fieldObjects,this.parent=Qt.parent,kt&&(this.container=this._createContainer(Bt)),en&&this._createQuadrilaterals()}static _hasPopupData({titleObj:Qt,contentsObj:kt,richText:Bt}){return!!(Qt!=null&&Qt.str||kt!=null&&kt.str||Bt!=null&&Bt.str)}get hasPopupData(){return $t._hasPopupData(this.data)}_createContainer(Qt){const{data:kt,parent:{page:Bt,viewport:en}}=this,sn=document.createElement("section");sn.setAttribute("data-annotation-id",kt.id),this instanceof vt||(sn.tabIndex=ft),sn.style.zIndex=this.parent.zIndex++,this.data.popupRef&&sn.setAttribute("aria-haspopup","dialog"),kt.noRotate&&sn.classList.add("norotate");const{pageWidth:hn,pageHeight:En,pageX:Nn,pageY:Bn}=en.rawDims;if(!kt.rect||this instanceof Ot){const{rotation:Zn}=kt;return!kt.hasOwnCanvas&&Zn!==0&&this.setRotation(Zn,sn),sn}const{width:Un,height:er}=gt(kt.rect),Gn=a.Util.normalizeRect([kt.rect[0],Bt.view[3]-kt.rect[1]+Bt.view[1],kt.rect[2],Bt.view[3]-kt.rect[3]+Bt.view[1]]);if(!Qt&&kt.borderStyle.width>0){sn.style.borderWidth=`${kt.borderStyle.width}px`;const Zn=kt.borderStyle.horizontalCornerRadius,ir=kt.borderStyle.verticalCornerRadius;if(Zn>0||ir>0){const ar=`calc(${Zn}px * var(--scale-factor)) / calc(${ir}px * var(--scale-factor))`;sn.style.borderRadius=ar}else if(this instanceof Pt){const ar=`calc(${Un}px * var(--scale-factor)) / calc(${er}px * var(--scale-factor))`;sn.style.borderRadius=ar}switch(kt.borderStyle.style){case a.AnnotationBorderStyleType.SOLID:sn.style.borderStyle="solid";break;case a.AnnotationBorderStyleType.DASHED:sn.style.borderStyle="dashed";break;case a.AnnotationBorderStyleType.BEVELED:(0,a.warn)("Unimplemented border style: beveled");break;case a.AnnotationBorderStyleType.INSET:(0,a.warn)("Unimplemented border style: inset");break;case a.AnnotationBorderStyleType.UNDERLINE:sn.style.borderBottomStyle="solid";break}const tr=kt.borderColor||null;tr?(pn(this,Mt,!0),sn.style.borderColor=a.Util.makeHexColor(tr[0]|0,tr[1]|0,tr[2]|0)):sn.style.borderWidth=0}sn.style.left=`${100*(Gn[0]-Nn)/hn}%`,sn.style.top=`${100*(Gn[1]-Bn)/En}%`;const{rotation:Kn}=kt;return kt.hasOwnCanvas||Kn===0?(sn.style.width=`${100*Un/hn}%`,sn.style.height=`${100*er/En}%`):this.setRotation(Kn,sn),sn}setRotation(Qt,kt=this.container){if(!this.data.rect)return;const{pageWidth:Bt,pageHeight:en}=this.parent.viewport.rawDims,{width:sn,height:hn}=gt(this.data.rect);let En,Nn;Qt%180===0?(En=100*sn/Bt,Nn=100*hn/en):(En=100*hn/Bt,Nn=100*sn/en),kt.style.width=`${En}%`,kt.style.height=`${Nn}%`,kt.setAttribute("data-main-rotation",(360-Qt)%360)}get _commonActions(){const Qt=(kt,Bt,en)=>{const sn=en.detail[kt],hn=sn[0],En=sn.slice(1);en.target.style[Bt]=ot.ColorConverters[`${hn}_HTML`](En),this.annotationStorage.setValue(this.data.id,{[Bt]:ot.ColorConverters[`${hn}_rgb`](En)})};return(0,a.shadow)(this,"_commonActions",{display:kt=>{const{display:Bt}=kt.detail,en=Bt%2===1;this.container.style.visibility=en?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:en,noPrint:Bt===1||Bt===2})},print:kt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!kt.detail.print})},hidden:kt=>{const{hidden:Bt}=kt.detail;this.container.style.visibility=Bt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:Bt,noView:Bt})},focus:kt=>{setTimeout(()=>kt.target.focus({preventScroll:!1}),0)},userName:kt=>{kt.target.title=kt.detail.userName},readonly:kt=>{kt.target.disabled=kt.detail.readonly},required:kt=>{this._setRequired(kt.target,kt.detail.required)},bgColor:kt=>{Qt("bgColor","backgroundColor",kt)},fillColor:kt=>{Qt("fillColor","backgroundColor",kt)},fgColor:kt=>{Qt("fgColor","color",kt)},textColor:kt=>{Qt("textColor","color",kt)},borderColor:kt=>{Qt("borderColor","borderColor",kt)},strokeColor:kt=>{Qt("strokeColor","borderColor",kt)},rotation:kt=>{const Bt=kt.detail.rotation;this.setRotation(Bt),this.annotationStorage.setValue(this.data.id,{rotation:Bt})}})}_dispatchEventFromSandbox(Qt,kt){const Bt=this._commonActions;for(const en of Object.keys(kt.detail)){const sn=Qt[en]||Bt[en];sn==null||sn(kt)}}_setDefaultPropertiesFromJS(Qt){if(!this.enableScripting)return;const kt=this.annotationStorage.getRawValue(this.data.id);if(!kt)return;const Bt=this._commonActions;for(const[en,sn]of Object.entries(kt)){const hn=Bt[en];if(hn){const En={detail:{[en]:sn},target:Qt};hn(En),delete kt[en]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:Qt}=this.data;if(!Qt)return;const[kt,Bt,en,sn]=this.data.rect;if(Qt.length===1){const[,{x:ir,y:tr},{x:ar,y:sr}]=Qt[0];if(en===ir&&sn===tr&&kt===ar&&Bt===sr)return}const{style:hn}=this.container;let En;if(Ct(this,Mt)){const{borderColor:ir,borderWidth:tr}=hn;hn.borderWidth=0,En=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${ir}" stroke-width="${tr}">`],this.container.classList.add("hasBorder")}const Nn=en-kt,Bn=sn-Bt,{svgFactory:Un}=this,er=Un.createElement("svg");er.classList.add("quadrilateralsContainer"),er.setAttribute("width",0),er.setAttribute("height",0);const Gn=Un.createElement("defs");er.append(Gn);const Kn=Un.createElement("clipPath"),Zn=`clippath_${this.data.id}`;Kn.setAttribute("id",Zn),Kn.setAttribute("clipPathUnits","objectBoundingBox"),Gn.append(Kn);for(const[,{x:ir,y:tr},{x:ar,y:sr}]of Qt){const or=Un.createElement("rect"),dr=(ar-kt)/Nn,pr=(sn-tr)/Bn,vr=(ir-ar)/Nn,Zr=(tr-sr)/Bn;or.setAttribute("x",dr),or.setAttribute("y",pr),or.setAttribute("width",vr),or.setAttribute("height",Zr),Kn.append(or),En==null||En.push(`<rect vector-effect="non-scaling-stroke" x="${dr}" y="${pr}" width="${vr}" height="${Zr}"/>`)}Ct(this,Mt)&&(En.push("</g></svg>')"),hn.backgroundImage=En.join("")),this.container.append(er),this.container.style.clipPath=`url(#${Zn})`}_createPopup(){const{container:Qt,data:kt}=this;Qt.setAttribute("aria-haspopup","dialog");const Bt=new Ot({data:{color:kt.color,titleObj:kt.titleObj,modificationDate:kt.modificationDate,contentsObj:kt.contentsObj,richText:kt.richText,parentRect:kt.rect,borderStyle:0,id:`popup_${kt.id}`,rotation:kt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(Bt.render())}render(){(0,a.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(Qt,kt=null){const Bt=[];if(this._fieldObjects){const en=this._fieldObjects[Qt];if(en)for(const{page:sn,id:hn,exportValues:En}of en){if(sn===-1||hn===kt)continue;const Nn=typeof En=="string"?En:null,Bn=document.querySelector(`[data-element-id="${hn}"]`);if(Bn&&!mt.has(Bn)){(0,a.warn)(`_getElementsByName - element not allowed: ${hn}`);continue}Bt.push({id:hn,exportValue:Nn,domElement:Bn})}return Bt}for(const en of document.getElementsByName(Qt)){const{exportValue:sn}=en,hn=en.getAttribute("data-element-id");hn!==kt&&mt.has(en)&&Bt.push({id:hn,exportValue:sn,domElement:en})}return Bt}show(){var Qt;this.container&&(this.container.hidden=!1),(Qt=this.popup)==null||Qt.maybeShow()}hide(){var Qt;this.container&&(this.container.hidden=!0),(Qt=this.popup)==null||Qt.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const Qt=this.getElementsToTriggerPopup();if(Array.isArray(Qt))for(const kt of Qt)kt.classList.add("highlightArea");else Qt.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:Qt,data:{id:kt}}=this;this.container.addEventListener("dblclick",()=>{var Bt;(Bt=this.linkService.eventBus)==null||Bt.dispatch("switchannotationeditormode",{source:this,mode:Qt,editId:kt})})}};Mt=new WeakMap;let yt=$t;class St extends yt{constructor(kt,Bt=null){super(kt,{isRenderable:!0,ignoreBorder:!!(Bt!=null&&Bt.ignoreBorder),createQuadrilaterals:!0});tn(this,Lt);tn(this,zt);this.isTooltipOnly=kt.data.isTooltipOnly}render(){const{data:kt,linkService:Bt}=this,en=document.createElement("a");en.setAttribute("data-element-id",kt.id);let sn=!1;return kt.url?(Bt.addLinkAttributes(en,kt.url,kt.newWindow),sn=!0):kt.action?(this._bindNamedAction(en,kt.action),sn=!0):kt.attachment?(this._bindAttachment(en,kt.attachment),sn=!0):kt.setOCGState?(dn(this,zt,Wl).call(this,en,kt.setOCGState),sn=!0):kt.dest?(this._bindLink(en,kt.dest),sn=!0):(kt.actions&&(kt.actions.Action||kt.actions["Mouse Up"]||kt.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(en,kt),sn=!0),kt.resetForm?(this._bindResetFormAction(en,kt.resetForm),sn=!0):this.isTooltipOnly&&!sn&&(this._bindLink(en,""),sn=!0)),this.container.classList.add("linkAnnotation"),sn&&this.container.append(en),this.container}_bindLink(kt,Bt){kt.href=this.linkService.getDestinationHash(Bt),kt.onclick=()=>(Bt&&this.linkService.goToDestination(Bt),!1),(Bt||Bt==="")&&dn(this,Lt,qr).call(this)}_bindNamedAction(kt,Bt){kt.href=this.linkService.getAnchorUrl(""),kt.onclick=()=>(this.linkService.executeNamedAction(Bt),!1),dn(this,Lt,qr).call(this)}_bindAttachment(kt,Bt){kt.href=this.linkService.getAnchorUrl(""),kt.onclick=()=>{var en;return(en=this.downloadManager)==null||en.openOrDownloadData(this.container,Bt.content,Bt.filename),!1},dn(this,Lt,qr).call(this)}_bindJSAction(kt,Bt){kt.href=this.linkService.getAnchorUrl("");const en=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const sn of Object.keys(Bt.actions)){const hn=en.get(sn);hn&&(kt[hn]=()=>{var En;return(En=this.linkService.eventBus)==null||En.dispatch("dispatcheventinsandbox",{source:this,detail:{id:Bt.id,name:sn}}),!1})}kt.onclick||(kt.onclick=()=>!1),dn(this,Lt,qr).call(this)}_bindResetFormAction(kt,Bt){const en=kt.onclick;if(en||(kt.href=this.linkService.getAnchorUrl("")),dn(this,Lt,qr).call(this),!this._fieldObjects){(0,a.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),en||(kt.onclick=()=>!1);return}kt.onclick=()=>{var er;en==null||en();const{fields:sn,refs:hn,include:En}=Bt,Nn=[];if(sn.length!==0||hn.length!==0){const Gn=new Set(hn);for(const Kn of sn){const Zn=this._fieldObjects[Kn]||[];for(const{id:ir}of Zn)Gn.add(ir)}for(const Kn of Object.values(this._fieldObjects))for(const Zn of Kn)Gn.has(Zn.id)===En&&Nn.push(Zn)}else for(const Gn of Object.values(this._fieldObjects))Nn.push(...Gn);const Bn=this.annotationStorage,Un=[];for(const Gn of Nn){const{id:Kn}=Gn;switch(Un.push(Kn),Gn.type){case"text":{const ir=Gn.defaultValue||"";Bn.setValue(Kn,{value:ir});break}case"checkbox":case"radiobutton":{const ir=Gn.defaultValue===Gn.exportValues;Bn.setValue(Kn,{value:ir});break}case"combobox":case"listbox":{const ir=Gn.defaultValue||"";Bn.setValue(Kn,{value:ir});break}default:continue}const Zn=document.querySelector(`[data-element-id="${Kn}"]`);if(Zn){if(!mt.has(Zn)){(0,a.warn)(`_bindResetFormAction - element not allowed: ${Kn}`);continue}}else continue;Zn.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((er=this.linkService.eventBus)==null||er.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:Un,name:"ResetForm"}})),!1}}}Lt=new WeakSet,qr=function(){this.container.setAttribute("data-internal-link","")},zt=new WeakSet,Wl=function(kt,Bt){kt.href=this.linkService.getAnchorUrl(""),kt.onclick=()=>(this.linkService.executeSetOCGState(Bt),!1),dn(this,Lt,qr).call(this)};class Et extends yt{constructor(Qt){super(Qt,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const Qt=document.createElement("img");return Qt.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",Qt.alt="[{{type}} Annotation]",Qt.dataset.l10nId="text_annotation_type",Qt.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(Qt),this.container}}class vt extends yt{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(Qt){var kt;this.data.hasOwnCanvas&&(((kt=Qt.previousSibling)==null?void 0:kt.nodeName)==="CANVAS"&&(Qt.previousSibling.hidden=!0),Qt.hidden=!1)}_getKeyModifier(Qt){const{isWin:kt,isMac:Bt}=a.FeatureTest.platform;return kt&&Qt.ctrlKey||Bt&&Qt.metaKey}_setEventListener(Qt,kt,Bt,en,sn){Bt.includes("mouse")?Qt.addEventListener(Bt,hn=>{var En;(En=this.linkService.eventBus)==null||En.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:en,value:sn(hn),shift:hn.shiftKey,modifier:this._getKeyModifier(hn)}})}):Qt.addEventListener(Bt,hn=>{var En;if(Bt==="blur"){if(!kt.focused||!hn.relatedTarget)return;kt.focused=!1}else if(Bt==="focus"){if(kt.focused)return;kt.focused=!0}sn&&((En=this.linkService.eventBus)==null||En.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:en,value:sn(hn)}}))})}_setEventListeners(Qt,kt,Bt,en){var sn,hn,En;for(const[Nn,Bn]of Bt)(Bn==="Action"||(sn=this.data.actions)!=null&&sn[Bn])&&((Bn==="Focus"||Bn==="Blur")&&(kt||(kt={focused:!1})),this._setEventListener(Qt,kt,Nn,Bn,en),Bn==="Focus"&&!((hn=this.data.actions)!=null&&hn.Blur)?this._setEventListener(Qt,kt,"blur","Blur",null):Bn==="Blur"&&!((En=this.data.actions)!=null&&En.Focus)&&this._setEventListener(Qt,kt,"focus","Focus",null))}_setBackgroundColor(Qt){const kt=this.data.backgroundColor||null;Qt.style.backgroundColor=kt===null?"transparent":a.Util.makeHexColor(kt[0],kt[1],kt[2])}_setTextStyle(Qt){const kt=["left","center","right"],{fontColor:Bt}=this.data.defaultAppearanceData,en=this.data.defaultAppearanceData.fontSize||pt,sn=Qt.style;let hn;const En=2,Nn=Bn=>Math.round(10*Bn)/10;if(this.data.multiLine){const Bn=Math.abs(this.data.rect[3]-this.data.rect[1]-En),Un=Math.round(Bn/(a.LINE_FACTOR*en))||1,er=Bn/Un;hn=Math.min(en,Nn(er/a.LINE_FACTOR))}else{const Bn=Math.abs(this.data.rect[3]-this.data.rect[1]-En);hn=Math.min(en,Nn(Bn/a.LINE_FACTOR))}sn.fontSize=`calc(${hn}px * var(--scale-factor))`,sn.color=a.Util.makeHexColor(Bt[0],Bt[1],Bt[2]),this.data.textAlignment!==null&&(sn.textAlign=kt[this.data.textAlignment])}_setRequired(Qt,kt){kt?Qt.setAttribute("required",!0):Qt.removeAttribute("required"),Qt.setAttribute("aria-required",kt)}}class bt extends vt{constructor(Qt){const kt=Qt.renderForms||!Qt.data.hasAppearance&&!!Qt.data.fieldValue;super(Qt,{isRenderable:kt})}setPropertyOnSiblings(Qt,kt,Bt,en){const sn=this.annotationStorage;for(const hn of this._getElementsByName(Qt.name,Qt.id))hn.domElement&&(hn.domElement[kt]=Bt),sn.setValue(hn.id,{[en]:Bt})}render(){var en,sn;const Qt=this.annotationStorage,kt=this.data.id;this.container.classList.add("textWidgetAnnotation");let Bt=null;if(this.renderForms){const hn=Qt.getValue(kt,{value:this.data.fieldValue});let En=hn.value||"";const Nn=Qt.getValue(kt,{charLimit:this.data.maxLen}).charLimit;Nn&&En.length>Nn&&(En=En.slice(0,Nn));let Bn=hn.formattedValue||((en=this.data.textContent)==null?void 0:en.join(`
`))||null;Bn&&this.data.comb&&(Bn=Bn.replaceAll(/\s+/g,""));const Un={userValue:En,formattedValue:Bn,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(Bt=document.createElement("textarea"),Bt.textContent=Bn??En,this.data.doNotScroll&&(Bt.style.overflowY="hidden")):(Bt=document.createElement("input"),Bt.type="text",Bt.setAttribute("value",Bn??En),this.data.doNotScroll&&(Bt.style.overflowX="hidden")),this.data.hasOwnCanvas&&(Bt.hidden=!0),mt.add(Bt),Bt.setAttribute("data-element-id",kt),Bt.disabled=this.data.readOnly,Bt.name=this.data.fieldName,Bt.tabIndex=ft,this._setRequired(Bt,this.data.required),Nn&&(Bt.maxLength=Nn),Bt.addEventListener("input",Gn=>{Qt.setValue(kt,{value:Gn.target.value}),this.setPropertyOnSiblings(Bt,"value",Gn.target.value,"value"),Un.formattedValue=null}),Bt.addEventListener("resetform",Gn=>{const Kn=this.data.defaultFieldValue??"";Bt.value=Un.userValue=Kn,Un.formattedValue=null});let er=Gn=>{const{formattedValue:Kn}=Un;Kn!=null&&(Gn.target.value=Kn),Gn.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){Bt.addEventListener("focus",Kn=>{if(Un.focused)return;const{target:Zn}=Kn;Un.userValue&&(Zn.value=Un.userValue),Un.lastCommittedValue=Zn.value,Un.commitKey=1,Un.focused=!0}),Bt.addEventListener("updatefromsandbox",Kn=>{this.showElementAndHideCanvas(Kn.target);const Zn={value(ir){Un.userValue=ir.detail.value??"",Qt.setValue(kt,{value:Un.userValue.toString()}),ir.target.value=Un.userValue},formattedValue(ir){const{formattedValue:tr}=ir.detail;Un.formattedValue=tr,tr!=null&&ir.target!==document.activeElement&&(ir.target.value=tr),Qt.setValue(kt,{formattedValue:tr})},selRange(ir){ir.target.setSelectionRange(...ir.detail.selRange)},charLimit:ir=>{var or;const{charLimit:tr}=ir.detail,{target:ar}=ir;if(tr===0){ar.removeAttribute("maxLength");return}ar.setAttribute("maxLength",tr);let sr=Un.userValue;!sr||sr.length<=tr||(sr=sr.slice(0,tr),ar.value=Un.userValue=sr,Qt.setValue(kt,{value:sr}),(or=this.linkService.eventBus)==null||or.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:sr,willCommit:!0,commitKey:1,selStart:ar.selectionStart,selEnd:ar.selectionEnd}}))}};this._dispatchEventFromSandbox(Zn,Kn)}),Bt.addEventListener("keydown",Kn=>{var tr;Un.commitKey=1;let Zn=-1;if(Kn.key==="Escape"?Zn=0:Kn.key==="Enter"&&!this.data.multiLine?Zn=2:Kn.key==="Tab"&&(Un.commitKey=3),Zn===-1)return;const{value:ir}=Kn.target;Un.lastCommittedValue!==ir&&(Un.lastCommittedValue=ir,Un.userValue=ir,(tr=this.linkService.eventBus)==null||tr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:ir,willCommit:!0,commitKey:Zn,selStart:Kn.target.selectionStart,selEnd:Kn.target.selectionEnd}}))});const Gn=er;er=null,Bt.addEventListener("blur",Kn=>{var ir;if(!Un.focused||!Kn.relatedTarget)return;Un.focused=!1;const{value:Zn}=Kn.target;Un.userValue=Zn,Un.lastCommittedValue!==Zn&&((ir=this.linkService.eventBus)==null||ir.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:Zn,willCommit:!0,commitKey:Un.commitKey,selStart:Kn.target.selectionStart,selEnd:Kn.target.selectionEnd}})),Gn(Kn)}),(sn=this.data.actions)!=null&&sn.Keystroke&&Bt.addEventListener("beforeinput",Kn=>{var pr;Un.lastCommittedValue=null;const{data:Zn,target:ir}=Kn,{value:tr,selectionStart:ar,selectionEnd:sr}=ir;let or=ar,dr=sr;switch(Kn.inputType){case"deleteWordBackward":{const vr=tr.substring(0,ar).match(/\w*[^\w]*$/);vr&&(or-=vr[0].length);break}case"deleteWordForward":{const vr=tr.substring(ar).match(/^[^\w]*\w*/);vr&&(dr+=vr[0].length);break}case"deleteContentBackward":ar===sr&&(or-=1);break;case"deleteContentForward":ar===sr&&(dr+=1);break}Kn.preventDefault(),(pr=this.linkService.eventBus)==null||pr.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:tr,change:Zn||"",willCommit:!1,selStart:or,selEnd:dr}})}),this._setEventListeners(Bt,Un,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Kn=>Kn.target.value)}if(er&&Bt.addEventListener("blur",er),this.data.comb){const Kn=(this.data.rect[2]-this.data.rect[0])/Nn;Bt.classList.add("comb"),Bt.style.letterSpacing=`calc(${Kn}px * var(--scale-factor) - 1ch)`}}else Bt=document.createElement("div"),Bt.textContent=this.data.fieldValue,Bt.style.verticalAlign="middle",Bt.style.display="table-cell";return this._setTextStyle(Bt),this._setBackgroundColor(Bt),this._setDefaultPropertiesFromJS(Bt),this.container.append(Bt),this.container}}class Tt extends vt{constructor(Qt){super(Qt,{isRenderable:!!Qt.data.hasOwnCanvas})}}class wt extends vt{constructor(Qt){super(Qt,{isRenderable:Qt.renderForms})}render(){const Qt=this.annotationStorage,kt=this.data,Bt=kt.id;let en=Qt.getValue(Bt,{value:kt.exportValue===kt.fieldValue}).value;typeof en=="string"&&(en=en!=="Off",Qt.setValue(Bt,{value:en})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const sn=document.createElement("input");return mt.add(sn),sn.setAttribute("data-element-id",Bt),sn.disabled=kt.readOnly,this._setRequired(sn,this.data.required),sn.type="checkbox",sn.name=kt.fieldName,en&&sn.setAttribute("checked",!0),sn.setAttribute("exportValue",kt.exportValue),sn.tabIndex=ft,sn.addEventListener("change",hn=>{const{name:En,checked:Nn}=hn.target;for(const Bn of this._getElementsByName(En,Bt)){const Un=Nn&&Bn.exportValue===kt.exportValue;Bn.domElement&&(Bn.domElement.checked=Un),Qt.setValue(Bn.id,{value:Un})}Qt.setValue(Bt,{value:Nn})}),sn.addEventListener("resetform",hn=>{const En=kt.defaultFieldValue||"Off";hn.target.checked=En===kt.exportValue}),this.enableScripting&&this.hasJSActions&&(sn.addEventListener("updatefromsandbox",hn=>{const En={value(Nn){Nn.target.checked=Nn.detail.value!=="Off",Qt.setValue(Bt,{value:Nn.target.checked})}};this._dispatchEventFromSandbox(En,hn)}),this._setEventListeners(sn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],hn=>hn.target.checked)),this._setBackgroundColor(sn),this._setDefaultPropertiesFromJS(sn),this.container.append(sn),this.container}}class Pt extends vt{constructor(Qt){super(Qt,{isRenderable:Qt.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const Qt=this.annotationStorage,kt=this.data,Bt=kt.id;let en=Qt.getValue(Bt,{value:kt.fieldValue===kt.buttonValue}).value;typeof en=="string"&&(en=en!==kt.buttonValue,Qt.setValue(Bt,{value:en}));const sn=document.createElement("input");if(mt.add(sn),sn.setAttribute("data-element-id",Bt),sn.disabled=kt.readOnly,this._setRequired(sn,this.data.required),sn.type="radio",sn.name=kt.fieldName,en&&sn.setAttribute("checked",!0),sn.tabIndex=ft,sn.addEventListener("change",hn=>{const{name:En,checked:Nn}=hn.target;for(const Bn of this._getElementsByName(En,Bt))Qt.setValue(Bn.id,{value:!1});Qt.setValue(Bt,{value:Nn})}),sn.addEventListener("resetform",hn=>{const En=kt.defaultFieldValue;hn.target.checked=En!=null&&En===kt.buttonValue}),this.enableScripting&&this.hasJSActions){const hn=kt.buttonValue;sn.addEventListener("updatefromsandbox",En=>{const Nn={value:Bn=>{const Un=hn===Bn.detail.value;for(const er of this._getElementsByName(Bn.target.name)){const Gn=Un&&er.id===Bt;er.domElement&&(er.domElement.checked=Gn),Qt.setValue(er.id,{value:Gn})}}};this._dispatchEventFromSandbox(Nn,En)}),this._setEventListeners(sn,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],En=>En.target.checked)}return this._setBackgroundColor(sn),this._setDefaultPropertiesFromJS(sn),this.container.append(sn),this.container}}class At extends St{constructor(Qt){super(Qt,{ignoreBorder:Qt.data.hasAppearance})}render(){const Qt=super.render();Qt.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(Qt.title=this.data.alternativeText);const kt=Qt.lastChild;return this.enableScripting&&this.hasJSActions&&kt&&(this._setDefaultPropertiesFromJS(kt),kt.addEventListener("updatefromsandbox",Bt=>{this._dispatchEventFromSandbox({},Bt)})),Qt}}class xt extends vt{constructor(Qt){super(Qt,{isRenderable:Qt.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const Qt=this.annotationStorage,kt=this.data.id,Bt=Qt.getValue(kt,{value:this.data.fieldValue}),en=document.createElement("select");mt.add(en),en.setAttribute("data-element-id",kt),en.disabled=this.data.readOnly,this._setRequired(en,this.data.required),en.name=this.data.fieldName,en.tabIndex=ft;let sn=this.data.combo&&this.data.options.length>0;this.data.combo||(en.size=this.data.options.length,this.data.multiSelect&&(en.multiple=!0)),en.addEventListener("resetform",Un=>{const er=this.data.defaultFieldValue;for(const Gn of en.options)Gn.selected=Gn.value===er});for(const Un of this.data.options){const er=document.createElement("option");er.textContent=Un.displayValue,er.value=Un.exportValue,Bt.value.includes(Un.exportValue)&&(er.setAttribute("selected",!0),sn=!1),en.append(er)}let hn=null;if(sn){const Un=document.createElement("option");Un.value=" ",Un.setAttribute("hidden",!0),Un.setAttribute("selected",!0),en.prepend(Un),hn=()=>{Un.remove(),en.removeEventListener("input",hn),hn=null},en.addEventListener("input",hn)}const En=Un=>{const er=Un?"value":"textContent",{options:Gn,multiple:Kn}=en;return Kn?Array.prototype.filter.call(Gn,Zn=>Zn.selected).map(Zn=>Zn[er]):Gn.selectedIndex===-1?null:Gn[Gn.selectedIndex][er]};let Nn=En(!1);const Bn=Un=>{const er=Un.target.options;return Array.prototype.map.call(er,Gn=>({displayValue:Gn.textContent,exportValue:Gn.value}))};return this.enableScripting&&this.hasJSActions?(en.addEventListener("updatefromsandbox",Un=>{const er={value(Gn){hn==null||hn();const Kn=Gn.detail.value,Zn=new Set(Array.isArray(Kn)?Kn:[Kn]);for(const ir of en.options)ir.selected=Zn.has(ir.value);Qt.setValue(kt,{value:En(!0)}),Nn=En(!1)},multipleSelection(Gn){en.multiple=!0},remove(Gn){const Kn=en.options,Zn=Gn.detail.remove;Kn[Zn].selected=!1,en.remove(Zn),Kn.length>0&&Array.prototype.findIndex.call(Kn,tr=>tr.selected)===-1&&(Kn[0].selected=!0),Qt.setValue(kt,{value:En(!0),items:Bn(Gn)}),Nn=En(!1)},clear(Gn){for(;en.length!==0;)en.remove(0);Qt.setValue(kt,{value:null,items:[]}),Nn=En(!1)},insert(Gn){const{index:Kn,displayValue:Zn,exportValue:ir}=Gn.detail.insert,tr=en.children[Kn],ar=document.createElement("option");ar.textContent=Zn,ar.value=ir,tr?tr.before(ar):en.append(ar),Qt.setValue(kt,{value:En(!0),items:Bn(Gn)}),Nn=En(!1)},items(Gn){const{items:Kn}=Gn.detail;for(;en.length!==0;)en.remove(0);for(const Zn of Kn){const{displayValue:ir,exportValue:tr}=Zn,ar=document.createElement("option");ar.textContent=ir,ar.value=tr,en.append(ar)}en.options.length>0&&(en.options[0].selected=!0),Qt.setValue(kt,{value:En(!0),items:Bn(Gn)}),Nn=En(!1)},indices(Gn){const Kn=new Set(Gn.detail.indices);for(const Zn of Gn.target.options)Zn.selected=Kn.has(Zn.index);Qt.setValue(kt,{value:En(!0)}),Nn=En(!1)},editable(Gn){Gn.target.disabled=!Gn.detail.editable}};this._dispatchEventFromSandbox(er,Un)}),en.addEventListener("input",Un=>{var Gn;const er=En(!0);Qt.setValue(kt,{value:er}),Un.preventDefault(),(Gn=this.linkService.eventBus)==null||Gn.dispatch("dispatcheventinsandbox",{source:this,detail:{id:kt,name:"Keystroke",value:Nn,changeEx:er,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(en,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Un=>Un.target.value)):en.addEventListener("input",function(Un){Qt.setValue(kt,{value:En(!0)})}),this.data.combo&&this._setTextStyle(en),this._setBackgroundColor(en),this._setDefaultPropertiesFromJS(en),this.container.append(en),this.container}}class Ot extends yt{constructor(Qt){const{data:kt,elements:Bt}=Qt;super(Qt,{isRenderable:yt._hasPopupData(kt)}),this.elements=Bt}render(){this.container.classList.add("popupAnnotation");const Qt=new Rt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),kt=[];for(const Bt of this.elements)Bt.popup=Qt,kt.push(Bt.data.id),Bt.addHighlightArea();return this.container.setAttribute("aria-controls",kt.map(Bt=>`${a.AnnotationPrefix}${Bt}`).join(",")),this.container}}class Rt{constructor({container:Qt,color:kt,elements:Bt,titleObj:en,modificationDate:sn,contentsObj:hn,richText:En,parent:Nn,rect:Bn,parentRect:Un,open:er}){tn(this,Jn);tn(this,Yn);tn(this,jn);tn(this,qn);tn(this,Yt,null);tn(this,un,dn(this,Jn,zl).bind(this));tn(this,gn,dn(this,qn,js).bind(this));tn(this,yn,dn(this,jn,Vs).bind(this));tn(this,Tn,dn(this,Yn,Xo).bind(this));tn(this,Rn,null);tn(this,Sn,null);tn(this,Fn,null);tn(this,Dn,null);tn(this,xn,null);tn(this,On,null);tn(this,wn,!1);tn(this,fn,null);tn(this,_n,null);tn(this,Cn,null);tn(this,Ln,null);tn(this,Vn,!1);var Kn;pn(this,Sn,Qt),pn(this,Ln,en),pn(this,Fn,hn),pn(this,Cn,En),pn(this,xn,Nn),pn(this,Rn,kt),pn(this,_n,Bn),pn(this,On,Un),pn(this,Dn,Bt);const Gn=et.PDFDateString.toDateObject(sn);Gn&&pn(this,Yt,Nn.l10n.get("annotation_date_string",{date:Gn.toLocaleDateString(),time:Gn.toLocaleTimeString()})),this.trigger=Bt.flatMap(Zn=>Zn.getElementsToTriggerPopup());for(const Zn of this.trigger)Zn.addEventListener("click",Ct(this,Tn)),Zn.addEventListener("mouseenter",Ct(this,yn)),Zn.addEventListener("mouseleave",Ct(this,gn)),Zn.classList.add("popupTriggerArea");for(const Zn of Bt)(Kn=Zn.container)==null||Kn.addEventListener("keydown",Ct(this,un));Ct(this,Sn).hidden=!0,er&&dn(this,Yn,Xo).call(this)}render(){if(Ct(this,fn))return;const{page:{view:Qt},viewport:{rawDims:{pageWidth:kt,pageHeight:Bt,pageX:en,pageY:sn}}}=Ct(this,xn),hn=pn(this,fn,document.createElement("div"));if(hn.className="popup",Ct(this,Rn)){const or=hn.style.outlineColor=a.Util.makeHexColor(...Ct(this,Rn));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?hn.style.backgroundColor=`color-mix(in srgb, ${or} 30%, white)`:hn.style.backgroundColor=a.Util.makeHexColor(...Ct(this,Rn).map(pr=>Math.floor(.7*(255-pr)+pr)))}const En=document.createElement("span");En.className="header";const Nn=document.createElement("h1");if(En.append(Nn),{dir:Nn.dir,str:Nn.textContent}=Ct(this,Ln),hn.append(En),Ct(this,Yt)){const or=document.createElement("span");or.classList.add("popupDate"),Ct(this,Yt).then(dr=>{or.textContent=dr}),En.append(or)}const Bn=Ct(this,Fn),Un=Ct(this,Cn);if(Un!=null&&Un.str&&(!(Bn!=null&&Bn.str)||Bn.str===Un.str))ht.XfaLayer.render({xfaHtml:Un.html,intent:"richText",div:hn}),hn.lastChild.classList.add("richText","popupContent");else{const or=this._formatContents(Bn);hn.append(or)}let er=!!Ct(this,On),Gn=er?Ct(this,On):Ct(this,_n);for(const or of Ct(this,Dn))if(!Gn||a.Util.intersect(or.data.rect,Gn)!==null){Gn=or.data.rect,er=!0;break}const Kn=a.Util.normalizeRect([Gn[0],Qt[3]-Gn[1]+Qt[1],Gn[2],Qt[3]-Gn[3]+Qt[1]]),Zn=5,ir=er?Gn[2]-Gn[0]+Zn:0,tr=Kn[0]+ir,ar=Kn[1],{style:sr}=Ct(this,Sn);sr.left=`${100*(tr-en)/kt}%`,sr.top=`${100*(ar-sn)/Bt}%`,Ct(this,Sn).append(hn)}_formatContents({str:Qt,dir:kt}){const Bt=document.createElement("p");Bt.classList.add("popupContent"),Bt.dir=kt;const en=Qt.split(/(?:\r\n?|\n)/);for(let sn=0,hn=en.length;sn<hn;++sn){const En=en[sn];Bt.append(document.createTextNode(En)),sn<hn-1&&Bt.append(document.createElement("br"))}return Bt}forceHide(){pn(this,Vn,this.isVisible),Ct(this,Vn)&&(Ct(this,Sn).hidden=!0)}maybeShow(){Ct(this,Vn)&&(pn(this,Vn,!1),Ct(this,Sn).hidden=!1)}get isVisible(){return Ct(this,Sn).hidden===!1}}Yt=new WeakMap,un=new WeakMap,gn=new WeakMap,yn=new WeakMap,Tn=new WeakMap,Rn=new WeakMap,Sn=new WeakMap,Fn=new WeakMap,Dn=new WeakMap,xn=new WeakMap,On=new WeakMap,wn=new WeakMap,fn=new WeakMap,_n=new WeakMap,Cn=new WeakMap,Ln=new WeakMap,Vn=new WeakMap,Jn=new WeakSet,zl=function(Qt){Qt.altKey||Qt.shiftKey||Qt.ctrlKey||Qt.metaKey||(Qt.key==="Enter"||Qt.key==="Escape"&&Ct(this,wn))&&dn(this,Yn,Xo).call(this)},Yn=new WeakSet,Xo=function(){pn(this,wn,!Ct(this,wn)),Ct(this,wn)?(dn(this,jn,Vs).call(this),Ct(this,Sn).addEventListener("click",Ct(this,Tn)),Ct(this,Sn).addEventListener("keydown",Ct(this,un))):(dn(this,qn,js).call(this),Ct(this,Sn).removeEventListener("click",Ct(this,Tn)),Ct(this,Sn).removeEventListener("keydown",Ct(this,un)))},jn=new WeakSet,Vs=function(){Ct(this,fn)||this.render(),this.isVisible?Ct(this,wn)&&Ct(this,Sn).classList.add("focused"):(Ct(this,Sn).hidden=!1,Ct(this,Sn).style.zIndex=parseInt(Ct(this,Sn).style.zIndex)+1e3)},qn=new WeakSet,js=function(){Ct(this,Sn).classList.remove("focused"),!(Ct(this,wn)||!this.isVisible)&&(Ct(this,Sn).hidden=!0,Ct(this,Sn).style.zIndex=parseInt(Ct(this,Sn).style.zIndex)-1e3)};class Dt extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0}),this.textContent=Qt.data.textContent,this.textPosition=Qt.data.textPosition,this.annotationEditorType=a.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const Qt=document.createElement("div");Qt.classList.add("annotationTextContent"),Qt.setAttribute("role","comment");for(const kt of this.textContent){const Bt=document.createElement("span");Bt.textContent=kt,Qt.append(Bt)}this.container.append(Qt)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}i.FreeTextAnnotationElement=Dt;class Nt extends yt{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});tn(this,cn,null)}render(){this.container.classList.add("lineAnnotation");const kt=this.data,{width:Bt,height:en}=gt(kt.rect),sn=this.svgFactory.create(Bt,en,!0),hn=pn(this,cn,this.svgFactory.createElement("svg:line"));return hn.setAttribute("x1",kt.rect[2]-kt.lineCoordinates[0]),hn.setAttribute("y1",kt.rect[3]-kt.lineCoordinates[1]),hn.setAttribute("x2",kt.rect[2]-kt.lineCoordinates[2]),hn.setAttribute("y2",kt.rect[3]-kt.lineCoordinates[3]),hn.setAttribute("stroke-width",kt.borderStyle.width||1),hn.setAttribute("stroke","transparent"),hn.setAttribute("fill","transparent"),sn.append(hn),this.container.append(sn),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ct(this,cn)}addHighlightArea(){this.container.classList.add("highlightArea")}}cn=new WeakMap;class Kt extends yt{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});tn(this,ln,null)}render(){this.container.classList.add("squareAnnotation");const kt=this.data,{width:Bt,height:en}=gt(kt.rect),sn=this.svgFactory.create(Bt,en,!0),hn=kt.borderStyle.width,En=pn(this,ln,this.svgFactory.createElement("svg:rect"));return En.setAttribute("x",hn/2),En.setAttribute("y",hn/2),En.setAttribute("width",Bt-hn),En.setAttribute("height",en-hn),En.setAttribute("stroke-width",hn||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),sn.append(En),this.container.append(sn),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ct(this,ln)}addHighlightArea(){this.container.classList.add("highlightArea")}}ln=new WeakMap;class qt extends yt{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});tn(this,Mn,null)}render(){this.container.classList.add("circleAnnotation");const kt=this.data,{width:Bt,height:en}=gt(kt.rect),sn=this.svgFactory.create(Bt,en,!0),hn=kt.borderStyle.width,En=pn(this,Mn,this.svgFactory.createElement("svg:ellipse"));return En.setAttribute("cx",Bt/2),En.setAttribute("cy",en/2),En.setAttribute("rx",Bt/2-hn/2),En.setAttribute("ry",en/2-hn/2),En.setAttribute("stroke-width",hn||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),sn.append(En),this.container.append(sn),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ct(this,Mn)}addHighlightArea(){this.container.classList.add("highlightArea")}}Mn=new WeakMap;class jt extends yt{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});tn(this,$n,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const kt=this.data,{width:Bt,height:en}=gt(kt.rect),sn=this.svgFactory.create(Bt,en,!0);let hn=[];for(const Nn of kt.vertices){const Bn=Nn.x-kt.rect[0],Un=kt.rect[3]-Nn.y;hn.push(Bn+","+Un)}hn=hn.join(" ");const En=pn(this,$n,this.svgFactory.createElement(this.svgElementName));return En.setAttribute("points",hn),En.setAttribute("stroke-width",kt.borderStyle.width||1),En.setAttribute("stroke","transparent"),En.setAttribute("fill","transparent"),sn.append(En),this.container.append(sn),!kt.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return Ct(this,$n)}addHighlightArea(){this.container.classList.add("highlightArea")}}$n=new WeakMap;class Zt extends jt{constructor(Qt){super(Qt),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ht extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class Wt extends yt{constructor(kt){super(kt,{isRenderable:!0,ignoreBorder:!0});tn(this,rr,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=a.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const kt=this.data,{width:Bt,height:en}=gt(kt.rect),sn=this.svgFactory.create(Bt,en,!0);for(const hn of kt.inkLists){let En=[];for(const Bn of hn){const Un=Bn.x-kt.rect[0],er=kt.rect[3]-Bn.y;En.push(`${Un},${er}`)}En=En.join(" ");const Nn=this.svgFactory.createElement(this.svgElementName);Ct(this,rr).push(Nn),Nn.setAttribute("points",En),Nn.setAttribute("stroke-width",kt.borderStyle.width||1),Nn.setAttribute("stroke","transparent"),Nn.setAttribute("fill","transparent"),!kt.popupRef&&this.hasPopupData&&this._createPopup(),sn.append(Nn)}return this.container.append(sn),this.container}getElementsToTriggerPopup(){return Ct(this,rr)}addHighlightArea(){this.container.classList.add("highlightArea")}}rr=new WeakMap,i.InkAnnotationElement=Wt;class Ft extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class Gt extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Jt extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class on extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class bn extends yt{constructor(Qt){super(Qt,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}i.StampAnnotationElement=bn;class Ut extends yt{constructor(kt){var sn;super(kt,{isRenderable:!0});tn(this,mn);tn(this,cr,null);const{filename:Bt,content:en}=this.data.file;this.filename=(0,et.getFilenameFromUrl)(Bt,!0),this.content=en,(sn=this.linkService.eventBus)==null||sn.dispatch("fileattachmentannotation",{source:this,filename:Bt,content:en})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:kt,data:Bt}=this;let en;Bt.hasAppearance||Bt.fillAlpha===0?en=document.createElement("div"):(en=document.createElement("img"),en.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(Bt.name)?"paperclip":"pushpin"}.svg`,Bt.fillAlpha&&Bt.fillAlpha<1&&(en.style=`filter: opacity(${Math.round(Bt.fillAlpha*100)}%);`)),en.addEventListener("dblclick",dn(this,mn,Us).bind(this)),pn(this,cr,en);const{isMac:sn}=a.FeatureTest.platform;return kt.addEventListener("keydown",hn=>{hn.key==="Enter"&&(sn?hn.metaKey:hn.ctrlKey)&&dn(this,mn,Us).call(this)}),!Bt.popupRef&&this.hasPopupData?this._createPopup():en.classList.add("popupTriggerArea"),kt.append(en),kt}getElementsToTriggerPopup(){return Ct(this,cr)}addHighlightArea(){this.container.classList.add("highlightArea")}}cr=new WeakMap,mn=new WeakSet,Us=function(){var kt;(kt=this.downloadManager)==null||kt.openOrDownloadData(this.container,this.content,this.filename)};class It{constructor({div:Qt,accessibilityManager:kt,annotationCanvasMap:Bt,l10n:en,page:sn,viewport:hn}){tn(this,In);tn(this,Pn);tn(this,an,null);tn(this,rn,null);tn(this,An,new Map);this.div=Qt,pn(this,an,kt),pn(this,rn,Bt),this.l10n=en,this.page=sn,this.viewport=hn,this.zIndex=0,this.l10n||(this.l10n=dt.NullL10n)}async render(Qt){const{annotations:kt}=Qt,Bt=this.div;(0,et.setLayerDimensions)(Bt,this.viewport);const en=new Map,sn={data:null,layer:Bt,linkService:Qt.linkService,downloadManager:Qt.downloadManager,imageResourcesPath:Qt.imageResourcesPath||"",renderForms:Qt.renderForms!==!1,svgFactory:new et.DOMSVGFactory,annotationStorage:Qt.annotationStorage||new tt.AnnotationStorage,enableScripting:Qt.enableScripting===!0,hasJSActions:Qt.hasJSActions,fieldObjects:Qt.fieldObjects,parent:this,elements:null};for(const hn of kt){if(hn.noHTML)continue;const En=hn.annotationType===a.AnnotationType.POPUP;if(En){const Un=en.get(hn.id);if(!Un)continue;sn.elements=Un}else{const{width:Un,height:er}=gt(hn.rect);if(Un<=0||er<=0)continue}sn.data=hn;const Nn=_t.create(sn);if(!Nn.isRenderable)continue;if(!En&&hn.popupRef){const Un=en.get(hn.popupRef);Un?Un.push(Nn):en.set(hn.popupRef,[Nn])}Nn.annotationEditorType>0&&Ct(this,An).set(Nn.data.id,Nn);const Bn=Nn.render();hn.hidden&&(Bn.style.visibility="hidden"),dn(this,In,Hl).call(this,Bn,hn.id)}dn(this,Pn,Bs).call(this),await this.l10n.translate(Bt)}update({viewport:Qt}){const kt=this.div;this.viewport=Qt,(0,et.setLayerDimensions)(kt,{rotation:Qt.rotation}),dn(this,Pn,Bs).call(this),kt.hidden=!1}getEditableAnnotations(){return Array.from(Ct(this,An).values())}getEditableAnnotation(Qt){return Ct(this,An).get(Qt)}}an=new WeakMap,rn=new WeakMap,An=new WeakMap,In=new WeakSet,Hl=function(Qt,kt){var en;const Bt=Qt.firstChild||Qt;Bt.id=`${a.AnnotationPrefix}${kt}`,this.div.append(Qt),(en=Ct(this,an))==null||en.moveElementInDOM(this.div,Qt,Bt,!1)},Pn=new WeakSet,Bs=function(){if(!Ct(this,rn))return;const Qt=this.div;for(const[kt,Bt]of Ct(this,rn)){const en=Qt.querySelector(`[data-annotation-id="${kt}"]`);if(!en)continue;const{firstChild:sn}=en;sn?sn.nodeName==="CANVAS"?sn.replaceWith(Bt):sn.before(Bt):en.append(Bt)}Ct(this,rn).clear()},i.AnnotationLayer=It},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.ColorConverters=void 0;function s(tt){return Math.floor(Math.max(0,Math.min(1,tt))*255).toString(16).padStart(2,"0")}function a(tt){return Math.max(0,Math.min(255,255*tt))}class et{static CMYK_G([ot,dt,ht,ft]){return["G",1-Math.min(1,.3*ot+.59*ht+.11*dt+ft)]}static G_CMYK([ot]){return["CMYK",0,0,0,1-ot]}static G_RGB([ot]){return["RGB",ot,ot,ot]}static G_rgb([ot]){return ot=a(ot),[ot,ot,ot]}static G_HTML([ot]){const dt=s(ot);return`#${dt}${dt}${dt}`}static RGB_G([ot,dt,ht]){return["G",.3*ot+.59*dt+.11*ht]}static RGB_rgb(ot){return ot.map(a)}static RGB_HTML(ot){return`#${ot.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([ot,dt,ht,ft]){return["RGB",1-Math.min(1,ot+ft),1-Math.min(1,ht+ft),1-Math.min(1,dt+ft)]}static CMYK_rgb([ot,dt,ht,ft]){return[a(1-Math.min(1,ot+ft)),a(1-Math.min(1,ht+ft)),a(1-Math.min(1,dt+ft))]}static CMYK_HTML(ot){const dt=this.CMYK_RGB(ot).slice(1);return this.RGB_HTML(dt)}static RGB_CMYK([ot,dt,ht]){const ft=1-ot,pt=1-dt,mt=1-ht,gt=Math.min(ft,pt,mt);return["CMYK",ft,pt,mt,gt]}}i.ColorConverters=et},(o,i)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.NullL10n=void 0,i.getL10nFallback=a;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}} × {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}} × {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing…",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function a(ot,dt){switch(ot){case"find_match_count":ot=`find_match_count[${dt.total===1?"one":"other"}]`;break;case"find_match_count_limit":ot=`find_match_count_limit[${dt.limit===1?"one":"other"}]`;break}return s[ot]||""}function et(ot,dt){return dt?ot.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,(ht,ft)=>ft in dt?dt[ft]:"{{"+ft+"}}"):ot}const tt={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(ot,dt=null,ht=a(ot,dt)){return et(ht,dt)},async translate(ot){}};i.NullL10n=tt},(o,i,s)=>{Object.defineProperty(i,"__esModule",{value:!0}),i.XfaLayer=void 0;var a=s(25);class et{static setupStorage(ot,dt,ht,ft,pt){const mt=ft.getValue(dt,{value:null});switch(ht.name){case"textarea":if(mt.value!==null&&(ot.textContent=mt.value),pt==="print")break;ot.addEventListener("input",gt=>{ft.setValue(dt,{value:gt.target.value})});break;case"input":if(ht.attributes.type==="radio"||ht.attributes.type==="checkbox"){if(mt.value===ht.attributes.xfaOn?ot.setAttribute("checked",!0):mt.value===ht.attributes.xfaOff&&ot.removeAttribute("checked"),pt==="print")break;ot.addEventListener("change",gt=>{ft.setValue(dt,{value:gt.target.checked?gt.target.getAttribute("xfaOn"):gt.target.getAttribute("xfaOff")})})}else{if(mt.value!==null&&ot.setAttribute("value",mt.value),pt==="print")break;ot.addEventListener("input",gt=>{ft.setValue(dt,{value:gt.target.value})})}break;case"select":if(mt.value!==null){ot.setAttribute("value",mt.value);for(const gt of ht.children)gt.attributes.value===mt.value?gt.attributes.selected=!0:gt.attributes.hasOwnProperty("selected")&&delete gt.attributes.selected}ot.addEventListener("input",gt=>{const _t=gt.target.options,yt=_t.selectedIndex===-1?"":_t[_t.selectedIndex].value;ft.setValue(dt,{value:yt})});break}}static setAttributes({html:ot,element:dt,storage:ht=null,intent:ft,linkService:pt}){const{attributes:mt}=dt,gt=ot instanceof HTMLAnchorElement;mt.type==="radio"&&(mt.name=`${mt.name}-${ft}`);for(const[_t,yt]of Object.entries(mt))if(yt!=null)switch(_t){case"class":yt.length&&ot.setAttribute(_t,yt.join(" "));break;case"dataId":break;case"id":ot.setAttribute("data-element-id",yt);break;case"style":Object.assign(ot.style,yt);break;case"textContent":ot.textContent=yt;break;default:(!gt||_t!=="href"&&_t!=="newWindow")&&ot.setAttribute(_t,yt)}gt&&pt.addLinkAttributes(ot,mt.href,mt.newWindow),ht&&mt.dataId&&this.setupStorage(ot,mt.dataId,dt,ht)}static render(ot){var St;const dt=ot.annotationStorage,ht=ot.linkService,ft=ot.xfaHtml,pt=ot.intent||"display",mt=document.createElement(ft.name);ft.attributes&&this.setAttributes({html:mt,element:ft,intent:pt,linkService:ht});const gt=[[ft,-1,mt]],_t=ot.div;if(_t.append(mt),ot.viewport){const Et=`matrix(${ot.viewport.transform.join(",")})`;_t.style.transform=Et}pt!=="richText"&&_t.setAttribute("class","xfaLayer xfaFont");const yt=[];for(;gt.length>0;){const[Et,vt,bt]=gt.at(-1);if(vt+1===Et.children.length){gt.pop();continue}const Tt=Et.children[++gt.at(-1)[1]];if(Tt===null)continue;const{name:wt}=Tt;if(wt==="#text"){const At=document.createTextNode(Tt.value);yt.push(At),bt.append(At);continue}const Pt=(St=Tt==null?void 0:Tt.attributes)!=null&&St.xmlns?document.createElementNS(Tt.attributes.xmlns,wt):document.createElement(wt);if(bt.append(Pt),Tt.attributes&&this.setAttributes({html:Pt,element:Tt,storage:dt,intent:pt,linkService:ht}),Tt.children&&Tt.children.length>0)gt.push([Tt,-1,Pt]);else if(Tt.value){const At=document.createTextNode(Tt.value);a.XfaText.shouldBuildText(wt)&&yt.push(At),Pt.append(At)}}for(const Et of _t.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))Et.setAttribute("readOnly",!0);return{textDivs:yt}}static update(ot){const dt=`matrix(${ot.viewport.transform.join(",")})`;ot.div.style.transform=dt,ot.div.hidden=!1}}i.XfaLayer=et},(o,i,s)=>{var ft,pt,mt,gt,_t,yt,St,Et,vt,bt,Tt,wt,Pt,At,xt,Gl,Rt,Kl,Nt,Xl,qt,Yl,Zt,Ws,Wt,Ql,Gt,zs,on,Jl,Ut,Zl,Mt,_c,Lt,eu,zt,tu,Yt,Mr,gn,Hs,Tn,Yo,Sn,Qo,Dn,so,On,Gs,fn,Jo,Cn,nu,Vn,Ks,Xn,ru,Qn,iu,zn,qs,vn,Zo,ln,ao;Object.defineProperty(i,"__esModule",{value:!0}),i.InkEditor=void 0;var a=s(1),et=s(4),tt=s(29),ot=s(6),dt=s(5);const $n=class $n extends et.AnnotationEditor{constructor(mn){super({...mn,name:"inkEditor"});tn(this,xt);tn(this,Rt);tn(this,Nt);tn(this,qt);tn(this,Zt);tn(this,Wt);tn(this,Gt);tn(this,on);tn(this,Ut);tn(this,Mt);tn(this,Lt);tn(this,zt);tn(this,Yt);tn(this,gn);tn(this,Tn);tn(this,Sn);tn(this,Dn);tn(this,On);tn(this,fn);tn(this,Qn);tn(this,zn);tn(this,vn);tn(this,ln);tn(this,ft,0);tn(this,pt,0);tn(this,mt,this.canvasPointermove.bind(this));tn(this,gt,this.canvasPointerleave.bind(this));tn(this,_t,this.canvasPointerup.bind(this));tn(this,yt,this.canvasPointerdown.bind(this));tn(this,St,new Path2D);tn(this,Et,!1);tn(this,vt,!1);tn(this,bt,!1);tn(this,Tt,null);tn(this,wt,0);tn(this,Pt,0);tn(this,At,null);this.color=mn.color||null,this.thickness=mn.thickness||null,this.opacity=mn.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(mn){et.AnnotationEditor.initialize(mn,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(mn,nn){switch(mn){case a.AnnotationEditorParamsType.INK_THICKNESS:$n._defaultThickness=nn;break;case a.AnnotationEditorParamsType.INK_COLOR:$n._defaultColor=nn;break;case a.AnnotationEditorParamsType.INK_OPACITY:$n._defaultOpacity=nn/100;break}}updateParams(mn,nn){switch(mn){case a.AnnotationEditorParamsType.INK_THICKNESS:dn(this,xt,Gl).call(this,nn);break;case a.AnnotationEditorParamsType.INK_COLOR:dn(this,Rt,Kl).call(this,nn);break;case a.AnnotationEditorParamsType.INK_OPACITY:dn(this,Nt,Xl).call(this,nn);break}}static get defaultPropertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,$n._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,$n._defaultColor||et.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round($n._defaultOpacity*100)]]}get propertiesToUpdate(){return[[a.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||$n._defaultThickness],[a.AnnotationEditorParamsType.INK_COLOR,this.color||$n._defaultColor||et.AnnotationEditor._defaultLineColor],[a.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??$n._defaultOpacity))]]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(dn(this,Tn,Yo).call(this),dn(this,Sn,Qo).call(this)),this.isAttachedToDOM||(this.parent.add(this),dn(this,Dn,so).call(this)),dn(this,ln,ao).call(this)))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,Ct(this,Tt).disconnect(),pn(this,Tt,null),super.remove())}setParent(mn){!this.parent&&mn?this._uiManager.removeShouldRescale(this):this.parent&&mn===null&&this._uiManager.addShouldRescale(this),super.setParent(mn)}onScaleChanging(){const[mn,nn]=this.parentDimensions,an=this.width*mn,rn=this.height*nn;this.setDimensions(an,rn)}enableEditMode(){Ct(this,Et)||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",Ct(this,yt)))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",Ct(this,yt)))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}commit(){Ct(this,Et)||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),pn(this,Et,!0),this.div.classList.add("disabled"),dn(this,ln,ao).call(this,!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(mn){this._focusEventsAllowed&&(super.focusin(mn),this.enableEditMode())}canvasPointerdown(mn){mn.button!==0||!this.isInEditMode()||Ct(this,Et)||(this.setInForeground(),mn.preventDefault(),mn.type!=="mouse"&&this.div.focus(),dn(this,Wt,Ql).call(this,mn.offsetX,mn.offsetY))}canvasPointermove(mn){mn.preventDefault(),dn(this,Gt,zs).call(this,mn.offsetX,mn.offsetY)}canvasPointerup(mn){mn.preventDefault(),dn(this,gn,Hs).call(this,mn)}canvasPointerleave(mn){dn(this,gn,Hs).call(this,mn)}get isResizable(){return!this.isEmpty()&&Ct(this,Et)}render(){if(this.div)return this.div;let mn,nn;this.width&&(mn=this.x,nn=this.y),super.render(),et.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(Hn=>{var Pn;return(Pn=this.div)==null?void 0:Pn.setAttribute("aria-label",Hn)});const[an,rn,An,In]=dn(this,qt,Yl).call(this);if(this.setAt(an,rn,0,0),this.setDims(An,In),dn(this,Tn,Yo).call(this),this.width){const[Hn,Pn]=this.parentDimensions;this.setAspectRatio(this.width*Hn,this.height*Pn),this.setAt(mn*Hn,nn*Pn,this.width*Hn,this.height*Pn),pn(this,bt,!0),dn(this,Dn,so).call(this),this.setDims(this.width*Hn,this.height*Pn),dn(this,Yt,Mr).call(this),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return dn(this,Sn,Qo).call(this),this.div}setDimensions(mn,nn){const an=Math.round(mn),rn=Math.round(nn);if(Ct(this,wt)===an&&Ct(this,Pt)===rn)return;pn(this,wt,an),pn(this,Pt,rn),this.canvas.style.visibility="hidden";const[An,In]=this.parentDimensions;this.width=mn/An,this.height=nn/In,this.fixAndSetPosition(),Ct(this,Et)&&dn(this,On,Gs).call(this,mn,nn),dn(this,Dn,so).call(this),dn(this,Yt,Mr).call(this),this.canvas.style.visibility="visible",this.fixDims()}static deserialize(mn,nn,an){var sn,hn,En;if(mn instanceof tt.InkAnnotationElement)return null;const rn=super.deserialize(mn,nn,an);rn.thickness=mn.thickness,rn.color=a.Util.makeHexColor(...mn.color),rn.opacity=mn.opacity;const[An,In]=rn.pageDimensions,Hn=rn.width*An,Pn=rn.height*In,Wn=rn.parentScale,kn=mn.thickness/2;pn(rn,Et,!0),pn(rn,wt,Math.round(Hn)),pn(rn,Pt,Math.round(Pn));const{paths:Qt,rect:kt,rotation:Bt}=mn;for(let{bezier:Nn}of Qt){Nn=dn(sn=$n,Xn,ru).call(sn,Nn,kt,Bt);const Bn=[];rn.paths.push(Bn);let Un=Wn*(Nn[0]-kn),er=Wn*(Nn[1]-kn);for(let Kn=2,Zn=Nn.length;Kn<Zn;Kn+=6){const ir=Wn*(Nn[Kn]-kn),tr=Wn*(Nn[Kn+1]-kn),ar=Wn*(Nn[Kn+2]-kn),sr=Wn*(Nn[Kn+3]-kn),or=Wn*(Nn[Kn+4]-kn),dr=Wn*(Nn[Kn+5]-kn);Bn.push([[Un,er],[ir,tr],[ar,sr],[or,dr]]),Un=or,er=dr}const Gn=dn(this,Cn,nu).call(this,Bn);rn.bezierPath2D.push(Gn)}const en=dn(hn=rn,zn,qs).call(hn);return pn(rn,pt,Math.max(et.AnnotationEditor.MIN_SIZE,en[2]-en[0])),pn(rn,ft,Math.max(et.AnnotationEditor.MIN_SIZE,en[3]-en[1])),dn(En=rn,On,Gs).call(En,Hn,Pn),rn}serialize(){if(this.isEmpty())return null;const mn=this.getRect(0,0),nn=et.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:a.AnnotationEditorType.INK,color:nn,thickness:this.thickness,opacity:this.opacity,paths:dn(this,Qn,iu).call(this,this.scaleFactor/this.parentScale,this.translationX,this.translationY,mn),pageIndex:this.pageIndex,rect:mn,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}};ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,St=new WeakMap,Et=new WeakMap,vt=new WeakMap,bt=new WeakMap,Tt=new WeakMap,wt=new WeakMap,Pt=new WeakMap,At=new WeakMap,xt=new WeakSet,Gl=function(mn){const nn=this.thickness;this.addCommands({cmd:()=>{this.thickness=mn,dn(this,ln,ao).call(this)},undo:()=>{this.thickness=nn,dn(this,ln,ao).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})},Rt=new WeakSet,Kl=function(mn){const nn=this.color;this.addCommands({cmd:()=>{this.color=mn,dn(this,Yt,Mr).call(this)},undo:()=>{this.color=nn,dn(this,Yt,Mr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})},Nt=new WeakSet,Xl=function(mn){mn/=100;const nn=this.opacity;this.addCommands({cmd:()=>{this.opacity=mn,dn(this,Yt,Mr).call(this)},undo:()=>{this.opacity=nn,dn(this,Yt,Mr).call(this)},mustExec:!0,type:a.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})},qt=new WeakSet,Yl=function(){const{parentRotation:mn,parentDimensions:[nn,an]}=this;switch(mn){case 90:return[0,an,an,nn];case 180:return[nn,an,nn,an];case 270:return[nn,0,an,nn];default:return[0,0,nn,an]}},Zt=new WeakSet,Ws=function(){const{ctx:mn,color:nn,opacity:an,thickness:rn,parentScale:An,scaleFactor:In}=this;mn.lineWidth=rn*An/In,mn.lineCap="round",mn.lineJoin="round",mn.miterLimit=10,mn.strokeStyle=`${nn}${(0,dt.opacityToHex)(an)}`},Wt=new WeakSet,Ql=function(mn,nn){this.canvas.addEventListener("contextmenu",ot.noContextMenu),this.canvas.addEventListener("pointerleave",Ct(this,gt)),this.canvas.addEventListener("pointermove",Ct(this,mt)),this.canvas.addEventListener("pointerup",Ct(this,_t)),this.canvas.removeEventListener("pointerdown",Ct(this,yt)),this.isEditing=!0,Ct(this,bt)||(pn(this,bt,!0),dn(this,Dn,so).call(this),this.thickness||(this.thickness=$n._defaultThickness),this.color||(this.color=$n._defaultColor||et.AnnotationEditor._defaultLineColor),this.opacity??(this.opacity=$n._defaultOpacity)),this.currentPath.push([mn,nn]),pn(this,vt,!1),dn(this,Zt,Ws).call(this),pn(this,At,()=>{dn(this,Mt,_c).call(this),Ct(this,At)&&window.requestAnimationFrame(Ct(this,At))}),window.requestAnimationFrame(Ct(this,At))},Gt=new WeakSet,zs=function(mn,nn){const[an,rn]=this.currentPath.at(-1);if(this.currentPath.length>1&&mn===an&&nn===rn)return;const An=this.currentPath;let In=Ct(this,St);if(An.push([mn,nn]),pn(this,vt,!0),An.length<=2){In.moveTo(...An[0]),In.lineTo(mn,nn);return}An.length===3&&(pn(this,St,In=new Path2D),In.moveTo(...An[0])),dn(this,Lt,eu).call(this,In,...An.at(-3),...An.at(-2),mn,nn)},on=new WeakSet,Jl=function(){if(this.currentPath.length===0)return;const mn=this.currentPath.at(-1);Ct(this,St).lineTo(...mn)},Ut=new WeakSet,Zl=function(mn,nn){pn(this,At,null),mn=Math.min(Math.max(mn,0),this.canvas.width),nn=Math.min(Math.max(nn,0),this.canvas.height),dn(this,Gt,zs).call(this,mn,nn),dn(this,on,Jl).call(this);let an;if(this.currentPath.length!==1)an=dn(this,zt,tu).call(this);else{const Pn=[mn,nn];an=[[Pn,Pn.slice(),Pn.slice(),Pn]]}const rn=Ct(this,St),An=this.currentPath;this.currentPath=[],pn(this,St,new Path2D);const In=()=>{this.allRawPaths.push(An),this.paths.push(an),this.bezierPath2D.push(rn),this.rebuild()},Hn=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(dn(this,Tn,Yo).call(this),dn(this,Sn,Qo).call(this)),dn(this,ln,ao).call(this))};this.addCommands({cmd:In,undo:Hn,mustExec:!0})},Mt=new WeakSet,_c=function(){if(!Ct(this,vt))return;pn(this,vt,!1);const mn=Math.ceil(this.thickness*this.parentScale),nn=this.currentPath.slice(-3),an=nn.map(In=>In[0]),rn=nn.map(In=>In[1]);Math.min(...an)-mn,Math.max(...an)+mn,Math.min(...rn)-mn,Math.max(...rn)+mn;const{ctx:An}=this;An.save(),An.clearRect(0,0,this.canvas.width,this.canvas.height);for(const In of this.bezierPath2D)An.stroke(In);An.stroke(Ct(this,St)),An.restore()},Lt=new WeakSet,eu=function(mn,nn,an,rn,An,In,Hn){const Pn=(nn+rn)/2,Wn=(an+An)/2,kn=(rn+In)/2,Qt=(An+Hn)/2;mn.bezierCurveTo(Pn+2*(rn-Pn)/3,Wn+2*(An-Wn)/3,kn+2*(rn-kn)/3,Qt+2*(An-Qt)/3,kn,Qt)},zt=new WeakSet,tu=function(){const mn=this.currentPath;if(mn.length<=2)return[[mn[0],mn[0],mn.at(-1),mn.at(-1)]];const nn=[];let an,[rn,An]=mn[0];for(an=1;an<mn.length-2;an++){const[kt,Bt]=mn[an],[en,sn]=mn[an+1],hn=(kt+en)/2,En=(Bt+sn)/2,Nn=[rn+2*(kt-rn)/3,An+2*(Bt-An)/3],Bn=[hn+2*(kt-hn)/3,En+2*(Bt-En)/3];nn.push([[rn,An],Nn,Bn,[hn,En]]),[rn,An]=[hn,En]}const[In,Hn]=mn[an],[Pn,Wn]=mn[an+1],kn=[rn+2*(In-rn)/3,An+2*(Hn-An)/3],Qt=[Pn+2*(In-Pn)/3,Wn+2*(Hn-Wn)/3];return nn.push([[rn,An],kn,Qt,[Pn,Wn]]),nn},Yt=new WeakSet,Mr=function(){if(this.isEmpty()){dn(this,fn,Jo).call(this);return}dn(this,Zt,Ws).call(this);const{canvas:mn,ctx:nn}=this;nn.setTransform(1,0,0,1,0,0),nn.clearRect(0,0,mn.width,mn.height),dn(this,fn,Jo).call(this);for(const an of this.bezierPath2D)nn.stroke(an)},gn=new WeakSet,Hs=function(mn){this.canvas.removeEventListener("pointerleave",Ct(this,gt)),this.canvas.removeEventListener("pointermove",Ct(this,mt)),this.canvas.removeEventListener("pointerup",Ct(this,_t)),this.canvas.addEventListener("pointerdown",Ct(this,yt)),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",ot.noContextMenu)},10),dn(this,Ut,Zl).call(this,mn.offsetX,mn.offsetY),this.addToAnnotationStorage(),this.setInBackground()},Tn=new WeakSet,Yo=function(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",et.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(mn=>{var nn;return(nn=this.canvas)==null?void 0:nn.setAttribute("aria-label",mn)}),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")},Sn=new WeakSet,Qo=function(){pn(this,Tt,new ResizeObserver(mn=>{const nn=mn[0].contentRect;nn.width&&nn.height&&this.setDimensions(nn.width,nn.height)})),Ct(this,Tt).observe(this.div)},Dn=new WeakSet,so=function(){if(!Ct(this,bt))return;const[mn,nn]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*mn),this.canvas.height=Math.ceil(this.height*nn),dn(this,fn,Jo).call(this)},On=new WeakSet,Gs=function(mn,nn){const an=dn(this,vn,Zo).call(this),rn=(mn-an)/Ct(this,pt),An=(nn-an)/Ct(this,ft);this.scaleFactor=Math.min(rn,An)},fn=new WeakSet,Jo=function(){const mn=dn(this,vn,Zo).call(this)/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+mn,this.translationY*this.scaleFactor+mn)},Cn=new WeakSet,nu=function(mn){const nn=new Path2D;for(let an=0,rn=mn.length;an<rn;an++){const[An,In,Hn,Pn]=mn[an];an===0&&nn.moveTo(...An),nn.bezierCurveTo(In[0],In[1],Hn[0],Hn[1],Pn[0],Pn[1])}return nn},Vn=new WeakSet,Ks=function(mn,nn,an){const[rn,An,In,Hn]=nn;switch(an){case 0:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2)mn[Pn]+=rn,mn[Pn+1]=Hn-mn[Pn+1];break;case 90:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2){const kn=mn[Pn];mn[Pn]=mn[Pn+1]+rn,mn[Pn+1]=kn+An}break;case 180:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2)mn[Pn]=In-mn[Pn],mn[Pn+1]+=An;break;case 270:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2){const kn=mn[Pn];mn[Pn]=In-mn[Pn+1],mn[Pn+1]=Hn-kn}break;default:throw new Error("Invalid rotation")}return mn},Xn=new WeakSet,ru=function(mn,nn,an){const[rn,An,In,Hn]=nn;switch(an){case 0:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2)mn[Pn]-=rn,mn[Pn+1]=Hn-mn[Pn+1];break;case 90:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2){const kn=mn[Pn];mn[Pn]=mn[Pn+1]-An,mn[Pn+1]=kn-rn}break;case 180:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2)mn[Pn]=In-mn[Pn],mn[Pn+1]-=An;break;case 270:for(let Pn=0,Wn=mn.length;Pn<Wn;Pn+=2){const kn=mn[Pn];mn[Pn]=Hn-mn[Pn+1],mn[Pn+1]=In-kn}break;default:throw new Error("Invalid rotation")}return mn},Qn=new WeakSet,iu=function(mn,nn,an,rn){var Wn,kn;const An=[],In=this.thickness/2,Hn=mn*nn+In,Pn=mn*an+In;for(const Qt of this.paths){const kt=[],Bt=[];for(let en=0,sn=Qt.length;en<sn;en++){const[hn,En,Nn,Bn]=Qt[en],Un=mn*hn[0]+Hn,er=mn*hn[1]+Pn,Gn=mn*En[0]+Hn,Kn=mn*En[1]+Pn,Zn=mn*Nn[0]+Hn,ir=mn*Nn[1]+Pn,tr=mn*Bn[0]+Hn,ar=mn*Bn[1]+Pn;en===0&&(kt.push(Un,er),Bt.push(Un,er)),kt.push(Gn,Kn,Zn,ir,tr,ar),Bt.push(Gn,Kn),en===sn-1&&Bt.push(tr,ar)}An.push({bezier:dn(Wn=$n,Vn,Ks).call(Wn,kt,rn,this.rotation),points:dn(kn=$n,Vn,Ks).call(kn,Bt,rn,this.rotation)})}return An},zn=new WeakSet,qs=function(){let mn=1/0,nn=-1/0,an=1/0,rn=-1/0;for(const An of this.paths)for(const[In,Hn,Pn,Wn]of An){const kn=a.Util.bezierBoundingBox(...In,...Hn,...Pn,...Wn);mn=Math.min(mn,kn[0]),an=Math.min(an,kn[1]),nn=Math.max(nn,kn[2]),rn=Math.max(rn,kn[3])}return[mn,an,nn,rn]},vn=new WeakSet,Zo=function(){return Ct(this,Et)?Math.ceil(this.thickness*this.parentScale):0},ln=new WeakSet,ao=function(mn=!1){if(this.isEmpty())return;if(!Ct(this,Et)){dn(this,Yt,Mr).call(this);return}const nn=dn(this,zn,qs).call(this),an=dn(this,vn,Zo).call(this);pn(this,pt,Math.max(et.AnnotationEditor.MIN_SIZE,nn[2]-nn[0])),pn(this,ft,Math.max(et.AnnotationEditor.MIN_SIZE,nn[3]-nn[1]));const rn=Math.ceil(an+Ct(this,pt)*this.scaleFactor),An=Math.ceil(an+Ct(this,ft)*this.scaleFactor),[In,Hn]=this.parentDimensions;this.width=rn/In,this.height=An/Hn,this.setAspectRatio(rn,An);const Pn=this.translationX,Wn=this.translationY;this.translationX=-nn[0],this.translationY=-nn[1],dn(this,Dn,so).call(this),dn(this,Yt,Mr).call(this),pn(this,wt,rn),pn(this,Pt,An),this.setDims(rn,An);const kn=mn?an/this.scaleFactor/2:0;this.translate(Pn-this.translationX-kn,Wn-this.translationY-kn)},tn($n,Cn),tn($n,Vn),tn($n,Xn),ur($n,"_defaultColor",null),ur($n,"_defaultOpacity",1),ur($n,"_defaultThickness",1),ur($n,"_type","ink");let ht=$n;i.InkEditor=ht},(o,i,s)=>{var ht,ft,pt,mt,gt,_t,yt,St,Et,vt,bt,wo,wt,Ro,At,es,Ot,Xs,Dt,ou,Kt,su,jt,Ys,Ht,ts,Ft,au;Object.defineProperty(i,"__esModule",{value:!0}),i.StampEditor=void 0;var a=s(1),et=s(4),tt=s(6),ot=s(29);const Jt=class Jt extends et.AnnotationEditor{constructor(Ut){super({...Ut,name:"stampEditor"});tn(this,bt);tn(this,wt);tn(this,At);tn(this,Ot);tn(this,Dt);tn(this,Kt);tn(this,jt);tn(this,Ht);tn(this,Ft);tn(this,ht,null);tn(this,ft,null);tn(this,pt,null);tn(this,mt,null);tn(this,gt,null);tn(this,_t,null);tn(this,yt,null);tn(this,St,null);tn(this,Et,!1);tn(this,vt,!1);pn(this,mt,Ut.bitmapUrl),pn(this,gt,Ut.bitmapFile)}static initialize(Ut){et.AnnotationEditor.initialize(Ut)}static get supportedTypes(){const Ut=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,a.shadow)(this,"supportedTypes",Ut.map(It=>`image/${It}`))}static get supportedTypesStr(){return(0,a.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(Ut){return this.supportedTypes.includes(Ut)}static paste(Ut,It){It.pasteEditor(a.AnnotationEditorType.STAMP,{bitmapFile:Ut.getAsFile()})}remove(){var Ut,It;Ct(this,ft)&&(pn(this,ht,null),this._uiManager.imageManager.deleteId(Ct(this,ft)),(Ut=Ct(this,_t))==null||Ut.remove(),pn(this,_t,null),(It=Ct(this,yt))==null||It.disconnect(),pn(this,yt,null)),super.remove()}rebuild(){if(!this.parent){Ct(this,ft)&&dn(this,At,es).call(this);return}super.rebuild(),this.div!==null&&(Ct(this,ft)&&dn(this,At,es).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(Ct(this,pt)||Ct(this,ht)||Ct(this,mt)||Ct(this,gt))}get isResizable(){return!0}render(){if(this.div)return this.div;let Ut,It;if(this.width&&(Ut=this.x,It=this.y),super.render(),this.div.hidden=!0,Ct(this,ht)?dn(this,Ot,Xs).call(this):dn(this,At,es).call(this),this.width){const[Mt,$t]=this.parentDimensions;this.setAt(Ut*Mt,It*$t,this.width*Mt,this.height*$t)}return this.div}static deserialize(Ut,It,Mt){if(Ut instanceof ot.StampAnnotationElement)return null;const $t=super.deserialize(Ut,It,Mt),{rect:Lt,bitmapUrl:Vt,bitmapId:zt,isSvg:Xt,accessibilityData:Yt}=Ut;zt&&Mt.imageManager.isValidId(zt)?pn($t,ft,zt):pn($t,mt,Vt),pn($t,Et,Xt);const[un,gn]=$t.pageDimensions;return $t.width=(Lt[2]-Lt[0])/un,$t.height=(Lt[3]-Lt[1])/gn,Yt&&($t.altTextData=Yt),$t}serialize(Ut=!1,It=null){if(this.isEmpty())return null;const Mt={annotationType:a.AnnotationEditorType.STAMP,bitmapId:Ct(this,ft),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:Ct(this,Et),structTreeParentId:this._structTreeParentId};if(Ut)return Mt.bitmapUrl=dn(this,Ht,ts).call(this,!0),Mt.accessibilityData=this.altTextData,Mt;const{decorative:$t,altText:Lt}=this.altTextData;if(!$t&&Lt&&(Mt.accessibilityData={type:"Figure",alt:Lt}),It===null)return Mt;It.stamps||(It.stamps=new Map);const Vt=Ct(this,Et)?(Mt.rect[2]-Mt.rect[0])*(Mt.rect[3]-Mt.rect[1]):null;if(!It.stamps.has(Ct(this,ft)))It.stamps.set(Ct(this,ft),{area:Vt,serialized:Mt}),Mt.bitmap=dn(this,Ht,ts).call(this,!1);else if(Ct(this,Et)){const zt=It.stamps.get(Ct(this,ft));Vt>zt.area&&(zt.area=Vt,zt.serialized.bitmap.close(),zt.serialized.bitmap=dn(this,Ht,ts).call(this,!1))}return Mt}};ht=new WeakMap,ft=new WeakMap,pt=new WeakMap,mt=new WeakMap,gt=new WeakMap,_t=new WeakMap,yt=new WeakMap,St=new WeakMap,Et=new WeakMap,vt=new WeakMap,bt=new WeakSet,wo=function(Ut,It=!1){if(!Ut){this.remove();return}pn(this,ht,Ut.bitmap),It||(pn(this,ft,Ut.id),pn(this,Et,Ut.isSvg)),dn(this,Ot,Xs).call(this)},wt=new WeakSet,Ro=function(){pn(this,pt,null),this._uiManager.enableWaiting(!1),Ct(this,_t)&&this.div.focus()},At=new WeakSet,es=function(){if(Ct(this,ft)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(Ct(this,ft)).then(It=>dn(this,bt,wo).call(this,It,!0)).finally(()=>dn(this,wt,Ro).call(this));return}if(Ct(this,mt)){const It=Ct(this,mt);pn(this,mt,null),this._uiManager.enableWaiting(!0),pn(this,pt,this._uiManager.imageManager.getFromUrl(It).then(Mt=>dn(this,bt,wo).call(this,Mt)).finally(()=>dn(this,wt,Ro).call(this)));return}if(Ct(this,gt)){const It=Ct(this,gt);pn(this,gt,null),this._uiManager.enableWaiting(!0),pn(this,pt,this._uiManager.imageManager.getFromFile(It).then(Mt=>dn(this,bt,wo).call(this,Mt)).finally(()=>dn(this,wt,Ro).call(this)));return}const Ut=document.createElement("input");Ut.type="file",Ut.accept=Jt.supportedTypesStr,pn(this,pt,new Promise(It=>{Ut.addEventListener("change",async()=>{if(!Ut.files||Ut.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const Mt=await this._uiManager.imageManager.getFromFile(Ut.files[0]);dn(this,bt,wo).call(this,Mt)}It()}),Ut.addEventListener("cancel",()=>{this.remove(),It()})}).finally(()=>dn(this,wt,Ro).call(this))),Ut.click()},Ot=new WeakSet,Xs=function(){const{div:Ut}=this;let{width:It,height:Mt}=Ct(this,ht);const[$t,Lt]=this.pageDimensions,Vt=.75;if(this.width)It=this.width*$t,Mt=this.height*Lt;else if(It>Vt*$t||Mt>Vt*Lt){const un=Math.min(Vt*$t/It,Vt*Lt/Mt);It*=un,Mt*=un}const[zt,Xt]=this.parentDimensions;this.setDims(It*zt/$t,Mt*Xt/Lt),this._uiManager.enableWaiting(!1);const Yt=pn(this,_t,document.createElement("canvas"));Ut.append(Yt),Ut.hidden=!1,dn(this,jt,Ys).call(this,It,Mt),dn(this,Ft,au).call(this),Ct(this,vt)||(this.parent.addUndoableEditor(this),pn(this,vt,!0)),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()},Dt=new WeakSet,ou=function(Ut,It){var Vt;const[Mt,$t]=this.parentDimensions;this.width=Ut/Mt,this.height=It/$t,this.setDims(Ut,It),(Vt=this._initialOptions)!=null&&Vt.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,Ct(this,St)!==null&&clearTimeout(Ct(this,St)),pn(this,St,setTimeout(()=>{pn(this,St,null),dn(this,jt,Ys).call(this,Ut,It)},200))},Kt=new WeakSet,su=function(Ut,It){const{width:Mt,height:$t}=Ct(this,ht);let Lt=Mt,Vt=$t,zt=Ct(this,ht);for(;Lt>2*Ut||Vt>2*It;){const Xt=Lt,Yt=Vt;Lt>2*Ut&&(Lt=Lt>=16384?Math.floor(Lt/2)-1:Math.ceil(Lt/2)),Vt>2*It&&(Vt=Vt>=16384?Math.floor(Vt/2)-1:Math.ceil(Vt/2));const un=new OffscreenCanvas(Lt,Vt);un.getContext("2d").drawImage(zt,0,0,Xt,Yt,0,0,Lt,Vt),zt=un.transferToImageBitmap()}return zt},jt=new WeakSet,Ys=function(Ut,It){Ut=Math.ceil(Ut),It=Math.ceil(It);const Mt=Ct(this,_t);if(!Mt||Mt.width===Ut&&Mt.height===It)return;Mt.width=Ut,Mt.height=It;const $t=Ct(this,Et)?Ct(this,ht):dn(this,Kt,su).call(this,Ut,It),Lt=Mt.getContext("2d");Lt.filter=this._uiManager.hcmFilter,Lt.drawImage($t,0,0,$t.width,$t.height,0,0,Ut,It)},Ht=new WeakSet,ts=function(Ut){if(Ut){if(Ct(this,Et)){const $t=this._uiManager.imageManager.getSvgUrl(Ct(this,ft));if($t)return $t}const It=document.createElement("canvas");return{width:It.width,height:It.height}=Ct(this,ht),It.getContext("2d").drawImage(Ct(this,ht),0,0),It.toDataURL()}if(Ct(this,Et)){const[It,Mt]=this.pageDimensions,$t=Math.round(this.width*It*tt.PixelsPerInch.PDF_TO_CSS_UNITS),Lt=Math.round(this.height*Mt*tt.PixelsPerInch.PDF_TO_CSS_UNITS),Vt=new OffscreenCanvas($t,Lt);return Vt.getContext("2d").drawImage(Ct(this,ht),0,0,Ct(this,ht).width,Ct(this,ht).height,0,0,$t,Lt),Vt.transferToImageBitmap()}return structuredClone(Ct(this,ht))},Ft=new WeakSet,au=function(){pn(this,yt,new ResizeObserver(Ut=>{const It=Ut[0].contentRect;It.width&&It.height&&dn(this,Dt,ou).call(this,It.width,It.height)})),Ct(this,yt).observe(this.div)},ur(Jt,"_type","stamp");let dt=Jt;i.StampEditor=dt}],__webpack_module_cache__={};function __w_pdfjs_require__(o){var i=__webpack_module_cache__[o];if(i!==void 0)return i.exports;var s=__webpack_module_cache__[o]={exports:{}};return __webpack_modules__[o](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var o=__webpack_exports__;Object.defineProperty(o,"__esModule",{value:!0}),Object.defineProperty(o,"AbortException",{enumerable:!0,get:function(){return i.AbortException}}),Object.defineProperty(o,"AnnotationEditorLayer",{enumerable:!0,get:function(){return tt.AnnotationEditorLayer}}),Object.defineProperty(o,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return i.AnnotationEditorParamsType}}),Object.defineProperty(o,"AnnotationEditorType",{enumerable:!0,get:function(){return i.AnnotationEditorType}}),Object.defineProperty(o,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return ot.AnnotationEditorUIManager}}),Object.defineProperty(o,"AnnotationLayer",{enumerable:!0,get:function(){return dt.AnnotationLayer}}),Object.defineProperty(o,"AnnotationMode",{enumerable:!0,get:function(){return i.AnnotationMode}}),Object.defineProperty(o,"CMapCompressionType",{enumerable:!0,get:function(){return i.CMapCompressionType}}),Object.defineProperty(o,"DOMSVGFactory",{enumerable:!0,get:function(){return a.DOMSVGFactory}}),Object.defineProperty(o,"FeatureTest",{enumerable:!0,get:function(){return i.FeatureTest}}),Object.defineProperty(o,"GlobalWorkerOptions",{enumerable:!0,get:function(){return ht.GlobalWorkerOptions}}),Object.defineProperty(o,"ImageKind",{enumerable:!0,get:function(){return i.ImageKind}}),Object.defineProperty(o,"InvalidPDFException",{enumerable:!0,get:function(){return i.InvalidPDFException}}),Object.defineProperty(o,"MissingPDFException",{enumerable:!0,get:function(){return i.MissingPDFException}}),Object.defineProperty(o,"OPS",{enumerable:!0,get:function(){return i.OPS}}),Object.defineProperty(o,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(o,"PDFDateString",{enumerable:!0,get:function(){return a.PDFDateString}}),Object.defineProperty(o,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(o,"PasswordResponses",{enumerable:!0,get:function(){return i.PasswordResponses}}),Object.defineProperty(o,"PermissionFlag",{enumerable:!0,get:function(){return i.PermissionFlag}}),Object.defineProperty(o,"PixelsPerInch",{enumerable:!0,get:function(){return a.PixelsPerInch}}),Object.defineProperty(o,"PromiseCapability",{enumerable:!0,get:function(){return i.PromiseCapability}}),Object.defineProperty(o,"RenderingCancelledException",{enumerable:!0,get:function(){return a.RenderingCancelledException}}),Object.defineProperty(o,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(o,"UnexpectedResponseException",{enumerable:!0,get:function(){return i.UnexpectedResponseException}}),Object.defineProperty(o,"Util",{enumerable:!0,get:function(){return i.Util}}),Object.defineProperty(o,"VerbosityLevel",{enumerable:!0,get:function(){return i.VerbosityLevel}}),Object.defineProperty(o,"XfaLayer",{enumerable:!0,get:function(){return ft.XfaLayer}}),Object.defineProperty(o,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(o,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return i.createValidAbsoluteUrl}}),Object.defineProperty(o,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(o,"getFilenameFromUrl",{enumerable:!0,get:function(){return a.getFilenameFromUrl}}),Object.defineProperty(o,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return a.getPdfFilenameFromUrl}}),Object.defineProperty(o,"getXfaPageViewport",{enumerable:!0,get:function(){return a.getXfaPageViewport}}),Object.defineProperty(o,"isDataScheme",{enumerable:!0,get:function(){return a.isDataScheme}}),Object.defineProperty(o,"isPdfFile",{enumerable:!0,get:function(){return a.isPdfFile}}),Object.defineProperty(o,"loadScript",{enumerable:!0,get:function(){return a.loadScript}}),Object.defineProperty(o,"noContextMenu",{enumerable:!0,get:function(){return a.noContextMenu}}),Object.defineProperty(o,"normalizeUnicode",{enumerable:!0,get:function(){return i.normalizeUnicode}}),Object.defineProperty(o,"renderTextLayer",{enumerable:!0,get:function(){return et.renderTextLayer}}),Object.defineProperty(o,"setLayerDimensions",{enumerable:!0,get:function(){return a.setLayerDimensions}}),Object.defineProperty(o,"shadow",{enumerable:!0,get:function(){return i.shadow}}),Object.defineProperty(o,"updateTextLayer",{enumerable:!0,get:function(){return et.updateTextLayer}}),Object.defineProperty(o,"version",{enumerable:!0,get:function(){return s.version}});var i=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),a=__w_pdfjs_require__(6),et=__w_pdfjs_require__(26),tt=__w_pdfjs_require__(27),ot=__w_pdfjs_require__(5),dt=__w_pdfjs_require__(29),ht=__w_pdfjs_require__(14),ft=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule,pdfjs$1=pdfjs;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function o(a,et,tt,ot,dt,ht){if(ht!==ReactPropTypesSecret){var ft=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw ft.name="Invariant Violation",ft}}o.isRequired=o;function i(){return o}var s={array:o,bigint:o,bool:o,func:o,number:o,object:o,string:o,symbol:o,any:o,arrayOf:i,element:o,elementType:o,instanceOf:i,node:o,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(o,i,s){if(s||arguments.length===2)for(var a=0,et=i.length,tt;a<et;a++)(tt||!(a in i))&&(tt||(tt=Array.prototype.slice.call(i,0,a)),tt[a]=i[a]);return o.concat(tt||Array.prototype.slice.call(i))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(o,i){var s={};return allEvents.forEach(function(a){var et=o[a];et&&(i?s[a]=function(tt){return et(tt,i(a))}:s[a]=et)}),s}function makeCancellablePromise(o){var i=!1,s=new Promise(function(a,et){o.then(function(tt){return!i&&a(tt)}).catch(function(tt){return!i&&et(tt)})});return{promise:s,cancel:function(){i=!0}}}function r(o){var i,s,a="";if(typeof o=="string"||typeof o=="number")a+=o;else if(typeof o=="object")if(Array.isArray(o)){var et=o.length;for(i=0;i<et;i++)o[i]&&(s=r(o[i]))&&(a&&(a+=" "),a+=s)}else for(s in o)o[s]&&(a&&(a+=" "),a+=s);return a}function clsx(){for(var o,i,s=0,a="",et=arguments.length;s<et;s++)(o=arguments[s])&&(i=r(o))&&(a&&(a+=" "),a+=i);return a}var isProduction=!0,prefix$1="Invariant failed";function invariant(o,i){if(!o){if(isProduction)throw new Error(prefix$1);var s=typeof i=="function"?i():i,a=s?"".concat(prefix$1,": ").concat(s):prefix$1;throw new Error(a)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(o,i,s){for(s of o.keys())if(dequal(s,i))return s}function dequal(o,i){var s,a,et;if(o===i)return!0;if(o&&i&&(s=o.constructor)===i.constructor){if(s===Date)return o.getTime()===i.getTime();if(s===RegExp)return o.toString()===i.toString();if(s===Array){if((a=o.length)===i.length)for(;a--&&dequal(o[a],i[a]););return a===-1}if(s===Set){if(o.size!==i.size)return!1;for(a of o)if(et=a,et&&typeof et=="object"&&(et=find(i,et),!et)||!i.has(et))return!1;return!0}if(s===Map){if(o.size!==i.size)return!1;for(a of o)if(et=a[0],et&&typeof et=="object"&&(et=find(i,et),!et)||!dequal(a[1],i.get(et)))return!1;return!0}if(s===ArrayBuffer)o=new Uint8Array(o),i=new Uint8Array(i);else if(s===DataView){if((a=o.byteLength)===i.byteLength)for(;a--&&o.getInt8(a)===i.getInt8(a););return a===-1}if(ArrayBuffer.isView(o)){if((a=o.byteLength)===i.byteLength)for(;a--&&o[a]===i[a];);return a===-1}if(!s||typeof o=="object"){a=0;for(s in o)if(has.call(o,s)&&++a&&!has.call(i,s)||!(s in i)||!dequal(o[s],i[s]))return!1;return Object.keys(i).length===a}}return o!==o&&i!==i}const DocumentContext=reactExports.createContext(null);function Message$1({children:o,type:i}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${i}`},o)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(i){this.pdfDocument=i}setViewer(i){this.pdfViewer=i}setExternalLinkRel(i){this.externalLinkRel=i}setExternalLinkTarget(i){this.externalLinkTarget=i}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(i){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=i}get rotation(){return 0}set rotation(i){}goToDestination(i){return new Promise(s=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(i,"Destination is not specified."),typeof i=="string"?this.pdfDocument.getDestination(i).then(s):Array.isArray(i)?s(i):i.then(s)}).then(s=>{invariant(Array.isArray(s),`"${s}" is not a valid destination array.`);const a=s[0];new Promise(et=>{invariant(this.pdfDocument,"PDF document not loaded."),a instanceof Object?this.pdfDocument.getPageIndex(a).then(tt=>{et(tt)}).catch(()=>{invariant(!1,`"${a}" is not a valid page reference.`)}):typeof a=="number"?et(a):invariant(!1,`"${a}" is not a valid destination reference.`)}).then(et=>{const tt=et+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(tt>=1&&tt<=this.pagesCount,`"${tt}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:et,pageNumber:tt})})})}navigateTo(i){this.goToDestination(i)}goToPage(i){const s=i-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(i>=1&&i<=this.pagesCount,`"${i}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:i})}addLinkAttributes(i,s,a){i.href=s,i.rel=this.externalLinkRel||DEFAULT_LINK_REL,i.target=a?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PasswordResponses$1=PasswordResponses,isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(o){return typeof o<"u"}function isProvided(o){return isDefined(o)&&o!==null}function isString(o){return typeof o=="string"}function isArrayBuffer(o){return o instanceof ArrayBuffer}function isBlob(o){return invariant(isBrowser,"isBlob can only be used in a browser environment"),o instanceof Blob}function isDataURI(o){return isString(o)&&/^data:/.test(o)}function dataURItoByteString(o){invariant(isDataURI(o),"Invalid data URI.");const[i="",s=""]=o.split(",");return i.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(o){o&&o.cancel&&o.cancel()}function makePageCallback(o,i){return Object.defineProperty(o,"width",{get(){return this.view[2]*i},configurable:!0}),Object.defineProperty(o,"height",{get(){return this.view[3]*i},configurable:!0}),Object.defineProperty(o,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(o,"originalHeight",{get(){return this.view[3]},configurable:!0}),o}function isCancelException(o){return o.name==="RenderingCancelledException"}function loadFromFile(o){return new Promise((i,s)=>{const a=new FileReader;a.onload=()=>{if(!a.result)return s(new Error("Error while reading a file."));i(a.result)},a.onerror=et=>{if(!et.target)return s(new Error("Error while reading a file."));const{error:tt}=et.target;if(!tt)return s(new Error("Error while reading a file."));switch(tt.code){case tt.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case tt.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case tt.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},a.readAsArrayBuffer(o)})}function reducer(o,i){switch(i.type){case"RESOLVE":return{value:i.value,error:void 0};case"REJECT":return{value:!1,error:i.error};case"RESET":return{value:void 0,error:void 0};default:return o}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs$1,eventProps=(()=>{const o={};return allEvents.forEach(i=>{o[i]=PropTypes.func}),o})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function o(i,s,a){const{[s]:et,pageNumber:tt,pdf:ot}=i;if(!isDefined(ot))return null;if(isDefined(et)){if(typeof et!="number")return new Error(`\`${s}\` of type \`${typeof et}\` supplied to \`${a}\`, expected \`number\`.`);if(et<0)return new Error(`Expected \`${s}\` to be greater or equal to 0.`);const{numPages:dt}=ot;if(et+1>dt)return new Error(`Expected \`${s}\` to be less or equal to ${dt-1}.`)}else if(!isDefined(tt))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${a}\`.`);return null},isPageNumber=function o(i,s,a){const{[s]:et,pageIndex:tt,pdf:ot}=i;if(!isDefined(ot))return null;if(isDefined(et)){if(typeof et!="number")return new Error(`\`${s}\` of type \`${typeof et}\` supplied to \`${a}\`, expected \`number\`.`);if(et<1)return new Error(`Expected \`${s}\` to be greater or equal to 1.`);const{numPages:dt}=ot;if(et>dt)return new Error(`Expected \`${s}\` to be less or equal to ${dt}.`)}else if(!isDefined(tt))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${a}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(o,i,s,a){function et(tt){return tt instanceof s?tt:new s(function(ot){ot(tt)})}return new(s||(s=Promise))(function(tt,ot){function dt(pt){try{ft(a.next(pt))}catch(mt){ot(mt)}}function ht(pt){try{ft(a.throw(pt))}catch(mt){ot(mt)}}function ft(pt){pt.done?tt(pt.value):et(pt.value).then(dt,ht)}ft((a=a.apply(o,i||[])).next())})},__rest$1=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const{PDFDataRangeTransport}=pdfjs$1,defaultOnPassword=(o,i)=>{switch(i){case PasswordResponses$1.NEED_PASSWORD:{const s=prompt("Enter the password to open this PDF file.");o(s);break}case PasswordResponses$1.INCORRECT_PASSWORD:{const s=prompt("Invalid password. Please try again.");o(s);break}}};function isParameterObject(o){return typeof o=="object"&&o!==null&&("data"in o||"range"in o||"url"in o)}const Document=reactExports.forwardRef(function o(i,s){var{children:a,className:et,error:tt="Failed to load PDF file.",externalLinkRel:ot,externalLinkTarget:dt,file:ht,inputRef:ft,imageResourcesPath:pt,loading:mt="Loading PDF…",noData:gt="No PDF file specified.",onItemClick:_t,onLoadError:yt,onLoadProgress:St,onLoadSuccess:Et,onPassword:vt=defaultOnPassword,onSourceError:bt,onSourceSuccess:Tt,options:wt,renderMode:Pt,rotate:At}=i,xt=__rest$1(i,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Ot,Rt]=useResolver(),{value:Dt,error:Nt}=Ot,[Kt,qt]=useResolver(),{value:jt,error:Zt}=Kt,Ht=reactExports.useRef(new LinkService),Wt=reactExports.useRef([]),Ft=reactExports.useRef(),Gt=reactExports.useRef();reactExports.useEffect(()=>{ht&&ht!==Ft.current&&isParameterObject(ht)&&(warning$1(!dequal(ht,Ft.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),Ft.current=ht)},[ht]),reactExports.useEffect(()=>{wt&&wt!==Gt.current&&(warning$1(!dequal(wt,Gt.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),Gt.current=wt)},[wt]);const Jt=reactExports.useRef({scrollPageIntoView:Rn=>{const{dest:Sn,pageNumber:Fn,pageIndex:Dn=Fn-1}=Rn;if(_t){_t({dest:Sn,pageIndex:Dn,pageNumber:Fn});return}const xn=Wt.current[Dn];if(xn){xn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Fn} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(s,()=>({linkService:Ht,pages:Wt,viewer:Jt}),[]);function on(){Tt&&Tt()}function bn(){Nt&&(warning$1(!1,Nt.toString()),bt&&bt(Nt))}function Ut(){Rt({type:"RESET"})}reactExports.useEffect(Ut,[ht,Rt]);const It=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!ht)return null;if(typeof ht=="string")return isDataURI(ht)?{data:dataURItoByteString(ht)}:(displayCORSWarning(),{url:ht});if(ht instanceof PDFDataRangeTransport)return{range:ht};if(isArrayBuffer(ht))return{data:ht};if(isBrowser&&isBlob(ht))return{data:yield loadFromFile(ht)};if(invariant(typeof ht=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject(ht),"Invalid parameter object: need either .data, .range or .url"),"url"in ht&&typeof ht.url=="string"){if(isDataURI(ht.url)){const{url:Rn}=ht,Sn=__rest$1(ht,["url"]),Fn=dataURItoByteString(Rn);return Object.assign({data:Fn},Sn)}displayCORSWarning()}return ht}),[ht]);reactExports.useEffect(()=>{const Rn=makeCancellablePromise(It());return Rn.promise.then(Sn=>{Rt({type:"RESOLVE",value:Sn})}).catch(Sn=>{Rt({type:"REJECT",error:Sn})}),()=>{cancelRunningTask(Rn)}},[It,Rt]),reactExports.useEffect(()=>{if(!(typeof Dt>"u")){if(Dt===!1){bn();return}on()}},[Dt]);function Mt(){jt&&(Et&&Et(jt),Wt.current=new Array(jt.numPages),Ht.current.setDocument(jt))}function $t(){Zt&&(warning$1(!1,Zt.toString()),yt&&yt(Zt))}function Lt(){qt({type:"RESET"})}reactExports.useEffect(Lt,[qt,Dt]);function Vt(){if(!Dt)return;const Rn=wt?Object.assign(Object.assign({},Dt),wt):Dt,Sn=pdfjs$1.getDocument(Rn);St&&(Sn.onProgress=St),vt&&(Sn.onPassword=vt);const Fn=Sn;return Fn.promise.then(Dn=>{qt({type:"RESOLVE",value:Dn})}).catch(Dn=>{Fn.destroyed||qt({type:"REJECT",error:Dn})}),()=>{Fn.destroy()}}reactExports.useEffect(Vt,[wt,qt,Dt]),reactExports.useEffect(()=>{if(!(typeof jt>"u")){if(jt===!1){$t();return}Mt()}},[jt]);function zt(){Ht.current.setViewer(Jt.current),Ht.current.setExternalLinkRel(ot),Ht.current.setExternalLinkTarget(dt)}reactExports.useEffect(zt,[ot,dt]);function Xt(Rn,Sn){Wt.current[Rn]=Sn}function Yt(Rn){delete Wt.current[Rn]}const un=reactExports.useMemo(()=>({imageResourcesPath:pt,linkService:Ht.current,onItemClick:_t,pdf:jt,registerPage:Xt,renderMode:Pt,rotate:At,unregisterPage:Yt}),[pt,_t,jt,Pt,At]),gn=reactExports.useMemo(()=>makeEventProps(xt,()=>jt),[xt,jt]);function yn(){return React.createElement(DocumentContext.Provider,{value:un},a)}function Tn(){return ht?jt==null?React.createElement(Message$1,{type:"loading"},typeof mt=="function"?mt():mt):jt===!1?React.createElement(Message$1,{type:"error"},typeof tt=="function"?tt():tt):yn():React.createElement(Message$1,{type:"no-data"},typeof gt=="function"?gt():gt)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",et),ref:ft,style:{"--scale-factor":"1"}},gn),Tn())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];var s=o.filter(Boolean);if(s.length<=1){var a=s[0];return a||null}return function(tt){s.forEach(function(ot){typeof ot=="function"?ot(tt):ot&&(ot.current=tt)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(o){return o in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(o){return"children"in o}function isStructTreeNodeWithOnlyContentChild(o){return isStructTreeNode(o)?o.children.length===1&&0 in o.children&&"id"in o.children[0]:!1}function getRoleAttributes(o){const i={};if(isStructTreeNode(o)){const{role:s}=o,a=s.match(HEADING_PATTERN);if(a)i.role="heading",i["aria-level"]=Number(a[1]);else if(isPdfRole(s)){const et=PDF_ROLE_TO_HTML_ROLE[s];et&&(i.role=et)}}return i}function getBaseAttributes(o){const i={};if(isStructTreeNode(o)){if(o.alt!==void 0&&(i["aria-label"]=o.alt),o.lang!==void 0&&(i.lang=o.lang),isStructTreeNodeWithOnlyContentChild(o)){const[s]=o.children;if(s){const a=getBaseAttributes(s);return Object.assign(Object.assign({},i),a)}}}else"id"in o&&(i["aria-owns"]=o.id);return i}function getAttributes(o){return o?Object.assign(Object.assign({},getRoleAttributes(o)),getBaseAttributes(o)):null}function StructTreeItem({className:o,node:i}){const s=reactExports.useMemo(()=>getAttributes(i),[i]),a=reactExports.useMemo(()=>!isStructTreeNode(i)||isStructTreeNodeWithOnlyContentChild(i)?null:i.children.map((et,tt)=>React.createElement(StructTreeItem,{key:tt,node:et})),[i]);return React.createElement("span",Object.assign({className:o},s),a)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const o=usePageContext();invariant(o,"Unable to find Page context.");const{onGetStructTreeError:i,onGetStructTreeSuccess:s}=o,[a,et]=useResolver(),{value:tt,error:ot}=a,{customTextRenderer:dt,page:ht}=o;function ft(){tt&&s&&s(tt)}function pt(){ot&&(warning$1(!1,ot.toString()),i&&i(ot))}function mt(){et({type:"RESET"})}reactExports.useEffect(mt,[et,ht]);function gt(){if(dt||!ht)return;const _t=makeCancellablePromise(ht.getStructTree()),yt=_t;return _t.promise.then(St=>{et({type:"RESOLVE",value:St})}).catch(St=>{et({type:"REJECT",error:St})}),()=>cancelRunningTask(yt)}return reactExports.useEffect(gt,[dt,ht,et]),reactExports.useEffect(()=>{if(tt!==void 0){if(tt===!1){pt();return}ft()}},[tt]),tt?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:tt}):null}const ANNOTATION_MODE=pdfjs$1.AnnotationMode;function PageCanvas(o){const i=usePageContext();invariant(i,"Unable to find Page context.");const s=Object.assign(Object.assign({},i),o),{_className:a,canvasBackground:et,devicePixelRatio:tt=getDevicePixelRatio(),onRenderError:ot,onRenderSuccess:dt,page:ht,renderForms:ft,renderTextLayer:pt,rotate:mt,scale:gt}=s,{canvasRef:_t}=o;invariant(ht,"Attempted to render page canvas, but no page was specified.");const yt=reactExports.useRef(null);function St(){ht&&dt&&dt(makePageCallback(ht,gt))}function Et(Pt){isCancelException(Pt)||(warning$1(!1,Pt.toString()),ot&&ot(Pt))}const vt=reactExports.useMemo(()=>ht.getViewport({scale:gt*tt,rotation:mt}),[tt,ht,mt,gt]),bt=reactExports.useMemo(()=>ht.getViewport({scale:gt,rotation:mt}),[ht,mt,gt]);function Tt(){if(!ht)return;ht.cleanup();const{current:Pt}=yt;if(!Pt)return;Pt.width=vt.width,Pt.height=vt.height,Pt.style.width=`${Math.floor(bt.width)}px`,Pt.style.height=`${Math.floor(bt.height)}px`,Pt.style.visibility="hidden";const At={annotationMode:ft?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:Pt.getContext("2d",{alpha:!1}),viewport:vt};et&&(At.background=et);const xt=ht.render(At),Ot=xt;return xt.promise.then(()=>{Pt.style.visibility="",St()}).catch(Et),()=>cancelRunningTask(Ot)}reactExports.useEffect(Tt,[et,yt,tt,ht,ft,vt,bt]);const wt=reactExports.useCallback(()=>{const{current:Pt}=yt;Pt&&(Pt.width=0,Pt.height=0)},[yt]);return reactExports.useEffect(()=>wt,[wt]),React.createElement("canvas",{className:`${a}__canvas`,dir:"ltr",ref:mergeRefs(_t,yt),style:{display:"block",userSelect:"none"}},pt?React.createElement(StructTree,null):null)}function PageSVG(){const o=usePageContext();invariant(o,"Unable to find Page context.");const{_className:i,onRenderSuccess:s,onRenderError:a,page:et,rotate:tt,scale:ot}=o;invariant(et,"Attempted to render page SVG, but no page was specified.");const[dt,ht]=useResolver(),{value:ft,error:pt}=dt;function mt(){et&&s&&s(makePageCallback(et,ot))}function gt(){pt&&(isCancelException(pt)||(warning$1(!1,pt.toString()),a&&a(pt)))}const _t=reactExports.useMemo(()=>et.getViewport({scale:ot,rotation:tt}),[et,tt,ot]);function yt(){ht({type:"RESET"})}reactExports.useEffect(yt,[et,ht,_t]);function St(){if(!et)return;const Tt=makeCancellablePromise(et.getOperatorList());return Tt.promise.then(wt=>{new pdfjs$1.SVGGraphics(et.commonObjs,et.objs).getSVG(wt,_t).then(At=>{if(!(At instanceof SVGElement))throw new Error("getSVG returned unexpected result.");ht({type:"RESOLVE",value:At})}).catch(At=>{ht({type:"REJECT",error:At})})}).catch(wt=>{ht({type:"REJECT",error:wt})}),()=>cancelRunningTask(Tt)}reactExports.useEffect(St,[et,ht,_t]),reactExports.useEffect(()=>{if(ft!==void 0){if(ft===!1){gt();return}mt()}},[ft]);function Et(Tt){if(!Tt||!ft)return;Tt.firstElementChild||Tt.appendChild(ft);const{width:wt,height:Pt}=_t;ft.setAttribute("width",`${wt}`),ft.setAttribute("height",`${Pt}`)}const{width:vt,height:bt}=_t;return React.createElement("div",{className:`${i}__svg`,ref:Tt=>Et(Tt),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:vt,height:bt,userSelect:"none"}})}function isTextItem(o){return"str"in o}function TextLayer(){const o=usePageContext();invariant(o,"Unable to find Page context.");const{customTextRenderer:i,onGetTextError:s,onGetTextSuccess:a,onRenderTextLayerError:et,onRenderTextLayerSuccess:tt,page:ot,pageIndex:dt,pageNumber:ht,rotate:ft,scale:pt}=o;invariant(ot,"Attempted to load page text content, but no page was specified.");const[mt,gt]=useResolver(),{value:_t,error:yt}=mt,St=reactExports.useRef(null),Et=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function vt(){_t&&a&&a(_t)}function bt(){yt&&(warning$1(!1,yt.toString()),s&&s(yt))}function Tt(){gt({type:"RESET"})}reactExports.useEffect(Tt,[ot,gt]);function wt(){if(!ot)return;const Nt=makeCancellablePromise(ot.getTextContent()),Kt=Nt;return Nt.promise.then(qt=>{gt({type:"RESOLVE",value:qt})}).catch(qt=>{gt({type:"REJECT",error:qt})}),()=>cancelRunningTask(Kt)}reactExports.useEffect(wt,[ot,gt]),reactExports.useEffect(()=>{if(_t!==void 0){if(_t===!1){bt();return}vt()}},[_t]);const Pt=reactExports.useCallback(()=>{tt&&tt()},[tt]),At=reactExports.useCallback(Nt=>{warning$1(!1,Nt.toString()),et&&et(Nt)},[et]);function xt(){const Nt=Et.current;Nt&&Nt.classList.add("active")}function Ot(){const Nt=Et.current;Nt&&Nt.classList.remove("active")}const Rt=reactExports.useMemo(()=>ot.getViewport({scale:pt,rotation:ft}),[ot,ft,pt]);function Dt(){if(!ot||!_t)return;const{current:Nt}=St;if(!Nt)return;Nt.innerHTML="";const Kt=ot.streamTextContent({includeMarkedContent:!0}),qt={container:Nt,textContentSource:Kt,viewport:Rt},jt=pdfjs$1.renderTextLayer(qt),Zt=jt;return jt.promise.then(()=>{const Ht=document.createElement("div");Ht.className="endOfContent",Nt.append(Ht),Et.current=Ht;const Wt=Nt.querySelectorAll('[role="presentation"]');if(i){let Ft=0;_t.items.forEach((Gt,Jt)=>{if(!isTextItem(Gt))return;const on=Wt[Ft];if(!on)return;const bn=i(Object.assign({pageIndex:dt,pageNumber:ht,itemIndex:Jt},Gt));on.innerHTML=bn,Ft+=Gt.str&&Gt.hasEOL?2:1})}Pt()}).catch(At),()=>cancelRunningTask(Zt)}return reactExports.useLayoutEffect(Dt,[i,At,Pt,ot,dt,ht,_t,Rt]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Ot,onMouseDown:xt,ref:St})}function AnnotationLayer(){const o=useDocumentContext();invariant(o,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const i=usePageContext();invariant(i,"Unable to find Page context.");const s=Object.assign(Object.assign({},o),i),{imageResourcesPath:a,linkService:et,onGetAnnotationsError:tt,onGetAnnotationsSuccess:ot,onRenderAnnotationLayerError:dt,onRenderAnnotationLayerSuccess:ht,page:ft,pdf:pt,renderForms:mt,rotate:gt,scale:_t=1}=s;invariant(ft,"Attempted to load page annotations, but no page was specified.");const[yt,St]=useResolver(),{value:Et,error:vt}=yt,bt=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function Tt(){Et&&ot&&ot(Et)}function wt(){vt&&(warning$1(!1,vt.toString()),tt&&tt(vt))}function Pt(){St({type:"RESET"})}reactExports.useEffect(Pt,[St,ft]);function At(){if(!ft)return;const Nt=makeCancellablePromise(ft.getAnnotations()),Kt=Nt;return Nt.promise.then(qt=>{St({type:"RESOLVE",value:qt})}).catch(qt=>{St({type:"REJECT",error:qt})}),()=>{cancelRunningTask(Kt)}}reactExports.useEffect(At,[St,ft,mt]),reactExports.useEffect(()=>{if(Et!==void 0){if(Et===!1){wt();return}Tt()}},[Et]);function xt(){ht&&ht()}function Ot(Nt){warning$1(!1,`${Nt}`),dt&&dt(Nt)}const Rt=reactExports.useMemo(()=>ft.getViewport({scale:_t,rotation:gt}),[ft,gt,_t]);function Dt(){if(!pt||!ft||!Et)return;const{current:Nt}=bt;if(!Nt)return;const Kt=Rt.clone({dontFlip:!0}),qt={accessibilityManager:null,annotationCanvasMap:null,div:Nt,l10n:null,page:ft,viewport:Kt},jt={annotations:Et,annotationStorage:pt.annotationStorage,div:Nt,downloadManager:null,imageResourcesPath:a,linkService:et,page:ft,renderForms:mt,viewport:Kt};Nt.innerHTML="";try{new pdfjs$1.AnnotationLayer(qt).render(jt),xt()}catch(Zt){Ot(Zt)}return()=>{}}return reactExports.useEffect(Dt,[Et,a,et,ft,mt,Rt]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:bt})}var __rest=function(o,i){var s={};for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&i.indexOf(a)<0&&(s[a]=o[a]);if(o!=null&&typeof Object.getOwnPropertySymbols=="function")for(var et=0,a=Object.getOwnPropertySymbols(o);et<a.length;et++)i.indexOf(a[et])<0&&Object.prototype.propertyIsEnumerable.call(o,a[et])&&(s[a[et]]=o[a[et]]);return s};const defaultScale=1,Page=function o(i){const s=useDocumentContext();invariant(s,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const a=Object.assign(Object.assign({},s),i),{_className:et="react-pdf__Page",_enableRegisterUnregisterPage:tt=!0,canvasBackground:ot,canvasRef:dt,children:ht,className:ft,customRenderer:pt,customTextRenderer:mt,devicePixelRatio:gt,error:_t="Failed to load the page.",height:yt,inputRef:St,loading:Et="Loading page…",noData:vt="No page specified.",onGetAnnotationsError:bt,onGetAnnotationsSuccess:Tt,onGetStructTreeError:wt,onGetStructTreeSuccess:Pt,onGetTextError:At,onGetTextSuccess:xt,onLoadError:Ot,onLoadSuccess:Rt,onRenderAnnotationLayerError:Dt,onRenderAnnotationLayerSuccess:Nt,onRenderError:Kt,onRenderSuccess:qt,onRenderTextLayerError:jt,onRenderTextLayerSuccess:Zt,pageIndex:Ht,pageNumber:Wt,pdf:Ft,registerPage:Gt,renderAnnotationLayer:Jt=!0,renderForms:on=!1,renderMode:bn="canvas",renderTextLayer:Ut=!0,rotate:It,scale:Mt=defaultScale,unregisterPage:$t,width:Lt}=a,Vt=__rest(a,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[zt,Xt]=useResolver(),{value:Yt,error:un}=zt,gn=reactExports.useRef(null);invariant(Ft,"Attempted to load a page, but no document was specified.");const yn=isProvided(Wt)?Wt-1:Ht??null,Tn=Wt??(isProvided(Ht)?Ht+1:null),Rn=It??(Yt?Yt.rotate:null),Sn=reactExports.useMemo(()=>{if(!Yt)return null;let jn=1;const zn=Mt??defaultScale;if(Lt||yt){const qn=Yt.getViewport({scale:1,rotation:Rn});Lt?jn=Lt/qn.width:yt&&(jn=yt/qn.height)}return zn*jn},[yt,Yt,Rn,Mt,Lt]);function Fn(){return()=>{isProvided(yn)&&tt&&$t&&$t(yn)}}reactExports.useEffect(Fn,[tt,Ft,yn,$t]);function Dn(){if(Rt){if(!Yt||!Sn)return;Rt(makePageCallback(Yt,Sn))}if(tt&&Gt){if(!isProvided(yn)||!gn.current)return;Gt(yn,gn.current)}}function xn(){un&&(warning$1(!1,un.toString()),Ot&&Ot(un))}function On(){Xt({type:"RESET"})}reactExports.useEffect(On,[Xt,Ft,yn]);function wn(){if(!Ft||!Tn)return;const jn=makeCancellablePromise(Ft.getPage(Tn)),zn=jn;return jn.promise.then(qn=>{Xt({type:"RESOLVE",value:qn})}).catch(qn=>{Xt({type:"REJECT",error:qn})}),()=>cancelRunningTask(zn)}reactExports.useEffect(wn,[Xt,Ft,yn,Tn,Gt]),reactExports.useEffect(()=>{if(Yt!==void 0){if(Yt===!1){xn();return}Dn()}},[Yt,Sn]);const fn=reactExports.useMemo(()=>Yt&&isProvided(yn)&&Tn&&isProvided(Rn)&&isProvided(Sn)?{_className:et,canvasBackground:ot,customTextRenderer:mt,devicePixelRatio:gt,onGetAnnotationsError:bt,onGetAnnotationsSuccess:Tt,onGetStructTreeError:wt,onGetStructTreeSuccess:Pt,onGetTextError:At,onGetTextSuccess:xt,onRenderAnnotationLayerError:Dt,onRenderAnnotationLayerSuccess:Nt,onRenderError:Kt,onRenderSuccess:qt,onRenderTextLayerError:jt,onRenderTextLayerSuccess:Zt,page:Yt,pageIndex:yn,pageNumber:Tn,renderForms:on,renderTextLayer:Ut,rotate:Rn,scale:Sn}:null,[et,ot,mt,gt,bt,Tt,wt,Pt,At,xt,Dt,Nt,Kt,qt,jt,Zt,Yt,yn,Tn,on,Ut,Rn,Sn]),_n=reactExports.useMemo(()=>makeEventProps(Vt,()=>Yt&&(Sn?makePageCallback(Yt,Sn):void 0)),[Vt,Yt,Sn]),Cn=`${yn}@${Sn}/${Rn}`,Ln=`${yn}/${Rn}`;function Vn(){switch(bn){case"custom":return invariant(pt,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(pt,{key:`${Cn}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Ln}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Cn}_canvas`,canvasRef:dt})}}function Jn(){return Ut?React.createElement(TextLayer,{key:`${Cn}_text`}):null}function Xn(){return Jt?React.createElement(AnnotationLayer,{key:`${Cn}_annotations`}):null}function Yn(){return React.createElement(PageContext.Provider,{value:fn},Vn(),Jn(),Xn(),ht)}function Qn(){return Tn?Ft===null||Yt===void 0||Yt===null?React.createElement(Message$1,{type:"loading"},typeof Et=="function"?Et():Et):Ft===!1||Yt===!1?React.createElement(Message$1,{type:"error"},typeof _t=="function"?_t():_t):Yn():React.createElement(Message$1,{type:"no-data"},typeof vt=="function"?vt():vt)}return React.createElement("div",Object.assign({className:clsx(et,ft),"data-page-number":Tn,ref:mergeRefs(St,gn),style:{"--scale-factor":`${Sn}`,backgroundColor:ot||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},_n),Qn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs$1.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs$1.GlobalWorkerOptions.workerSrc=`//unpkg.com/pdfjs-dist@${pdfjs$1.version}/build/pdf.worker.min.js`;const PDFViewer=({path:o,scale:i})=>{const[s,a]=reactExports.useState(0),et=({numPages:dt})=>{a(dt)},tt=dt=>{console.error("pdf viewer error",dt)},ot=()=>{console.error("pdf locked")};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsx(Document$1,{file:o,onLoadSuccess:et,onLoadError:tt,onPassword:ot,children:Array.from(new Array(s),(dt,ht)=>jsxRuntimeExports.jsx(Page$1,{pageNumber:ht+1,width:700,renderAnnotationLayer:!1,scale:i,renderTextLayer:!1},`page_${ht+1}`))})})};ut.button`
    width: 100%;
    height: 100%;
    font-size: 24px;
    color: #ab41ff;
    text-decoration: none;
    cursor: pointer;
    border: none;
    background-color: white;
    margin-top: 20px;
    &:hover {
        color: #ff6b6b;
    }
`;const{Dragger}=Upload$1,PDFUpload=()=>{const[o,i]=React.useState(null),[s,a]=React.useState(null),[et,tt]=React.useState(null),[ot,dt]=React.useState(null);reactExports.useEffect(()=>{console.log("fileState",o)},[o,et,s]);const ht={name:"file",multiple:!0,action:"https://run.mocky.io/v3/435e224c-44fb-4773-9faf-380c5e6a2188",onChange(ft){const{status:pt}=ft.file;console.log("onChange's info",pt),i("uploading"),pt!=="uploading"&&console.log("🔃",ft.file,ft.fileList),pt==="done"?(console.log("👍",ft.file.response),message$1.success(`${ft.file.name} file uploaded successfully.`)):pt==="error"&&message$1.error(`${ft.file.name} file upload failed.`)},beforeUpload(ft){console.log("beforeUpload's file",ft,ft.type);const pt=new FormData;if(pt.append("file",ft),ft.type=="application/pdf")console.log("url","http://13.124.221.128:5000"),fetch("http://13.124.221.128:5000/upload/pdf",{method:"POST",body:pt}).then(mt=>mt.blob()).then(mt=>{i("done"),a("pdf"),dt(mt)}).catch(mt=>{console.error("Error:",mt),message$1.error("Failed to upload PDF file.")});else if(ft.type!="application/image")console.log("url","http://13.124.221.128:5000"),fetch("http://13.124.221.128:5000/upload/image",{method:"POST",body:pt}).then(mt=>mt.blob()).then(mt=>{i("done"),a("image"),dt(mt)}).catch(mt=>{console.error("Error:",mt),message$1.error("Failed to upload image file.")});else return message$1.error("지원하지 않는 파일 형식입니다."),!1}};return o==="uploading"?jsxRuntimeExports.jsx(StatusWrapper,{children:s==="pdf"?"PDF 분석 중이에요. 잠시만 기다려 주세요":"이미지 분석 중이에요. 잠시만 기다려 주세요"}):o==="done"?jsxRuntimeExports.jsxs(PDFViewerWrapper,{children:[jsxRuntimeExports.jsx(DownloadBtn,{onClick:()=>{const ft=window.URL.createObjectURL(new Blob([ot])),pt=document.createElement("a");pt.href=ft,pt.setAttribute("download","study-mentor.pdf"),document.body.appendChild(pt),pt.click(),pt.remove()},children:"문제 저장하기"}),jsxRuntimeExports.jsx(StatusWrapper,{children:jsxRuntimeExports.jsx(PDFViewer,{path:URL.createObjectURL(ot),scale:1.5})})]}):jsxRuntimeExports.jsxs(Dragger,{height:144,...ht,children:[jsxRuntimeExports.jsx("p",{className:"ant-upload-drag-icon",children:jsxRuntimeExports.jsx(InboxOutlined$1,{})}),jsxRuntimeExports.jsx("p",{className:"ant-upload-text",children:"클릭하거나 이미지 또는 PDF 파일을 이곳으로 드래그하여 업로드하세요."}),jsxRuntimeExports.jsx("p",{className:"ant-upload-hint",children:"파일은 한 번에 최대 10개까지 업로드할 수 있습니다."})]})},PDFViewerWrapper=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 100%;
    height: 100%;
`,StatusWrapper=ut.div`
    margin-top: 40px;
    width: 100%;
    display: flex;
    flex-direction: column;
    justify-content: center;
    font-size: 24px;
`,DownloadBtn=ut.button`
    width: 100%;
    height: 100%;
    font-size: 24px;
    color: #ab41ff;
    text-decoration: none;
    cursor: pointer;
    border: none;
    background-color: white;
    margin-top: 20px;
    &:hover {
        color: #ff6b6b;
    }
`,title="/assets/title-TUtQOhKj.png",Header=()=>jsxRuntimeExports.jsxs(HeaderWrapper,{children:[jsxRuntimeExports.jsxs(HeaderItemWrapper,{children:[jsxRuntimeExports.jsx(Logo,{onClick:()=>{window.location.href="/"},children:jsxRuntimeExports.jsx(LogoImage$1,{src:title,alt:"logo"})}),jsxRuntimeExports.jsx(FileUploadLink,{to:"/",children:"파일 업로드"}),jsxRuntimeExports.jsx(ChatbotLink,{to:"/chatbot",children:"챗봇"})]}),jsxRuntimeExports.jsx(Logout,{onClick:()=>{auth.signOut()},children:"logout"})]});ut.div`
    display: flex;
    flex-direction: column;
    padding-bottom: 50px;
`;const HeaderItemWrapper=ut.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 50px;
`,HeaderWrapper=ut.div`
    display: flex;
    flex-direction: row;
    justify-content: space-between;
    flex-wrap: wrap;

    height: 80px;
    border-bottom: 1px solid #aecfff;

    padding-right: 30px;
`,Logo=ut.div`
    margin-left: 45px;
    cursor: pointer;
`,LogoImage$1=ut.img`
    width: 230px;
    height: 50px;
`,FileUploadLink=ut(Link)`
    margin-left: 125px;
    font-size: 24px;
    color: #ab41ff;
    text-decoration: none;
`,ChatbotLink=ut(Link)`
    /* margin-left: 42px; */
    font-size: 24px;
    text-decoration: none;
    color: black;
`,Logout=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-left: 42px;
    font-size: 24px;
    text-decoration: none;
    color: black;
    cursor: pointer;
`,HomePage=()=>{const o=useNavigate(),{user:i,logout:s,login:a}=useAuth();return reactExports.useEffect(()=>{auth.onAuthStateChanged(et=>{a(et),et||o("/login")}),console.log("[user info]: ",i)},[i]),jsxRuntimeExports.jsxs(Wrapper$3,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(MainWrapper,{children:jsxRuntimeExports.jsxs(Main$1,{children:[jsxRuntimeExports.jsxs(InfoList$1,{children:[jsxRuntimeExports.jsxs(InfoWrapper$1,{children:[jsxRuntimeExports.jsx(InfoBox$1,{src:Info1Svg,alt:"info1"}),jsxRuntimeExports.jsx(InfoText$1,{children:"이런 문제를 만들 수 있어요"}),jsxRuntimeExports.jsxs(QuestionList$1,{children:[jsxRuntimeExports.jsx(QuestionWrapper$1,{children:jsxRuntimeExports.jsx(InfoText$1,{children:"객관식 문제"})}),jsxRuntimeExports.jsx(QuestionWrapper$1,{children:jsxRuntimeExports.jsx(InfoText$1,{children:"주관식 문제"})}),jsxRuntimeExports.jsx(QuestionWrapper$1,{children:jsxRuntimeExports.jsx(InfoText$1,{children:"서술형 문제"})})]})]}),jsxRuntimeExports.jsxs(InfoWrapper$1,{children:[jsxRuntimeExports.jsx(InfoBox$1,{src:Info2Svg,alt:"info2"}),jsxRuntimeExports.jsx(InfoText$1,{children:"이런 파일로 문제를 만들어요"}),jsxRuntimeExports.jsxs(QuestionList$1,{children:[jsxRuntimeExports.jsx(ImageTypeWrapper$1,{children:jsxRuntimeExports.jsx(InfoText$1,{children:"JPG"})}),jsxRuntimeExports.jsx(ImageTypeWrapper$1,{children:jsxRuntimeExports.jsx(InfoText$1,{children:"PDF"})}),jsxRuntimeExports.jsx(ImageTypeWrapper$1,{children:jsxRuntimeExports.jsx(InfoText$1,{children:"임시1"})})]})]})]}),jsxRuntimeExports.jsx(PDFUpload,{})]})})]})},Wrapper$3=ut.div`
    display: flex;
    flex-direction: column;
    padding-bottom: 50px;
`;ut.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 50px;
`;ut.aside`
    width: 250px;
    height: calc(100vh - 74px);
    border-right: 1px solid #eaeaea;
    background-color: rgb(242, 247, 255);
`;const MainWrapper=ut.div`
    display: flex;
    flex-direction: row;
    /* height: calc(100vh - 74px); */
    padding-bottom: 20px;
`;ut.div`
    margin-left: 45px;
`;ut.div`
    /* margin-left: 17px; */
    font-weight: 500;
    font-size: 28px;
    line-height: 18px 18px;
`;const Main$1=ut.main`
    display: flex;
    flex-direction: column;

    margin: 0 auto;
    /* height: calc(100vh - 74px); */
`,InfoList$1=ut.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;
    gap: 20px;
    margin-top: 30px;
    margin-bottom: 10px;
`,InfoWrapper$1=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 320px;
    height: 461px;
`,InfoBox$1=ut.img`
    width: 47px;
    height: 47px;
    margin-bottom: 15px;
`,InfoText$1=ut.div`
    font-size: 20px;
    font-weight: 500;
    line-height: 32px;
`,QuestionList$1=ut.div`
    display: flex;
    flex-direction: column;
    gap: 12px;
    margin-top: 30px;
`,QuestionWrapper$1=ut.div`
    display: flex;
    justify-content: center;
    align-items: center;
    width: 320px;
    height: 92px;
    background-color: #fff0f6;
    border-radius: 10px;
`,ImageTypeWrapper$1=ut.div`
    display: flex;
    justify-content: center;
    align-items: center;
    width: 320px;
    height: 92px;
    background-color: #f0f8ff;
    border-radius: 10px;
`;ut.div`
    display: flex;
    width: 100%;
    height: 65px;
    border-radius: 15px;
    border: 1px;

    border: 1px solid #eaeaea;
    border-radius: 16px;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;

    font-size: 24px;
    color: #00000057;
`;ut(Link)`
    margin-left: 125px;
    font-size: 24px;
    color: #ab41ff;
    text-decoration: none;
`;ut(Link)`
    /* margin-left: 42px; */
    font-size: 24px;
    text-decoration: none;
    color: black;
`;ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    margin-left: 42px;
    font-size: 24px;
    text-decoration: none;
    color: black;
    cursor: pointer;
`;var prefix="cs",StatusEnum=["available","unavailable","away","dnd","invisible","eager"],SizeEnum=["xs","sm","md","lg","fluid"];function _typeof$h(o){"@babel/helpers - typeof";return _typeof$h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$h(o)}var _excluded$x=["status","size","className","name","selected","children"];function _extends$w(){return _extends$w=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$w.apply(this,arguments)}function _defineProperty$f(o,i,s){return i=_toPropertyKey$e(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$e(o){var i=_toPrimitive$e(o,"string");return _typeof$h(i)==="symbol"?i:String(i)}function _toPrimitive$e(o,i){if(_typeof$h(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$h(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties$x(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$x(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$x(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var Status=function o(i){var s=i.status,a=i.size,et=i.className,tt=i.name,ot=i.selected,dt=i.children,ht=_objectWithoutProperties$x(i,_excluded$x),ft="".concat(prefix,"-status"),pt=React.createElement("div",{className:"".concat(ft,"__bullet")}),mt=tt||dt;return React.createElement("div",_extends$w({},ht,{"aria-selected":ot===!0?"":null,className:classNames(ft,"".concat(ft,"--").concat(a),"".concat(ft,"--").concat(s),_defineProperty$f({},"".concat(ft,"--selected"),ot),_defineProperty$f({},"".concat(ft,"--named"),mt),et)}),pt,mt&&React.createElement("div",{className:"".concat(ft,"__name")},tt||dt))};Status.defaultProps={size:"md"};function _typeof$g(o){"@babel/helpers - typeof";return _typeof$g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$g(o)}var _excluded$w=["name","src","size","status","className","active","children"];function _extends$v(){return _extends$v=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$v.apply(this,arguments)}function _defineProperty$e(o,i,s){return i=_toPropertyKey$d(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$d(o){var i=_toPrimitive$d(o,"string");return _typeof$g(i)==="symbol"?i:String(i)}function _toPrimitive$d(o,i){if(_typeof$g(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$g(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties$w(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$w(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$w(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function AvatarInner(o,i){var s=o.name,a=o.src,et=o.size,tt=o.status,ot=o.className,dt=o.active,ht=o.children,ft=_objectWithoutProperties$w(o,_excluded$w),pt="".concat(prefix,"-avatar"),mt=typeof et<"u"?" ".concat(pt,"--").concat(et):"",gt=reactExports.useRef();return reactExports.useImperativeHandle(i,function(){return{focus:function(){return gt.current.focus()}}}),React.createElement("div",_extends$v({ref:gt},ft,{className:classNames("".concat(pt).concat(mt),_defineProperty$e({},"".concat(pt,"--active"),dt),ot)}),ht||React.createElement(React.Fragment,null,React.createElement("img",{src:a,alt:s}),typeof tt=="string"&&React.createElement(Status,{status:tt,size:et})," "))}var Avatar=reactExports.forwardRef(AvatarInner);Avatar.displayName="Avatar";Avatar.propTypes={children:PropTypes.node,name:PropTypes.string,src:PropTypes.string,size:PropTypes.oneOf(SizeEnum),status:PropTypes.oneOf(StatusEnum),active:PropTypes.bool,className:PropTypes.string};AvatarInner.defaultProps={name:"",src:"",size:"md",active:!1};Avatar.defaultProps=AvatarInner.defaultProps;function ownKeys$1(o,i){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);i&&(a=a.filter(function(et){return Object.getOwnPropertyDescriptor(o,et).enumerable})),s.push.apply(s,a)}return s}function _objectSpread$1(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys$1(Object(s),!0).forEach(function(a){_defineProperty$d(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):ownKeys$1(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}function _defineProperty$d(o,i,s){return i=_toPropertyKey$c(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$c(o){var i=_toPrimitive$c(o,"string");return _typeof$f(i)==="symbol"?i:String(i)}function _toPrimitive$c(o,i){if(_typeof$f(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$f(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _typeof$f(o){"@babel/helpers - typeof";return _typeof$f=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$f(o)}var noop$2=function o(){},isChildrenNil=function o(i){return i==null||Array.isArray(i)&&i.length===0},getChildren=function o(i,s){var a=[],et=s.map(function(tt){return tt.displayName||tt.name});return React.Children.toArray(i).forEach(function(tt){var ot=s.indexOf(tt.type);if(ot!==-1)a[ot]=tt;else{var dt,ht,ft,pt=(dt=tt==null||(ht=tt.props)===null||ht===void 0?void 0:ht.as)!==null&&dt!==void 0?dt:tt==null||(ft=tt.props)===null||ft===void 0?void 0:ft.is,mt=_typeof$f(pt);if(mt==="function"){var gt=s.indexOf(pt);gt!==-1&&(a[gt]=React.cloneElement(tt,_objectSpread$1(_objectSpread$1({},tt.props),{},{as:null})))}else if(mt==="object"){var _t=pt.name||pt.displayName,yt=et.indexOf(_t);yt!==-1&&(a[yt]=React.cloneElement(tt,_objectSpread$1(_objectSpread$1({},tt.props),{},{as:null})))}else if(mt==="string"){var St=et.indexOf(pt);St!==-1&&(a[St]=tt)}}}),a},getComponentName=function o(i){if(typeof i=="string")return i;if("type"in i){var s=_typeof$f(i.type);if(s==="function"||s==="object"){if("displayName"in i.type)return i.type.displayName;if("name"in i.type)return i.type.name}else if(s==="string")return i.type;return"undefined"}return"undefined"},allowedChildren=function o(i){return function(s,a,et){var tt=i.map(function(pt){return pt.name||pt.displayName}),ot=React.Children.toArray(s[a]).find(function(pt){if(typeof pt=="string"&&pt.trim().length===0)return!1;if(i.indexOf(pt.type)===-1){var mt,gt,_t=(pt==null||(mt=pt.props)===null||mt===void 0?void 0:mt.as)||(pt==null||(gt=pt.props)===null||gt===void 0?void 0:gt.is),yt=_typeof$f(_t);if(yt==="function")return i.indexOf(_t)===-1;if(yt==="object"){var St=_t.name||_t.displayName;return tt.indexOf(St)===-1}else return yt==="string"?tt.indexOf(_t)===-1:!0}});if(typeof ot<"u"){var dt=getComponentName(ot),ht=i.map(function(pt){return pt.name||pt.displayName}).join(", "),ft='"'.concat(dt,'" is not a valid child for ').concat(et,". Allowed types: ").concat(ht);return new Error(ft)}}},_excluded$v=["children","size","className","max","activeIndex","hoverToFront"];function _extends$u(){return _extends$u=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$u.apply(this,arguments)}function _objectWithoutProperties$v(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$v(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$v(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var AvatarGroup=function o(i){var s=i.children,a=i.size,et=i.className,tt=i.max,ot=i.activeIndex,dt=i.hoverToFront,ht=_objectWithoutProperties$v(i,_excluded$v),ft="".concat(prefix,"-avatar-group"),pt=typeof tt=="number"&&React.Children.count(s)>tt?React.Children.toArray(s).reverse().slice(0,tt):React.Children.toArray(s).reverse(),mt=typeof ot=="number"?pt.length-ot-1:void 0;return React.createElement("div",_extends$u({},ht,{className:classNames(ft,"".concat(ft,"--").concat(a),et)}),pt.map(function(gt,_t){var yt=typeof mt=="number"?{active:mt===_t}:{};return dt===!0&&(yt.className=classNames("".concat(prefix,"-avatar--active-on-hover"),gt.props.className)),React.cloneElement(gt,yt)}))};AvatarGroup.displayName="AvatarGroup";AvatarGroup.defaultProps={size:"md"};var _excluded$u=["children","className","icon","border","labelPosition"];function _extends$t(){return _extends$t=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$t.apply(this,arguments)}function _objectWithoutProperties$u(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$u(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$u(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var Button=function o(i){var s=i.children,a=i.className,et=i.icon,tt=i.border,ot=i.labelPosition,dt=_objectWithoutProperties$u(i,_excluded$u),ht="".concat(prefix,"-button"),ft=typeof ot<"u"?ot:"right",pt=React.Children.count(s)>0?"".concat(ht,"--").concat(ft):"",mt=tt===!0?"".concat(ht,"--border"):"";return React.createElement("button",_extends$t({},dt,{className:classNames(ht,pt,mt,a)}),ft==="left"&&s,et,ft==="right"&&s)};Button.defaultProps={children:void 0,className:"",icon:void 0,labelPosition:void 0,border:!1};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */function _typeof$e(o){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$e=function(i){return typeof i}:_typeof$e=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$e(o)}function _classCallCheck$4(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties$4(o,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,a.key,a)}}function _createClass$4(o,i,s){return i&&_defineProperties$4(o.prototype,i),s&&_defineProperties$4(o,s),o}function _defineProperty$c(o,i,s){return i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _objectSpread(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{},a=Object.keys(s);typeof Object.getOwnPropertySymbols=="function"&&(a=a.concat(Object.getOwnPropertySymbols(s).filter(function(et){return Object.getOwnPropertyDescriptor(s,et).enumerable}))),a.forEach(function(et){_defineProperty$c(o,et,s[et])})}return o}function _slicedToArray$7(o,i){return _arrayWithHoles$7(o)||_iterableToArrayLimit$7(o,i)||_nonIterableRest$7()}function _arrayWithHoles$7(o){if(Array.isArray(o))return o}function _iterableToArrayLimit$7(o,i){var s=[],a=!0,et=!1,tt=void 0;try{for(var ot=o[Symbol.iterator](),dt;!(a=(dt=ot.next()).done)&&(s.push(dt.value),!(i&&s.length===i));a=!0);}catch(ht){et=!0,tt=ht}finally{try{!a&&ot.return!=null&&ot.return()}finally{if(et)throw tt}}return s}function _nonIterableRest$7(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}var noop=function o(){},_WINDOW={},_DOCUMENT={},_MUTATION_OBSERVER=null,_PERFORMANCE={mark:noop,measure:noop};try{typeof window<"u"&&(_WINDOW=window),typeof document<"u"&&(_DOCUMENT=document),typeof MutationObserver<"u"&&(_MUTATION_OBSERVER=MutationObserver),typeof performance<"u"&&(_PERFORMANCE=performance)}catch(o){}var _ref=_WINDOW.navigator||{},_ref$userAgent=_ref.userAgent,userAgent=_ref$userAgent===void 0?"":_ref$userAgent,WINDOW=_WINDOW,DOCUMENT=_DOCUMENT,PERFORMANCE=_PERFORMANCE;WINDOW.document;var IS_DOM=!!DOCUMENT.documentElement&&!!DOCUMENT.head&&typeof DOCUMENT.addEventListener=="function"&&typeof DOCUMENT.createElement=="function";~userAgent.indexOf("MSIE")||~userAgent.indexOf("Trident/");var NAMESPACE_IDENTIFIER="___FONT_AWESOME___",DEFAULT_FAMILY_PREFIX="fa",DEFAULT_REPLACEMENT_CLASS="svg-inline--fa",DATA_FA_I2SVG="data-fa-i2svg";(function(){try{return!0}catch{return!1}})();var DUOTONE_CLASSES={GROUP:"group",SWAP_OPACITY:"swap-opacity",PRIMARY:"primary",SECONDARY:"secondary"},initial=WINDOW.FontAwesomeConfig||{};function getAttrConfig(o){var i=DOCUMENT.querySelector("script["+o+"]");if(i)return i.getAttribute(o)}function coerce(o){return o===""?!0:o==="false"?!1:o==="true"?!0:o}if(DOCUMENT&&typeof DOCUMENT.querySelector=="function"){var attrs=[["data-family-prefix","familyPrefix"],["data-replacement-class","replacementClass"],["data-auto-replace-svg","autoReplaceSvg"],["data-auto-add-css","autoAddCss"],["data-auto-a11y","autoA11y"],["data-search-pseudo-elements","searchPseudoElements"],["data-observe-mutations","observeMutations"],["data-mutate-approach","mutateApproach"],["data-keep-original-source","keepOriginalSource"],["data-measure-performance","measurePerformance"],["data-show-missing-icons","showMissingIcons"]];attrs.forEach(function(o){var i=_slicedToArray$7(o,2),s=i[0],a=i[1],et=coerce(getAttrConfig(s));et!=null&&(initial[a]=et)})}var _default={familyPrefix:DEFAULT_FAMILY_PREFIX,replacementClass:DEFAULT_REPLACEMENT_CLASS,autoReplaceSvg:!0,autoAddCss:!0,autoA11y:!0,searchPseudoElements:!1,observeMutations:!0,mutateApproach:"async",keepOriginalSource:!0,measurePerformance:!1,showMissingIcons:!0},_config=_objectSpread({},_default,initial);_config.autoReplaceSvg||(_config.observeMutations=!1);var config=_objectSpread({},_config);WINDOW.FontAwesomeConfig=config;var w=WINDOW||{};w[NAMESPACE_IDENTIFIER]||(w[NAMESPACE_IDENTIFIER]={});w[NAMESPACE_IDENTIFIER].styles||(w[NAMESPACE_IDENTIFIER].styles={});w[NAMESPACE_IDENTIFIER].hooks||(w[NAMESPACE_IDENTIFIER].hooks={});w[NAMESPACE_IDENTIFIER].shims||(w[NAMESPACE_IDENTIFIER].shims=[]);var namespace=w[NAMESPACE_IDENTIFIER],functions=[],listener=function o(){DOCUMENT.removeEventListener("DOMContentLoaded",o),loaded=1,functions.map(function(i){return i()})},loaded=!1;IS_DOM&&(loaded=(DOCUMENT.documentElement.doScroll?/^loaded|^c/:/^loaded|^i|^c/).test(DOCUMENT.readyState),loaded||DOCUMENT.addEventListener("DOMContentLoaded",listener));var PENDING="pending",SETTLED="settled",FULFILLED="fulfilled",REJECTED="rejected",NOOP=function o(){},isNode=typeof global<"u"&&typeof global.process<"u"&&typeof global.process.emit=="function",asyncSetTimer=typeof setImmediate>"u"?setTimeout:setImmediate,asyncQueue=[],asyncTimer;function asyncFlush(){for(var o=0;o<asyncQueue.length;o++)asyncQueue[o][0](asyncQueue[o][1]);asyncQueue=[],asyncTimer=!1}function asyncCall(o,i){asyncQueue.push([o,i]),asyncTimer||(asyncTimer=!0,asyncSetTimer(asyncFlush,0))}function invokeResolver(o,i){function s(et){resolve(i,et)}function a(et){reject(i,et)}try{o(s,a)}catch(et){a(et)}}function invokeCallback(o){var i=o.owner,s=i._state,a=i._data,et=o[s],tt=o.then;if(typeof et=="function"){s=FULFILLED;try{a=et(a)}catch(ot){reject(tt,ot)}}handleThenable(tt,a)||(s===FULFILLED&&resolve(tt,a),s===REJECTED&&reject(tt,a))}function handleThenable(o,i){var s;try{if(o===i)throw new TypeError("A promises callback cannot return that same promise.");if(i&&(typeof i=="function"||_typeof$e(i)==="object")){var a=i.then;if(typeof a=="function")return a.call(i,function(et){s||(s=!0,i===et?fulfill(o,et):resolve(o,et))},function(et){s||(s=!0,reject(o,et))}),!0}}catch(et){return s||reject(o,et),!0}return!1}function resolve(o,i){(o===i||!handleThenable(o,i))&&fulfill(o,i)}function fulfill(o,i){o._state===PENDING&&(o._state=SETTLED,o._data=i,asyncCall(publishFulfillment,o))}function reject(o,i){o._state===PENDING&&(o._state=SETTLED,o._data=i,asyncCall(publishRejection,o))}function publish(o){o._then=o._then.forEach(invokeCallback)}function publishFulfillment(o){o._state=FULFILLED,publish(o)}function publishRejection(o){o._state=REJECTED,publish(o),!o._handled&&isNode&&global.process.emit("unhandledRejection",o._data,o)}function notifyRejectionHandled(o){global.process.emit("rejectionHandled",o)}function P(o){if(typeof o!="function")throw new TypeError("Promise resolver "+o+" is not a function");if(!(this instanceof P))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._then=[],invokeResolver(o,this)}P.prototype={constructor:P,_state:PENDING,_then:null,_data:void 0,_handled:!1,then:function o(i,s){var a={owner:this,then:new this.constructor(NOOP),fulfilled:i,rejected:s};return(s||i)&&!this._handled&&(this._handled=!0,this._state===REJECTED&&isNode&&asyncCall(notifyRejectionHandled,this)),this._state===FULFILLED||this._state===REJECTED?asyncCall(invokeCallback,a):this._then.push(a),a.then},catch:function o(i){return this.then(null,i)}};P.all=function(o){if(!Array.isArray(o))throw new TypeError("You must pass an array to Promise.all().");return new P(function(i,s){var a=[],et=0;function tt(ht){return et++,function(ft){a[ht]=ft,--et||i(a)}}for(var ot=0,dt;ot<o.length;ot++)dt=o[ot],dt&&typeof dt.then=="function"?dt.then(tt(ot),s):a[ot]=dt;et||i(a)})};P.race=function(o){if(!Array.isArray(o))throw new TypeError("You must pass an array to Promise.race().");return new P(function(i,s){for(var a=0,et;a<o.length;a++)et=o[a],et&&typeof et.then=="function"?et.then(i,s):i(et)})};P.resolve=function(o){return o&&_typeof$e(o)==="object"&&o.constructor===P?o:new P(function(i){i(o)})};P.reject=function(o){return new P(function(i,s){s(o)})};var meaninglessTransform={size:16,x:0,y:0,rotate:0,flipX:!1,flipY:!1};function insertCss(o){if(!(!o||!IS_DOM)){var i=DOCUMENT.createElement("style");i.setAttribute("type","text/css"),i.innerHTML=o;for(var s=DOCUMENT.head.childNodes,a=null,et=s.length-1;et>-1;et--){var tt=s[et],ot=(tt.tagName||"").toUpperCase();["STYLE","LINK"].indexOf(ot)>-1&&(a=tt)}return DOCUMENT.head.insertBefore(i,a),o}}var idPool="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function nextUniqueId(){for(var o=12,i="";o-- >0;)i+=idPool[Math.random()*62|0];return i}function htmlEscape(o){return"".concat(o).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function joinAttributes(o){return Object.keys(o||{}).reduce(function(i,s){return i+"".concat(s,'="').concat(htmlEscape(o[s]),'" ')},"").trim()}function joinStyles(o){return Object.keys(o||{}).reduce(function(i,s){return i+"".concat(s,": ").concat(o[s],";")},"")}function transformIsMeaningful(o){return o.size!==meaninglessTransform.size||o.x!==meaninglessTransform.x||o.y!==meaninglessTransform.y||o.rotate!==meaninglessTransform.rotate||o.flipX||o.flipY}function transformForSvg(o){var i=o.transform,s=o.containerWidth,a=o.iconWidth,et={transform:"translate(".concat(s/2," 256)")},tt="translate(".concat(i.x*32,", ").concat(i.y*32,") "),ot="scale(".concat(i.size/16*(i.flipX?-1:1),", ").concat(i.size/16*(i.flipY?-1:1),") "),dt="rotate(".concat(i.rotate," 0 0)"),ht={transform:"".concat(tt," ").concat(ot," ").concat(dt)},ft={transform:"translate(".concat(a/2*-1," -256)")};return{outer:et,inner:ht,path:ft}}var ALL_SPACE={x:0,y:0,width:"100%",height:"100%"};function fillBlack(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return o.attributes&&(o.attributes.fill||i)&&(o.attributes.fill="black"),o}function deGroup(o){return o.tag==="g"?o.children:[o]}function makeIconMasking(o){var i=o.children,s=o.attributes,a=o.main,et=o.mask,tt=o.maskId,ot=o.transform,dt=a.width,ht=a.icon,ft=et.width,pt=et.icon,mt=transformForSvg({transform:ot,containerWidth:ft,iconWidth:dt}),gt={tag:"rect",attributes:_objectSpread({},ALL_SPACE,{fill:"white"})},_t=ht.children?{children:ht.children.map(fillBlack)}:{},yt={tag:"g",attributes:_objectSpread({},mt.inner),children:[fillBlack(_objectSpread({tag:ht.tag,attributes:_objectSpread({},ht.attributes,mt.path)},_t))]},St={tag:"g",attributes:_objectSpread({},mt.outer),children:[yt]},Et="mask-".concat(tt||nextUniqueId()),vt="clip-".concat(tt||nextUniqueId()),bt={tag:"mask",attributes:_objectSpread({},ALL_SPACE,{id:Et,maskUnits:"userSpaceOnUse",maskContentUnits:"userSpaceOnUse"}),children:[gt,St]},Tt={tag:"defs",children:[{tag:"clipPath",attributes:{id:vt},children:deGroup(pt)},bt]};return i.push(Tt,{tag:"rect",attributes:_objectSpread({fill:"currentColor","clip-path":"url(#".concat(vt,")"),mask:"url(#".concat(Et,")")},ALL_SPACE)}),{children:i,attributes:s}}function makeIconStandard(o){var i=o.children,s=o.attributes,a=o.main,et=o.transform,tt=o.styles,ot=joinStyles(tt);if(ot.length>0&&(s.style=ot),transformIsMeaningful(et)){var dt=transformForSvg({transform:et,containerWidth:a.width,iconWidth:a.width});i.push({tag:"g",attributes:_objectSpread({},dt.outer),children:[{tag:"g",attributes:_objectSpread({},dt.inner),children:[{tag:a.icon.tag,children:a.icon.children,attributes:_objectSpread({},a.icon.attributes,dt.path)}]}]})}else i.push(a.icon);return{children:i,attributes:s}}function asIcon(o){var i=o.children,s=o.main,a=o.mask,et=o.attributes,tt=o.styles,ot=o.transform;if(transformIsMeaningful(ot)&&s.found&&!a.found){var dt=s.width,ht=s.height,ft={x:dt/ht/2,y:.5};et.style=joinStyles(_objectSpread({},tt,{"transform-origin":"".concat(ft.x+ot.x/16,"em ").concat(ft.y+ot.y/16,"em")}))}return[{tag:"svg",attributes:et,children:i}]}function asSymbol(o){var i=o.prefix,s=o.iconName,a=o.children,et=o.attributes,tt=o.symbol,ot=tt===!0?"".concat(i,"-").concat(config.familyPrefix,"-").concat(s):tt;return[{tag:"svg",attributes:{style:"display: none;"},children:[{tag:"symbol",attributes:_objectSpread({},et,{id:ot}),children:a}]}]}function makeInlineSvgAbstract(o){var i=o.icons,s=i.main,a=i.mask,et=o.prefix,tt=o.iconName,ot=o.transform,dt=o.symbol,ht=o.title,ft=o.maskId,pt=o.titleId,mt=o.extra,gt=o.watchable,_t=gt===void 0?!1:gt,yt=a.found?a:s,St=yt.width,Et=yt.height,vt=et==="fak",bt=vt?"":"fa-w-".concat(Math.ceil(St/Et*16)),Tt=[config.replacementClass,tt?"".concat(config.familyPrefix,"-").concat(tt):"",bt].filter(function(Dt){return mt.classes.indexOf(Dt)===-1}).filter(function(Dt){return Dt!==""||!!Dt}).concat(mt.classes).join(" "),wt={children:[],attributes:_objectSpread({},mt.attributes,{"data-prefix":et,"data-icon":tt,class:Tt,role:mt.attributes.role||"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(St," ").concat(Et)})},Pt=vt&&!~mt.classes.indexOf("fa-fw")?{width:"".concat(St/Et*16*.0625,"em")}:{};_t&&(wt.attributes[DATA_FA_I2SVG]=""),ht&&wt.children.push({tag:"title",attributes:{id:wt.attributes["aria-labelledby"]||"title-".concat(pt||nextUniqueId())},children:[ht]});var At=_objectSpread({},wt,{prefix:et,iconName:tt,main:s,mask:a,maskId:ft,transform:ot,symbol:dt,styles:_objectSpread({},Pt,mt.styles)}),xt=a.found&&s.found?makeIconMasking(At):makeIconStandard(At),Ot=xt.children,Rt=xt.attributes;return At.children=Ot,At.attributes=Rt,dt?asSymbol(At):asIcon(At)}var noop$1=function o(){};config.measurePerformance&&PERFORMANCE&&PERFORMANCE.mark&&PERFORMANCE.measure;var bindInternal4=function o(i,s){return function(a,et,tt,ot){return i.call(s,a,et,tt,ot)}},reduce=function o(i,s,a,et){var tt=Object.keys(i),ot=tt.length,dt=et!==void 0?bindInternal4(s,et):s,ht,ft,pt;for(a===void 0?(ht=1,pt=i[tt[0]]):(ht=0,pt=a);ht<ot;ht++)ft=tt[ht],pt=dt(pt,i[ft],ft,i);return pt};function defineIcons(o,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=s.skipHooks,et=a===void 0?!1:a,tt=Object.keys(i).reduce(function(ot,dt){var ht=i[dt],ft=!!ht.icon;return ft?ot[ht.iconName]=ht.icon:ot[dt]=ht,ot},{});typeof namespace.hooks.addPack=="function"&&!et?namespace.hooks.addPack(o,tt):namespace.styles[o]=_objectSpread({},namespace.styles[o]||{},tt),o==="fas"&&defineIcons("fa",i)}var styles=namespace.styles,shims=namespace.shims,build=function o(){var i=function(et){return reduce(styles,function(tt,ot,dt){return tt[dt]=reduce(ot,et,{}),tt},{})};i(function(a,et,tt){return et[3]&&(a[et[3]]=tt),a}),i(function(a,et,tt){var ot=et[2];return a[tt]=tt,ot.forEach(function(dt){a[dt]=tt}),a});var s="far"in styles;reduce(shims,function(a,et){var tt=et[0],ot=et[1],dt=et[2];return ot==="far"&&!s&&(ot="fas"),a[tt]={prefix:ot,iconName:dt},a},{})};build();namespace.styles;function iconFromMapping(o,i,s){if(o&&o[i]&&o[i][s])return{prefix:i,iconName:s,icon:o[i][s]}}function toHtml(o){var i=o.tag,s=o.attributes,a=s===void 0?{}:s,et=o.children,tt=et===void 0?[]:et;return typeof o=="string"?htmlEscape(o):"<".concat(i," ").concat(joinAttributes(a),">").concat(tt.map(toHtml).join(""),"</").concat(i,">")}var parseTransformString=function o(i){var s={size:16,x:0,y:0,flipX:!1,flipY:!1,rotate:0};return i?i.toLowerCase().split(" ").reduce(function(a,et){var tt=et.toLowerCase().split("-"),ot=tt[0],dt=tt.slice(1).join("-");if(ot&&dt==="h")return a.flipX=!0,a;if(ot&&dt==="v")return a.flipY=!0,a;if(dt=parseFloat(dt),isNaN(dt))return a;switch(ot){case"grow":a.size=a.size+dt;break;case"shrink":a.size=a.size-dt;break;case"left":a.x=a.x-dt;break;case"right":a.x=a.x+dt;break;case"up":a.y=a.y-dt;break;case"down":a.y=a.y+dt;break;case"rotate":a.rotate=a.rotate+dt;break}return a},s):s};function MissingIcon(o){this.name="MissingIcon",this.message=o||"Icon unavailable",this.stack=new Error().stack}MissingIcon.prototype=Object.create(Error.prototype);MissingIcon.prototype.constructor=MissingIcon;var FILL={fill:"currentColor"},ANIMATION_BASE={attributeType:"XML",repeatCount:"indefinite",dur:"2s"};_objectSpread({},FILL,{d:"M156.5,447.7l-12.6,29.5c-18.7-9.5-35.9-21.2-51.5-34.9l22.7-22.7C127.6,430.5,141.5,440,156.5,447.7z M40.6,272H8.5 c1.4,21.2,5.4,41.7,11.7,61.1L50,321.2C45.1,305.5,41.8,289,40.6,272z M40.6,240c1.4-18.8,5.2-37,11.1-54.1l-29.5-12.6 C14.7,194.3,10,216.7,8.5,240H40.6z M64.3,156.5c7.8-14.9,17.2-28.8,28.1-41.5L69.7,92.3c-13.7,15.6-25.5,32.8-34.9,51.5 L64.3,156.5z M397,419.6c-13.9,12-29.4,22.3-46.1,30.4l11.9,29.8c20.7-9.9,39.8-22.6,56.9-37.6L397,419.6z M115,92.4 c13.9-12,29.4-22.3,46.1-30.4l-11.9-29.8c-20.7,9.9-39.8,22.6-56.8,37.6L115,92.4z M447.7,355.5c-7.8,14.9-17.2,28.8-28.1,41.5 l22.7,22.7c13.7-15.6,25.5-32.9,34.9-51.5L447.7,355.5z M471.4,272c-1.4,18.8-5.2,37-11.1,54.1l29.5,12.6 c7.5-21.1,12.2-43.5,13.6-66.8H471.4z M321.2,462c-15.7,5-32.2,8.2-49.2,9.4v32.1c21.2-1.4,41.7-5.4,61.1-11.7L321.2,462z M240,471.4c-18.8-1.4-37-5.2-54.1-11.1l-12.6,29.5c21.1,7.5,43.5,12.2,66.8,13.6V471.4z M462,190.8c5,15.7,8.2,32.2,9.4,49.2h32.1 c-1.4-21.2-5.4-41.7-11.7-61.1L462,190.8z M92.4,397c-12-13.9-22.3-29.4-30.4-46.1l-29.8,11.9c9.9,20.7,22.6,39.8,37.6,56.9 L92.4,397z M272,40.6c18.8,1.4,36.9,5.2,54.1,11.1l12.6-29.5C317.7,14.7,295.3,10,272,8.5V40.6z M190.8,50 c15.7-5,32.2-8.2,49.2-9.4V8.5c-21.2,1.4-41.7,5.4-61.1,11.7L190.8,50z M442.3,92.3L419.6,115c12,13.9,22.3,29.4,30.5,46.1 l29.8-11.9C470,128.5,457.3,109.4,442.3,92.3z M397,92.4l22.7-22.7c-15.6-13.7-32.8-25.5-51.5-34.9l-12.6,29.5 C370.4,72.1,384.4,81.5,397,92.4z"});var OPACITY_ANIMATE=_objectSpread({},ANIMATION_BASE,{attributeName:"opacity"});_objectSpread({},FILL,{cx:"256",cy:"364",r:"28"}),_objectSpread({},ANIMATION_BASE,{attributeName:"r",values:"28;14;28;28;14;28;"}),_objectSpread({},OPACITY_ANIMATE,{values:"1;0;1;1;0;1;"});_objectSpread({},FILL,{opacity:"1",d:"M263.7,312h-16c-6.6,0-12-5.4-12-12c0-71,77.4-63.9,77.4-107.8c0-20-17.8-40.2-57.4-40.2c-29.1,0-44.3,9.6-59.2,28.7 c-3.9,5-11.1,6-16.2,2.4l-13.1-9.2c-5.6-3.9-6.9-11.8-2.6-17.2c21.2-27.2,46.4-44.7,91.2-44.7c52.3,0,97.4,29.8,97.4,80.2 c0,67.6-77.4,63.5-77.4,107.8C275.7,306.6,270.3,312,263.7,312z"}),_objectSpread({},OPACITY_ANIMATE,{values:"1;0;0;0;0;1;"});_objectSpread({},FILL,{opacity:"0",d:"M232.5,134.5l7,168c0.3,6.4,5.6,11.5,12,11.5h9c6.4,0,11.7-5.1,12-11.5l7-168c0.3-6.8-5.2-12.5-12-12.5h-23 C237.7,122,232.2,127.7,232.5,134.5z"}),_objectSpread({},OPACITY_ANIMATE,{values:"0;0;1;1;0;0;"});namespace.styles;function asFoundIcon(o){var i=o[0],s=o[1],a=o.slice(4),et=_slicedToArray$7(a,1),tt=et[0],ot=null;return Array.isArray(tt)?ot={tag:"g",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.GROUP)},children:[{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.SECONDARY),fill:"currentColor",d:tt[0]}},{tag:"path",attributes:{class:"".concat(config.familyPrefix,"-").concat(DUOTONE_CLASSES.PRIMARY),fill:"currentColor",d:tt[1]}}]}:ot={tag:"path",attributes:{fill:"currentColor",d:tt}},{found:!0,width:i,height:s,icon:ot}}namespace.styles;var baseStyles=`svg:not(:root).svg-inline--fa {
  overflow: visible;
}

.svg-inline--fa {
  display: inline-block;
  font-size: inherit;
  height: 1em;
  overflow: visible;
  vertical-align: -0.125em;
}
.svg-inline--fa.fa-lg {
  vertical-align: -0.225em;
}
.svg-inline--fa.fa-w-1 {
  width: 0.0625em;
}
.svg-inline--fa.fa-w-2 {
  width: 0.125em;
}
.svg-inline--fa.fa-w-3 {
  width: 0.1875em;
}
.svg-inline--fa.fa-w-4 {
  width: 0.25em;
}
.svg-inline--fa.fa-w-5 {
  width: 0.3125em;
}
.svg-inline--fa.fa-w-6 {
  width: 0.375em;
}
.svg-inline--fa.fa-w-7 {
  width: 0.4375em;
}
.svg-inline--fa.fa-w-8 {
  width: 0.5em;
}
.svg-inline--fa.fa-w-9 {
  width: 0.5625em;
}
.svg-inline--fa.fa-w-10 {
  width: 0.625em;
}
.svg-inline--fa.fa-w-11 {
  width: 0.6875em;
}
.svg-inline--fa.fa-w-12 {
  width: 0.75em;
}
.svg-inline--fa.fa-w-13 {
  width: 0.8125em;
}
.svg-inline--fa.fa-w-14 {
  width: 0.875em;
}
.svg-inline--fa.fa-w-15 {
  width: 0.9375em;
}
.svg-inline--fa.fa-w-16 {
  width: 1em;
}
.svg-inline--fa.fa-w-17 {
  width: 1.0625em;
}
.svg-inline--fa.fa-w-18 {
  width: 1.125em;
}
.svg-inline--fa.fa-w-19 {
  width: 1.1875em;
}
.svg-inline--fa.fa-w-20 {
  width: 1.25em;
}
.svg-inline--fa.fa-pull-left {
  margin-right: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-pull-right {
  margin-left: 0.3em;
  width: auto;
}
.svg-inline--fa.fa-border {
  height: 1.5em;
}
.svg-inline--fa.fa-li {
  width: 2em;
}
.svg-inline--fa.fa-fw {
  width: 1.25em;
}

.fa-layers svg.svg-inline--fa {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.fa-layers {
  display: inline-block;
  height: 1em;
  position: relative;
  text-align: center;
  vertical-align: -0.125em;
  width: 1em;
}
.fa-layers svg.svg-inline--fa {
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter, .fa-layers-text {
  display: inline-block;
  position: absolute;
  text-align: center;
}

.fa-layers-text {
  left: 50%;
  top: 50%;
  -webkit-transform: translate(-50%, -50%);
          transform: translate(-50%, -50%);
  -webkit-transform-origin: center center;
          transform-origin: center center;
}

.fa-layers-counter {
  background-color: #ff253a;
  border-radius: 1em;
  -webkit-box-sizing: border-box;
          box-sizing: border-box;
  color: #fff;
  height: 1.5em;
  line-height: 1;
  max-width: 5em;
  min-width: 1.5em;
  overflow: hidden;
  padding: 0.25em;
  right: 0;
  text-overflow: ellipsis;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-bottom-right {
  bottom: 0;
  right: 0;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom right;
          transform-origin: bottom right;
}

.fa-layers-bottom-left {
  bottom: 0;
  left: 0;
  right: auto;
  top: auto;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: bottom left;
          transform-origin: bottom left;
}

.fa-layers-top-right {
  right: 0;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top right;
          transform-origin: top right;
}

.fa-layers-top-left {
  left: 0;
  right: auto;
  top: 0;
  -webkit-transform: scale(0.25);
          transform: scale(0.25);
  -webkit-transform-origin: top left;
          transform-origin: top left;
}

.fa-lg {
  font-size: 1.3333333333em;
  line-height: 0.75em;
  vertical-align: -0.0667em;
}

.fa-xs {
  font-size: 0.75em;
}

.fa-sm {
  font-size: 0.875em;
}

.fa-1x {
  font-size: 1em;
}

.fa-2x {
  font-size: 2em;
}

.fa-3x {
  font-size: 3em;
}

.fa-4x {
  font-size: 4em;
}

.fa-5x {
  font-size: 5em;
}

.fa-6x {
  font-size: 6em;
}

.fa-7x {
  font-size: 7em;
}

.fa-8x {
  font-size: 8em;
}

.fa-9x {
  font-size: 9em;
}

.fa-10x {
  font-size: 10em;
}

.fa-fw {
  text-align: center;
  width: 1.25em;
}

.fa-ul {
  list-style-type: none;
  margin-left: 2.5em;
  padding-left: 0;
}
.fa-ul > li {
  position: relative;
}

.fa-li {
  left: -2em;
  position: absolute;
  text-align: center;
  width: 2em;
  line-height: inherit;
}

.fa-border {
  border: solid 0.08em #eee;
  border-radius: 0.1em;
  padding: 0.2em 0.25em 0.15em;
}

.fa-pull-left {
  float: left;
}

.fa-pull-right {
  float: right;
}

.fa.fa-pull-left,
.fas.fa-pull-left,
.far.fa-pull-left,
.fal.fa-pull-left,
.fab.fa-pull-left {
  margin-right: 0.3em;
}
.fa.fa-pull-right,
.fas.fa-pull-right,
.far.fa-pull-right,
.fal.fa-pull-right,
.fab.fa-pull-right {
  margin-left: 0.3em;
}

.fa-spin {
  -webkit-animation: fa-spin 2s infinite linear;
          animation: fa-spin 2s infinite linear;
}

.fa-pulse {
  -webkit-animation: fa-spin 1s infinite steps(8);
          animation: fa-spin 1s infinite steps(8);
}

@-webkit-keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}

@keyframes fa-spin {
  0% {
    -webkit-transform: rotate(0deg);
            transform: rotate(0deg);
  }
  100% {
    -webkit-transform: rotate(360deg);
            transform: rotate(360deg);
  }
}
.fa-rotate-90 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=1)";
  -webkit-transform: rotate(90deg);
          transform: rotate(90deg);
}

.fa-rotate-180 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2)";
  -webkit-transform: rotate(180deg);
          transform: rotate(180deg);
}

.fa-rotate-270 {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=3)";
  -webkit-transform: rotate(270deg);
          transform: rotate(270deg);
}

.fa-flip-horizontal {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=0, mirror=1)";
  -webkit-transform: scale(-1, 1);
          transform: scale(-1, 1);
}

.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(1, -1);
          transform: scale(1, -1);
}

.fa-flip-both, .fa-flip-horizontal.fa-flip-vertical {
  -ms-filter: "progid:DXImageTransform.Microsoft.BasicImage(rotation=2, mirror=1)";
  -webkit-transform: scale(-1, -1);
          transform: scale(-1, -1);
}

:root .fa-rotate-90,
:root .fa-rotate-180,
:root .fa-rotate-270,
:root .fa-flip-horizontal,
:root .fa-flip-vertical,
:root .fa-flip-both {
  -webkit-filter: none;
          filter: none;
}

.fa-stack {
  display: inline-block;
  height: 2em;
  position: relative;
  width: 2.5em;
}

.fa-stack-1x,
.fa-stack-2x {
  bottom: 0;
  left: 0;
  margin: auto;
  position: absolute;
  right: 0;
  top: 0;
}

.svg-inline--fa.fa-stack-1x {
  height: 1em;
  width: 1.25em;
}
.svg-inline--fa.fa-stack-2x {
  height: 2em;
  width: 2.5em;
}

.fa-inverse {
  color: #fff;
}

.sr-only {
  border: 0;
  clip: rect(0, 0, 0, 0);
  height: 1px;
  margin: -1px;
  overflow: hidden;
  padding: 0;
  position: absolute;
  width: 1px;
}

.sr-only-focusable:active, .sr-only-focusable:focus {
  clip: auto;
  height: auto;
  margin: 0;
  overflow: visible;
  position: static;
  width: auto;
}

.svg-inline--fa .fa-primary {
  fill: var(--fa-primary-color, currentColor);
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa .fa-secondary {
  fill: var(--fa-secondary-color, currentColor);
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-primary {
  opacity: 0.4;
  opacity: var(--fa-secondary-opacity, 0.4);
}

.svg-inline--fa.fa-swap-opacity .fa-secondary {
  opacity: 1;
  opacity: var(--fa-primary-opacity, 1);
}

.svg-inline--fa mask .fa-primary,
.svg-inline--fa mask .fa-secondary {
  fill: black;
}

.fad.fa-inverse {
  color: #fff;
}`;function css(){var o=DEFAULT_FAMILY_PREFIX,i=DEFAULT_REPLACEMENT_CLASS,s=config.familyPrefix,a=config.replacementClass,et=baseStyles;if(s!==o||a!==i){var tt=new RegExp("\\.".concat(o,"\\-"),"g"),ot=new RegExp("\\--".concat(o,"\\-"),"g"),dt=new RegExp("\\.".concat(i),"g");et=et.replace(tt,".".concat(s,"-")).replace(ot,"--".concat(s,"-")).replace(dt,".".concat(a))}return et}var Library=function(){function o(){_classCallCheck$4(this,o),this.definitions={}}return _createClass$4(o,[{key:"add",value:function(){for(var s=this,a=arguments.length,et=new Array(a),tt=0;tt<a;tt++)et[tt]=arguments[tt];var ot=et.reduce(this._pullDefinitions,{});Object.keys(ot).forEach(function(dt){s.definitions[dt]=_objectSpread({},s.definitions[dt]||{},ot[dt]),defineIcons(dt,ot[dt]),build()})}},{key:"reset",value:function(){this.definitions={}}},{key:"_pullDefinitions",value:function(s,a){var et=a.prefix&&a.iconName&&a.icon?{0:a}:a;return Object.keys(et).map(function(tt){var ot=et[tt],dt=ot.prefix,ht=ot.iconName,ft=ot.icon;s[dt]||(s[dt]={}),s[dt][ht]=ft}),s}}]),o}();function ensureCss(){config.autoAddCss&&!_cssInserted&&(insertCss(css()),_cssInserted=!0)}function apiObject(o,i){return Object.defineProperty(o,"abstract",{get:i}),Object.defineProperty(o,"html",{get:function(){return o.abstract.map(function(a){return toHtml(a)})}}),Object.defineProperty(o,"node",{get:function(){if(IS_DOM){var a=DOCUMENT.createElement("div");return a.innerHTML=o.html,a.children}}}),o}function findIconDefinition(o){var i=o.prefix,s=i===void 0?"fa":i,a=o.iconName;if(a)return iconFromMapping(library.definitions,s,a)||iconFromMapping(namespace.styles,s,a)}function resolveIcons(o){return function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=(i||{}).icon?i:findIconDefinition(i||{}),et=s.mask;return et&&(et=(et||{}).icon?et:findIconDefinition(et||{})),o(a,_objectSpread({},s,{mask:et}))}}var library=new Library,_cssInserted=!1,parse={transform:function o(i){return parseTransformString(i)}},icon=resolveIcons(function(o){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=i.transform,a=s===void 0?meaninglessTransform:s,et=i.symbol,tt=et===void 0?!1:et,ot=i.mask,dt=ot===void 0?null:ot,ht=i.maskId,ft=ht===void 0?null:ht,pt=i.title,mt=pt===void 0?null:pt,gt=i.titleId,_t=gt===void 0?null:gt,yt=i.classes,St=yt===void 0?[]:yt,Et=i.attributes,vt=Et===void 0?{}:Et,bt=i.styles,Tt=bt===void 0?{}:bt;if(o){var wt=o.prefix,Pt=o.iconName,At=o.icon;return apiObject(_objectSpread({type:"icon"},o),function(){return ensureCss(),config.autoA11y&&(mt?vt["aria-labelledby"]="".concat(config.replacementClass,"-title-").concat(_t||nextUniqueId()):(vt["aria-hidden"]="true",vt.focusable="false")),makeInlineSvgAbstract({icons:{main:asFoundIcon(At),mask:dt?asFoundIcon(dt.icon):{found:!1,width:null,height:null,icon:{}}},prefix:wt,iconName:Pt,transform:_objectSpread({},meaninglessTransform,a),symbol:tt,title:mt,maskId:ft,titleId:_t,extra:{attributes:vt,styles:Tt,classes:St}})})}});function ownKeys(o,i){var s=Object.keys(o);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(o);i&&(a=a.filter(function(et){return Object.getOwnPropertyDescriptor(o,et).enumerable})),s.push.apply(s,a)}return s}function _objectSpread2(o){for(var i=1;i<arguments.length;i++){var s=arguments[i]!=null?arguments[i]:{};i%2?ownKeys(Object(s),!0).forEach(function(a){_defineProperty$b(o,a,s[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(s)):ownKeys(Object(s)).forEach(function(a){Object.defineProperty(o,a,Object.getOwnPropertyDescriptor(s,a))})}return o}function _typeof$d(o){"@babel/helpers - typeof";return _typeof$d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$d(o)}function _defineProperty$b(o,i,s){return i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _objectWithoutPropertiesLoose$t(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function _objectWithoutProperties$t(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$t(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray$7(o)||_nonIterableSpread()}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray$7(o)}function _iterableToArray(o){if(typeof Symbol<"u"&&o[Symbol.iterator]!=null||o["@@iterator"]!=null)return Array.from(o)}function _unsupportedIterableToArray$7(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$7(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$7(o,i)}}function _arrayLikeToArray$7(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function classList(o){var i,s=o.beat,a=o.fade,et=o.beatFade,tt=o.bounce,ot=o.shake,dt=o.flash,ht=o.spin,ft=o.spinPulse,pt=o.spinReverse,mt=o.pulse,gt=o.fixedWidth,_t=o.inverse,yt=o.border,St=o.listItem,Et=o.flip,vt=o.size,bt=o.rotation,Tt=o.pull,wt=(i={"fa-beat":s,"fa-fade":a,"fa-beat-fade":et,"fa-bounce":tt,"fa-shake":ot,"fa-flash":dt,"fa-spin":ht,"fa-spin-reverse":pt,"fa-spin-pulse":ft,"fa-pulse":mt,"fa-fw":gt,"fa-inverse":_t,"fa-border":yt,"fa-li":St,"fa-flip":Et===!0,"fa-flip-horizontal":Et==="horizontal"||Et==="both","fa-flip-vertical":Et==="vertical"||Et==="both"},_defineProperty$b(i,"fa-".concat(vt),typeof vt<"u"&&vt!==null),_defineProperty$b(i,"fa-rotate-".concat(bt),typeof bt<"u"&&bt!==null&&bt!==0),_defineProperty$b(i,"fa-pull-".concat(Tt),typeof Tt<"u"&&Tt!==null),_defineProperty$b(i,"fa-swap-opacity",o.swapOpacity),i);return Object.keys(wt).map(function(Pt){return wt[Pt]?Pt:null}).filter(function(Pt){return Pt})}function _isNumerical(o){return o=o-0,o===o}function camelize(o){return _isNumerical(o)?o:(o=o.replace(/[\-_\s]+(.)?/g,function(i,s){return s?s.toUpperCase():""}),o.substr(0,1).toLowerCase()+o.substr(1))}var _excluded$1$1=["style"];function capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)}function styleToObject(o){return o.split(";").map(function(i){return i.trim()}).filter(function(i){return i}).reduce(function(i,s){var a=s.indexOf(":"),et=camelize(s.slice(0,a)),tt=s.slice(a+1).trim();return et.startsWith("webkit")?i[capitalize(et)]=tt:i[et]=tt,i},{})}function convert(o,i){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(typeof i=="string")return i;var a=(i.children||[]).map(function(ht){return convert(o,ht)}),et=Object.keys(i.attributes||{}).reduce(function(ht,ft){var pt=i.attributes[ft];switch(ft){case"class":ht.attrs.className=pt,delete i.attributes.class;break;case"style":ht.attrs.style=styleToObject(pt);break;default:ft.indexOf("aria-")===0||ft.indexOf("data-")===0?ht.attrs[ft.toLowerCase()]=pt:ht.attrs[camelize(ft)]=pt}return ht},{attrs:{}}),tt=s.style,ot=tt===void 0?{}:tt,dt=_objectWithoutProperties$t(s,_excluded$1$1);return et.attrs.style=_objectSpread2(_objectSpread2({},et.attrs.style),ot),o.apply(void 0,[i.tag,_objectSpread2(_objectSpread2({},et.attrs),dt)].concat(_toConsumableArray(a)))}var PRODUCTION=!1;try{PRODUCTION=!0}catch(o){}function log(){if(!PRODUCTION&&console&&typeof console.error=="function"){var o;(o=console).error.apply(o,arguments)}}function normalizeIconArgs(o){if(o&&_typeof$d(o)==="object"&&o.prefix&&o.iconName&&o.icon)return o;if(parse.icon)return parse.icon(o);if(o===null)return null;if(o&&_typeof$d(o)==="object"&&o.prefix&&o.iconName)return o;if(Array.isArray(o)&&o.length===2)return{prefix:o[0],iconName:o[1]};if(typeof o=="string")return{prefix:"fas",iconName:o}}function objectWithKey(o,i){return Array.isArray(i)&&i.length>0||!Array.isArray(i)&&i?_defineProperty$b({},o,i):{}}var _excluded$t=["forwardedRef"];function FontAwesomeIcon(o){var i=o.forwardedRef,s=_objectWithoutProperties$t(o,_excluded$t),a=s.icon,et=s.mask,tt=s.symbol,ot=s.className,dt=s.title,ht=s.titleId,ft=s.maskId,pt=normalizeIconArgs(a),mt=objectWithKey("classes",[].concat(_toConsumableArray(classList(s)),_toConsumableArray(ot.split(" ")))),gt=objectWithKey("transform",typeof s.transform=="string"?parse.transform(s.transform):s.transform),_t=objectWithKey("mask",normalizeIconArgs(et)),yt=icon(pt,_objectSpread2(_objectSpread2(_objectSpread2(_objectSpread2({},mt),gt),_t),{},{symbol:tt,title:dt,titleId:ht,maskId:ft}));if(!yt)return log("Could not find icon",pt),null;var St=yt.abstract,Et={ref:i};return Object.keys(s).forEach(function(vt){FontAwesomeIcon.defaultProps.hasOwnProperty(vt)||(Et[vt]=s[vt])}),convertCurry(St[0],Et)}FontAwesomeIcon.displayName="FontAwesomeIcon";FontAwesomeIcon.propTypes={beat:PropTypes.bool,border:PropTypes.bool,beatFade:PropTypes.bool,bounce:PropTypes.bool,className:PropTypes.string,fade:PropTypes.bool,flash:PropTypes.bool,mask:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),maskId:PropTypes.string,fixedWidth:PropTypes.bool,inverse:PropTypes.bool,flip:PropTypes.oneOf([!0,!1,"horizontal","vertical","both"]),icon:PropTypes.oneOfType([PropTypes.object,PropTypes.array,PropTypes.string]),listItem:PropTypes.bool,pull:PropTypes.oneOf(["right","left"]),pulse:PropTypes.bool,rotation:PropTypes.oneOf([0,90,180,270]),shake:PropTypes.bool,size:PropTypes.oneOf(["2xs","xs","sm","lg","xl","2xl","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:PropTypes.bool,spinPulse:PropTypes.bool,spinReverse:PropTypes.bool,symbol:PropTypes.oneOfType([PropTypes.bool,PropTypes.string]),title:PropTypes.string,titleId:PropTypes.string,transform:PropTypes.oneOfType([PropTypes.string,PropTypes.object]),swapOpacity:PropTypes.bool};FontAwesomeIcon.defaultProps={border:!1,className:"",mask:null,maskId:null,fixedWidth:!1,inverse:!1,flip:!1,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,spinPulse:!1,spinReverse:!1,beat:!1,fade:!1,beatFade:!1,bounce:!1,shake:!1,symbol:!1,title:"",titleId:null,transform:null,swapOpacity:!1};var convertCurry=convert.bind(null,React.createElement),faArrowUp={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="arrow-up",a=448,et=512,tt=[],ot="f062",dt="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faArrowUp=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faArrowUp);var faArrowRight={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="arrow-right",a=448,et=512,tt=[],ot="f061",dt="M190.5 66.9l22.2-22.2c9.4-9.4 24.6-9.4 33.9 0L441 239c9.4 9.4 9.4 24.6 0 33.9L246.6 467.3c-9.4 9.4-24.6 9.4-33.9 0l-22.2-22.2c-9.5-9.5-9.3-25 .4-34.3L311.4 296H24c-13.3 0-24-10.7-24-24v-32c0-13.3 10.7-24 24-24h287.4L190.9 101.2c-9.8-9.3-10-24.8-.4-34.3z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faArrowRight=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faArrowRight);var faArrowDown={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="arrow-down",a=448,et=512,tt=[],ot="f063",dt="M413.1 222.5l22.2 22.2c9.4 9.4 9.4 24.6 0 33.9L241 473c-9.4 9.4-24.6 9.4-33.9 0L12.7 278.6c-9.4-9.4-9.4-24.6 0-33.9l22.2-22.2c9.5-9.5 25-9.3 34.3.4L184 343.4V56c0-13.3 10.7-24 24-24h32c13.3 0 24 10.7 24 24v287.4l114.8-120.5c9.3-9.8 24.8-10 34.3-.4z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faArrowDown=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faArrowDown);var faArrowLeft={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="arrow-left",a=448,et=512,tt=[],ot="f060",dt="M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faArrowLeft=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faArrowLeft);var _excluded$s=["className","direction","children"];function _extends$s(){return _extends$s=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$s.apply(this,arguments)}function _objectWithoutProperties$s(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$s(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$s(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ArrowButton=function o(i){var s=i.className,a=i.direction,et=i.children,tt=_objectWithoutProperties$s(i,_excluded$s),ot="".concat(prefix,"-button--arrow"),dt=function(){if(a==="up")return faArrowUp.faArrowUp;if(a==="right")return faArrowRight.faArrowRight;if(a==="down")return faArrowDown.faArrowDown;if(a==="left")return faArrowLeft.faArrowLeft}();return React.createElement(Button,_extends$s({},tt,{className:classNames(ot,s),icon:React.createElement(FontAwesomeIcon,{icon:dt})}),et)};ArrowButton.defaultProps={className:"",direction:"right"};var faEllipsisV={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="ellipsis-v",a=192,et=512,tt=[],ot="f142",dt="M96 184c39.8 0 72 32.2 72 72s-32.2 72-72 72-72-32.2-72-72 32.2-72 72-72zM24 80c0 39.8 32.2 72 72 72s72-32.2 72-72S135.8 8 96 8 24 40.2 24 80zm0 352c0 39.8 32.2 72 72 72s72-32.2 72-72-32.2-72-72-72-72 32.2-72 72z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faEllipsisV=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faEllipsisV);var faPaperPlane={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="paper-plane",a=512,et=512,tt=[],ot="f1d8",dt="M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faPaperPlane=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faPaperPlane);var _excluded$r=["className","children"];function _extends$r(){return _extends$r=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$r.apply(this,arguments)}function _objectWithoutProperties$r(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$r(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$r(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var SendButton=function o(i){var s=i.className,a=i.children,et=_objectWithoutProperties$r(i,_excluded$r),tt="".concat(prefix,"-button--send");return React.createElement(Button,_extends$r({},et,{className:classNames(tt,s),icon:React.createElement(FontAwesomeIcon,{icon:faPaperPlane.faPaperPlane})}),a)};SendButton.defaultProps={className:""};var faPaperclip={};(function(o){Object.defineProperty(o,"__esModule",{value:!0});var i="fas",s="paperclip",a=448,et=512,tt=[],ot="f0c6",dt="M43.246 466.142c-58.43-60.289-57.341-157.511 1.386-217.581L254.392 34c44.316-45.332 116.351-45.336 160.671 0 43.89 44.894 43.943 117.329 0 162.276L232.214 383.128c-29.855 30.537-78.633 30.111-107.982-.998-28.275-29.97-27.368-77.473 1.452-106.953l143.743-146.835c6.182-6.314 16.312-6.422 22.626-.241l22.861 22.379c6.315 6.182 6.422 16.312.241 22.626L171.427 319.927c-4.932 5.045-5.236 13.428-.648 18.292 4.372 4.634 11.245 4.711 15.688.165l182.849-186.851c19.613-20.062 19.613-52.725-.011-72.798-19.189-19.627-49.957-19.637-69.154 0L90.39 293.295c-34.763 35.56-35.299 93.12-1.191 128.313 34.01 35.093 88.985 35.137 123.058.286l172.06-175.999c6.177-6.319 16.307-6.433 22.626-.256l22.877 22.364c6.319 6.177 6.434 16.307.256 22.626l-172.06 175.998c-59.576 60.938-155.943 60.216-214.77-.485z";o.definition={prefix:i,iconName:s,icon:[a,et,tt,ot,dt]},o.faPaperclip=o.definition,o.prefix=i,o.iconName=s,o.width=a,o.height=et,o.ligatures=tt,o.unicode=ot,o.svgPathData=dt})(faPaperclip);var _excluded$q=["className","children"];function _extends$q(){return _extends$q=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$q.apply(this,arguments)}function _objectWithoutProperties$q(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$q(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$q(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var AttachmentButton=function o(i){var s=i.className,a=i.children,et=_objectWithoutProperties$q(i,_excluded$q),tt="".concat(prefix,"-button--attachment");return React.createElement(Button,_extends$q({},et,{className:classNames(tt,s),icon:React.createElement(FontAwesomeIcon,{icon:faPaperclip.faPaperclip})}),a)};AttachmentButton.defaultProps={className:""};var _excluded$p=["onClick","children","className"];function _extends$p(){return _extends$p=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$p.apply(this,arguments)}function _objectWithoutProperties$p(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$p(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$p(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ConversationHeaderBack=function o(i){var s=i.onClick,a=i.children,et=i.className,tt=_objectWithoutProperties$p(i,_excluded$p),ot="".concat(prefix,"-conversation-header__back");return React.createElement("div",_extends$p({},tt,{className:classNames(ot,et)}),typeof a<"u"?a:React.createElement(ArrowButton,{direction:"left",onClick:s}))};ConversationHeaderBack.displayName="ConversationHeader.Back";ConversationHeaderBack.defaultProps={children:void 0,onClick:function o(){}};var _excluded$o=["children","className"];function _extends$o(){return _extends$o=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$o.apply(this,arguments)}function _objectWithoutProperties$o(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$o(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$o(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ConversationHeaderActions=function o(i){var s=i.children,a=i.className,et=_objectWithoutProperties$o(i,_excluded$o),tt="".concat(prefix,"-conversation-header__actions");return React.createElement("section",_extends$o({},et,{className:classNames(tt,a)}),s)};ConversationHeaderActions.displayName="ConversationHeader.Actions";ConversationHeaderActions.defaultProps={children:void 0};var _excluded$n=["userName","info","children","className"];function _extends$n(){return _extends$n=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$n.apply(this,arguments)}function _objectWithoutProperties$n(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$n(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$n(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ConversationHeaderContent=function o(i){var s=i.userName,a=i.info,et=i.children,tt=i.className,ot=_objectWithoutProperties$n(i,_excluded$n),dt="".concat(prefix,"-conversation-header__content");return React.createElement("div",_extends$n({},ot,{className:classNames(dt,tt)}),typeof et<"u"?et:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-conversation-header__user-name")},s),React.createElement("div",{className:"".concat(prefix,"-conversation-header__info")},a)))};ConversationHeaderContent.displayName="ConversationHeader.Content";ConversationHeaderContent.defaultProps={children:void 0,userName:"",info:""};var _excluded$m=["children","className"];function _extends$m(){return _extends$m=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$m.apply(this,arguments)}function _slicedToArray$6(o,i){return _arrayWithHoles$6(o)||_iterableToArrayLimit$6(o,i)||_unsupportedIterableToArray$6(o,i)||_nonIterableRest$6()}function _nonIterableRest$6(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$6(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$6(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$6(o,i)}}function _arrayLikeToArray$6(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit$6(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles$6(o){if(Array.isArray(o))return o}function _objectWithoutProperties$m(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$m(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$m(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ConversationHeader=function o(i){var s=i.children,a=i.className,et=_objectWithoutProperties$m(i,_excluded$m),tt="".concat(prefix,"-conversation-header"),ot=getChildren(s,[ConversationHeaderBack,Avatar,AvatarGroup,ConversationHeaderContent,ConversationHeaderActions]),dt=_slicedToArray$6(ot,5),ht=dt[0],ft=dt[1],pt=dt[2],mt=dt[3],gt=dt[4];return React.createElement("div",_extends$m({},et,{className:classNames(tt,a)}),ht,ft&&React.createElement("div",{className:"".concat(tt,"__avatar")},ft),!ft&&pt&&React.createElement("div",{className:"".concat(tt,"__avatar")},pt),mt,gt)};ConversationHeader.displayName="ConversationHeader";ConversationHeader.defaultProps={children:void 0};ConversationHeader.Back=ConversationHeaderBack;ConversationHeader.Actions=ConversationHeaderActions;ConversationHeader.Content=ConversationHeaderContent;/*!
 * perfect-scrollbar v1.5.0
 * Copyright 2020 Hyunje Jun, MDBootstrap and Contributors
 * Licensed under MIT
 */function get(o){return getComputedStyle(o)}function set(o,i){for(var s in i){var a=i[s];typeof a=="number"&&(a=a+"px"),o.style[s]=a}return o}function div(o){var i=document.createElement("div");return i.className=o,i}var elMatches=typeof Element<"u"&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector);function matches(o,i){if(!elMatches)throw new Error("No element matching method supported");return elMatches.call(o,i)}function remove(o){o.remove?o.remove():o.parentNode&&o.parentNode.removeChild(o)}function queryChildren(o,i){return Array.prototype.filter.call(o.children,function(s){return matches(s,i)})}var cls={main:"ps",rtl:"ps__rtl",element:{thumb:function o(i){return"ps__thumb-"+i},rail:function o(i){return"ps__rail-"+i},consuming:"ps__child--consume"},state:{focus:"ps--focus",clicking:"ps--clicking",active:function o(i){return"ps--active-"+i},scrolling:function o(i){return"ps--scrolling-"+i}}},scrollingClassTimeout={x:null,y:null};function addScrollingClass(o,i){var s=o.element.classList,a=cls.state.scrolling(i);s.contains(a)?clearTimeout(scrollingClassTimeout[i]):s.add(a)}function removeScrollingClass(o,i){scrollingClassTimeout[i]=setTimeout(function(){return o.isAlive&&o.element.classList.remove(cls.state.scrolling(i))},o.settings.scrollingThreshold)}function setScrollingClassInstantly(o,i){addScrollingClass(o,i),removeScrollingClass(o,i)}var EventElement=function o(i){this.element=i,this.handlers={}},prototypeAccessors={isEmpty:{configurable:!0}};EventElement.prototype.bind=function o(i,s){typeof this.handlers[i]>"u"&&(this.handlers[i]=[]),this.handlers[i].push(s);var a=["touchstart","wheel","touchmove"];a.indexOf(i)!==-1?this.element.addEventListener(i,s,{passive:!1}):this.element.addEventListener(i,s,!1)};EventElement.prototype.unbind=function o(i,s){var a=this;this.handlers[i]=this.handlers[i].filter(function(et){return s&&et!==s?!0:(a.element.removeEventListener(i,et,!1),!1)})};EventElement.prototype.unbindAll=function o(){for(var i in this.handlers)this.unbind(i)};prototypeAccessors.isEmpty.get=function(){var o=this;return Object.keys(this.handlers).every(function(i){return o.handlers[i].length===0})};Object.defineProperties(EventElement.prototype,prototypeAccessors);var EventManager=function o(){this.eventElements=[]};EventManager.prototype.eventElement=function o(i){var s=this.eventElements.filter(function(a){return a.element===i})[0];return s||(s=new EventElement(i),this.eventElements.push(s)),s};EventManager.prototype.bind=function o(i,s,a){this.eventElement(i).bind(s,a)};EventManager.prototype.unbind=function o(i,s,a){var et=this.eventElement(i);et.unbind(s,a),et.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(et),1)};EventManager.prototype.unbindAll=function o(){this.eventElements.forEach(function(i){return i.unbindAll()}),this.eventElements=[]};EventManager.prototype.once=function o(i,s,a){var et=this.eventElement(i),tt=function ot(dt){et.unbind(s,ot),a(dt)};et.bind(s,tt)};function createEvent(o){if(typeof window.CustomEvent=="function")return new CustomEvent(o);var i=document.createEvent("CustomEvent");return i.initCustomEvent(o,!1,!1,void 0),i}function processScrollDiff(o,i,s,a,et,tt){a===void 0&&(a=!0),et===void 0&&(et=!1);var ot;if(i==="top")ot=["contentHeight","containerHeight","scrollTop","y","up","down"];else if(i==="left")ot=["contentWidth","containerWidth","scrollLeft","x","left","right"];else throw new Error("A proper axis should be provided");processScrollDiff$1(o,s,ot,a,et,tt)}function processScrollDiff$1(o,i,s,a,et,tt){var ot=s[0],dt=s[1],ht=s[2],ft=s[3],pt=s[4],mt=s[5];a===void 0&&(a=!0),et===void 0&&(et=!1);var gt=o.element;o.reach[ft]=null;var _t=tt===!0?o[ot]!==o[dt]:!0;_t&&gt[ht]<1&&(o.reach[ft]="start"),_t&&gt[ht]>o[ot]-o[dt]-1&&(o.reach[ft]="end"),i&&(gt.dispatchEvent(createEvent("ps-scroll-"+ft)),i<0?gt.dispatchEvent(createEvent("ps-scroll-"+pt)):i>0&&gt.dispatchEvent(createEvent("ps-scroll-"+mt)),a&&setScrollingClassInstantly(o,ft)),o.reach[ft]&&(i||et)&&gt.dispatchEvent(createEvent("ps-"+ft+"-reach-"+o.reach[ft]))}function toInt(o){return parseInt(o,10)||0}function isEditable(o){return matches(o,"input,[contenteditable]")||matches(o,"select,[contenteditable]")||matches(o,"textarea,[contenteditable]")||matches(o,"button,[contenteditable]")}function outerWidth(o){var i=get(o);return toInt(i.width)+toInt(i.paddingLeft)+toInt(i.paddingRight)+toInt(i.borderLeftWidth)+toInt(i.borderRightWidth)}var env={isWebKit:typeof document<"u"&&"WebkitAppearance"in document.documentElement.style,supportsTouch:typeof window<"u"&&("ontouchstart"in window||"maxTouchPoints"in window.navigator&&window.navigator.maxTouchPoints>0||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:typeof navigator<"u"&&navigator.msMaxTouchPoints,isChrome:typeof navigator<"u"&&/Chrome/i.test(navigator&&navigator.userAgent)};function updateGeometry(o){var i=o.element,s=Math.floor(i.scrollTop),a=i.getBoundingClientRect();o.containerWidth=Math.round(a.width),o.containerHeight=Math.round(a.height),o.contentWidth=i.scrollWidth,o.contentHeight=i.scrollHeight,i.contains(o.scrollbarXRail)||(queryChildren(i,cls.element.rail("x")).forEach(function(et){return remove(et)}),i.appendChild(o.scrollbarXRail)),i.contains(o.scrollbarYRail)||(queryChildren(i,cls.element.rail("y")).forEach(function(et){return remove(et)}),i.appendChild(o.scrollbarYRail)),!o.settings.suppressScrollX&&o.containerWidth+o.settings.scrollXMarginOffset<o.contentWidth?(o.scrollbarXActive=!0,o.railXWidth=o.containerWidth-o.railXMarginWidth,o.railXRatio=o.containerWidth/o.railXWidth,o.scrollbarXWidth=getThumbSize(o,toInt(o.railXWidth*o.containerWidth/o.contentWidth)),o.scrollbarXLeft=toInt((o.negativeScrollAdjustment+i.scrollLeft)*(o.railXWidth-o.scrollbarXWidth)/(o.contentWidth-o.containerWidth))):o.scrollbarXActive=!1,!o.settings.suppressScrollY&&o.containerHeight+o.settings.scrollYMarginOffset<o.contentHeight?(o.scrollbarYActive=!0,o.railYHeight=o.containerHeight-o.railYMarginHeight,o.railYRatio=o.containerHeight/o.railYHeight,o.scrollbarYHeight=getThumbSize(o,toInt(o.railYHeight*o.containerHeight/o.contentHeight)),o.scrollbarYTop=toInt(s*(o.railYHeight-o.scrollbarYHeight)/(o.contentHeight-o.containerHeight))):o.scrollbarYActive=!1,o.scrollbarXLeft>=o.railXWidth-o.scrollbarXWidth&&(o.scrollbarXLeft=o.railXWidth-o.scrollbarXWidth),o.scrollbarYTop>=o.railYHeight-o.scrollbarYHeight&&(o.scrollbarYTop=o.railYHeight-o.scrollbarYHeight),updateCss(i,o),o.scrollbarXActive?i.classList.add(cls.state.active("x")):(i.classList.remove(cls.state.active("x")),o.scrollbarXWidth=0,o.scrollbarXLeft=0,i.scrollLeft=o.isRtl===!0?o.contentWidth:0),o.scrollbarYActive?i.classList.add(cls.state.active("y")):(i.classList.remove(cls.state.active("y")),o.scrollbarYHeight=0,o.scrollbarYTop=0,i.scrollTop=0)}function getThumbSize(o,i){return o.settings.minScrollbarLength&&(i=Math.max(i,o.settings.minScrollbarLength)),o.settings.maxScrollbarLength&&(i=Math.min(i,o.settings.maxScrollbarLength)),i}function updateCss(o,i){var s={width:i.railXWidth},a=Math.floor(o.scrollTop);i.isRtl?s.left=i.negativeScrollAdjustment+o.scrollLeft+i.containerWidth-i.contentWidth:s.left=o.scrollLeft,i.isScrollbarXUsingBottom?s.bottom=i.scrollbarXBottom-a:s.top=i.scrollbarXTop+a,set(i.scrollbarXRail,s);var et={top:a,height:i.railYHeight};i.isScrollbarYUsingRight?i.isRtl?et.right=i.contentWidth-(i.negativeScrollAdjustment+o.scrollLeft)-i.scrollbarYRight-i.scrollbarYOuterWidth-9:et.right=i.scrollbarYRight-o.scrollLeft:i.isRtl?et.left=i.negativeScrollAdjustment+o.scrollLeft+i.containerWidth*2-i.contentWidth-i.scrollbarYLeft-i.scrollbarYOuterWidth:et.left=i.scrollbarYLeft+o.scrollLeft,set(i.scrollbarYRail,et),set(i.scrollbarX,{left:i.scrollbarXLeft,width:i.scrollbarXWidth-i.railBorderXWidth}),set(i.scrollbarY,{top:i.scrollbarYTop,height:i.scrollbarYHeight-i.railBorderYWidth})}function clickRail(o){o.element,o.event.bind(o.scrollbarY,"mousedown",function(i){return i.stopPropagation()}),o.event.bind(o.scrollbarYRail,"mousedown",function(i){var s=i.pageY-window.pageYOffset-o.scrollbarYRail.getBoundingClientRect().top,a=s>o.scrollbarYTop?1:-1;o.element.scrollTop+=a*o.containerHeight,updateGeometry(o),i.stopPropagation()}),o.event.bind(o.scrollbarX,"mousedown",function(i){return i.stopPropagation()}),o.event.bind(o.scrollbarXRail,"mousedown",function(i){var s=i.pageX-window.pageXOffset-o.scrollbarXRail.getBoundingClientRect().left,a=s>o.scrollbarXLeft?1:-1;o.element.scrollLeft+=a*o.containerWidth,updateGeometry(o),i.stopPropagation()})}function dragThumb(o){bindMouseScrollHandler(o,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x","scrollbarXRail"]),bindMouseScrollHandler(o,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y","scrollbarYRail"])}function bindMouseScrollHandler(o,i){var s=i[0],a=i[1],et=i[2],tt=i[3],ot=i[4],dt=i[5],ht=i[6],ft=i[7],pt=i[8],mt=o.element,gt=null,_t=null,yt=null;function St(bt){bt.touches&&bt.touches[0]&&(bt[et]=bt.touches[0].pageY),mt[ht]=gt+yt*(bt[et]-_t),addScrollingClass(o,ft),updateGeometry(o),bt.stopPropagation(),bt.preventDefault()}function Et(){removeScrollingClass(o,ft),o[pt].classList.remove(cls.state.clicking),o.event.unbind(o.ownerDocument,"mousemove",St)}function vt(bt,Tt){gt=mt[ht],Tt&&bt.touches&&(bt[et]=bt.touches[0].pageY),_t=bt[et],yt=(o[a]-o[s])/(o[tt]-o[dt]),Tt?o.event.bind(o.ownerDocument,"touchmove",St):(o.event.bind(o.ownerDocument,"mousemove",St),o.event.once(o.ownerDocument,"mouseup",Et),bt.preventDefault()),o[pt].classList.add(cls.state.clicking),bt.stopPropagation()}o.event.bind(o[ot],"mousedown",function(bt){vt(bt)}),o.event.bind(o[ot],"touchstart",function(bt){vt(bt,!0)})}function keyboard(o){var i=o.element,s=function(){return matches(i,":hover")},a=function(){return matches(o.scrollbarX,":focus")||matches(o.scrollbarY,":focus")};function et(tt,ot){var dt=Math.floor(i.scrollTop);if(tt===0){if(!o.scrollbarYActive)return!1;if(dt===0&&ot>0||dt>=o.contentHeight-o.containerHeight&&ot<0)return!o.settings.wheelPropagation}var ht=i.scrollLeft;if(ot===0){if(!o.scrollbarXActive)return!1;if(ht===0&&tt<0||ht>=o.contentWidth-o.containerWidth&&tt>0)return!o.settings.wheelPropagation}return!0}o.event.bind(o.ownerDocument,"keydown",function(tt){if(!(tt.isDefaultPrevented&&tt.isDefaultPrevented()||tt.defaultPrevented)&&!(!s()&&!a())){var ot=document.activeElement?document.activeElement:o.ownerDocument.activeElement;if(ot){if(ot.tagName==="IFRAME")ot=ot.contentDocument.activeElement;else for(;ot.shadowRoot;)ot=ot.shadowRoot.activeElement;if(isEditable(ot))return}var dt=0,ht=0;switch(tt.which){case 37:tt.metaKey?dt=-o.contentWidth:tt.altKey?dt=-o.containerWidth:dt=-30;break;case 38:tt.metaKey?ht=o.contentHeight:tt.altKey?ht=o.containerHeight:ht=30;break;case 39:tt.metaKey?dt=o.contentWidth:tt.altKey?dt=o.containerWidth:dt=30;break;case 40:tt.metaKey?ht=-o.contentHeight:tt.altKey?ht=-o.containerHeight:ht=-30;break;case 32:tt.shiftKey?ht=o.containerHeight:ht=-o.containerHeight;break;case 33:ht=o.containerHeight;break;case 34:ht=-o.containerHeight;break;case 36:ht=o.contentHeight;break;case 35:ht=-o.contentHeight;break;default:return}o.settings.suppressScrollX&&dt!==0||o.settings.suppressScrollY&&ht!==0||(i.scrollTop-=ht,i.scrollLeft+=dt,updateGeometry(o),et(dt,ht)&&tt.preventDefault())}})}function wheel(o){var i=o.element;function s(ot,dt){var ht=Math.floor(i.scrollTop),ft=i.scrollTop===0,pt=ht+i.offsetHeight===i.scrollHeight,mt=i.scrollLeft===0,gt=i.scrollLeft+i.offsetWidth===i.scrollWidth,_t;return Math.abs(dt)>Math.abs(ot)?_t=ft||pt:_t=mt||gt,_t?!o.settings.wheelPropagation:!0}function a(ot){var dt=ot.deltaX,ht=-1*ot.deltaY;return(typeof dt>"u"||typeof ht>"u")&&(dt=-1*ot.wheelDeltaX/6,ht=ot.wheelDeltaY/6),ot.deltaMode&&ot.deltaMode===1&&(dt*=10,ht*=10),dt!==dt&&ht!==ht&&(dt=0,ht=ot.wheelDelta),ot.shiftKey?[-ht,-dt]:[dt,ht]}function et(ot,dt,ht){if(!env.isWebKit&&i.querySelector("select:focus"))return!0;if(!i.contains(ot))return!1;for(var ft=ot;ft&&ft!==i;){if(ft.classList.contains(cls.element.consuming))return!0;var pt=get(ft);if(ht&&pt.overflowY.match(/(scroll|auto)/)){var mt=ft.scrollHeight-ft.clientHeight;if(mt>0&&(ft.scrollTop>0&&ht<0||ft.scrollTop<mt&&ht>0))return!0}if(dt&&pt.overflowX.match(/(scroll|auto)/)){var gt=ft.scrollWidth-ft.clientWidth;if(gt>0&&(ft.scrollLeft>0&&dt<0||ft.scrollLeft<gt&&dt>0))return!0}ft=ft.parentNode}return!1}function tt(ot){var dt=a(ot),ht=dt[0],ft=dt[1];if(!et(ot.target,ht,ft)){var pt=!1;o.settings.useBothWheelAxes?o.scrollbarYActive&&!o.scrollbarXActive?(ft?i.scrollTop-=ft*o.settings.wheelSpeed:i.scrollTop+=ht*o.settings.wheelSpeed,pt=!0):o.scrollbarXActive&&!o.scrollbarYActive&&(ht?i.scrollLeft+=ht*o.settings.wheelSpeed:i.scrollLeft-=ft*o.settings.wheelSpeed,pt=!0):(i.scrollTop-=ft*o.settings.wheelSpeed,i.scrollLeft+=ht*o.settings.wheelSpeed),updateGeometry(o),pt=pt||s(ht,ft),pt&&!ot.ctrlKey&&(ot.stopPropagation(),ot.preventDefault())}}typeof window.onwheel<"u"?o.event.bind(i,"wheel",tt):typeof window.onmousewheel<"u"&&o.event.bind(i,"mousewheel",tt)}function touch(o){if(!env.supportsTouch&&!env.supportsIePointer)return;var i=o.element;function s(yt,St){var Et=Math.floor(i.scrollTop),vt=Math.ceil(i.scrollLeft),bt=Math.abs(yt),Tt=Math.abs(St);if(!o.settings.wheelPropagation)return!0;if(Tt>bt){if(o.settings.suppressScrollY)return!1;if(St>0)return Et!==0;if(St<0)return Et<o.contentHeight-o.containerHeight}else if(bt>Tt){if(o.settings.suppressScrollX)return!1;if(yt>0)return vt!==0;if(St<0)return vt<o.contentWidth-o.containerWidth}return!0}function a(yt,St){i.scrollTop-=St,i.scrollLeft-=yt,updateGeometry(o)}var et={},tt=0,ot={},dt=null;function ht(yt){return yt.targetTouches?yt.targetTouches[0]:yt}function ft(yt){return yt.pointerType&&yt.pointerType==="pen"&&yt.buttons===0?!1:!!(yt.targetTouches&&yt.targetTouches.length===1||yt.pointerType&&yt.pointerType!=="mouse"&&yt.pointerType!==yt.MSPOINTER_TYPE_MOUSE)}function pt(yt){if(ft(yt)){var St=ht(yt);et.pageX=St.pageX,et.pageY=St.pageY,tt=new Date().getTime(),dt!==null&&clearInterval(dt)}}function mt(yt,St,Et){if(!i.contains(yt))return!1;for(var vt=yt;vt&&vt!==i;){if(vt.classList.contains(cls.element.consuming))return!0;var bt=get(vt);if(Et&&bt.overflowY.match(/(scroll|auto)/)){var Tt=vt.scrollHeight-vt.clientHeight;if(Tt>0&&(vt.scrollTop>0&&Et<0||vt.scrollTop<Tt&&Et>0))return!0}if(St&&bt.overflowX.match(/(scroll|auto)/)){var wt=vt.scrollWidth-vt.clientWidth;if(wt>0&&(vt.scrollLeft>0&&St<0||vt.scrollLeft<wt&&St>0))return!0}vt=vt.parentNode}return!1}function gt(yt){if(ft(yt)){var St=ht(yt),Et={pageX:St.pageX,pageY:St.pageY},vt=Et.pageX-et.pageX,bt=Et.pageY-et.pageY;if(mt(yt.target,vt,bt))return;a(vt,bt),et=Et;var Tt=new Date().getTime(),wt=Tt-tt;wt>0&&(ot.x=vt/wt,ot.y=bt/wt,tt=Tt),yt.cancelable&&s(vt,bt)&&yt.preventDefault()}}function _t(){o.settings.swipeEasing&&(clearInterval(dt),dt=setInterval(function(){if(o.isInitialized){clearInterval(dt);return}if(!ot.x&&!ot.y){clearInterval(dt);return}if(Math.abs(ot.x)<.01&&Math.abs(ot.y)<.01){clearInterval(dt);return}a(ot.x*30,ot.y*30),ot.x*=.8,ot.y*=.8},10))}env.supportsTouch?(o.event.bind(i,"touchstart",pt),o.event.bind(i,"touchmove",gt),o.event.bind(i,"touchend",_t)):env.supportsIePointer&&(window.PointerEvent?(o.event.bind(i,"pointerdown",pt),o.event.bind(i,"pointermove",gt),o.event.bind(i,"pointerup",_t)):window.MSPointerEvent&&(o.event.bind(i,"MSPointerDown",pt),o.event.bind(i,"MSPointerMove",gt),o.event.bind(i,"MSPointerUp",_t)))}var defaultSettings=function o(){return{handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!0,wheelSpeed:1}},handlers={"click-rail":clickRail,"drag-thumb":dragThumb,keyboard,wheel,touch},PerfectScrollbar=function o(i,s){var a=this;if(s===void 0&&(s={}),typeof i=="string"&&(i=document.querySelector(i)),!i||!i.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");this.element=i,i.classList.add(cls.main),this.settings=defaultSettings();for(var et in s)this.settings[et]=s[et];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var tt=function(){return i.classList.add(cls.state.focus)},ot=function(){return i.classList.remove(cls.state.focus)};this.isRtl=get(i).direction==="rtl",this.isRtl===!0&&i.classList.add(cls.rtl),this.isNegativeScroll=function(){var ft=i.scrollLeft,pt=null;return i.scrollLeft=-1,pt=i.scrollLeft<0,i.scrollLeft=ft,pt}(),this.negativeScrollAdjustment=this.isNegativeScroll?i.scrollWidth-i.clientWidth:0,this.event=new EventManager,this.ownerDocument=i.ownerDocument||document,this.scrollbarXRail=div(cls.element.rail("x")),i.appendChild(this.scrollbarXRail),this.scrollbarX=div(cls.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",tt),this.event.bind(this.scrollbarX,"blur",ot),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var dt=get(this.scrollbarXRail);this.scrollbarXBottom=parseInt(dt.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=toInt(dt.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=toInt(dt.borderLeftWidth)+toInt(dt.borderRightWidth),set(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=toInt(dt.marginLeft)+toInt(dt.marginRight),set(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=div(cls.element.rail("y")),i.appendChild(this.scrollbarYRail),this.scrollbarY=div(cls.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",tt),this.event.bind(this.scrollbarY,"blur",ot),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var ht=get(this.scrollbarYRail);this.scrollbarYRight=parseInt(ht.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=toInt(ht.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?outerWidth(this.scrollbarY):null,this.railBorderYWidth=toInt(ht.borderTopWidth)+toInt(ht.borderBottomWidth),set(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=toInt(ht.marginTop)+toInt(ht.marginBottom),set(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:i.scrollLeft<=0?"start":i.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:i.scrollTop<=0?"start":i.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(ft){return handlers[ft](a)}),this.lastScrollTop=Math.floor(i.scrollTop),this.lastScrollLeft=i.scrollLeft,this.event.bind(this.element,"scroll",function(ft){return a.onScroll(ft)}),updateGeometry(this)};PerfectScrollbar.prototype.update=function o(i){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,set(this.scrollbarXRail,{display:"block"}),set(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=toInt(get(this.scrollbarXRail).marginLeft)+toInt(get(this.scrollbarXRail).marginRight),this.railYMarginHeight=toInt(get(this.scrollbarYRail).marginTop)+toInt(get(this.scrollbarYRail).marginBottom),set(this.scrollbarXRail,{display:"none"}),set(this.scrollbarYRail,{display:"none"}),updateGeometry(this),processScrollDiff(this,"top",0,!1,!0,i),processScrollDiff(this,"left",0,!1,!0,i),set(this.scrollbarXRail,{display:""}),set(this.scrollbarYRail,{display:""}))};PerfectScrollbar.prototype.onScroll=function o(i){this.isAlive&&(updateGeometry(this),processScrollDiff(this,"top",this.element.scrollTop-this.lastScrollTop),processScrollDiff(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=Math.floor(this.element.scrollTop),this.lastScrollLeft=this.element.scrollLeft)};PerfectScrollbar.prototype.destroy=function o(){this.isAlive&&(this.event.unbindAll(),remove(this.scrollbarX),remove(this.scrollbarY),remove(this.scrollbarXRail),remove(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)};PerfectScrollbar.prototype.removePsClasses=function o(){this.element.className=this.element.className.split(" ").filter(function(i){return!i.match(/^ps([-_].+|)$/)}).join(" ")};function _typeof$c(o){"@babel/helpers - typeof";return _typeof$c=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$c(o)}var _excluded$l=["className","style","option","options","containerRef","onScrollY","onScrollX","onScrollUp","onScrollDown","onScrollLeft","onScrollRight","onYReachStart","onYReachEnd","onXReachStart","onXReachEnd","component","onSync","children"];function _extends$l(){return _extends$l=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$l.apply(this,arguments)}function _objectWithoutProperties$l(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$l(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$l(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function _classCallCheck$3(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties$3(o,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,_toPropertyKey$b(a.key),a)}}function _createClass$3(o,i,s){return i&&_defineProperties$3(o.prototype,i),s&&_defineProperties$3(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function _toPropertyKey$b(o){var i=_toPrimitive$b(o,"string");return _typeof$c(i)==="symbol"?i:String(i)}function _toPrimitive$b(o,i){if(_typeof$c(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$c(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _inherits$3(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),i&&_setPrototypeOf$3(o,i)}function _setPrototypeOf$3(o,i){return _setPrototypeOf$3=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,et){return a.__proto__=et,a},_setPrototypeOf$3(o,i)}function _createSuper$3(o){var i=_isNativeReflectConstruct$3();return function(){var a=_getPrototypeOf$3(o),et;if(i){var tt=_getPrototypeOf$3(this).constructor;et=Reflect.construct(a,arguments,tt)}else et=a.apply(this,arguments);return _possibleConstructorReturn$3(this,et)}}function _possibleConstructorReturn$3(o,i){if(i&&(_typeof$c(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$3(o)}function _assertThisInitialized$3(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _isNativeReflectConstruct$3(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$3(o){return _getPrototypeOf$3=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf$3(o)}var handlerNameByEvent={"ps-scroll-y":"onScrollY","ps-scroll-x":"onScrollX","ps-scroll-up":"onScrollUp","ps-scroll-down":"onScrollDown","ps-scroll-left":"onScrollLeft","ps-scroll-right":"onScrollRight","ps-y-reach-start":"onYReachStart","ps-y-reach-end":"onYReachEnd","ps-x-reach-start":"onXReachStart","ps-x-reach-end":"onXReachEnd"};Object.freeze(handlerNameByEvent);var ScrollBar=function(o){_inherits$3(s,o);var i=_createSuper$3(s);function s(a){var et;return _classCallCheck$3(this,s),et=i.call(this,a),et.handleRef=et.handleRef.bind(_assertThisInitialized$3(et)),et._handlerByEvent={},et}return _createClass$3(s,[{key:"componentDidMount",value:function(){this.props.option&&console.warn('react-perfect-scrollbar: the "option" prop has been deprecated in favor of "options"'),this._ps=new PerfectScrollbar(this._container,this.props.options||this.props.option),this._updateEventHook(),this._updateClassName()}},{key:"componentDidUpdate",value:function(et){this._updateEventHook(et),this.updateScroll(),et.className!==this.props.className&&this._updateClassName()}},{key:"componentWillUnmount",value:function(){var et=this;Object.keys(this._handlerByEvent).forEach(function(tt){var ot=et._handlerByEvent[tt];ot&&et._container.removeEventListener(tt,ot,!1)}),this._handlerByEvent={},this._ps.destroy(),this._ps=null}},{key:"_updateEventHook",value:function(){var et=this,tt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.keys(handlerNameByEvent).forEach(function(ot){var dt=et.props[handlerNameByEvent[ot]],ht=tt[handlerNameByEvent[ot]];if(dt!==ht){if(ht){var ft=et._handlerByEvent[ot];et._container.removeEventListener(ot,ft,!1),et._handlerByEvent[ot]=null}if(dt){var pt=function(){return dt(et._container)};et._container.addEventListener(ot,pt,!1),et._handlerByEvent[ot]=pt}}})}},{key:"_updateClassName",value:function(){var et=this.props.className,tt=this._container.className.split(" ").filter(function(ot){return ot.match(/^ps([-_].+|)$/)}).join(" ");this._container&&(this._container.className="scrollbar-container".concat(et?" ".concat(et):"").concat(tt?" ".concat(tt):""))}},{key:"updateScroll",value:function(){this.props.onSync(this._ps)}},{key:"handleRef",value:function(et){this._container=et,this.props.containerRef(et)}},{key:"render",value:function(){var et=this.props;et.className;var tt=et.style;et.option,et.options,et.containerRef,et.onScrollY,et.onScrollX,et.onScrollUp,et.onScrollDown,et.onScrollLeft,et.onScrollRight,et.onYReachStart,et.onYReachEnd,et.onXReachStart,et.onXReachEnd;var ot=et.component;et.onSync;var dt=et.children,ht=_objectWithoutProperties$l(et,_excluded$l),ft=ot;return React.createElement(ft,_extends$l({style:tt,ref:this.handleRef},ht),dt)}}]),s}(reactExports.Component);ScrollBar.defaultProps={className:"",style:void 0,option:void 0,options:void 0,containerRef:function o(){},onScrollY:void 0,onScrollX:void 0,onScrollUp:void 0,onScrollDown:void 0,onScrollLeft:void 0,onScrollRight:void 0,onYReachStart:void 0,onYReachEnd:void 0,onXReachStart:void 0,onXReachEnd:void 0,onSync:function o(i){return i.update()},component:"div"};function _typeof$b(o){"@babel/helpers - typeof";return _typeof$b=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$b(o)}var _excluded$k=["className","variant","children"];function _extends$k(){return _extends$k=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$k.apply(this,arguments)}function _defineProperty$a(o,i,s){return i=_toPropertyKey$a(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$a(o){var i=_toPrimitive$a(o,"string");return _typeof$b(i)==="symbol"?i:String(i)}function _toPrimitive$a(o,i){if(_typeof$b(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$b(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties$k(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$k(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$k(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var Loader=function o(i){var s=i.className,a=i.variant,et=i.children,tt=_objectWithoutProperties$k(i,_excluded$k),ot="".concat(prefix,"-loader"),dt=React.Children.count(et)>0?"".concat(ot,"--content"):"";return React.createElement("div",_extends$k({},tt,{className:classNames(ot,dt,_defineProperty$a({},"".concat(ot,"--variant-").concat(a),a!=="default"),s),role:"status"}),et)};Loader.defaultProps={className:void 0,title:void 0,variant:"default"};function _typeof$a(o){"@babel/helpers - typeof";return _typeof$a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$a(o)}var _excluded$j=["className","children","blur","grayscale"];function _extends$j(){return _extends$j=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$j.apply(this,arguments)}function _defineProperty$9(o,i,s){return i=_toPropertyKey$9(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$9(o){var i=_toPrimitive$9(o,"string");return _typeof$a(i)==="symbol"?i:String(i)}function _toPrimitive$9(o,i){if(_typeof$a(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$a(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties$j(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$j(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$j(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var Overlay=function o(i){var s=i.className,a=i.children,et=i.blur,tt=i.grayscale,ot=_objectWithoutProperties$j(i,_excluded$j),dt="".concat(prefix,"-overlay"),ht="".concat(dt,"--blur"),ft="".concat(dt,"--grayscale");return React.createElement("div",_extends$j({},ot,{className:classNames(dt,_defineProperty$9({},ht,et),_defineProperty$9({},ft,tt),s)}),React.createElement("div",{className:"".concat(dt,"__content")},a))};Overlay.defaultProps={className:"",children:void 0,blur:!1,grayscale:!1};var _excluded$i=["sender","sentTime","children","className"];function _extends$i(){return _extends$i=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$i.apply(this,arguments)}function _objectWithoutProperties$i(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$i(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$i(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageHeader=function o(i){var s=i.sender,a=i.sentTime,et=i.children,tt=i.className,ot=_objectWithoutProperties$i(i,_excluded$i),dt="".concat(prefix,"-message__header");return React.createElement("div",_extends$i({},ot,{className:classNames(dt,tt)}),typeof et<"u"?et:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-message__sender-name")},s),React.createElement("div",{className:"".concat(prefix,"-message__sent-time")},a)))};MessageHeader.displayName="Message.Header";MessageHeader.defaultProps={sender:"",sentTime:"",children:void 0};var _excluded$h=["sender","sentTime","children","className"];function _extends$h(){return _extends$h=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$h.apply(this,arguments)}function _objectWithoutProperties$h(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$h(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$h(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageFooter=function o(i){var s=i.sender,a=i.sentTime,et=i.children,tt=i.className,ot=_objectWithoutProperties$h(i,_excluded$h),dt="".concat(prefix,"-message__footer");return React.createElement("div",_extends$h({},ot,{className:classNames(dt,tt)}),typeof et<"u"?et:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(prefix,"-message__sender-name")},s),React.createElement("div",{className:"".concat(prefix,"-message__sent-time")},a)))};MessageFooter.displayName="Message.Footer";MessageFooter.defaultProps={sender:"",sentTime:"",children:void 0};var MessageCustomContent=function o(i){var s=i.children,a=i.className,et="".concat(prefix,"-message__custom-content");return React.createElement("div",{className:classNames(et,a)},s)};MessageCustomContent.displayName="Message.CustomContent";MessageCustomContent.defaultProps={};var MessageImageContent=function o(i){var s=i.src,a=i.width,et=i.height,tt=i.alt,ot=i.className,dt="".concat(prefix,"-message__image-content"),ht={width:typeof a=="number"?"".concat(a,"px"):typeof a=="string"?a:void 0,height:typeof et=="number"?"".concat(et,"px"):typeof et=="string"?et:void 0};return React.createElement("div",{className:classNames(dt,ot)},React.createElement("img",{src:s,style:ht,alt:tt}))};MessageImageContent.displayName="Message.ImageContent";MessageImageContent.defaultProps={};var MessageHtmlContent=function o(i){var s=i.html,a=i.className,et="".concat(prefix,"-message__html-content"),tt=function(){return{__html:s}};return React.createElement("div",{className:classNames(et,a),dangerouslySetInnerHTML:tt()})};MessageHtmlContent.displayName="Message.HtmlContent";MessageHtmlContent.defaultProps={};var MessageTextContent=function o(i){var s=i.text,a=i.className,et=i.children,tt="".concat(prefix,"-message__text-content"),ot=et??s;return React.createElement("div",{className:classNames(tt,a)},ot)};MessageTextContent.displayName="Message.TextContent";MessageTextContent.defaultProps={};var _excluded$g=["model","avatarSpacer","avatarPosition","type","payload","children","className"];function _extends$g(){return _extends$g=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$g.apply(this,arguments)}function _defineProperty$8(o,i,s){return i=_toPropertyKey$8(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$8(o){var i=_toPrimitive$8(o,"string");return _typeof$9(i)==="symbol"?i:String(i)}function _toPrimitive$8(o,i){if(_typeof$9(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$9(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _typeof$9(o){"@babel/helpers - typeof";return _typeof$9=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$9(o)}function _slicedToArray$5(o,i){return _arrayWithHoles$5(o)||_iterableToArrayLimit$5(o,i)||_unsupportedIterableToArray$5(o,i)||_nonIterableRest$5()}function _nonIterableRest$5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$5(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$5(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$5(o,i)}}function _arrayLikeToArray$5(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit$5(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles$5(o){if(Array.isArray(o))return o}function _objectWithoutProperties$g(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$g(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$g(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var Message=function o(i){var s,a,et=i.model,tt=et.message,ot=et.sentTime,dt=et.sender,ht=et.direction,ft=et.position,pt=et.type,mt=et.payload,gt=i.avatarSpacer,_t=i.avatarPosition,yt=i.type,St=i.payload,Et=i.children,vt=i.className,bt=_objectWithoutProperties$g(i,_excluded$g),Tt="".concat(prefix,"-message"),wt=getChildren(Et,[Avatar,MessageHeader,MessageFooter,MessageHtmlContent,MessageTextContent,MessageImageContent,MessageCustomContent]),Pt=_slicedToArray$5(wt,7),At=Pt[0],xt=Pt[1],Ot=Pt[2],Rt=Pt[3],Dt=Pt[4],Nt=Pt[5],Kt=Pt[6],qt=function(){if(ht===0||ht==="incoming")return"".concat(Tt,"--incoming");if(ht===1||ht==="outgoing")return"".concat(Tt,"--outgoing")}(),jt=function(Gt){var Jt="".concat(Tt,"--avatar-");if(Gt===0||Gt==="top-left"||Gt==="tl")return"".concat(Jt,"tl");if(Gt===1||Gt==="top-right"||Gt==="tr")return"".concat(Jt,"tr");if(Gt===2||Gt==="bottom-right"||Gt==="br")return"".concat(Jt,"br");if(Gt===3||Gt==="bottom-left"||Gt==="bl")return"".concat(Jt,"bl");if(Gt===4||Gt==="center-left"||Gt==="cl")return"".concat(Jt,"cl");if(Gt===5||Gt==="center-right"||Gt==="cr")return"".concat(Jt,"cr")}(_t),Zt=function(Gt){var Jt="".concat(prefix,"-message--");if(Gt==="single"||Gt===0)return"".concat(Jt,"single");if(Gt==="first"||Gt===1)return"".concat(Jt,"first");if(Gt==="normal"||Gt===2)return"";if(Gt==="last"||Gt===3)return"".concat(Jt,"last")}(ft),Ht=function(){return(dt==null?void 0:dt.length)>0&&(ot==null?void 0:ot.length)>0?"".concat(dt,": ").concat(ot):(dt==null?void 0:dt.length)>0&&(typeof ot>"u"||(ot==null?void 0:ot.length)===0)?dt:null}(),Wt=(s=(a=Rt??Dt)!==null&&a!==void 0?a:Nt)!==null&&s!==void 0?s:Kt,Ft=Wt??function(){var Gt=pt??yt,Jt=mt??tt,on=Jt??St,bn=_typeof$9(on)==="object"?getComponentName(on):"";if(Gt==="html"&&bn!=="Message.CustomContent")return React.createElement(MessageHtmlContent,{html:on});if(Gt==="text")return React.createElement(MessageTextContent,{text:on});if(Gt==="image")return React.createElement(MessageImageContent,on);if(Gt==="custom"||bn==="Message.CustomContent")return on}();return React.createElement("section",_extends$g({},bt,{"aria-label":Ht,className:classNames(Tt,qt,_defineProperty$8({},"".concat(Tt,"--avatar-spacer"),gt),Zt,jt,vt)},_defineProperty$8({},"data-".concat(prefix,"-message"),"")),typeof At<"u"&&React.createElement("div",{className:"".concat(Tt,"__avatar")},At),React.createElement("div",{className:"".concat(Tt,"__content-wrapper")},xt,React.createElement("div",{className:"".concat(Tt,"__content")},Ft),Ot))};Message.defaultProps={model:{message:"",sentTime:"",sender:"",direction:1},avatarSpacer:!1,avatarPosition:void 0,type:"html"};Message.Header=MessageHeader;Message.HtmlContent=MessageHtmlContent;Message.TextContent=MessageTextContent;Message.ImageContent=MessageImageContent;Message.CustomContent=MessageCustomContent;Message.Footer=MessageFooter;var _excluded$f=["children","className"];function _extends$f(){return _extends$f=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$f.apply(this,arguments)}function _objectWithoutProperties$f(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$f(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$f(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageGroupHeader=function o(i){var s=i.children,a=i.className,et=_objectWithoutProperties$f(i,_excluded$f),tt="".concat(prefix,"-message-group__header");return React.createElement("div",_extends$f({},et,{className:classNames(tt,a)}),s)};MessageGroupHeader.displayName="MessageGroup.Header";MessageGroupHeader.defaultProps={children:void 0};var _excluded$e=["children","className"];function _extends$e(){return _extends$e=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$e.apply(this,arguments)}function _objectWithoutProperties$e(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$e(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$e(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageGroupFooter=function o(i){var s=i.children,a=i.className,et=_objectWithoutProperties$e(i,_excluded$e),tt="".concat(prefix,"-message-group__footer");return React.createElement("div",_extends$e({},et,{className:classNames(tt,a)}),s)};MessageGroupFooter.displayName="MessageGroup.Footer";MessageGroupFooter.defaultProps={children:void 0};var _excluded$d=["children","className"];function _extends$d(){return _extends$d=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$d.apply(this,arguments)}function _objectWithoutProperties$d(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$d(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$d(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageGroupMessages=function o(i){var s=i.children,a=i.className,et=_objectWithoutProperties$d(i,_excluded$d),tt="".concat(prefix,"-message-group");return React.createElement("div",_extends$d({},et,{className:classNames("".concat(tt,"__messages"),a)}),s)};MessageGroupMessages.displayName="MessageGroup.Messages";MessageGroupMessages.defaultProps={children:void 0};function _typeof$8(o){"@babel/helpers - typeof";return _typeof$8=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$8(o)}var _excluded$c=["direction","avatarPosition","sender","sentTime","children","className"];function _extends$c(){return _extends$c=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$c.apply(this,arguments)}function _defineProperty$7(o,i,s){return i=_toPropertyKey$7(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$7(o){var i=_toPrimitive$7(o,"string");return _typeof$8(i)==="symbol"?i:String(i)}function _toPrimitive$7(o,i){if(_typeof$8(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$8(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _slicedToArray$4(o,i){return _arrayWithHoles$4(o)||_iterableToArrayLimit$4(o,i)||_unsupportedIterableToArray$4(o,i)||_nonIterableRest$4()}function _nonIterableRest$4(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$4(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$4(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$4(o,i)}}function _arrayLikeToArray$4(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit$4(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles$4(o){if(Array.isArray(o))return o}function _objectWithoutProperties$c(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$c(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$c(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageGroup=function o(i){var s=i.direction,a=i.avatarPosition,et=i.sender,tt=i.sentTime,ot=i.children,dt=i.className,ht=_objectWithoutProperties$c(i,_excluded$c),ft="".concat(prefix,"-message-group"),pt=function(){if(s===0||s==="incoming")return"".concat(ft,"--incoming");if(s===1||s==="outgoing")return"".concat(ft,"--outgoing")}(),mt=function(){var Tt="".concat(ft,"--avatar-");if(typeof a=="string"&&(a==="tl"||a==="top-left"||a==="tr"||a==="top-right"||a==="bl"||a==="bottom-right"||a==="br"||a==="bottom-right"||a==="cl"||a==="center-left"||a==="cr"||a==="center-right"))return"".concat(Tt).concat(a)}(),gt=getChildren(ot,[Avatar,MessageGroupHeader,MessageGroupFooter,MessageGroupMessages]),_t=_slicedToArray$4(gt,4),yt=_t[0],St=_t[1],Et=_t[2],vt=_t[3],bt=function(){return et.length>0&&tt.length>0?"".concat(et,": ").concat(tt):et.length>0&&tt.length===0?et:null}();return React.createElement("section",_extends$c({"aria-label":bt},ht,{className:classNames(ft,pt,mt,dt)},_defineProperty$7({},"data-".concat(prefix,"-message-group"),"")),typeof yt<"u"&&React.createElement("div",{className:"".concat(ft,"__avatar")},yt),React.createElement("div",{className:"".concat(ft,"__content")},St,vt,Et))};MessageGroup.defaultProps={direction:"incoming",sentTime:"",sender:"",avatarPosition:void 0};MessageGroup.Header=MessageGroupHeader;MessageGroup.Footer=MessageGroupFooter;MessageGroup.Messages=MessageGroupMessages;var _excluded$b=["content","as","children","className"];function _extends$b(){return _extends$b=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$b.apply(this,arguments)}function _objectWithoutProperties$b(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$b(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$b(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageSeparator=function o(i){var s=i.content,a=i.as,et=i.children,tt=i.className,ot=_objectWithoutProperties$b(i,_excluded$b),dt="".concat(prefix,"-message-separator"),ht=function(){return typeof a=="string"&&a.length>0?a:o.defaultProps.as}();return React.createElement(ht,_extends$b({},ot,{className:classNames(dt,tt)}),isChildrenNil(et)===!0?s:et)};MessageSeparator.defaultProps={children:void 0,content:void 0,as:"div"};var _excluded$a=["className","children"];function _extends$a(){return _extends$a=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$a.apply(this,arguments)}function _objectWithoutProperties$a(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$a(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$a(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MessageListContent=function o(i){var s=i.className,a=i.children,et=_objectWithoutProperties$a(i,_excluded$a);return React.createElement("div",_extends$a({},et,{className:s}),a)};MessageListContent.displayName="MessageList.Content";var _excluded$9=["children","typingIndicator","loading","loadingMore","loadingMorePosition","onYReachStart","onYReachEnd","className","disableOnYReachWhenNoScroll","scrollBehavior","autoScrollToBottom","autoScrollToBottomOnMount"];function _typeof$7(o){"@babel/helpers - typeof";return _typeof$7=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$7(o)}function _extends$9(){return _extends$9=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$9.apply(this,arguments)}function _slicedToArray$3(o,i){return _arrayWithHoles$3(o)||_iterableToArrayLimit$3(o,i)||_unsupportedIterableToArray$3(o,i)||_nonIterableRest$3()}function _nonIterableRest$3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$3(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$3(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$3(o,i)}}function _arrayLikeToArray$3(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit$3(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles$3(o){if(Array.isArray(o))return o}function _objectWithoutProperties$9(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$9(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$9(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function _classCallCheck$2(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties$2(o,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,_toPropertyKey$6(a.key),a)}}function _createClass$2(o,i,s){return i&&_defineProperties$2(o.prototype,i),s&&_defineProperties$2(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function _inherits$2(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),i&&_setPrototypeOf$2(o,i)}function _setPrototypeOf$2(o,i){return _setPrototypeOf$2=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,et){return a.__proto__=et,a},_setPrototypeOf$2(o,i)}function _createSuper$2(o){var i=_isNativeReflectConstruct$2();return function(){var a=_getPrototypeOf$2(o),et;if(i){var tt=_getPrototypeOf$2(this).constructor;et=Reflect.construct(a,arguments,tt)}else et=a.apply(this,arguments);return _possibleConstructorReturn$2(this,et)}}function _possibleConstructorReturn$2(o,i){if(i&&(_typeof$7(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$2(o)}function _assertThisInitialized$2(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _isNativeReflectConstruct$2(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$2(o){return _getPrototypeOf$2=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf$2(o)}function _defineProperty$6(o,i,s){return i=_toPropertyKey$6(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$6(o){var i=_toPrimitive$6(o,"string");return _typeof$7(i)==="symbol"?i:String(i)}function _toPrimitive$6(o,i){if(_typeof$7(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$7(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}var MessageListInner=function(o){_inherits$2(s,o);var i=_createSuper$2(s);function s(a){var et;return _classCallCheck$2(this,s),et=i.call(this,a),_defineProperty$6(_assertThisInitialized$2(et),"handleResize",function(){et.containerRef.current.clientHeight<et.lastClientHeight&&et.scrollToEnd(et.props.scrollBehavior),et.scrollRef.current.updateScroll()}),_defineProperty$6(_assertThisInitialized$2(et),"handleContainerResize",function(){et.resizeTicking===!1&&(window.requestAnimationFrame(function(){var tt=et.containerRef.current;if(tt){var ot=tt.clientHeight,dt=ot-et.lastClientHeight;dt>=1?et.preventScrollTop===!1&&(tt.scrollTop=Math.round(tt.scrollTop)-dt):tt.scrollTop=tt.scrollTop-dt,et.lastClientHeight=tt.clientHeight,et.scrollRef.current.updateScroll()}et.resizeTicking=!1}),et.resizeTicking=!0)}),_defineProperty$6(_assertThisInitialized$2(et),"isSticked",function(){var tt=et.containerRef.current;return tt.scrollHeight===Math.round(tt.scrollTop+tt.clientHeight)}),_defineProperty$6(_assertThisInitialized$2(et),"handleScroll",function(){et.scrollTicking===!1&&(window.requestAnimationFrame(function(){et.noScroll===!1?et.preventScrollTop=et.isSticked():et.noScroll=!1,et.scrollTicking=!1}),et.scrollTicking=!0)}),_defineProperty$6(_assertThisInitialized$2(et),"getLastMessageOrGroup",function(){var tt=et.containerRef.current.querySelector("[data-".concat(prefix,"-message-list]>[data-").concat(prefix,"-message]:last-of-type,[data-").concat(prefix,"-message-list]>[data-").concat(prefix,"-message-group]:last-of-type")),ot=tt==null?void 0:tt.querySelector("[data-".concat(prefix,"-message]:last-of-type"));return{lastElement:tt,lastMessageInGroup:ot}}),et.scrollPointRef=React.createRef(),et.containerRef=React.createRef(),et.scrollRef=React.createRef(),et.lastClientHeight=0,et.preventScrollTop=!1,et.resizeObserver=void 0,et.scrollTicking=!1,et.resizeTicking=!1,et.noScroll=void 0,et}return _createClass$2(s,[{key:"getSnapshotBeforeUpdate",value:function(){var et=this.containerRef.current,tt=Math.round(et.scrollTop+et.clientHeight),ot=et.scrollHeight===tt||et.scrollHeight+1===tt||et.scrollHeight-1===tt;return{sticky:ot,clientHeight:et.clientHeight,scrollHeight:et.scrollHeight,lastMessageOrGroup:this.getLastMessageOrGroup(),diff:et.scrollHeight-et.scrollTop}}},{key:"componentDidMount",value:function(){this.props.autoScrollToBottomOnMount===!0&&this.scrollToEnd(this.props.scrollBehavior),this.lastClientHeight=this.containerRef.current.clientHeight,window.addEventListener("resize",this.handleResize),typeof window.ResizeObserver=="function"&&(this.resizeObserver=new ResizeObserver(this.handleContainerResize),this.resizeObserver.observe(this.containerRef.current)),this.containerRef.current.addEventListener("scroll",this.handleScroll)}},{key:"componentDidUpdate",value:function(et,tt,ot){var dt=this.props.autoScrollToBottom;if(typeof ot<"u"){var ht=this.containerRef.current,ft=this.getLastMessageOrGroup(),pt=ft.lastElement,mt=ft.lastMessageInGroup;if(pt===ot.lastMessageOrGroup.lastElement&&(typeof mt>"u"||mt===ot.lastMessageOrGroup.lastMessageInGroup)&&(ht.scrollTop=ht.scrollHeight-ot.diff+(this.lastClientHeight-ht.clientHeight)),ot.sticky===!0)dt===!0&&this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0;else if(ot.clientHeight<this.lastClientHeight){var gt=ht.scrollTop+this.lastClientHeight;ht.scrollHeight===gt||ht.scrollHeight+1===gt||ht.scrollHeight-1===gt?dt===!0&&(this.scrollToEnd(this.props.scrollBehavior),this.preventScrollTop=!0):this.preventScrollTop=!1}else this.preventScrollTop=!1,pt===ot.lastMessageOrGroup.lastElement&&(typeof mt>"u"||mt===ot.lastMessageOrGroup.lastMessageInGroup)&&ht.scrollTop===0&&ht.scrollHeight>ot.scrollHeight&&(ht.scrollTop=ht.scrollHeight-ot.scrollHeight);this.lastClientHeight=ot.clientHeight}}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),typeof this.resizeObserver<"u"&&this.resizeObserver.disconnect(),this.containerRef.current.removeEventListener("scroll",this.handleScroll)}},{key:"scrollToEnd",value:function(){var et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.props.scrollBehavior,tt=this.containerRef.current,ot=this.scrollPointRef.current,dt=tt.getBoundingClientRect(),ht=ot.getBoundingClientRect(),ft=ht.top+tt.scrollTop-dt.top;tt.scrollBy?tt.scrollBy({top:ft,behavior:et}):tt.scrollTop=ft,this.lastClientHeight=tt.clientHeight,this.noScroll=!0}},{key:"render",value:function(){var et=this,tt=this.props,ot=tt.children,dt=tt.typingIndicator,ht=tt.loading,ft=tt.loadingMore,pt=tt.loadingMorePosition,mt=tt.onYReachStart,gt=tt.onYReachEnd,_t=tt.className,yt=tt.disableOnYReachWhenNoScroll;tt.scrollBehavior,tt.autoScrollToBottom,tt.autoScrollToBottomOnMount;var St=_objectWithoutProperties$9(tt,_excluded$9),Et="".concat(prefix,"-message-list"),vt=getChildren(ot,[MessageListContent]),bt=_slicedToArray$3(vt,1),Tt=bt[0];return React.createElement("div",_extends$9({},St,{className:classNames(Et,_t)}),ft&&React.createElement("div",{className:classNames("".concat(Et,"__loading-more"),_defineProperty$6({},"".concat(Et,"__loading-more--bottom"),pt==="bottom"))},React.createElement(Loader,null)),ht&&React.createElement(Overlay,null,React.createElement(Loader,null)),React.createElement(ScrollBar,_extends$9({onYReachStart:mt,onYReachEnd:gt,onSync:function(Pt){return Pt.update(yt)},className:"".concat(Et,"__scroll-wrapper"),ref:this.scrollRef,containerRef:function(Pt){return et.containerRef.current=Pt},options:{suppressScrollX:!0}},_defineProperty$6({},"data-".concat(prefix,"-message-list"),""),{style:{overscrollBehaviorY:"none",overflowAnchor:"auto",touchAction:"none"}}),Tt||ot,React.createElement("div",{className:"".concat(Et,"__scroll-to"),ref:this.scrollPointRef})),typeof dt<"u"&&React.createElement("div",{className:"".concat(Et,"__typing-indicator-container")},dt))}}]),s}(React.Component);MessageListInner.displayName="MessageList";function MessageListFunc(o,i){var s=reactExports.useRef(),a=function(tt){return s.current.scrollToEnd(tt)};return reactExports.useImperativeHandle(i,function(){return{scrollToBottom:a}}),React.createElement(MessageListInner,_extends$9({ref:s},o))}var MessageList=reactExports.forwardRef(MessageListFunc);MessageList.propTypes={children:allowedChildren([Message,MessageGroup,MessageSeparator,MessageListContent]),typingIndicator:PropTypes.node,loading:PropTypes.bool,loadingMore:PropTypes.bool,loadingMorePosition:PropTypes.oneOf(["top","bottom"]),onYReachStart:PropTypes.func,onYReachEnd:PropTypes.func,disableOnYReachWhenNoScroll:PropTypes.bool,autoScrollToBottom:PropTypes.bool,autoScrollToBottomOnMount:PropTypes.bool,scrollBehavior:PropTypes.oneOf(["auto","smooth"]),className:PropTypes.string};MessageList.defaultProps={typingIndicator:void 0,loading:!1,loadingMore:!1,loadingMorePosition:"top",disableOnYReachWhenNoScroll:!1,autoScrollToBottom:!0,autoScrollToBottomOnMount:!0,scrollBehavior:"auto"};MessageListInner.defaultProps=MessageList.defaultProps;MessageList.Content=MessageListContent;function _typeof$6(o){"@babel/helpers - typeof";return _typeof$6=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$6(o)}function _classCallCheck$1(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties$1(o,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,_toPropertyKey$5(a.key),a)}}function _createClass$1(o,i,s){return i&&_defineProperties$1(o.prototype,i),s&&_defineProperties$1(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function _inherits$1(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),i&&_setPrototypeOf$1(o,i)}function _setPrototypeOf$1(o,i){return _setPrototypeOf$1=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,et){return a.__proto__=et,a},_setPrototypeOf$1(o,i)}function _createSuper$1(o){var i=_isNativeReflectConstruct$1();return function(){var a=_getPrototypeOf$1(o),et;if(i){var tt=_getPrototypeOf$1(this).constructor;et=Reflect.construct(a,arguments,tt)}else et=a.apply(this,arguments);return _possibleConstructorReturn$1(this,et)}}function _possibleConstructorReturn$1(o,i){if(i&&(_typeof$6(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized$1(o)}function _assertThisInitialized$1(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _isNativeReflectConstruct$1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf$1(o){return _getPrototypeOf$1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf$1(o)}function _defineProperty$5(o,i,s){return i=_toPropertyKey$5(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$5(o){var i=_toPrimitive$5(o,"string");return _typeof$6(i)==="symbol"?i:String(i)}function _toPrimitive$5(o,i){if(_typeof$6(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$6(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}var replaceCaret=function o(i,s){var a=document.activeElement===i,et=document.createTextNode("");if(i.appendChild(et),et!==null&&et.nodeValue!==null&&(a||s)){var tt=window.getSelection();if(tt!==null){var ot=document.createRange();ot.setStart(et,et.nodeValue.length),ot.collapse(!0),tt.removeAllRanges(),tt.addRange(ot)}}},ContentEditable=function(o){_inherits$1(s,o);var i=_createSuper$1(s);function s(a){var et;return _classCallCheck$1(this,s),et=i.call(this,a),_defineProperty$5(_assertThisInitialized$1(et),"innerHTML",function(){var tt=_assertThisInitialized$1(et),ot=tt.props.value;return{__html:typeof ot<"u"?ot:""}}),_defineProperty$5(_assertThisInitialized$1(et),"handleKeyPress",function(tt){var ot=_assertThisInitialized$1(et),dt=ot.props.onKeyPress;dt(tt)}),_defineProperty$5(_assertThisInitialized$1(et),"handleInput",function(tt){var ot=_assertThisInitialized$1(et),dt=ot.props.onChange,ht=tt.target;dt(ht.innerHTML,ht.textContent,ht.innerText)}),et.msgRef=React.createRef(),et}return _createClass$1(s,[{key:"focus",value:function(){typeof this.msgRef.current<"u"&&this.msgRef.current.focus()}},{key:"componentDidMount",value:function(){this.props.autoFocus===!0&&this.msgRef.current.focus()}},{key:"shouldComponentUpdate",value:function(et){var tt=this.msgRef,ot=this.props,dt=ot.placeholder,ht=ot.disabled,ft=ot.activateAfterChange;return typeof tt.current>"u"||et.value!==tt.current.innerHTML?!0:dt!==et.placeholder||ht!==et.disabled||ft!==et.activateAfterChange}},{key:"componentDidUpdate",value:function(){var et=this.msgRef,tt=this.props,ot=tt.value,dt=tt.activateAfterChange;ot!==et.current.innerHTML&&(et.current.innerHTML=typeof ot=="string"?ot:""),replaceCaret(et.current,dt)}},{key:"render",value:function(){var et=this.msgRef,tt=this.handleInput,ot=this.handleKeyPress,dt=this.innerHTML,ht=this.props,ft=ht.placeholder,pt=ht.disabled,mt=ht.className,gt=typeof ft=="string"?ft:"";return React.createElement("div",{ref:et,className:mt,contentEditable:pt===!1,disabled:pt,"data-placeholder":gt,onInput:tt,onKeyPress:ot,dangerouslySetInnerHTML:dt()})}}]),s}(reactExports.Component);ContentEditable.defaultProps={value:void 0,placeholder:"",disabled:!1,activateAfterChange:!1,autoFocus:!1,onChange:function o(){},onKeyPress:function o(){}};function _typeof$5(o){"@babel/helpers - typeof";return _typeof$5=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$5(o)}var _excluded$8=["fancyScroll","children","forwardedRef"],_excluded2=["value","onSend","onChange","autoFocus","placeholder","fancyScroll","className","activateAfterChange","disabled","sendDisabled","sendOnReturnDisabled","attachDisabled","sendButton","attachButton","onAttachClick"];function _defineProperty$4(o,i,s){return i=_toPropertyKey$4(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _slicedToArray$2(o,i){return _arrayWithHoles$2(o)||_iterableToArrayLimit$2(o,i)||_unsupportedIterableToArray$2(o,i)||_nonIterableRest$2()}function _nonIterableRest$2(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$2(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$2(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$2(o,i)}}function _arrayLikeToArray$2(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit$2(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles$2(o){if(Array.isArray(o))return o}function _extends$8(){return _extends$8=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$8.apply(this,arguments)}function _objectWithoutProperties$8(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$8(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$8(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function _classCallCheck(o,i){if(!(o instanceof i))throw new TypeError("Cannot call a class as a function")}function _defineProperties(o,i){for(var s=0;s<i.length;s++){var a=i[s];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(o,_toPropertyKey$4(a.key),a)}}function _createClass(o,i,s){return i&&_defineProperties(o.prototype,i),s&&_defineProperties(o,s),Object.defineProperty(o,"prototype",{writable:!1}),o}function _toPropertyKey$4(o){var i=_toPrimitive$4(o,"string");return _typeof$5(i)==="symbol"?i:String(i)}function _toPrimitive$4(o,i){if(_typeof$5(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$5(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _inherits(o,i){if(typeof i!="function"&&i!==null)throw new TypeError("Super expression must either be null or a function");o.prototype=Object.create(i&&i.prototype,{constructor:{value:o,writable:!0,configurable:!0}}),Object.defineProperty(o,"prototype",{writable:!1}),i&&_setPrototypeOf(o,i)}function _setPrototypeOf(o,i){return _setPrototypeOf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,et){return a.__proto__=et,a},_setPrototypeOf(o,i)}function _createSuper(o){var i=_isNativeReflectConstruct();return function(){var a=_getPrototypeOf(o),et;if(i){var tt=_getPrototypeOf(this).constructor;et=Reflect.construct(a,arguments,tt)}else et=a.apply(this,arguments);return _possibleConstructorReturn(this,et)}}function _possibleConstructorReturn(o,i){if(i&&(_typeof$5(i)==="object"||typeof i=="function"))return i;if(i!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _assertThisInitialized(o)}function _assertThisInitialized(o){if(o===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return o}function _isNativeReflectConstruct(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(s){return s.__proto__||Object.getPrototypeOf(s)},_getPrototypeOf(o)}function editorContainer(){var o=function(i){_inherits(a,i);var s=_createSuper(a);function a(){return _classCallCheck(this,a),s.apply(this,arguments)}return _createClass(a,[{key:"render",value:function(){var tt=this.props,ot=tt.fancyScroll,dt=tt.children,ht=tt.forwardedRef,ft=_objectWithoutProperties$8(tt,_excluded$8);return React.createElement(React.Fragment,null,ot===!0&&React.createElement(ScrollBar,_extends$8({ref:function(mt){return ht.current=mt}},ft,{options:{suppressScrollX:!0}}),dt),ot===!1&&React.createElement("div",_extends$8({ref:ht},ft),dt))}}]),a}(reactExports.Component);return React.forwardRef(function(i,s){return React.createElement(o,_extends$8({forwardedRef:s},i))})}var EditorContainer=editorContainer(),useControllableState=function o(i,s){var a=typeof i<"u"?i:s,et=reactExports.useState(a),tt=_slicedToArray$2(et,2),ot=tt[0],dt=tt[1],ht=typeof i<"u"?i:ot;return[ht,function(ft){dt(ft)}]};function MessageInputInner(o,i){var s=o.value,a=o.onSend,et=o.onChange,tt=o.autoFocus,ot=o.placeholder,dt=o.fancyScroll,ht=o.className,ft=o.activateAfterChange,pt=o.disabled,mt=o.sendDisabled,gt=o.sendOnReturnDisabled,_t=o.attachDisabled,yt=o.sendButton,St=o.attachButton,Et=o.onAttachClick,vt=_objectWithoutProperties$8(o,_excluded2),bt=reactExports.useRef(),Tt=reactExports.useRef(),wt=useControllableState(s,""),Pt=_slicedToArray$2(wt,2),At=Pt[0],xt=Pt[1],Ot=useControllableState(mt,!0),Rt=_slicedToArray$2(Ot,2),Dt=Rt[0],Nt=Rt[1],Kt=function(){typeof Tt.current<"u"&&Tt.current.focus()};reactExports.useImperativeHandle(i,function(){return{focus:Kt}}),reactExports.useEffect(function(){tt===!0&&Kt()},[]),reactExports.useEffect(function(){typeof bt.current.updateScroll=="function"&&bt.current.updateScroll()});var qt=function(){var Jt=Tt.current.msgRef.current;return[Jt.textContent,Jt.innerText,Jt.cloneNode(!0).childNodes]},jt=function(){if(At.length>0){s===void 0&&xt(""),typeof mt>"u"&&Nt(!0);var Jt=qt();a(At,Jt[0],Jt[1],Jt[2])}},Zt=function(Jt){Jt.key==="Enter"&&Jt.shiftKey===!1&&gt===!1&&(Jt.preventDefault(),jt())},Ht=function(Jt,on,bn){xt(Jt),typeof mt>"u"&&Nt(on.length===0),typeof bt.current.updateScroll=="function"&&bt.current.updateScroll();var Ut=qt();et(Jt,on,bn,Ut[2])},Wt="".concat(prefix,"-message-input"),Ft=typeof ot=="string"?ot:"";return React.createElement("div",_extends$8({},vt,{className:classNames(Wt,_defineProperty$4({},"".concat(Wt,"--disabled"),pt),ht)}),St===!0&&React.createElement("div",{className:"".concat(Wt,"__tools")},React.createElement(AttachmentButton,{onClick:Et,disabled:pt===!0||_t===!0})),React.createElement("div",{className:"".concat(Wt,"__content-editor-wrapper")},React.createElement(EditorContainer,{fancyScroll:dt,ref:bt,className:"".concat(Wt,"__content-editor-container")},React.createElement(ContentEditable,{ref:Tt,className:"".concat(Wt,"__content-editor"),disabled:pt,placeholder:Ft,onKeyPress:Zt,onChange:Ht,activateAfterChange:ft,value:At}))),yt===!0&&React.createElement("div",{className:"".concat(Wt,"__tools")},React.createElement(SendButton,{onClick:jt,disabled:pt===!0||Dt===!0})))}var MessageInput=reactExports.forwardRef(MessageInputInner);MessageInput.displayName="MessageInput";MessageInput.propTypes={value:PropTypes.string,placeholder:PropTypes.string,disabled:PropTypes.bool,sendOnReturnDisabled:PropTypes.bool,sendDisabled:PropTypes.bool,fancyScroll:PropTypes.bool,activateAfterChange:PropTypes.bool,autoFocus:PropTypes.bool,onChange:PropTypes.func,onSend:PropTypes.func,className:PropTypes.string,sendButton:PropTypes.bool,attachButton:PropTypes.bool,attachDisabled:PropTypes.bool,onAttachClick:PropTypes.func};MessageInput.defaultProps={value:void 0,placeholder:"",disabled:!1,sendOnReturnDisabled:!1,fancyScroll:!0,activateAfterChange:!1,autoFocus:!1,sendButton:!0,attachButton:!0,attachDisabled:!1,onAttachClick:noop$2,onChange:noop$2,onSend:noop$2};MessageInputInner.defaultProps=MessageInput.defaultProps;var _excluded$7=["className","children"];function _extends$7(){return _extends$7=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$7.apply(this,arguments)}function _objectWithoutProperties$7(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$7(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$7(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var InputToolbox=function o(i){var s=i.className,a=i.children,et=_objectWithoutProperties$7(i,_excluded$7),tt="".concat(prefix,"-input-toolbox");return React.createElement("div",_extends$7({},et,{className:classNames(tt,s)}),a)};InputToolbox.displayName="InputToolbox";InputToolbox.defaultProps={};var _excluded$6=["children","className"];function _extends$6(){return _extends$6=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$6.apply(this,arguments)}function _slicedToArray$1(o,i){return _arrayWithHoles$1(o)||_iterableToArrayLimit$1(o,i)||_unsupportedIterableToArray$1(o,i)||_nonIterableRest$1()}function _nonIterableRest$1(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray$1(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray$1(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray$1(o,i)}}function _arrayLikeToArray$1(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit$1(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles$1(o){if(Array.isArray(o))return o}function _objectWithoutProperties$6(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$6(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$6(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ChatContainer=function o(i){var s=i.children,a=i.className,et=_objectWithoutProperties$6(i,_excluded$6),tt="".concat(prefix,"-chat-container"),ot=getChildren(s,[ConversationHeader,MessageList,MessageInput,InputToolbox]),dt=_slicedToArray$1(ot,4),ht=dt[0],ft=dt[1],pt=dt[2],mt=dt[3];return React.createElement("div",_extends$6({},et,{className:classNames(tt,a)}),ht,ft,pt,mt)};ChatContainer.defaultProps={children:void 0};var cName="".concat(prefix,"-conversation");function _typeof$4(o){"@babel/helpers - typeof";return _typeof$4=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$4(o)}var _excluded$5=["children","className","visible"];function _extends$5(){return _extends$5=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$5.apply(this,arguments)}function _defineProperty$3(o,i,s){return i=_toPropertyKey$3(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$3(o){var i=_toPrimitive$3(o,"string");return _typeof$4(i)==="symbol"?i:String(i)}function _toPrimitive$3(o,i){if(_typeof$4(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$4(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties$5(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$5(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$5(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var ConversationOperations=function o(i){var s=i.children,a=i.className,et=i.visible,tt=_objectWithoutProperties$5(i,_excluded$5);return React.createElement("div",_extends$5({},tt,{className:classNames("".concat(cName,"__operations"),_defineProperty$3({},"".concat(cName,"__operations--visible"),et),a)}),React.Children.count(s)>0?s:React.createElement(FontAwesomeIcon,{icon:faEllipsisV.faEllipsisV}))};ConversationOperations.displayName="Conversation.Operations";ConversationOperations.defaultProps={};var _excluded$4=["lastSenderName","info","name","children","className"];function _extends$4(){return _extends$4=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$4.apply(this,arguments)}function _typeof$3(o){"@babel/helpers - typeof";return _typeof$3=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$3(o)}function _objectWithoutProperties$4(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$4(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$4(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var LastSenderName=function o(i){var s=i.name;return React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(cName,"__last-sender")},s),":")},InfoContent=function o(i){var s=i.info;return React.createElement("div",{className:"".concat(cName,"__info-content")},s)},ConversationContent=function o(i){var s=i.lastSenderName,a=i.info,et=i.name,tt=i.children,ot=i.className,dt=_objectWithoutProperties$4(i,_excluded$4),ht=_typeof$3(s);return React.createElement("div",_extends$4({},dt,{className:classNames("".concat(cName,"__content"),ot)}),React.Children.count(tt)>0?tt:React.createElement(React.Fragment,null,React.createElement("div",{className:"".concat(cName,"__name")},et),React.createElement("div",{className:"".concat(cName,"__info")},ht!=="undefined"?React.createElement(React.Fragment,null,ht==="string"?React.createElement(LastSenderName,{name:s}):s," "):null,typeof a<"u"&&React.createElement(InfoContent,{info:a}))))};ConversationContent.displayName="Conversation.Content";ConversationContent.defaultProps={};function _typeof$2(o){"@babel/helpers - typeof";return _typeof$2=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$2(o)}var _excluded$3=["responsive","children","className"];function _extends$3(){return _extends$3=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$3.apply(this,arguments)}function _defineProperty$2(o,i,s){return i=_toPropertyKey$2(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$2(o){var i=_toPrimitive$2(o,"string");return _typeof$2(i)==="symbol"?i:String(i)}function _toPrimitive$2(o,i){if(_typeof$2(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$2(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties$3(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$3(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$3(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var MainContainer=function o(i){var s=i.responsive,a=i.children,et=i.className,tt=_objectWithoutProperties$3(i,_excluded$3),ot="".concat(prefix,"-main-container");return React.createElement("div",_extends$3({},tt,{className:classNames(ot,_defineProperty$2({},"".concat(ot,"--responsive"),s),et)}),a)};MainContainer.defaultProps={children:void 0,responsive:!1};/*!
 * Font Awesome Free 5.15.4 by @fontawesome - https://fontawesome.com
 * License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License)
 */var faSearch={prefix:"fas",iconName:"search",icon:[512,512,[],"f002","M505 442.7L405.3 343c-4.5-4.5-10.6-7-17-7H372c27.6-35.3 44-79.7 44-128C416 93.1 322.9 0 208 0S0 93.1 0 208s93.1 208 208 208c48.3 0 92.7-16.4 128-44v16.3c0 6.4 2.5 12.5 7 17l99.7 99.7c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.6.1-34zM208 336c-70.7 0-128-57.2-128-128 0-70.7 57.2-128 128-128 70.7 0 128 57.2 128 128 0 70.7-57.2 128-128 128z"]},faTimes={prefix:"fas",iconName:"times",icon:[352,512,[],"f00d","M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"]};function _typeof$1(o){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof$1(o)}var _excluded$2=["placeholder","value","onChange","onClearClick","className","disabled"];function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$2.apply(this,arguments)}function _defineProperty$1(o,i,s){return i=_toPropertyKey$1(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey$1(o){var i=_toPrimitive$1(o,"string");return _typeof$1(i)==="symbol"?i:String(i)}function _toPrimitive$1(o,i){if(_typeof$1(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof$1(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _slicedToArray(o,i){return _arrayWithHoles(o)||_iterableToArrayLimit(o,i)||_unsupportedIterableToArray(o,i)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _unsupportedIterableToArray(o,i){if(o){if(typeof o=="string")return _arrayLikeToArray(o,i);var s=Object.prototype.toString.call(o).slice(8,-1);if(s==="Object"&&o.constructor&&(s=o.constructor.name),s==="Map"||s==="Set")return Array.from(o);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return _arrayLikeToArray(o,i)}}function _arrayLikeToArray(o,i){(i==null||i>o.length)&&(i=o.length);for(var s=0,a=new Array(i);s<i;s++)a[s]=o[s];return a}function _iterableToArrayLimit(o,i){var s=o==null?null:typeof Symbol<"u"&&o[Symbol.iterator]||o["@@iterator"];if(s!=null){var a,et,tt,ot,dt=[],ht=!0,ft=!1;try{if(tt=(s=s.call(o)).next,i===0){if(Object(s)!==s)return;ht=!1}else for(;!(ht=(a=tt.call(s)).done)&&(dt.push(a.value),dt.length!==i);ht=!0);}catch(pt){ft=!0,et=pt}finally{try{if(!ht&&s.return!=null&&(ot=s.return(),Object(ot)!==ot))return}finally{if(ft)throw et}}return dt}}function _arrayWithHoles(o){if(Array.isArray(o))return o}function _objectWithoutProperties$2(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$2(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$2(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var useControlledOrNot=function o(i,s){return typeof s>"u"?reactExports.useState(i):[s,function(){}]};function SearchInner(o,i){var s=o.placeholder,a=o.value,et=o.onChange,tt=o.onClearClick,ot=o.className,dt=o.disabled,ht=_objectWithoutProperties$2(o,_excluded$2),ft="".concat(prefix,"-search"),pt=reactExports.useMemo(function(){return typeof a<"u"},[]),mt=useControlledOrNot("",a),gt=_slicedToArray(mt,2),_t=gt[0],yt=gt[1],St=reactExports.useState(pt?_t.length>0:!1),Et=_slicedToArray(St,2),vt=Et[0],bt=Et[1];if(pt!==typeof a<"u")throw"Search: Changing from controlled to uncontrolled component and vice versa is not allowed";var Tt=reactExports.useRef(void 0),wt=function(){typeof Tt.current<"u"&&Tt.current.focus()};reactExports.useImperativeHandle(i,function(){return{focus:wt}});var Pt=function(Ot){var Rt=Ot.target.value;bt(Rt.length>0),pt===!1&&yt(Rt),et(Rt)},At=function(){pt===!1&&yt(""),bt(!1),tt()};return React.createElement("div",_extends$2({},ht,{className:classNames(ft,_defineProperty$1({},"".concat(ft,"--disabled"),dt),ot)}),React.createElement(FontAwesomeIcon,{icon:faSearch,className:"".concat(ft,"__search-icon")}),React.createElement("input",{ref:Tt,type:"text",className:"".concat(ft,"__input"),placeholder:s,onChange:Pt,disabled:dt,value:_t}),React.createElement(FontAwesomeIcon,{icon:faTimes,className:classNames("".concat(ft,"__clear-icon"),_defineProperty$1({},"".concat(ft,"__clear-icon--active"),vt)),onClick:At}))}var Search=reactExports.forwardRef(SearchInner);Search.displayName="Search";Search.propTypes={placeholder:PropTypes.string,value:PropTypes.string,onChange:PropTypes.func,onClearClick:PropTypes.func,className:PropTypes.string,disabled:PropTypes.bool};Search.defaultProps={placeholder:"",value:void 0,onChange:function o(){},onClearClick:function o(){},disabled:!1};SearchInner.defaultProps=Search.defaultProps;var _excluded$1=["content","className"];function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends$1.apply(this,arguments)}function _objectWithoutProperties$1(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose$1(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose$1(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}var TypingIndicator=function o(i){var s=i.content,a=i.className,et=_objectWithoutProperties$1(i,_excluded$1),tt="".concat(prefix,"-typing-indicator");return React.createElement("div",_extends$1({},et,{className:classNames(tt,a)}),React.createElement("div",{className:"".concat(tt,"__indicator")},React.createElement("div",{className:"".concat(tt,"__dot")}),React.createElement("div",{className:"".concat(tt,"__dot")}),React.createElement("div",{className:"".concat(tt,"__dot")})),React.createElement("div",{className:"".concat(tt,"__text")},s))};TypingIndicator.defaultProps={content:""};function _typeof(o){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(i){return typeof i}:function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},_typeof(o)}var _excluded=["className","children","size","selected","onChange","itemsTabIndex"];function _extends(){return _extends=Object.assign?Object.assign.bind():function(o){for(var i=1;i<arguments.length;i++){var s=arguments[i];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=s[a])}return o},_extends.apply(this,arguments)}function _defineProperty(o,i,s){return i=_toPropertyKey(i),i in o?Object.defineProperty(o,i,{value:s,enumerable:!0,configurable:!0,writable:!0}):o[i]=s,o}function _toPropertyKey(o){var i=_toPrimitive(o,"string");return _typeof(i)==="symbol"?i:String(i)}function _toPrimitive(o,i){if(_typeof(o)!=="object"||o===null)return o;var s=o[Symbol.toPrimitive];if(s!==void 0){var a=s.call(o,i||"default");if(_typeof(a)!=="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(i==="string"?String:Number)(o)}function _objectWithoutProperties(o,i){if(o==null)return{};var s=_objectWithoutPropertiesLoose(o,i),a,et;if(Object.getOwnPropertySymbols){var tt=Object.getOwnPropertySymbols(o);for(et=0;et<tt.length;et++)a=tt[et],!(i.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(o,a)&&(s[a]=o[a])}return s}function _objectWithoutPropertiesLoose(o,i){if(o==null)return{};var s={},a=Object.keys(o),et,tt;for(tt=0;tt<a.length;tt++)et=a[tt],!(i.indexOf(et)>=0)&&(s[et]=o[et]);return s}function StatusListInner(o,i){var s=o.className,a=o.children,et=o.size,tt=o.selected,ot=o.onChange,dt=o.itemsTabIndex,ht=_objectWithoutProperties(o,_excluded),ft="".concat(prefix,"-status-list"),pt=reactExports.useRef();reactExports.useImperativeHandle(i,function(){return{focus:function(_t){var yt=Array.from(pt.current.querySelectorAll("li")),St=yt.filter(function(Et){return Et.parentNode===pt.current});typeof St[_t]<"u"&&St[_t].focus()}}});var mt=dt;return React.createElement("ul",_extends({ref:pt},ht,{className:classNames(ft,s,_defineProperty({},"".concat(ft,"--").concat(et),et))}),React.Children.map(a,function(gt){var _t={};tt&&(_t.selected=gt.props.status===tt),ot&&(_t.onClick=function(Et){ot(gt.props.status),gt.onClick&&gt.onClick(Et)});var yt=function(vt){ot&&vt.key==="Enter"&&vt.shiftKey===!1&&vt.altKey===!1&&ot(gt.props.status)},St=function(){if(typeof mt=="number")return mt>0?mt++:mt}();return React.createElement("li",{tabIndex:St,onKeyPress:yt},React.cloneElement(gt,_t))}))}var StatusList=reactExports.forwardRef(StatusListInner);StatusList.displayName="StatusList";StatusList.propTypes={children:allowedChildren([Status]),selected:PropTypes.oneOf(StatusEnum),size:PropTypes.oneOf(SizeEnum),itemsTabIndex:PropTypes.number,className:PropTypes.string,onChange:PropTypes.func};StatusList.defaultProps={onChange:noop$2};StatusListInner.defaultProps=StatusList.defaultProps;const Wrapper$2=ut.input`
    display: flex;
    width: 100%;
    height: 52px;
    border-radius: 15px;
    border: 1px;

    border: 1px solid #eaeaea;
    border-radius: 16px;
    justify-content: center;
    align-items: center;
    margin-bottom: 20px;
    padding-left: 20px;

    font-size: 16px;
    color: #00000057;
`,SearchBar=({placeholder:o,onSend:i})=>{const[s,a]=reactExports.useState(""),et=tt=>{tt.key==="Enter"&&(i(s),a(""))};return jsxRuntimeExports.jsx(Wrapper$2,{type:"text",placeholder:o,value:s,onChange:tt=>a(tt.target.value),onKeyDown:et})},API_KEY="'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';",NewChatbotPage=()=>{const[o,i]=reactExports.useState([{message:"안녕하세요! 어떤 문제가 궁금하신가요?",sentTime:"just now",sender:"ChatGPT"}]),[s,a]=reactExports.useState(!1),{user:et,login:tt,logout:ot}=useAuth(),dt=useNavigate(),ht=async mt=>{const gt={message:mt,direction:"outgoing",sender:"user"};i([...o,gt]),a(!0),await pt(mt)},ft=async()=>{const mt=et.email,gt=[];return(await getDocs(collection(db,"chats"))).forEach(yt=>{var St;console.log(`e ${yt.id} => ${(St=yt.data())==null?void 0:St.email}`),yt.data().email===mt&&gt.push(yt.id)}),console.log("chats id ",gt[0]),gt[0]};async function pt(mt){const gt="http://13.124.221.128:5000/chatbot/question-answer";console.log("address",gt,"http://13.124.221.128:5000"),await fetch(gt,{method:"POST",headers:{Authorization:"Bearer "+API_KEY,"Content-Type":"application/json"},body:JSON.stringify({question:mt})}).then(_t=>_t.json()).then(async _t=>{i(vt=>[...vt,{message:_t.answer,sender:"ChatGPT"}]);const yt=await ft(),St={message:mt,sender:"user",direction:"outgoing"},Et=doc(db,"chats",yt);updateDoc(Et,{messages:[...o,St,{message:_t.answer,sender:"ChatGPT"}]}),a(!1)}).catch(_t=>console.error("Error:",_t))}return reactExports.useEffect(()=>{auth.onAuthStateChanged(gt=>{tt(gt),gt||dt("/login")}),(async()=>{const gt=await ft();if(!gt){console.log("유저정보없더");const St=await addDoc(collection(db,"chats"),{email:et.email,messages:[{message:"안녕하세요! 어떤 문제가 궁금하신가요?",sentTime:"just now",sender:"ChatGPT"}]});console.log("Document written with ID: ",St.id)}const _t=doc(db,"chats",gt),yt=await getDoc(_t);if(yt.exists()){const St=yt.data();i(St.messages)}else console.log("No such document!")})()},[et]),jsxRuntimeExports.jsxs(Wrapper$1,{children:[jsxRuntimeExports.jsx(Header,{}),jsxRuntimeExports.jsx(Main,{children:o.length===1?jsxRuntimeExports.jsxs(ChatListWraper,{children:[jsxRuntimeExports.jsxs(InfoList,{children:[jsxRuntimeExports.jsxs(InfoWrapper,{children:[jsxRuntimeExports.jsx(InfoBox,{src:Info1Svg,alt:"info1"}),jsxRuntimeExports.jsx(InfoText,{children:"이런 문제를 만들 수 있어요"}),jsxRuntimeExports.jsxs(QuestionList,{children:[jsxRuntimeExports.jsx(QuestionWrapper,{children:jsxRuntimeExports.jsx(InfoText,{children:"객관식 문제"})}),jsxRuntimeExports.jsx(QuestionWrapper,{children:jsxRuntimeExports.jsx(InfoText,{children:"주관식 문제"})}),jsxRuntimeExports.jsx(QuestionWrapper,{children:jsxRuntimeExports.jsx(InfoText,{children:"서술형 문제"})})]})]}),jsxRuntimeExports.jsxs(InfoWrapper,{children:[jsxRuntimeExports.jsx(InfoBox,{src:Info2Svg,alt:"info2"}),jsxRuntimeExports.jsx(InfoText,{children:"이런 방식으로 질문해요"}),jsxRuntimeExports.jsxs(QuestionList,{children:[jsxRuntimeExports.jsx(ImageTypeWrapper,{children:jsxRuntimeExports.jsxs(InfoText,{children:["Python class의 개념에 대해",jsxRuntimeExports.jsx("br",{})," 객관식 문제를 만들어줘"]})}),jsxRuntimeExports.jsx(ImageTypeWrapper,{children:jsxRuntimeExports.jsxs(InfoText,{children:["내가 입력한 파일에서 ",jsxRuntimeExports.jsx("br",{}),"주관식 문제를 만들어줘"]})}),jsxRuntimeExports.jsx(ImageTypeWrapper,{children:jsxRuntimeExports.jsxs(InfoText,{children:["CNN 모델의 개념에 대한",jsxRuntimeExports.jsx("br",{})," 서술형 문제를 만들어줘"]})})]})]})]}),jsxRuntimeExports.jsx(SearchBar,{placeholder:"챗봇에게 물어볼 질문을 작성해주세요",onSend:ht})]}):jsxRuntimeExports.jsxs(Container,{children:[jsxRuntimeExports.jsx(MainContainerWrapper,{children:jsxRuntimeExports.jsx(ChatContainer,{children:jsxRuntimeExports.jsx(MessageList,{scrollBehavior:"smooth",typingIndicator:s?jsxRuntimeExports.jsx(TypingIndicator,{content:"ChatGPT is typing"}):null,children:o.map((mt,gt)=>(console.log(mt),jsxRuntimeExports.jsx(Message,{model:mt},gt)))})})}),jsxRuntimeExports.jsx(SearchBar,{placeholder:"챗봇에게 물어볼 질문을 작성해주세요",onSend:ht})]})})]})};ut.div``;const Wrapper$1=ut.div`
    display: flex;
    flex-direction: column;
`;ut.div`
    margin-left: 45px;
`;ut.div`
    margin-left: 17px;
    font-weight: 500;
    font-size: 28px;
    line-height: 18px 18px;
`;ut(Link)`
    margin-left: 125px;
    font-size: 24px;
    color: #ab41ff;
    text-decoration: none;
`;ut(Link)`
    margin-left: 42px;
    font-size: 24px;
    text-decoration: none;
    color: black;
`;ut.div`
    display: flex;
    flex-direction: row;
    height: calc(100vh - 74px);
`;const Main=ut.main`
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    margin: 0 auto;
    height: calc(100vh - 74px);
`,ChatListWraper=ut.div`
    display: flex;
    flex-direction: column;
`,InfoList=ut.div`
    display: flex;
    flex-direction: row;
    justify-content: center;
    align-items: center;

    gap: 20px;
    margin-top: 30px;
    margin-bottom: 40px;
`,InfoWrapper=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 320px;
    height: 461px;
`,InfoBox=ut.img`
    width: 47px;
    height: 47px;
    margin-bottom: 15px;
`,InfoText=ut.div`
    font-size: 20px;
    font-weight: 500;
    line-height: 32px;
`,QuestionList=ut.div`
    display: flex;
    flex-direction: column;
    gap: 17px;
    margin-top: 30px;
`,QuestionWrapper=ut.div`
    display: flex;
    justify-content: center;
    align-items: center;
    width: 320px;
    height: 92px;
    background-color: #fff0f6;
    border-radius: 10px;
`,ImageTypeWrapper=ut.div`
    display: flex;
    justify-content: center;
    align-items: center;
    width: 320px;
    height: 92px;
    background-color: #f0f8ff;
    border-radius: 10px;
`,Container=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    gap: 20px;
    padding-top: 20px;
    padding-bottom: 20px;
`,MainContainerWrapper=ut(MainContainer)`
    width: 700px;
    // 높이는 화면에 따라 조절해야함. 바닥에서 20px 떨어지게 하기
    height: 75vh;
    margin: 0 auto;
    border: none;
`,google="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEgAAABICAYAAABV7bNHAAAACXBIWXMAACE4AAAhOAFFljFgAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAnqSURBVHgB7dwJdBT1HQfw33+OzR7JZnMfhDMEpFEIimKV4xUKWFHucl+pAoUA9hUQpfSBzwItjfIMWjnVRsMtGJAql0EEBJIWREMMRziWbM7d7CZ7zvXvbFor1GR29sixvP28x0vY+c8w893//Oc/8/8PACEhISEhIcEKQRvCp09HNBzenwSMOZ4TqE5CbbUCWAZIXQwgxmEAoExU70f0mpdWVCOEMLSBVg2oasfWhLCCE6N4g6EfVqkfB1tDhsAw0vuAEJBarQkwFGGKLNQ81u+o6pU1p6CVtHhA+OxZlWX7xmmcxTgdW20DMMuQ4CekVleT0bF7oEP81ui1716GFtRiAdVnzYzhqivn8HbHcux06qAFIIoCIkL7WdgjfTaEr1p/DFpAwAPCe/aEmz/J+w3XYFmJ7bY4aAWIogG0kbvDuvZYpV3/VikEUEADsi5bkOEqvfI+b7NlQBsglGoL1b37Ot1b2/8CARKwgEwvTl3BG+6sxC6XCtoY1TX1c1qlmhmx8f0a8JPfAdWt/p1OuPL9X3mj8UVoRwht5A0K4eG6/SfKwA8E+MHd3gjFJfntLRw3od6SylNhmeAnnwPCx/MTTDu3HeVNpkHQDhEJCZuidx9eBX6iwAcYY9qUOTGPr6/7ObRDlBhOVN6hxWLvWwA/+RSQaeLINbypZigEmHhAjT/FLwB8RaV0+ijqg31ZgQincZ/AS6Zpo6dyVRV5gP27NUI0DWSk7nteQHsokrgOiR30RITGBmo1cPqbNFTVRhBabU/MOIcK1obBgtUa6WmbVHJKblTu/sxAhdO4n94Udsye3MVmrCgW7HY1+CpMaSZjYrYrnxqSp5m/+KKcVXBRkbp+y4YxrN26WKgw9G+qjLvNick7lBXIcNy8Csg4ftgR3mweDj5w3xZQsXFvUDNnr48YMa4afGRZlDmF1euzhQZL8g+f3dPmsBBgsgMyL8icwFwt3uvLqSXeL91SDhgyN3zpHwJyv2TPyUlxFH7xJm8o//V/25xZga45P5AVkNhoksYJg4oFs7MneEk8gHPK3n0nqpes1EMAiftEmObNHB+9OffjlgrHTVZA3OnuEzl99W7rgc4gGJUgF5mcUhidu3+geAAuCFKyOooIMcvJOAdoZ14HRU+LnFXEG0dVCQx6clwwh+PmsQbhi8MyOOPJ+642zlNJ4LwQD5htenVCE27muvQcmJiz6TsIch5rEGe9Nun/P1MOqgDNhDIgdEzTG01K2vYghOPmsQaxJ+P0wJlTmlom1NNgy+8C3F3NjxvUhN+MfSc3HXXs6IAHgGQNcn47K7W5cBpX1rIQMf0aKPvVin/5z+VfkZS44UEJx00yINp29jnwRKyDqmF3QfPMXSASlXbtph1b4QEiebOKXZaHQCZFHyPQ/bR7xauWE/wwKcf+htip6QCtIDES1W+cpZorVUY6IMz0AC8QGt1R8JPZgX/FcrgXtAIXizixw7lQ/FKZ5spInmKIUMiuQeLtOZDxL5yHIGJ1YurcLUiWKtNsQLh4jwJ4RxLIhOhIE+o07wYEmZI7XDep5c3XoNhrUZh3yr6ZxQJfDkGozo47SS1vPqCbB8Eb4nlshSBkMAqSN5d+jWrcCyFaAUGIJASN1PLmA+o6Crwh8PZwCEKIIBip5c0HVJtWhwil7Kdj4vP2eAhCUVpCst/WbEAofSIDZPhdkAnzjihXxb50CDLJEXSl1HLpNgjb/wlyYQ6o2yufhiCTkgiSQ9PS42JIZRCfAINcFx3KYeKPLeAHBQm3xGEgn8br3DgOp7I8lnXxCaMRpHX3IyBBEVOIWCN4wmMEuY402Mf0ei6/LDthdLdfVoGPDi3VPAs+2lOMFdsP2WU/SYjTImNHhCTLSybNqR47JjbzUkXAJHYjft/wJGyxPwQmjlG+d2Vfm01kuPANM0Zu7XEjCexxrqPkxtQZueVAR5U0t7yUi4Q5lgFwgflxIpmTZ5eNOTC7RabceXKjkh3rTXklRRR6KuM5bUzm/eQj8SHQp85OkGV5Ggz8/YOsRoc5UhsenwOtLPNvjm52Bo3xZp0eSfC1pzIeA6JSxh4EpPjfuJMN0/B6QwastWaIvzfdhN0w6yePPTxvGLQik1N4RTy9ZI9JRWuI8uGdys56KucxIJT69rdIoTvi/t1dWxZYnoLPXB1Bqgfp4hm6ym7Zvbrw3YehFaw7xI21u/Acb9ZJjCTy09PTGU/lZDVoHCI3fM2l4DnmgXCV8zjJohHDs1EFt88cnHpiSWdoQS/vcvUq+M6Zw3sxtkqRYgcxmtwhp6zcoWdiwN7JBS6B83o2GU3QJYma5DEHRr55FQIs6wNXur6WO2Z1YdnPrdzitaho1yLN43LKyhxZRULfhIdfQz7M+WQFtlelzfDlSyf/tBgCaM6H+mnXKtnT3objPoLUBCrbm/KyPX9w/uYKe/Vc8IE73Bil7kSyNjrrvSHrfZ7svaBgdffbtsrsGjMerapcBKSrizeruzuH3+xaqO4r9+UYrwL6+NappOzCty+wPJ8CPiLEjqdOoc3vFtXh70sGz/hHGkrzOHa/uaiI/rJu5/P1TusUsRsxnhW4xv1G4lVUWTMb6IaBIId7ht/QdGLAitHqMyCT1+dM5hevDi6tvXmMEVga/KSilGYlpTivIVXnBISvq8gwOym2oFaXTeFwucJJik4hCTS0zlnfm+EZbXPbUZhHQJh5FCBe+pFUWiK5afMLqvngBZ8mks86tnxlsfH669COkExHUFdlAWKabpK0anQjo4P6idUTkQm84NOrSZdyT5/5qrKwY63D3BfaCUzWA6cpAoJNFv8k3rcsjILKtFj62T9Po+6Al3x+FUG89KNxny/O01sMU6CdURonAG15RmyjaFAqED+yD5qRNVy9E3zg17sa7v7RyE/n5VTbjFnQzlD2vqCrmyGkRsfPfidT9SH4KCBv+/ziwKxXnZxrDcuzbfoO7L2UpMI6MGHgjHWDFnwCfgjYAU0/8vIYvdWw1cY6YqGNaWjlrR4RncduHb72EvgpoN949r+2dS4ov5BTY68bJeAWm3gqqUdU1+2/fXTyHwfF9auAAGiRU2LRqTUjS0zXs83OevmTH/zgfsdDgagzo7oPWb/80bneDQl72ja0EPfc6unHl02yOK3LK201vaEFuHvlccqoS+FhmtUrMpYf75OYaIMAa5VGdelXa/uXNRim17nqJze4bH61Ue7aEkFr7upUkQd7Rvf4aF3/hR6fCvr170ErcncLXju/8YmimisjeCxkcAKbxgh8Lxtja/apQmSYllOTYZfrWdvlWHV0af/knx1d1nvuxdb6nxja/LJchIvUF0vLEq7WlUfdsdxu/Cw2UhwE4FhrF6KbeelTM4xiGDyEhISEhISEeOnfFqy6K9TEEoMAAAAASUVORK5CYII=",provider=new GoogleAuthProvider,NewLogin=()=>{const o=getAuth(),i=useNavigate(),{user:s,login:a,logout:et}=useAuth(),tt=()=>{signInWithPopup(o,provider).then(async ot=>{console.log(ot.user.email);try{const dt=await getDocs(collection(db,"users")),ht=[];if(dt.forEach(ft=>{console.log(`${ft.id} => ${ft.data().email}`),ht.push(ft.data().email)}),!ht.includes(ot.user.email)){const ft=await addDoc(collection(db,"users"),{email:ot.user.email,uid:ot.user.uid})}i("/")}catch(dt){console.log("[Err]",dt)}console.log(ot)}).catch(ot=>{console.log(ot)})};return reactExports.useEffect(()=>{o.onAuthStateChanged(ot=>{a(ot)})},[]),jsxRuntimeExports.jsxs(Wrapper,{children:[jsxRuntimeExports.jsx(LogoContainer,{children:jsxRuntimeExports.jsx(LogoImage,{src:title})}),jsxRuntimeExports.jsxs(LoginContainer,{children:["나만의 학습 어시스턴트 지금 시작하기",jsxRuntimeExports.jsxs(GoogleLoginButton,{onClick:()=>{tt()},children:[jsxRuntimeExports.jsx(GoogleIcon,{src:google,alt:""}),"Google 로그인"]})]})]})},Wrapper=ut.div`
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    width: 100%;
    background-color: rgb(253, 253, 253);
`,LogoContainer=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 50%;
    height: 100%;
`,LoginContainer=ut.div`
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    width: 50%;
    height: 100%;
    font-family: 'Noto Sans KR', sans-serif;
    font-size: 34px;
    font-stretch: narrower;
    font-weight: bold;
`,LogoImage=ut.img`
    width: 700px;
    margin-left: 80px;
`,GoogleLoginButton=ut.button`
    width: 300px;
    height: 50px;
    background-color: #fff;
    border: 0.5px solid #000000bb;
    border-radius: 10px;
    font-size: 20px;
    font-weight: bold;
    cursor: pointer;
    display: flex;
    justify-content: center;
    align-items: center;
    margin-top: 30px;
`,GoogleIcon=ut.img`
    width: 30px;
    height: 30px;
    margin-right: 30px;
`,Register=()=>{const[o,i]=reactExports.useState(!1),[s,a]=reactExports.useState(!1),et=useNavigate(),tt=async ot=>{a(!0),ot.preventDefault();const dt=ot.target[0].value,ht=ot.target[1].value;try{const ft=await createUserWithEmailAndPassword(auth,dt,ht);console.log(ft);const pt=await addDoc(collection(db,"users"),{email:dt,uid:ft.user.uid});console.log("Document written with ID: ",pt.id),et("/login")}catch(ft){console.log("[Err]",ft),i(!0),a(!1)}finally{a(!1)}};return reactExports.useEffect(()=>{auth.onAuthStateChanged(ot=>{ot&&et("/")})},[]),jsxRuntimeExports.jsx("div",{className:"formContainer",children:jsxRuntimeExports.jsxs("div",{className:"formWrapper",children:[jsxRuntimeExports.jsx("span",{className:"logo",children:"Lama Chat"}),jsxRuntimeExports.jsx("span",{className:"title",children:"Register"}),jsxRuntimeExports.jsxs("form",{onSubmit:tt,children:[jsxRuntimeExports.jsx("input",{required:!0,type:"email",placeholder:"email"}),jsxRuntimeExports.jsx("input",{required:!0,type:"password",placeholder:"password"}),jsxRuntimeExports.jsx("button",{disabled:s,children:"Sign up"}),o&&jsxRuntimeExports.jsx("span",{children:"Something went wrong"})]}),jsxRuntimeExports.jsxs("p",{children:["You do have an account? ",jsxRuntimeExports.jsx(Link,{to:"/login",children:"Login"})]})]})})},queryClient=new QueryClient,router=createBrowserRouter([{path:"/",element:jsxRuntimeExports.jsx(HomePage,{}),errorElement:jsxRuntimeExports.jsx(ErrorPage,{})},{path:"/chatbot",element:jsxRuntimeExports.jsx(NewChatbotPage,{}),errorElement:jsxRuntimeExports.jsx(ErrorPage,{})},{path:"/login",element:jsxRuntimeExports.jsx(NewLogin,{}),errorElement:jsxRuntimeExports.jsx(ErrorPage,{})},{path:"/register",element:jsxRuntimeExports.jsx(Register,{}),errorElement:jsxRuntimeExports.jsx(ErrorPage,{})}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(AuthProvider,{children:jsxRuntimeExports.jsx(QueryClientProvider,{client:queryClient,children:jsxRuntimeExports.jsx(RouterProvider,{router})})}));
